{"version":3,"file":"3662.4eaa4957370cc7cd9b25.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/audit_table/holders.ts","webpack://mattermost-webapp/./src/components/audit_table/audit_row/audit_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/channel_row/channel_create_direct_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/channel_row/channel_default_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/channel_row/channel_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/user_row/user_update_active_session_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/user_row/user_row.tsx","webpack://mattermost-webapp/./src/components/audit_table/format_audit.tsx","webpack://mattermost-webapp/./src/components/audit_table/audit_table.tsx","webpack://mattermost-webapp/./src/components/audit_table/index.ts","webpack://mattermost-webapp/./src/components/form_error.tsx","webpack://mattermost-webapp/./src/components/localized_placeholder_textarea.tsx","webpack://mattermost-webapp/./src/components/setting_item.tsx","webpack://mattermost-webapp/./src/components/setting_item_max.tsx","webpack://mattermost-webapp/./src/components/setting_item_min.tsx","webpack://mattermost-webapp/./src/components/user_settings/headers/setting_desktop_header.tsx","webpack://mattermost-webapp/./src/components/user_settings/headers/setting_mobile_header.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_denied_section_notice.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_never_granted_section_notice.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_unsupported_section_notice.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_desktop_denied_section_notice.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/index.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_title_tag/index.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_and_mobile_notification_setting/index.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/desktop_notification_sounds_setting/index.tsx","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/notify_props.ts","webpack://mattermost-webapp/./src/components/user_settings/notifications/email_notification_setting/email_notification_setting.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/email_notification_setting/index.ts","webpack://mattermost-webapp/./src/components/user_settings/notifications/manage_auto_responder/manage_auto_responder.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/send_test_notification_notice.tsx","webpack://mattermost-webapp/./src/components/user_settings/notifications/user_settings_notifications.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_edit_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/icons/fa_warning_icon.tsx","webpack://mattermost-webapp/./src/components/widgets/modals/components/base_setting_item.tsx","webpack://mattermost-webapp/./src/components/widgets/modals/components/react_select_item.tsx","webpack://mattermost-webapp/./src/utils/password.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {defineMessages} from 'react-intl';\r\n\r\nconst holders = defineMessages({\r\n    sessionRevoked: {\r\n        id: 'audit_table.sessionRevoked',\r\n        defaultMessage: 'The session with id {sessionId} was revoked',\r\n    },\r\n    channelCreated: {\r\n        id: 'audit_table.channelCreated',\r\n        defaultMessage: 'Created the {channelName} channel',\r\n    },\r\n    establishedDM: {\r\n        id: 'audit_table.establishedDM',\r\n        defaultMessage: 'Established a direct message channel with {username}',\r\n    },\r\n    nameUpdated: {\r\n        id: 'audit_table.nameUpdated',\r\n        defaultMessage: 'Updated the {channelName} channel name',\r\n    },\r\n    headerUpdated: {\r\n        id: 'audit_table.headerUpdated',\r\n        defaultMessage: 'Updated the {channelName} channel header',\r\n    },\r\n    channelDeleted: {\r\n        id: 'audit_table.channelDeleted',\r\n        defaultMessage: 'Archived the channel with the URL {url}',\r\n    },\r\n    userAdded: {\r\n        id: 'audit_table.userAdded',\r\n        defaultMessage: 'Added {username} to the {channelName} channel',\r\n    },\r\n    userRemoved: {\r\n        id: 'audit_table.userRemoved',\r\n        defaultMessage: 'Removed {username} to the {channelName} channel',\r\n    },\r\n    attemptedRegisterApp: {\r\n        id: 'audit_table.attemptedRegisterApp',\r\n        defaultMessage: 'Attempted to register a new OAuth Application with ID {id}',\r\n    },\r\n    attemptedAllowOAuthAccess: {\r\n        id: 'audit_table.attemptedAllowOAuthAccess',\r\n        defaultMessage: 'Attempted to allow a new OAuth service access',\r\n    },\r\n    successfullOAuthAccess: {\r\n        id: 'audit_table.successfullOAuthAccess',\r\n        defaultMessage: 'Successfully gave a new OAuth service access',\r\n    },\r\n    failedOAuthAccess: {\r\n        id: 'audit_table.failedOAuthAccess',\r\n        defaultMessage: 'Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback',\r\n    },\r\n    attemptedOAuthToken: {\r\n        id: 'audit_table.attemptedOAuthToken',\r\n        defaultMessage: 'Attempted to get an OAuth access token',\r\n    },\r\n    successfullOAuthToken: {\r\n        id: 'audit_table.successfullOAuthToken',\r\n        defaultMessage: 'Successfully added a new OAuth service',\r\n    },\r\n    oauthTokenFailed: {\r\n        id: 'audit_table.oauthTokenFailed',\r\n        defaultMessage: 'Failed to get an OAuth access token - {token}',\r\n    },\r\n    attemptedLogin: {\r\n        id: 'audit_table.attemptedLogin',\r\n        defaultMessage: 'Attempted to login',\r\n    },\r\n    authenticated: {\r\n        id: 'audit_table.authenticated',\r\n        defaultMessage: 'Successfully authenticated',\r\n    },\r\n    successfullLogin: {\r\n        id: 'audit_table.successfullLogin',\r\n        defaultMessage: 'Successfully logged in',\r\n    },\r\n    failedLogin: {\r\n        id: 'audit_table.failedLogin',\r\n        defaultMessage: 'FAILED login attempt',\r\n    },\r\n    updatePicture: {\r\n        id: 'audit_table.updatePicture',\r\n        defaultMessage: 'Updated your profile picture',\r\n    },\r\n    updateGeneral: {\r\n        id: 'audit_table.updateGeneral',\r\n        defaultMessage: 'Updated the general settings of your account',\r\n    },\r\n    attemptedPassword: {\r\n        id: 'audit_table.attemptedPassword',\r\n        defaultMessage: 'Attempted to change password',\r\n    },\r\n    successfullPassword: {\r\n        id: 'audit_table.successfullPassword',\r\n        defaultMessage: 'Successfully changed password',\r\n    },\r\n    failedPassword: {\r\n        id: 'audit_table.failedPassword',\r\n        defaultMessage: 'Failed to change password - tried to update user password who was logged in through OAuth',\r\n    },\r\n    updatedRol: {\r\n        id: 'audit_table.updatedRol',\r\n        defaultMessage: 'Updated user role(s) to ',\r\n    },\r\n    member: {\r\n        id: 'audit_table.member',\r\n        defaultMessage: 'member',\r\n    },\r\n    accountActive: {\r\n        id: 'audit_table.accountActive',\r\n        defaultMessage: 'Account activated',\r\n    },\r\n    accountInactive: {\r\n        id: 'audit_table.accountInactive',\r\n        defaultMessage: 'Account deactivated',\r\n    },\r\n    by: {\r\n        id: 'audit_table.by',\r\n        defaultMessage: ' by {username}',\r\n    },\r\n    byAdmin: {\r\n        id: 'audit_table.byAdmin',\r\n        defaultMessage: ' by an admin',\r\n    },\r\n    sentEmail: {\r\n        id: 'audit_table.sentEmail',\r\n        defaultMessage: 'Sent an email to {email} to reset your password',\r\n    },\r\n    attemptedReset: {\r\n        id: 'audit_table.attemptedReset',\r\n        defaultMessage: 'Attempted to reset password',\r\n    },\r\n    successfullReset: {\r\n        id: 'audit_table.successfullReset',\r\n        defaultMessage: 'Successfully reset password',\r\n    },\r\n    updateGlobalNotifications: {\r\n        id: 'audit_table.updateGlobalNotifications',\r\n        defaultMessage: 'Updated your global notification settings',\r\n    },\r\n    attemptedWebhookCreate: {\r\n        id: 'audit_table.attemptedWebhookCreate',\r\n        defaultMessage: 'Attempted to create a webhook',\r\n    },\r\n    succcessfullWebhookCreate: {\r\n        id: 'audit_table.successfullWebhookCreate',\r\n        defaultMessage: 'Successfully created a webhook',\r\n    },\r\n    failedWebhookCreate: {\r\n        id: 'audit_table.failedWebhookCreate',\r\n        defaultMessage: 'Failed to create a webhook - bad channel permissions',\r\n    },\r\n    attemptedWebhookDelete: {\r\n        id: 'audit_table.attemptedWebhookDelete',\r\n        defaultMessage: 'Attempted to delete a webhook',\r\n    },\r\n    successfullWebhookDelete: {\r\n        id: 'audit_table.successfullWebhookDelete',\r\n        defaultMessage: 'Successfully deleted a webhook',\r\n    },\r\n    failedWebhookDelete: {\r\n        id: 'audit_table.failedWebhookDelete',\r\n        defaultMessage: 'Failed to delete a webhook - inappropriate conditions',\r\n    },\r\n    logout: {\r\n        id: 'audit_table.logout',\r\n        defaultMessage: 'Logged out of your account',\r\n    },\r\n    verified: {\r\n        id: 'audit_table.verified',\r\n        defaultMessage: 'Successfully verified your email address',\r\n    },\r\n    revokedAll: {\r\n        id: 'audit_table.revokedAll',\r\n        defaultMessage: 'Revoked all current sessions for the team',\r\n    },\r\n    loginAttempt: {\r\n        id: 'audit_table.loginAttempt',\r\n        defaultMessage: ' (Login attempt)',\r\n    },\r\n    loginFailure: {\r\n        id: 'audit_table.loginFailure',\r\n        defaultMessage: ' (Login failure)',\r\n    },\r\n    attemptedLicenseAdd: {\r\n        id: 'audit_table.attemptedLicenseAdd',\r\n        defaultMessage: 'Attempted to add new license',\r\n    },\r\n    successfullLicenseAdd: {\r\n        id: 'audit_table.successfullLicenseAdd',\r\n        defaultMessage: 'Successfully added new license',\r\n    },\r\n    failedExpiredLicenseAdd: {\r\n        id: 'audit_table.failedExpiredLicenseAdd',\r\n        defaultMessage: 'Failed to add a new license as it has either expired or not yet been started',\r\n    },\r\n    failedInvalidLicenseAdd: {\r\n        id: 'audit_table.failedInvalidLicenseAdd',\r\n        defaultMessage: 'Failed to add an invalid license',\r\n    },\r\n    licenseRemoved: {\r\n        id: 'audit_table.licenseRemoved',\r\n        defaultMessage: 'Successfully removed a license',\r\n    },\r\n});\r\n\r\nexport default holders;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedDate, FormattedTime, useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {toTitleCase} from 'utils/utils';\r\n\r\nimport holders from '../holders';\r\n\r\nexport type Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    desc?: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n}\r\n\r\nexport default function AuditRow({\r\n    actionURL,\r\n    audit,\r\n    desc: aDesc,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n}: Props) {\r\n    const intl = useIntl();\r\n    let desc = aDesc;\r\n    if (!desc) {\r\n        /* Currently not called anywhere */\r\n        if (audit.extra_info.indexOf('revoked_all=') >= 0) {\r\n            desc = intl.formatMessage(holders.revokedAll);\r\n        } else {\r\n            let actionDesc = '';\r\n            if (actionURL && actionURL.lastIndexOf('/') !== -1) {\r\n                actionDesc = actionURL.substring(actionURL.lastIndexOf('/') + 1).replace('_', ' ');\r\n                actionDesc = toTitleCase(actionDesc);\r\n            }\r\n\r\n            let extraInfoDesc = '';\r\n            if (audit.extra_info) {\r\n                extraInfoDesc = audit.extra_info;\r\n\r\n                if (extraInfoDesc.indexOf('=') !== -1) {\r\n                    extraInfoDesc = extraInfoDesc.substring(extraInfoDesc.indexOf('=') + 1);\r\n                }\r\n            }\r\n            desc = actionDesc + ' ' + extraInfoDesc;\r\n        }\r\n    }\r\n\r\n    const date = new Date(audit.create_at);\r\n    const timestamp = (\r\n        <div>\r\n            <div>\r\n                <FormattedDate\r\n                    value={date}\r\n                    day='2-digit'\r\n                    month='short'\r\n                    year='numeric'\r\n                />\r\n            </div>\r\n            <div>\r\n                <FormattedTime\r\n                    value={date}\r\n                    hour='2-digit'\r\n                    minute='2-digit'\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const ip = audit.ip_address;\r\n    const sessionId = audit.session_id;\r\n\r\n    const auditProfile = useSelector((state: GlobalState) => getUser(state, audit.user_id));\r\n    const userId = auditProfile ? auditProfile.email : audit.user_id;\r\n    let uContent;\r\n    if (showUserId) {\r\n        uContent = <td className='word-break--all'>{userId}</td>;\r\n    }\r\n\r\n    let iContent;\r\n    if (showIp) {\r\n        iContent = (\r\n            <td className='whitespace--nowrap word-break--all'>\r\n                {ip}\r\n            </td>\r\n        );\r\n    }\r\n\r\n    let sContent;\r\n    if (showSession) {\r\n        sContent = (\r\n            <td className='whitespace--nowrap word-break--all'>\r\n                {sessionId}\r\n            </td>\r\n        );\r\n    }\r\n\r\n    let descStyle = '';\r\n    if (desc.toLowerCase().indexOf('fail') !== -1) {\r\n        descStyle = ' color--error';\r\n    }\r\n\r\n    return (\r\n        <tr key={audit.id}>\r\n            <td className='whitespace--nowrap word-break--all'>\r\n                {timestamp}\r\n            </td>\r\n            {uContent}\r\n            <td className={'word-break--all' + descStyle}>{desc}</td>\r\n            {iContent}\r\n            {sContent}\r\n        </tr>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport {getDirectTeammate} from 'mattermost-redux/selectors/entities/channels';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AuditRow from '../audit_row/audit_row';\r\nimport holders from '../holders';\r\n\r\ntype Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n    channelObj?: Channel | null;\r\n}\r\n\r\nexport default function ChannelCreateDirectRow({\r\n    audit,\r\n    actionURL,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n    channelObj,\r\n}: Props) {\r\n    const intl = useIntl();\r\n\r\n    const channelId = channelObj?.id ?? '';\r\n\r\n    const desc = intl.formatMessage(holders.establishedDM, {\r\n        username: useSelector((state: GlobalState) =>\r\n            getDirectTeammate(state, channelId),\r\n        )?.username,\r\n    });\r\n    return (\r\n        <AuditRow\r\n            audit={audit}\r\n            actionURL={actionURL}\r\n            desc={desc}\r\n            showUserId={showUserId}\r\n            showIp={showIp}\r\n            showSession={showSession}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport AuditRow from '../audit_row/audit_row';\r\nimport holders from '../holders';\r\n\r\ntype Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n    channelInfo: string[];\r\n    channelName: string;\r\n    channelURL: string;\r\n};\r\n\r\nexport default function ChannelDefaultRow({\r\n    audit,\r\n    actionURL,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n    channelInfo,\r\n    channelName,\r\n    channelURL,\r\n}: Props) {\r\n    const intl = useIntl();\r\n\r\n    let userIdField = [];\r\n    let userId = '';\r\n    let username = '';\r\n\r\n    if (channelInfo[1]) {\r\n        userIdField = channelInfo[1].split('=');\r\n\r\n        if (userIdField.indexOf('user_id') >= 0) {\r\n            userId = userIdField[userIdField.indexOf('user_id') + 1];\r\n        }\r\n    }\r\n\r\n    const profile = useSelector((state: GlobalState) => getUser(state, userId));\r\n    if (profile) {\r\n        username = profile.username;\r\n    }\r\n\r\n    let desc = '';\r\n    if ((/\\/channels\\/[A-Za-z0-9]+\\/delete/).test(actionURL)) {\r\n        desc = intl.formatMessage(holders.channelDeleted, {url: channelURL});\r\n    } else if ((/\\/channels\\/[A-Za-z0-9]+\\/add/).test(actionURL)) {\r\n        desc = intl.formatMessage(holders.userAdded, {username, channelName});\r\n    } else if ((/\\/channels\\/[A-Za-z0-9]+\\/remove/).test(actionURL)) {\r\n        desc = intl.formatMessage(holders.userRemoved, {\r\n            username,\r\n            channelName,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <AuditRow\r\n            audit={audit}\r\n            actionURL={actionURL}\r\n            desc={desc}\r\n            showUserId={showUserId}\r\n            showIp={showIp}\r\n            showSession={showSession}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getChannelByName} from 'mattermost-redux/selectors/entities/channels';\r\n\r\nimport ChannelCreateDirectRow from './channel_create_direct_row';\r\nimport ChannelDefaultRow from './channel_default_row';\r\n\r\nimport AuditRow from '../audit_row/audit_row';\r\nimport holders from '../holders';\r\n\r\ntype Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n}\r\n\r\nexport default function ChannelRow({\r\n    audit,\r\n    actionURL,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n}: Props): JSX.Element {\r\n    const props = {\r\n        showUserId,\r\n        showIp,\r\n        showSession,\r\n    };\r\n    const intl = useIntl();\r\n\r\n    const channelInfo = audit.extra_info.split(' ');\r\n    const channelNameField = channelInfo[0].split('=');\r\n\r\n    const channelURL = channelNameField.indexOf('name') >= 0 ? channelNameField[channelNameField.indexOf('name') + 1] : '';\r\n    const channelObj = useSelector((state: GlobalState) => getChannelByName(state, channelURL));\r\n    const channelName = channelObj?.display_name ?? channelURL;\r\n\r\n    switch (actionURL) {\r\n    case '/channels/create':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.channelCreated, {channelName})}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/channels/create_direct':\r\n        return (\r\n            <ChannelCreateDirectRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                showUserId={showUserId}\r\n                showIp={showIp}\r\n                showSession={showSession}\r\n                channelObj={channelObj}\r\n            />\r\n        );\r\n    case '/channels/update':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.nameUpdated, {channelName})}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/channels/update_desc': // support the old path\r\n    case '/channels/update_header':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.headerUpdated, {channelName})}\r\n                {...props}\r\n            />\r\n        );\r\n    default: {\r\n        return (\r\n            <ChannelDefaultRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                showUserId={showUserId}\r\n                showIp={showIp}\r\n                showSession={showSession}\r\n                channelInfo={channelInfo}\r\n                channelName={channelName}\r\n                channelURL={channelURL}\r\n            />\r\n        );\r\n    }\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getCurrentUser, getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {isSystemAdmin} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport AuditRow from '../audit_row/audit_row';\r\nimport holders from '../holders';\r\n\r\ntype Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n    updateField: string;\r\n    userInfo: string[];\r\n}\r\n\r\nexport default function UserUpdateActiveSessionRow({\r\n    audit,\r\n    actionURL,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n    updateField,\r\n    userInfo,\r\n}: Props): JSX.Element {\r\n    const intl = useIntl();\r\n\r\n    let desc = '';\r\n\r\n    if (updateField === 'true') {\r\n        desc = intl.formatMessage(holders.accountActive);\r\n    } else if (updateField === 'false') {\r\n        desc = intl.formatMessage(holders.accountInactive);\r\n    }\r\n\r\n    const actingUserInfo = userInfo[1].split('=');\r\n    const isSessionUser = actingUserInfo[0] === 'session_user';\r\n    const actingUser = useSelector((state: GlobalState) => getUser(state, isSessionUser ? actingUserInfo[1] : ''));\r\n    const user = useSelector((state: GlobalState) => getCurrentUser(state));\r\n    if (isSessionUser) {\r\n        if (user && actingUser && isSystemAdmin(user.roles)) {\r\n            desc += intl.formatMessage(holders.by, {\r\n                username: actingUser.username,\r\n            });\r\n        } else if (user && actingUser) {\r\n            desc += intl.formatMessage(holders.byAdmin);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AuditRow\r\n            audit={audit}\r\n            actionURL={actionURL}\r\n            desc={desc}\r\n            showUserId={showUserId}\r\n            showIp={showIp}\r\n            showSession={showSession}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\n\r\nimport UserUpdateActiveSessionRow from './user_update_active_session_row';\r\n\r\nimport AuditRow from '../audit_row/audit_row';\r\nimport holders from '../holders';\r\n\r\ntype Props = {\r\n    audit: Audit;\r\n    actionURL: string;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n}\r\n\r\nexport default function UserRow({\r\n    audit,\r\n    actionURL,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n}: Props): JSX.Element {\r\n    const props = {\r\n        showUserId,\r\n        showIp,\r\n        showSession,\r\n    };\r\n    const intl = useIntl();\r\n\r\n    const userInfo = audit.extra_info.split(' ');\r\n\r\n    let desc = '';\r\n    switch (actionURL) {\r\n    case '/users/login':\r\n        if (userInfo[0] === 'attempt') {\r\n            desc = intl.formatMessage(holders.attemptedLogin);\r\n        } else if (userInfo[0] === 'success') {\r\n            desc = intl.formatMessage(holders.successfullLogin);\r\n        } else if (userInfo[0] === 'authenticated') {\r\n            desc = intl.formatMessage(holders.authenticated);\r\n        } else if (userInfo[0]) {\r\n            desc = intl.formatMessage(holders.failedLogin);\r\n        }\r\n\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={desc}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/revoke_session':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.sessionRevoked, {\r\n                    sessionId: userInfo[0].split('=')[1],\r\n                })}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/newimage':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.updatePicture)}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/update':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.updateGeneral)}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/newpassword':\r\n        if (userInfo[0] === 'attempted') {\r\n            desc = intl.formatMessage(holders.attemptedPassword);\r\n        } else if (userInfo[0] === 'completed') {\r\n            desc = intl.formatMessage(holders.successfullPassword);\r\n        } else if (\r\n            userInfo[0] ===\r\n                'failed - tried to update user password who was logged in through oauth'\r\n        ) {\r\n            desc = intl.formatMessage(holders.failedPassword);\r\n        }\r\n\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.updateGeneral)}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/update_roles': {\r\n        const userRoles = userInfo[0].split('=')[1];\r\n\r\n        desc = intl.formatMessage(holders.updatedRol);\r\n        if (userRoles.trim()) {\r\n            desc += userRoles;\r\n        } else {\r\n            desc += intl.formatMessage(holders.member);\r\n        }\r\n\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={desc}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n    case '/users/update_active': {\r\n        const updateType = userInfo[0].split('=')[0];\r\n        const updateField = userInfo[0].split('=')[1];\r\n\r\n        /* Either describes account activation/deactivation or a revoked session as part of an account deactivation */\r\n        if (updateType === 'active') {\r\n            return (\r\n                <UserUpdateActiveSessionRow\r\n                    audit={audit}\r\n                    actionURL={actionURL}\r\n                    showUserId={showUserId}\r\n                    showIp={showIp}\r\n                    showSession={showSession}\r\n                    updateField={updateField}\r\n                    userInfo={userInfo}\r\n                />\r\n            );\r\n        } else if (updateType === 'session_id') {\r\n            desc = intl.formatMessage(holders.sessionRevoked, {\r\n                sessionId: updateField,\r\n            });\r\n        }\r\n\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={desc}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n    case '/users/send_password_reset':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.sentEmail, {\r\n                    email: userInfo[0].split('=')[1],\r\n                })}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/reset_password':\r\n        if (userInfo[0] === 'attempt') {\r\n            desc = intl.formatMessage(holders.attemptedReset);\r\n        } else if (userInfo[0] === 'success') {\r\n            desc = intl.formatMessage(holders.successfullReset);\r\n        }\r\n\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={desc}\r\n                {...props}\r\n            />\r\n        );\r\n    case '/users/update_notify':\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={intl.formatMessage(holders.updateGlobalNotifications)}\r\n                {...props}\r\n            />\r\n        );\r\n    default:\r\n        return (\r\n            <AuditRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                desc={desc}\r\n                showUserId={showUserId}\r\n                showIp={showIp}\r\n                showSession={showSession}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\n\r\nimport {toTitleCase} from 'utils/utils';\r\n\r\nimport AuditRow from './audit_row/audit_row';\r\nimport ChannelRow from './channel_row/channel_row';\r\nimport holders from './holders';\r\nimport UserRow from './user_row/user_row';\r\n\r\nexport type Props = {\r\n    audit: Audit;\r\n    showUserId: boolean;\r\n    showIp: boolean;\r\n    showSession: boolean;\r\n}\r\n\r\nexport default function FormatAudit({\r\n    audit,\r\n    showUserId,\r\n    showIp,\r\n    showSession,\r\n}: Props) {\r\n    const intl = useIntl();\r\n    const actionURL = audit.action.replace(/\\/api\\/v[1-9]/, '');\r\n\r\n    if (actionURL.indexOf('/channels') === 0) {\r\n        return (\r\n            <ChannelRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                showUserId={showUserId}\r\n                showIp={showIp}\r\n                showSession={showSession}\r\n            />\r\n        );\r\n    }\r\n\r\n    if (actionURL.indexOf('/users') === 0) {\r\n        return (\r\n            <UserRow\r\n                audit={audit}\r\n                actionURL={actionURL}\r\n                showUserId={showUserId}\r\n                showIp={showIp}\r\n                showSession={showSession}\r\n            />\r\n        );\r\n    }\r\n\r\n    const {formatMessage} = intl;\r\n    let auditDesc = '';\r\n\r\n    if (actionURL.indexOf('/oauth') === 0) {\r\n        const oauthInfo = audit.extra_info.split(' ');\r\n\r\n        switch (actionURL) {\r\n        case '/oauth/register': {\r\n            const clientIdField = oauthInfo[0].split('=');\r\n\r\n            if (clientIdField[0] === 'client_id') {\r\n                auditDesc = formatMessage(holders.attemptedRegisterApp, {id: clientIdField[1]});\r\n            }\r\n\r\n            break;\r\n        }\r\n        case '/oauth/allow':\r\n            if (oauthInfo[0] === 'attempt') {\r\n                auditDesc = formatMessage(holders.attemptedAllowOAuthAccess);\r\n            } else if (oauthInfo[0] === 'success') {\r\n                auditDesc = formatMessage(holders.successfullOAuthAccess);\r\n            } else if (oauthInfo[0] === 'fail - redirect_uri did not match registered callback') {\r\n                auditDesc = formatMessage(holders.failedOAuthAccess);\r\n            }\r\n\r\n            break;\r\n        case '/oauth/access_token':\r\n            if (oauthInfo[0] === 'attempt') {\r\n                auditDesc = formatMessage(holders.attemptedOAuthToken);\r\n            } else if (oauthInfo[0] === 'success') {\r\n                auditDesc = formatMessage(holders.successfullOAuthToken);\r\n            } else {\r\n                const oauthTokenFailure = oauthInfo[0].split('-');\r\n\r\n                if (oauthTokenFailure[0].trim() === 'fail' && oauthTokenFailure[1]) {\r\n                    auditDesc = formatMessage(holders.oauthTokenFailed, {token: oauthTokenFailure[1].trim()});\r\n                }\r\n            }\r\n\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    } else if (actionURL.indexOf('/hooks') === 0) {\r\n        const webhookInfo = audit.extra_info;\r\n\r\n        switch (actionURL) {\r\n        case '/hooks/incoming/create':\r\n            if (webhookInfo === 'attempt') {\r\n                auditDesc = formatMessage(holders.attemptedWebhookCreate);\r\n            } else if (webhookInfo === 'success') {\r\n                auditDesc = formatMessage(holders.succcessfullWebhookCreate);\r\n            } else if (webhookInfo === 'fail - bad channel permissions') {\r\n                auditDesc = formatMessage(holders.failedWebhookCreate);\r\n            }\r\n\r\n            break;\r\n        case '/hooks/incoming/delete':\r\n            if (webhookInfo === 'attempt') {\r\n                auditDesc = formatMessage(holders.attemptedWebhookDelete);\r\n            } else if (webhookInfo === 'success') {\r\n                auditDesc = formatMessage(holders.successfullWebhookDelete);\r\n            } else if (webhookInfo === 'fail - inappropriate conditions') {\r\n                auditDesc = formatMessage(holders.failedWebhookDelete);\r\n            }\r\n\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    } else if (actionURL.indexOf('/license') === 0) {\r\n        const licenseInfo = audit.extra_info;\r\n\r\n        switch (actionURL) {\r\n        case '/license/add':\r\n            if (licenseInfo === 'attempt') {\r\n                auditDesc = formatMessage(holders.attemptedLicenseAdd);\r\n            } else if (licenseInfo === 'success') {\r\n                auditDesc = formatMessage(holders.successfullLicenseAdd);\r\n            } else if (licenseInfo === 'failed - expired or non-started license') {\r\n                auditDesc = formatMessage(holders.failedExpiredLicenseAdd);\r\n            } else if (licenseInfo === 'failed - invalid license') {\r\n                auditDesc = formatMessage(holders.failedInvalidLicenseAdd);\r\n            }\r\n\r\n            break;\r\n        case '/license/remove':\r\n            auditDesc = formatMessage(holders.licenseRemoved);\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    } else if (actionURL.indexOf('/admin/download_compliance_report') === 0) {\r\n        auditDesc = toTitleCase(audit.extra_info);\r\n    } else {\r\n        switch (actionURL) {\r\n        case '/logout':\r\n            auditDesc = formatMessage(holders.logout);\r\n            break;\r\n        case '/verify_email':\r\n            auditDesc = formatMessage(holders.verified);\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AuditRow\r\n            audit={audit}\r\n            desc={auditDesc}\r\n            actionURL={actionURL}\r\n            showUserId={showUserId}\r\n            showIp={showIp}\r\n            showSession={showSession}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\n\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport FormatAudit from './format_audit';\r\n\r\ntype Props = {\r\n    intl: IntlShape;\r\n    audits: Audit[];\r\n    showUserId?: boolean;\r\n    showIp?: boolean;\r\n    showSession?: boolean;\r\n    currentUser: UserProfile;\r\n    actions: {\r\n        getMissingProfilesByIds: (userIds: string[]) => void;\r\n    };\r\n};\r\n\r\nexport class AuditTable extends React.PureComponent<Props> {\r\n    componentDidMount() {\r\n        const ids = this.props.audits.map((audit) => audit.user_id);\r\n        this.props.actions.getMissingProfilesByIds(ids);\r\n    }\r\n\r\n    render() {\r\n        const {audits, showUserId, showIp, showSession} = this.props;\r\n\r\n        let userIdContent;\r\n        if (showUserId) {\r\n            userIdContent = (\r\n                <th>\r\n                    <FormattedMessage\r\n                        id='audit_table.userId'\r\n                        defaultMessage='User ID'\r\n                    />\r\n                </th>\r\n            );\r\n        }\r\n\r\n        let ipContent;\r\n        if (showIp) {\r\n            ipContent = (\r\n                <th>\r\n                    <FormattedMessage\r\n                        id='audit_table.ip'\r\n                        defaultMessage='IP Address'\r\n                    />\r\n                </th>\r\n            );\r\n        }\r\n\r\n        let sessionContent;\r\n        if (showSession) {\r\n            sessionContent = (\r\n                <th>\r\n                    <FormattedMessage\r\n                        id='audit_table.session'\r\n                        defaultMessage='Session ID'\r\n                    />\r\n                </th>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <table className='table'>\r\n                <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <FormattedMessage\r\n                                id='audit_table.timestamp'\r\n                                defaultMessage='Timestamp'\r\n                            />\r\n                        </th>\r\n                        {userIdContent}\r\n                        <th>\r\n                            <FormattedMessage\r\n                                id='audit_table.action'\r\n                                defaultMessage='Action'\r\n                            />\r\n                        </th>\r\n                        {ipContent}\r\n                        {sessionContent}\r\n                    </tr>\r\n                </thead>\r\n                <tbody data-testid='auditTableBody'>\r\n                    {audits.map((audit) => (\r\n                        <FormatAudit\r\n                            key={audit.id}\r\n                            audit={audit}\r\n                            showUserId={Boolean(this.props.showUserId)}\r\n                            showIp={Boolean(this.props.showIp)}\r\n                            showSession={Boolean(this.props.showSession)}\r\n                        />\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(AuditTable);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getMissingProfilesByIds} from 'mattermost-redux/actions/users';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AuditTable from './audit_table';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentUser: getCurrentUser(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getMissingProfilesByIds,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AuditTable);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nexport const TYPE_MODAL = 'modal';\r\nexport const TYPE_BACKSTAGE = 'backstage';\r\n\r\n// accepts either a single error or an array of errors\r\ntype Props = {\r\n    type?: React.ReactNode;\r\n    error?: React.ReactNode;\r\n    textClassName?: string;\r\n    iconClassName?: string;\r\n    margin?: boolean;\r\n    errors?: React.ReactNode[];\r\n};\r\n\r\nconst EMPTY_ERROR_LIST: React.ReactNode[] = [];\r\n\r\nconst FormError: React.FC<Props> = ({\r\n    error = null,\r\n    errors = EMPTY_ERROR_LIST,\r\n    iconClassName,\r\n    margin,\r\n    textClassName,\r\n    type,\r\n}) => {\r\n    if (!error && errors.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    // look for the first truthy error to display\r\n    let message = error;\r\n\r\n    if (!message) {\r\n        for (const err of errors) {\r\n            if (err) {\r\n                message = err;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!message) {\r\n        return null;\r\n    }\r\n\r\n    if (type === TYPE_MODAL) {\r\n        return (\r\n            <div className='form-group'>\r\n                <label className='col-sm-12 has-error'>{message}</label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (type === TYPE_BACKSTAGE) {\r\n        return (\r\n            <div className='pull-left has-error'>\r\n                <label className='control-label'>{message}</label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (margin) {\r\n        return (\r\n            <div className='form-group has-error'>\r\n                <label className='control-label'>{message}</label>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`col-sm-12 ${textClassName || 'has-error'}`}>\r\n            <label className='control-label'>\r\n                <i\r\n                    className={`fa ${iconClassName || 'fa-exclamation-circle'}`}\r\n                />{' '}\r\n                {message}\r\n            </label>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(FormError);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl, type MessageDescriptor} from 'react-intl';\r\n\r\ntype Props = {\r\n    placeholder: MessageDescriptor;\r\n} & Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'placeholder'>;\r\n\r\nconst LocalizedPlaceholderTextarea = React.forwardRef<HTMLTextAreaElement, Props>(({placeholder, ...otherProps}, ref) => {\r\n    const intl = useIntl();\r\n\r\n    return (\r\n        <textarea\r\n            ref={ref}\r\n            placeholder={intl.formatMessage(placeholder)}\r\n            {...otherProps}\r\n        />\r\n    );\r\n});\r\n\r\nLocalizedPlaceholderTextarea.displayName = 'LocalizedPlaceholderTextarea';\r\n\r\nexport default LocalizedPlaceholderTextarea;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ReactNode} from 'react';\r\nimport React, {useRef} from 'react';\r\n\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\nimport SettingItemMin from 'components/setting_item_min';\r\n\r\nimport useDidUpdate from './common/hooks/useDidUpdate';\r\n\r\ntype Props = {\r\n\r\n    /**\r\n     * Whether this setting item is currently open\r\n     */\r\n    active: boolean;\r\n\r\n    /**\r\n     * Whether all sections in the panel are currently closed\r\n     */\r\n    areAllSectionsInactive: boolean;\r\n\r\n    /**\r\n     * The identifier of this section\r\n     */\r\n    section: string;\r\n\r\n    /**\r\n     * The setting UI when it is maximized (open)\r\n     */\r\n    max?: ReactNode;\r\n\r\n    // Props to pass through for SettingItemMin\r\n    updateSection: (section: string) => void;\r\n    title?: ReactNode;\r\n    isDisabled?: boolean;\r\n    describe?: ReactNode;\r\n\r\n    /**\r\n     * Replacement in place of edit button when the setting (in collapsed mode) is disabled\r\n     */\r\n    collapsedEditButtonWhenDisabled?: ReactNode;\r\n}\r\n\r\nconst SettingItem = ({\r\n    active,\r\n    areAllSectionsInactive,\r\n    section,\r\n    max,\r\n    updateSection,\r\n    title,\r\n    isDisabled,\r\n    describe,\r\n    collapsedEditButtonWhenDisabled,\r\n}: Props) => {\r\n    const minRef = useRef<SettingItemMinComponent>(null);\r\n\r\n    useDidUpdate(() => {\r\n        // We want to bring back focus to the edit button when the section is opened and then closed along with all sections are closed\r\n\r\n        if (!active && areAllSectionsInactive) {\r\n            minRef.current?.focus();\r\n        }\r\n    }, [active]);\r\n\r\n    if (active) {\r\n        return <>{max}</>;\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            ref={minRef}\r\n            title={title}\r\n            updateSection={updateSection}\r\n            describe={describe}\r\n            section={section}\r\n            isDisabled={isDisabled}\r\n            collapsedEditButtonWhenDisabled={collapsedEditButtonWhenDisabled}\r\n        />\r\n    );\r\n};\r\n\r\nexport default React.memo(SettingItem);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport SaveButton from 'components/save_button';\r\n\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\ntype Props = {\r\n\r\n    // Array of inputs selection\r\n    inputs?: ReactNode;\r\n    containerStyle?: string;\r\n    serverError?: ReactNode;\r\n\r\n    /**\r\n     * Settings extra information\r\n     */\r\n    extraInfo?: ReactNode;\r\n\r\n    /**\r\n     * Info position\r\n     */\r\n    infoPosition?: string;\r\n\r\n    /**\r\n     * Settings or tab section\r\n     */\r\n    section: string;\r\n    updateSection?: (section: string) => void;\r\n    setting?: string;\r\n    submit?: ((setting?: string) => void) | null;\r\n    disableEnterSubmit?: boolean;\r\n    submitExtra?: ReactNode;\r\n    saving?: boolean;\r\n    title?: ReactNode;\r\n    extraContentBeforeSettingList?: ReactNode;\r\n    isFullWidth?: boolean;\r\n    cancelButtonText?: ReactNode;\r\n    shiftEnter?: boolean;\r\n    saveButtonText?: string;\r\n    saveButtonClassName?: string;\r\n    isValid?: boolean;\r\n}\r\nexport default class SettingItemMax extends React.PureComponent<Props> {\r\n    settingList: React.RefObject<HTMLDivElement>;\r\n\r\n    static defaultProps = {\r\n        infoPosition: 'bottom',\r\n        saving: false,\r\n        section: '',\r\n        containerStyle: '',\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.settingList = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.settingList.current) {\r\n            const focusableElements: NodeListOf<HTMLElement> = this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-tertiary), input.form-control, input[type=\"radio\"][checked], input[type=\"checkbox\"], select, textarea, [tabindex]:not([tabindex=\"-1\"])');\r\n            if (focusableElements.length > 0) {\r\n                a11yFocus(focusableElements[0]);\r\n            } else {\r\n                a11yFocus(this.settingList.current);\r\n            }\r\n        }\r\n\r\n        document.addEventListener('keydown', this.onKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.onKeyDown);\r\n    }\r\n\r\n    onKeyDown = (e: KeyboardEvent) => {\r\n        const target = e.target as HTMLElement;\r\n        if (this.props.shiftEnter && isKeyPressed(e, Constants.KeyCodes.ENTER) && e.shiftKey) {\r\n            return;\r\n        }\r\n        if (this.props.disableEnterSubmit !== true &&\r\n            isKeyPressed(e, Constants.KeyCodes.ENTER) &&\r\n            this.props.submit &&\r\n            target.tagName !== 'SELECT' &&\r\n            target.parentElement &&\r\n            target.parentElement.className !== 'react-select__input' &&\r\n            !target.classList.contains('btn-tertiary') &&\r\n            this.settingList.current &&\r\n            this.settingList.current.contains(target)) {\r\n            this.handleSubmit(e);\r\n        }\r\n    };\r\n\r\n    handleSubmit = (e: React.MouseEvent | KeyboardEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (this.props.setting && this.props.submit) {\r\n            this.props.submit(this.props.setting);\r\n        } else if (this.props.submit) {\r\n            this.props.submit();\r\n        }\r\n    };\r\n\r\n    handleUpdateSection = (e: React.MouseEvent) => {\r\n        if (this.props.updateSection) {\r\n            this.props.updateSection(this.props.section);\r\n        }\r\n        e.preventDefault();\r\n    };\r\n\r\n    render() {\r\n        let serverError = null;\r\n        if (this.props.serverError) {\r\n            serverError = (\r\n                <div className='form-group'>\r\n                    <label\r\n                        className='col-sm-12 has-error'\r\n                    >\r\n                        <i\r\n                            className='icon icon-alert-circle-outline'\r\n                            role='presentation'\r\n                        />\r\n                        <span className='sr-only'>\r\n                            <FormattedMessage\r\n                                id='setting_item_max.error'\r\n                                defaultMessage='Error'\r\n                            />\r\n                        </span>\r\n                        <span id='serverError'>\r\n                            {this.props.serverError}\r\n                        </span>\r\n                    </label>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let extraInfo = null;\r\n        let hintClass = 'setting-list__hint';\r\n        if (this.props.infoPosition === 'top') {\r\n            hintClass = 'pb-3';\r\n        }\r\n\r\n        if (this.props.extraInfo) {\r\n            extraInfo = (\r\n                <div\r\n                    id='extraInfo'\r\n                    className={hintClass}\r\n                >\r\n                    {this.props.extraInfo}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let submit: JSX.Element | null = null;\r\n        if (this.props.submit) {\r\n            submit = (\r\n                <SaveButton\r\n                    defaultMessage={this.props.saveButtonText}\r\n                    saving={this.props.saving}\r\n                    disabled={this.props.saving || this.props.isValid === false}\r\n                    onClick={this.handleSubmit}\r\n                    btnClass={this.props.saveButtonClassName}\r\n                />\r\n            );\r\n        }\r\n\r\n        const inputs = this.props.inputs;\r\n\r\n        let title;\r\n        if (this.props.title) {\r\n            title = (\r\n                <h4\r\n                    id='settingTitle'\r\n                    className='col-sm-12 section-title'\r\n                >\r\n                    {this.props.title}\r\n                </h4>\r\n            );\r\n        }\r\n\r\n        let listContent = (\r\n            <div className='setting-list-item'>\r\n                {inputs}\r\n                {extraInfo}\r\n            </div>\r\n        );\r\n\r\n        if (this.props.infoPosition === 'top') {\r\n            listContent = (\r\n                <div>\r\n                    {extraInfo}\r\n                    {inputs}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let cancelButtonText;\r\n        if (this.props.cancelButtonText) {\r\n            cancelButtonText = this.props.cancelButtonText;\r\n        } else {\r\n            cancelButtonText = (\r\n                <FormattedMessage\r\n                    id='setting_item_max.cancel'\r\n                    defaultMessage='Cancel'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <section\r\n                className={`section-max form-horizontal ${this.props.containerStyle}`}\r\n                ref={this.settingList}\r\n            >\r\n                {title}\r\n                {this.props.extraContentBeforeSettingList}\r\n                <div\r\n                    className={classNames('sectionContent', {\r\n                        'col-sm-12': this.props.isFullWidth,\r\n                        'col-sm-10 col-sm-offset-2': !this.props.isFullWidth,\r\n                    })}\r\n                >\r\n                    <div\r\n                        tabIndex={-1}\r\n                        className='setting-list'\r\n                    >\r\n                        {listContent}\r\n                        <div className='setting-list-item'>\r\n                            <hr/>\r\n                            {this.props.submitExtra}\r\n                            <div\r\n                                role='alert'\r\n                            >\r\n                                {serverError}\r\n                            </div>\r\n                            {submit}\r\n                            <button\r\n                                id={'cancelSetting'}\r\n                                className='btn btn-tertiary'\r\n                                onClick={this.handleUpdateSection}\r\n                            >\r\n                                {cancelButtonText}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {type ReactNode, type MouseEvent} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport EditIcon from 'components/widgets/icons/fa_edit_icon';\r\n\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\ninterface Props {\r\n\r\n    /**\r\n     * Settings title\r\n     */\r\n    title: ReactNode;\r\n\r\n    /**\r\n     * Option to disable opening the setting\r\n     */\r\n    isDisabled?: boolean;\r\n\r\n    /**\r\n     * Settings or tab section\r\n     */\r\n    section: string;\r\n\r\n    /**\r\n     * Function to update section\r\n     */\r\n    updateSection: (section: string) => void;\r\n\r\n    /**\r\n     * Settings description\r\n     */\r\n    describe?: ReactNode;\r\n\r\n    /**\r\n     * Replacement in place of edit button when the setting (in collapsed mode) is disabled\r\n     */\r\n    collapsedEditButtonWhenDisabled?: ReactNode;\r\n}\r\n\r\nexport default class SettingItemMin extends React.PureComponent<Props> {\r\n    private edit: HTMLButtonElement | null = null;\r\n\r\n    focus() {\r\n        a11yFocus(this.edit);\r\n    }\r\n\r\n    private getEdit = (node: HTMLButtonElement) => {\r\n        this.edit = node;\r\n    };\r\n\r\n    handleClick = (e: MouseEvent<HTMLDivElement | HTMLButtonElement>) => {\r\n        if (this.props.isDisabled) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.props.updateSection(this.props.section);\r\n    };\r\n\r\n    render() {\r\n        let editButtonComponent: ReactNode;\r\n\r\n        if (this.props.isDisabled) {\r\n            if (this.props.collapsedEditButtonWhenDisabled) {\r\n                editButtonComponent = this.props.collapsedEditButtonWhenDisabled;\r\n            } else {\r\n                editButtonComponent = null;\r\n            }\r\n        } else {\r\n            editButtonComponent = (\r\n                <button\r\n                    ref={this.getEdit}\r\n                    id={this.props.section + 'Edit'}\r\n                    className='color--link style--none section-min__edit'\r\n                    onClick={this.handleClick}\r\n                    aria-labelledby={this.props.section + 'Title ' + this.props.section + 'Edit'}\r\n                    aria-expanded={false}\r\n                >\r\n                    <EditIcon/>\r\n                    <FormattedMessage\r\n                        id='setting_item_min.edit'\r\n                        defaultMessage='Edit'\r\n                    />\r\n                </button>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                className={classNames('section-min', {isDisabled: this.props.isDisabled})}\r\n                onClick={this.handleClick}\r\n            >\r\n                <div\r\n                    className='section-min__header'\r\n                >\r\n                    <h4\r\n                        id={this.props.section + 'Title'}\r\n                        className={classNames('section-min__title', {isDisabled: this.props.isDisabled})}\r\n                    >\r\n                        {this.props.title}\r\n                    </h4>\r\n                    {editButtonComponent}\r\n                </div>\r\n                <div\r\n                    id={this.props.section + 'Desc'}\r\n                    className={classNames('section-min__describe', {isDisabled: this.props.isDisabled})}\r\n                >\r\n                    {this.props.describe}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ReactNode} from 'react';\r\nimport React from 'react';\r\n\r\nimport './setting_desktop_header.scss';\r\n\r\ninterface Props {\r\n    id?: string;\r\n    text: ReactNode;\r\n    info?: ReactNode;\r\n}\r\n\r\nexport default function SettingDesktopHeader(props: Props) {\r\n    return (\r\n        <div className='userSettingDesktopHeader'>\r\n            <h3\r\n                id={props.id}\r\n                className='tab-header'\r\n            >\r\n                {props.text}\r\n            </h3>\r\n            {props.info && <div className='userSettingDesktopHeaderInfo'>{props.info}</div>}\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ReactNode} from 'react';\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\ntype Props = {\r\n    text: ReactNode;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n}\r\nconst SettingMobileHeader = ({\r\n    text,\r\n    closeModal,\r\n    collapseModal,\r\n}: Props) => {\r\n    const intl = useIntl();\r\n\r\n    return (\r\n        <div className='modal-header'>\r\n            <button\r\n                id='closeButton'\r\n                type='button'\r\n                className='close'\r\n                data-dismiss='modal'\r\n                onClick={closeModal}\r\n            >\r\n                <span aria-hidden='true'>{''}</span>\r\n            </button>\r\n            <h4 className='modal-title'>\r\n                <div className='modal-back'>\r\n                    <i\r\n                        className='fa fa-angle-left'\r\n                        aria-label={\r\n                            intl.formatMessage({\r\n                                id: 'generic_icons.collapse',\r\n                                defaultMessage: 'Collapse Icon',\r\n                            })\r\n                        }\r\n                        onClick={collapseModal}\r\n                    />\r\n                </div>\r\n                {text}\r\n            </h4>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SettingMobileHeader;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nexport default function NotificationPermissionDeniedSectionNotice() {\r\n    const intl = useIntl();\r\n\r\n    const handleClick = useCallback(() => {\r\n        window.open('https://mattermost.com/pl/manage-notifications', '_blank', 'noopener,noreferrer');\r\n    }, []);\r\n\r\n    return (\r\n        <div className='extraContentBeforeSettingList'>\r\n            <SectionNotice\r\n                type='danger'\r\n                title={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.title',\r\n                    defaultMessage: 'Browser notification permission was denied',\r\n                })}\r\n                text={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.message',\r\n                    defaultMessage: 'You\\'re missing important message and call notifications from Mattermost. To start receiving notifications, please enable notifications for Mattermost in your browser settings.',\r\n                })}\r\n                tertiaryButton={{\r\n                    text: intl.formatMessage({\r\n                        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.button',\r\n                        defaultMessage: 'How to enable notifications',\r\n                    }),\r\n                    onClick: handleClick,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nimport {requestNotificationPermission} from 'utils/notifications';\r\n\r\ntype Props = {\r\n    onCtaButtonClick: (permission: NotificationPermission) => void;\r\n}\r\n\r\nexport default function NotificationPermissionNeverGrantedSectionNotice(props: Props) {\r\n    const intl = useIntl();\r\n\r\n    const handleClick = useCallback(async () => {\r\n        const permission = await requestNotificationPermission();\r\n        if (permission) {\r\n            props.onCtaButtonClick(permission);\r\n        }\r\n    }, [props.onCtaButtonClick]);\r\n\r\n    return (\r\n        <div className='extraContentBeforeSettingList'>\r\n            <SectionNotice\r\n                type='danger'\r\n                title={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.title',\r\n                    defaultMessage: 'Browser notifications are disabled',\r\n                })}\r\n                text={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.message',\r\n                    defaultMessage: 'You\\'re missing important message and call notifications from Mattermost. Mattermost notifications are disabled by this browser.',\r\n                })}\r\n                primaryButton={{\r\n                    text: intl.formatMessage({\r\n                        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionNeverGranted.button',\r\n                        defaultMessage: 'Enable notifications',\r\n                    }),\r\n                    onClick: handleClick,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nexport default function NotificationPermissionUnsupportedSectionNotice() {\r\n    const intl = useIntl();\r\n\r\n    const handleClick = useCallback(async () => {\r\n        window.open('https://mattermost.com/pl/pc-web-requirements', '_blank', 'noopener,noreferrer');\r\n    }, []);\r\n\r\n    return (\r\n        <div className='extraContentBeforeSettingList'>\r\n            <SectionNotice\r\n                type='danger'\r\n                title={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.title',\r\n                    defaultMessage: 'Browser notifications unsupported',\r\n                })}\r\n                text={intl.formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.message',\r\n                    defaultMessage: 'You\\'re missing important message and call notifications from Mattermost. To start receiving notifications, please update to a supported browser.',\r\n                })}\r\n                tertiaryButton={{\r\n                    text: intl.formatMessage({\r\n                        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionUnsupported.button',\r\n                        defaultMessage: 'Update your browser',\r\n                    }),\r\n                    onClick: handleClick,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nimport {NotificationPermissionDenied} from 'utils/notifications';\r\n\r\ninterface Props {\r\n    requestDesktopNotificationPermission: () => Promise<NotificationPermission>;\r\n}\r\n\r\nexport default function NotificationPermissionDesktopDeniedSectionNotice(props: Props) {\r\n    const intl = useIntl();\r\n\r\n    const [checkedPermissionDenied, setCheckedPermissionDenied] = useState(false);\r\n\r\n    async function handleCheckPermissionButtonClick() {\r\n        const permission = await props.requestDesktopNotificationPermission();\r\n        if (permission === NotificationPermissionDenied) {\r\n            setCheckedPermissionDenied(true);\r\n        }\r\n    }\r\n\r\n    const handleInstructionButtonClick = useCallback(() => {\r\n        window.open('https://mattermost.com/pl/manage-notifications', '_blank', 'noopener,noreferrer');\r\n    }, []);\r\n\r\n    const title = checkedPermissionDenied ? intl.formatMessage({\r\n        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.titleDenied',\r\n        defaultMessage: 'Desktop notifications permission was denied',\r\n    }) : intl.formatMessage({\r\n        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.title',\r\n        defaultMessage: 'Desktop notifications permission required',\r\n    });\r\n\r\n    const text = checkedPermissionDenied ? intl.formatMessage({\r\n        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.messageDenied',\r\n        defaultMessage: 'Notifications for this Mattermost server are blocked. To receive notifications, please enable them manually.',\r\n    }) : intl.formatMessage({\r\n        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.message',\r\n        defaultMessage: \"You're missing important message and call notifications from Mattermost. To start receiving them, please enable them manually.\",\r\n    });\r\n\r\n    return (\r\n        <div className='extraContentBeforeSettingList'>\r\n            <SectionNotice\r\n                type='danger'\r\n                title={title}\r\n                text={text}\r\n                primaryButton={{\r\n                    text: intl.formatMessage({\r\n                        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDeniedDesktop.checkPermissionButton',\r\n                        defaultMessage: 'Check permission',\r\n                    }),\r\n                    onClick: handleCheckPermissionButtonClick,\r\n                    disabled: checkedPermissionDenied,\r\n                }}\r\n                tertiaryButton={{\r\n                    text: intl.formatMessage({\r\n                        id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionDenied.instructionButton',\r\n                        defaultMessage: 'How to enable notifications',\r\n                    }),\r\n                    onClick: handleInstructionButtonClick,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useState} from 'react';\r\n\r\nimport {useDesktopAppNotificationPermission} from 'components/common/hooks/use_desktop_notification_permission';\r\nimport NotificationPermissionDeniedNotice from 'components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_denied_section_notice';\r\nimport NotificationPermissionNeverGrantedNotice from 'components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_never_granted_section_notice';\r\nimport NotificationPermissionUnsupportedSectionNotice from 'components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice/notification_permission_unsupported_section_notice';\r\n\r\nimport {getNotificationPermission, isNotificationAPISupported, NotificationPermissionDenied, NotificationPermissionNeverGranted} from 'utils/notifications';\r\n\r\nimport NotificationPermissionDesktopDeniedSectionNotice from './notification_permission_desktop_denied_section_notice';\r\n\r\nexport default function NotificationPermissionSectionNotice() {\r\n    const isNotificationSupported = isNotificationAPISupported();\r\n\r\n    const [notificationPermission, setNotificationPermission] = useState(getNotificationPermission());\r\n\r\n    const [desktopNotificationPermission, requestDesktopNotificationPermission] = useDesktopAppNotificationPermission();\r\n\r\n    function handleRequestNotificationClicked(permission: NotificationPermission) {\r\n        setNotificationPermission(permission);\r\n    }\r\n\r\n    if (!isNotificationSupported) {\r\n        return <NotificationPermissionUnsupportedSectionNotice/>;\r\n    }\r\n\r\n    if (desktopNotificationPermission === NotificationPermissionDenied) {\r\n        return <NotificationPermissionDesktopDeniedSectionNotice requestDesktopNotificationPermission={requestDesktopNotificationPermission}/>;\r\n    }\r\n\r\n    if (isNotificationSupported && notificationPermission === NotificationPermissionNeverGranted) {\r\n        return <NotificationPermissionNeverGrantedNotice onCtaButtonClick={handleRequestNotificationClicked}/>;\r\n    }\r\n\r\n    if (isNotificationSupported && notificationPermission === NotificationPermissionDenied) {\r\n        return <NotificationPermissionDeniedNotice/>;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {useDesktopAppNotificationPermission} from 'components/common/hooks/use_desktop_notification_permission';\r\nimport Tag from 'components/widgets/tag/tag';\r\n\r\nimport {\r\n    getNotificationPermission,\r\n    isNotificationAPISupported,\r\n    NotificationPermissionDenied,\r\n    NotificationPermissionNeverGranted,\r\n} from 'utils/notifications';\r\n\r\nexport default function NotificationPermissionTitleTag() {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const [desktopNotificationPermission] = useDesktopAppNotificationPermission();\r\n\r\n    if (!isNotificationAPISupported()) {\r\n        return (\r\n            <Tag\r\n                size='sm'\r\n                variant='danger'\r\n                icon='alert-outline'\r\n                text={formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.noPermissionIssueTag',\r\n                    defaultMessage: 'Not supported',\r\n                })}\r\n            />\r\n        );\r\n    }\r\n\r\n    if (\r\n        getNotificationPermission() === NotificationPermissionNeverGranted ||\r\n        getNotificationPermission() === NotificationPermissionDenied ||\r\n        desktopNotificationPermission === NotificationPermissionDenied\r\n    ) {\r\n        return (\r\n            <Tag\r\n                size='sm'\r\n                variant='dangerDim'\r\n                icon='alert-outline'\r\n                text={formatMessage({\r\n                    id: 'user.settings.notifications.desktopAndMobile.notificationSection.permissionIssueTag',\r\n                    defaultMessage: 'Permission required',\r\n                })}\r\n            />\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {Fragment, useCallback, useEffect, useMemo, useRef, memo} from 'react';\r\nimport type {ChangeEvent, ReactNode} from 'react';\r\nimport {FormattedMessage, useIntl, defineMessage} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, Options} from 'react-select';\r\n\r\nimport type {UserNotifyProps} from '@mattermost/types/users';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\nimport NotificationPermissionSectionNotice from 'components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_section_notice';\r\nimport NotificationPermissionTitleTag from 'components/user_settings/notifications/desktop_and_mobile_notification_setting/notification_permission_title_tag';\r\nimport {getOptionLabel, type SelectOption} from 'components/widgets/modals/components/react_select_item';\r\n\r\nimport Constants, {NotificationLevels, UserSettingsNotificationSections} from 'utils/constants';\r\nimport {formatAsComponent} from 'utils/i18n';\r\n\r\nimport type {Props as UserSettingsNotificationsProps} from '../user_settings_notifications';\r\n\r\nexport type Props = {\r\n    active: boolean;\r\n    updateSection: (section: string) => void;\r\n    onSubmit: () => void;\r\n    onCancel: () => void;\r\n    saving: boolean;\r\n    error: string;\r\n    setParentState: (key: string, value: string | boolean) => void;\r\n    areAllSectionsInactive: boolean;\r\n    isCollapsedThreadsEnabled: boolean;\r\n    desktopActivity: UserNotifyProps['desktop'];\r\n    sendPushNotifications: UserSettingsNotificationsProps['sendPushNotifications'];\r\n    pushActivity: UserNotifyProps['push'];\r\n    pushStatus: UserNotifyProps['push_status'];\r\n    desktopThreads: UserNotifyProps['desktop_threads'];\r\n    pushThreads: UserNotifyProps['push_threads'];\r\n    desktopAndMobileSettingsDifferent: boolean;\r\n};\r\n\r\nfunction DesktopAndMobileNotificationSettings({\r\n    active,\r\n    updateSection,\r\n    onSubmit,\r\n    onCancel,\r\n    saving,\r\n    error,\r\n    setParentState,\r\n    areAllSectionsInactive,\r\n    isCollapsedThreadsEnabled,\r\n    desktopActivity,\r\n    sendPushNotifications,\r\n    pushActivity,\r\n    pushStatus,\r\n    desktopThreads,\r\n    pushThreads,\r\n    desktopAndMobileSettingsDifferent,\r\n}: Props) {\r\n    const editButtonRef = useRef<SettingItemMinComponent>(null);\r\n    const previousActiveRef = useRef(active);\r\n    const intl = useIntl();\r\n\r\n    // Focus back on the edit button, after this section was closed after it was opened\r\n    useEffect(() => {\r\n        if (previousActiveRef.current && !active && areAllSectionsInactive) {\r\n            editButtonRef.current?.focus();\r\n        }\r\n\r\n        previousActiveRef.current = active;\r\n    }, [active, areAllSectionsInactive]);\r\n\r\n    const handleChangeForSendDesktopNotificationsRadio = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.value;\r\n        setParentState('desktopActivity', value);\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForDesktopThreadsCheckbox = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.checked ? NotificationLevels.ALL : NotificationLevels.MENTION;\r\n        setParentState('desktopThreads', value);\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForDifferentMobileNotificationsCheckbox = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.checked;\r\n        setParentState('desktopAndMobileSettingsDifferent', value);\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForSendMobileNotificationsSelect = useCallback((selectedOption: OnChangeValue<SelectOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            setParentState('pushActivity', selectedOption.value);\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForMobileThreadsCheckbox = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.checked ? NotificationLevels.ALL : NotificationLevels.MENTION;\r\n        setParentState('pushThreads', value);\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForTriggerMobileNotificationsSelect = useCallback((selectedOption: OnChangeValue<SelectOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            setParentState('pushStatus', selectedOption.value);\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const maximizedSettingsInputs = useMemo(() => {\r\n        const maximizedSettingInputs = [];\r\n\r\n        const sendDesktopNotificationsSection = (\r\n            <fieldset\r\n                id='sendDesktopNotificationsSection'\r\n                key='sendDesktopNotificationsSection'\r\n            >\r\n                <legend className='form-legend'>\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.desktopAndMobile.sendDesktopNotificationFor'\r\n                        defaultMessage='Send notifications for:'\r\n                    />\r\n                </legend>\r\n                {optionsOfSendNotifications.map((optionOfSendNotifications) => (\r\n                    <div\r\n                        key={optionOfSendNotifications.value}\r\n                        className='radio'\r\n                    >\r\n                        <label>\r\n                            <input\r\n                                type='radio'\r\n                                checked={desktopActivity === optionOfSendNotifications.value}\r\n                                value={optionOfSendNotifications.value}\r\n                                onChange={handleChangeForSendDesktopNotificationsRadio}\r\n                            />\r\n                            {formatAsComponent(optionOfSendNotifications.label)}\r\n                        </label>\r\n                    </div>\r\n                ))}\r\n            </fieldset>\r\n        );\r\n        maximizedSettingInputs.push(sendDesktopNotificationsSection);\r\n\r\n        if (shouldShowDesktopThreadsSection(isCollapsedThreadsEnabled, desktopActivity)) {\r\n            const desktopThreadNotificationSection = (\r\n                <Fragment key='desktopThreadNotificationSection'>\r\n                    <br/>\r\n                    <div className='checkbox single-checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={desktopThreads === NotificationLevels.ALL}\r\n                                onChange={handleChangeForDesktopThreadsCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.desktopAndMobile.notifyForDesktopthreads'\r\n                                defaultMessage={'Notify me about replies to threads I\\'m following'}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </Fragment>\r\n            );\r\n            maximizedSettingInputs.push(desktopThreadNotificationSection);\r\n        }\r\n\r\n        if (sendPushNotifications) {\r\n            const differentMobileNotificationsSection = (\r\n                <Fragment key='differentMobileNotificationsSection'>\r\n                    <hr/>\r\n                    <div className='checkbox single-checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={desktopAndMobileSettingsDifferent}\r\n                                onChange={handleChangeForDifferentMobileNotificationsCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.desktopAndMobile.differentMobileNotificationsTitle'\r\n                                defaultMessage='Use different settings for my mobile devices'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </Fragment>\r\n            );\r\n            maximizedSettingInputs.push(differentMobileNotificationsSection);\r\n        }\r\n\r\n        if (shouldShowSendMobileNotificationsSection(sendPushNotifications, desktopAndMobileSettingsDifferent)) {\r\n            const sendMobileNotificationsSection = (\r\n                <React.Fragment key='sendMobileNotificationsSection'>\r\n                    <br/>\r\n                    <label\r\n                        id='sendMobileNotificationsLabel'\r\n                        htmlFor='sendMobileNotificationsSelectInput'\r\n                        className='singleSelectLabel'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.desktopAndMobile.sendMobileNotificationsFor'\r\n                            defaultMessage='Send mobile notifications for:'\r\n                        />\r\n                    </label>\r\n                    <ReactSelect\r\n                        inputId='sendMobileNotificationsSelectInput'\r\n                        aria-labelledby='sendMobileNotificationsLabel'\r\n                        className='react-select singleSelect'\r\n                        classNamePrefix='react-select'\r\n                        options={optionsOfSendNotifications}\r\n                        isClearable={false}\r\n                        isSearchable={false}\r\n                        components={{IndicatorSeparator: NoIndicatorSeparatorComponent}}\r\n                        value={getValueOfSendMobileNotificationForSelect(pushActivity)}\r\n                        onChange={handleChangeForSendMobileNotificationsSelect}\r\n                        getOptionLabel={(option) => getOptionLabel(option, intl)}\r\n\r\n                    />\r\n                </React.Fragment>\r\n            );\r\n            maximizedSettingInputs.push(sendMobileNotificationsSection);\r\n        }\r\n\r\n        if (shouldShowMobileThreadsSection(sendPushNotifications, isCollapsedThreadsEnabled, desktopAndMobileSettingsDifferent, pushActivity)) {\r\n            const threadNotificationSection = (\r\n                <Fragment key='threadNotificationSection'>\r\n                    <br/>\r\n                    <div className='checkbox single-checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={pushThreads === NotificationLevels.ALL}\r\n                                onChange={handleChangeForMobileThreadsCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.desktopAndMobile.notifyForMobilethreads'\r\n                                defaultMessage={'Notify me on mobile about replies to threads I\\'m following'}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </Fragment>\r\n            );\r\n            maximizedSettingInputs.push(threadNotificationSection);\r\n        }\r\n\r\n        if (shouldShowTriggerMobileNotificationsSection(sendPushNotifications, desktopActivity, pushActivity, desktopAndMobileSettingsDifferent)) {\r\n            const triggerMobileNotificationsSection = (\r\n                <React.Fragment key='triggerMobileNotificationsSection'>\r\n                    <br/>\r\n                    <label\r\n                        id='pushMobileNotificationsLabel'\r\n                        htmlFor='pushMobileNotificationSelectInput'\r\n                        className='singleSelectLabel'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.desktopAndMobile.pushNotification'\r\n                            defaultMessage='Trigger mobile notifications when I am:'\r\n                        />\r\n                    </label>\r\n                    <ReactSelect\r\n                        inputId='pushMobileNotificationSelectInput'\r\n                        aria-labelledby='pushMobileNotificationsLabel'\r\n                        className='react-select singleSelect'\r\n                        classNamePrefix='react-select'\r\n                        options={optionsOfSendMobileNotificationsWhenSelect}\r\n                        isClearable={false}\r\n                        isSearchable={false}\r\n                        components={{IndicatorSeparator: NoIndicatorSeparatorComponent}}\r\n                        value={getValueOfSendMobileNotificationWhenSelect(pushStatus)}\r\n                        onChange={handleChangeForTriggerMobileNotificationsSelect}\r\n                        getOptionLabel={(option) => getOptionLabel(option, intl)}\r\n                    />\r\n                </React.Fragment>\r\n            );\r\n            maximizedSettingInputs.push(triggerMobileNotificationsSection);\r\n        }\r\n\r\n        if (!sendPushNotifications) {\r\n            const disabledPushNotificationsSection = (\r\n                <>\r\n                    <br/>\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.desktopAndMobile.pushNotificationsDisabled'\r\n                        defaultMessage={'Mobile push notifications haven\\'t been enabled by your system administrator.'}\r\n                    />\r\n                </>\r\n            );\r\n            maximizedSettingInputs.push(disabledPushNotificationsSection);\r\n        }\r\n\r\n        return maximizedSettingInputs;\r\n    },\r\n    [\r\n        desktopActivity,\r\n        handleChangeForSendDesktopNotificationsRadio,\r\n        isCollapsedThreadsEnabled,\r\n        desktopThreads,\r\n        handleChangeForDesktopThreadsCheckbox,\r\n        sendPushNotifications,\r\n        desktopAndMobileSettingsDifferent,\r\n        handleChangeForDifferentMobileNotificationsCheckbox,\r\n        pushActivity,\r\n        handleChangeForSendMobileNotificationsSelect,\r\n        pushThreads,\r\n        handleChangeForMobileThreadsCheckbox,\r\n        pushStatus,\r\n        handleChangeForTriggerMobileNotificationsSelect,\r\n    ]);\r\n\r\n    function handleChangeForMaxSection(section: string) {\r\n        updateSection(section);\r\n    }\r\n\r\n    function handleChangeForMinSection(section: string) {\r\n        updateSection(section);\r\n        onCancel();\r\n    }\r\n\r\n    if (active) {\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id={'user.settings.notifications.desktopAndMobile.title'}\r\n                        defaultMessage='Desktop and mobile notifications'\r\n                    />\r\n                }\r\n                inputs={maximizedSettingsInputs}\r\n                submit={onSubmit}\r\n                saving={saving}\r\n                serverError={error}\r\n                updateSection={handleChangeForMaxSection}\r\n                extraContentBeforeSettingList={<NotificationPermissionSectionNotice/>}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            ref={editButtonRef}\r\n            title={\r\n                <>\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.desktopAndMobile.title'\r\n                        defaultMessage='Desktop and mobile notifications'\r\n                    />\r\n                    <NotificationPermissionTitleTag/>\r\n                </>\r\n            }\r\n            describe={getCollapsedText(desktopActivity, pushActivity)}\r\n            section={UserSettingsNotificationSections.DESKTOP_AND_MOBILE}\r\n            updateSection={handleChangeForMinSection}\r\n        />\r\n    );\r\n}\r\n\r\nfunction NoIndicatorSeparatorComponent() {\r\n    return null;\r\n}\r\n\r\nconst optionsOfSendNotifications = [\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.allNewMessages',\r\n            defaultMessage: 'All new messages',\r\n        }),\r\n        value: NotificationLevels.ALL,\r\n    },\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.onlyMentions',\r\n            defaultMessage: 'Mentions, direct messages, and group messages',\r\n        }),\r\n        value: NotificationLevels.MENTION,\r\n    },\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.nothing',\r\n            defaultMessage: 'Nothing',\r\n        }),\r\n        value: NotificationLevels.NONE,\r\n    },\r\n];\r\n\r\nexport function shouldShowDesktopThreadsSection(isCollapsedThreadsEnabled: boolean, desktopActivity: UserNotifyProps['desktop']) {\r\n    if (!isCollapsedThreadsEnabled) {\r\n        return false;\r\n    }\r\n\r\n    if (desktopActivity === NotificationLevels.ALL || desktopActivity === NotificationLevels.NONE) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function shouldShowMobileThreadsSection(sendPushNotifications: UserSettingsNotificationsProps['sendPushNotifications'], isCollapsedThreadsEnabled: boolean, desktopAndMobileSettingsDifferent: boolean, pushActivity: UserNotifyProps['push']) {\r\n    if (!sendPushNotifications) {\r\n        return false;\r\n    }\r\n\r\n    if (!isCollapsedThreadsEnabled) {\r\n        return false;\r\n    }\r\n\r\n    if (!desktopAndMobileSettingsDifferent) {\r\n        return false;\r\n    }\r\n\r\n    if (pushActivity === NotificationLevels.ALL || pushActivity === NotificationLevels.NONE) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction shouldShowSendMobileNotificationsSection(sendPushNotifications: UserSettingsNotificationsProps['sendPushNotifications'], desktopAndMobileSettingsDifferent: boolean) {\r\n    if (!sendPushNotifications) {\r\n        return false;\r\n    }\r\n\r\n    if (desktopAndMobileSettingsDifferent) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function getValueOfSendMobileNotificationForSelect(pushActivity: UserNotifyProps['push']): OnChangeValue<SelectOption, boolean> {\r\n    if (!pushActivity) {\r\n        return optionsOfSendNotifications[1];\r\n    }\r\n\r\n    const option = optionsOfSendNotifications.find((option) => option.value === pushActivity);\r\n    if (!option) {\r\n        return optionsOfSendNotifications[1];\r\n    }\r\n\r\n    return option;\r\n}\r\n\r\nexport function shouldShowTriggerMobileNotificationsSection(sendPushNotifications: UserSettingsNotificationsProps['sendPushNotifications'], desktopActivity: UserNotifyProps['desktop'], pushActivity: UserNotifyProps['push'], desktopAndMobileSettingsDifferent: boolean): boolean {\r\n    if (!sendPushNotifications) {\r\n        return false;\r\n    }\r\n\r\n    if (!desktopActivity || !pushActivity) {\r\n        return true;\r\n    }\r\n\r\n    if (!desktopAndMobileSettingsDifferent) {\r\n        if (desktopActivity === NotificationLevels.NONE) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    if (pushActivity === NotificationLevels.NONE) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nconst optionsOfSendMobileNotificationsWhenSelect: Options<SelectOption> = [\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.online',\r\n            defaultMessage: 'Online, away, or offline',\r\n        }),\r\n        value: Constants.UserStatuses.ONLINE,\r\n    },\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.away',\r\n            defaultMessage: 'Away or offline',\r\n        }),\r\n        value: Constants.UserStatuses.AWAY,\r\n    },\r\n    {\r\n        label: defineMessage({\r\n            id: 'user.settings.notifications.desktopAndMobile.offline',\r\n            defaultMessage: 'Offline',\r\n        }),\r\n        value: Constants.UserStatuses.OFFLINE,\r\n    },\r\n];\r\n\r\nexport function getValueOfSendMobileNotificationWhenSelect(pushStatus?: UserNotifyProps['push_status']): OnChangeValue<SelectOption, boolean> {\r\n    if (!pushStatus) {\r\n        return optionsOfSendMobileNotificationsWhenSelect[2];\r\n    }\r\n\r\n    const option = optionsOfSendMobileNotificationsWhenSelect.find((option) => option.value === pushStatus);\r\n    if (!option) {\r\n        return optionsOfSendMobileNotificationsWhenSelect[2];\r\n    }\r\n\r\n    return option;\r\n}\r\n\r\nfunction getCollapsedText(desktopActivity: UserNotifyProps['desktop'], pushActivity: UserNotifyProps['push']): ReactNode {\r\n    if (desktopActivity === NotificationLevels.ALL) {\r\n        if (pushActivity === NotificationLevels.ALL) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.allForDesktopAndMobile'\r\n                    defaultMessage='All new messages'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.MENTION) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.allDesktopButMobileMentions'\r\n                    defaultMessage='All new messages on desktop; mentions, direct messages, and group messages on mobile'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.NONE) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.allDesktopButMobileNone'\r\n                    defaultMessage='All new messages on desktop; never on mobile'\r\n                />\r\n            );\r\n        }\r\n    } else if (desktopActivity === NotificationLevels.MENTION) {\r\n        if (pushActivity === NotificationLevels.ALL) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.mentionsDesktopButMobileAll'\r\n                    defaultMessage='Mentions, direct messages, and group messages on desktop; all new messages on mobile'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.MENTION) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.mentionsForDesktopAndMobile'\r\n                    defaultMessage='Mentions, direct messages, and group messages'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.NONE) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.mentionsForDesktopButMobileNone'\r\n                    defaultMessage='Mentions, direct messages, and group messages on desktop; never on mobile'\r\n                />\r\n            );\r\n        }\r\n    } else if (desktopActivity === NotificationLevels.NONE) {\r\n        if (pushActivity === NotificationLevels.ALL) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.noneDesktopButMobileAll'\r\n                    defaultMessage='Never on desktop; all new messages on mobile'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.MENTION) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.noneDesktopButMobileMentions'\r\n                    defaultMessage='Never on desktop; mentions, direct messages, and group messages on mobile'\r\n                />\r\n            );\r\n        } else if (pushActivity === NotificationLevels.NONE) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopAndMobile.noneForDesktopAndMobile'\r\n                    defaultMessage='Never'\r\n                />\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <FormattedMessage\r\n            id='user.settings.notifications.desktopAndMobile.noValidSettings'\r\n            defaultMessage='Configure desktop and mobile settings'\r\n        />\r\n    );\r\n}\r\n\r\nexport default memo(DesktopAndMobileNotificationSettings);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ChangeEvent} from 'react';\r\nimport React, {memo, useEffect, useRef, Fragment, useMemo, useCallback} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport type {OnChangeValue} from 'react-select';\r\nimport ReactSelect from 'react-select';\r\n\r\nimport type {UserNotifyProps} from '@mattermost/types/users';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\nimport {getOptionLabel, type SelectOption} from 'components/widgets/modals/components/react_select_item';\r\n\r\nimport {UserSettingsNotificationSections} from 'utils/constants';\r\nimport {\r\n    notificationSoundKeys,\r\n    stopTryNotificationRing,\r\n    tryNotificationSound,\r\n    tryNotificationRing,\r\n    getValueOfNotificationSoundsSelect,\r\n    getValueOfIncomingCallSoundsSelect,\r\n    optionsOfMessageNotificationSoundsSelect,\r\n    optionsOfIncomingCallSoundsSelect,\r\n    callNotificationSoundKeys,\r\n} from 'utils/notification_sounds';\r\n\r\nimport type {Props as UserSettingsNotificationsProps} from '../user_settings_notifications';\r\n\r\nexport type Props = {\r\n    active: boolean;\r\n    updateSection: (section: string) => void;\r\n    onSubmit: () => void;\r\n    onCancel: () => void;\r\n    saving: boolean;\r\n    error: string;\r\n    setParentState: (key: string, value: string | boolean) => void;\r\n    areAllSectionsInactive: boolean;\r\n    desktopSound: UserNotifyProps['desktop_sound'];\r\n    desktopNotificationSound: UserNotifyProps['desktop_notification_sound'];\r\n    isCallsRingingEnabled: UserSettingsNotificationsProps['isCallsRingingEnabled'];\r\n    callsDesktopSound: UserNotifyProps['calls_desktop_sound'];\r\n    callsNotificationSound: UserNotifyProps['calls_notification_sound'];\r\n};\r\n\r\nfunction DesktopNotificationSoundsSettings({\r\n    active,\r\n    updateSection,\r\n    onSubmit,\r\n    onCancel,\r\n    saving,\r\n    error,\r\n    setParentState,\r\n    areAllSectionsInactive,\r\n    desktopSound,\r\n    desktopNotificationSound,\r\n    isCallsRingingEnabled,\r\n    callsDesktopSound,\r\n    callsNotificationSound,\r\n}: Props) {\r\n    const intl = useIntl();\r\n\r\n    const editButtonRef = useRef<SettingItemMinComponent>(null);\r\n    const previousActiveRef = useRef(active);\r\n\r\n    // Focus back on the edit button, after this section was closed after it was opened\r\n    useEffect(() => {\r\n        if (previousActiveRef.current && !active && areAllSectionsInactive) {\r\n            editButtonRef.current?.focus();\r\n        }\r\n\r\n        previousActiveRef.current = active;\r\n    }, [active, areAllSectionsInactive]);\r\n\r\n    const handleChangeForMessageNotificationSoundCheckbox = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.checked ? 'true' : 'false';\r\n        setParentState('desktopSound', value);\r\n\r\n        if (value === 'false') {\r\n            stopTryNotificationRing();\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForIncomginCallSoundCheckbox = useCallback((event: ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.checked ? 'true' : 'false';\r\n        setParentState('callsDesktopSound', value);\r\n\r\n        if (value === 'false') {\r\n            stopTryNotificationRing();\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForMessageNotificationSoundSelect = useCallback((selectedOption: OnChangeValue<SelectOption, boolean>) => {\r\n        stopTryNotificationRing();\r\n\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            setParentState('desktopNotificationSound', selectedOption.value);\r\n            tryNotificationSound(selectedOption.value);\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const handleChangeForIncomingCallSoundSelect = useCallback((selectedOption: OnChangeValue<SelectOption, boolean>) => {\r\n        stopTryNotificationRing();\r\n\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            setParentState('callsNotificationSound', selectedOption.value);\r\n            tryNotificationRing(selectedOption.value);\r\n        }\r\n    }, [setParentState]);\r\n\r\n    const maximizedSettingInputs = useMemo(() => {\r\n        const maximizedSettingInputs = [];\r\n\r\n        const isMessageNotificationSoundChecked = desktopSound === 'true';\r\n        const messageSoundSection = (\r\n            <Fragment key='messageSoundSection'>\r\n                <div className='checkbox inlineCheckboxSelect'>\r\n                    <label>\r\n                        <input\r\n                            type='checkbox'\r\n                            checked={desktopSound === 'true'}\r\n                            onChange={handleChangeForMessageNotificationSoundCheckbox}\r\n                        />\r\n                        <span id='messageNotificationSoundLabel'>\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.desktopNotificationSound.messageNotificationSound'\r\n                                defaultMessage='Message notification sound'\r\n                            />\r\n                        </span>\r\n                    </label>\r\n                    <ReactSelect\r\n                        id='messageNotificationSoundSelect'\r\n                        inputId='messageNotificationSoundSelectInput'\r\n                        className='react-select inlineSelect'\r\n                        classNamePrefix='react-select'\r\n                        options={optionsOfMessageNotificationSoundsSelect}\r\n                        isClearable={false}\r\n                        isSearchable={false}\r\n                        isDisabled={!isMessageNotificationSoundChecked}\r\n                        placeholder={intl.formatMessage({\r\n                            id: 'user.settings.notifications.desktopNotificationSound.soundSelectPlaceholder',\r\n                            defaultMessage: 'Select a sound',\r\n                        })}\r\n                        components={{IndicatorSeparator: NoIndicatorSeparatorComponent}}\r\n                        value={getValueOfNotificationSoundsSelect(desktopNotificationSound)}\r\n                        onChange={handleChangeForMessageNotificationSoundSelect}\r\n                        aria-labelledby='messageNotificationSoundLabel'\r\n                        getOptionLabel={(option) => getOptionLabel(option, intl)}\r\n\r\n                    />\r\n                </div>\r\n            </Fragment>\r\n        );\r\n        maximizedSettingInputs.push(messageSoundSection);\r\n\r\n        if (isCallsRingingEnabled) {\r\n            const isIncomingCallSoundChecked = callsDesktopSound === 'true';\r\n            const callSoundSection = (\r\n                <Fragment key='callSoundSection'>\r\n                    <br/>\r\n                    <div className='checkbox inlineCheckboxSelect'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={isIncomingCallSoundChecked}\r\n                                onChange={handleChangeForIncomginCallSoundCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.desktopNotificationSound.incomingCallSound'\r\n                                defaultMessage='Incoming call sound'\r\n                            />\r\n                        </label>\r\n                        <ReactSelect\r\n                            id='incomingCallSoundNotificationSelect'\r\n                            inputId='incomingCallSoundNotificationSelectInput'\r\n                            className='react-select inlineSelect'\r\n                            classNamePrefix='react-select'\r\n                            options={optionsOfIncomingCallSoundsSelect}\r\n                            isClearable={false}\r\n                            isSearchable={false}\r\n                            isDisabled={!isIncomingCallSoundChecked}\r\n                            components={{IndicatorSeparator: NoIndicatorSeparatorComponent}}\r\n                            placeholder={intl.formatMessage({\r\n                                id: 'user.settings.notifications.desktopNotificationSound.soundSelectPlaceholder',\r\n                                defaultMessage: 'Select a sound',\r\n                            })}\r\n                            value={getValueOfIncomingCallSoundsSelect(callsNotificationSound)}\r\n                            onChange={handleChangeForIncomingCallSoundSelect}\r\n                            getOptionLabel={(option) => getOptionLabel(option, intl)}\r\n\r\n                        />\r\n                    </div>\r\n                </Fragment>\r\n            );\r\n            maximizedSettingInputs.push(callSoundSection);\r\n        }\r\n        return maximizedSettingInputs;\r\n    },\r\n    [\r\n        desktopSound,\r\n        handleChangeForMessageNotificationSoundCheckbox,\r\n        handleChangeForMessageNotificationSoundSelect,\r\n        desktopNotificationSound,\r\n        isCallsRingingEnabled,\r\n        callsDesktopSound,\r\n        handleChangeForIncomginCallSoundCheckbox,\r\n        callsNotificationSound,\r\n        handleChangeForIncomingCallSoundSelect,\r\n    ]);\r\n\r\n    function handleChangeForMaxSection(section: string) {\r\n        stopTryNotificationRing();\r\n        updateSection(section);\r\n    }\r\n\r\n    function handleChangeForMinSection(section: string) {\r\n        stopTryNotificationRing();\r\n        updateSection(section);\r\n        onCancel();\r\n    }\r\n\r\n    function handleSubmit() {\r\n        stopTryNotificationRing();\r\n        onSubmit();\r\n    }\r\n\r\n    if (active) {\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.desktopNotificationSounds.title'\r\n                        defaultMessage='Desktop notification sounds'\r\n                    />\r\n                }\r\n                inputs={maximizedSettingInputs}\r\n                submit={handleSubmit}\r\n                saving={saving}\r\n                serverError={error}\r\n                updateSection={handleChangeForMaxSection}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            ref={editButtonRef}\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopNotificationSounds.title'\r\n                    defaultMessage='Desktop notification sounds'\r\n                />\r\n            }\r\n            describe={getCollapsedText(isCallsRingingEnabled, desktopSound, desktopNotificationSound, callsDesktopSound, callsNotificationSound)}\r\n            section={UserSettingsNotificationSections.DESKTOP_NOTIFICATION_SOUND}\r\n            updateSection={handleChangeForMinSection}\r\n        />\r\n    );\r\n}\r\n\r\nfunction NoIndicatorSeparatorComponent() {\r\n    return null;\r\n}\r\n\r\nfunction getCollapsedText(\r\n    isCallsRingingEnabled: UserSettingsNotificationsProps['isCallsRingingEnabled'],\r\n    desktopSound: UserNotifyProps['desktop_sound'],\r\n    desktopNotificationSound: UserNotifyProps['desktop_notification_sound'],\r\n    callsDesktopSound: UserNotifyProps['calls_desktop_sound'],\r\n    callsNotificationSound: UserNotifyProps['calls_notification_sound'],\r\n) {\r\n    const desktopNotificationSoundIsSelected = notificationSoundKeys.includes(desktopNotificationSound as string);\r\n    const callNotificationSoundIsSelected = callNotificationSoundKeys.includes(callsNotificationSound as string);\r\n\r\n    let hasCallsSound: boolean | null = null;\r\n    if (isCallsRingingEnabled && callNotificationSoundIsSelected) {\r\n        if (callsDesktopSound === 'true') {\r\n            hasCallsSound = true;\r\n        } else {\r\n            hasCallsSound = false;\r\n        }\r\n    }\r\n\r\n    let hasDesktopSound: boolean | null = null;\r\n    if (desktopNotificationSoundIsSelected) {\r\n        if (desktopSound === 'true') {\r\n            hasDesktopSound = true;\r\n        } else {\r\n            hasDesktopSound = false;\r\n        }\r\n    }\r\n\r\n    if (hasDesktopSound !== null && hasCallsSound !== null) {\r\n        if (hasDesktopSound && hasCallsSound) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopNotificationSound.hasDesktopAndCallsSound'\r\n                    defaultMessage='\"{desktopSound}\" for messages, \"{callsSound}\" for calls'\r\n                    values={{\r\n                        desktopSound: desktopNotificationSound,\r\n                        callsSound: callsNotificationSound,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (!hasDesktopSound && hasCallsSound) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopNotificationSound.noDesktopAndhasCallsSound'\r\n                    defaultMessage='No sound for messages, \"{callsSound}\" for calls'\r\n                    values={{callsSound: callsNotificationSound}}\r\n                />\r\n            );\r\n        } else if (hasDesktopSound && !hasCallsSound) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopNotificationSound.hasDesktopAndNoCallsSound'\r\n                    defaultMessage='\"{desktopSound}\" for messages, no sound for calls'\r\n                    values={{desktopSound: desktopNotificationSound}}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.notifications.desktopNotificationSound.noDesktopAndNoCallsSound'\r\n                defaultMessage='No sound'\r\n            />\r\n        );\r\n    } else if (hasDesktopSound !== null && hasCallsSound === null) {\r\n        if (hasDesktopSound) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.desktopNotificationSound.hasDesktopSound'\r\n                    defaultMessage='\"{desktopSound}\" for messages'\r\n                    values={{desktopSound: desktopNotificationSound}}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.notifications.desktopNotificationSound.noDesktopSound'\r\n                defaultMessage='No sound'\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <FormattedMessage\r\n            id='user.settings.notifications.desktopNotificationSound.noValidSound'\r\n            defaultMessage='Configure desktop notification sounds'\r\n        />\r\n    );\r\n}\r\n\r\nexport default memo(DesktopNotificationSoundsSettings);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {Preferences} from '../constants';\r\nexport function getEmailInterval(enableEmailNotification: boolean, enableEmailBatching: boolean, emailIntervalPreference: number): number {\r\n    const {\r\n        INTERVAL_NEVER,\r\n        INTERVAL_IMMEDIATE,\r\n        INTERVAL_FIFTEEN_MINUTES,\r\n        INTERVAL_HOUR,\r\n    } = Preferences;\r\n\r\n    const validValuesWithEmailBatching = [INTERVAL_IMMEDIATE, INTERVAL_NEVER, INTERVAL_FIFTEEN_MINUTES, INTERVAL_HOUR];\r\n    const validValuesWithoutEmailBatching = [INTERVAL_IMMEDIATE, INTERVAL_NEVER];\r\n\r\n    if (!enableEmailNotification) {\r\n        return INTERVAL_NEVER;\r\n    } else if (enableEmailBatching && validValuesWithEmailBatching.indexOf(emailIntervalPreference) === -1) {\r\n        // When email batching is enabled, the default interval is 15 minutes\r\n        return INTERVAL_FIFTEEN_MINUTES;\r\n    } else if (!enableEmailBatching && validValuesWithoutEmailBatching.indexOf(emailIntervalPreference) === -1) {\r\n        // When email batching is not enabled, the default interval is immediately\r\n        return INTERVAL_IMMEDIATE;\r\n    } else if (enableEmailNotification && emailIntervalPreference === INTERVAL_NEVER) {\r\n        // When email notification is enabled, the default interval is immediately\r\n        return INTERVAL_IMMEDIATE;\r\n    }\r\n\r\n    return emailIntervalPreference;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {type RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserNotifyProps} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {getEmailInterval} from 'mattermost-redux/utils/notify_props';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {Preferences, NotificationLevels} from 'utils/constants';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nconst SECONDS_PER_MINUTE = 60;\r\n\r\ntype Props = {\r\n    active: boolean;\r\n    updateSection: (section: string) => void;\r\n    onSubmit: () => void;\r\n    onCancel: () => void;\r\n    saving?: boolean;\r\n    error?: string;\r\n    setParentState: (key: string, value: any) => void;\r\n    areAllSectionsInactive: boolean;\r\n    isCollapsedThreadsEnabled: boolean;\r\n    enableEmail: boolean;\r\n    onChange: (enableEmail: UserNotifyProps['email']) => void;\r\n    threads: string;\r\n    currentUserId: string;\r\n    emailInterval: number;\r\n    sendEmailNotifications: boolean;\r\n    enableEmailBatching: boolean;\r\n    actions: {\r\n        savePreferences: (currentUserId: string, emailIntervalPreference: PreferenceType[]) => Promise<ActionResult>;\r\n    };\r\n};\r\n\r\ntype State = {\r\n    active: boolean;\r\n    emailInterval: number;\r\n    enableEmail: boolean;\r\n    enableEmailBatching: boolean;\r\n    sendEmailNotifications: boolean;\r\n    newInterval: number;\r\n};\r\n\r\nexport default class EmailNotificationSetting extends React.PureComponent<Props, State> {\r\n    editButtonRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        const {\r\n            emailInterval,\r\n            enableEmail,\r\n            enableEmailBatching,\r\n            sendEmailNotifications,\r\n            active,\r\n        } = props;\r\n\r\n        this.state = {\r\n            active,\r\n            emailInterval,\r\n            enableEmail,\r\n            enableEmailBatching,\r\n            sendEmailNotifications,\r\n            newInterval: getEmailInterval(enableEmail && sendEmailNotifications, enableEmailBatching, emailInterval),\r\n        };\r\n\r\n        this.editButtonRef = React.createRef();\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps: Props, prevState: State) {\r\n        const {\r\n            emailInterval,\r\n            enableEmail,\r\n            enableEmailBatching,\r\n            sendEmailNotifications,\r\n            active,\r\n        } = nextProps;\r\n\r\n        // If we're re-opening this section, reset to defaults from props\r\n        if (active && !prevState.active) {\r\n            return {\r\n                active,\r\n                emailInterval,\r\n                enableEmail,\r\n                enableEmailBatching,\r\n                sendEmailNotifications,\r\n                newInterval: getEmailInterval(enableEmail && sendEmailNotifications, enableEmailBatching, emailInterval),\r\n            };\r\n        }\r\n\r\n        if (sendEmailNotifications !== prevState.sendEmailNotifications ||\r\n            enableEmailBatching !== prevState.enableEmailBatching ||\r\n            emailInterval !== prevState.emailInterval ||\r\n            active !== prevState.active\r\n        ) {\r\n            return {\r\n                active,\r\n                emailInterval,\r\n                enableEmail,\r\n                enableEmailBatching,\r\n                sendEmailNotifications,\r\n                newInterval: getEmailInterval(enableEmail && sendEmailNotifications, enableEmailBatching, emailInterval),\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.editButtonRef.current?.focus();\r\n    }\r\n\r\n    handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const enableEmail = e.currentTarget.getAttribute('data-enable-email')!;\r\n        const newInterval = parseInt(e.currentTarget.getAttribute('data-email-interval')!, 10);\r\n\r\n        this.setState({\r\n            enableEmail: enableEmail === 'true',\r\n            newInterval,\r\n        });\r\n\r\n        a11yFocus(e.currentTarget);\r\n\r\n        this.props.onChange(enableEmail as UserNotifyProps['email']);\r\n    };\r\n\r\n    handleThreadsOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const value = e.target.checked ? NotificationLevels.ALL : NotificationLevels.MENTION;\r\n        this.props.setParentState('emailThreads', value);\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        const {newInterval} = this.state;\r\n        if (this.props.emailInterval === newInterval && this.props.enableEmail === this.state.enableEmail) {\r\n            this.props.updateSection('');\r\n        } else {\r\n            // until the rest of the notification settings are moved to preferences, we have to do this separately\r\n            const {currentUserId, actions} = this.props;\r\n            const emailIntervalPreference = {\r\n                user_id: currentUserId,\r\n                category: Preferences.CATEGORY_NOTIFICATIONS,\r\n                name: Preferences.EMAIL_INTERVAL,\r\n                value: newInterval.toString(),\r\n            };\r\n\r\n            await actions.savePreferences(currentUserId, [emailIntervalPreference]);\r\n        }\r\n\r\n        this.props.onSubmit();\r\n    };\r\n\r\n    handleUpdateSection = (section?: string) => {\r\n        if (section) {\r\n            this.props.updateSection(section);\r\n        } else {\r\n            this.props.updateSection('');\r\n\r\n            this.setState({\r\n                enableEmail: this.props.enableEmail,\r\n                newInterval: this.props.emailInterval,\r\n            });\r\n            this.props.onCancel();\r\n        }\r\n    };\r\n\r\n    renderMinSettingView = () => {\r\n        const {\r\n            enableEmail,\r\n            sendEmailNotifications,\r\n        } = this.props;\r\n\r\n        const {newInterval} = this.state;\r\n\r\n        let description;\r\n        if (!sendEmailNotifications) {\r\n            description = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.email.disabled'\r\n                    defaultMessage='Email notifications are not enabled'\r\n                />\r\n            );\r\n        } else if (enableEmail) {\r\n            switch (newInterval) {\r\n            case Preferences.INTERVAL_IMMEDIATE:\r\n                if (this.props.enableEmailBatching) {\r\n                    description = (\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.email.asSoonAsYouAreAwayForFiveMinutes'\r\n                            defaultMessage='As soon as youre away for 5 minutes'\r\n                        />\r\n                    );\r\n                } else {\r\n                    description = (\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.email.on'\r\n                            defaultMessage='On'\r\n                        />\r\n                    );\r\n                }\r\n                break;\r\n            case Preferences.INTERVAL_HOUR:\r\n                description = (\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.email.everyHour'\r\n                        defaultMessage='Every hour'\r\n                    />\r\n                );\r\n                break;\r\n            case Preferences.INTERVAL_FIFTEEN_MINUTES:\r\n                description = (\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.email.everyXMinutes'\r\n                        defaultMessage='Every {count, plural, one {minute} other {{count, number} minutes}}'\r\n                        values={{count: newInterval / SECONDS_PER_MINUTE}}\r\n                    />\r\n                );\r\n                break;\r\n            default:\r\n                description = this.props.enableEmailBatching ? (\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.email.never'\r\n                        defaultMessage='Never'\r\n                    />\r\n                ) : (\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.email.off'\r\n                        defaultMessage='Off'\r\n                    />\r\n                );\r\n            }\r\n        } else {\r\n            description = this.props.enableEmailBatching ? (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.email.never'\r\n                    defaultMessage='Never'\r\n                />\r\n            ) : (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.email.off'\r\n                    defaultMessage='Off'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMin\r\n                ref={this.editButtonRef}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.emailNotifications'\r\n                        defaultMessage='Email notifications'\r\n                    />\r\n                }\r\n                describe={description}\r\n                section={'email'}\r\n                updateSection={this.handleUpdateSection}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderMaxSettingView = () => {\r\n        if (!this.props.sendEmailNotifications) {\r\n            return (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.emailNotifications'\r\n                            defaultMessage='Email notifications'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <div\r\n                            key='oauthEmailInfo'\r\n                            className='pt-2'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.disabled_long'\r\n                                defaultMessage='Email notifications have not been enabled by your System Administrator.'\r\n                            />\r\n                        </div>,\r\n                    ]}\r\n                    serverError={this.props.error}\r\n                    section={'email'}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        const {newInterval} = this.state;\r\n        let emailOptions = null;\r\n        let emailInfo = null;\r\n        let emailTitle = null;\r\n        if (this.props.enableEmailBatching) {\r\n            emailOptions = (\r\n                <fieldset>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationImmediately'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_IMMEDIATE}\r\n                                data-enable-email={'true'}\r\n                                data-email-interval={Preferences.INTERVAL_IMMEDIATE}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.asSoonAsYouAreAwayForFiveMinutes'\r\n                                defaultMessage='As soon as youre away for 5 minutes'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationMinutes'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_FIFTEEN_MINUTES}\r\n                                data-enable-email={'true'}\r\n                                data-email-interval={Preferences.INTERVAL_FIFTEEN_MINUTES}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.everyXMinutes'\r\n                                defaultMessage='Every {count, plural, one {minute} other {{count, number} minutes}}'\r\n                                values={{count: Preferences.INTERVAL_FIFTEEN_MINUTES / SECONDS_PER_MINUTE}}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationHour'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_HOUR}\r\n                                data-enable-email={'true'}\r\n                                data-email-interval={Preferences.INTERVAL_HOUR}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.everyHour'\r\n                                defaultMessage='Every hour'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationNever'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_NEVER}\r\n                                data-enable-email={'false'}\r\n                                data-email-interval={Preferences.INTERVAL_NEVER}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.never'\r\n                                defaultMessage='Never'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </fieldset>\r\n            );\r\n\r\n            emailInfo = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.emailBatchingInfo'\r\n                    defaultMessage='Email notifications are sent for mentions and direct messages when you are offline or away for more than 5 minutes. If you choose to receive notifications every 15 minutes or every hour, notifications during that period will be combined into a single email.'\r\n                />\r\n            );\r\n\r\n            emailTitle = ( // Renders only in case emails are batched\r\n                <legend className='form-legend'>\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.email.send'\r\n                        defaultMessage='Send email notifications'\r\n                    />\r\n                </legend>\r\n            );\r\n        } else {\r\n            emailOptions = (\r\n                <fieldset>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationImmediately'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_IMMEDIATE}\r\n                                data-enable-email={'true'}\r\n                                data-email-interval={Preferences.INTERVAL_IMMEDIATE}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.on'\r\n                                defaultMessage='On'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='emailNotificationNever'\r\n                                type='radio'\r\n                                name='emailNotifications'\r\n                                checked={newInterval === Preferences.INTERVAL_NEVER}\r\n                                data-enable-email={'false'}\r\n                                data-email-interval={Preferences.INTERVAL_NEVER}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.email.off'\r\n                                defaultMessage='Off'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </fieldset>\r\n            );\r\n\r\n            emailInfo = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.emailInfo'\r\n                    defaultMessage='When enabled, email notifications are sent for mentions and direct messages when you are offline or away for more than 5 minutes.'\r\n                />\r\n            );\r\n        }\r\n\r\n        let threadsNotificationSelection = null;\r\n        if (this.props.isCollapsedThreadsEnabled && this.props.enableEmail) {\r\n            threadsNotificationSelection = (\r\n                <React.Fragment key='userNotificationEmailThreadsOptions'>\r\n                    <hr/>\r\n                    <fieldset>\r\n                        <div className='checkbox single-checkbox'>\r\n                            <label>\r\n                                <input\r\n                                    id='desktopThreadsNotificationAllActivity'\r\n                                    type='checkbox'\r\n                                    name='desktopThreadsNotificationLevel'\r\n                                    checked={this.props.threads === NotificationLevels.ALL}\r\n                                    onChange={this.handleThreadsOnChange}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.notifications.email.notifyForthreads'\r\n                                    defaultMessage={'Notify me about replies to threads Im following'}\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                    </fieldset>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.emailNotifications'\r\n                        defaultMessage='Email notifications'\r\n                    />\r\n                }\r\n                inputs={[\r\n                    <fieldset key='userNotificationEmailOptions'>\r\n                        {emailTitle}\r\n                        {emailOptions}\r\n                        <div className='mt-3'>\r\n                            {emailInfo}\r\n                        </div>\r\n                    </fieldset>,\r\n                    threadsNotificationSelection,\r\n                ]}\r\n                submit={this.handleSubmit}\r\n                saving={this.props.saving}\r\n                serverError={this.props.error}\r\n                updateSection={this.handleUpdateSection}\r\n            />\r\n        );\r\n    };\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.active) {\r\n            return this.renderMaxSettingView();\r\n        }\r\n\r\n        return this.renderMinSettingView();\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/common';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {get as getPreference} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport EmailNotificationSetting from './email_notification_setting';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config = getConfig(state);\r\n    const emailInterval = parseInt(getPreference(\r\n        state,\r\n        Preferences.CATEGORY_NOTIFICATIONS,\r\n        Preferences.EMAIL_INTERVAL,\r\n        Preferences.INTERVAL_NOT_SET.toString(),\r\n    ), 10);\r\n\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        emailInterval,\r\n        enableEmailBatching: config.EnableEmailBatching === 'true',\r\n        sendEmailNotifications: config.SendEmailNotifications === 'true',\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EmailNotificationSetting);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {ChangeEvent} from 'react';\r\nimport {defineMessage, FormattedMessage} from 'react-intl';\r\n\r\nimport LocalizedPlaceholderTextarea from 'components/localized_placeholder_textarea';\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nconst MESSAGE_MAX_LENGTH = 200;\r\n\r\ntype Props = {\r\n    autoResponderActive: boolean;\r\n    autoResponderMessage: string;\r\n    updateSection: (section: string) => void;\r\n    setParentState: (key: string, value: string | boolean) => void;\r\n    submit: () => void;\r\n    saving: boolean;\r\n    error?: string;\r\n}\r\n\r\nexport default class ManageAutoResponder extends React.PureComponent<Props> {\r\n    handleAutoResponderChecked = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.props.setParentState('autoResponderActive', e.target.checked);\r\n    };\r\n\r\n    onMessageChanged = (e: ChangeEvent<HTMLTextAreaElement>) => {\r\n        this.props.setParentState('autoResponderMessage', e.target.value);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            autoResponderActive,\r\n            autoResponderMessage,\r\n        } = this.props;\r\n\r\n        let serverError;\r\n        if (this.props.error) {\r\n            serverError = <label className='has-error'>{this.props.error}</label>;\r\n        }\r\n\r\n        const inputs = [];\r\n\r\n        const activeToggle = (\r\n            <div\r\n                id='autoResponderCheckbox'\r\n                key='autoResponderCheckbox'\r\n                className='checkbox'\r\n            >\r\n                <label>\r\n                    <input\r\n                        id='autoResponderActive'\r\n                        type='checkbox'\r\n                        checked={autoResponderActive}\r\n                        onChange={this.handleAutoResponderChecked}\r\n                    />\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.autoResponderEnabled'\r\n                        defaultMessage='Enabled'\r\n                    />\r\n                </label>\r\n            </div>\r\n        );\r\n\r\n        const message = (\r\n            <div\r\n                id='autoResponderMessage'\r\n                key='autoResponderMessage'\r\n            >\r\n                <div className='pt-2'>\r\n                    <LocalizedPlaceholderTextarea\r\n                        style={{resize: 'none', height: 'auto'}}\r\n                        id='autoResponderMessageInput'\r\n                        className='form-control'\r\n                        rows={5}\r\n                        placeholder={defineMessage({id: 'user.settings.notifications.autoResponderPlaceholder', defaultMessage: 'Message'})}\r\n                        value={autoResponderMessage}\r\n                        maxLength={MESSAGE_MAX_LENGTH}\r\n                        onChange={this.onMessageChanged}\r\n                    />\r\n                    {serverError}\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        inputs.push(activeToggle);\r\n        if (autoResponderActive) {\r\n            inputs.push(message);\r\n        }\r\n        inputs.push((\r\n            <div\r\n                key='autoResponderHint'\r\n                className='mt-5'\r\n            >\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.autoResponderHint'\r\n                    defaultMessage='Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications.'\r\n                />\r\n            </div>\r\n        ));\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.autoResponder'\r\n                        defaultMessage='Automatic direct message replies'\r\n                    />\r\n                }\r\n                shiftEnter={true}\r\n                submit={this.props.submit}\r\n                saving={this.props.saving}\r\n                inputs={inputs}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {sendTestNotification} from 'actions/notification_actions';\r\n\r\nimport {useExternalLink} from 'components/common/hooks/use_external_link';\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nconst sectionNoticeContainerStyle: React.CSSProperties = {marginTop: 20};\r\n\r\nconst TIME_TO_SENDING = 500;\r\nconst TIME_TO_SEND = 500;\r\nconst TIME_TO_IDLE = 3000;\r\n\r\ntype Props = {\r\n    adminMode?: boolean;\r\n};\r\n\r\ntype ButtonState = 'idle'|'sending'|'sent'|'error';\r\n\r\nconst SendTestNotificationNotice = ({\r\n    adminMode = false,\r\n}: Props) => {\r\n    const intl = useIntl();\r\n    const [buttonState, setButtonState] = useState<ButtonState>('idle');\r\n    const isSending = useRef(false);\r\n    const timeout = useRef<NodeJS.Timeout>();\r\n    const [externalLink] = useExternalLink('https://mattermost.com/pl/troubleshoot-notifications');\r\n\r\n    const onGoToNotificationDocumentation = useCallback(() => {\r\n        window.open(externalLink);\r\n    }, [externalLink]);\r\n\r\n    const onSendTestNotificationClick = useCallback(async () => {\r\n        if (isSending.current) {\r\n            return;\r\n        }\r\n        isSending.current = true;\r\n        let isShowingSending = false;\r\n        timeout.current = setTimeout(() => {\r\n            isShowingSending = true;\r\n            setButtonState('sending');\r\n        }, TIME_TO_SENDING);\r\n        const result = await sendTestNotification();\r\n        clearTimeout(timeout.current);\r\n        const setResult = () => {\r\n            if (result.status === 'OK') {\r\n                setButtonState('sent');\r\n            } else {\r\n                // We want to log this error into the console mainly\r\n                // for debugging reasons. We still use the 'error' level\r\n                // because it is an unexpected error.\r\n                // eslint-disable-next-line no-console\r\n                console.error(result);\r\n                setButtonState('error');\r\n            }\r\n            timeout.current = setTimeout(() => {\r\n                isSending.current = false;\r\n                setButtonState('idle');\r\n            }, TIME_TO_IDLE);\r\n        };\r\n\r\n        if (isShowingSending) {\r\n            timeout.current = setTimeout(setResult, TIME_TO_SEND);\r\n        } else {\r\n            setResult();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            clearTimeout(timeout.current);\r\n        };\r\n    }, []);\r\n\r\n    const primaryButton = useMemo(() => {\r\n        let text;\r\n        let icon;\r\n        let loading;\r\n        switch (buttonState) {\r\n        case 'idle':\r\n            text = intl.formatMessage({id: 'user_settings.notifications.test_notification.send_button.send', defaultMessage: 'Send a test notification'});\r\n            break;\r\n        case 'sending':\r\n            text = intl.formatMessage({id: 'user_settings.notifications.test_notification.send_button.sending', defaultMessage: 'Sending a test notification'});\r\n            loading = true;\r\n            break;\r\n        case 'sent':\r\n            text = intl.formatMessage({id: 'user_settings.notifications.test_notification.send_button.sent', defaultMessage: 'Test notification sent'});\r\n            icon = 'icon-check';\r\n            break;\r\n        case 'error':\r\n            text = intl.formatMessage({id: 'user_settings.notifications.test_notification.send_button.error', defaultMessage: 'Error sending test notification'});\r\n            icon = 'icon-alert-outline';\r\n        }\r\n        return {\r\n            onClick: onSendTestNotificationClick,\r\n            text,\r\n            leadingIcon: icon,\r\n            loading,\r\n        };\r\n    }, [buttonState, intl, onSendTestNotificationClick]);\r\n\r\n    const secondaryButton = useMemo(() => {\r\n        return {\r\n            onClick: onGoToNotificationDocumentation,\r\n            text: intl.formatMessage({id: 'user_settings.notifications.test_notification.go_to_docs', defaultMessage: 'Troubleshooting docs'}),\r\n            trailingIcon: 'icon-open-in-new',\r\n        };\r\n    }, [intl, onGoToNotificationDocumentation]);\r\n\r\n    if (adminMode) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='divider-light'/>\r\n            <div style={sectionNoticeContainerStyle}>\r\n                <SectionNotice\r\n                    text={intl.formatMessage({\r\n                        id: 'user_settings.notifications.test_notification.body',\r\n                        defaultMessage: 'Not receiving notifications? Start by sending a test notification to all your devices to check if theyre working as expected. If issues persist, explore ways to solve them with troubleshooting steps.',\r\n                    })}\r\n                    title={intl.formatMessage({id: 'user_settings.notifications.test_notification.title', defaultMessage: 'Troubleshooting notifications'})}\r\n                    primaryButton={primaryButton}\r\n                    tertiaryButton={secondaryButton}\r\n                    type='hint'\r\n                />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SendTestNotificationNotice;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React from 'react';\r\nimport type {ChangeEvent} from 'react';\r\nimport type {WrappedComponentProps} from 'react-intl';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {InputProps, OnChangeValue, StylesConfig} from 'react-select';\r\nimport {components} from 'react-select';\r\nimport CreatableReactSelect from 'react-select/creatable';\r\n\r\nimport {LightbulbOutlineIcon} from '@mattermost/compass-icons/components';\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\nimport type {UserNotifyProps, UserProfile} from '@mattermost/types/users';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport RestrictedIndicator from 'components/widgets/menu/menu_items/restricted_indicator';\r\n\r\nimport Constants, {NotificationLevels, MattermostFeatures, LicenseSkus, UserSettingsNotificationSections} from 'utils/constants';\r\nimport {notificationSoundKeys, stopTryNotificationRing} from 'utils/notification_sounds';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nimport DesktopAndMobileNotificationSettings from './desktop_and_mobile_notification_setting';\r\nimport DesktopNotificationSoundsSettings from './desktop_notification_sounds_setting';\r\nimport EmailNotificationSetting from './email_notification_setting';\r\nimport ManageAutoResponder from './manage_auto_responder/manage_auto_responder';\r\nimport SendTestNotificationNotice from './send_test_notification_notice';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nconst WHITE_SPACE_REGEX = /\\s+/g;\r\nconst COMMA_REGEX = /,/g;\r\n\r\ntype MultiInputValue = {\r\n    label: string;\r\n    value: string;\r\n}\r\n\r\nexport type OwnProps = {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    adminMode?: boolean;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\nexport type Props = PropsFromRedux & OwnProps & WrappedComponentProps;\r\n\r\ntype State = {\r\n    enableEmail: UserNotifyProps['email'];\r\n    desktopActivity: UserNotifyProps['desktop'];\r\n    desktopThreads: UserNotifyProps['desktop_threads'];\r\n    pushThreads: UserNotifyProps['push_threads'];\r\n    emailThreads: UserNotifyProps['email_threads'];\r\n    pushActivity: UserNotifyProps['push'];\r\n    pushStatus: UserNotifyProps['push_status'];\r\n    desktopSound: UserNotifyProps['desktop_sound'];\r\n    callsDesktopSound: UserNotifyProps['calls_desktop_sound'];\r\n    desktopNotificationSound: UserNotifyProps['desktop_notification_sound'];\r\n    callsNotificationSound: UserNotifyProps['calls_notification_sound'];\r\n    usernameKey: boolean;\r\n    isCustomKeysWithNotificationInputChecked: boolean;\r\n    customKeysWithNotification: MultiInputValue[];\r\n    customKeysWithNotificationInputValue: string;\r\n    customKeysWithHighlight: MultiInputValue[];\r\n    customKeysWithHighlightInputValue: string;\r\n    firstNameKey: boolean;\r\n    channelKey: boolean;\r\n    autoResponderActive: boolean;\r\n    autoResponderMessage: UserNotifyProps['auto_responder_message'];\r\n    notifyCommentsLevel: UserNotifyProps['comments'];\r\n    isSaving: boolean;\r\n    serverError: string;\r\n    desktopAndMobileSettingsDifferent: boolean;\r\n};\r\n\r\nfunction getDefaultStateFromProps(props: Props): State {\r\n    let desktop: UserNotifyProps['desktop'] = NotificationLevels.MENTION;\r\n    let desktopThreads: UserNotifyProps['desktop_threads'] = NotificationLevels.ALL;\r\n    let pushThreads: UserNotifyProps['push_threads'] = NotificationLevels.ALL;\r\n    let emailThreads: UserNotifyProps['email_threads'] = NotificationLevels.ALL;\r\n    let sound: UserNotifyProps['desktop_sound'] = 'true';\r\n    let callsSound: UserNotifyProps['calls_desktop_sound'] = 'true';\r\n    let desktopNotificationSound: UserNotifyProps['desktop_notification_sound'] = notificationSoundKeys[0] as UserNotifyProps['desktop_notification_sound'];\r\n    let callsNotificationSound: UserNotifyProps['calls_notification_sound'] = 'Calm';\r\n    let comments: UserNotifyProps['comments'] = 'never';\r\n    let enableEmail: UserNotifyProps['email'] = 'true';\r\n    let pushActivity: UserNotifyProps['push'] = NotificationLevels.MENTION;\r\n    let pushStatus: UserNotifyProps['push_status'] = Constants.UserStatuses.AWAY;\r\n    let autoResponderActive = false;\r\n    let autoResponderMessage: UserNotifyProps['auto_responder_message'] = props.intl.formatMessage({\r\n        id: 'user.settings.notifications.autoResponderDefault',\r\n        defaultMessage: 'Hello, I am out of office and unable to respond to messages.',\r\n    });\r\n    let desktopAndMobileSettingsDifferent = true;\r\n\r\n    if (props.user.notify_props) {\r\n        if (props.user.notify_props.desktop) {\r\n            desktop = props.user.notify_props.desktop;\r\n        }\r\n        if (props.user.notify_props.desktop_threads) {\r\n            desktopThreads = props.user.notify_props.desktop_threads;\r\n        }\r\n        if (props.user.notify_props.push_threads) {\r\n            pushThreads = props.user.notify_props.push_threads;\r\n        }\r\n        if (props.user.notify_props.email_threads) {\r\n            emailThreads = props.user.notify_props.email_threads;\r\n        }\r\n        if (props.user.notify_props.desktop_sound) {\r\n            sound = props.user.notify_props.desktop_sound;\r\n        }\r\n        if (props.user.notify_props.calls_desktop_sound) {\r\n            callsSound = props.user.notify_props.calls_desktop_sound;\r\n        }\r\n        if (props.user.notify_props.desktop_notification_sound) {\r\n            desktopNotificationSound = props.user.notify_props.desktop_notification_sound;\r\n        }\r\n        if (props.user.notify_props.calls_notification_sound) {\r\n            callsNotificationSound = props.user.notify_props.calls_notification_sound;\r\n        }\r\n        if (props.user.notify_props.comments) {\r\n            comments = props.user.notify_props.comments;\r\n        }\r\n        if (props.user.notify_props.email) {\r\n            enableEmail = props.user.notify_props.email;\r\n        }\r\n        if (props.user.notify_props.push) {\r\n            pushActivity = props.user.notify_props.push;\r\n        }\r\n        if (props.user.notify_props.push_status) {\r\n            pushStatus = props.user.notify_props.push_status;\r\n        }\r\n\r\n        if (props.user.notify_props.auto_responder_active) {\r\n            autoResponderActive = props.user.notify_props.auto_responder_active === 'true';\r\n        }\r\n\r\n        if (props.user.notify_props.auto_responder_message) {\r\n            autoResponderMessage = props.user.notify_props.auto_responder_message;\r\n        }\r\n\r\n        if (props.user.notify_props.desktop && props.user.notify_props.push) {\r\n            desktopAndMobileSettingsDifferent = areDesktopAndMobileSettingsDifferent(props.user.notify_props.desktop, props.user.notify_props.push, props.user.notify_props?.desktop_threads, props.user.notify_props?.push_threads, props.isCollapsedThreadsEnabled);\r\n        }\r\n    }\r\n\r\n    let usernameKey = false;\r\n    let firstNameKey = false;\r\n    let channelKey = false;\r\n    let isCustomKeysWithNotificationInputChecked = false;\r\n    const customKeysWithNotification: MultiInputValue[] = [];\r\n    const customKeysWithHighlight: MultiInputValue[] = [];\r\n\r\n    if (props.user.notify_props) {\r\n        if (props.user.notify_props?.mention_keys?.length > 0) {\r\n            const mentionKeys = props.user.notify_props.mention_keys.split(',').filter((key) => key.length > 0);\r\n            mentionKeys.forEach((mentionKey) => {\r\n                // Remove username(s) from list of keys\r\n                if (mentionKey !== props.user.username && mentionKey !== `@${props.user.username}`) {\r\n                    customKeysWithNotification.push({\r\n                        label: mentionKey,\r\n                        value: mentionKey,\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Check if username is in list of keys, if so, set the checkbox to true\r\n            usernameKey = mentionKeys.includes(props.user.username);\r\n\r\n            // Check if there are any keys in the list, if so, set the checkbox of custom keys to true\r\n            isCustomKeysWithNotificationInputChecked = customKeysWithNotification.length > 0;\r\n        }\r\n\r\n        if (props.user.notify_props?.highlight_keys?.length > 0) {\r\n            const highlightKeys = props.user.notify_props.highlight_keys.split(',').filter((key) => key.length > 0);\r\n            highlightKeys.forEach((highlightKey) => {\r\n                customKeysWithHighlight.push({\r\n                    label: highlightKey,\r\n                    value: highlightKey,\r\n                });\r\n            });\r\n        }\r\n\r\n        firstNameKey = props.user.notify_props?.first_name === 'true';\r\n        channelKey = props.user.notify_props?.channel === 'true';\r\n    }\r\n\r\n    return {\r\n        desktopActivity: desktop,\r\n        desktopThreads,\r\n        pushThreads,\r\n        emailThreads,\r\n        enableEmail,\r\n        pushActivity,\r\n        pushStatus,\r\n        desktopSound: sound,\r\n        callsDesktopSound: callsSound,\r\n        desktopNotificationSound,\r\n        callsNotificationSound,\r\n        usernameKey,\r\n        customKeysWithNotification,\r\n        isCustomKeysWithNotificationInputChecked,\r\n        customKeysWithNotificationInputValue: '',\r\n        customKeysWithHighlight,\r\n        customKeysWithHighlightInputValue: '',\r\n        firstNameKey,\r\n        channelKey,\r\n        autoResponderActive,\r\n        autoResponderMessage,\r\n        notifyCommentsLevel: comments,\r\n        isSaving: false,\r\n        serverError: '',\r\n        desktopAndMobileSettingsDifferent,\r\n    };\r\n}\r\n\r\nexport const CreatableReactSelectInput = (props: InputProps<MultiInputValue, true>) => {\r\n    const ariaProps = {\r\n        'aria-labelledby': 'settingTitle',\r\n    };\r\n\r\n    return (\r\n        <components.Input\r\n            {...props}\r\n            {...ariaProps}\r\n        />);\r\n};\r\n\r\nclass NotificationsTab extends React.PureComponent<Props, State> {\r\n    static defaultProps = {\r\n        activeSection: '',\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = getDefaultStateFromProps(props);\r\n    }\r\n\r\n    handleSubmit = async () => {\r\n        const data: UserNotifyProps = {...this.props.user.notify_props};\r\n        data.email = this.state.enableEmail;\r\n        data.desktop_sound = this.state.desktopSound;\r\n        data.calls_desktop_sound = this.state.callsDesktopSound;\r\n        data.desktop_notification_sound = this.state.desktopNotificationSound;\r\n        data.calls_notification_sound = this.state.callsNotificationSound;\r\n        data.desktop = this.state.desktopActivity;\r\n        data.desktop_threads = this.state.desktopThreads;\r\n        data.email_threads = this.state.emailThreads;\r\n        data.push_status = this.state.pushStatus;\r\n        data.comments = this.state.notifyCommentsLevel;\r\n        data.auto_responder_active = this.state.autoResponderActive ? 'true' : 'false';\r\n        data.auto_responder_message = this.state.autoResponderMessage;\r\n        data.first_name = this.state.firstNameKey ? 'true' : 'false';\r\n        data.channel = this.state.channelKey ? 'true' : 'false';\r\n\r\n        if (this.state.desktopAndMobileSettingsDifferent) {\r\n            data.push = this.state.pushActivity;\r\n            data.push_threads = this.state.pushThreads;\r\n        } else {\r\n            data.push = this.state.desktopActivity;\r\n            data.push_threads = this.state.desktopThreads;\r\n        }\r\n\r\n        if (!data.auto_responder_message || data.auto_responder_message === '') {\r\n            data.auto_responder_message = this.props.intl.formatMessage({\r\n                id: 'user.settings.notifications.autoResponderDefault',\r\n                defaultMessage: 'Hello, I am out of office and unable to respond to messages.',\r\n            });\r\n        }\r\n\r\n        const mentionKeys: string[] = [];\r\n        if (this.state.usernameKey) {\r\n            mentionKeys.push(this.props.user.username);\r\n        }\r\n        if (this.state.isCustomKeysWithNotificationInputChecked && this.state.customKeysWithNotification.length > 0) {\r\n            this.state.customKeysWithNotification.forEach((key) => {\r\n                mentionKeys.push(key.value);\r\n            });\r\n        }\r\n        data.mention_keys = mentionKeys.join(',');\r\n\r\n        const highlightKeys: string[] = [];\r\n        if (this.state.customKeysWithHighlight.length > 0) {\r\n            this.state.customKeysWithHighlight.forEach((key) => {\r\n                highlightKeys.push(key.value);\r\n            });\r\n        }\r\n        data.highlight_keys = highlightKeys.join(',');\r\n\r\n        this.setState({isSaving: true});\r\n        stopTryNotificationRing();\r\n\r\n        let updatedUser: UserProfile | undefined;\r\n        let error;\r\n\r\n        if (this.props.adminMode) {\r\n            const payloadUser = {...this.props.user, notify_props: data};\r\n            const response = await this.props.patchUser(payloadUser);\r\n            updatedUser = response.data;\r\n            error = response.error;\r\n        } else {\r\n            const response = await this.props.updateMe({notify_props: data});\r\n            updatedUser = response.data;\r\n            error = response.error;\r\n        }\r\n\r\n        if (updatedUser) {\r\n            this.handleUpdateSection('');\r\n            this.setState(getDefaultStateFromProps(this.props));\r\n        } else if (error) {\r\n            this.setState({serverError: error.message, isSaving: false});\r\n        } else {\r\n            this.setState({serverError: '', isSaving: false});\r\n        }\r\n    };\r\n\r\n    handleCancel = (): void => {\r\n        this.setState(getDefaultStateFromProps(this.props));\r\n        stopTryNotificationRing();\r\n    };\r\n\r\n    handleUpdateSection = (section: string): void => {\r\n        if (section) {\r\n            this.props.updateSection(section);\r\n        } else {\r\n            this.props.updateSection('');\r\n        }\r\n        this.setState({isSaving: false});\r\n        this.handleCancel();\r\n    };\r\n\r\n    setStateValue = (key: string, value: string | boolean): void => {\r\n        const data: {[key: string]: string | boolean } = {};\r\n        data[key] = value;\r\n        this.setState((prevState) => ({...prevState, ...data}));\r\n    };\r\n\r\n    handleNotifyCommentsRadio = (notifyCommentsLevel: UserNotifyProps['comments'], e?: React.ChangeEvent): void => {\r\n        this.setState({notifyCommentsLevel});\r\n        a11yFocus(e?.currentTarget as HTMLElement);\r\n    };\r\n\r\n    handleEmailRadio = (enableEmail: UserNotifyProps['email']): void => {\r\n        this.setState({enableEmail});\r\n    };\r\n\r\n    handleChangeForUsernameKeyCheckbox = (event: ChangeEvent<HTMLInputElement>) => {\r\n        const {target: {checked}} = event;\r\n        this.setState({usernameKey: checked});\r\n    };\r\n\r\n    handleChangeForFirstNameKeyCheckbox = (event: ChangeEvent<HTMLInputElement>) => {\r\n        const {target: {checked}} = event;\r\n        this.setState({firstNameKey: checked});\r\n    };\r\n\r\n    handleChangeForChannelKeyCheckbox = (event: ChangeEvent<HTMLInputElement>) => {\r\n        const {target: {checked}} = event;\r\n        this.setState({channelKey: checked});\r\n    };\r\n\r\n    handleChangeForCustomKeysWithNotificationCheckbox = (event: ChangeEvent<HTMLInputElement>) => {\r\n        const {target: {checked}} = event;\r\n        this.setState({isCustomKeysWithNotificationInputChecked: checked});\r\n    };\r\n\r\n    handleChangeForCustomKeysWithNotificationInput = (values: OnChangeValue<{ value: string }, true>) => {\r\n        if (values && Array.isArray(values) && values.length > 0) {\r\n            // Check the custom keys input checkbox when atleast a single key is entered\r\n            if (this.state.isCustomKeysWithNotificationInputChecked === false) {\r\n                this.setState({\r\n                    isCustomKeysWithNotificationInputChecked: true,\r\n                });\r\n            }\r\n\r\n            const customKeysWithNotification = values.\r\n                map((value: MultiInputValue) => {\r\n                    // Remove all spaces from the value\r\n                    const formattedValue = value.value.trim().replace(WHITE_SPACE_REGEX, '');\r\n                    return {value: formattedValue, label: formattedValue};\r\n                }).\r\n                filter((value) => value.value.length > 0);\r\n            this.setState({customKeysWithNotification});\r\n        } else {\r\n            this.setState({\r\n                isCustomKeysWithNotificationInputChecked: false,\r\n                customKeysWithNotification: [],\r\n            });\r\n        }\r\n    };\r\n\r\n    updateCustomKeysWithNotificationWithInputValue = (newValue: string) => {\r\n        const customKeysWithNotification = [\r\n            ...this.state.customKeysWithNotification,\r\n            {\r\n                value: newValue,\r\n                label: newValue,\r\n            },\r\n        ];\r\n\r\n        this.setState({\r\n            customKeysWithNotification,\r\n            customKeysWithNotificationInputValue: '', // Clear the input field\r\n        });\r\n\r\n        if (!this.state.isCustomKeysWithNotificationInputChecked) {\r\n            this.setState({isCustomKeysWithNotificationInputChecked: true});\r\n        }\r\n    };\r\n\r\n    handleOnKeydownForCustomKeysWithNotificationInput = (event: React.KeyboardEvent) => {\r\n        if (event.key === Constants.KeyCodes.COMMA[0] || event.key === Constants.KeyCodes.TAB[0]) {\r\n            const unsavedCustomKeyWithNotification = this.state.customKeysWithNotificationInputValue?.trim()?.replace(WHITE_SPACE_REGEX, '')?.replace(COMMA_REGEX, '') ?? '';\r\n            if (unsavedCustomKeyWithNotification.length > 0) {\r\n                this.updateCustomKeysWithNotificationWithInputValue(unsavedCustomKeyWithNotification);\r\n            }\r\n        }\r\n    };\r\n\r\n    handleChangeForCustomKeysWithNotificationInputValue = (value: string) => {\r\n        // Check if input contains comma, if so, add the value to the list of custom keys\r\n        if (!value.includes(Constants.KeyCodes.COMMA[0])) {\r\n            const formattedValue = value.trim().replace(WHITE_SPACE_REGEX, '');\r\n            this.setState({customKeysWithNotificationInputValue: formattedValue});\r\n        }\r\n    };\r\n\r\n    handleBlurForCustomKeysWithNotificationInput = () => {\r\n        const unsavedCustomKeyWithNotification = this.state.customKeysWithNotificationInputValue?.trim()?.replace(WHITE_SPACE_REGEX, '')?.replace(COMMA_REGEX, '') ?? '';\r\n        if (unsavedCustomKeyWithNotification.length > 0) {\r\n            this.updateCustomKeysWithNotificationWithInputValue(unsavedCustomKeyWithNotification);\r\n        }\r\n    };\r\n\r\n    handleChangeForCustomKeysWithHighlightInput = (values: OnChangeValue<{ value: string }, true>) => {\r\n        if (values && Array.isArray(values) && values.length > 0) {\r\n            const customKeysWithHighlight = values.\r\n                map((value: MultiInputValue) => {\r\n                    const formattedValue = value.value.trim();\r\n                    return {value: formattedValue, label: formattedValue};\r\n                }).\r\n                filter((value) => value.value.length > 0);\r\n            this.setState({customKeysWithHighlight});\r\n        } else {\r\n            this.setState({\r\n                customKeysWithHighlight: [],\r\n            });\r\n        }\r\n    };\r\n\r\n    handleChangeForCustomKeysWithHighlightInputValue = (value: string) => {\r\n        if (!value.includes(Constants.KeyCodes.COMMA[0])) {\r\n            this.setState({customKeysWithHighlightInputValue: value});\r\n        }\r\n    };\r\n\r\n    updateCustomKeysWithHighlightWithInputValue = (newValue: State['customKeysWithHighlightInputValue']) => {\r\n        const unsavedCustomKeyWithHighlight = newValue?.trim()?.replace(COMMA_REGEX, '') ?? '';\r\n\r\n        if (unsavedCustomKeyWithHighlight.length > 0) {\r\n            const customKeysWithHighlight = [\r\n                ...this.state.customKeysWithHighlight,\r\n                {\r\n                    value: unsavedCustomKeyWithHighlight,\r\n                    label: unsavedCustomKeyWithHighlight,\r\n                },\r\n            ];\r\n\r\n            this.setState({\r\n                customKeysWithHighlight,\r\n                customKeysWithHighlightInputValue: '',\r\n            });\r\n        }\r\n    };\r\n\r\n    handleBlurForCustomKeysWithHighlightInput = () => {\r\n        this.updateCustomKeysWithHighlightWithInputValue(this.state.customKeysWithHighlightInputValue);\r\n    };\r\n\r\n    handleOnKeydownForCustomKeysWithHighlightInput = (event: React.KeyboardEvent) => {\r\n        if (event.key === Constants.KeyCodes.COMMA[0] || event.key === Constants.KeyCodes.TAB[0]) {\r\n            this.updateCustomKeysWithHighlightWithInputValue(this.state.customKeysWithHighlightInputValue);\r\n        }\r\n    };\r\n\r\n    handleCloseSettingsModal = () => {\r\n        this.props.closeModal();\r\n    };\r\n\r\n    createKeywordsWithNotificationSection = () => {\r\n        const serverError = this.state.serverError;\r\n        const user = this.props.user;\r\n        const isSectionExpanded = this.props.activeSection === UserSettingsNotificationSections.KEYWORDS_MENTIONS;\r\n\r\n        let expandedSection = null;\r\n        if (isSectionExpanded) {\r\n            const inputs = [];\r\n\r\n            if (user.first_name) {\r\n                inputs.push(\r\n                    <div key='userNotificationFirstNameOption'>\r\n                        <div className='checkbox'>\r\n                            <label>\r\n                                <input\r\n                                    id='notificationTriggerFirst'\r\n                                    type='checkbox'\r\n                                    checked={this.state.firstNameKey}\r\n                                    onChange={this.handleChangeForFirstNameKeyCheckbox}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.notifications.sensitiveName'\r\n                                    defaultMessage='Your case-sensitive first name \"{first_name}\"'\r\n                                    values={{\r\n                                        first_name: user.first_name,\r\n                                    }}\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            inputs.push(\r\n                <div key='userNotificationUsernameOption'>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationTriggerUsername'\r\n                                type='checkbox'\r\n                                checked={this.state.usernameKey}\r\n                                onChange={this.handleChangeForUsernameKeyCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.sensitiveUsername'\r\n                                defaultMessage='Your non case-sensitive username \"{username}\"'\r\n                                values={{\r\n                                    username: user.username,\r\n                                }}\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </div>,\r\n            );\r\n\r\n            inputs.push(\r\n                <div key='userNotificationChannelOption'>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationTriggerShouts'\r\n                                type='checkbox'\r\n                                checked={this.state.channelKey}\r\n                                onChange={this.handleChangeForChannelKeyCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.channelWide'\r\n                                defaultMessage='Channel-wide mentions \"@channel\", \"@all\", \"@here\"'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </div>,\r\n            );\r\n\r\n            inputs.push(\r\n                <div\r\n                    key='userNotificationCustomOption'\r\n                    className='customKeywordsWithNotificationSubsection'\r\n                >\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationTriggerCustom'\r\n                                type='checkbox'\r\n                                checked={this.state.isCustomKeysWithNotificationInputChecked}\r\n                                onChange={this.handleChangeForCustomKeysWithNotificationCheckbox}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.sensitiveCustomWords'\r\n                                defaultMessage='Other non case-sensitive words, press Tab or use commas to separate keywords:'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <CreatableReactSelect\r\n                        inputId='notificationTriggerCustomText'\r\n                        autoFocus={true}\r\n                        isClearable={false}\r\n                        isMulti={true}\r\n                        styles={customKeywordsSelectorStyles}\r\n                        placeholder=''\r\n                        components={{\r\n                            DropdownIndicator: () => null,\r\n                            Menu: () => null,\r\n                            MenuList: () => null,\r\n                            Input: CreatableReactSelectInput,\r\n                        }}\r\n                        onChange={this.handleChangeForCustomKeysWithNotificationInput}\r\n                        value={this.state.customKeysWithNotification}\r\n                        inputValue={this.state.customKeysWithNotificationInputValue}\r\n                        onInputChange={this.handleChangeForCustomKeysWithNotificationInputValue}\r\n                        onBlur={this.handleBlurForCustomKeysWithNotificationInput}\r\n                        onKeyDown={this.handleOnKeydownForCustomKeysWithNotificationInput}\r\n                    />\r\n                </div>,\r\n            );\r\n\r\n            const extraInfo = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.keywordsWithNotification.extraInfo'\r\n                    defaultMessage='Notifications are triggered when someone sends a message that includes your username (\"@{username}\") or any of the options selected above.'\r\n                    values={{\r\n                        username: user.username,\r\n                    }}\r\n                />\r\n            );\r\n\r\n            expandedSection = (\r\n                <SettingItemMax\r\n                    title={this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithNotification.title', defaultMessage: 'Keywords that trigger notifications'})}\r\n                    inputs={\r\n                        <fieldset>\r\n                            <legend className='hidden-label'>\r\n                                {this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithNotification.title', defaultMessage: 'Keywords that trigger notifications'})}\r\n                            </legend>\r\n                            <div>\r\n                                {inputs}\r\n                            </div>\r\n                        </fieldset>\r\n                    }\r\n                    submit={this.handleSubmit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    extraInfo={extraInfo}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        const selectedMentionKeys = ['@' + user.username];\r\n        if (this.state.firstNameKey) {\r\n            selectedMentionKeys.push(user.first_name);\r\n        }\r\n        if (this.state.usernameKey) {\r\n            selectedMentionKeys.push(user.username);\r\n        }\r\n        if (this.state.channelKey) {\r\n            selectedMentionKeys.push('@channel');\r\n            selectedMentionKeys.push('@all');\r\n            selectedMentionKeys.push('@here');\r\n        }\r\n        if (this.state.customKeysWithNotification.length > 0) {\r\n            const customKeysWithNotificationStringArray = this.state.customKeysWithNotification.map((key) => key.value);\r\n            selectedMentionKeys.push(...customKeysWithNotificationStringArray);\r\n        }\r\n        const collapsedDescription = selectedMentionKeys.filter((key) => key.trim().length !== 0).map((key) => `\"${key}\"`).join(', ');\r\n\r\n        return (\r\n            <SettingItem\r\n                title={this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithNotification.title', defaultMessage: 'Keywords that trigger notifications'})}\r\n                section={UserSettingsNotificationSections.KEYWORDS_MENTIONS}\r\n                active={isSectionExpanded}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                describe={collapsedDescription}\r\n                updateSection={this.handleUpdateSection}\r\n                max={expandedSection}\r\n            />);\r\n    };\r\n\r\n    createKeywordsWithHighlightSection = () => {\r\n        const isSectionExpanded = this.props.activeSection === UserSettingsNotificationSections.KEYWORDS_HIGHLIGHT;\r\n\r\n        let expandedSection = null;\r\n        if (isSectionExpanded) {\r\n            const inputs = [(\r\n                <div\r\n                    key='userNotificationHighlightOption'\r\n                    className='customKeywordsWithNotificationSubsection'\r\n                >\r\n                    <label htmlFor='mentionKeysWithHighlightInput'>\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.keywordsWithHighlight.inputTitle'\r\n                            defaultMessage='Enter non case-sensitive keywords, press Tab or use commas to separate them:'\r\n                        />\r\n                    </label>\r\n                    <CreatableReactSelect\r\n                        inputId='mentionKeysWithHighlightInput'\r\n                        autoFocus={true}\r\n                        isClearable={false}\r\n                        isMulti={true}\r\n                        styles={customKeywordsSelectorStyles}\r\n                        placeholder=''\r\n                        components={{\r\n                            DropdownIndicator: () => null,\r\n                            Menu: () => null,\r\n                            MenuList: () => null,\r\n                        }}\r\n                        aria-labelledby='mentionKeysWithHighlightInput'\r\n                        onChange={this.handleChangeForCustomKeysWithHighlightInput}\r\n                        value={this.state.customKeysWithHighlight}\r\n                        inputValue={this.state.customKeysWithHighlightInputValue}\r\n                        onInputChange={this.handleChangeForCustomKeysWithHighlightInputValue}\r\n                        onBlur={this.handleBlurForCustomKeysWithHighlightInput}\r\n                        onKeyDown={this.handleOnKeydownForCustomKeysWithHighlightInput}\r\n                    />\r\n                </div>\r\n            )];\r\n\r\n            const extraInfo = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.keywordsWithHighlight.extraInfo'\r\n                    defaultMessage='These keywords will be shown to you with a highlight when anyone sends a message that includes them.'\r\n                />\r\n            );\r\n\r\n            expandedSection = (\r\n                <SettingItemMax\r\n                    title={this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithHighlight.title', defaultMessage: 'Keywords that get highlighted (without notifications)'})}\r\n                    inputs={inputs}\r\n                    submit={this.handleSubmit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    extraInfo={extraInfo}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        let collapsedDescription = this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithHighlight.none', defaultMessage: 'None'});\r\n        if (!this.props.isEnterpriseOrCloudOrSKUStarterFree && this.props.isEnterpriseReady && this.state.customKeysWithHighlight.length > 0) {\r\n            const customKeysWithHighlightStringArray = this.state.customKeysWithHighlight.map((key) => key.value);\r\n            collapsedDescription = customKeysWithHighlightStringArray.map((key) => `\"${key}\"`).join(', ');\r\n        }\r\n\r\n        const collapsedEditButtonWhenDisabled = (\r\n            <RestrictedIndicator\r\n                blocked={this.props.isEnterpriseOrCloudOrSKUStarterFree && this.props.isEnterpriseReady}\r\n                feature={MattermostFeatures.HIGHLIGHT_WITHOUT_NOTIFICATION}\r\n                minimumPlanRequiredForFeature={LicenseSkus.Professional}\r\n                tooltipTitle={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.disabledTooltipTitle',\r\n                    defaultMessage: 'Professional feature',\r\n                })}\r\n                tooltipMessageBlocked={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.disabledTooltipMessage',\r\n                    defaultMessage:\r\n                    'This feature is available on the Professional plan',\r\n                })}\r\n                titleAdminPreTrial={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.userModal.titleAdminPreTrial',\r\n                    defaultMessage: 'Highlight keywords without notifications with Mattermost Professional',\r\n                })}\r\n                messageAdminPreTrial={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.userModal.messageAdminPreTrial',\r\n                    defaultMessage: 'Get the ability to passively highlight keywords that you care about. Upgrade to Professional plan to unlock this feature.',\r\n                })}\r\n                titleAdminPostTrial={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.userModal.titleAdminPostTrial',\r\n                    defaultMessage: 'Highlight keywords without notifications with Mattermost Professional',\r\n                })}\r\n                messageAdminPostTrial={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.userModal.messageAdminPostTrial',\r\n                    defaultMessage: 'Get the ability to passively highlight keywords that you care about. Upgrade to Professional plan to unlock this feature.',\r\n                },\r\n                )}\r\n                titleEndUser={this.props.intl.formatMessage({\r\n                    id: 'user.settings.notifications.keywordsWithHighlight.userModal.titleEndUser',\r\n                    defaultMessage: 'Highlight keywords without notifications with Mattermost Professional',\r\n                })}\r\n                messageEndUser={this.props.intl.formatMessage(\r\n                    {\r\n                        id: 'user.settings.notifications.keywordsWithHighlight.userModal.messageEndUser',\r\n                        defaultMessage: 'Get the ability to passively highlight keywords that you care about.{br}{br}Request your admin to upgrade to Mattermost Professional to access this feature.',\r\n                    },\r\n                    {\r\n                        br: <br/>,\r\n                    },\r\n                )}\r\n                ctaExtraContent={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.keywordsWithHighlight.professional'\r\n                        defaultMessage='Professional'\r\n                    />\r\n                }\r\n                clickCallback={this.handleCloseSettingsModal}\r\n            />\r\n        );\r\n\r\n        return (\r\n            <SettingItem\r\n                title={this.props.intl.formatMessage({id: 'user.settings.notifications.keywordsWithHighlight.title', defaultMessage: 'Keywords that get highlighted (without notifications)'})}\r\n                section={UserSettingsNotificationSections.KEYWORDS_HIGHLIGHT}\r\n                active={isSectionExpanded}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                describe={collapsedDescription}\r\n                updateSection={this.handleUpdateSection}\r\n                max={expandedSection}\r\n                isDisabled={this.props.isEnterpriseOrCloudOrSKUStarterFree && this.props.isEnterpriseReady}\r\n                collapsedEditButtonWhenDisabled={collapsedEditButtonWhenDisabled}\r\n            />);\r\n    };\r\n\r\n    createCommentsSection = () => {\r\n        const serverError = this.state.serverError;\r\n\r\n        let max = null;\r\n        if (this.props.activeSection === UserSettingsNotificationSections.REPLY_NOTIFCATIONS) {\r\n            const commentsActive = [false, false, false];\r\n            if (this.state.notifyCommentsLevel === 'never') {\r\n                commentsActive[2] = true;\r\n            } else if (this.state.notifyCommentsLevel === 'root') {\r\n                commentsActive[1] = true;\r\n            } else {\r\n                commentsActive[0] = true;\r\n            }\r\n\r\n            const inputs = [];\r\n\r\n            inputs.push(\r\n                <fieldset key='userNotificationLevelOption'>\r\n                    <legend className='form-legend hidden-label'>\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.comments'\r\n                            defaultMessage='Reply notifications'\r\n                        />\r\n                    </legend>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationCommentsAny'\r\n                                type='radio'\r\n                                name='commentsNotificationLevel'\r\n                                checked={commentsActive[0]}\r\n                                onChange={this.handleNotifyCommentsRadio.bind(this, 'any')}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.commentsAny'\r\n                                defaultMessage='Trigger notifications on messages in reply threads that I start or participate in'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationCommentsRoot'\r\n                                type='radio'\r\n                                name='commentsNotificationLevel'\r\n                                checked={commentsActive[1]}\r\n                                onChange={this.handleNotifyCommentsRadio.bind(this, 'root')}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.commentsRoot'\r\n                                defaultMessage='Trigger notifications on messages in threads that I start'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='notificationCommentsNever'\r\n                                type='radio'\r\n                                name='commentsNotificationLevel'\r\n                                checked={commentsActive[2]}\r\n                                onChange={this.handleNotifyCommentsRadio.bind(this, 'never')}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.commentsNever'\r\n                                defaultMessage=\"Do not trigger notifications on messages in reply threads unless I'm mentioned\"\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                </fieldset>,\r\n            );\r\n\r\n            const extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.commentsInfo'\r\n                        defaultMessage=\"In addition to notifications for when you're mentioned, select if you would like to receive notifications on reply threads.\"\r\n                    />\r\n                </span>\r\n            );\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={this.props.intl.formatMessage({id: 'user.settings.notifications.comments', defaultMessage: 'Reply notifications'})}\r\n                    extraInfo={extraInfo}\r\n                    inputs={inputs}\r\n                    submit={this.handleSubmit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element;\r\n        if (this.state.notifyCommentsLevel === 'never') {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.commentsNever'\r\n                    defaultMessage=\"Do not trigger notifications on messages in reply threads unless I'm mentioned\"\r\n                />\r\n            );\r\n        } else if (this.state.notifyCommentsLevel === 'root') {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.commentsRoot'\r\n                    defaultMessage='Trigger notifications on messages in threads that I start'\r\n                />\r\n            );\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.notifications.commentsAny'\r\n                    defaultMessage='Trigger notifications on messages in reply threads that I start or participate in'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                title={this.props.intl.formatMessage({id: 'user.settings.notifications.comments', defaultMessage: 'Reply notifications'})}\r\n                active={this.props.activeSection === UserSettingsNotificationSections.REPLY_NOTIFCATIONS}\r\n                describe={describe}\r\n                section={UserSettingsNotificationSections.REPLY_NOTIFCATIONS}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n            />\r\n        );\r\n    };\r\n\r\n    createAutoResponderSection = () => {\r\n        const describe = this.state.autoResponderActive ? (\r\n            <FormattedMessage\r\n                id='user.settings.notifications.autoResponderEnabled'\r\n                defaultMessage='Enabled'\r\n            />\r\n        ) : (\r\n            <FormattedMessage\r\n                id='user.settings.notifications.autoResponderDisabled'\r\n                defaultMessage='Disabled'\r\n            />\r\n        );\r\n\r\n        return (\r\n            <SettingItem\r\n                active={this.props.activeSection === UserSettingsNotificationSections.AUTO_RESPONDER}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.notifications.autoResponder'\r\n                        defaultMessage='Automatic direct message replies'\r\n                    />\r\n                }\r\n                describe={describe}\r\n                section={UserSettingsNotificationSections.AUTO_RESPONDER}\r\n                updateSection={this.handleUpdateSection}\r\n                max={(\r\n                    <div>\r\n                        <ManageAutoResponder\r\n                            autoResponderActive={this.state.autoResponderActive}\r\n                            autoResponderMessage={this.state.autoResponderMessage || ''}\r\n                            updateSection={this.handleUpdateSection}\r\n                            setParentState={this.setStateValue}\r\n                            submit={this.handleSubmit}\r\n                            error={this.state.serverError}\r\n                            saving={this.state.isSaving}\r\n                        />\r\n                        <div className='divider-dark'/>\r\n                    </div>\r\n                )}\r\n            />\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const keywordsWithNotificationSection = this.createKeywordsWithNotificationSection();\r\n        const keywordsWithHighlightSection = this.createKeywordsWithHighlightSection();\r\n        const commentsSection = this.createCommentsSection();\r\n        const autoResponderSection = this.createAutoResponderSection();\r\n\r\n        const areAllSectionsInactive = this.props.activeSection === '';\r\n\r\n        return (\r\n            <div\r\n                id='notificationsSettings'\r\n                aria-labelledby='notificationsButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.notifications.title'\r\n                            defaultMessage='Notification settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div\r\n                    className='user-settings'\r\n                >\r\n                    <SettingDesktopHeader\r\n                        id='notificationSettingsTitle'\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.header'\r\n                                defaultMessage='Notifications'\r\n                            />\r\n                        }\r\n                        info={\r\n                            <FormattedMessage\r\n                                id='user.settings.notifications.learnMore'\r\n                                defaultMessage='<a>Learn more about notifications</a>'\r\n                                values={{\r\n                                    a: (chunks: string) => ((\r\n                                        <ExternalLink\r\n                                            location='user_settings_notifications'\r\n                                            href='https://mattermost.com/pl/about-notifications'\r\n                                            className='btn btn-link'\r\n                                        >\r\n                                            <LightbulbOutlineIcon className='circular-border'/>\r\n                                            <span>{chunks}</span>\r\n                                        </ExternalLink>\r\n                                    )),\r\n                                }}\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    <DesktopAndMobileNotificationSettings\r\n                        active={this.props.activeSection === UserSettingsNotificationSections.DESKTOP_AND_MOBILE}\r\n                        updateSection={this.handleUpdateSection}\r\n                        onSubmit={this.handleSubmit}\r\n                        onCancel={this.handleCancel}\r\n                        saving={this.state.isSaving}\r\n                        error={this.state.serverError}\r\n                        setParentState={this.setStateValue}\r\n                        areAllSectionsInactive={areAllSectionsInactive}\r\n                        isCollapsedThreadsEnabled={this.props.isCollapsedThreadsEnabled}\r\n                        desktopActivity={this.state.desktopActivity}\r\n                        pushActivity={this.state.pushActivity}\r\n                        sendPushNotifications={this.props.sendPushNotifications}\r\n                        pushStatus={this.state.pushStatus}\r\n                        desktopThreads={this.state.desktopThreads}\r\n                        pushThreads={this.state.pushThreads}\r\n                        desktopAndMobileSettingsDifferent={this.state.desktopAndMobileSettingsDifferent}\r\n                    />\r\n                    <div className='divider-light'/>\r\n                    <DesktopNotificationSoundsSettings\r\n                        active={this.props.activeSection === UserSettingsNotificationSections.DESKTOP_NOTIFICATION_SOUND}\r\n                        updateSection={this.handleUpdateSection}\r\n                        onSubmit={this.handleSubmit}\r\n                        onCancel={this.handleCancel}\r\n                        saving={this.state.isSaving}\r\n                        error={this.state.serverError}\r\n                        setParentState={this.setStateValue}\r\n                        areAllSectionsInactive={areAllSectionsInactive}\r\n                        desktopSound={this.state.desktopSound}\r\n                        desktopNotificationSound={this.state.desktopNotificationSound}\r\n                        isCallsRingingEnabled={this.props.isCallsRingingEnabled}\r\n                        callsDesktopSound={this.state.callsDesktopSound}\r\n                        callsNotificationSound={this.state.callsNotificationSound}\r\n                    />\r\n                    <div className='divider-light'/>\r\n                    <EmailNotificationSetting\r\n                        active={this.props.activeSection === UserSettingsNotificationSections.EMAIL}\r\n                        updateSection={this.handleUpdateSection}\r\n                        onSubmit={this.handleSubmit}\r\n                        onCancel={this.handleCancel}\r\n                        saving={this.state.isSaving}\r\n                        error={this.state.serverError}\r\n                        setParentState={this.setStateValue}\r\n                        areAllSectionsInactive={areAllSectionsInactive}\r\n                        isCollapsedThreadsEnabled={this.props.isCollapsedThreadsEnabled}\r\n                        enableEmail={this.state.enableEmail === 'true'}\r\n                        onChange={this.handleEmailRadio}\r\n                        threads={this.state.emailThreads || ''}\r\n                    />\r\n                    <div className='divider-light'/>\r\n                    {keywordsWithNotificationSection}\r\n                    {(!this.props.isEnterpriseOrCloudOrSKUStarterFree && this.props.isEnterpriseReady) && (\r\n                        <>\r\n                            <div className='divider-light'/>\r\n                            {keywordsWithHighlightSection}\r\n                        </>\r\n                    )}\r\n                    <div className='divider-light'/>\r\n                    {!this.props.isCollapsedThreadsEnabled && (\r\n                        <>\r\n                            <div className='divider-light'/>\r\n                            {commentsSection}\r\n                        </>\r\n                    )}\r\n                    {this.props.enableAutoResponder && (\r\n                        <>\r\n                            <div className='divider-light'/>\r\n                            {autoResponderSection}\r\n                        </>\r\n                    )}\r\n\r\n                    {/*  We placed the disabled items in the last */}\r\n                    {(this.props.isEnterpriseOrCloudOrSKUStarterFree && this.props.isEnterpriseReady) && (\r\n                        <>\r\n                            <div className='divider-light'/>\r\n                            {keywordsWithHighlightSection}\r\n                        </>\r\n                    )}\r\n                    <SendTestNotificationNotice adminMode={this.props.adminMode}/>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nconst customKeywordsSelectorStyles = {\r\n    container: ((baseStyle) => ({\r\n        ...baseStyle,\r\n        marginBlockStart: '10px',\r\n    })),\r\n    control: ((baseStyles) => ({\r\n        ...baseStyles,\r\n        backgroundColor: 'var(--center-channel-bg)',\r\n        border: '1px solid rgba(var(--center-channel-color-rgb), 0.16);',\r\n        ':hover': {\r\n            borderColor: 'rgba(var(--center-channel-color-rgb), 0.48);',\r\n        },\r\n    })),\r\n    multiValue: ((baseStyles) => ({\r\n        ...baseStyles,\r\n        background: 'rgba(var(--center-channel-color-rgb), 0.08)',\r\n    })),\r\n    multiValueLabel: ((baseStyles) => ({\r\n        ...baseStyles,\r\n        color: 'var(--center-channel-color);',\r\n    })),\r\n    input: ((baseStyles) => ({\r\n        ...baseStyles,\r\n        color: 'var(--center-channel-color)',\r\n    })),\r\n    indicatorSeparator: ((indicatorSeperatorStyles) => ({\r\n        ...indicatorSeperatorStyles,\r\n        display: 'none',\r\n    })),\r\n    multiValueRemove: ((multiValueRemoveStyles) => ({\r\n        ...multiValueRemoveStyles,\r\n        cursor: 'pointer',\r\n        color: 'rgba(var(--center-channel-color-rgb),0.32);',\r\n        ':hover': {\r\n            backgroundColor: 'rgba(var(--center-channel-color-rgb), 0.16)',\r\n            color: 'rgba(var(--center-channel-color-rgb), 0.56);',\r\n        },\r\n    })),\r\n} satisfies StylesConfig<MultiInputValue, true>;\r\n\r\nconst validNotificationLevels = Object.values(NotificationLevels);\r\n\r\n/**\r\n * Check's if user's global notification settings for desktop and mobile are different\r\n */\r\nexport function areDesktopAndMobileSettingsDifferent(\r\n    desktopActivity: UserNotifyProps['desktop'],\r\n    pushActivity?: UserNotifyProps['push'],\r\n    desktopThreads?: UserNotifyProps['desktop_threads'],\r\n    pushThreads?: UserNotifyProps['push_threads'],\r\n    isCollapsedThreadsEnabled?: boolean,\r\n): boolean {\r\n    if (!desktopActivity || !pushActivity || !desktopThreads || !pushThreads) {\r\n        return true;\r\n    }\r\n\r\n    if (\r\n        !validNotificationLevels.includes(desktopActivity) ||\r\n        !validNotificationLevels.includes(pushActivity) ||\r\n        !validNotificationLevels.includes(desktopThreads) ||\r\n        !validNotificationLevels.includes(pushThreads)\r\n    ) {\r\n        return true;\r\n    }\r\n\r\n    if (desktopActivity === pushActivity) {\r\n        if (isCollapsedThreadsEnabled) {\r\n            if (desktopThreads === pushThreads) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport default injectIntl(NotificationsTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function EditIcon() {\r\n    const {formatMessage} = useIntl();\r\n    return (\r\n        <i\r\n            className='icon-pencil-outline'\r\n            aria-hidden='true'\r\n            title={formatMessage({id: 'generic_icons.edit', defaultMessage: 'Edit Icon'})}\r\n        />\r\n    );\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\ntype Props = {\r\n    additionalClassName?: string;\r\n}\r\n\r\nconst WarningIcon = ({additionalClassName}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n    return (\r\n        <i\r\n            className={classNames('fa fa-warning', additionalClassName)}\r\n            title={formatMessage({id: 'generic_icons.warning', defaultMessage: 'Warning Icon'})}\r\n        />\r\n    );\r\n};\r\n\r\nexport default React.memo(WarningIcon);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport type {PrimitiveType, FormatXMLElementFn} from 'intl-messageformat';\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {AlertCircleOutlineIcon} from '@mattermost/compass-icons/components';\r\n\r\nimport './base_setting_item.scss';\r\n\r\ntype ExtendedMessageDescriptor = MessageDescriptor & {\r\n    values?: Record<string, PrimitiveType | FormatXMLElementFn<string, string>>;\r\n};\r\n\r\nexport type BaseSettingItemProps = {\r\n    title?: string;\r\n    description?: string;\r\n    error?: ExtendedMessageDescriptor;\r\n    dataTestId?: string;\r\n};\r\n\r\ntype Props = BaseSettingItemProps & {\r\n    content: JSX.Element;\r\n    isContentInline?: boolean;\r\n    className?: string;\r\n    descriptionAboveContent?: boolean;\r\n}\r\n\r\nfunction BaseSettingItem({title, description, content, className, error, descriptionAboveContent = false, isContentInline = false, dataTestId}: Props): JSX.Element {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const titleComponent = title && (\r\n        <h4\r\n            data-testid='mm-modal-generic-section-item__title'\r\n            className='mm-modal-generic-section-item__title'\r\n        >\r\n            {title}\r\n        </h4>\r\n    );\r\n\r\n    const descriptionComponent = description && (\r\n        <p\r\n            data-testid='mm-modal-generic-section-item__description'\r\n            className='mm-modal-generic-section-item__description'\r\n        >\r\n            {description}\r\n        </p>\r\n    );\r\n\r\n    const Error = error && (\r\n        <div\r\n            data-testid='mm-modal-generic-section-item__error'\r\n            className='mm-modal-generic-section-item__error'\r\n        >\r\n            <AlertCircleOutlineIcon/>\r\n            {formatMessage({id: error.id, defaultMessage: error.defaultMessage}, error.values)}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div\r\n            data-testid={dataTestId}\r\n            className={classNames('mm-modal-generic-section-item', className)}\r\n        >\r\n            {titleComponent}\r\n            {descriptionAboveContent ? descriptionComponent : undefined}\r\n            <div\r\n                data-testid='mm-modal-generic-section-item__content'\r\n                className={classNames('mm-modal-generic-section-item__content', {\r\n                    inline: isContentInline,\r\n                })}\r\n            >\r\n                {content}\r\n            </div>\r\n            {descriptionAboveContent ? undefined : descriptionComponent}\r\n            {Error}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BaseSettingItem;\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport type {OnChangeValue} from 'react-select';\r\nimport ReactSelect from 'react-select';\r\n\r\nimport {formatAsString} from 'utils/i18n';\r\n\r\nimport type {BaseSettingItemProps} from './base_setting_item';\r\nimport BaseSettingItem from './base_setting_item';\r\n\r\nexport type SelectOption = {\r\n    value: string;\r\n    label: string | MessageDescriptor;\r\n};\r\n\r\nexport type FieldsetReactSelect = {\r\n    id: string;\r\n    name?: string;\r\n    inputId?: string;\r\n    dataTestId?: string;\r\n    ariaLabelledby?: string;\r\n    clearable?: boolean;\r\n    options: SelectOption[];\r\n}\r\n\r\ntype Props = BaseSettingItemProps & {\r\n    inputFieldData: FieldsetReactSelect;\r\n    inputFieldValue: SelectOption;\r\n    handleChange: (selected: OnChangeValue<SelectOption, boolean>) => void;\r\n}\r\n\r\n// Function to extract text from MessageDescriptor or return string as-is\r\nexport const getOptionLabel = (option: SelectOption, intl: ReturnType<typeof useIntl>): string => {\r\n    return formatAsString(intl.formatMessage, option.label) || '';\r\n};\r\n\r\nfunction ReactSelectItemCreator({\r\n    title,\r\n    description,\r\n    inputFieldData,\r\n    inputFieldValue,\r\n    handleChange,\r\n}: Props): JSX.Element {\r\n    const intl = useIntl();\r\n    const content = (\r\n        <fieldset className='mm-modal-generic-section-item__fieldset-react-select'>\r\n            <ReactSelect\r\n                id={inputFieldData.id}\r\n                name={inputFieldData.name}\r\n                inputId={inputFieldData.inputId}\r\n                aria-labelledby={inputFieldData.ariaLabelledby}\r\n                className='react-select singleSelect react-select-top'\r\n                classNamePrefix='react-select'\r\n                options={inputFieldData.options}\r\n                isClearable={inputFieldData.clearable}\r\n                isSearchable={false}\r\n                onChange={handleChange}\r\n                value={inputFieldValue}\r\n                components={{IndicatorSeparator: NoIndicatorSeparatorComponent}}\r\n                getOptionLabel={(option) => getOptionLabel(option, intl)}\r\n\r\n            />\r\n        </fieldset>\r\n    );\r\n\r\n    return (\r\n        <BaseSettingItem\r\n            content={content}\r\n            title={title}\r\n            description={description}\r\n        />\r\n    );\r\n}\r\n\r\nexport default ReactSelectItemCreator;\r\n\r\nfunction NoIndicatorSeparatorComponent() {\r\n    return null;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {IntlShape} from 'react-intl';\r\nimport {FormattedMessage, defineMessages} from 'react-intl';\r\n\r\nimport type {PasswordConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nexport function isValidPassword(password: string, passwordConfig: PasswordConfig, intl?: IntlShape) {\r\n    let errorId = passwordErrors.passwordError.id;\r\n    let valid = true;\r\n    const minimumLength = passwordConfig.minimumLength || Constants.MIN_PASSWORD_LENGTH;\r\n\r\n    if (password.length < minimumLength || password.length > Constants.MAX_PASSWORD_LENGTH) {\r\n        valid = false;\r\n    }\r\n\r\n    if (passwordConfig.requireLowercase) {\r\n        if (!password.match(/[a-z]/)) {\r\n            valid = false;\r\n        }\r\n\r\n        errorId += 'Lowercase';\r\n    }\r\n\r\n    if (passwordConfig.requireUppercase) {\r\n        if (!password.match(/[A-Z]/)) {\r\n            valid = false;\r\n        }\r\n\r\n        errorId += 'Uppercase';\r\n    }\r\n\r\n    if (passwordConfig.requireNumber) {\r\n        if (!password.match(/[0-9]/)) {\r\n            valid = false;\r\n        }\r\n\r\n        errorId += 'Number';\r\n    }\r\n\r\n    if (passwordConfig.requireSymbol) {\r\n        if (!password.match(/[ !\"\\\\#$%&'()*+,-./:;<=>?@[\\]^_`|~]/)) {\r\n            valid = false;\r\n        }\r\n\r\n        errorId += 'Symbol';\r\n    }\r\n\r\n    let error;\r\n    if (!valid) {\r\n        error = intl ? (\r\n            intl.formatMessage(\r\n                {\r\n                    id: errorId,\r\n                    defaultMessage: 'Must be {min}-{max} characters long.',\r\n                },\r\n                {\r\n                    min: minimumLength,\r\n                    max: Constants.MAX_PASSWORD_LENGTH,\r\n                },\r\n            )\r\n        ) : (\r\n            <FormattedMessage\r\n                id={errorId}\r\n                defaultMessage='Must be {min}-{max} characters long.'\r\n                values={{\r\n                    min: minimumLength,\r\n                    max: Constants.MAX_PASSWORD_LENGTH,\r\n                }}\r\n            />\r\n        );\r\n    }\r\n\r\n    return {valid, error};\r\n}\r\n\r\nexport const passwordErrors = defineMessages({\r\n    passwordError: {id: 'user.settings.security.passwordError', defaultMessage: 'Your password must be {min}-{max} characters long.'},\r\n    passwordErrorLowercase: {id: 'user.settings.security.passwordErrorLowercase', defaultMessage: 'Your password must be {min}-{max} characters long and include lowercase letters.'},\r\n    passwordErrorLowercaseNumber: {id: 'user.settings.security.passwordErrorLowercaseNumber', defaultMessage: 'Your password must be {min}-{max} characters long and include lowercase letters and numbers.'},\r\n    passwordErrorLowercaseNumberSymbol: {id: 'user.settings.security.passwordErrorLowercaseNumberSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include lowercase letters, numbers, and special characters.'},\r\n    passwordErrorLowercaseSymbol: {id: 'user.settings.security.passwordErrorLowercaseSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include lowercase letters and special characters.'},\r\n    passwordErrorLowercaseUppercase: {id: 'user.settings.security.passwordErrorLowercaseUppercase', defaultMessage: 'Your password must be {min}-{max} characters long and include both lowercase and uppercase letters.'},\r\n    passwordErrorLowercaseUppercaseNumber: {id: 'user.settings.security.passwordErrorLowercaseUppercaseNumber', defaultMessage: 'Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, and numbers.'},\r\n    passwordErrorLowercaseUppercaseNumberSymbol: {id: 'user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, numbers, and special characters.'},\r\n    passwordErrorLowercaseUppercaseSymbol: {id: 'user.settings.security.passwordErrorLowercaseUppercaseSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include both lowercase and uppercase letters, and special characters.'},\r\n    passwordErrorNumber: {id: 'user.settings.security.passwordErrorNumber', defaultMessage: 'Your password must be {min}-{max} characters long and include numbers.'},\r\n    passwordErrorNumberSymbol: {id: 'user.settings.security.passwordErrorNumberSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include numbers and special characters.'},\r\n    passwordErrorSymbol: {id: 'user.settings.security.passwordErrorSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include special characters.'},\r\n    passwordErrorUppercase: {id: 'user.settings.security.passwordErrorUppercase', defaultMessage: 'Your password must be {min}-{max} characters long and include uppercase letters.'},\r\n    passwordErrorUppercaseNumber: {id: 'user.settings.security.passwordErrorUppercaseNumber', defaultMessage: 'Your password must be {min}-{max} characters long and include uppercase letters, and numbers.'},\r\n    passwordErrorUppercaseNumberSymbol: {id: 'user.settings.security.passwordErrorUppercaseNumberSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include uppercase letters, numbers, and special characters.'},\r\n    passwordErrorUppercaseSymbol: {id: 'user.settings.security.passwordErrorUppercaseSymbol', defaultMessage: 'Your password must be {min}-{max} characters long and include uppercase letters, and special characters.'},\r\n});\r\n"],"names":["defineMessages","sessionRevoked","id","defaultMessage","channelCreated","establishedDM","nameUpdated","headerUpdated","channelDeleted","userAdded","userRemoved","attemptedRegisterApp","attemptedAllowOAuthAccess","successfullOAuthAccess","failedOAuthAccess","attemptedOAuthToken","successfullOAuthToken","oauthTokenFailed","attemptedLogin","authenticated","successfullLogin","failedLogin","updatePicture","updateGeneral","attemptedPassword","successfullPassword","failedPassword","updatedRol","member","accountActive","accountInactive","by","byAdmin","sentEmail","attemptedReset","successfullReset","updateGlobalNotifications","attemptedWebhookCreate","succcessfullWebhookCreate","failedWebhookCreate","attemptedWebhookDelete","successfullWebhookDelete","failedWebhookDelete","logout","verified","revokedAll","loginAttempt","loginFailure","attemptedLicenseAdd","successfullLicenseAdd","failedExpiredLicenseAdd","failedInvalidLicenseAdd","licenseRemoved","AuditRow","_ref","actionURL","audit","desc","aDesc","showUserId","showIp","showSession","intl","useIntl","extra_info","indexOf","formatMessage","holders","actionDesc","lastIndexOf","substring","replace","toTitleCase","extraInfoDesc","date","Date","create_at","timestamp","React","FormattedDate","value","day","month","year","FormattedTime","hour","minute","ip","ip_address","sessionId","session_id","auditProfile","useSelector","state","getUser","user_id","userId","email","uContent","iContent","sContent","className","descStyle","toLowerCase","key","propTypes","_pt","isRequired","ChannelCreateDirectRow","_channelObj$id","_useSelector","channelObj","channelId","username","getDirectTeammate","ChannelDefaultRow","channelInfo","channelName","channelURL","userIdField","split","profile","test","url","ChannelRow","_channelObj$display_n","props","channelNameField","getChannelByName","display_name","Object","assign","UserUpdateActiveSessionRow","updateField","userInfo","actingUserInfo","isSessionUser","actingUser","user","getCurrentUser","isSystemAdmin","roles","UserRow","userRoles","trim","updateType","FormatAudit","action","auditDesc","oauthInfo","clientIdField","oauthTokenFailure","token","webhookInfo","licenseInfo","AuditTable","componentDidMount","ids","this","audits","map","actions","getMissingProfilesByIds","render","userIdContent","ipContent","sessionContent","FormattedMessage","Boolean","injectIntl","connect","currentUser","dispatch","bindActionCreators","TYPE_BACKSTAGE","EMPTY_ERROR_LIST","FormError","error","errors","iconClassName","margin","textClassName","type","length","message","err","concat","LocalizedPlaceholderTextarea","ref","placeholder","otherProps","_objectWithoutProperties","_excluded","displayName","SettingItem","active","areAllSectionsInactive","section","max","updateSection","title","isDisabled","describe","collapsedEditButtonWhenDisabled","minRef","useRef","useDidUpdate","_minRef$current","current","focus","SettingItemMin","SettingItemMax","constructor","super","_defineProperty","e","target","shiftEnter","isKeyPressed","Constants","KeyCodes","ENTER","shiftKey","disableEnterSubmit","submit","tagName","parentElement","classList","contains","settingList","handleSubmit","preventDefault","setting","focusableElements","querySelectorAll","a11yFocus","document","addEventListener","onKeyDown","componentWillUnmount","removeEventListener","serverError","role","extraInfo","hintClass","infoPosition","SaveButton","saveButtonText","saving","disabled","isValid","onClick","btnClass","saveButtonClassName","inputs","cancelButtonText","listContent","containerStyle","extraContentBeforeSettingList","classNames","isFullWidth","tabIndex","submitExtra","handleUpdateSection","arguments","node","edit","stopPropagation","editButtonComponent","getEdit","handleClick","EditIcon","SettingDesktopHeader","text","info","SettingMobileHeader","closeModal","collapseModal","NotificationPermissionDeniedSectionNotice","useCallback","window","open","SectionNotice","tertiaryButton","NotificationPermissionNeverGrantedSectionNotice","async","permission","requestNotificationPermission","onCtaButtonClick","primaryButton","NotificationPermissionUnsupportedSectionNotice","NotificationPermissionDesktopDeniedSectionNotice","checkedPermissionDenied","setCheckedPermissionDenied","useState","handleInstructionButtonClick","requestDesktopNotificationPermission","NotificationPermissionDenied","NotificationPermissionSectionNotice","isNotificationSupported","isNotificationAPISupported","notificationPermission","setNotificationPermission","getNotificationPermission","desktopNotificationPermission","useDesktopAppNotificationPermission","NotificationPermissionNeverGranted","NotificationPermissionNeverGrantedNotice","NotificationPermissionDeniedNotice","NotificationPermissionTitleTag","Tag","size","variant","icon","DesktopAndMobileNotificationSettings","onSubmit","onCancel","setParentState","isCollapsedThreadsEnabled","desktopActivity","sendPushNotifications","pushActivity","pushStatus","desktopThreads","pushThreads","desktopAndMobileSettingsDifferent","editButtonRef","previousActiveRef","useEffect","_editButtonRef$curren","handleChangeForSendDesktopNotificationsRadio","event","handleChangeForDesktopThreadsCheckbox","checked","NotificationLevels","ALL","MENTION","handleChangeForDifferentMobileNotificationsCheckbox","handleChangeForSendMobileNotificationsSelect","selectedOption","handleChangeForMobileThreadsCheckbox","handleChangeForTriggerMobileNotificationsSelect","maximizedSettingsInputs","useMemo","maximizedSettingInputs","sendDesktopNotificationsSection","optionsOfSendNotifications","optionOfSendNotifications","onChange","formatAsComponent","label","push","NONE","shouldShowDesktopThreadsSection","desktopThreadNotificationSection","Fragment","differentMobileNotificationsSection","shouldShowSendMobileNotificationsSection","sendMobileNotificationsSection","htmlFor","ReactSelect","inputId","classNamePrefix","options","isClearable","isSearchable","components","IndicatorSeparator","NoIndicatorSeparatorComponent","getValueOfSendMobileNotificationForSelect","getOptionLabel","option","shouldShowMobileThreadsSection","threadNotificationSection","shouldShowTriggerMobileNotificationsSection","triggerMobileNotificationsSection","optionsOfSendMobileNotificationsWhenSelect","getValueOfSendMobileNotificationWhenSelect","disabledPushNotificationsSection","getCollapsedText","UserSettingsNotificationSections","DESKTOP_AND_MOBILE","defineMessage","find","ONLINE","AWAY","OFFLINE","memo","DesktopNotificationSoundsSettings","desktopSound","desktopNotificationSound","isCallsRingingEnabled","callsDesktopSound","callsNotificationSound","handleChangeForMessageNotificationSoundCheckbox","stopTryNotificationRing","handleChangeForIncomginCallSoundCheckbox","handleChangeForMessageNotificationSoundSelect","tryNotificationSound","handleChangeForIncomingCallSoundSelect","tryNotificationRing","isMessageNotificationSoundChecked","messageSoundSection","optionsOfMessageNotificationSoundsSelect","getValueOfNotificationSoundsSelect","isIncomingCallSoundChecked","callSoundSection","optionsOfIncomingCallSoundsSelect","getValueOfIncomingCallSoundsSelect","DESKTOP_NOTIFICATION_SOUND","desktopNotificationSoundIsSelected","notificationSoundKeys","includes","callNotificationSoundIsSelected","callNotificationSoundKeys","hasCallsSound","hasDesktopSound","values","callsSound","getEmailInterval","enableEmailNotification","enableEmailBatching","emailIntervalPreference","INTERVAL_NEVER","INTERVAL_IMMEDIATE","INTERVAL_FIFTEEN_MINUTES","INTERVAL_HOUR","Preferences","validValuesWithoutEmailBatching","EmailNotificationSetting","enableEmail","currentTarget","getAttribute","newInterval","parseInt","setState","emailInterval","currentUserId","category","CATEGORY_NOTIFICATIONS","name","EMAIL_INTERVAL","toString","savePreferences","sendEmailNotifications","description","count","emailOptions","emailInfo","emailTitle","handleChange","threadsNotificationSelection","threads","handleThreadsOnChange","getDerivedStateFromProps","nextProps","prevState","focusEditButton","_this$editButtonRef$c","componentDidUpdate","prevProps","renderMaxSettingView","renderMinSettingView","config","getConfig","getPreference","INTERVAL_NOT_SET","getCurrentUserId","EnableEmailBatching","SendEmailNotifications","ManageAutoResponder","autoResponderActive","autoResponderMessage","activeToggle","handleAutoResponderChecked","style","resize","height","rows","maxLength","onMessageChanged","sectionNoticeContainerStyle","marginTop","SendTestNotificationNotice","adminMode","buttonState","setButtonState","isSending","timeout","externalLink","useExternalLink","onGoToNotificationDocumentation","onSendTestNotificationClick","isShowingSending","setTimeout","result","sendTestNotification","clearTimeout","setResult","status","console","loading","leadingIcon","secondaryButton","trailingIcon","WHITE_SPACE_REGEX","COMMA_REGEX","getDefaultStateFromProps","desktop","emailThreads","sound","comments","_props$user$notify_pr","_props$user$notify_pr2","notify_props","desktop_threads","push_threads","email_threads","desktop_sound","calls_desktop_sound","desktop_notification_sound","calls_notification_sound","push_status","auto_responder_active","auto_responder_message","validNotificationLevels","areDesktopAndMobileSettingsDifferent","usernameKey","firstNameKey","channelKey","isCustomKeysWithNotificationInputChecked","customKeysWithNotification","customKeysWithHighlight","_props$user$notify_pr3","_props$user$notify_pr4","_props$user$notify_pr5","_props$user$notify_pr6","_props$user$notify_pr7","_props$user$notify_pr8","mention_keys","mentionKeys","filter","forEach","mentionKey","highlight_keys","highlightKey","first_name","channel","customKeysWithNotificationInputValue","customKeysWithHighlightInputValue","notifyCommentsLevel","isSaving","CreatableReactSelectInput","Input","NotificationsTab","data","_objectSpread","join","highlightKeys","updatedUser","payloadUser","response","patchUser","updateMe","handleCancel","Array","isArray","formattedValue","newValue","COMMA","TAB","_this$state$customKey","_this$state$customKey2","_this$state$customKey3","_this$state$customKey4","unsavedCustomKeyWithNotification","updateCustomKeysWithNotificationWithInputValue","_this$state$customKey5","_this$state$customKey6","_this$state$customKey7","_this$state$customKey8","_newValue$trim$replac","_newValue$trim","unsavedCustomKeyWithHighlight","updateCustomKeysWithHighlightWithInputValue","isSectionExpanded","activeSection","KEYWORDS_MENTIONS","expandedSection","handleChangeForFirstNameKeyCheckbox","handleChangeForUsernameKeyCheckbox","handleChangeForChannelKeyCheckbox","handleChangeForCustomKeysWithNotificationCheckbox","CreatableReactSelect","autoFocus","isMulti","styles","customKeywordsSelectorStyles","DropdownIndicator","Menu","MenuList","handleChangeForCustomKeysWithNotificationInput","inputValue","onInputChange","handleChangeForCustomKeysWithNotificationInputValue","onBlur","handleBlurForCustomKeysWithNotificationInput","handleOnKeydownForCustomKeysWithNotificationInput","selectedMentionKeys","customKeysWithNotificationStringArray","collapsedDescription","KEYWORDS_HIGHLIGHT","handleChangeForCustomKeysWithHighlightInput","handleChangeForCustomKeysWithHighlightInputValue","handleBlurForCustomKeysWithHighlightInput","handleOnKeydownForCustomKeysWithHighlightInput","isEnterpriseOrCloudOrSKUStarterFree","isEnterpriseReady","RestrictedIndicator","blocked","feature","MattermostFeatures","HIGHLIGHT_WITHOUT_NOTIFICATION","minimumPlanRequiredForFeature","LicenseSkus","Professional","tooltipTitle","tooltipMessageBlocked","titleAdminPreTrial","messageAdminPreTrial","titleAdminPostTrial","messageAdminPostTrial","titleEndUser","messageEndUser","br","ctaExtraContent","clickCallback","handleCloseSettingsModal","REPLY_NOTIFCATIONS","commentsActive","handleNotifyCommentsRadio","bind","AUTO_RESPONDER","setStateValue","keywordsWithNotificationSection","createKeywordsWithNotificationSection","keywordsWithHighlightSection","createKeywordsWithHighlightSection","commentsSection","createCommentsSection","autoResponderSection","createAutoResponderSection","a","chunks","ExternalLink","location","href","LightbulbOutlineIcon","EMAIL","handleEmailRadio","enableAutoResponder","container","baseStyle","marginBlockStart","control","baseStyles","backgroundColor","border","borderColor","multiValue","background","multiValueLabel","color","input","indicatorSeparator","indicatorSeperatorStyles","display","multiValueRemove","multiValueRemoveStyles","cursor","WarningIcon","additionalClassName","BaseSettingItem","content","descriptionAboveContent","isContentInline","dataTestId","titleComponent","descriptionComponent","Error","AlertCircleOutlineIcon","undefined","inline","formatAsString","ariaLabelledby","clearable","isValidPassword","password","passwordConfig","errorId","passwordErrors","passwordError","valid","minimumLength","MIN_PASSWORD_LENGTH","MAX_PASSWORD_LENGTH","requireLowercase","match","requireUppercase","requireNumber","requireSymbol","min","passwordErrorLowercase","passwordErrorLowercaseNumber","passwordErrorLowercaseNumberSymbol","passwordErrorLowercaseSymbol","passwordErrorLowercaseUppercase","passwordErrorLowercaseUppercaseNumber","passwordErrorLowercaseUppercaseNumberSymbol","passwordErrorLowercaseUppercaseSymbol","passwordErrorNumber","passwordErrorNumberSymbol","passwordErrorSymbol","passwordErrorUppercase","passwordErrorUppercaseNumber","passwordErrorUppercaseNumberSymbol","passwordErrorUppercaseSymbol"],"sourceRoot":""}