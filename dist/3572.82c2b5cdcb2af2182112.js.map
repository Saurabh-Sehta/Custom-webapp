{"version":3,"file":"3572.82c2b5cdcb2af2182112.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/async_load.tsx","webpack://mattermost-webapp/./src/utils/browser_history.tsx","webpack://mattermost-webapp/./src/utils/desktop_api.ts","webpack://mattermost-webapp/./src/utils/server_version.tsx","webpack://mattermost-webapp/./src/utils/user_agent.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {lazy, type ComponentType} from 'react';\r\n\r\nimport type {PluggableComponentType, PluggableProps} from 'plugins/pluggable/pluggable';\r\n\r\nimport type {PluginsState, ProductSubComponentNames} from 'types/store/plugins';\r\n\r\nexport function makeAsyncComponent<ComponentProps>(displayName: string, LazyComponent: React.ComponentType<ComponentProps>, fallback: React.ReactNode = null) {\r\n    const Component: ComponentType<ComponentProps> = (props) => (\r\n        <React.Suspense fallback={fallback}>\r\n            <LazyComponent {...props}/>\r\n        </React.Suspense>\r\n    );\r\n    Component.displayName = displayName;\r\n    return Component;\r\n}\r\n\r\nexport function makeAsyncPluggableComponent() {\r\n    const LazyComponent = lazy(() => import('plugins/pluggable')) as PluggableComponentType;\r\n\r\n    const Component = <T extends keyof PluginsState['components'], U extends ProductSubComponentNames>(props: PluggableProps<T, U>) => (\r\n        <React.Suspense fallback={null}>\r\n            <LazyComponent<T, U> {...props}/>\r\n        </React.Suspense>\r\n    );\r\n\r\n    Component.displayName = 'Pluggable';\r\n\r\n    return Component;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {createBrowserHistory} from 'history';\r\nimport type {History} from 'history';\r\n\r\nimport {getModule} from 'module_registry';\r\nimport DesktopApp from 'utils/desktop_api';\r\nimport {isServerVersionGreaterThanOrEqualTo} from 'utils/server_version';\r\nimport {isDesktopApp, getDesktopVersion} from 'utils/user_agent';\r\n\r\nconst b = createBrowserHistory({basename: window.basename});\r\nconst isDesktop = isDesktopApp() && isServerVersionGreaterThanOrEqualTo(getDesktopVersion(), '5.0.0');\r\nconst browserHistory = {\r\n    ...b,\r\n    push: (path: string | { pathname: string }, ...args: string[]) => {\r\n        if (isDesktop) {\r\n            DesktopApp.doBrowserHistoryPush(typeof path === 'object' ? path.pathname : path);\r\n        } else {\r\n            b.push(path, ...args);\r\n        }\r\n    },\r\n};\r\n\r\nif (isDesktop) {\r\n    DesktopApp.onBrowserHistoryPush((pathName) => b.push(pathName));\r\n}\r\n\r\n/**\r\n * Returns the current history object.\r\n *\r\n * If you're calling this from within a React component, consider using the useHistory hook from react-router-dom.\r\n */\r\nexport function getHistory() {\r\n    return getModule<History>('utils/browser_history') ?? browserHistory;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport semver from 'semver';\r\n\r\nimport type {DesktopAPI} from '@mattermost/desktop-api';\r\n\r\nimport {isDesktopApp} from 'utils/user_agent';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        desktopAPI?: Partial<DesktopAPI>;\r\n    }\r\n}\r\n\r\nexport class DesktopAppAPI {\r\n    private name?: string;\r\n    private version?: string | null;\r\n    private prereleaseVersion?: string;\r\n    private dev?: boolean;\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    private postMessageListeners?: Map<string, Set<(message: unknown) => void>>;\r\n\r\n    constructor() {\r\n        // Check the user agent string first\r\n        if (!isDesktopApp()) {\r\n            return;\r\n        }\r\n\r\n        this.getDesktopAppInfo().then(({name, version}) => {\r\n            this.name = name;\r\n            this.version = semver.valid(semver.coerce(version));\r\n            this.prereleaseVersion = version?.split('-')?.[1];\r\n\r\n            // Legacy Desktop App version, used by some plugins\r\n            if (!window.desktop) {\r\n                window.desktop = {};\r\n            }\r\n            window.desktop.version = semver.valid(semver.coerce(version));\r\n        });\r\n        window.desktopAPI?.isDev?.().then((isDev) => {\r\n            this.dev = isDev;\r\n        });\r\n\r\n        // Legacy code - to be removed\r\n        this.postMessageListeners = new Map();\r\n        window.addEventListener('message', this.postMessageListener);\r\n        window.addEventListener('beforeunload', () => {\r\n            window.removeEventListener('message', this.postMessageListener);\r\n        });\r\n    }\r\n\r\n    /*******************************************************\r\n     * Getters/setters for Desktop App specific information\r\n     *******************************************************/\r\n\r\n    getAppName = () => {\r\n        return this.name;\r\n    };\r\n\r\n    getAppVersion = () => {\r\n        return this.version;\r\n    };\r\n\r\n    getPrereleaseVersion = () => {\r\n        return this.prereleaseVersion;\r\n    };\r\n\r\n    isDev = () => {\r\n        return this.dev;\r\n    };\r\n\r\n    private getDesktopAppInfo = () => {\r\n        if (window.desktopAPI?.getAppInfo) {\r\n            return window.desktopAPI.getAppInfo();\r\n        }\r\n\r\n        return this.invokeWithMessaging<void, {name: string; version: string}>(\r\n            'webapp-ready',\r\n            undefined,\r\n            'register-desktop',\r\n        );\r\n    };\r\n\r\n    /**********************\r\n     * Exposed API methods\r\n     **********************/\r\n\r\n    /**\r\n     * Invokes\r\n     */\r\n\r\n    getBrowserHistoryStatus = async () => {\r\n        if (window.desktopAPI?.requestBrowserHistoryStatus) {\r\n            return window.desktopAPI.requestBrowserHistoryStatus();\r\n        }\r\n\r\n        const {enableBack, enableForward} = await this.invokeWithMessaging<void, {enableBack: boolean; enableForward: boolean}>(\r\n            'history-button',\r\n            undefined,\r\n            'history-button-return',\r\n        );\r\n\r\n        return {\r\n            canGoBack: enableBack,\r\n            canGoForward: enableForward,\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Listeners\r\n     */\r\n\r\n    onUserActivityUpdate = (listener: (userIsActive: boolean, idleTime: number, isSystemEvent: boolean) => void) => {\r\n        if (window.desktopAPI?.onUserActivityUpdate) {\r\n            return window.desktopAPI.onUserActivityUpdate(listener);\r\n        }\r\n\r\n        const legacyListener = ({userIsActive, manual}: {userIsActive: boolean; manual: boolean}) => listener(userIsActive, 0, manual);\r\n        this.addPostMessageListener('user-activity-update', legacyListener);\r\n\r\n        return () => this.removePostMessageListener('user-activity-update', legacyListener);\r\n    };\r\n\r\n    onNotificationClicked = (listener: (channelId: string, teamId: string, url: string) => void) => {\r\n        if (window.desktopAPI?.onNotificationClicked) {\r\n            return window.desktopAPI.onNotificationClicked(listener);\r\n        }\r\n\r\n        const legacyListener = ({channel, teamId, url}: {channel: {id: string}; teamId: string; url: string}) => listener(channel.id, teamId, url);\r\n        this.addPostMessageListener('notification-clicked', legacyListener);\r\n\r\n        return () => this.removePostMessageListener('notification-clicked', legacyListener);\r\n    };\r\n\r\n    onBrowserHistoryPush = (listener: (pathName: string) => void) => {\r\n        if (window.desktopAPI?.onBrowserHistoryPush) {\r\n            return window.desktopAPI.onBrowserHistoryPush(listener);\r\n        }\r\n\r\n        const legacyListener = ({pathName}: {pathName: string}) => listener(pathName);\r\n        this.addPostMessageListener('browser-history-push-return', legacyListener);\r\n\r\n        return () => this.removePostMessageListener('browser-history-push-return', legacyListener);\r\n    };\r\n\r\n    onBrowserHistoryStatusUpdated = (listener: (enableBack: boolean, enableForward: boolean) => void) => {\r\n        if (window.desktopAPI?.onBrowserHistoryStatusUpdated) {\r\n            return window.desktopAPI.onBrowserHistoryStatusUpdated(listener);\r\n        }\r\n\r\n        const legacyListener = ({enableBack, enableForward}: {enableBack: boolean; enableForward: boolean}) => listener(enableBack, enableForward);\r\n        this.addPostMessageListener('history-button-return', legacyListener);\r\n\r\n        return () => this.removePostMessageListener('history-button-return', legacyListener);\r\n    };\r\n\r\n    onReceiveMetrics = (listener: (metricsMap: Map<string, {cpu?: number; memory?: number}>) => void) => {\r\n        return window.desktopAPI?.onSendMetrics?.(listener);\r\n    };\r\n\r\n    /**\r\n     * One-ways\r\n     */\r\n\r\n    dispatchNotification = async (\r\n        title: string,\r\n        body: string,\r\n        channelId: string,\r\n        teamId: string,\r\n        silent: boolean,\r\n        soundName: string,\r\n        url: string,\r\n    ) => {\r\n        if (window.desktopAPI?.sendNotification) {\r\n            const result = await window.desktopAPI.sendNotification(title, body, channelId, teamId, url, silent, soundName);\r\n            return result ?? {status: 'unsupported', reason: 'desktop_app_unsupported'};\r\n        }\r\n\r\n        // get the desktop app to trigger the notification\r\n        window.postMessage(\r\n            {\r\n                type: 'dispatch-notification',\r\n                message: {\r\n                    title,\r\n                    body,\r\n                    channel: {id: channelId},\r\n                    teamId,\r\n                    silent,\r\n                    data: {soundName},\r\n                    url,\r\n                },\r\n            },\r\n            window.location.origin,\r\n        );\r\n        return {status: 'unsupported', reason: 'desktop_app_unsupported'};\r\n    };\r\n\r\n    doBrowserHistoryPush = (path: string) => {\r\n        if (window.desktopAPI?.sendBrowserHistoryPush) {\r\n            window.desktopAPI.sendBrowserHistoryPush(path);\r\n            return;\r\n        }\r\n\r\n        window.postMessage(\r\n            {\r\n                type: 'browser-history-push',\r\n                message: {path},\r\n            },\r\n            window.location.origin,\r\n        );\r\n    };\r\n\r\n    updateUnreadsAndMentions = (isUnread: boolean, mentionCount: number) =>\r\n        window.desktopAPI?.setUnreadsAndMentions && window.desktopAPI.setUnreadsAndMentions(isUnread, mentionCount);\r\n    setSessionExpired = (expired: boolean) => window.desktopAPI?.setSessionExpired && window.desktopAPI.setSessionExpired(expired);\r\n    signalLogin = () => window.desktopAPI?.onLogin?.();\r\n    signalLogout = () => window.desktopAPI?.onLogout?.();\r\n    reactAppInitialized = () => window.desktopAPI?.reactAppInitialized?.();\r\n\r\n    /*********************************************************************\r\n     * Helper functions for legacy code\r\n     * Remove all of this once we have no use for message passing anymore\r\n     *********************************************************************/\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    private postMessageListener = ({origin, data: {type, message}}: {origin: string; data: {type: string; message: unknown}}) => {\r\n        if (origin !== window.location.origin) {\r\n            return;\r\n        }\r\n\r\n        const listeners = this.postMessageListeners?.get(type);\r\n        if (!listeners) {\r\n            return;\r\n        }\r\n\r\n        listeners.forEach((listener) => {\r\n            listener(message);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    private addPostMessageListener = (channel: string, listener: (message: any) => void) => {\r\n        if (this.postMessageListeners?.has(channel)) {\r\n            this.postMessageListeners.set(channel, this.postMessageListeners.get(channel)!.add(listener));\r\n        } else {\r\n            this.postMessageListeners?.set(channel, new Set([listener]));\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    private removePostMessageListener = (channel: string, listener: (message: any) => void) => {\r\n        const set = this.postMessageListeners?.get(channel);\r\n        set?.delete(listener);\r\n        if (set?.size) {\r\n            this.postMessageListeners?.set(channel, set);\r\n        } else {\r\n            this.postMessageListeners?.delete(channel);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @deprecated\r\n     */\r\n    private invokeWithMessaging = <T, T2>(\r\n        sendChannel: string,\r\n        sendData?: T,\r\n        receiveChannel?: string,\r\n    ) => {\r\n        return new Promise<T2>((resolve) => {\r\n            /* create and register a temporary listener if necessary */\r\n            const response = ({origin, data: {type, message}}: {origin: string; data: {type: string; message: T2}}) => {\r\n                /* ignore messages from other frames */\r\n                if (origin !== window.location.origin) {\r\n                    return;\r\n                }\r\n\r\n                /* ignore messages from other channels */\r\n                if (type !== (receiveChannel ?? sendChannel)) {\r\n                    return;\r\n                }\r\n\r\n                /* clean up listener and resolve */\r\n                window.removeEventListener('message', response);\r\n                resolve(message);\r\n            };\r\n\r\n            window.addEventListener('message', response);\r\n            window.postMessage(\r\n                {type: sendChannel, message: sendData},\r\n                window.location.origin,\r\n            );\r\n        });\r\n    };\r\n}\r\n\r\nconst DesktopApp = new DesktopAppAPI();\r\nexport default DesktopApp;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/**\r\n * Boolean function to check if a server version is greater than another.\r\n *\r\n * currentVersion: The server version being checked\r\n * compareVersion: The version to compare the former version against\r\n *\r\n * eg.  currentVersion = 4.16.0, compareVersion = 4.17.0 returns false\r\n *      currentVersion = 4.16.1, compareVersion = 4.16.1 returns true\r\n */\r\nexport function isServerVersionGreaterThanOrEqualTo(currentVersion: string, compareVersion: string): boolean {\r\n    if (currentVersion === compareVersion) {\r\n        return true;\r\n    }\r\n\r\n    // We only care about the numbers\r\n    const currentVersionNumber = (currentVersion || '').split('.').filter((x) => (/^[0-9]+$/).exec(x) !== null);\r\n    const compareVersionNumber = (compareVersion || '').split('.').filter((x) => (/^[0-9]+$/).exec(x) !== null);\r\n\r\n    for (let i = 0; i < Math.max(currentVersionNumber.length, compareVersionNumber.length); i++) {\r\n        const currentVersion = parseInt(currentVersionNumber[i], 10) || 0;\r\n        const compareVersion = parseInt(compareVersionNumber[i], 10) || 0;\r\n        if (currentVersion > compareVersion) {\r\n            return true;\r\n        }\r\n\r\n        if (currentVersion < compareVersion) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If all components are equal, then return true\r\n    return true;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/*\r\nExample User Agents\r\n--------------------\r\n\r\nChrome:\r\n    Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36\r\n\r\nFirefox:\r\n    Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0\r\n\r\nIE11:\r\n    Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko\r\n\r\nEdge:\r\n    Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586\r\n\r\nChromeOS Chromebook:\r\n    Mozilla/5.0 (X11; CrOS x86_64 8172.45.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.64 Safari/537.36\r\n\r\nDesktop App:\r\n    Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Mattermost/1.2.1 Chrome/49.0.2623.75 Electron/0.37.8 Safari/537.36\r\n    Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586\r\n    Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Mattermost/3.4.1 Chrome/53.0.2785.113 Electron/1.4.2 Safari/537.36\r\n    Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Mattermost/3.4.1 Chrome/51.0.2704.106 Electron/1.2.8 Safari/537.36\r\n\r\nAndroid Chrome:\r\n    Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76B) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19\r\n\r\nAndroid Firefox:\r\n    Mozilla/5.0 (Android; U; Android; pl; rv:1.9.2.8) Gecko/20100202 Firefox/3.5.8\r\n    Mozilla/5.0 (Android 7.0; Mobile; rv:54.0) Gecko/54.0 Firefox/54.0\r\n    Mozilla/5.0 (Android 7.0; Mobile; rv:57.0) Gecko/57.0 Firefox/57.0\r\n\r\nAndroid App:\r\n    Mozilla/5.0 (Linux; U; Android 4.1.1; en-gb; Build/KLP) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Safari/534.30\r\n    Mozilla/5.0 (Linux; Android 4.4; Nexus 5 Build/_BuildID_) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36\r\n    Mozilla/5.0 (Linux; Android 5.1.1; Nexus 5 Build/LMY48B; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/43.0.2357.65 Mobile Safari/537.36\r\n\r\niOS Safari:\r\n    Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543 Safari/419.3\r\n\r\niOS Android:\r\n    Mozilla/5.0 (iPhone; U; CPU iPhone OS 5_1_1 like Mac OS X; en) AppleWebKit/534.46.0 (KHTML, like Gecko) CriOS/19.0.1084.60 Mobile/9B206 Safari/7534.48.3\r\n\r\niOS App:\r\n    Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_2 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13F69\r\n*/\r\n\r\nconst userAgent = () => window.navigator.userAgent;\r\n\r\nexport function isChrome(): boolean {\r\n    return userAgent().indexOf('Chrome') > -1 && userAgent().indexOf('Edge') === -1;\r\n}\r\n\r\nexport function isSafari(): boolean {\r\n    return userAgent().indexOf('Safari') !== -1 && userAgent().indexOf('Chrome') === -1;\r\n}\r\n\r\nexport function isIosSafari(): boolean {\r\n    return (userAgent().indexOf('iPhone') !== -1 || userAgent().indexOf('iPad') !== -1) && userAgent().indexOf('Safari') !== -1 && userAgent().indexOf('CriOS') === -1;\r\n}\r\n\r\nexport function isIosChrome(): boolean {\r\n    return userAgent().indexOf('CriOS') !== -1;\r\n}\r\n\r\nexport function isIosFirefox(): boolean {\r\n    return userAgent().indexOf('FxiOS') !== -1;\r\n}\r\n\r\nexport function isIosWeb(): boolean {\r\n    return isIosSafari() || isIosChrome();\r\n}\r\n\r\nexport function isIos(): boolean {\r\n    return userAgent().indexOf('iPhone') !== -1 || userAgent().indexOf('iPad') !== -1;\r\n}\r\n\r\nexport function isAndroid(): boolean {\r\n    return userAgent().indexOf('Android') !== -1;\r\n}\r\n\r\nexport function isAndroidChrome(): boolean {\r\n    return userAgent().indexOf('Android') !== -1 && userAgent().indexOf('Chrome') !== -1 && userAgent().indexOf('Version') === -1;\r\n}\r\n\r\nexport function isAndroidFirefox(): boolean {\r\n    return userAgent().indexOf('Android') !== -1 && userAgent().indexOf('Firefox') !== -1;\r\n}\r\n\r\nexport function isAndroidWeb(): boolean {\r\n    return isAndroidChrome() || isAndroidFirefox();\r\n}\r\n\r\nexport function isIosClassic(): boolean {\r\n    return isMobileApp() && isIos();\r\n}\r\n\r\n// Returns true if and only if the user is using a Mattermost mobile app. This will return false if the user is using the\r\n// web browser on a mobile device.\r\nexport function isMobileApp(): boolean {\r\n    return isMobile() && !isIosWeb() && !isAndroidWeb();\r\n}\r\n\r\n// Returns true if and only if the user is using Mattermost from either the mobile app or the web browser on a mobile device.\r\nexport function isMobile(): boolean {\r\n    return isIos() || isAndroid();\r\n}\r\n\r\nexport function isFirefox(): boolean {\r\n    return userAgent().indexOf('Firefox') !== -1;\r\n}\r\n\r\nexport function isChromebook(): boolean {\r\n    return userAgent().indexOf('CrOS') !== -1;\r\n}\r\n\r\nexport function isInternetExplorer(): boolean {\r\n    return userAgent().indexOf('Trident') !== -1;\r\n}\r\n\r\nexport function isEdge(): boolean {\r\n    return userAgent().indexOf('Edge') !== -1;\r\n}\r\n\r\nexport function isChromiumEdge(): boolean {\r\n    return userAgent().indexOf('Edg') !== -1 && userAgent().indexOf('Edge') === -1;\r\n}\r\n\r\nexport function isDesktopApp(): boolean {\r\n    return userAgent().indexOf('Mattermost') !== -1 && userAgent().indexOf('Electron') !== -1;\r\n}\r\n\r\nexport function isWindowsApp(): boolean {\r\n    return isDesktopApp() && isWindows();\r\n}\r\n\r\nexport function isMacApp(): boolean {\r\n    return isDesktopApp() && isMac();\r\n}\r\n\r\nexport function isWindows(): boolean {\r\n    return userAgent().indexOf('Windows') !== -1;\r\n}\r\n\r\nexport function isMac(): boolean {\r\n    return userAgent().indexOf('Macintosh') !== -1;\r\n}\r\n\r\nexport function isLinux(): boolean {\r\n    return navigator.platform.toUpperCase().indexOf('LINUX') >= 0;\r\n}\r\n\r\nexport function isWindows7(): boolean {\r\n    const appVersion = navigator.appVersion;\r\n\r\n    if (!appVersion) {\r\n        return false;\r\n    }\r\n\r\n    return (/\\bWindows NT 6\\.1\\b/).test(appVersion);\r\n}\r\n\r\nexport function getDesktopVersion(): string {\r\n    // use if the value window.desktop.version is not set yet\r\n    const regex = /Mattermost\\/(\\d+\\.\\d+\\.\\d+)/gm;\r\n    const match = regex.exec(window.navigator.appVersion)?.[1] || '';\r\n    return match;\r\n}\r\n"],"names":["makeAsyncComponent","displayName","LazyComponent","fallback","arguments","length","undefined","Component","props","React","makeAsyncPluggableComponent","lazy","b","createBrowserHistory","basename","window","isDesktop","isDesktopApp","isServerVersionGreaterThanOrEqualTo","getDesktopVersion","browserHistory","_objectSpread","push","path","DesktopApp","doBrowserHistoryPush","pathname","_len","args","Array","_key","getHistory","_getModule","getModule","onBrowserHistoryPush","pathName","constructor","_window$desktopAPI15","_window$desktopAPI15$","_defineProperty","this","name","version","prereleaseVersion","dev","_window$desktopAPI","desktopAPI","getAppInfo","invokeWithMessaging","async","_window$desktopAPI2","requestBrowserHistoryStatus","enableBack","enableForward","canGoBack","canGoForward","listener","_window$desktopAPI3","onUserActivityUpdate","legacyListener","_ref","userIsActive","manual","addPostMessageListener","removePostMessageListener","_window$desktopAPI4","onNotificationClicked","_ref2","channel","teamId","url","id","_window$desktopAPI5","_ref3","_window$desktopAPI6","onBrowserHistoryStatusUpdated","_ref4","_window$desktopAPI7","_window$desktopAPI7$o","onSendMetrics","call","title","body","channelId","silent","soundName","_window$desktopAPI8","sendNotification","result","status","reason","postMessage","type","message","data","location","origin","_window$desktopAPI9","sendBrowserHistoryPush","isUnread","mentionCount","_window$desktopAPI10","setUnreadsAndMentions","expired","_window$desktopAPI11","setSessionExpired","_window$desktopAPI12","_window$desktopAPI12$","onLogin","_window$desktopAPI13","_window$desktopAPI13$","onLogout","_window$desktopAPI14","_window$desktopAPI14$","reactAppInitialized","_ref5","_this$postMessageList","listeners","postMessageListeners","get","forEach","_this$postMessageList2","_this$postMessageList3","has","set","add","Set","_this$postMessageList4","_this$postMessageList5","_this$postMessageList6","delete","size","sendChannel","sendData","receiveChannel","Promise","resolve","response","_ref6","removeEventListener","addEventListener","getDesktopAppInfo","then","_ref7","_version$split","semver","split","desktop","isDev","Map","postMessageListener","currentVersion","compareVersion","currentVersionNumber","filter","x","exec","compareVersionNumber","i","Math","max","parseInt","userAgent","navigator","isChrome","indexOf","isSafari","isIosSafari","isIosChrome","isIosFirefox","isIosWeb","isIos","isAndroid","isAndroidWeb","isMobileApp","isMobile","isFirefox","isChromebook","isInternetExplorer","isEdge","isChromiumEdge","isMacApp","isMac","isWindows","isLinux","platform","toUpperCase","_regex$exec","appVersion"],"sourceRoot":""}