{"version":3,"file":"635.8d94b102a534978be341.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/app_bar/new_channel_with_board_tour_tip.tsx","webpack://mattermost-webapp/./src/components/channel_header/components/header_icon_wrapper.tsx","webpack://mattermost-webapp/./src/components/common/hooks/useCopyText.ts","webpack://mattermost-webapp/./src/components/common/svg_images_components/alert_svg.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/components/editable_area.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/components/linelimiter.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/about_area_channel.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/about_area_dm.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/about_area_gm.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/about_area.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/header.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/menu.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/top_buttons.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/channel_info_rhs.tsx","webpack://mattermost-webapp/./src/components/channel_info_rhs/index.ts","webpack://mattermost-webapp/./src/components/channel_members_rhs/action_bar.tsx","webpack://mattermost-webapp/./src/components/channel_members_rhs/header.tsx","webpack://mattermost-webapp/./src/components/channel_members_rhs/search.tsx","webpack://mattermost-webapp/./src/components/channel_members_rhs/channel_members_rhs.tsx","webpack://mattermost-webapp/./src/components/channel_members_rhs/index.ts","webpack://mattermost-webapp/./src/components/search_results_header/search_results_header.tsx","webpack://mattermost-webapp/./src/components/search_results_header/index.tsx","webpack://mattermost-webapp/./src/components/info_toast/info_toast.tsx","webpack://mattermost-webapp/./src/components/post_edit_history/restore_post_modal.tsx","webpack://mattermost-webapp/./src/components/post_edit_history/edited_post_item/edited_post_item.tsx","webpack://mattermost-webapp/./src/components/post_edit_history/edited_post_item/index.ts","webpack://mattermost-webapp/./src/components/post_edit_history/post_edit_history.tsx","webpack://mattermost-webapp/./src/components/post_edit_history/index.ts","webpack://mattermost-webapp/./src/components/resizable_sidebar/resizable_rhs/index.tsx","webpack://mattermost-webapp/./src/components/rhs_card_header/rhs_card_header.tsx","webpack://mattermost-webapp/./src/components/rhs_card_header/index.tsx","webpack://mattermost-webapp/./src/components/rhs_card/rhs_card.tsx","webpack://mattermost-webapp/./src/components/rhs_card/index.ts","webpack://mattermost-webapp/./src/components/tours/crt_tour/crt_threads_pane_tutorial_tip.tsx","webpack://mattermost-webapp/./src/components/rhs_header_post/rhs_header_post.tsx","webpack://mattermost-webapp/./src/components/rhs_header_post/index.ts","webpack://mattermost-webapp/./src/components/rhs_thread/rhs_thread.tsx","webpack://mattermost-webapp/./src/components/rhs_thread/index.ts","webpack://mattermost-webapp/./src/components/widgets/popover/index.tsx","webpack://mattermost-webapp/./src/components/suggestion/search_suggestion_list.tsx","webpack://mattermost-webapp/./src/components/suggestion/suggestion_date.tsx","webpack://mattermost-webapp/./src/components/search_bar/search_bar.tsx","webpack://mattermost-webapp/./src/components/search_hint/search_hint.tsx","webpack://mattermost-webapp/./src/components/file_search_results/file_search_result_item.tsx","webpack://mattermost-webapp/./src/components/file_search_results/index.tsx","webpack://mattermost-webapp/./src/components/search_results/files_filter_menu.tsx","webpack://mattermost-webapp/./src/components/search_results/messages_or_files_selector.tsx","webpack://mattermost-webapp/./src/components/search_results/post_search_results_item.tsx","webpack://mattermost-webapp/./src/components/search_results/search_limits_banner.tsx","webpack://mattermost-webapp/./src/components/search_results/search_results.tsx","webpack://mattermost-webapp/./src/components/search_results/index.tsx","webpack://mattermost-webapp/./src/components/search/search.tsx","webpack://mattermost-webapp/./src/components/search/index.tsx","webpack://mattermost-webapp/./src/plugins/rhs_plugin/rhs_plugin.tsx","webpack://mattermost-webapp/./src/plugins/rhs_plugin/index.ts","webpack://mattermost-webapp/./src/components/sidebar_right/sidebar_right.tsx","webpack://mattermost-webapp/./src/components/sidebar_right/index.ts","webpack://mattermost-webapp/./src/components/widgets/icons/search_icon.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport type {Placement} from 'tippy.js';\r\n\r\nimport {TourTip, useMeasurePunchouts} from '@mattermost/components';\r\n\r\nimport {setNewChannelWithBoardPreference} from 'mattermost-redux/actions/boards';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport {showNewChannelWithBoardPulsatingDot} from 'selectors/plugins';\r\n\r\ntype Props = {\r\n    pulsatingDotPlacement?: Omit<Placement, 'auto'| 'auto-end'>;\r\n    pulsatingDotTranslate?: {x: number; y: number};\r\n}\r\n\r\nconst NewChannelWithBoardTourTip = ({\r\n    pulsatingDotPlacement = 'left',\r\n    pulsatingDotTranslate,\r\n}: Props): JSX.Element | null => {\r\n    const dispatch = useDispatch();\r\n    const showTip = useSelector(showNewChannelWithBoardPulsatingDot);\r\n\r\n    const title = (\r\n        <FormattedMessage\r\n            id='newChannelWithBoard.tutorialTip.title'\r\n            defaultMessage='Access linked boards from the App Bar'\r\n        />\r\n    );\r\n\r\n    const screen = (\r\n        <FormattedMessage\r\n            id='newChannelWithBoard.tutorialTip.description'\r\n            defaultMessage='The board you just created can be quickly accessed by clicking on the Boards icon in the App bar. You can view the boards that are linked to this channel in the right-hand sidebar and open one in full view.'\r\n        />\r\n    );\r\n\r\n    const [tipOpened, setTipOpened] = useState(showTip);\r\n\r\n    const handleDismiss = useCallback((e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        setTipOpened(false);\r\n        dispatch(setNewChannelWithBoardPreference({[Preferences.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]: true}));\r\n    }, []);\r\n\r\n    const handleOpen = useCallback((e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n\r\n        if (tipOpened) {\r\n            dispatch(setNewChannelWithBoardPreference({[Preferences.NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED]: true}));\r\n            setTipOpened(false);\r\n        } else {\r\n            setTipOpened(true);\r\n        }\r\n    }, []);\r\n\r\n    const overlayPunchOut = useMeasurePunchouts(['app-bar-icon-focalboard'], [], {y: -2, height: 4, x: 0, width: 0});\r\n\r\n    if (!showTip) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <TourTip\r\n            show={true}\r\n            screen={screen}\r\n            title={title}\r\n            overlayPunchOut={overlayPunchOut}\r\n            placement='right-start'\r\n            pulsatingDotPlacement={pulsatingDotPlacement}\r\n            step={1}\r\n            singleTip={true}\r\n            showOptOut={false}\r\n            interactivePunchOut={true}\r\n            handleDismiss={handleDismiss}\r\n            handleOpen={handleOpen}\r\n            handlePrevious={handleDismiss}\r\n            offset={[-30, 5]}\r\n            pulsatingDotTranslate={pulsatingDotTranslate}\r\n        />\r\n    );\r\n};\r\n\r\nexport default NewChannelWithBoardTourTip;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport NewChannelWithBoardTourTip from 'components/app_bar/new_channel_with_board_tour_tip';\r\nimport WithTooltip from 'components/with_tooltip';\r\nimport type {ShortcutDefinition} from 'components/with_tooltip/tooltip_shortcut';\r\n\r\nimport {suitePluginIds} from 'utils/constants';\r\n\r\ntype Props = {\r\n\r\n    /**\r\n     * ariaLabelOverride lets you override the aria-label which would otherwise use the tooltip text. This typically\r\n     * shouldn't be needed.\r\n     */\r\n    ariaLabelOverride?: string;\r\n\r\n    buttonClass?: string;\r\n    buttonId: string;\r\n    children: React.ReactNode;\r\n    onClick: (event: React.MouseEvent<HTMLButtonElement>) => void;\r\n    tooltip: string;\r\n    tooltipShortcut?: ShortcutDefinition;\r\n    isRhsOpen?: boolean;\r\n    pluginId?: string;\r\n}\r\n\r\nconst HeaderIconWrapper = (props: Props) => {\r\n    const {\r\n        ariaLabelOverride,\r\n        buttonClass,\r\n        buttonId,\r\n        children,\r\n        onClick,\r\n        tooltip: tooltipText,\r\n        tooltipShortcut,\r\n        isRhsOpen,\r\n        pluginId,\r\n    } = props;\r\n\r\n    const boardsEnabled = pluginId === suitePluginIds.focalboard;\r\n\r\n    const ariaLabelText = ariaLabelOverride ?? tooltipText;\r\n\r\n    return (\r\n        <>\r\n            <WithTooltip\r\n                title={isRhsOpen ? '' : tooltipText}\r\n                shortcut={tooltipShortcut}\r\n            >\r\n                <button\r\n                    id={buttonId}\r\n                    aria-label={ariaLabelText}\r\n                    className={buttonClass || 'channel-header__icon'}\r\n                    onClick={onClick}\r\n                >\r\n                    {children}\r\n                </button>\r\n            </WithTooltip>\r\n            {boardsEnabled &&\r\n                <NewChannelWithBoardTourTip\r\n                    pulsatingDotPlacement={'start'}\r\n                    pulsatingDotTranslate={{x: 0, y: -22}}\r\n                />\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\nexport default HeaderIconWrapper;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useRef, useCallback, useState} from 'react';\r\nimport {defineMessages} from 'react-intl';\r\n\r\ntype CopyOptions = {\r\n    successCopyTimeout?: number;\r\n    text: string;\r\n};\r\n\r\ntype CopyResponse = {\r\n    copiedRecently: boolean;\r\n    copyError: boolean;\r\n    onClick: () => void;\r\n};\r\n\r\nconst DEFAULT_COPY_TIMEOUT = 4000;\r\n\r\nexport default function useCopyText({\r\n    text,\r\n    successCopyTimeout: successCopyTimeoutReceived,\r\n}: CopyOptions): CopyResponse {\r\n    const [copiedRecently, setCopiedRecently] = useState(false);\r\n    const [copyError, setCopyError] = useState(false);\r\n    const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    let successCopyTimeout = DEFAULT_COPY_TIMEOUT;\r\n    if (successCopyTimeoutReceived || successCopyTimeoutReceived === 0) {\r\n        successCopyTimeout = successCopyTimeoutReceived;\r\n    }\r\n\r\n    const onClick = useCallback(() => {\r\n        if (timerRef.current) {\r\n            clearTimeout(timerRef.current);\r\n            timerRef.current = null;\r\n        }\r\n        const clipboard = navigator.clipboard;\r\n        if (clipboard) {\r\n            clipboard.writeText(text).\r\n                then(() => {\r\n                    setCopiedRecently(true);\r\n                    setCopyError(false);\r\n                }).\r\n                catch(() => {\r\n                    setCopiedRecently(false);\r\n                    setCopyError(true);\r\n                });\r\n        } else {\r\n            const textField = document.createElement('textarea');\r\n            textField.innerText = text;\r\n            textField.style.position = 'fixed';\r\n            textField.style.opacity = '0';\r\n\r\n            document.body.appendChild(textField);\r\n            textField.select();\r\n\r\n            try {\r\n                const success = document.execCommand('copy');\r\n                setCopiedRecently(success);\r\n                setCopyError(!success);\r\n            } catch (err) {\r\n                setCopiedRecently(false);\r\n                setCopyError(true);\r\n            }\r\n            textField.remove();\r\n        }\r\n\r\n        timerRef.current = setTimeout(() => {\r\n            setCopiedRecently(false);\r\n            setCopyError(false);\r\n        }, successCopyTimeout);\r\n    }, [successCopyTimeout, text]);\r\n\r\n    return {\r\n        copiedRecently,\r\n        copyError,\r\n        onClick,\r\n    };\r\n}\r\n\r\nexport const messages = defineMessages({\r\n    copy: {id: 'copy_text.copy', defaultMessage: 'Copy'},\r\n    copied: {id: 'copy_text.copied', defaultMessage: 'Copied'},\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\ntype SvgProps = {\r\n    width: number;\r\n    height: number;\r\n};\r\n\r\nconst AlertSvg = (props: SvgProps) => (\r\n    <svg\r\n        width={props.width ? props.width.toString() : '87'}\r\n        height={props.height ? props.height.toString() : '70'}\r\n        viewBox='0 0 87 70'\r\n        fill='none'\r\n        xmlns='http://www.w3.org/2000/svg'\r\n    >\r\n        <rect\r\n            x='8.00098'\r\n            y='7'\r\n            width='72'\r\n            height='24'\r\n            rx='3.75'\r\n            fill='var(--button-bg)'\r\n            fillOpacity='0.12'\r\n        />\r\n        <rect\r\n            x='0.000976562'\r\n            y='34'\r\n            width='87'\r\n            height='25'\r\n            rx='3.75'\r\n            fill='var(--button-bg)'\r\n            fillOpacity='0.12'\r\n        />\r\n        <path\r\n            d='M38.3214 2.31098C39.4303 0.112261 42.5697 0.112256 43.6786 2.31098L71.7146 57.899C72.7209 59.8943 71.2707 62.25 69.0359 62.25H12.9641C10.7294 62.25 9.27912 59.8943 10.2854 57.899L38.3214 2.31098Z'\r\n            fill='var(--center-channel-bg)'\r\n        />\r\n        <path\r\n            d='M40.3214 4.31098C41.4303 2.11226 44.5697 2.11226 45.6786 4.31098L73.7146 59.899C74.7209 61.8943 73.2707 64.25 71.0359 64.25H14.9641C12.7294 64.25 11.2791 61.8943 12.2854 59.899L40.3214 4.31098Z'\r\n            fill='#FFBC1F'\r\n        />\r\n        <path\r\n            d='M43.2322 2.53614L71.2681 58.1242C72.1067 59.7869 70.8982 61.75 69.0359 61.75H12.9641C11.1018 61.75 9.89327 59.7869 10.7319 58.1242L38.7678 2.53614C39.6919 0.703873 42.3081 0.703871 43.2322 2.53614Z'\r\n            stroke='var(--center-channel-color)'\r\n        />\r\n        <path\r\n            d='M49.542 4.23999L52.8888 10.72M74.922 53.38L68.5073 40.96L66.8339 37.72L64.6027 33.4L61.5348 27.46M59.3036 23.14L55.12 15.04'\r\n            stroke='var(--center-channel-color)'\r\n            strokeOpacity='0.56'\r\n            strokeWidth='1.08'\r\n            strokeLinecap='round'\r\n        />\r\n        <path\r\n            d='M38.0164 25.2833L40.2971 39.9301C40.3191 40.2208 40.4554 40.4927 40.6786 40.6912C40.9018 40.8897 41.1954 41 41.5002 41C41.8051 41 42.0986 40.8897 42.3219 40.6912C42.5451 40.4927 42.6814 40.2208 42.7034 39.9301L44.984 25.2833C45.3987 19.5722 37.5955 19.5722 38.0164 25.2833Z'\r\n            fill='#3F4350'\r\n        />\r\n        <path\r\n            d='M41.0072 47C41.798 47.0014 42.5706 47.2372 43.2275 47.6776C43.8843 48.118 44.396 48.7432 44.6976 49.4742C44.9993 50.2053 45.0774 51.0093 44.9222 51.7848C44.7671 52.5602 44.3856 53.2723 43.8259 53.831C43.2662 54.3897 42.5535 54.7699 41.7777 54.9237C41.002 55.0774 40.1981 54.9978 39.4676 54.6948C38.7371 54.3919 38.1128 53.8792 37.6736 53.2215C37.2344 52.5639 37 51.7908 37 51C37 50.4741 37.1036 49.9534 37.3051 49.4676C37.5066 48.9818 37.8019 48.5406 38.1741 48.169C38.5463 47.7975 38.9881 47.503 39.4743 47.3024C39.9604 47.1018 40.4813 46.9991 41.0072 47Z'\r\n            fill='#3F4350'\r\n        />\r\n        <path\r\n            d='M48.4619 68.5H70.0619'\r\n            stroke='var(--center-channel-color)'\r\n            strokeOpacity='0.56'\r\n            strokeWidth='1.08'\r\n            strokeLinecap='round'\r\n        />\r\n        <path\r\n            d='M10.001 50L26.001 19'\r\n            stroke='var(--center-channel-color)'\r\n            strokeOpacity='0.56'\r\n            strokeWidth='1.08'\r\n            strokeLinecap='round'\r\n        />\r\n    </svg>\r\n\r\n);\r\n\r\nexport default AlertSvg;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nconst EditButton = styled.button`\r\n    border: 0;\r\n    margin: 0px;\r\n    padding: 0px;\r\n    border-radius: 4px;\r\n    background: rgba(var(--center-channel-color-rgb), 0.04);\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    &:hover {\r\n        background: rgba(var(--center-channel-color-rgb), 0.08);\r\n        color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    }\r\n    width: 24px;\r\n    height: 24px;\r\n    i.icon {\r\n        font-size: 14.4px;\r\n    }\r\n`;\r\n\r\nconst EmptyPlace = styled.button`\r\n    padding: 0px;\r\n    background: transparent;\r\n    border: 0px;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    i {\r\n        display: none;\r\n        font-size: 14px;\r\n        margin-left: 4px;\r\n    }\r\n    &:hover {\r\n        color: rgba(var(--center-channel-color-rgb), 0.75);\r\n        i {\r\n            display: inline-block;\r\n        }\r\n    }\r\n`;\r\n\r\ninterface EditableAreaProps {\r\n    editable: boolean;\r\n    content: React.ReactNode;\r\n    emptyLabel: string;\r\n    onEdit: () => void;\r\n    className?: string;\r\n}\r\n\r\nconst EditableAreaBase = ({editable, content, emptyLabel, onEdit, className}: EditableAreaProps) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const allowEditArea = editable && content;\r\n\r\n    return (\r\n        <div className={className}>\r\n            <div className='EditableArea__content'>\r\n                {content}\r\n                {!content && editable && (\r\n                    <EmptyPlace\r\n                        onClick={onEdit}\r\n                        aria-label={formatMessage({id: 'channel_info_rhs.edit_link', defaultMessage: 'Edit'})}\r\n                    >\r\n                        {emptyLabel}\r\n                        <i className='icon icon-pencil-outline edit-icon'/>\r\n                    </EmptyPlace>\r\n                )}\r\n            </div>\r\n            <div className='EditableArea__edit'>\r\n                {allowEditArea ? (\r\n                    <EditButton\r\n                        onClick={onEdit}\r\n                        aria-label={formatMessage({id: 'channel_info_rhs.edit_link', defaultMessage: 'Edit'})}\r\n                    >\r\n                        <i className='icon icon-pencil-outline'/>\r\n                    </EditButton>\r\n                ) : ''}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst EditableArea = styled(EditableAreaBase)`\r\n    display: flex;\r\n    &>.EditableArea__content {\r\n        flex: 1;\r\n        p:last-child {\r\n            margin-bottom:0;\r\n        }\r\n    }\r\n    &:hover {\r\n        &>.EditableArea__edit {\r\n            visibility: visible;\r\n        }\r\n    }\r\n\r\n    &>.EditableArea__edit {\r\n        visibility: hidden;\r\n        width: 24px;\r\n    }\r\n`;\r\n\r\nexport default EditableArea;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport {CSSTransition} from 'react-transition-group';\r\nimport styled from 'styled-components';\r\n\r\ninterface LineLimiterProps {\r\n    children: React.ReactNode;\r\n    maxLines: number;\r\n    lineHeight: number;\r\n    moreText: string;\r\n    lessText: string;\r\n    className?: string;\r\n    errorMargin?: number;\r\n}\r\n\r\nconst LineLimiterBase = ({children, maxLines, lineHeight, moreText, lessText, errorMargin = 0.1, className}: LineLimiterProps) => {\r\n    const maxLineHeight = maxLines * lineHeight;\r\n\r\n    const [needLimiter, setNeedLimiter] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [maxHeight, setMaxHeight] = useState('inherit');\r\n    const ref = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (ref === null || ref.current === null) {\r\n            return;\r\n        }\r\n\r\n        const contentHeight = ref.current.scrollHeight;\r\n        const margin = maxLineHeight * errorMargin;\r\n        if (contentHeight > (maxLineHeight + margin)) {\r\n            setNeedLimiter(true);\r\n\r\n            if (open) {\r\n                setMaxHeight(`${contentHeight}px`);\r\n            } else {\r\n                setMaxHeight(`${maxLineHeight}px`);\r\n            }\r\n        } else {\r\n            setNeedLimiter(false);\r\n            setMaxHeight('inherit');\r\n        }\r\n    }, [children, open]);\r\n\r\n    return (\r\n        <CSSTransition\r\n            in={open}\r\n            timeout={500}\r\n            classNames='LineLimiter--Transition-'\r\n        >\r\n            <>\r\n                <div\r\n                    className={className}\r\n                    style={{maxHeight}}\r\n                >\r\n                    <div>\r\n                        <div ref={ref}>{children}</div>\r\n                    </div>\r\n                </div>\r\n                {needLimiter && (\r\n                    <ToggleButton\r\n                        className='LineLimiter__toggler'\r\n                        onClick={() => setOpen(!open)}\r\n                    >\r\n                        {open ? lessText : moreText}\r\n                    </ToggleButton>\r\n                )}\r\n            </>\r\n        </CSSTransition>\r\n    );\r\n};\r\n\r\nconst ToggleButton = styled.button`\r\n    border: 0px;\r\n    background-color: var(--center-channel-bg);\r\n    color: var(--button-bg);\r\n    padding: 0;\r\n    margin: 0;\r\n`;\r\n\r\nconst LineLimiter = styled(LineLimiterBase)<LineLimiterProps>`\r\n    transition: max-height 0.5s ease;\r\n    line-height: ${(props) => props.lineHeight}px;\r\n    overflow: hidden;\r\n\r\n    p {\r\n        margin-bottom: ${(props) => props.lineHeight}px;\r\n    }\r\n\r\n    span[data-emoticon] {\r\n        max-height: ${(props) => props.lineHeight}px;\r\n        .emoticon {\r\n            max-height: ${(props) => props.lineHeight}px;\r\n            min-height: ${(props) => props.lineHeight}px;\r\n         }\r\n    }\r\n\r\n    .markdown-inline-img__container img.markdown-inline-img {\r\n        max-height: ${(props) => props.lineHeight}px !important;\r\n        margin-top: 0 !important;\r\n        margin-bottom: 0 !important;\r\n    }\r\n\r\n    & > * {\r\n       overflow: hidden;\r\n    }\r\n`;\r\n\r\nexport default LineLimiter;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport Markdown from 'components/markdown';\r\n\r\nimport EditableArea from './components/editable_area';\r\nimport LineLimiter from './components/linelimiter';\r\n\r\nconst ChannelId = styled.div`\r\n    margin-bottom: 12px;\r\n    font-size: 11px;\r\n    line-height: 16px;\r\n    letter-spacing: 0.02em;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n`;\r\n\r\nconst ChannelPurpose = styled.div`\r\n    margin-bottom: 12px;\r\n    &.ChannelPurpose--is-dm {\r\n        margin-bottom: 16px;\r\n    }\r\n`;\r\n\r\nconst ChannelDescriptionHeading = styled.div`\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    font-size: 12px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 16px;\r\n    letter-spacing: 0.24px;\r\n    text-transform: uppercase;\r\n    padding: 6px 0px;\r\n`;\r\n\r\nconst ChannelHeader = styled.div`\r\n    margin-bottom: 12px;\r\n`;\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    canEditChannelProperties: boolean;\r\n    actions: {\r\n        editChannelPurpose: () => void;\r\n        editChannelHeader: () => void;\r\n    };\r\n}\r\n\r\nconst AboutAreaChannel = ({channel, canEditChannelProperties, actions}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <>\r\n            {(channel.purpose || canEditChannelProperties) && (\r\n                <ChannelPurpose>\r\n                    <ChannelDescriptionHeading>\r\n                        {formatMessage({id: 'channel_info_rhs.about_area.channel_purpose.heading', defaultMessage: 'Channel Purpose'})}\r\n                    </ChannelDescriptionHeading>\r\n                    <EditableArea\r\n                        editable={canEditChannelProperties}\r\n                        content={channel.purpose && (\r\n                            <LineLimiter\r\n                                maxLines={4}\r\n                                lineHeight={20}\r\n                                moreText={formatMessage({id: 'channel_info_rhs.about_area.channel_purpose.line_limiter.more', defaultMessage: 'more'})}\r\n                                lessText={formatMessage({id: 'channel_info_rhs.about_area.channel_purpose.line_limiter.less', defaultMessage: 'less'})}\r\n                            >\r\n                                <Markdown message={channel.purpose}/>\r\n                            </LineLimiter>\r\n                        )}\r\n                        onEdit={actions.editChannelPurpose}\r\n                        emptyLabel={formatMessage({id: 'channel_info_rhs.about_area.add_channel_purpose', defaultMessage: 'Add a channel purpose'})}\r\n                    />\r\n                </ChannelPurpose>\r\n            )}\r\n\r\n            {(channel.header || canEditChannelProperties) && (\r\n                <ChannelHeader>\r\n                    <ChannelDescriptionHeading>\r\n                        {formatMessage({id: 'channel_info_rhs.about_area.channel_header.heading', defaultMessage: 'Channel Header'})}\r\n                    </ChannelDescriptionHeading>\r\n                    <EditableArea\r\n                        content={channel.header && (\r\n                            <LineLimiter\r\n                                maxLines={4}\r\n                                lineHeight={20}\r\n                                moreText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.more', defaultMessage: 'more'})}\r\n                                lessText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.less', defaultMessage: 'less'})}\r\n                            >\r\n                                <Markdown message={channel.header}/>\r\n                            </LineLimiter>\r\n                        )}\r\n                        editable={canEditChannelProperties}\r\n                        onEdit={actions.editChannelHeader}\r\n                        emptyLabel={formatMessage({id: 'channel_info_rhs.about_area.add_channel_header', defaultMessage: 'Add a channel header'})}\r\n                    />\r\n                </ChannelHeader>\r\n            )}\r\n\r\n            <ChannelId>\r\n                {formatMessage({id: 'channel_info_rhs.about_area_id', defaultMessage: 'ID:'})} {channel.id}\r\n            </ChannelId>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AboutAreaChannel;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport {Client4} from 'mattermost-redux/client';\r\n\r\nimport Markdown from 'components/markdown';\r\nimport ProfilePicture from 'components/profile_picture';\r\nimport BotTag from 'components/widgets/tag/bot_tag';\r\nimport GuestTag from 'components/widgets/tag/guest_tag';\r\n\r\nimport type {DMUser} from './channel_info_rhs';\r\nimport EditableArea from './components/editable_area';\r\nimport LineLimiter from './components/linelimiter';\r\n\r\nconst Username = styled.p`\r\n    font-family: Metropolis, sans-serif;\r\n    font-size: 18px;\r\n    line-height: 24px;\r\n    color: rgb(var(--center-channel-color-rgb));\r\n    font-weight: 600;\r\n    margin: 0;\r\n`;\r\n\r\nconst ChannelHeader = styled.div`\r\n    margin-bottom: 12px;\r\n`;\r\n\r\nconst UserInfoContainer = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n`;\r\n\r\nconst UserAvatar = styled.div`\r\n    .status {\r\n        bottom: 0;\r\n        right: 0;\r\n        height: 18px;\r\n        width: 18px;\r\n        & svg {\r\n            min-height: 14.4px;\r\n        }\r\n    }\r\n`;\r\n\r\nconst UserInfo = styled.div`\r\n    margin-left: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n`;\r\n\r\nconst UsernameContainer = styled.div`\r\n    display: flex;\r\n    gap: 8px\r\n`;\r\n\r\nconst UserPosition = styled.div`\r\n    line-height: 20px;\r\n\r\n    p {\r\n        margin-bottom: 0;\r\n    }\r\n`;\r\n\r\nconst ChannelId = styled.div`\r\n    margin-bottom: 12px;\r\n    font-size: 11px;\r\n    line-height: 16px;\r\n    letter-spacing: 0.02em;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n`;\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    dmUser: DMUser;\r\n    actions: {\r\n        editChannelHeader: () => void;\r\n    };\r\n}\r\n\r\nconst AboutAreaDM = ({channel, dmUser, actions}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <>\r\n            <UserInfoContainer>\r\n                <UserAvatar>\r\n                    <ProfilePicture\r\n                        src={Client4.getProfilePictureUrl(dmUser.user.id, dmUser.user.last_picture_update)}\r\n                        isBot={dmUser.user.is_bot}\r\n                        status={dmUser.status ? dmUser.status : undefined}\r\n                        username={dmUser.display_name}\r\n                        userId={dmUser.user.id}\r\n                        channelId={channel.id}\r\n                        size='xl'\r\n                    />\r\n                </UserAvatar>\r\n                <UserInfo>\r\n                    <UsernameContainer>\r\n                        <Username>{dmUser.display_name}</Username>\r\n                        {dmUser.user.is_bot && <BotTag/>}\r\n                        {dmUser.is_guest && <GuestTag/>}\r\n                    </UsernameContainer>\r\n                    <UserPosition>\r\n                        <Markdown message={dmUser.user.is_bot ? dmUser.user.bot_description : dmUser.user.position}/>\r\n                    </UserPosition>\r\n                </UserInfo>\r\n            </UserInfoContainer>\r\n\r\n            {!dmUser.user.is_bot && (\r\n                <ChannelHeader>\r\n                    <EditableArea\r\n                        content={channel.header && (\r\n                            <LineLimiter\r\n                                maxLines={4}\r\n                                lineHeight={20}\r\n                                moreText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.more', defaultMessage: 'more'})}\r\n                                lessText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.less', defaultMessage: 'less'})}\r\n                            >\r\n                                <Markdown message={channel.header}/>\r\n                            </LineLimiter>\r\n                        )}\r\n                        editable={true}\r\n                        onEdit={actions.editChannelHeader}\r\n                        emptyLabel={formatMessage({id: 'channel_info_rhs.about_area.add_channel_header', defaultMessage: 'Add a channel header'})}\r\n                    />\r\n                </ChannelHeader>\r\n            )}\r\n\r\n            <ChannelId>\r\n                {formatMessage({id: 'channel_info_rhs.about_area_id', defaultMessage: 'ID:'})} {channel.id}\r\n            </ChannelId>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AboutAreaDM;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {Client4} from 'mattermost-redux/client';\r\n\r\nimport Markdown from 'components/markdown';\r\nimport ProfilePicture from 'components/profile_picture';\r\nimport UserProfileElement from 'components/user_profile';\r\n\r\nimport EditableArea from './components/editable_area';\r\nimport LineLimiter from './components/linelimiter';\r\n\r\nconst Usernames = styled.p`\r\n    font-family: Metropolis, sans-serif;\r\n    font-size: 18px;\r\n    line-height: 24px;\r\n    color: rgb(var(--center-channel-color-rgb));\r\n    font-weight: 600;\r\n    margin: 0;\r\n`;\r\n\r\nconst ProfilePictures = styled.div`\r\n    margin-bottom: 10px;\r\n`;\r\n\r\ninterface ProfilePictureContainerProps {\r\n    position: number;\r\n}\r\n\r\nconst ProfilePictureContainer = styled.div<ProfilePictureContainerProps>`\r\n    display: inline-block;\r\n    position: relative;\r\n    left: ${(props) => props.position * -15}px;\r\n\r\n    & img {\r\n        border: 2px solid white;\r\n    }\r\n`;\r\n\r\nconst UsersArea = styled.div`\r\n    margin-bottom: 12px;\r\n    &.ChannelPurpose--is-dm {\r\n        margin-bottom: 16px;\r\n    }\r\n`;\r\n\r\nconst ChannelHeader = styled.div`\r\n    margin-bottom: 12px;\r\n`;\r\n\r\nconst ChannelId = styled.div`\r\n    margin-bottom: 12px;\r\n    font-size: 11px;\r\n    line-height: 16px;\r\n    letter-spacing: 0.02em;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n`;\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    gmUsers: UserProfile[];\r\n    actions: {\r\n        editChannelHeader: () => void;\r\n    };\r\n}\r\n\r\nconst AboutAreaGM = ({channel, gmUsers, actions}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <>\r\n            <UsersArea>\r\n                <ProfilePictures>\r\n                    {gmUsers.map((user, idx) => (\r\n                        <ProfilePictureContainer\r\n                            key={user.id}\r\n                            position={idx}\r\n                        >\r\n                            <ProfilePicture\r\n                                src={Client4.getProfilePictureUrl(user.id, user.last_picture_update)}\r\n                                size='xl'\r\n                                userId={user.id}\r\n                                username={user.username}\r\n                                channelId={channel.id}\r\n                            />\r\n                        </ProfilePictureContainer>\r\n                    ))}\r\n                </ProfilePictures>\r\n                <Usernames>\r\n                    {gmUsers.map((user, i, {length}) => (\r\n                        <React.Fragment key={user.id}>\r\n                            <UserProfileElement\r\n                                userId={user.id}\r\n                                channelId={channel.id}\r\n                            />\r\n                            {(i + 1 !== length) && (<span>{', '}</span>)}\r\n                        </React.Fragment>\r\n                    ))}\r\n                </Usernames>\r\n            </UsersArea>\r\n\r\n            <ChannelHeader>\r\n                <EditableArea\r\n                    content={channel.header && (\r\n                        <LineLimiter\r\n                            maxLines={4}\r\n                            lineHeight={20}\r\n                            moreText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.more', defaultMessage: 'more'})}\r\n                            lessText={formatMessage({id: 'channel_info_rhs.about_area.channel_header.line_limiter.less', defaultMessage: 'less'})}\r\n                        >\r\n                            <Markdown message={channel.header}/>\r\n                        </LineLimiter>\r\n                    )}\r\n                    editable={true}\r\n                    onEdit={actions.editChannelHeader}\r\n                    emptyLabel={formatMessage({id: 'channel_info_rhs.about_area.add_channel_header', defaultMessage: 'Add a channel header'})}\r\n                />\r\n            </ChannelHeader>\r\n\r\n            <ChannelId>\r\n                {formatMessage({id: 'channel_info_rhs.about_area_id', defaultMessage: 'ID:'})} {channel.id}\r\n            </ChannelId>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AboutAreaGM;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport AboutAreaChannel from './about_area_channel';\r\nimport AboutAreaDM from './about_area_dm';\r\nimport AboutAreaGM from './about_area_gm';\r\nimport type {DMUser} from './channel_info_rhs';\r\n\r\nconst Container = styled.div`\r\n    overflow-wrap: anywhere;\r\n    padding: 24px;\r\n    padding-bottom: 12px;\r\n\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n\r\n    & .status-wrapper {\r\n        height: 50px;\r\n    }\r\n\r\n    & .text-empty {\r\n        padding: 0px;\r\n        background: transparent;\r\n        border: 0px;\r\n        color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    }\r\n`;\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    dmUser?: DMUser;\r\n    gmUsers?: UserProfile[];\r\n    canEditChannelProperties: boolean;\r\n    actions: {\r\n        editChannelPurpose: () => void;\r\n        editChannelHeader: () => void;\r\n    };\r\n}\r\n\r\nconst AboutArea = ({channel, dmUser, gmUsers, canEditChannelProperties, actions}: Props) => {\r\n    return (\r\n        <Container>\r\n            {channel.type === Constants.DM_CHANNEL && dmUser && (\r\n                <AboutAreaDM\r\n                    channel={channel}\r\n                    dmUser={dmUser}\r\n                    actions={{editChannelHeader: actions.editChannelHeader}}\r\n                />\r\n            )}\r\n            {channel.type === Constants.GM_CHANNEL && gmUsers && (\r\n                <AboutAreaGM\r\n                    channel={channel}\r\n                    gmUsers={gmUsers!}\r\n                    actions={{editChannelHeader: actions.editChannelHeader}}\r\n                />\r\n            )}\r\n            {[Constants.OPEN_CHANNEL, Constants.PRIVATE_CHANNEL].includes(channel.type) && (\r\n                <AboutAreaChannel\r\n                    channel={channel}\r\n                    canEditChannelProperties={canEditChannelProperties}\r\n                    actions={actions}\r\n                />\r\n            )}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default AboutArea;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    isArchived: boolean;\r\n    isMobile: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nconst Icon = styled.i`\r\n    font-size:12px;\r\n`;\r\n\r\nconst HeaderTitle = styled.span`\r\n    line-height: 2.4rem;\r\n`;\r\n\r\nconst Header = ({channel, isArchived, isMobile, onClose}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <div className='sidebar--right__header'>\r\n            <span className='sidebar--right__title'>\r\n                {isMobile && (\r\n                    <button\r\n                        className='sidebar--right__back btn btn-icon btn-sm'\r\n                        onClick={onClose}\r\n                        aria-label={formatMessage({id: 'rhs_header.back.icon', defaultMessage: 'Back Icon'})}\r\n                    >\r\n                        <i\r\n                            className='icon icon-arrow-back-ios'\r\n                        />\r\n                    </button>\r\n                )}\r\n                <h2>\r\n                    <HeaderTitle\r\n                        id='rhsPanelTitle'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='channel_info_rhs.header.title'\r\n                            defaultMessage='Info'\r\n                        />\r\n                    </HeaderTitle>\r\n\r\n                    {channel.display_name &&\r\n                    <span\r\n                        className='style--none sidebar--right__title__subtitle'\r\n                    >\r\n                        {isArchived && (<Icon className='icon icon-archive-outline'/>)}\r\n                        {channel.display_name}\r\n                    </span>\r\n                    }\r\n                </h2>\r\n            </span>\r\n\r\n            <WithTooltip\r\n                title={\r\n                    <FormattedMessage\r\n                        id='rhs_header.closeSidebarTooltip'\r\n                        defaultMessage='Close'\r\n                    />\r\n                }\r\n            >\r\n                <button\r\n                    id='rhsCloseButton'\r\n                    type='button'\r\n                    className='sidebar--right__close btn btn-icon btn-sm'\r\n                    aria-label={formatMessage({id: 'rhs_header.closeTooltip.icon', defaultMessage: 'Close Sidebar Icon'})}\r\n                    onClick={onClose}\r\n                >\r\n                    <i\r\n                        className='icon icon-close'\r\n                    />\r\n                </button>\r\n            </WithTooltip>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel, ChannelStats} from '@mattermost/types/channels';\r\n\r\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\r\n\r\nimport {Constants} from 'utils/constants';\r\n\r\nconst MenuContainer = styled.nav`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    padding: 16px 0;\r\n\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    color: rgb(var(--center-channel-color-rgb));\r\n`;\r\n\r\nconst MenuItemButton = styled.button`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 40px;\r\n    padding: 8px 16px;\r\n\r\n    background: none;\r\n    border: none;\r\n    text-align: left;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: rgba(var(--center-channel-color-rgb), 0.08);\r\n    }\r\n`;\r\n\r\nconst Icon = styled.div`\r\n    color: rgba(var(--center-channel-color-rgb), var(--icon-opacity));\r\n`;\r\n\r\nconst MenuItemText = styled.div`\r\n    padding-left: 8px;\r\n    flex: 1;\r\n`;\r\n\r\nconst RightSide = styled.div`\r\n    display: flex;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n`;\r\n\r\nconst Badge = styled.div`\r\n    font-size: 12px;\r\n    line-height: 18px;\r\n    width: 20px;\r\n    display: flex;\r\n    place-content: center;\r\n`;\r\n\r\ninterface MenuItemProps {\r\n    icon: JSX.Element;\r\n    text: string;\r\n    opensSubpanel?: boolean;\r\n    badge?: string | number | JSX.Element;\r\n    onClick: () => void;\r\n    id?: string;\r\n}\r\n\r\nfunction MenuItem(props: MenuItemProps) {\r\n    const {icon, text, opensSubpanel, badge, onClick, id} = props;\r\n    const hasRightSide = (badge !== undefined) || opensSubpanel;\r\n\r\n    return (\r\n        <MenuItemButton\r\n            onClick={onClick}\r\n            aria-label={text}\r\n            type='button'\r\n            id={id || ''}\r\n        >\r\n            <Icon>{icon}</Icon>\r\n            <MenuItemText>{text}</MenuItemText>\r\n            {hasRightSide && (\r\n                <RightSide>\r\n                    {badge !== undefined && (\r\n                        <Badge>{badge}</Badge>\r\n                    )}\r\n                    {opensSubpanel && (\r\n                        <Icon><i className='icon icon-chevron-right'/></Icon>\r\n                    )}\r\n                </RightSide>\r\n            )}\r\n        </MenuItemButton>\r\n    );\r\n}\r\n\r\ninterface MenuProps {\r\n    channel: Channel;\r\n    channelStats: ChannelStats;\r\n    isArchived: boolean;\r\n\r\n    className?: string;\r\n\r\n    actions: {\r\n        openNotificationSettings: () => void;\r\n        showChannelFiles: (channelId: string) => void;\r\n        showPinnedPosts: (channelId: string | undefined) => void;\r\n        showChannelMembers: (channelId: string) => void;\r\n        getChannelStats: (channelId: string, includeFileCount: boolean) => Promise<{data: ChannelStats}>;\r\n    };\r\n}\r\n\r\nexport default function Menu(props: MenuProps) {\r\n    const {formatMessage} = useIntl();\r\n    const {\r\n        channel,\r\n        channelStats,\r\n        isArchived,\r\n        className,\r\n        actions,\r\n    } = props;\r\n\r\n    const [loadingStats, setLoadingStats] = useState(true);\r\n\r\n    const showNotificationPreferences = channel.type !== Constants.DM_CHANNEL && !isArchived;\r\n    const showMembers = channel.type !== Constants.DM_CHANNEL;\r\n    const fileCount = channelStats?.files_count >= 0 ? channelStats?.files_count : 0;\r\n\r\n    useEffect(() => {\r\n        actions.getChannelStats(channel.id, true).then(() => {\r\n            setLoadingStats(false);\r\n        });\r\n        return () => {\r\n            setLoadingStats(true);\r\n        };\r\n    }, [channel.id]);\r\n\r\n    return (\r\n        <MenuContainer\r\n            className={className}\r\n            data-testid='channel_info_rhs-menu'\r\n            aria-label={formatMessage({\r\n                id: 'channel_info_rhs.menu.title',\r\n                defaultMessage: 'Channel Info Actions',\r\n            })}\r\n        >\r\n            {showNotificationPreferences && (\r\n                <MenuItem\r\n                    id='channelInfoRHSNotificationSettings'\r\n                    icon={<i className='icon icon-bell-outline'/>}\r\n                    text={formatMessage({\r\n                        id: 'channel_info_rhs.menu.notification_preferences',\r\n                        defaultMessage: 'Notification Preferences',\r\n                    })}\r\n                    onClick={actions.openNotificationSettings}\r\n                />\r\n            )}\r\n            {showMembers && (\r\n                <MenuItem\r\n                    icon={<i className='icon icon-account-outline'/>}\r\n                    text={formatMessage({\r\n                        id: 'channel_info_rhs.menu.members',\r\n                        defaultMessage: 'Members',\r\n                    })}\r\n                    opensSubpanel={true}\r\n                    badge={channelStats.member_count}\r\n                    onClick={() => actions.showChannelMembers(channel.id)}\r\n                />\r\n            )}\r\n            <MenuItem\r\n                icon={<i className='icon icon-pin-outline'/>}\r\n                text={formatMessage({\r\n                    id: 'channel_info_rhs.menu.pinned',\r\n                    defaultMessage: 'Pinned messages',\r\n                })}\r\n                opensSubpanel={true}\r\n                badge={channelStats?.pinnedpost_count}\r\n                onClick={() => actions.showPinnedPosts(channel.id)}\r\n            />\r\n            <MenuItem\r\n                icon={<i className='icon icon-file-text-outline'/>}\r\n                text={formatMessage({\r\n                    id: 'channel_info_rhs.menu.files',\r\n                    defaultMessage: 'Files',\r\n                })}\r\n                opensSubpanel={true}\r\n                badge={loadingStats ? <LoadingSpinner/> : fileCount}\r\n                onClick={() => actions.showChannelFiles(channel.id)}\r\n            />\r\n        </MenuContainer>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl, FormattedMessage} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport useCopyText from 'components/common/hooks/useCopyText';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nconst ChannelInfoRhsTopButtons = styled.div`\r\n    display: flex;\r\n    color: rgba(var(--center-channel-color-rgb), 0.75);\r\n    margin-top: 24px;\r\n    padding: 0 18px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n    flex: 1;\r\n    padding: 12px 0 10px 0;\r\n    border: 0;\r\n    margin: 0 6px;\r\n    background: rgba(var(--center-channel-color-rgb), 0.04);\r\n    border-radius: 4px;\r\n\r\n    &:hover {\r\n        background: rgba(var(--center-channel-color-rgb), 0.08);\r\n        color: rgba(var(--center-channel-color-rgb), 0.8);\r\n\r\n        & i {\r\n            color: rgba(var(--center-channel-color-rgb), var(--icon-opacity-hover));\r\n        }\r\n    }\r\n\r\n    &:active,\r\n    &.active {\r\n        background: rgba(var(--button-bg-rgb), 0.08);\r\n        color: var(--button-bg);\r\n\r\n        & i {\r\n            color: var(--button-bg-rgb);\r\n        }\r\n    }\r\n\r\n    & i {\r\n        color: rgba(var(--center-channel-color-rgb), var(--icon-opacity));\r\n        font-size: 24px;\r\n    }\r\n\r\n    & span {\r\n        font-size: 10px;\r\n        font-weight: 600;\r\n        line-height: 16px;\r\n    }\r\n`;\r\n\r\nconst CopyButton = styled(Button)`\r\n    transition: background-color 0.5s ease;\r\n\r\n    &:active,\r\n    &.active {\r\n        background: rgba(var(--center-channel-color-rgb), 0.08);\r\n        color: rgba(var(--center-channel-color-rgb), 0.75);\r\n        transition: none;\r\n    }\r\n\r\n    &.success {\r\n        background: var(--online-indicator);\r\n        color: var(--button-color);\r\n\r\n        & i {\r\n            color: var(--button-color);\r\n        }\r\n    }\r\n`;\r\n\r\nexport interface Props {\r\n    channelType: string;\r\n    channelURL?: string;\r\n\r\n    isFavorite: boolean;\r\n    isMuted: boolean;\r\n    isInvitingPeople: boolean;\r\n\r\n    canAddPeople: boolean;\r\n\r\n    actions: {\r\n        toggleFavorite: () => void;\r\n        toggleMute: () => void;\r\n        addPeople: () => void;\r\n    };\r\n}\r\n\r\nexport default function TopButtons({\r\n    channelType,\r\n    channelURL,\r\n    isFavorite,\r\n    isMuted,\r\n    isInvitingPeople,\r\n    canAddPeople: propsCanAddPeople,\r\n    actions,\r\n}: Props) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const copyLink = useCopyText({\r\n        text: channelURL || '',\r\n        successCopyTimeout: 1000,\r\n    });\r\n\r\n    const canAddPeople = ([Constants.OPEN_CHANNEL, Constants.PRIVATE_CHANNEL].includes(channelType) && propsCanAddPeople) || channelType === Constants.GM_CHANNEL;\r\n\r\n    const canCopyLink = [Constants.OPEN_CHANNEL, Constants.PRIVATE_CHANNEL].includes(channelType);\r\n\r\n    // Favorite Button State\r\n    const favoriteIcon = isFavorite ? 'icon-star' : 'icon-star-outline';\r\n    const favoriteText = isFavorite ? formatMessage({id: 'channel_info_rhs.top_buttons.favorited', defaultMessage: 'Favorited'}) : formatMessage({id: 'channel_info_rhs.top_buttons.favorite', defaultMessage: 'Favorite'});\r\n\r\n    // Mute Button State\r\n    const mutedIcon = isMuted ? 'icon-bell-off-outline' : 'icon-bell-outline';\r\n    const mutedText = isMuted ? formatMessage({id: 'channel_info_rhs.top_buttons.muted', defaultMessage: 'Muted'}) : formatMessage({id: 'channel_info_rhs.top_buttons.mute', defaultMessage: 'Mute'});\r\n\r\n    // Copy Button State\r\n    const copyIcon = copyLink.copiedRecently ? 'icon-check' : 'icon-link-variant';\r\n    const copyText = copyLink.copiedRecently ? formatMessage({id: 'channel_info_rhs.top_buttons.copied', defaultMessage: 'Copied'}) : formatMessage({id: 'channel_info_rhs.top_buttons.copy', defaultMessage: 'Copy Link'});\r\n\r\n    return (\r\n        <ChannelInfoRhsTopButtons>\r\n            <WithTooltip\r\n                title={\r\n                    <FormattedMessage\r\n                        id='channel_info_rhs.top_buttons.favorite.tooltip'\r\n                        defaultMessage='Add this channel to favorites'\r\n                    />\r\n                }\r\n            >\r\n                <Button\r\n                    onClick={actions.toggleFavorite}\r\n                    className={isFavorite ? 'active' : ''}\r\n                    aria-label={favoriteText}\r\n                    id='channelInfoRHSAddFavoriteButton'\r\n                >\r\n                    <div>\r\n                        <i className={'icon ' + favoriteIcon}/>\r\n                    </div>\r\n                    <span>{favoriteText}</span>\r\n                </Button>\r\n            </WithTooltip>\r\n            <WithTooltip\r\n                title={\r\n                    <FormattedMessage\r\n                        id='channel_info_rhs.top_buttons.mute.tooltip'\r\n                        defaultMessage='Mute notifications for this channel'\r\n                    />\r\n                }\r\n            >\r\n                <Button\r\n                    onClick={actions.toggleMute}\r\n                    className={isMuted ? 'active' : ''}\r\n                    aria-label={mutedText}\r\n                    id='channelInfoRHSMuteChannelButton'\r\n                >\r\n                    <div>\r\n                        <i className={'icon ' + mutedIcon}/>\r\n                    </div>\r\n                    <span>{mutedText}</span>\r\n                </Button>\r\n            </WithTooltip>\r\n            {canAddPeople && (\r\n                <WithTooltip\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='channel_info_rhs.top_buttons.add_people.tooltip'\r\n                            defaultMessage='Add team members to this channel'\r\n                        />\r\n                    }\r\n                >\r\n                    <Button\r\n                        onClick={actions.addPeople}\r\n                        className={isInvitingPeople ? 'active' : ''}\r\n                        id='channelInfoRHSAddPeopleButton'\r\n                    >\r\n                        <div>\r\n                            <i className='icon icon-account-plus-outline'/>\r\n                        </div>\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='channel_info_rhs.top_buttons.add_people'\r\n                                defaultMessage='Add People'\r\n                            />\r\n                        </span>\r\n                    </Button>\r\n                </WithTooltip>\r\n            )}\r\n            {canCopyLink && (\r\n                <WithTooltip\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='channel_info_rhs.top_buttons.copy_link.tooltip'\r\n                            defaultMessage='Copy link to this channel'\r\n                        />\r\n                    }\r\n                >\r\n                    <CopyButton\r\n                        onClick={copyLink.onClick}\r\n                        className={copyLink.copiedRecently ? 'success' : ''}\r\n                        aria-label={copyText}\r\n                    >\r\n                        <div>\r\n                            <i className={'icon ' + copyIcon}/>\r\n                        </div>\r\n                        <span>{copyText}</span>\r\n                    </CopyButton>\r\n                </WithTooltip>\r\n            )}\r\n        </ChannelInfoRhsTopButtons>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel, ChannelStats} from '@mattermost/types/channels';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport ChannelInviteModal from 'components/channel_invite_modal';\r\nimport ChannelNotificationsModal from 'components/channel_notifications_modal';\r\nimport EditChannelHeaderModal from 'components/edit_channel_header_modal';\r\nimport EditChannelPurposeModal from 'components/edit_channel_purpose_modal';\r\nimport MoreDirectChannels from 'components/more_direct_channels';\r\n\r\nimport Constants, {ModalIdentifiers} from 'utils/constants';\r\nimport {getSiteURL} from 'utils/url';\r\n\r\nimport type {ModalData} from 'types/actions';\r\n\r\nimport AboutArea from './about_area';\r\nimport Header from './header';\r\nimport Menu from './menu';\r\nimport TopButtons from './top_buttons';\r\n\r\nconst Divider = styled.div`\r\n    width: 88%;\r\n    border: 1px solid rgba(var(--center-channel-color-rgb), 0.04);\r\n    margin: 0 auto;\r\n`;\r\n\r\nexport interface DMUser {\r\n    user: UserProfile;\r\n    display_name: string;\r\n    is_guest: boolean;\r\n    status: string;\r\n}\r\n\r\nexport interface Props {\r\n    channel: Channel;\r\n    channelStats: ChannelStats;\r\n    currentUser: UserProfile;\r\n    currentTeam: Team;\r\n    isArchived: boolean;\r\n    isFavorite: boolean;\r\n    isMuted: boolean;\r\n    isInvitingPeople: boolean;\r\n    isMobile: boolean;\r\n    canManageMembers: boolean;\r\n    canManageProperties: boolean;\r\n    dmUser?: DMUser;\r\n    channelMembers: UserProfile[];\r\n    actions: {\r\n        closeRightHandSide: () => void;\r\n        unfavoriteChannel: (channelId: string) => void;\r\n        favoriteChannel: (channelId: string) => void;\r\n        unmuteChannel: (userId: string, channelId: string) => void;\r\n        muteChannel: (userId: string, channelId: string) => void;\r\n        openModal: <P>(modalData: ModalData<P>) => void;\r\n        showChannelFiles: (channelId: string) => void;\r\n        showPinnedPosts: (channelId: string | undefined) => void;\r\n        showChannelMembers: (channelId: string) => void;\r\n        getChannelStats: (channelId: string) => Promise<{data: ChannelStats}>;\r\n    };\r\n}\r\n\r\nconst ChannelInfoRhs = ({\r\n    channel,\r\n    channelStats,\r\n    isArchived,\r\n    isFavorite,\r\n    isMuted,\r\n    isInvitingPeople,\r\n    isMobile,\r\n    currentTeam,\r\n    currentUser,\r\n    dmUser,\r\n    channelMembers,\r\n    canManageMembers,\r\n    canManageProperties,\r\n    actions,\r\n}: Props) => {\r\n    const currentUserId = currentUser.id;\r\n    const channelURL = getSiteURL() + '/' + currentTeam.name + '/channels/' + channel.name;\r\n\r\n    const toggleFavorite = () => {\r\n        if (isFavorite) {\r\n            actions.unfavoriteChannel(channel.id);\r\n            return;\r\n        }\r\n        actions.favoriteChannel(channel.id);\r\n    };\r\n\r\n    const toggleMute = () => {\r\n        if (isMuted) {\r\n            actions.unmuteChannel(currentUserId, channel.id);\r\n            return;\r\n        }\r\n        actions.muteChannel(currentUserId, channel.id);\r\n    };\r\n\r\n    const addPeople = () => {\r\n        if (channel.type === Constants.GM_CHANNEL) {\r\n            return actions.openModal({\r\n                modalId: ModalIdentifiers.CREATE_DM_CHANNEL,\r\n                dialogType: MoreDirectChannels,\r\n                dialogProps: {isExistingChannel: true, focusOriginElement: 'channelInfoRHSAddPeopleButton'},\r\n            });\r\n        }\r\n\r\n        return actions.openModal({\r\n            modalId: ModalIdentifiers.CHANNEL_INVITE,\r\n            dialogType: ChannelInviteModal,\r\n            dialogProps: {channel},\r\n        });\r\n    };\r\n\r\n    const editChannelPurpose = () => actions.openModal({\r\n        modalId: ModalIdentifiers.EDIT_CHANNEL_PURPOSE,\r\n        dialogType: EditChannelPurposeModal,\r\n        dialogProps: {channel},\r\n    });\r\n\r\n    const editChannelHeader = () => actions.openModal({\r\n        modalId: ModalIdentifiers.EDIT_CHANNEL_HEADER,\r\n        dialogType: EditChannelHeaderModal,\r\n        dialogProps: {channel},\r\n    });\r\n\r\n    const openNotificationSettings = () => actions.openModal({\r\n        modalId: ModalIdentifiers.CHANNEL_NOTIFICATIONS,\r\n        dialogType: ChannelNotificationsModal,\r\n        dialogProps: {channel, currentUser, focusOriginElement: 'channelInfoRHSNotificationSettings'},\r\n    });\r\n\r\n    const gmUsers = channelMembers.filter((user) => {\r\n        return user.id !== currentUser.id;\r\n    });\r\n\r\n    const canEditChannelProperties = !isArchived && canManageProperties;\r\n\r\n    return (\r\n        <div\r\n            id='rhsContainer'\r\n            className='sidebar-right__body'\r\n        >\r\n            <Header\r\n                channel={channel}\r\n                isArchived={isArchived}\r\n                isMobile={isMobile}\r\n                onClose={actions.closeRightHandSide}\r\n            />\r\n            <TopButtons\r\n                channelType={channel.type}\r\n                channelURL={channelURL}\r\n                isFavorite={isFavorite}\r\n                isMuted={isMuted}\r\n                isInvitingPeople={isInvitingPeople}\r\n                canAddPeople={canManageMembers}\r\n                actions={{toggleFavorite, toggleMute, addPeople}}\r\n            />\r\n            <AboutArea\r\n                channel={channel}\r\n                dmUser={dmUser}\r\n                gmUsers={gmUsers}\r\n                canEditChannelProperties={canEditChannelProperties}\r\n                actions={{\r\n                    editChannelHeader,\r\n                    editChannelPurpose,\r\n                }}\r\n            />\r\n            <Divider/>\r\n            <Menu\r\n                channel={channel}\r\n                channelStats={channelStats}\r\n                isArchived={isArchived}\r\n                actions={{\r\n                    openNotificationSettings,\r\n                    showChannelFiles: actions.showChannelFiles,\r\n                    showPinnedPosts: actions.showPinnedPosts,\r\n                    showChannelMembers: actions.showChannelMembers,\r\n                    getChannelStats: actions.getChannelStats,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(ChannelInfoRhs);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {AnyAction, Dispatch} from 'redux';\r\n\r\nimport {unfavoriteChannel, favoriteChannel, getChannelStats} from 'mattermost-redux/actions/channels';\r\nimport {Permissions} from 'mattermost-redux/constants';\r\nimport {getCurrentChannel, isCurrentChannelFavorite, isCurrentChannelMuted, isCurrentChannelArchived, getCurrentChannelStats} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/common';\r\nimport {haveIChannelPermission} from 'mattermost-redux/selectors/entities/roles';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\nimport {getProfilesInCurrentChannel, getStatusForUserId, getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {isGuest} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {muteChannel, unmuteChannel} from 'actions/channel_actions';\r\nimport {openModal} from 'actions/views/modals';\r\nimport {closeRightHandSide, showChannelFiles, showChannelMembers, showPinnedPosts} from 'actions/views/rhs';\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\nimport {isModalOpen} from 'selectors/views/modals';\r\n\r\nimport {Constants, ModalIdentifiers} from 'utils/constants';\r\nimport {getDisplayNameByUser, getUserIdFromChannelId} from 'utils/utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RHS from './channel_info_rhs';\r\nimport type {Props} from './channel_info_rhs';\r\n\r\nconst EMPTY_CHANNEL_STATS = {\r\n    member_count: 0,\r\n    guest_count: 0,\r\n    pinnedpost_count: 0,\r\n    files_count: 0,\r\n};\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const channel = getCurrentChannel(state);\r\n    const currentUser = getCurrentUser(state);\r\n    const currentTeam = getCurrentTeam(state);\r\n    const channelStats = getCurrentChannelStats(state) || EMPTY_CHANNEL_STATS;\r\n    const isArchived = isCurrentChannelArchived(state);\r\n    const isFavorite = isCurrentChannelFavorite(state);\r\n    const isMuted = isCurrentChannelMuted(state);\r\n    const isInvitingPeople = isModalOpen(state, ModalIdentifiers.CHANNEL_INVITE) || isModalOpen(state, ModalIdentifiers.CREATE_DM_CHANNEL);\r\n    const isMobile = getIsMobileView(state);\r\n\r\n    const isPrivate = channel?.type === Constants.PRIVATE_CHANNEL;\r\n    const canManageMembers = haveIChannelPermission(state, currentTeam?.id, channel?.id, isPrivate ? Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS : Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS);\r\n    const canManageProperties = haveIChannelPermission(state, currentTeam?.id, channel?.id, isPrivate ? Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES : Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES);\r\n\r\n    const channelMembers = getProfilesInCurrentChannel(state);\r\n\r\n    const props = {\r\n        channel,\r\n        currentUser,\r\n        currentTeam,\r\n        isArchived,\r\n        isFavorite,\r\n        isMuted,\r\n        isInvitingPeople,\r\n        isMobile,\r\n        canManageMembers,\r\n        canManageProperties,\r\n        channelStats,\r\n        channelMembers,\r\n    } as Props;\r\n\r\n    if (channel?.type === Constants.DM_CHANNEL) {\r\n        const user = getUser(state, getUserIdFromChannelId(channel.name, currentUser.id));\r\n        props.dmUser = {\r\n            user,\r\n            display_name: getDisplayNameByUser(state, user),\r\n            is_guest: isGuest(user.roles),\r\n            status: getStatusForUserId(state, user.id),\r\n        };\r\n    }\r\n\r\n    return props;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            closeRightHandSide,\r\n            unfavoriteChannel,\r\n            favoriteChannel,\r\n            unmuteChannel,\r\n            muteChannel,\r\n            openModal,\r\n            showChannelFiles,\r\n            showPinnedPosts,\r\n            showChannelMembers,\r\n            getChannelStats,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RHS);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\nconst Title = styled.div`\r\n    flex:1;\r\n    font-family: 'Open Sans', sans-serif;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n    button + button {\r\n        margin-left: 8px;\r\n    }\r\n`;\r\n\r\nconst Button = styled.button`\r\n    border: none;\r\n    background: transparent;\r\n    width: fit-content;\r\n    padding: 8px 16px;\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n    line-height: 16px;\r\n    &.add-members, &.manage-members-done {\r\n        background-color: var(--button-bg);\r\n        color: var(--button-color);\r\n        &:hover, &:active, &:focus {\r\n            background: linear-gradient(0deg, rgba(var(--center-channel-color-rgb), 0.16), rgba(var(--center-channel-color-rgb), 0.16)), var(--button-bg);\r\n            color: var(--button-color);\r\n        }\r\n    }\r\n    &.manage-members {\r\n        background: rgba(var(--button-bg-rgb),0.08);\r\n        color: var(--button-bg);\r\n        &:hover, &:focus {\r\n            background: rgba(var(--button-bg-rgb),0.12);\r\n        }\r\n        &:active {\r\n            background: rgba(var(--button-bg-rgb),0.16);\r\n        }\r\n    }\r\n`;\r\n\r\nconst ButtonIcon = styled.i`\r\n    font-size: 14.4px;\r\n`;\r\n\r\nexport interface Props {\r\n    className?: string;\r\n    channelType: string;\r\n    membersCount: number;\r\n    canManageMembers: boolean;\r\n    editing: boolean;\r\n    actions: {\r\n        startEditing: () => void;\r\n        stopEditing: () => void;\r\n        inviteMembers: () => void;\r\n    };\r\n}\r\n\r\nconst ActionBar = ({className, channelType, membersCount, canManageMembers, editing, actions}: Props) => {\r\n    const showManageButton = channelType !== Constants.GM_CHANNEL && membersCount > 1;\r\n\r\n    const handleShortcut = useCallback((e) => {\r\n        if (isKeyPressed(e, Constants.KeyCodes.ESCAPE) && editing) {\r\n            actions.stopEditing();\r\n        }\r\n    }, [editing, actions]);\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', handleShortcut);\r\n        return () => {\r\n            document.removeEventListener('keydown', handleShortcut);\r\n        };\r\n    }, [handleShortcut]);\r\n\r\n    return (\r\n        <div className={className}>\r\n            <Title>\r\n                {editing ? (\r\n                    <FormattedMessage\r\n                        id='channel_members_rhs.action_bar.managing_title'\r\n                        defaultMessage='Managing Members'\r\n                    />\r\n                ) : (\r\n                    <FormattedMessage\r\n                        id='channel_members_rhs.action_bar.members_count_title'\r\n                        defaultMessage='{members_count} members'\r\n                        values={{members_count: membersCount}}\r\n                    />\r\n                )}\r\n\r\n            </Title>\r\n\r\n            {canManageMembers && (\r\n                <Actions>\r\n                    {editing ? (\r\n                        <Button\r\n                            onClick={actions.stopEditing}\r\n                            className='manage-members-done'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='channel_members_rhs.action_bar.done_button'\r\n                                defaultMessage='Done'\r\n                            />\r\n                        </Button>\r\n                    ) : (\r\n                        <>\r\n                            {showManageButton && (\r\n                                <Button\r\n                                    className='manage-members'\r\n                                    onClick={actions.startEditing}\r\n                                >\r\n                                    <FormattedMessage\r\n                                        id='channel_members_rhs.action_bar.manage_button'\r\n                                        defaultMessage='Manage'\r\n                                    />\r\n                                </Button>\r\n                            )}\r\n                            <Button\r\n                                onClick={actions.inviteMembers}\r\n                                className='add-members'\r\n                            >\r\n                                <ButtonIcon\r\n                                    className='icon-account-plus-outline'\r\n                                    title='Add Icon'\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='channel_members_rhs.action_bar.add_button'\r\n                                    defaultMessage='Add'\r\n                                />\r\n                            </Button>\r\n                        </>\r\n                    )}\r\n\r\n                </Actions>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default styled(ActionBar)`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    padding: 16px 20px;\r\n`;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\ninterface Props {\r\n    channel: Channel;\r\n    canGoBack: boolean;\r\n\r\n    onClose: () => void;\r\n    goBack: () => void;\r\n}\r\n\r\nconst HeaderTitle = styled.span`\r\n    line-height: 2.4rem;\r\n`;\r\n\r\nconst Header = ({channel, canGoBack, onClose, goBack}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    return (\r\n        <div className='sidebar--right__header'>\r\n            <span className='sidebar--right__title'>\r\n\r\n                {canGoBack && (\r\n                    <button\r\n                        className='sidebar--right__back btn btn-icon btn-sm'\r\n                        onClick={goBack}\r\n                        aria-label={formatMessage({id: 'rhs_header.back.icon', defaultMessage: 'Back Icon'})}\r\n                    >\r\n                        <i\r\n                            className='icon icon-arrow-back-ios'\r\n                        />\r\n                    </button>\r\n                )}\r\n                <h2>\r\n                    <HeaderTitle\r\n                        id='rhsPanelTitle'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='channel_members_rhs.header.title'\r\n                            defaultMessage='Members'\r\n                        />\r\n                    </HeaderTitle>\r\n\r\n                    {channel.display_name &&\r\n                    <span\r\n                        className='style--none sidebar--right__title__subtitle'\r\n                    >\r\n                        {channel.display_name}\r\n                    </span>\r\n                    }\r\n                </h2>\r\n            </span>\r\n\r\n            <WithTooltip\r\n                title={\r\n                    <FormattedMessage\r\n                        id='rhs_header.closeSidebarTooltip'\r\n                        defaultMessage='Close'\r\n                    />\r\n                }\r\n            >\r\n                <button\r\n                    id='rhsCloseButton'\r\n                    type='button'\r\n                    className='sidebar--right__close btn btn-icon btn-sm'\r\n                    aria-label={formatMessage({id: 'rhs_header.closeTooltip.icon', defaultMessage: 'Close Sidebar Icon'})}\r\n                    onClick={onClose}\r\n                >\r\n                    <i\r\n                        className='icon icon-close'\r\n                    />\r\n                </button>\r\n            </WithTooltip>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport styled from 'styled-components';\r\n\r\nimport Input from 'components/widgets/inputs/input/input';\r\n\r\ninterface Props {\r\n    className?: string;\r\n    terms: string;\r\n    onInput: (terms: string) => void;\r\n}\r\n\r\nconst SearchBar = ({className, terms, onInput}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    let inputSuffix;\r\n    if (terms.length > 0) {\r\n        inputSuffix = (\r\n            <button\r\n                className='style--none'\r\n                onClick={() => onInput('')}\r\n                aria-label={formatMessage({\r\n                    id: 'channel_members_rhs.search_bar.aria.cancel_search_button',\r\n                    defaultMessage: 'cancel members search',\r\n                })}\r\n            >\r\n                <i className={'icon icon-close-circle'}/>\r\n            </button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={className}>\r\n            <Input\r\n                data-testid='channel-member-rhs-search'\r\n                value={terms}\r\n                onInput={(e) => onInput(e.currentTarget.value)}\r\n                inputPrefix={<i className={'icon icon-magnify'}/>}\r\n                inputSuffix={inputSuffix}\r\n                placeholder={formatMessage({\r\n                    id: 'channel_members_rhs.search_bar.placeholder',\r\n                    defaultMessage: 'Search members',\r\n                })}\r\n                useLegend={false}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default styled(SearchBar)`\r\n    display: flex;\r\n    padding: 0px 20px 12px;\r\n\r\n    .Input_container .Input_wrapper {\r\n        padding: 0 8px;\r\n    }\r\n`;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport debounce from 'lodash/debounce';\r\nimport React, {useCallback, useEffect, useState} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {ProfilesInChannelSortBy} from 'mattermost-redux/actions/users';\r\n\r\nimport AlertBanner from 'components/alert_banner';\r\nimport ChannelInviteModal from 'components/channel_invite_modal';\r\nimport useAccessControlAttributes, {EntityType} from 'components/common/hooks/useAccessControlAttributes';\r\nimport ExternalLink from 'components/external_link';\r\nimport MoreDirectChannels from 'components/more_direct_channels';\r\nimport AlertTag from 'components/widgets/tag/alert_tag';\r\nimport TagGroup from 'components/widgets/tag/tag_group';\r\n\r\nimport Constants, {ModalIdentifiers} from 'utils/constants';\r\n\r\nimport type {ModalData} from 'types/actions';\r\n\r\nimport ActionBar from './action_bar';\r\nimport Header from './header';\r\nimport MemberList, {ListItemType} from './member_list';\r\nimport type {ChannelMember, ListItem} from './member_list';\r\nimport SearchBar from './search';\r\n\r\nimport './channel_members_rhs.scss';\r\n\r\nconst USERS_PER_PAGE = 100;\r\n\r\nexport interface Props {\r\n    channel: Channel;\r\n    currentUserIsChannelAdmin: boolean;\r\n    membersCount: number;\r\n    searchTerms: string;\r\n    canGoBack: boolean;\r\n    teamUrl: string;\r\n    channelMembers: ChannelMember[];\r\n    canManageMembers: boolean;\r\n    editing: boolean;\r\n\r\n    actions: {\r\n        openModal: <P>(modalData: ModalData<P>) => void;\r\n        openDirectChannelToUserId: (userId: string) => Promise<{data: Channel}>;\r\n        closeRightHandSide: () => void;\r\n        goBack: () => void;\r\n        setChannelMembersRhsSearchTerm: (terms: string) => void;\r\n        loadProfilesAndReloadChannelMembers: (page: number, perParge: number, channelId: string, sort: string) => void;\r\n        loadMyChannelMemberAndRole: (channelId: string) => void;\r\n        setEditChannelMembers: (active: boolean) => void;\r\n        searchProfilesAndChannelMembers: (term: string, options: any) => Promise<{data: UserProfile[]}>;\r\n        fetchRemoteClusterInfo: (remoteId: string, forceRefresh?: boolean) => void;\r\n    };\r\n}\r\n\r\nexport default function ChannelMembersRHS({\r\n    channel,\r\n    currentUserIsChannelAdmin,\r\n    searchTerms,\r\n    membersCount,\r\n    canGoBack,\r\n    teamUrl,\r\n    channelMembers,\r\n    canManageMembers,\r\n    editing = false,\r\n    actions,\r\n}: Props) {\r\n    const history = useHistory();\r\n\r\n    const [list, setList] = useState<ListItem[]>([]);\r\n\r\n    const [page, setPage] = useState(0);\r\n    const [isNextPageLoading, setIsNextPageLoading] = useState(false);\r\n    const {formatMessage} = useIntl();\r\n\r\n    const {structuredAttributes, loading} = useAccessControlAttributes(\r\n        EntityType.Channel,\r\n        channel.id,\r\n        channel.policy_enforced,\r\n    );\r\n\r\n    // Helper function to format attribute names for tooltips\r\n    const formatAttributeName = (name: string): string => {\r\n        // Convert snake_case or camelCase to Title Case with spaces\r\n        return name.\r\n            replace(/_/g, ' ').\r\n            replace(/([A-Z])/g, ' $1').\r\n            replace(/\\w\\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substring(1).toLowerCase());\r\n    };\r\n\r\n    const searching = searchTerms !== '';\r\n\r\n    const isDefaultChannel = channel.name === Constants.DEFAULT_CHANNEL;\r\n\r\n    // show search if there's more than 20 or if the user have an active search.\r\n    const showSearch = searching || membersCount >= 20;\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            actions.setChannelMembersRhsSearchTerm('');\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const listcp: ListItem[] = [];\r\n        let memberDone = false;\r\n\r\n        for (let i = 0; i < channelMembers.length; i++) {\r\n            const member = channelMembers[i];\r\n            if (listcp.length === 0) {\r\n                let text = null;\r\n                if (member.membership?.scheme_admin === true) {\r\n                    text = (\r\n                        <FormattedMessage\r\n                            id='channel_members_rhs.list.channel_admin_title'\r\n                            defaultMessage='CHANNEL ADMINS'\r\n                        />\r\n                    );\r\n                } else {\r\n                    text = (\r\n                        <FormattedMessage\r\n                            id='channel_members_rhs.list.channel_members_title'\r\n                            defaultMessage='MEMBERS'\r\n                        />\r\n                    );\r\n                    memberDone = true;\r\n                }\r\n\r\n                listcp.push({\r\n                    type: ListItemType.FirstSeparator,\r\n                    data: <div className='channel-members-rhs__member-list-separator channel-members-rhs__member-list-separator--first'>{text}</div>,\r\n                });\r\n            } else if (!memberDone && member.membership?.scheme_admin === false) {\r\n                listcp.push({\r\n                    type: ListItemType.Separator,\r\n                    data: <div className='channel-members-rhs__member-list-separator'>\r\n                        <FormattedMessage\r\n                            id='channel_members_rhs.list.channel_members_title'\r\n                            defaultMessage='MEMBERS'\r\n                        />\r\n                    </div>,\r\n                });\r\n                memberDone = true;\r\n            }\r\n\r\n            listcp.push({type: ListItemType.Member, data: member});\r\n        }\r\n        if (JSON.stringify(list) !== JSON.stringify(listcp)) {\r\n            setList(listcp);\r\n        }\r\n    }, [channelMembers]);\r\n\r\n    useEffect(() => {\r\n        if (channel.type === Constants.DM_CHANNEL) {\r\n            let rhsAction = actions.closeRightHandSide;\r\n            if (canGoBack) {\r\n                rhsAction = actions.goBack;\r\n            }\r\n            rhsAction();\r\n            return;\r\n        }\r\n\r\n        setPage(0);\r\n        setIsNextPageLoading(false);\r\n        actions.setChannelMembersRhsSearchTerm('');\r\n        actions.loadProfilesAndReloadChannelMembers(0, USERS_PER_PAGE, channel.id, ProfilesInChannelSortBy.Admin);\r\n        actions.loadMyChannelMemberAndRole(channel.id);\r\n    }, [channel.id, channel.type]);\r\n\r\n    const setSearchTerms = async (terms: string) => {\r\n        actions.setChannelMembersRhsSearchTerm(terms);\r\n    };\r\n\r\n    const doSearch = useCallback(debounce(async (terms: string) => {\r\n        await actions.searchProfilesAndChannelMembers(terms, {in_team_id: channel.team_id, in_channel_id: channel.id});\r\n    }, Constants.SEARCH_TIMEOUT_MILLISECONDS), [actions.searchProfilesAndChannelMembers]);\r\n\r\n    useEffect(() => {\r\n        if (searchTerms) {\r\n            doSearch(searchTerms);\r\n        }\r\n    }, [searchTerms]);\r\n\r\n    const inviteMembers = () => {\r\n        if (channel.type === Constants.GM_CHANNEL) {\r\n            return actions.openModal({\r\n                modalId: ModalIdentifiers.CREATE_DM_CHANNEL,\r\n                dialogType: MoreDirectChannels,\r\n                dialogProps: {isExistingChannel: true, focusOriginElement: 'channelInfoRHSAddPeopleButton'},\r\n            });\r\n        }\r\n\r\n        return actions.openModal({\r\n            modalId: ModalIdentifiers.CHANNEL_INVITE,\r\n            dialogType: ChannelInviteModal,\r\n            dialogProps: {channel},\r\n        });\r\n    };\r\n\r\n    const openDirectMessage = useCallback(async (user: UserProfile) => {\r\n        // we first prepare the DM channel...\r\n        await actions.openDirectChannelToUserId(user.id);\r\n\r\n        // ... and then redirect to it\r\n        history.push(teamUrl + '/messages/@' + user.username);\r\n\r\n        await actions.closeRightHandSide();\r\n    }, [actions.openDirectChannelToUserId, history, teamUrl, actions.closeRightHandSide]);\r\n\r\n    const loadMore = useCallback(async () => {\r\n        setIsNextPageLoading(true);\r\n\r\n        await actions.loadProfilesAndReloadChannelMembers(page + 1, USERS_PER_PAGE, channel.id, ProfilesInChannelSortBy.Admin);\r\n        setPage(page + 1);\r\n\r\n        setIsNextPageLoading(false);\r\n    }, [actions.loadProfilesAndReloadChannelMembers, page, channel.id],\r\n    );\r\n\r\n    return (\r\n        <div\r\n            id='rhsContainer'\r\n            className='sidebar-right__body channel-members-rhs'\r\n        >\r\n\r\n            <Header\r\n                channel={channel}\r\n                canGoBack={canGoBack}\r\n                onClose={actions.closeRightHandSide}\r\n                goBack={actions.goBack}\r\n            />\r\n            {/* Show banner for policy-enforced channels */}\r\n            {channel.policy_enforced && (\r\n                <div className='channel-members-rhs__alert-container policy-enforced'>\r\n                    <AlertBanner\r\n                        mode='info'\r\n                        variant='app'\r\n                        title={formatMessage({\r\n                            id: 'channel_members_rhs.policy_enforced_restrictions',\r\n                            defaultMessage: 'Channel access is restricted by user attributes',\r\n                        })}\r\n                    >\r\n                        {structuredAttributes.length > 0 && (\r\n                            <TagGroup>\r\n                                {structuredAttributes.flatMap((attribute) =>\r\n                                    attribute.values.map((value) => (\r\n                                        <AlertTag\r\n                                            key={`${attribute.name}-${value}`}\r\n                                            tooltipTitle={formatAttributeName(attribute.name)}\r\n                                            text={value}\r\n                                        />\r\n                                    )),\r\n                                )}\r\n                            </TagGroup>\r\n                        )}\r\n                        {loading && <span className='loading-indicator'>{'Loading...'}</span>}\r\n                    </AlertBanner>\r\n                </div>\r\n            )}\r\n\r\n            <ActionBar\r\n                channelType={channel.type}\r\n                membersCount={membersCount}\r\n                canManageMembers={canManageMembers}\r\n                editing={editing}\r\n                actions={{\r\n                    startEditing: () => actions.setEditChannelMembers(true),\r\n                    stopEditing: () => actions.setEditChannelMembers(false),\r\n                    inviteMembers,\r\n                }}\r\n            />\r\n\r\n            {/* Users with user management permissions have special restrictions in the default channel */}\r\n            {(editing && isDefaultChannel && !currentUserIsChannelAdmin) && (\r\n                <div className='channel-members-rhs__alert-container'>\r\n                    <AlertBanner\r\n                        mode='info'\r\n                        variant='app'\r\n                        message={formatMessage({\r\n                            id: 'channel_members_rhs.default_channel_moderation_restrictions',\r\n                            defaultMessage: 'In this channel, you can only remove guests. Only <link>channel admins</link> can manage other members.',\r\n                        }, {\r\n                            link: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='https://docs.mattermost.com/welcome/about-user-roles.html#channel-admin'\r\n                                    location='channel_members_rhs'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        })}\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {showSearch && (\r\n                <SearchBar\r\n                    terms={searchTerms}\r\n                    onInput={setSearchTerms}\r\n                />\r\n            )}\r\n\r\n            <div className='channel-members-rhs__members-container'>\r\n                {channelMembers.length > 0 && (\r\n                    <MemberList\r\n                        searchTerms={searchTerms}\r\n                        members={list}\r\n                        editing={editing}\r\n                        channel={channel}\r\n                        openDirectMessage={openDirectMessage}\r\n                        fetchRemoteClusterInfo={actions.fetchRemoteClusterInfo}\r\n                        loadMore={loadMore}\r\n                        hasNextPage={channelMembers.length < membersCount}\r\n                        isNextPageLoading={isNextPageLoading}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {AnyAction, Dispatch} from 'redux';\r\n\r\nimport type {Channel, ChannelMembership} from '@mattermost/types/channels';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport {loadMyChannelMemberAndRole} from 'mattermost-redux/actions/channels';\r\nimport {fetchRemoteClusterInfo} from 'mattermost-redux/actions/shared_channels';\r\nimport {Permissions} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {\r\n    getCurrentChannel,\r\n    getCurrentChannelStats,\r\n    getMembersInCurrentChannel,\r\n    getMyCurrentChannelMembership,\r\n    isCurrentChannelArchived,\r\n} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getTeammateNameDisplaySetting} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {haveIChannelPermission} from 'mattermost-redux/selectors/entities/roles';\r\nimport {getRemoteDisplayName} from 'mattermost-redux/selectors/entities/shared_channels';\r\nimport {getCurrentRelativeTeamUrl, getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\nimport {\r\n    getActiveProfilesInCurrentChannelWithoutSorting,\r\n    getUserStatuses, searchActiveProfilesInCurrentChannel,\r\n} from 'mattermost-redux/selectors/entities/users';\r\nimport {displayUsername} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {openDirectChannelToUserId} from 'actions/channel_actions';\r\nimport {loadProfilesAndReloadChannelMembers, searchProfilesAndChannelMembers} from 'actions/user_actions';\r\nimport {openModal} from 'actions/views/modals';\r\nimport {closeRightHandSide, goBack, setEditChannelMembers} from 'actions/views/rhs';\r\nimport {setChannelMembersRhsSearchTerm} from 'actions/views/search';\r\nimport {getIsEditingMembers, getPreviousRhsState} from 'selectors/rhs';\r\n\r\nimport {Constants, RHSStates} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ChannelMembersRHS from './channel_members_rhs';\r\nimport type {Props} from './channel_members_rhs';\r\nimport type {ChannelMember} from './member_list';\r\n\r\nconst buildProfileList = (\r\n    profilesInCurrentChannel: UserProfile[],\r\n    userStatuses: RelationOneToOne<UserProfile, string>,\r\n    teammateNameDisplaySetting: string,\r\n    membersInCurrentChannel: Record<string, ChannelMembership>,\r\n    state: GlobalState,\r\n) => {\r\n    const channelMembers: ChannelMember[] = [];\r\n    profilesInCurrentChannel.forEach((profile) => {\r\n        if (!membersInCurrentChannel[profile.id]) {\r\n            return;\r\n        }\r\n\r\n        const remoteDisplayName = profile.remote_id ? getRemoteDisplayName(state, profile.remote_id) || undefined : undefined;\r\n\r\n        channelMembers.push({\r\n            user: profile,\r\n            membership: membersInCurrentChannel[profile.id],\r\n            status: userStatuses[profile.id],\r\n            displayName: displayUsername(profile, teammateNameDisplaySetting),\r\n            remoteDisplayName,\r\n        });\r\n    });\r\n\r\n    channelMembers.sort((a, b) => {\r\n        if (a.membership?.scheme_admin === b.membership?.scheme_admin) {\r\n            return a.displayName.localeCompare(b.displayName);\r\n        }\r\n\r\n        if (a.membership?.scheme_admin === true) {\r\n            return -1;\r\n        }\r\n        return 1;\r\n    });\r\n\r\n    return channelMembers;\r\n};\r\n\r\nconst getProfiles = createSelector(\r\n    'getProfiles',\r\n    getActiveProfilesInCurrentChannelWithoutSorting,\r\n    getUserStatuses,\r\n    getTeammateNameDisplaySetting,\r\n    getMembersInCurrentChannel,\r\n    (state: GlobalState) => state,\r\n    buildProfileList,\r\n);\r\n\r\nconst searchProfiles = createSelector(\r\n    'searchProfiles',\r\n    (state: GlobalState, search: string) => searchActiveProfilesInCurrentChannel(state, search, false),\r\n    getUserStatuses,\r\n    getTeammateNameDisplaySetting,\r\n    getMembersInCurrentChannel,\r\n    (state: GlobalState) => state,\r\n    buildProfileList,\r\n);\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const channel = getCurrentChannel(state);\r\n    const currentTeam = getCurrentTeam(state);\r\n    const currentUser = getMyCurrentChannelMembership(state);\r\n    const {member_count: membersCount} = getCurrentChannelStats(state) || {member_count: 0};\r\n\r\n    if (!channel) {\r\n        return {\r\n            channel: {} as Channel,\r\n            currentUserIsChannelAdmin: false,\r\n            channelMembers: [],\r\n            channelAdmins: [],\r\n            searchTerms: '',\r\n            membersCount,\r\n            canManageMembers: false,\r\n            canGoBack: false,\r\n            teamUrl: '',\r\n        } as unknown as Props;\r\n    }\r\n\r\n    const isArchived = isCurrentChannelArchived(state);\r\n    const isPrivate = channel.type === Constants.PRIVATE_CHANNEL;\r\n    const canManageMembers = haveIChannelPermission(\r\n        state,\r\n        currentTeam?.id,\r\n        channel.id,\r\n        isPrivate ? Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS : Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n    ) && !isArchived;\r\n\r\n    const searchTerms = state.views.search.channelMembersRhsSearch || '';\r\n\r\n    let channelMembers: ChannelMember[] = [];\r\n    if (searchTerms === '') {\r\n        channelMembers = getProfiles(state);\r\n    } else {\r\n        channelMembers = searchProfiles(state, searchTerms.trim());\r\n    }\r\n\r\n    const teamUrl = getCurrentRelativeTeamUrl(state);\r\n    const prevRhsState = getPreviousRhsState(state);\r\n    const hasInfoPrevState = prevRhsState === RHSStates.CHANNEL_INFO ||\r\n        prevRhsState === RHSStates.CHANNEL_FILES ||\r\n        prevRhsState === RHSStates.PIN;\r\n\r\n    const canGoBack = Boolean(hasInfoPrevState);\r\n    const editing = getIsEditingMembers(state);\r\n\r\n    const currentUserIsChannelAdmin = currentUser && currentUser.scheme_admin;\r\n\r\n    return {\r\n        channel,\r\n        currentUserIsChannelAdmin,\r\n        membersCount,\r\n        searchTerms,\r\n        teamUrl,\r\n        canGoBack,\r\n        canManageMembers,\r\n        channelMembers,\r\n        editing,\r\n    } as Props;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            openModal,\r\n            openDirectChannelToUserId,\r\n            closeRightHandSide,\r\n            goBack,\r\n            setChannelMembersRhsSearchTerm,\r\n            loadProfilesAndReloadChannelMembers,\r\n            loadMyChannelMemberAndRole,\r\n            setEditChannelMembers,\r\n            searchProfilesAndChannelMembers,\r\n            fetchRemoteClusterInfo,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChannelMembersRHS);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport KeyboardShortcutSequence, {KEYBOARD_SHORTCUTS} from 'components/keyboard_shortcuts/keyboard_shortcuts_sequence';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nexport interface Props extends PropsFromRedux {\r\n    children: React.ReactNode;\r\n}\r\n\r\nfunction SearchResultsHeader(props: Props) {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const showExpand = props.previousRhsState !== RHSStates.CHANNEL_INFO;\r\n\r\n    // sidebarTooltipContent contains tooltips content for expand or shrink sidebarTooltip.\r\n    // if props.isExpanded is true, defaultMessage would feed from 'shrinkTooltip', else 'expandTooltip'\r\n    const sidebarTooltipContent = props.isExpanded ? (\r\n        <>\r\n            <FormattedMessage\r\n                id='rhs_header.collapseSidebarTooltip'\r\n                defaultMessage='Collapse the right sidebar'\r\n            />\r\n            <KeyboardShortcutSequence\r\n                shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                hideDescription={true}\r\n                isInsideTooltip={true}\r\n            />\r\n        </>\r\n    ) : (\r\n        <>\r\n            <FormattedMessage\r\n                id='rhs_header.expandSidebarTooltip'\r\n                defaultMessage='Expand the right sidebar'\r\n            />\r\n            <KeyboardShortcutSequence\r\n                shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                hideDescription={true}\r\n                isInsideTooltip={true}\r\n            />\r\n        </>\r\n    );\r\n\r\n    const expandOrCollapseSidebarButtonAriaLabel = props.isExpanded ? formatMessage({id: 'rhs_header.collapseSidebarTooltip.icon', defaultMessage: 'Collapse Sidebar Icon'}) : formatMessage({id: 'rhs_header.expandSidebarTooltip.icon', defaultMessage: 'Expand Sidebar Icon'});\r\n\r\n    return (\r\n        <div className='sidebar--right__header'>\r\n            <span\r\n                className='sidebar--right__title'\r\n                id='rhsPanelTitle'\r\n            >\r\n                {props.canGoBack && (\r\n                    <button\r\n                        className='sidebar--right__back btn btn-icon btn-sm'\r\n                        onClick={props.actions.goBack}\r\n                        aria-label={formatMessage({id: 'rhs_header.back.icon', defaultMessage: 'Back Icon'})}\r\n                    >\r\n                        <i className='icon icon-arrow-back-ios'/>\r\n                    </button>\r\n                )}\r\n                {props.children}\r\n            </span>\r\n            <div className='pull-right'>\r\n                {showExpand && (\r\n                    <WithTooltip\r\n                        title={sidebarTooltipContent}\r\n                    >\r\n                        <button\r\n                            type='button'\r\n                            className='sidebar--right__expand btn btn-icon btn-sm'\r\n                            onClick={props.actions.toggleRhsExpanded}\r\n                            aria-label={expandOrCollapseSidebarButtonAriaLabel}\r\n                        >\r\n                            <i\r\n                                className='icon icon-arrow-expand'\r\n                                aria-hidden='true'\r\n                            />\r\n                            <i\r\n                                className='icon icon-arrow-collapse'\r\n                                aria-hidden='true'\r\n                            />\r\n                        </button>\r\n                    </WithTooltip>\r\n                )}\r\n                <WithTooltip\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='rhs_header.closeSidebarTooltip'\r\n                            defaultMessage='Close'\r\n                        />\r\n                    }\r\n                >\r\n                    <button\r\n                        id='searchResultsCloseButton'\r\n                        type='button'\r\n                        className='sidebar--right__close btn btn-icon btn-sm'\r\n                        aria-label='Close'\r\n                        onClick={props.actions.closeRightHandSide}\r\n                    >\r\n                        <i\r\n                            className='icon icon-close'\r\n                            aria-label={formatMessage({id: 'rhs_header.closeTooltip.icon', defaultMessage: 'Close Sidebar Icon'})}\r\n                        />\r\n                    </button>\r\n                </WithTooltip>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchResultsHeader;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {AnyAction, Dispatch} from 'redux';\r\n\r\nimport {getCurrentChannelId} from 'mattermost-redux/selectors/entities/common';\r\n\r\nimport {\r\n    closeRightHandSide,\r\n    toggleRhsExpanded,\r\n    goBack,\r\n} from 'actions/views/rhs';\r\nimport {getIsRhsExpanded, getPreviousRhsState} from 'selectors/rhs';\r\n\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store/index.js';\r\n\r\nimport SearchResultsHeader from './search_results_header';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const previousRhsState = getPreviousRhsState(state);\r\n    const canGoBack = previousRhsState === RHSStates.CHANNEL_INFO ||\r\n        previousRhsState === RHSStates.CHANNEL_MEMBERS ||\r\n        previousRhsState === RHSStates.CHANNEL_FILES ||\r\n        previousRhsState === RHSStates.PIN;\r\n\r\n    return {\r\n        isExpanded: getIsRhsExpanded(state),\r\n        channelId: getCurrentChannelId(state),\r\n        previousRhsState,\r\n        canGoBack,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            closeRightHandSide,\r\n            toggleRhsExpanded,\r\n            goBack,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(SearchResultsHeader);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useEffect, useCallback} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {CSSTransition} from 'react-transition-group';\r\n\r\nimport './info_toast.scss';\r\n\r\ntype Props = {\r\n    content: {\r\n        icon?: JSX.Element;\r\n        message: string;\r\n        undo?: () => void;\r\n    };\r\n    className?: string;\r\n    onExited: () => void;\r\n}\r\n\r\nfunction InfoToast({content, onExited, className}: Props): JSX.Element {\r\n    const {formatMessage} = useIntl();\r\n    const closeToast = useCallback(() => {\r\n        onExited();\r\n    }, [onExited]);\r\n\r\n    const undoTodo = useCallback(() => {\r\n        content.undo?.();\r\n        onExited();\r\n    }, [content.undo, onExited]);\r\n\r\n    const toastContainerClassname = classNames('info-toast', className);\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            onExited();\r\n        }, 5000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [onExited]);\r\n\r\n    return (\r\n        <CSSTransition\r\n            in={Boolean(content)}\r\n            classNames='toast'\r\n            mountOnEnter={true}\r\n            unmountOnExit={true}\r\n            timeout={300}\r\n            appear={true}\r\n        >\r\n            <div className={toastContainerClassname}>\r\n                {content.icon}\r\n                <span>{content.message}</span>\r\n                {content.undo && (\r\n                    <button\r\n                        onClick={undoTodo}\r\n                        className='info-toast__undo'\r\n                    >\r\n                        {formatMessage({\r\n                            id: 'post_info.edit.undo',\r\n                            defaultMessage: 'Undo',\r\n                        })}\r\n                    </button>\r\n                )}\r\n                <button\r\n                    className='info-toast__icon_button'\r\n                    onClick={closeToast}\r\n                    aria-label={formatMessage({id: 'general_button.close', defaultMessage: 'Close'})}\r\n                >\r\n                    <i className='icon icon-close'/>\r\n                </button>\r\n            </div>\r\n        </CSSTransition>\r\n    );\r\n}\r\n\r\nexport default React.memo(InfoToast);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo} from 'react';\r\nimport {defineMessages, useIntl} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport FileAttachmentListContainer from 'components/file_attachment_list';\r\nimport PostMessageView from 'components/post_view/post_message_view';\r\n\r\nimport './restore_post_history.scss';\r\n\r\nconst modalMessages = defineMessages({\r\n    title: {\r\n        id: 'post_info.edit.restore',\r\n        defaultMessage: 'Restore this version',\r\n    },\r\n    titleQuestion: {\r\n        id: 'post_info.edit.restore_question',\r\n        defaultMessage: 'Restore this version?',\r\n    },\r\n});\r\n\r\ntype Props = {\r\n    post: Post;\r\n    postHeader: JSX.Element;\r\n    actions: {\r\n        handleRestore: (post: Post) => void;\r\n    };\r\n    onExited: () => void;\r\n}\r\n\r\nconst RestorePostModal = ({post, postHeader, actions, onExited}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n    const onHide = () => onExited();\r\n\r\n    const handleRestore = async () => {\r\n        await actions.handleRestore(post);\r\n        onHide();\r\n    };\r\n\r\n    const modalHeaderText = (\r\n        <div className='edit-post-history__restore__modal__header'>\r\n            {formatMessage(modalMessages.titleQuestion)}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <GenericModal\r\n            compassDesign={true}\r\n            onExited={onHide}\r\n            enforceFocus={false}\r\n            id='restorePostModal'\r\n            aria-labelledby='restorePostModalLabel'\r\n            modalHeaderText={modalHeaderText}\r\n            handleCancel={onHide}\r\n            cancelButtonClassName='cancel-button'\r\n            handleConfirm={handleRestore}\r\n        >\r\n            <div className='edit-post-history__restore__modal__content'>\r\n                {postHeader}\r\n                <PostMessageView\r\n                    post={post}\r\n                    overflowType='ellipsis'\r\n                    maxHeight={100}\r\n                    showPostEditedIndicator={false}\r\n                />\r\n                <FileAttachmentListContainer\r\n                    post={post}\r\n                    isEditHistory={true}\r\n                    disableDownload={true}\r\n                    disableActions={true}\r\n                />\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default memo(RestorePostModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {memo, useCallback, useState} from 'react';\r\nimport {defineMessages, useIntl} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {CheckIcon} from '@mattermost/compass-icons/components';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {getPostEditHistory, restorePostVersion} from 'mattermost-redux/actions/posts';\r\nimport {ensureString} from 'mattermost-redux/utils/post_utils';\r\n\r\nimport {removeDraft} from 'actions/views/drafts';\r\nimport {getConnectionId} from 'selectors/general';\r\n\r\nimport FileAttachmentListContainer from 'components/file_attachment_list';\r\nimport InfoToast from 'components/info_toast/info_toast';\r\nimport PostAriaLabelDiv from 'components/post_view/post_aria_label_div';\r\nimport PostMessageContainer from 'components/post_view/post_message_view';\r\nimport Timestamp, {RelativeRanges} from 'components/timestamp';\r\nimport UserProfileComponent from 'components/user_profile';\r\nimport Avatar from 'components/widgets/users/avatar';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport {ModalIdentifiers, StoragePrefixes} from 'utils/constants';\r\nimport {imageURLForUser} from 'utils/utils';\r\n\r\nimport RestorePostModal from '../restore_post_modal';\r\n\r\nimport './edited_post_items.scss';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nconst DATE_RANGES = [\r\n    RelativeRanges.TODAY_TITLE_CASE,\r\n    RelativeRanges.YESTERDAY_TITLE_CASE,\r\n];\r\n\r\nconst itemMessages = defineMessages({\r\n    helpText: {\r\n        id: 'post_info.edit.restore',\r\n        defaultMessage: 'Restore this version',\r\n    },\r\n    currentVersionText: {\r\n        id: 'post_info.edit.current_version',\r\n        defaultMessage: 'Current Version',\r\n    },\r\n    ariaLabelMessage: {\r\n        id: 'post_info.edit.aria_label',\r\n        defaultMessage: 'Select to restore an old message.',\r\n    },\r\n});\r\n\r\nexport type Props = PropsFromRedux & {\r\n    post: Post;\r\n    isCurrent?: boolean;\r\n}\r\n\r\nconst EditedPostItem = ({post, isCurrent = false, postCurrentVersion, actions}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n    const [open, setOpen] = useState(isCurrent);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const connectionId = useSelector(getConnectionId);\r\n\r\n    const openRestorePostModal = useCallback((e) => {\r\n        // this prevents history item from\r\n        // collapsing and closing when clicking on restore button\r\n        e.stopPropagation();\r\n\r\n        const restorePostModalData = {\r\n            modalId: ModalIdentifiers.RESTORE_POST_MODAL,\r\n            dialogType: RestorePostModal,\r\n            dialogProps: {\r\n                post,\r\n                postHeader,\r\n                actions: {\r\n                    handleRestore,\r\n                },\r\n            },\r\n        };\r\n\r\n        actions.openModal(restorePostModalData);\r\n    }, [actions, post]);\r\n\r\n    const togglePost = () => {\r\n        setOpen((prevState) => !prevState);\r\n    };\r\n\r\n    if (!post) {\r\n        return null;\r\n    }\r\n\r\n    const showInfoTooltip = () => {\r\n        const infoToastModalData = {\r\n            modalId: ModalIdentifiers.INFO_TOAST,\r\n            dialogType: InfoToast,\r\n            dialogProps: {\r\n                content: {\r\n                    icon: <CheckIcon size={18}/>,\r\n                    message: 'Restored Message',\r\n                    undo: handleUndo,\r\n                },\r\n            },\r\n        };\r\n\r\n        actions.openModal(infoToastModalData);\r\n    };\r\n\r\n    const handleRestore = async () => {\r\n        if (!postCurrentVersion || !post) {\r\n            actions.closeRightHandSide();\r\n            return;\r\n        }\r\n\r\n        const result = await dispatch(restorePostVersion(post.original_id, post.id, connectionId));\r\n        if (result.data) {\r\n            actions.closeRightHandSide();\r\n            showInfoTooltip();\r\n        }\r\n\r\n        const key = StoragePrefixes.EDIT_DRAFT + post.original_id;\r\n        dispatch(removeDraft(key, post.channel_id, post.root_id));\r\n    };\r\n\r\n    const handleUndo = async () => {\r\n        if (!postCurrentVersion) {\r\n            actions.closeRightHandSide();\r\n            return;\r\n        }\r\n\r\n        // To undo a recent restore, you need to restore the previous version of the post right before this restore.\r\n        // That would be the first history item in post's edit history as it is the most recent edit\r\n        // and edit history is sorted from most recent first to oldest.\r\n        const result = await dispatch(getPostEditHistory(post.original_id));\r\n        if (!result.data || result.data.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const previousPostVersion = result.data[0];\r\n        await dispatch(restorePostVersion(previousPostVersion.original_id, previousPostVersion.id, connectionId));\r\n    };\r\n\r\n    const currentVersionIndicator = isCurrent ? (\r\n        <div className='edit-post-history__current__indicator'>\r\n            {formatMessage(itemMessages.currentVersionText)}\r\n        </div>\r\n    ) : null;\r\n\r\n    const profileSrc = imageURLForUser(post.user_id);\r\n\r\n    const overwriteName = ensureString(post.props?.override_username);\r\n    const postHeader = (\r\n        <div className='edit-post-history__header'>\r\n            <span className='profile-icon'>\r\n                <Avatar\r\n                    size={'sm'}\r\n                    url={profileSrc}\r\n                    className={'avatar-post-preview'}\r\n                />\r\n            </span>\r\n            <div className={'edit-post-history__header__username'}>\r\n                <UserProfileComponent\r\n                    userId={post.user_id}\r\n                    disablePopover={true}\r\n                    overwriteName={overwriteName}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const message = (\r\n        <PostMessageContainer\r\n            post={post}\r\n            isRHS={true}\r\n            showPostEditedIndicator={false}\r\n        />\r\n    );\r\n\r\n    const isFileDeleted = post.delete_at > 0;\r\n\r\n    const messageContainer = (\r\n        <div className='edit-post-history__content_container'>\r\n            {postHeader}\r\n            <div className='post__content'>\r\n                <div className='search-item-snippet post__body'>\r\n                    {message}\r\n                </div>\r\n            </div>\r\n            <FileAttachmentListContainer\r\n                post={post}\r\n                isEditHistory={isFileDeleted}\r\n                disableDownload={isFileDeleted}\r\n                disableActions={isFileDeleted}\r\n            />\r\n        </div>\r\n    );\r\n\r\n    const restoreButton = isCurrent ? null : (\r\n        <WithTooltip\r\n            title={formatMessage(itemMessages.helpText)}\r\n        >\r\n            <button\r\n                className='edit-post-history__icon__button restore-icon'\r\n                onClick={openRestorePostModal}\r\n                aria-label={formatMessage(itemMessages.ariaLabelMessage)}\r\n            >\r\n                <i className={'icon icon-restore'}/>\r\n            </button>\r\n        </WithTooltip>\r\n    );\r\n\r\n    const postContainerClass = classNames('edit-post-history__container', {'edit-post-history__container__background': open});\r\n    const timeStampValue = post.edit_at === 0 ? post.create_at : post.edit_at;\r\n\r\n    return (\r\n        <div\r\n            className={postContainerClass}\r\n            onClick={togglePost}\r\n        >\r\n            <PostAriaLabelDiv\r\n                className={'a11y__section post'}\r\n                id={'searchResult_' + post.id}\r\n                post={post}\r\n            >\r\n                <div\r\n                    className='edit-post-history__title__container'\r\n                >\r\n                    <div className='edit-post-history__date__badge__container'>\r\n                        <button\r\n                            aria-label='Toggle to see an old message.'\r\n                            className='edit-post-history__icon__button toggleCollapseButton'\r\n                        >\r\n                            <i className={`icon ${open ? 'icon-chevron-down' : 'icon-chevron-right'}`}/>\r\n                        </button>\r\n                        <span className='edit-post-history__date'>\r\n                            <Timestamp\r\n                                value={timeStampValue}\r\n                                ranges={DATE_RANGES}\r\n                            />\r\n                        </span>\r\n                        {currentVersionIndicator}\r\n                    </div>\r\n                    {restoreButton}\r\n                </div>\r\n                {open && messageContainer}\r\n            </PostAriaLabelDiv>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(EditedPostItem);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getPost} from 'mattermost-redux/selectors/entities/posts';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\nimport {editPost} from 'actions/views/posts';\r\nimport {closeRightHandSide} from 'actions/views/rhs';\r\nimport {getSelectedPostId} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport EditedPostItem from './edited_post_item';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const selectedPostId = getSelectedPostId(state) || '';\r\n\r\n    return {\r\n        postCurrentVersion: getPost(state, selectedPostId),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            editPost,\r\n            closeRightHandSide,\r\n            openModal,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(EditedPostItem);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo, useEffect, useRef, useState} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {getPostEditHistory} from 'mattermost-redux/actions/posts';\r\n\r\nimport Scrollbars from 'components/common/scrollbars';\r\nimport AlertIcon from 'components/common/svg_images_components/alert_svg';\r\nimport LoadingScreen from 'components/loading_screen';\r\nimport SearchResultsHeader from 'components/search_results_header';\r\n\r\nimport EditedPostItem from './edited_post_item';\r\n\r\nimport type {PropsFromRedux} from './index';\r\nimport './post_edit_history.scss';\r\n\r\nconst PostEditHistory = ({\r\n    channelDisplayName,\r\n    originalPost,\r\n}: PropsFromRedux) => {\r\n    const [postEditHistory, setPostEditHistory] = useState<Post[]>([]);\r\n    const [hasError, setHasError] = useState<boolean>(false);\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const dispatch = useDispatch();\r\n    const scrollbars = useRef<HTMLDivElement>(null);\r\n    const {formatMessage} = useIntl();\r\n    const retrieveErrorHeading = formatMessage({\r\n        id: 'post_info.edit.history.retrieveError',\r\n        defaultMessage: 'Unable to load edit history',\r\n    });\r\n    const retrieveErrorSubheading = formatMessage({\r\n        id: 'post_info.edit.history.retrieveErrorVerbose',\r\n        defaultMessage: 'There was an error loading the history for this message. Check your network connection or try again later.',\r\n    });\r\n\r\n    useEffect(() => {\r\n        const fetchPostEditHistory = async () => {\r\n            setIsLoading(true);\r\n            const result = await dispatch(getPostEditHistory(originalPost.id));\r\n            if (result.data) {\r\n                setPostEditHistory(result.data);\r\n                setHasError(false);\r\n            } else {\r\n                setHasError(true);\r\n                setPostEditHistory([]);\r\n            }\r\n            setIsLoading(false);\r\n        };\r\n        fetchPostEditHistory();\r\n        scrollbars.current?.scrollTo({top: 0});\r\n    }, [originalPost, dispatch]);\r\n\r\n    useEffect(() => {\r\n        setPostEditHistory([]);\r\n        setHasError(false);\r\n    }, [originalPost.id]);\r\n\r\n    const title = formatMessage({\r\n        id: 'search_header.title_edit.history',\r\n        defaultMessage: 'Edit History',\r\n    });\r\n\r\n    const errorContainer: JSX.Element = (\r\n        <div className='edit-post-history__error_container'>\r\n            <div className='edit-post-history__error_item'>\r\n                <AlertIcon\r\n                    width={127}\r\n                    height={127}\r\n                />\r\n                <p className='edit-post-history__error_heading'>\r\n                    {retrieveErrorHeading}\r\n                </p>\r\n                <p className='edit-post-history__error_subheading'>\r\n                    {retrieveErrorSubheading}\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (isLoading && postEditHistory.length === 0) {\r\n        return (\r\n            <div\r\n                id='rhsContainer'\r\n                className='sidebar-right__body sidebar-right__edit-post-history'\r\n            >\r\n                <LoadingScreen\r\n                    style={{\r\n                        display: 'grid',\r\n                        placeContent: 'center',\r\n                        flex: '1',\r\n                    }}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const currentItem = (\r\n        <EditedPostItem\r\n            post={originalPost}\r\n            key={originalPost.id}\r\n            isCurrent={true}\r\n        />\r\n    );\r\n\r\n    const postEditItems = [currentItem, ...postEditHistory.map((postEdited) => (\r\n        <EditedPostItem\r\n            key={postEdited.id}\r\n            post={postEdited}\r\n        />\r\n    ))];\r\n\r\n    return (\r\n        <div\r\n            id='rhsContainer'\r\n            className='sidebar-right__body sidebar-right__edit-post-history'\r\n        >\r\n            <Scrollbars ref={scrollbars}>\r\n                <SearchResultsHeader>\r\n                    <h2 id='rhsPanelTitle'>\r\n                        {title}\r\n                    </h2>\r\n                    <div className='sidebar--right__title__channel'>{channelDisplayName}</div>\r\n                </SearchResultsHeader>\r\n                {hasError ? errorContainer : postEditItems}\r\n            </Scrollbars>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(PostEditHistory);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\n\r\nimport {getChannel, getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getPost} from 'mattermost-redux/selectors/entities/posts';\r\n\r\nimport {getSelectedPostId} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport PostEditHistory from './post_edit_history';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const selectedPostId = getSelectedPostId(state) || '';\r\n    const originalPost = getPost(state, selectedPostId);\r\n    const channel = getCurrentChannel(state) ?? getChannel(state, originalPost.channel_id);\r\n    const channelDisplayName = channel?.display_name || '';\r\n\r\n    return {\r\n        channelDisplayName,\r\n        originalPost,\r\n    };\r\n}\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(PostEditHistory);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {HTMLAttributes} from 'react';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {getIsRhsExpanded, getRhsSize} from 'selectors/rhs';\r\n\r\nimport {CssVarKeyForResizable, RHS_MIN_MAX_WIDTH, ResizeDirection} from '../constants';\r\nimport ResizableDivider from '../resizable_divider';\r\nimport {shouldRhsOverlapChannelView} from '../utils';\r\n\r\ninterface Props extends HTMLAttributes<'div'> {\r\n    children: React.ReactNode;\r\n    rightWidthHolderRef: React.RefObject<HTMLDivElement>;\r\n    ariaLabel?: string;\r\n    ariaLabeledby?: string;\r\n}\r\n\r\nfunction ResizableRhs({\r\n    role,\r\n    children,\r\n    id,\r\n    className,\r\n    rightWidthHolderRef,\r\n    ariaLabel,\r\n    ariaLabeledby,\r\n}: Props) {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const rhsSize = useSelector(getRhsSize);\r\n    const isRhsExpanded = useSelector(getIsRhsExpanded);\r\n\r\n    const [previousRhsExpanded, setPreviousRhsExpanded] = useState(false);\r\n\r\n    const defaultWidth = RHS_MIN_MAX_WIDTH[rhsSize].default;\r\n\r\n    const shouldRhsOverlap = shouldRhsOverlapChannelView(rhsSize);\r\n\r\n    const handleResize = (_: number, cssVarProp: string, cssVarValue: string) => {\r\n        const rightWidthHolderRefElement = rightWidthHolderRef.current;\r\n\r\n        if (!rightWidthHolderRefElement) {\r\n            return;\r\n        }\r\n\r\n        if (!shouldRhsOverlap) {\r\n            rightWidthHolderRefElement.style.setProperty(cssVarProp, cssVarValue);\r\n        }\r\n    };\r\n\r\n    const handleResizeEnd = (_: number, cssVarProp: string) => {\r\n        const rightWidthHolderRefElement = rightWidthHolderRef.current;\r\n\r\n        if (!rightWidthHolderRefElement) {\r\n            return;\r\n        }\r\n\r\n        rightWidthHolderRefElement.style.removeProperty(cssVarProp);\r\n    };\r\n\r\n    const handleDividerDoubleClick = (_: number, cssVarProp: string) => {\r\n        handleResizeEnd(_, cssVarProp);\r\n\r\n        document.body.classList.add('layout-changing');\r\n\r\n        setTimeout(() => {\r\n            document.body.classList.remove('layout-changing');\r\n        }, 1000);\r\n    };\r\n\r\n    // If max-width is applied immediately when expanded is collapsed, the transition will not work correctly.\r\n    useEffect(() => {\r\n        const containerRefElement = containerRef.current;\r\n\r\n        if (!containerRefElement) {\r\n            return;\r\n        }\r\n\r\n        setPreviousRhsExpanded(isRhsExpanded);\r\n\r\n        if (previousRhsExpanded && !isRhsExpanded) {\r\n            containerRefElement.classList.add('resize-disabled');\r\n\r\n            setTimeout(() => {\r\n                containerRefElement.classList.remove('resize-disabled');\r\n            }, 1000);\r\n        }\r\n    }, [isRhsExpanded]);\r\n\r\n    return (\r\n        <div\r\n            id={id}\r\n            className={className}\r\n            role={role}\r\n            ref={containerRef}\r\n            aria-label={ariaLabel}\r\n            aria-labelledby={ariaLabeledby || 'rhsPanelTitle'}\r\n        >\r\n            {children}\r\n            <ResizableDivider\r\n                name='rhsResizeHandle'\r\n                globalCssVar={CssVarKeyForResizable.RHS}\r\n                defaultWidth={defaultWidth}\r\n                dir={ResizeDirection.RIGHT}\r\n                disabled={isRhsExpanded}\r\n                containerRef={containerRef}\r\n                onResize={handleResize}\r\n                onResizeEnd={handleResizeEnd}\r\n                onDividerDoubleClick={handleDividerDoubleClick}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResizableRhs;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl, type IntlShape} from 'react-intl';\r\n\r\nimport KeyboardShortcutSequence, {\r\n    KEYBOARD_SHORTCUTS,\r\n} from 'components/keyboard_shortcuts/keyboard_shortcuts_sequence';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {RhsState} from 'types/store/rhs';\r\n\r\ntype Props = {\r\n    intl: IntlShape;\r\n    previousRhsState?: RhsState;\r\n    isExpanded: boolean;\r\n    actions: {\r\n        showMentions: () => void;\r\n        showSearchResults: () => void;\r\n        showFlaggedPosts: () => void;\r\n        showPinnedPosts: () => void;\r\n        closeRightHandSide: () => void;\r\n        toggleRhsExpanded: () => void;\r\n    };\r\n};\r\n\r\nclass RhsCardHeader extends React.PureComponent<Props> {\r\n    handleBack = (e: React.MouseEvent<HTMLButtonElement>): void => {\r\n        e.preventDefault();\r\n\r\n        switch (this.props.previousRhsState) {\r\n        case RHSStates.CHANNEL_FILES:\r\n            this.props.actions.showSearchResults();\r\n            break;\r\n        case RHSStates.SEARCH:\r\n            this.props.actions.showSearchResults();\r\n            break;\r\n        case RHSStates.MENTION:\r\n            this.props.actions.showMentions();\r\n            break;\r\n        case RHSStates.FLAG:\r\n            this.props.actions.showFlaggedPosts();\r\n            break;\r\n        case RHSStates.PIN:\r\n            this.props.actions.showPinnedPosts();\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    };\r\n\r\n    render(): React.ReactNode {\r\n        let back;\r\n        let title;\r\n\r\n        switch (this.props.previousRhsState) {\r\n        case RHSStates.SEARCH:\r\n        case RHSStates.MENTION:\r\n            title = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToResultsTooltip'\r\n                    defaultMessage='Back to search results'\r\n                />\r\n            );\r\n            break;\r\n        case RHSStates.FLAG:\r\n            title = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToFlaggedTooltip'\r\n                    defaultMessage='Back to saved messages'\r\n                />\r\n            );\r\n            break;\r\n        case RHSStates.PIN:\r\n            title = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToPinnedTooltip'\r\n                    defaultMessage='Back to pinned messages'\r\n                />\r\n            );\r\n            break;\r\n        }\r\n\r\n        const expandSidebarTooltip = (\r\n            <>\r\n                <FormattedMessage\r\n                    id='rhs_header.expandSidebarTooltip'\r\n                    defaultMessage='Expand the right sidebar'\r\n                />\r\n                <KeyboardShortcutSequence\r\n                    shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                    hideDescription={true}\r\n                    isInsideTooltip={true}\r\n                />\r\n            </>\r\n        );\r\n\r\n        const shrinkSidebarTooltip = (\r\n            <>\r\n                <FormattedMessage\r\n                    id='rhs_header.collapseSidebarTooltip'\r\n                    defaultMessage='Collapse the right sidebar'\r\n                />\r\n                <KeyboardShortcutSequence\r\n                    shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                    hideDescription={true}\r\n                    isInsideTooltip={true}\r\n                />\r\n            </>\r\n        );\r\n\r\n        if (title) {\r\n            back = (\r\n                <WithTooltip\r\n                    title={title}\r\n                >\r\n                    <button\r\n                        className='sidebar--right__back btn btn-icon btn-sm'\r\n                        onClick={this.handleBack}\r\n                        aria-label={this.props.intl.formatMessage({id: 'rhs_header.back.icon', defaultMessage: 'Back Icon'})}\r\n                    >\r\n                        <i\r\n                            className='icon icon-arrow-back-ios'\r\n                        />\r\n                    </button>\r\n                </WithTooltip>\r\n            );\r\n        }\r\n\r\n        const collapseIconLabel = this.props.intl.formatMessage({id: 'rhs_header.collapseSidebarTooltip.icon', defaultMessage: 'Collapse Sidebar Icon'});\r\n        const expandIconLabel = this.props.intl.formatMessage({id: 'rhs_header.expandSidebarTooltip.icon', defaultMessage: 'Expand Sidebar Icon'});\r\n\r\n        return (\r\n            <div className='sidebar--right__header'>\r\n                <span\r\n                    className='sidebar--right__title'\r\n                    id='rhsPanelTitle'\r\n                >\r\n                    {back}\r\n                    <FormattedMessage\r\n                        id='search_header.title5'\r\n                        defaultMessage='Extra information'\r\n                    />\r\n                </span>\r\n                <div className='pull-right'>\r\n                    <WithTooltip\r\n                        title={this.props.isExpanded ? shrinkSidebarTooltip : expandSidebarTooltip}\r\n                    >\r\n                        <button\r\n                            type='button'\r\n                            className='sidebar--right__expand btn btn-icon btn-sm'\r\n                            aria-label={this.props.isExpanded ? collapseIconLabel : expandIconLabel}\r\n                            onClick={this.props.actions.toggleRhsExpanded}\r\n                        >\r\n                            <i\r\n                                className='icon icon-arrow-expand'\r\n                            />\r\n                            <i\r\n                                className='icon icon-arrow-collapse'\r\n                            />\r\n                        </button>\r\n                    </WithTooltip>\r\n                    <WithTooltip\r\n                        title={\r\n                            <FormattedMessage\r\n                                id='rhs_header.closeSidebarTooltip'\r\n                                defaultMessage='Close'\r\n                            />\r\n                        }\r\n                    >\r\n                        <button\r\n                            type='button'\r\n                            className='sidebar--right__close btn btn-icon btn-sm'\r\n                            aria-label='Close'\r\n                            onClick={this.props.actions.closeRightHandSide}\r\n                        >\r\n                            <i\r\n                                className='icon icon-close'\r\n                                aria-label={this.props.intl.formatMessage({id: 'rhs_header.closeTooltip.icon', defaultMessage: 'Close Sidebar Icon'})}\r\n                            />\r\n                        </button>\r\n                    </WithTooltip>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(RhsCardHeader);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {AnyAction, Dispatch} from 'redux';\r\n\r\nimport {\r\n    showMentions,\r\n    showSearchResults,\r\n    showFlaggedPosts,\r\n    showPinnedPosts,\r\n    closeRightHandSide,\r\n    toggleRhsExpanded,\r\n} from 'actions/views/rhs';\r\nimport {getIsRhsExpanded} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RhsCardHeader from './rhs_card_header';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        isExpanded: getIsRhsExpanded(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            showMentions,\r\n            showSearchResults,\r\n            showFlaggedPosts,\r\n            showPinnedPosts,\r\n            closeRightHandSide,\r\n            toggleRhsExpanded,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RhsCardHeader);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport deepEqual from 'fast-deep-equal';\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {ensureString} from 'mattermost-redux/utils/post_utils';\r\n\r\nimport {emitCloseRightHandSide} from 'actions/global_actions';\r\n\r\nimport Scrollbars from 'components/common/scrollbars';\r\nimport Markdown from 'components/markdown';\r\nimport PostProfilePicture from 'components/post_profile_picture';\r\nimport RhsCardHeader from 'components/rhs_card_header';\r\nimport UserProfile from 'components/user_profile';\r\n\r\nimport Constants from 'utils/constants';\r\nimport DelayedAction from 'utils/delayed_action';\r\n\r\nimport type {PostPluginComponent} from 'types/store/plugins';\r\nimport type {RhsState} from 'types/store/rhs';\r\n\r\ntype Props = {\r\n    isMobileView: boolean;\r\n    selected?: Post;\r\n    pluginPostCardTypes?: Record<string, PostPluginComponent>;\r\n    previousRhsState?: RhsState;\r\n    enablePostUsernameOverride?: boolean;\r\n    teamUrl?: string;\r\n};\r\n\r\ntype State = {\r\n    isScrolling: boolean;\r\n};\r\n\r\nexport default class RhsCard extends React.Component<Props, State> {\r\n    scrollStopAction: DelayedAction;\r\n\r\n    static defaultProps = {\r\n        pluginPostCardTypes: {},\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.scrollStopAction = new DelayedAction(this.handleScrollStop);\r\n\r\n        this.state = {\r\n            isScrolling: false,\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps: Props, nextState: State) {\r\n        if (!deepEqual(nextProps.selected?.props?.card, this.props.selected?.props?.card)) {\r\n            return true;\r\n        }\r\n        if (nextState.isScrolling !== this.state.isScrolling) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    handleScroll = () => {\r\n        if (!this.state.isScrolling) {\r\n            this.setState({\r\n                isScrolling: true,\r\n            });\r\n        }\r\n\r\n        this.scrollStopAction.fireAfter(Constants.SCROLL_DELAY);\r\n    };\r\n\r\n    handleScrollStop = () => {\r\n        this.setState({\r\n            isScrolling: false,\r\n        });\r\n    };\r\n\r\n    handleClick = () => {\r\n        if (this.props.isMobileView) {\r\n            emitCloseRightHandSide();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        if (this.props.selected == null) {\r\n            return (<div/>);\r\n        }\r\n\r\n        const {selected, pluginPostCardTypes, teamUrl} = this.props;\r\n        const postType = selected.type;\r\n        let content: ReactNode = null;\r\n        if (pluginPostCardTypes && Object.hasOwn(pluginPostCardTypes, postType)) {\r\n            const PluginComponent = pluginPostCardTypes[postType].component;\r\n            content = <PluginComponent post={selected}/>;\r\n        }\r\n\r\n        if (!content) {\r\n            const message = ensureString(selected.props?.card);\r\n            content = (\r\n                <div className='info-card'>\r\n                    <Markdown message={message}/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let user = (\r\n            <UserProfile\r\n                userId={selected.user_id}\r\n                hideStatus={true}\r\n                disablePopover={true}\r\n            />\r\n        );\r\n        const overrideUsername = ensureString(selected.props.override_username);\r\n        if (overrideUsername && this.props.enablePostUsernameOverride) {\r\n            user = (\r\n                <UserProfile\r\n                    userId={selected.user_id}\r\n                    hideStatus={true}\r\n                    disablePopover={true}\r\n                    overwriteName={overrideUsername}\r\n                />\r\n            );\r\n        }\r\n        const avatar = (\r\n            <PostProfilePicture\r\n                compactDisplay={false}\r\n                post={selected}\r\n                userId={selected.user_id}\r\n            />\r\n        );\r\n\r\n        return (\r\n            <div className='sidebar-right__body sidebar-right__card'>\r\n                <RhsCardHeader previousRhsState={this.props.previousRhsState}/>\r\n                <Scrollbars onScroll={this.handleScroll}>\r\n                    <div className='post-right__scroll'>\r\n                        {content}\r\n                        <div className='d-flex post-card--info'>\r\n                            <div className='post-card--post-by overflow--ellipsis'>\r\n                                <FormattedMessage\r\n                                    id='rhs_card.message_by'\r\n                                    defaultMessage='Message by {avatar} {user}'\r\n                                    values={{user, avatar}}\r\n                                />\r\n                            </div>\r\n                            <div className='post-card--view-post'>\r\n                                <Link\r\n                                    to={`${teamUrl}/pl/${selected.id}`}\r\n                                    className='post__permalink'\r\n                                    onClick={this.handleClick}\r\n                                >\r\n                                    <FormattedMessage\r\n                                        id='rhs_card.jump'\r\n                                        defaultMessage='Jump'\r\n                                    />\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Scrollbars>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getCurrentRelativeTeamUrl} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {getSelectedPostCard} from 'selectors/rhs';\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RhsCard from './rhs_card';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const selected = getSelectedPostCard(state);\r\n    const config = getConfig(state);\r\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\r\n\r\n    return {\r\n        enablePostUsernameOverride,\r\n        isMobileView: getIsMobileView(state),\r\n        selected,\r\n        pluginPostCardTypes: state.plugins.postCardTypes,\r\n        teamUrl: getCurrentRelativeTeamUrl(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(RhsCard);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {TourTip, useFollowElementDimensions, useMeasurePunchouts} from '@mattermost/components';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/common';\r\n\r\nimport {Constants, Preferences} from 'utils/constants';\r\n\r\nconst translate = {x: 2, y: 25};\r\n\r\nconst CRTThreadsPaneTutorialTip = () => {\r\n    const dispatch = useDispatch();\r\n    const {formatMessage} = useIntl();\r\n    const currentUserId = useSelector(getCurrentUserId);\r\n\r\n    const dimensions = useFollowElementDimensions('sidebar-right');\r\n\r\n    const title = (\r\n        <FormattedMessage\r\n            id='tutorial_threads.threads_pane.title'\r\n            defaultMessage={'Viewing a thread in the sidebar'}\r\n        />\r\n    );\r\n\r\n    const screen = (\r\n        <p>\r\n            {formatMessage<ReactNode>(\r\n                {\r\n                    id: 'tutorial_threads.threads_pane.description',\r\n                    defaultMessage: 'Click the <b>Follow</b> button to be notified about replies and see it in your <b>Threads</b> view. Within a thread, the <b>New Messages</b> line shows you where you left off.',\r\n                },\r\n                {\r\n                    b: (value: string) => <b>{value}</b>,\r\n                },\r\n            )}\r\n        </p>\r\n    );\r\n\r\n    const nextBtn = (): JSX.Element => {\r\n        return (\r\n            <FormattedMessage\r\n                id={'tutorial_tip.got_it'}\r\n                defaultMessage={'Got it'}\r\n            />\r\n        );\r\n    };\r\n\r\n    const onDismiss = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        const preferences = [\r\n            {\r\n                user_id: currentUserId,\r\n                category: Preferences.CRT_THREAD_PANE_STEP,\r\n                name: currentUserId,\r\n                value: Constants.CrtThreadPaneSteps.FINISHED.toString(),\r\n            },\r\n        ];\r\n        dispatch(savePreferences(currentUserId, preferences));\r\n    };\r\n\r\n    const overlayPunchOut = useMeasurePunchouts(['rhsContainer'], [dimensions?.width]);\r\n\r\n    return (\r\n        <TourTip\r\n            show={true}\r\n            screen={screen}\r\n            title={title}\r\n            overlayPunchOut={overlayPunchOut}\r\n            placement='left'\r\n            pulsatingDotPlacement='top-start'\r\n            pulsatingDotTranslate={translate}\r\n            step={1}\r\n            singleTip={true}\r\n            showOptOut={false}\r\n            handleDismiss={onDismiss}\r\n            handleNext={onDismiss}\r\n            interactivePunchOut={true}\r\n            nextBtn={nextBtn()}\r\n        />\r\n    );\r\n};\r\n\r\nexport default CRTThreadsPaneTutorialTip;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl, type WrappedComponentProps} from 'react-intl';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport KeyboardShortcutSequence, {\r\n    KEYBOARD_SHORTCUTS,\r\n} from 'components/keyboard_shortcuts/keyboard_shortcuts_sequence';\r\nimport FollowButton from 'components/threading/common/follow_button';\r\nimport CRTThreadsPaneTutorialTip\r\n    from 'components/tours/crt_tour/crt_threads_pane_tutorial_tip';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport {getHistory} from 'utils/browser_history';\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {RhsState} from 'types/store/rhs';\r\n\r\ntype Props = WrappedComponentProps & {\r\n    isExpanded: boolean;\r\n    isMobileView: boolean;\r\n    rootPostId: string;\r\n    previousRhsState?: RhsState;\r\n    relativeTeamUrl: string;\r\n    channel: Channel;\r\n    isCollapsedThreadsEnabled: boolean;\r\n    isFollowingThread?: boolean;\r\n    currentTeamId: string;\r\n    showThreadsTutorialTip: boolean;\r\n    currentUserId: string;\r\n    setRhsExpanded: (b: boolean) => void;\r\n    showMentions: () => void;\r\n    showSearchResults: () => void;\r\n    showFlaggedPosts: () => void;\r\n    showPinnedPosts: () => void;\r\n    goBack: () => void;\r\n    closeRightHandSide: (e?: React.MouseEvent) => void;\r\n    toggleRhsExpanded: (e: React.MouseEvent) => void;\r\n    setThreadFollow: (userId: string, teamId: string, threadId: string, newState: boolean) => void;\r\n};\r\n\r\nclass RhsHeaderPost extends React.PureComponent<Props> {\r\n    handleBack = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n\r\n        switch (this.props.previousRhsState) {\r\n        case RHSStates.SEARCH:\r\n        case RHSStates.MENTION:\r\n        case RHSStates.FLAG:\r\n        case RHSStates.PIN:\r\n            this.props.goBack();\r\n            break;\r\n        default:\r\n            break;\r\n        }\r\n    };\r\n\r\n    handleJumpClick = () => {\r\n        if (this.props.isMobileView) {\r\n            this.props.closeRightHandSide();\r\n        }\r\n\r\n        this.props.setRhsExpanded(false);\r\n        const teamUrl = this.props.relativeTeamUrl;\r\n        getHistory().push(`${teamUrl}/pl/${this.props.rootPostId}`);\r\n    };\r\n\r\n    handleFollowChange = () => {\r\n        const {currentTeamId, currentUserId, rootPostId, isFollowingThread} = this.props;\r\n        this.props.setThreadFollow(currentUserId, currentTeamId, rootPostId, !isFollowingThread);\r\n    };\r\n\r\n    render() {\r\n        let back;\r\n        const {isFollowingThread} = this.props;\r\n        const {formatMessage} = this.props.intl;\r\n        const closeSidebarTooltip = (\r\n            <FormattedMessage\r\n                id='rhs_header.closeSidebarTooltip'\r\n                defaultMessage='Close'\r\n            />\r\n        );\r\n\r\n        let backToResultsTooltip;\r\n\r\n        switch (this.props.previousRhsState) {\r\n        case RHSStates.SEARCH:\r\n        case RHSStates.MENTION:\r\n            backToResultsTooltip = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToResultsTooltip'\r\n                    defaultMessage='Back to search results'\r\n                />\r\n            );\r\n            break;\r\n        case RHSStates.FLAG:\r\n            backToResultsTooltip = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToFlaggedTooltip'\r\n                    defaultMessage='Back to saved messages'\r\n                />\r\n            );\r\n            break;\r\n        case RHSStates.PIN:\r\n            backToResultsTooltip = (\r\n                <FormattedMessage\r\n                    id='rhs_header.backToPinnedTooltip'\r\n                    defaultMessage='Back to pinned messages'\r\n                />\r\n            );\r\n            break;\r\n        }\r\n\r\n        //rhsHeaderTooltipContent contains tooltips content for expand or shrink sidebarTooltip.\r\n        // if props.isExpanded is true, defaultMessage would feed from 'shrinkTooltip', else 'expandTooltip'\r\n        const rhsHeaderTooltipContent = this.props.isExpanded ? (\r\n            <>\r\n                <FormattedMessage\r\n                    id='rhs_header.collapseSidebarTooltip'\r\n                    defaultMessage='Collapse the right sidebar'\r\n                />\r\n                <KeyboardShortcutSequence\r\n                    shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                    hideDescription={true}\r\n                    isInsideTooltip={true}\r\n                />\r\n            </>\r\n        ) : (\r\n            <>\r\n                <FormattedMessage\r\n                    id='rhs_header.expandSidebarTooltip'\r\n                    defaultMessage='Expand the right sidebar'\r\n                />\r\n                <KeyboardShortcutSequence\r\n                    shortcut={KEYBOARD_SHORTCUTS.navExpandSidebar}\r\n                    hideDescription={true}\r\n                    isInsideTooltip={true}\r\n                />\r\n            </>\r\n        );\r\n\r\n        const channelName = this.props.channel.display_name;\r\n\r\n        if (backToResultsTooltip) {\r\n            back = (\r\n                <WithTooltip\r\n                    title={backToResultsTooltip}\r\n                >\r\n                    <button\r\n                        className='sidebar--right__back btn btn-icon btn-sm'\r\n                        onClick={this.handleBack}\r\n                        aria-label={formatMessage({id: 'rhs_header.back.icon', defaultMessage: 'Back Icon'})}\r\n                    >\r\n                        <i\r\n                            className='icon icon-arrow-back-ios'\r\n                        />\r\n                    </button>\r\n                </WithTooltip>\r\n            );\r\n        }\r\n\r\n        const collapseIconLabel = formatMessage({id: 'rhs_header.collapseSidebarTooltip.icon', defaultMessage: 'Collapse Sidebar Icon'});\r\n        const expandIconLabel = formatMessage({id: 'rhs_header.expandSidebarTooltip.icon', defaultMessage: 'Expand Sidebar Icon'});\r\n\r\n        return (\r\n            <div className='sidebar--right__header'>\r\n                <span\r\n                    className='sidebar--right__title'\r\n                    id='rhsPanelTitle'\r\n                >\r\n                    {back}\r\n                    <FormattedMessage\r\n                        id='rhs_header.details'\r\n                        defaultMessage='Thread'\r\n                    />\r\n                    {channelName &&\r\n                        <button\r\n                            onClick={this.handleJumpClick}\r\n                            className='style--none sidebar--right__title__channel'\r\n                        >\r\n                            {channelName}\r\n                        </button>\r\n                    }\r\n                </span>\r\n                <div className='controls'>\r\n                    {this.props.isCollapsedThreadsEnabled ? (\r\n                        <FollowButton\r\n                            className='sidebar--right__follow__thread'\r\n                            isFollowing={isFollowingThread}\r\n                            onClick={this.handleFollowChange}\r\n                        />\r\n                    ) : null}\r\n\r\n                    <WithTooltip\r\n                        title={rhsHeaderTooltipContent}\r\n                    >\r\n                        <button\r\n                            type='button'\r\n                            className='sidebar--right__expand btn btn-icon btn-sm'\r\n                            aria-label={this.props.isExpanded ? collapseIconLabel : expandIconLabel}\r\n                            onClick={this.props.toggleRhsExpanded}\r\n                        >\r\n                            <i\r\n                                className='icon icon-arrow-expand'\r\n                            />\r\n                            <i\r\n                                className='icon icon-arrow-collapse'\r\n                            />\r\n                        </button>\r\n                    </WithTooltip>\r\n\r\n                    <WithTooltip\r\n                        title={closeSidebarTooltip}\r\n                    >\r\n                        <button\r\n                            id='rhsCloseButton'\r\n                            type='button'\r\n                            className='sidebar--right__close btn btn-icon btn-sm'\r\n                            aria-label='Close'\r\n                            onClick={this.props.closeRightHandSide}\r\n                        >\r\n                            <i\r\n                                className='icon icon-close'\r\n                                aria-label={formatMessage({id: 'rhs_header.closeTooltip.icon', defaultMessage: 'Close Sidebar Icon'})}\r\n                            />\r\n                        </button>\r\n                    </WithTooltip>\r\n                </div>\r\n                {this.props.showThreadsTutorialTip && <CRTThreadsPaneTutorialTip/>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(RhsHeaderPost);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ComponentProps} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {setThreadFollow} from 'mattermost-redux/actions/threads';\r\nimport {getPost} from 'mattermost-redux/selectors/entities/posts';\r\nimport {getInt, isCollapsedThreadsEnabled, onboardingTourTipsEnabled} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentTeamId, getCurrentRelativeTeamUrl} from 'mattermost-redux/selectors/entities/teams';\r\nimport {makeGetThreadOrSynthetic} from 'mattermost-redux/selectors/entities/threads';\r\nimport {getCurrentUserId, getCurrentUserMentionKeys} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {\r\n    setRhsExpanded,\r\n    showMentions,\r\n    showSearchResults,\r\n    showFlaggedPosts,\r\n    showPinnedPosts,\r\n    showChannelFiles,\r\n    closeRightHandSide,\r\n    toggleRhsExpanded,\r\n    goBack,\r\n} from 'actions/views/rhs';\r\nimport {getIsRhsExpanded} from 'selectors/rhs';\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport {CrtThreadPaneSteps, Preferences} from 'utils/constants';\r\nimport {matchUserMentionTriggersWithMessageMentions} from 'utils/post_utils';\r\nimport {allAtMentions} from 'utils/text_formatting';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RhsHeaderPost from './rhs_header_post';\r\n\r\ntype OwnProps = Pick<ComponentProps<typeof RhsHeaderPost>, 'rootPostId'>\r\n\r\nfunction makeMapStateToProps() {\r\n    const getThreadOrSynthetic = makeGetThreadOrSynthetic();\r\n\r\n    return function mapStateToProps(state: GlobalState, {rootPostId}: OwnProps) {\r\n        let isFollowingThread = false;\r\n\r\n        const collapsedThreads = isCollapsedThreadsEnabled(state);\r\n        const root = getPost(state, rootPostId);\r\n        const currentUserId = getCurrentUserId(state);\r\n        const tipStep = getInt(state, Preferences.CRT_THREAD_PANE_STEP, currentUserId);\r\n\r\n        if (root && collapsedThreads) {\r\n            const thread = getThreadOrSynthetic(state, root);\r\n            isFollowingThread = thread.is_following;\r\n\r\n            if (isFollowingThread === null && thread.reply_count === 0) {\r\n                const currentUserMentionKeys = getCurrentUserMentionKeys(state);\r\n                const rootMessageMentionKeys = allAtMentions(root.message);\r\n\r\n                isFollowingThread = matchUserMentionTriggersWithMessageMentions(currentUserMentionKeys, rootMessageMentionKeys);\r\n            }\r\n        }\r\n\r\n        const showThreadsTutorialTip = tipStep === CrtThreadPaneSteps.THREADS_PANE_POPOVER && isCollapsedThreadsEnabled(state) && onboardingTourTipsEnabled(state);\r\n\r\n        return {\r\n            isExpanded: getIsRhsExpanded(state),\r\n            isMobileView: getIsMobileView(state),\r\n            relativeTeamUrl: getCurrentRelativeTeamUrl(state),\r\n            currentTeamId: getCurrentTeamId(state),\r\n            currentUserId,\r\n            isCollapsedThreadsEnabled: collapsedThreads,\r\n            isFollowingThread,\r\n            showThreadsTutorialTip,\r\n        };\r\n    };\r\n}\r\n\r\nconst actions = {\r\n    setRhsExpanded,\r\n    showSearchResults,\r\n    showMentions,\r\n    showFlaggedPosts,\r\n    showPinnedPosts,\r\n    showChannelFiles,\r\n    closeRightHandSide,\r\n    toggleRhsExpanded,\r\n    setThreadFollow,\r\n    goBack,\r\n};\r\n\r\nexport default connect(makeMapStateToProps, actions)(RhsHeaderPost);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo, useEffect} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {Team} from '@mattermost/types/teams';\r\n\r\nimport {closeRightHandSide} from 'actions/views/rhs';\r\n\r\nimport RhsHeaderPost from 'components/rhs_header_post';\r\nimport ThreadViewer from 'components/threading/thread_viewer';\r\n\r\nimport type {FakePost, RhsState} from 'types/store/rhs';\r\n\r\ntype Props = {\r\n    currentTeam?: Team;\r\n    channel?: Channel;\r\n    selected: Post | FakePost;\r\n    previousRhsState?: RhsState;\r\n}\r\n\r\nconst RhsThread = ({\r\n    currentTeam,\r\n    channel,\r\n    selected,\r\n    previousRhsState,\r\n}: Props) => {\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (channel?.team_id && channel.team_id !== currentTeam?.id) {\r\n            // if team-scoped and mismatched team, close rhs\r\n            dispatch(closeRightHandSide());\r\n        }\r\n    }, [currentTeam, channel, dispatch]);\r\n\r\n    if (selected == null || !channel) {\r\n        return (\r\n            <div/>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id='rhsContainer'\r\n            className='sidebar-right__body'\r\n        >\r\n            <RhsHeaderPost\r\n                rootPostId={selected.id}\r\n                channel={channel}\r\n                previousRhsState={previousRhsState}\r\n            />\r\n            <ThreadViewer\r\n                rootPostId={selected.id}\r\n                useRelativeTimestamp={true}\r\n                isThreadView={false}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(RhsThread);\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {getSelectedChannel, getSelectedPost} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RhsThread from './rhs_thread';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const selected = getSelectedPost(state);\r\n    const channel = getSelectedChannel(state);\r\n    const currentTeam = getCurrentTeam(state);\r\n\r\n    return {\r\n        selected,\r\n        channel,\r\n        currentTeam,\r\n    };\r\n}\r\nexport default connect(mapStateToProps)(RhsThread);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {Popover as BSPopover} from 'react-bootstrap';\r\nimport type {Sizes as BSSizes} from 'react-bootstrap';\r\n\r\nconst SizeMap = {xs: 'xsmall', sm: 'small', md: 'medium', lg: 'large'};\r\nexport type Sizes = 'xs' | 'sm' | 'md' | 'lg';\r\n\r\ninterface Props {\r\n    id?: string;\r\n    children?: React.ReactNode;\r\n    popoverStyle?: 'info';\r\n    popoverSize?: Sizes;\r\n    title?: React.ReactNode;\r\n    placement?: 'bottom' | 'top' | 'right' | 'left';\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    onMouseOut?: React.MouseEventHandler<BSPopover>; // didn't find a better way to satisfy typing, so for now we have a slight 'bootstrap leakage'\r\n    onMouseOver?: React.MouseEventHandler<BSPopover>;\r\n}\r\n\r\nconst Popover = React.forwardRef<BSPopover, Props>(({\r\n    placement = 'right',\r\n    popoverSize = 'sm',\r\n    children,\r\n    popoverStyle = 'info',\r\n    title,\r\n    id,\r\n    onMouseOut,\r\n    onMouseOver,\r\n    className,\r\n    style,\r\n}, ref?) => {\r\n    return (\r\n        <BSPopover\r\n            id={id}\r\n            style={style}\r\n            className={className}\r\n            bsStyle={popoverStyle}\r\n            placement={placement}\r\n            bsClass='popover'\r\n            title={title}\r\n            bsSize={popoverSize && SizeMap[popoverSize] as BSSizes} // map our sizes to bootstrap\r\n            onMouseOut={onMouseOut}\r\n            onMouseOver={onMouseOver}\r\n            ref={ref}\r\n        >\r\n            {children}\r\n        </BSPopover>\r\n    );\r\n});\r\n\r\nPopover.displayName = 'Popover';\r\n\r\nexport default React.memo(Popover);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {Popover as BSPopover} from 'react-bootstrap';\r\n\r\nimport Popover from 'components/widgets/popover';\r\n\r\nimport type {Props} from './suggestion_list';\r\nimport SuggestionList from './suggestion_list';\r\nimport SuggestionListContents from './suggestion_list_contents';\r\nimport {hasResults} from './suggestion_results';\r\n\r\nexport default class SearchSuggestionList extends SuggestionList {\r\n    popoverRef: React.RefObject<BSPopover>;\r\n    itemsContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.popoverRef = React.createRef();\r\n        this.itemsContainerRef = React.createRef();\r\n    }\r\n\r\n    getContent = () => {\r\n        return this.itemsContainerRef?.current?.parentNode as HTMLUListElement | null;\r\n    };\r\n\r\n    render() {\r\n        if (!hasResults(this.props.results)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Popover\r\n                ref={this.popoverRef}\r\n                id='search-autocomplete__popover'\r\n                className='search-help-popover autocomplete visible'\r\n                placement='bottom'\r\n            >\r\n                <SuggestionListContents\r\n                    ref={this.itemsContainerRef}\r\n                    id='searchSuggestionList'\r\n                    results={this.props.results}\r\n                    selectedTerm={this.props.selection}\r\n\r\n                    getItemId={(term) => `sbrSearchBox_item_${term}`}\r\n                    onItemClick={this.props.onCompleteWord}\r\n                    onItemHover={this.props.onItemHover}\r\n                />\r\n            </Popover>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {memo} from 'react';\r\n\r\nimport Popover from 'components/widgets/popover';\r\n\r\nimport type {SuggestionResults, SuggestionResultsUngrouped} from './suggestion_results';\r\nimport {hasResults} from './suggestion_results';\r\n\r\ntype SuggestionItem = {\r\n    date: string;\r\n    label: string;\r\n}\r\n\r\ntype Props = {\r\n    onCompleteWord: (term: string, matchedPretext: string[], e?: React.MouseEvent<HTMLDivElement>) => boolean;\r\n    matchedPretext: string;\r\n    results: SuggestionResults<SuggestionItem>;\r\n    preventClose: () => void;\r\n    handleEscape: () => void;\r\n}\r\n\r\nconst SuggestionDate = ({\r\n    results,\r\n    matchedPretext,\r\n    onCompleteWord,\r\n    preventClose,\r\n    handleEscape,\r\n}: Props) => {\r\n    if (!hasResults(results)) {\r\n        return null;\r\n    }\r\n\r\n    // This is safe to do because SearchDateProvider only returns ungrouped results\r\n    const ungroupedResults = results as SuggestionResultsUngrouped;\r\n\r\n    const item = ungroupedResults.items[0];\r\n    const term = ungroupedResults.terms[0];\r\n\r\n    // ReactComponent names need to be upper case when used in JSX\r\n    const Component = ungroupedResults.components[0];\r\n\r\n    return (\r\n        <Popover\r\n            id='search-autocomplete__popover'\r\n            className='search-help-popover autocomplete visible'\r\n            placement='bottom'\r\n        >\r\n            <Component\r\n                key={term}\r\n                item={item as SuggestionItem}\r\n                term={term}\r\n                matchedPretext={matchedPretext}\r\n                isSelection={false}\r\n                onClick={onCompleteWord}\r\n                preventClose={preventClose}\r\n                handleEscape={handleEscape}\r\n            />\r\n        </Popover>\r\n    );\r\n};\r\n\r\nexport default memo(SuggestionDate);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useEffect, useRef} from 'react';\r\nimport type {ChangeEvent, CSSProperties, FormEvent} from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport type Provider from 'components/suggestion/provider';\r\nimport SearchSuggestionList from 'components/suggestion/search_suggestion_list';\r\nimport SuggestionBox from 'components/suggestion/suggestion_box';\r\nimport type SuggestionBoxComponent from 'components/suggestion/suggestion_box/suggestion_box';\r\nimport SuggestionDate from 'components/suggestion/suggestion_date';\r\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\r\n\r\nimport Constants from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\n\r\nconst {KeyCodes} = Constants;\r\n\r\nconst style: Record<string, CSSProperties> = {\r\n    searchForm: {overflow: 'visible'},\r\n};\r\n\r\ntype Props = {\r\n    searchTerms: string;\r\n    updateHighlightedSearchHint: (indexDelta: number, changedViaKeyPress?: boolean) => void;\r\n    handleChange: (e: ChangeEvent<HTMLInputElement>) => void;\r\n    handleSubmit: (e: FormEvent<HTMLFormElement>) => void;\r\n    handleEnterKey: (e: ChangeEvent<HTMLInputElement>) => void;\r\n    handleClear: () => void;\r\n    handleFocus: () => void;\r\n    handleBlur: () => void;\r\n    keepFocused: boolean;\r\n    setKeepFocused: (value: boolean) => void;\r\n    isFocused: boolean;\r\n    suggestionProviders: Provider[];\r\n    isSearchingTerm: boolean;\r\n    isSideBarRight?: boolean;\r\n    searchType: string;\r\n    clearSearchType?: () => void;\r\n    getFocus?: (searchBarFocus: () => void) => void;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nconst defaultProps: Partial<Props> = {\r\n    isSideBarRight: false,\r\n    getFocus: (): void => {},\r\n    children: null,\r\n};\r\n\r\nconst SearchBar: React.FunctionComponent<Props> = (props: Props): JSX.Element => {\r\n    const {isFocused, keepFocused, searchTerms, suggestionProviders} = props;\r\n\r\n    const searchRef = useRef<SuggestionBoxComponent>();\r\n    const intl = useIntl();\r\n\r\n    useEffect((): void => {\r\n        const shouldFocus = isFocused || keepFocused;\r\n        if (shouldFocus) {\r\n            // let redux handle changes before focussing the input\r\n            setTimeout(() => searchRef.current?.focus(), 0);\r\n        } else {\r\n            setTimeout(() => searchRef.current?.blur(), 0);\r\n        }\r\n    }, [isFocused, keepFocused]);\r\n\r\n    useEffect((): void => {\r\n        if (isFocused && !keepFocused && searchTerms.endsWith('\"\"')) {\r\n            setTimeout(() => searchRef.current?.focus(), 0);\r\n        }\r\n    }, [searchTerms]);\r\n\r\n    const handleKeyDown = (e: ChangeEvent<HTMLInputElement>): void => {\r\n        if (Keyboard.isKeyPressed(e as any, KeyCodes.ESCAPE)) {\r\n            searchRef.current?.blur();\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        }\r\n\r\n        if (Keyboard.isKeyPressed(e as any, KeyCodes.DOWN)) {\r\n            e.preventDefault();\r\n            props.updateHighlightedSearchHint(1, true);\r\n        }\r\n\r\n        if (Keyboard.isKeyPressed(e as any, KeyCodes.UP)) {\r\n            e.preventDefault();\r\n            props.updateHighlightedSearchHint(-1, true);\r\n        }\r\n\r\n        if (Keyboard.isKeyPressed(e as any, KeyCodes.ENTER)) {\r\n            props.handleEnterKey(e);\r\n        }\r\n\r\n        if (Keyboard.isKeyPressed(e as any, KeyCodes.BACKSPACE) && !searchTerms) {\r\n            if (props.clearSearchType) {\r\n                props.clearSearchType();\r\n            }\r\n        }\r\n    };\r\n\r\n    const getSearch = (node: SuggestionBoxComponent): void => {\r\n        searchRef.current = node;\r\n        if (props.getFocus) {\r\n            props.getFocus(props.handleFocus);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            id={props.isSideBarRight ? 'sbrSearchFormContainer' : 'searchFormContainer'}\r\n            className='search-form__container'\r\n        >\r\n            <form\r\n                role='search'\r\n                className={classNames(['search__form', {'search__form--focused': isFocused}])}\r\n                onSubmit={props.handleSubmit}\r\n                style={style.searchForm}\r\n                autoComplete='off'\r\n                aria-labelledby='searchBox'\r\n            >\r\n                <div className='search__font-icon'>\r\n                    <i className='icon icon-magnify icon-16'/>\r\n                </div>\r\n\r\n                {props.searchType !== '' && (\r\n                    <div\r\n                        className='searchTypeBadge'\r\n                        onMouseDown={props.handleFocus}\r\n                    >\r\n                        {props.searchType === 'messages' && (\r\n                            <FormattedMessage\r\n                                id='search_bar.search_types.messages'\r\n                                defaultMessage='MESSAGES'\r\n                            />\r\n                        )}\r\n                        {props.searchType === 'files' && (\r\n                            <FormattedMessage\r\n                                id='search_bar.search_types.files'\r\n                                defaultMessage='FILES'\r\n                            />\r\n                        )}\r\n                        <i\r\n                            className='icon icon-close icon-12'\r\n                            onMouseDown={() => {\r\n                                props.setKeepFocused(true);\r\n                            }}\r\n                            onClick={() => props.clearSearchType && props.clearSearchType()}\r\n                        />\r\n                    </div>\r\n                )}\r\n                <SuggestionBox\r\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n                    // @ts-ignore\r\n                    ref={getSearch}\r\n                    id={props.isSideBarRight ? 'sbrSearchBox' : 'searchBox'}\r\n                    tabIndex='0'\r\n                    className={'search-bar form-control a11y__region'}\r\n                    containerClass='w-full'\r\n                    data-a11y-sort-order='9'\r\n                    aria-describedby={props.isSideBarRight ? 'sbr-searchbar-help-popup' : 'searchbar-help-popup'}\r\n                    aria-label={intl.formatMessage({id: 'search_bar.search', defaultMessage: 'Search'})}\r\n                    placeholder={intl.formatMessage({id: 'search_bar.search', defaultMessage: 'Search'})}\r\n                    value={props.searchTerms}\r\n                    onFocus={props.handleFocus}\r\n                    onBlur={props.handleBlur}\r\n                    onChange={props.handleChange}\r\n                    onKeyDown={handleKeyDown}\r\n                    listComponent={SearchSuggestionList}\r\n                    dateComponent={SuggestionDate}\r\n                    providers={suggestionProviders}\r\n                    type='search'\r\n                    delayInputUpdate={true}\r\n                    clearable={true}\r\n                    onClear={props.handleClear}\r\n                />\r\n                {props.isSearchingTerm && <LoadingSpinner/>}\r\n                {props.children}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nSearchBar.defaultProps = defaultProps;\r\n\r\nexport default SearchBar;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport ExternalLink from 'components/external_link';\r\n\r\nimport {isFileAttachmentsEnabled} from 'utils/file_utils';\r\n\r\ninterface SearchTerm {\r\n    searchTerm: string;\r\n    message: MessageDescriptor;\r\n    additionalDisplay?: string;\r\n}\r\n\r\ntype Props = {\r\n    withTitle?: boolean;\r\n    onOptionSelected: (term: string) => void;\r\n    onMouseDown?: () => void | undefined;\r\n    options: SearchTerm[];\r\n    highlightedIndex?: number;\r\n    onOptionHover?: (index: number) => void;\r\n    onSearchTypeSelected?: (searchType: 'files' | 'messages') => void;\r\n    onElementBlur?: () => void;\r\n    onElementFocus?: () => void;\r\n    searchType?: 'files' | 'messages' | '';\r\n}\r\n\r\nconst SearchHint = (props: Props): JSX.Element => {\r\n    const handleOnOptionHover = (optionIndex: number) => {\r\n        if (props.onOptionHover) {\r\n            props.onOptionHover(optionIndex);\r\n        }\r\n    };\r\n    const config = useSelector(getConfig);\r\n    const isFileAttachmentEnabled = isFileAttachmentsEnabled(config);\r\n\r\n    if (props.onSearchTypeSelected) {\r\n        if (!props.searchType) {\r\n            return (\r\n                <div\r\n                    className='search-hint__search-type-selector'\r\n                    onMouseDown={props.onMouseDown}\r\n                >\r\n                    <div className='search-hint_text-container'>\r\n                        <FormattedMessage\r\n                            id='search_bar.usage.search_type_question'\r\n                            defaultMessage='What are you searching for?'\r\n                        />\r\n                        <FormattedMessage\r\n                            id='search_bar.usage.searchLearn'\r\n                            defaultMessage='<a>Learn about search</a>'\r\n                            values={{\r\n                                a: (chunks) => (\r\n                                    <ExternalLink\r\n                                        location='search_hint'\r\n                                        className='search-hint_learn-search'\r\n                                        href='https://mattermost.com/pl/mattermost-academy-search-training'\r\n                                    >\r\n                                        <span>{chunks}</span>\r\n                                        <i className='icon icon-lightbulb-outline'/>\r\n                                    </ExternalLink>\r\n                                ),\r\n                            }}\r\n                        />\r\n\r\n                    </div>\r\n                    <div className='button-container'>\r\n                        <button\r\n                            className={classNames({highlighted: props.highlightedIndex === 0})}\r\n                            onClick={() => props.onSearchTypeSelected && props.onSearchTypeSelected('messages')}\r\n                            onBlur={() => props.onElementBlur && props.onElementBlur()}\r\n                            onFocus={() => props.onElementFocus && props.onElementFocus()}\r\n                        >\r\n                            <i className='icon icon-message-text-outline'/>\r\n                            <FormattedMessage\r\n                                id='search_bar.usage.search_type_messages'\r\n                                defaultMessage='Messages'\r\n                            />\r\n                        </button>\r\n                        {isFileAttachmentEnabled &&\r\n                            <button\r\n                                className={classNames({highlighted: props.highlightedIndex === 1})}\r\n                                onClick={() => props.onSearchTypeSelected && props.onSearchTypeSelected('files')}\r\n                                onBlur={() => props.onElementBlur && props.onElementBlur()}\r\n                                onFocus={() => props.onElementFocus && props.onElementFocus()}\r\n                            >\r\n                                <i className='icon icon-file-text-outline'/>\r\n                                <FormattedMessage\r\n                                    id='search_bar.usage.search_type_files'\r\n                                    defaultMessage='Files'\r\n                                />\r\n                            </button>}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.withTitle && (!props.searchType) &&\r\n                <h4 className='search-hint__title'>\r\n                    <FormattedMessage\r\n                        id='search_bar.usage.title'\r\n                        defaultMessage='Search options'\r\n                    />\r\n                </h4>\r\n            }\r\n            {props.withTitle && props.searchType === 'files' &&\r\n                <h4 className='search-hint__title'>\r\n                    <FormattedMessage\r\n                        id='search_bar.usage.title_files'\r\n                        defaultMessage='File search options'\r\n                    />\r\n                </h4>\r\n            }\r\n            {props.withTitle && props.searchType === 'messages' &&\r\n                <h4 className='search-hint__title'>\r\n                    <FormattedMessage\r\n                        id='search_bar.usage.title_messages'\r\n                        defaultMessage='Message search options'\r\n                    />\r\n                </h4>\r\n            }\r\n            <ul\r\n                role='list'\r\n                className='search-hint__suggestions-list'\r\n                onMouseDown={props.onMouseDown}\r\n                onTouchEnd={props.onMouseDown}\r\n            >\r\n                {props.options.map((option, optionIndex) => (\r\n                    <li\r\n                        className={classNames('search-hint__suggestions-list__option', {highlighted: optionIndex === props.highlightedIndex})}\r\n                        key={option.searchTerm}\r\n                        onMouseDown={() => props.onOptionSelected(option.searchTerm)}\r\n                        onTouchEnd={() => props.onOptionSelected(option.searchTerm)}\r\n                        onMouseOver={() => handleOnOptionHover(optionIndex)}\r\n                    >\r\n                        <div className='search-hint__suggestion-list__flex-wrap'>\r\n                            <span className='search-hint__suggestion-list__label'>{option.additionalDisplay ? option.additionalDisplay : option.searchTerm}</span>\r\n                        </div>\r\n                        <div className='search-hint__suggestion-list__value'>\r\n                            <FormattedMessage\r\n                                id={option.message.id}\r\n                                defaultMessage={option.message.defaultMessage}\r\n                            />\r\n                        </div>\r\n                    </li>))}\r\n            </ul>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SearchHint;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {defineMessage, FormattedMessage} from 'react-intl';\r\n\r\nimport {getFileDownloadUrl} from 'mattermost-redux/utils/file_utils';\r\n\r\nimport FileThumbnail from 'components/file_attachment/file_thumbnail';\r\nimport FilePreviewModal from 'components/file_preview_modal';\r\nimport Timestamp, {RelativeRanges} from 'components/timestamp';\r\nimport Menu from 'components/widgets/menu/menu';\r\nimport MenuWrapper from 'components/widgets/menu/menu_wrapper';\r\nimport Tag from 'components/widgets/tag/tag';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport {getHistory} from 'utils/browser_history';\r\nimport Constants, {ModalIdentifiers} from 'utils/constants';\r\nimport {getSiteURL} from 'utils/url';\r\nimport {fileSizeToString, copyToClipboard, localizeMessage} from 'utils/utils';\r\n\r\nimport type {PropsFromRedux, OwnProps} from './index';\r\n\r\nimport './file_search_result_item.scss';\r\n\r\ntype Props = OwnProps & PropsFromRedux;\r\n\r\ntype State = {\r\n    keepOpen: boolean;\r\n}\r\n\r\nconst FILE_TOOLTIP_RANGES = [\r\n    RelativeRanges.TODAY_TITLE_CASE,\r\n    RelativeRanges.YESTERDAY_TITLE_CASE,\r\n];\r\n\r\nexport default class FileSearchResultItem extends React.PureComponent<Props, State> {\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.state = {keepOpen: false};\r\n    }\r\n\r\n    private jumpToConv = (e: MouseEvent) => {\r\n        e.stopPropagation();\r\n        getHistory().push(`/${this.props.teamName}/pl/${this.props.fileInfo.post_id}`);\r\n    };\r\n\r\n    private copyLink = () => {\r\n        copyToClipboard(`${getSiteURL()}/${this.props.teamName}/pl/${this.props.fileInfo.post_id}`);\r\n    };\r\n\r\n    private stopPropagation = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n        e.stopPropagation();\r\n    };\r\n\r\n    private keepOpen = (open: boolean) => {\r\n        this.setState({keepOpen: open});\r\n    };\r\n\r\n    private renderPluginItems = () => {\r\n        const {fileInfo, channel, enableSharedChannelsPlugins} = this.props;\r\n        const isSharedChannel = channel?.shared || false;\r\n\r\n        if (isSharedChannel && !enableSharedChannelsPlugins) {\r\n            return null;\r\n        }\r\n\r\n        const pluginItems = this.props.pluginMenuItems?.filter((item) => item?.match(fileInfo)).map((item) => {\r\n            return (\r\n                <Menu.ItemAction\r\n                    id={item.id + '_pluginmenuitem'}\r\n                    key={item.id + '_pluginmenuitem'}\r\n                    onClick={() => item.action?.(fileInfo)}\r\n                    text={item.text}\r\n                />\r\n            );\r\n        });\r\n\r\n        if (!pluginItems?.length) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <li\r\n                    id={`divider_file_${this.props.fileInfo.id}_plugins`}\r\n                    className='MenuItem__divider'\r\n                    role='menuitem'\r\n                />\r\n                {pluginItems}\r\n            </>\r\n        );\r\n    };\r\n\r\n    private showPreview = () => {\r\n        this.props.actions.openModal({\r\n            modalId: ModalIdentifiers.FILE_PREVIEW_MODAL,\r\n            dialogType: FilePreviewModal,\r\n            dialogProps: {\r\n                fileInfos: [this.props.fileInfo],\r\n                postId: this.props.fileInfo.post_id,\r\n                startIndex: 0,\r\n            },\r\n        });\r\n    };\r\n\r\n    public render(): React.ReactNode {\r\n        const {fileInfo, channelDisplayName, channelType} = this.props;\r\n        let channelName: React.ReactNode = channelDisplayName;\r\n        if (channelType === Constants.DM_CHANNEL) {\r\n            channelName = (\r\n                <FormattedMessage\r\n                    id='search_item.file_tag.direct_message'\r\n                    defaultMessage='Direct Message'\r\n                />\r\n            );\r\n        } else if (channelType === Constants.GM_CHANNEL) {\r\n            channelName = (\r\n                <FormattedMessage\r\n                    id='search_item.file_tag.group_message'\r\n                    defaultMessage='Group Message'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                data-testid='search-item-container'\r\n                className='search-item__container'\r\n            >\r\n                <button\r\n                    className={'FileSearchResultItem' + (this.state.keepOpen ? ' keep-open' : '')}\r\n                    onClick={this.showPreview}\r\n                >\r\n                    <FileThumbnail fileInfo={fileInfo}/>\r\n                    <div className='fileData'>\r\n                        <div className='fileDataName'>{fileInfo.name}</div>\r\n                        <div className='fileMetadata'>\r\n                            {channelName && (\r\n                                <Tag\r\n                                    className='file-search-channel-name'\r\n                                    text={channelName}\r\n                                />\r\n                            )}\r\n                            <span>{fileSizeToString(fileInfo.size)}</span>\r\n                            <span>{'  '}</span>\r\n                            <Timestamp\r\n                                value={fileInfo.create_at}\r\n                                ranges={FILE_TOOLTIP_RANGES}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    {this.props.fileInfo.post_id && (\r\n                        <WithTooltip\r\n                            title={defineMessage({id: 'file_search_result_item.more_actions', defaultMessage: 'More Actions'})}\r\n                        >\r\n                            <MenuWrapper\r\n                                onToggle={this.keepOpen}\r\n                                stopPropagationOnToggle={true}\r\n                            >\r\n                                <a\r\n                                    href='#'\r\n                                    className='action-icon dots-icon btn btn-icon btn-sm'\r\n                                >\r\n                                    <i className='icon icon-dots-vertical'/>\r\n                                </a>\r\n                                <Menu\r\n                                    ariaLabel={'file menu'}\r\n                                    openLeft={true}\r\n                                >\r\n                                    <Menu.ItemAction\r\n                                        onClick={this.jumpToConv}\r\n                                        ariaLabel={localizeMessage({id: 'file_search_result_item.open_in_channel', defaultMessage: 'Open in channel'})}\r\n                                        text={localizeMessage({id: 'file_search_result_item.open_in_channel', defaultMessage: 'Open in channel'})}\r\n                                    />\r\n                                    <Menu.ItemAction\r\n                                        onClick={this.copyLink}\r\n                                        ariaLabel={localizeMessage({id: 'file_search_result_item.copy_link', defaultMessage: 'Copy link'})}\r\n                                        text={localizeMessage({id: 'file_search_result_item.copy_link', defaultMessage: 'Copy link'})}\r\n                                    />\r\n                                    {this.renderPluginItems()}\r\n                                </Menu>\r\n                            </MenuWrapper>\r\n                        </WithTooltip>\r\n                    )}\r\n                    <WithTooltip\r\n                        title={defineMessage({id: 'file_search_result_item.download', defaultMessage: 'Download'})}\r\n                    >\r\n                        <a\r\n                            className='action-icon download-icon btn btn-icon btn-sm'\r\n                            href={getFileDownloadUrl(fileInfo.id)}\r\n                            onClick={this.stopPropagation}\r\n                        >\r\n                            <i className='icon icon-download-outline'/>\r\n                        </a>\r\n                    </WithTooltip>\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {FileInfo} from '@mattermost/types/files';\r\n\r\nimport {getChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getFeatureFlagValue} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport type {GlobalState} from 'types/store';\r\nimport type {FilesDropdownAction} from 'types/store/plugins';\r\n\r\nimport FileSearchResultItem from './file_search_result_item';\r\n\r\nexport type OwnProps = {\r\n    channelId: string;\r\n    fileInfo: FileInfo;\r\n    teamName: string;\r\n    pluginMenuItems?: FilesDropdownAction[];\r\n};\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    const channel = getChannel(state, ownProps.channelId);\r\n    const enableSharedChannelsPlugins = getFeatureFlagValue(state, 'EnableSharedChannelsPlugins') === 'true';\r\n\r\n    return {\r\n        channelDisplayName: '',\r\n        channelType: channel?.type,\r\n        channel,\r\n        enableSharedChannelsPlugins,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            openModal,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(FileSearchResultItem);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {FilterVariantIcon} from '@mattermost/compass-icons/components';\r\n\r\nimport {IconContainer} from 'components/advanced_text_editor/formatting_bar/formatting_icon';\r\nimport type {SearchFilterType} from 'components/search/types';\r\nimport Menu from 'components/widgets/menu/menu';\r\nimport MenuWrapper from 'components/widgets/menu/menu_wrapper';\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport './files_filter_menu.scss';\r\n\r\ntype Props = {\r\n    selectedFilter: string;\r\n    onFilter: (filter: SearchFilterType) => void;\r\n};\r\n\r\nexport default function FilesFilterMenu(props: Props): JSX.Element {\r\n    const intl = useIntl();\r\n    return (\r\n        <div className='FilesFilterMenu'>\r\n            <MenuWrapper>\r\n                <WithTooltip\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='channel_info_rhs.menu.files.filter'\r\n                            defaultMessage='Filter'\r\n                        />}\r\n                >\r\n                    <IconContainer\r\n                        id='filesFilterButton'\r\n                        className='action-icon dots-icon'\r\n                        type='button'\r\n                    >\r\n                        {props.selectedFilter !== 'all' && <i className='icon-dot'/>}\r\n                        <FilterVariantIcon\r\n                            size={18}\r\n                            color='currentColor'\r\n                        />\r\n                    </IconContainer>\r\n                </WithTooltip>\r\n\r\n                <Menu\r\n                    ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.file_menu', defaultMessage: 'file menu'})}\r\n                    openLeft={true}\r\n                >\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.all_file_types', defaultMessage: 'All file types'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.all_file_types', defaultMessage: 'All file types'})}\r\n                        onClick={() => props.onFilter('all')}\r\n                        icon={props.selectedFilter === 'all' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.documents', defaultMessage: 'Documents'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.documents', defaultMessage: 'Documents'})}\r\n                        onClick={() => props.onFilter('documents')}\r\n                        icon={props.selectedFilter === 'documents' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.spreadsheets', defaultMessage: 'Spreadsheets'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.spreadsheets', defaultMessage: 'Spreadsheets'})}\r\n                        onClick={() => props.onFilter('spreadsheets')}\r\n                        icon={props.selectedFilter === 'spreadsheets' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.presentations', defaultMessage: 'Presentations'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.presentations', defaultMessage: 'Presentations'})}\r\n                        onClick={() => props.onFilter('presentations')}\r\n                        icon={props.selectedFilter === 'presentations' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.code', defaultMessage: 'Code'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.code', defaultMessage: 'Code'})}\r\n                        onClick={() => props.onFilter('code')}\r\n                        icon={props.selectedFilter === 'code' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.images', defaultMessage: 'Images'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.images', defaultMessage: 'Images'})}\r\n                        onClick={() => props.onFilter('images')}\r\n                        icon={props.selectedFilter === 'images' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.audio', defaultMessage: 'Audio'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.audio', defaultMessage: 'Audio'})}\r\n                        onClick={() => props.onFilter('audio')}\r\n                        icon={props.selectedFilter === 'audio' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                    <Menu.ItemAction\r\n                        ariaLabel={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.videos', defaultMessage: 'Videos'})}\r\n                        text={intl.formatMessage({id: 'channel_info_rhs.menu.files.filter.videos', defaultMessage: 'Videos'})}\r\n                        onClick={() => props.onFilter('video')}\r\n                        icon={props.selectedFilter === 'video' ? <i className='icon icon-check'/> : null}\r\n                    />\r\n                </Menu>\r\n            </MenuWrapper>\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useRef} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {getMyTeams} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {getSearchTeam} from 'selectors/rhs';\r\n\r\nimport SelectTeam from 'components/new_search/select_team';\r\nimport type {SearchFilterType} from 'components/search/types';\r\n\r\nimport type {A11yFocusEventDetail} from 'utils/constants';\r\nimport Constants, {A11yCustomEventTypes, DataSearchTypes} from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\n\r\nimport type {GlobalState} from 'types/store';\r\nimport type {SearchType} from 'types/store/rhs';\r\n\r\nimport FilesFilterMenu from './files_filter_menu';\r\n\r\nconst {KeyCodes} = Constants;\r\n\r\nimport './messages_or_files_selector.scss';\r\n\r\ntype Props = {\r\n    selected: string;\r\n    selectedFilter: SearchFilterType;\r\n    messagesCounter: string;\r\n    filesCounter: string;\r\n    isFileAttachmentsEnabled: boolean;\r\n    crossTeamSearchEnabled: boolean;\r\n    onChange: (value: SearchType) => void;\r\n    onFilter: (filter: SearchFilterType) => void;\r\n    onTeamChange: (teamId: string) => void;\r\n};\r\n\r\ntype DataSearchLiteral = typeof DataSearchTypes[keyof typeof DataSearchTypes];\r\n\r\nexport default function MessagesOrFilesSelector(props: Props): JSX.Element {\r\n    const searchTeam = useSelector((state: GlobalState) => getSearchTeam(state));\r\n    const myTeams = useSelector(getMyTeams);\r\n    const hasMoreThanOneTeam = myTeams.length > 1;\r\n\r\n    // REFS to the tabs so there is ability to pass the custom A11y focus event\r\n    const messagesTabRef = useRef<HTMLButtonElement>(null);\r\n    const filesTabRef = useRef<HTMLButtonElement>(null);\r\n\r\n    // Enhanced arrow key handling to focus the new select tab and also send the a11y custom event\r\n    const handleTabKeyDown = (\r\n        e: React.KeyboardEvent<HTMLButtonElement>,\r\n        currentTab: DataSearchLiteral,\r\n    ) => {\r\n        if (Keyboard.isKeyPressed(e, KeyCodes.LEFT) || Keyboard.isKeyPressed(e, KeyCodes.RIGHT)) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            let nextTab: SearchType;\r\n            let nextTabRef: React.RefObject<HTMLButtonElement>;\r\n\r\n            if (currentTab === DataSearchTypes.MESSAGES_SEARCH_TYPE && props.isFileAttachmentsEnabled) {\r\n                nextTab = DataSearchTypes.FILES_SEARCH_TYPE;\r\n                nextTabRef = filesTabRef;\r\n            } else {\r\n                nextTab = DataSearchTypes.MESSAGES_SEARCH_TYPE;\r\n                nextTabRef = messagesTabRef;\r\n            }\r\n\r\n            props.onChange(nextTab);\r\n\r\n            // Dispatch the custom a11y focus event to focus the selected tab\r\n            if (nextTabRef.current) {\r\n                setTimeout(() => {\r\n                    document.dispatchEvent(\r\n                        new CustomEvent<A11yFocusEventDetail>(A11yCustomEventTypes.FOCUS, {\r\n                            detail: {\r\n                                target: nextTabRef.current,\r\n                                keyboardOnly: true,\r\n                            },\r\n                        }),\r\n                    );\r\n                }, 0);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (Keyboard.isKeyPressed(e, KeyCodes.ENTER)) {\r\n            props.onChange(currentTab);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='MessagesOrFilesSelector'>\r\n            <div\r\n                className='buttons-container'\r\n                role='tablist'\r\n                aria-label='Messages or Files'\r\n            >\r\n                <button\r\n                    ref={messagesTabRef}\r\n                    role='tab'\r\n                    aria-selected={props.selected === DataSearchTypes.MESSAGES_SEARCH_TYPE ? 'true' : 'false'}\r\n                    tabIndex={props.selected === DataSearchTypes.MESSAGES_SEARCH_TYPE ? 0 : -1}\r\n                    aria-controls='messagesPanel'\r\n                    id='messagesTab'\r\n                    onClick={() => props.onChange(DataSearchTypes.MESSAGES_SEARCH_TYPE)}\r\n                    onKeyDown={(e) => handleTabKeyDown(e, DataSearchTypes.MESSAGES_SEARCH_TYPE)}\r\n                    className={props.selected === DataSearchTypes.MESSAGES_SEARCH_TYPE ? 'active tab messages-tab' : 'tab messages-tab'}\r\n                >\r\n                    <FormattedMessage\r\n                        id='search_bar.messages_tab'\r\n                        defaultMessage='Messages'\r\n                    />\r\n                    <span className='counter'>{props.messagesCounter}</span>\r\n                </button>\r\n                {props.isFileAttachmentsEnabled && (\r\n                    <button\r\n                        ref={filesTabRef}\r\n                        role='tab'\r\n                        aria-selected={props.selected === DataSearchTypes.FILES_SEARCH_TYPE ? 'true' : 'false'}\r\n                        tabIndex={props.selected === DataSearchTypes.FILES_SEARCH_TYPE ? 0 : -1}\r\n                        aria-controls='filesPanel'\r\n                        id='filesTab'\r\n                        onClick={() => props.onChange(DataSearchTypes.FILES_SEARCH_TYPE)}\r\n                        onKeyDown={(e) => handleTabKeyDown(e, DataSearchTypes.FILES_SEARCH_TYPE)}\r\n                        className={props.selected === DataSearchTypes.FILES_SEARCH_TYPE ? 'active tab files-tab' : 'tab files-tab'}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='search_bar.files_tab'\r\n                            defaultMessage='Files'\r\n                        />\r\n                        <span className='counter'>{props.filesCounter}</span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n            {props.crossTeamSearchEnabled && hasMoreThanOneTeam && (\r\n                <div className='team-selector-container'>\r\n                    <SelectTeam\r\n                        selectedTeamId={searchTeam}\r\n                        onTeamSelected={props.onTeamChange}\r\n                    />\r\n                </div>\r\n            )}\r\n            {props.selected === DataSearchTypes.FILES_SEARCH_TYPE && (\r\n                <FilesFilterMenu\r\n                    selectedFilter={props.selectedFilter}\r\n                    onFilter={props.onFilter}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport PostComponent from 'components/post';\r\n\r\nimport {Locations} from 'utils/constants';\r\n\r\ntype Props = {\r\n    a11yIndex: number;\r\n    isFlaggedPosts: boolean;\r\n    isMentionSearch: boolean;\r\n    isPinnedPosts: boolean;\r\n    matches: string[];\r\n    post: Post;\r\n    searchTerm: string;\r\n}\r\n\r\nexport default function PostSearchResultsItem(props: Props) {\r\n    return (\r\n        <div\r\n            className='search-item__container'\r\n            data-testid='search-item-container'\r\n        >\r\n            <PostComponent\r\n                post={props.post}\r\n                matches={props.matches}\r\n                term={(!props.isFlaggedPosts && !props.isPinnedPosts && !props.isMentionSearch) ? props.searchTerm : ''}\r\n                isMentionSearch={props.isMentionSearch}\r\n                a11yIndex={props.a11yIndex}\r\n                location={Locations.SEARCH}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {isSearchTruncated} from 'mattermost-redux/selectors/entities/search';\r\n\r\nimport {getRhsState} from 'selectors/rhs';\r\n\r\nimport CenterMessageLock from 'components/center_message_lock';\r\nimport useGetServerLimits from 'components/common/hooks/useGetServerLimits';\r\n\r\nimport {DataSearchTypes, RHSStates} from 'utils/constants';\r\n\r\nimport './search_limits_banner.scss';\r\n\r\ntype Props = {\r\n    searchType: string;\r\n}\r\n\r\nfunction SearchLimitsBanner(props: Props) {\r\n    const [serverLimits] = useGetServerLimits();\r\n\r\n    // Check if current search results were actually truncated\r\n    const searchTruncated = useSelector((state: GlobalState) => {\r\n        const searchType = props.searchType === DataSearchTypes.FILES_SEARCH_TYPE ? 'files' : 'posts';\r\n        return isSearchTruncated(state, searchType);\r\n    });\r\n\r\n    // Check if RHS is currently showing search results\r\n    const rhsState = useSelector(getRhsState);\r\n    const isShowingSearchResults = rhsState === RHSStates.SEARCH;\r\n\r\n    // Only show banner if search results were actually truncated AND currently showing search results\r\n    if (!searchTruncated || !serverLimits?.postHistoryLimit || !isShowingSearchResults) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id={`${props.searchType}_search_limits_banner`}\r\n            className='SearchLimitsBanner__wrapper'\r\n        >\r\n            <CenterMessageLock/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchLimitsBanner;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport {useIntl, FormattedMessage, defineMessage} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport type {FileSearchResultItem as FileSearchResultItemType} from '@mattermost/types/files';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {debounce} from 'mattermost-redux/actions/helpers';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {isDateLine, getDateForDateLine} from 'mattermost-redux/utils/post_list';\r\n\r\nimport {getFilesDropdownPluginMenuItems} from 'selectors/plugins';\r\n\r\nimport Scrollbars from 'components/common/scrollbars';\r\nimport FileSearchResultItem from 'components/file_search_results';\r\nimport NoResultsIndicator from 'components/no_results_indicator/no_results_indicator';\r\nimport {NoResultsVariant} from 'components/no_results_indicator/types';\r\nimport DateSeparator from 'components/post_view/date_separator';\r\nimport SearchHint from 'components/search_hint/search_hint';\r\nimport SearchResultsHeader from 'components/search_results_header';\r\nimport LoadingWrapper from 'components/widgets/loading/loading_wrapper';\r\n\r\nimport {searchHintOptions, DataSearchTypes} from 'utils/constants';\r\nimport {isFileAttachmentsEnabled} from 'utils/file_utils';\r\n\r\nimport FilesFilterMenu from './files_filter_menu';\r\nimport MessageOrFileSelector from './messages_or_files_selector';\r\nimport PostSearchResultsItem from './post_search_results_item';\r\nimport SearchLimitsBanner from './search_limits_banner';\r\nimport type {Props} from './types';\r\n\r\nimport './search_results.scss';\r\n\r\nconst GET_MORE_BUFFER = 30;\r\n\r\ninterface NoResultsProps {\r\n    variant: NoResultsVariant;\r\n    titleValues?: Record<string, React.ReactNode>;\r\n    subtitleValues?: Record<string, React.ReactNode>;\r\n}\r\n\r\nconst defaultProps: Partial<Props> = {\r\n    isCard: false,\r\n    isOpened: false,\r\n    channelDisplayName: '',\r\n    children: null,\r\n};\r\n\r\nconst SearchResults: React.FC<Props> = (props: Props): JSX.Element => {\r\n    const scrollbars = useRef<HTMLDivElement>(null);\r\n    const [searchType, setSearchType] = useState<string>(props.searchType);\r\n    const filesDropdownPluginMenuItems = useSelector(getFilesDropdownPluginMenuItems);\r\n    const config = useSelector(getConfig);\r\n    const intl = useIntl();\r\n\r\n    useEffect(() => {\r\n        if (props.searchFilterType !== 'all') {\r\n            props.setSearchFilterType('all');\r\n        }\r\n        setSearchType(props.searchType);\r\n        scrollbars.current?.scrollTo({top: 0});\r\n    }, [props.searchTerms]);\r\n\r\n    useEffect(() => {\r\n        setSearchType(props.searchSelectedType);\r\n    }, [props.searchSelectedType]);\r\n\r\n    useEffect(() => {\r\n        // reset search type when switching views\r\n        setSearchType(props.searchType);\r\n    }, [props.isFlaggedPosts, props.isPinnedPosts, props.isMentionSearch]);\r\n\r\n    useEffect(() => {\r\n        // after the first page of search results, there is no way to\r\n        // know if the search has more results to return, so we search\r\n        // for the second page and stop if it yields no results\r\n        if (props.searchPage === 0 && !props.isChannelFiles && !props.isSearchingTerm) {\r\n            setTimeout(() => {\r\n                props.getMorePostsForSearch();\r\n                props.getMoreFilesForSearch();\r\n            }, 100);\r\n        }\r\n    }, [props.searchPage, props.searchTerms, props.isSearchingTerm]);\r\n\r\n    const handleScroll = (): void => {\r\n        if (!props.isFlaggedPosts && !props.isPinnedPosts && !props.isSearchingTerm && !props.isSearchGettingMore && !props.isChannelFiles) {\r\n            const scrollHeight = scrollbars.current?.scrollHeight || 0;\r\n            const scrollTop = scrollbars.current?.scrollTop || 0;\r\n            const clientHeight = scrollbars.current?.clientHeight || 0;\r\n            if ((scrollTop + clientHeight + GET_MORE_BUFFER) >= scrollHeight) {\r\n                if (searchType === DataSearchTypes.FILES_SEARCH_TYPE) {\r\n                    loadMoreFiles();\r\n                } else {\r\n                    loadMorePosts();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const setSearchTeam = (teamId: string): void => {\r\n        props.updateSearchTeam(teamId);\r\n    };\r\n\r\n    const loadMorePosts = debounce(\r\n        () => {\r\n            props.getMorePostsForSearch();\r\n        },\r\n        100,\r\n        false,\r\n        (): void => {},\r\n    );\r\n\r\n    const loadMoreFiles = debounce(\r\n        () => {\r\n            props.getMoreFilesForSearch();\r\n        },\r\n        100,\r\n        false,\r\n        (): void => {},\r\n    );\r\n\r\n    const {\r\n        results,\r\n        fileResults,\r\n        searchTerms,\r\n        isCard,\r\n        isSearchAtEnd,\r\n        isSearchFilesAtEnd,\r\n        isSearchingTerm,\r\n        isFlaggedPosts,\r\n        isSearchingFlaggedPost,\r\n        isPinnedPosts,\r\n        isChannelFiles,\r\n        isSearchingPinnedPost,\r\n        isSideBarExpanded,\r\n        isMentionSearch,\r\n        isOpened,\r\n        updateSearchTerms,\r\n        handleSearchHintSelection,\r\n        searchFilterType,\r\n        setSearchFilterType,\r\n    } = props;\r\n\r\n    const noResults = (!results || !Array.isArray(results) || results.length === 0);\r\n    const noFileResults = (!fileResults || !Array.isArray(fileResults) || fileResults.length === 0);\r\n    const isLoading = isSearchingTerm || isSearchingFlaggedPost || isSearchingPinnedPost || !isOpened;\r\n    const isAtEnd = (searchType === DataSearchTypes.MESSAGES_SEARCH_TYPE && isSearchAtEnd) || (searchType === DataSearchTypes.FILES_SEARCH_TYPE && isSearchFilesAtEnd);\r\n    const showLoadMore = !isAtEnd && !isChannelFiles && !isFlaggedPosts && !isPinnedPosts;\r\n    const isMessagesSearch = (!isFlaggedPosts && !isMentionSearch && !isCard && !isPinnedPosts && !isChannelFiles);\r\n\r\n    let contentItems;\r\n    let loadingMorePostsComponent;\r\n\r\n    let sortedResults: any = results;\r\n\r\n    let titleDescriptor;\r\n    const noResultsProps: NoResultsProps = {\r\n        variant: NoResultsVariant.ChannelSearch,\r\n    };\r\n\r\n    if (isMentionSearch) {\r\n        noResultsProps.variant = NoResultsVariant.Mentions;\r\n\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.title2',\r\n            defaultMessage: 'Recent Mentions',\r\n        });\r\n    } else if (isFlaggedPosts) {\r\n        noResultsProps.variant = NoResultsVariant.FlaggedPosts;\r\n        noResultsProps.subtitleValues = {buttonText: <strong>{\r\n            intl.formatMessage({\r\n                id: 'flag_post.flag',\r\n                defaultMessage: 'Save Message'},\r\n            )}</strong>};\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.title3',\r\n            defaultMessage: 'Saved messages',\r\n        });\r\n    } else if (isPinnedPosts) {\r\n        noResultsProps.variant = NoResultsVariant.PinnedPosts;\r\n        noResultsProps.subtitleValues = {text: <strong>{\r\n            intl.formatMessage({\r\n                id: 'post_info.pin',\r\n                defaultMessage: 'Pin to Channel',\r\n            })}</strong>};\r\n\r\n        sortedResults = [...results];\r\n\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.pinnedMessages',\r\n            defaultMessage: 'Pinned messages',\r\n        });\r\n    } else if (isChannelFiles) {\r\n        if (searchFilterType === 'all') {\r\n            noResultsProps.variant = NoResultsVariant.ChannelFiles;\r\n        } else {\r\n            noResultsProps.variant = NoResultsVariant.ChannelFilesFiltered;\r\n        }\r\n\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.channelFiles',\r\n            defaultMessage: 'Files',\r\n        });\r\n    } else if (isCard) {\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.title5',\r\n            defaultMessage: 'Extra information',\r\n        });\r\n    } else if (!searchTerms && noResults && noFileResults) {\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.search',\r\n            defaultMessage: 'Search',\r\n        });\r\n    } else if (searchType === DataSearchTypes.FILES_SEARCH_TYPE && !isChannelFiles) {\r\n        noResultsProps.variant = NoResultsVariant.Files;\r\n        noResultsProps.titleValues = {searchTerm: `${searchTerms}`};\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.results',\r\n            defaultMessage: 'Search Results',\r\n        });\r\n    } else {\r\n        noResultsProps.titleValues = {channelName: `${searchTerms}`};\r\n\r\n        titleDescriptor = defineMessage({\r\n            id: 'search_header.results',\r\n            defaultMessage: 'Search Results',\r\n        });\r\n    }\r\n\r\n    const formattedTitle = intl.formatMessage(titleDescriptor);\r\n\r\n    const handleOptionSelection = (term: string): void => {\r\n        handleSearchHintSelection();\r\n        updateSearchTerms(term);\r\n    };\r\n\r\n    switch (true) {\r\n    case isLoading:\r\n        contentItems = (\r\n            <div className='sidebar--right__subheader a11y__section'>\r\n                <div className='sidebar--right__loading'>\r\n                    <LoadingWrapper text={defineMessage({id: 'search_header.loading', defaultMessage: 'Searching'})}/>\r\n                </div>\r\n            </div>\r\n        );\r\n        break;\r\n    case (noResults && !searchTerms && !isMentionSearch && !isPinnedPosts && !isFlaggedPosts && !isChannelFiles):\r\n        contentItems = (\r\n            <div className='sidebar--right__subheader search__hints a11y__section'>\r\n                <SearchHint\r\n                    onOptionSelected={handleOptionSelection}\r\n                    options={searchHintOptions}\r\n                />\r\n            </div>\r\n        );\r\n        break;\r\n    case noResults && (searchType === DataSearchTypes.MESSAGES_SEARCH_TYPE && !isChannelFiles):\r\n        contentItems = (\r\n            <div\r\n                className={classNames([\r\n                    'sidebar--right__subheader a11y__section',\r\n                    {'sidebar-expanded': isSideBarExpanded},\r\n                ])}\r\n                aria-live='polite'\r\n            >\r\n                <NoResultsIndicator\r\n                    style={{padding: '48px'}}\r\n                    {...noResultsProps}\r\n                />\r\n            </div>\r\n        );\r\n        break;\r\n    case noFileResults && (searchType === DataSearchTypes.FILES_SEARCH_TYPE || isChannelFiles):\r\n        contentItems = (\r\n            <div\r\n                className={classNames([\r\n                    'sidebar--right__subheader a11y__section',\r\n                    {'sidebar-expanded': isSideBarExpanded},\r\n                ])}\r\n                aria-live='polite'\r\n            >\r\n                <NoResultsIndicator\r\n                    style={{padding: '48px'}}\r\n                    {...noResultsProps}\r\n                />\r\n            </div>\r\n        );\r\n        break;\r\n    default:\r\n        if (searchType === DataSearchTypes.FILES_SEARCH_TYPE || isChannelFiles) {\r\n            sortedResults = fileResults;\r\n        }\r\n\r\n        contentItems = sortedResults.map((item: string|Post|FileSearchResultItemType, index: number) => {\r\n            if (searchType === DataSearchTypes.MESSAGES_SEARCH_TYPE && !props.isChannelFiles) {\r\n                if (typeof item === 'string' && isDateLine(item)) {\r\n                    const date = getDateForDateLine(item);\r\n                    return (\r\n                        <DateSeparator\r\n                            key={date}\r\n                            date={date}\r\n                        />\r\n                    );\r\n                }\r\n\r\n                const post = item as Post;\r\n                return (\r\n                    <PostSearchResultsItem\r\n                        key={post.id}\r\n                        post={post}\r\n                        matches={props.matches[post.id]}\r\n                        searchTerm={searchTerms}\r\n                        isFlaggedPosts={props.isFlaggedPosts}\r\n                        isMentionSearch={props.isMentionSearch}\r\n                        isPinnedPosts={props.isPinnedPosts}\r\n                        a11yIndex={index}\r\n                    />\r\n                );\r\n            }\r\n            return (\r\n                <FileSearchResultItem\r\n                    key={(item as FileSearchResultItemType).id}\r\n                    channelId={(item as FileSearchResultItemType).channel_id}\r\n                    fileInfo={item as FileSearchResultItemType}\r\n                    teamName={props.currentTeamName}\r\n                    pluginMenuItems={filesDropdownPluginMenuItems}\r\n                />\r\n            );\r\n        });\r\n\r\n        loadingMorePostsComponent = (showLoadMore) ? (\r\n            <div className='loading-screen'>\r\n                <div className='loading__content'>\r\n                    <div className='round round-1'/>\r\n                    <div className='round round-2'/>\r\n                    <div className='round round-3'/>\r\n                </div>\r\n            </div>\r\n        ) : null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id='searchContainer'\r\n            className='SearchResults sidebar-right__body'\r\n        >\r\n            <SearchResultsHeader>\r\n                <h2 id='rhsPanelTitle'>\r\n                    {formattedTitle}\r\n                </h2>\r\n                {props.channelDisplayName && <div className='sidebar--right__title__channel'>{props.channelDisplayName}</div>}\r\n            </SearchResultsHeader>\r\n            {isMessagesSearch &&\r\n                <MessageOrFileSelector\r\n                    selected={searchType}\r\n                    selectedFilter={searchFilterType}\r\n                    isFileAttachmentsEnabled={isFileAttachmentsEnabled(config)}\r\n                    messagesCounter={isSearchAtEnd || props.searchPage === 0 ? `${results.length}` : `${results.length}+`}\r\n                    filesCounter={isSearchFilesAtEnd || props.searchPage === 0 ? `${fileResults.length}` : `${fileResults.length}+`}\r\n                    onChange={setSearchType}\r\n                    onFilter={setSearchFilterType}\r\n                    onTeamChange={setSearchTeam}\r\n                    crossTeamSearchEnabled={props.crossTeamSearchEnabled}\r\n                />}\r\n            {isChannelFiles &&\r\n                <div className='channel-files__header'>\r\n                    <div className='channel-files__title'>\r\n                        <FormattedMessage\r\n                            id='search_results.channel-files-header'\r\n                            defaultMessage='Recent files'\r\n                        />\r\n                    </div>\r\n                    <FilesFilterMenu\r\n                        selectedFilter={searchFilterType}\r\n                        onFilter={setSearchFilterType}\r\n                    />\r\n                </div>\r\n            }\r\n            <SearchLimitsBanner searchType={searchType}/>\r\n            <Scrollbars\r\n                ref={scrollbars}\r\n                color='--center-channel-color-rgb'\r\n                onScroll={handleScroll}\r\n            >\r\n                <div\r\n                    id='search-items-container'\r\n                    className={classNames([\r\n                        'search-items-container post-list__table a11y__region',\r\n                        {\r\n                            'no-results': (noResults && searchType === DataSearchTypes.MESSAGES_SEARCH_TYPE) || (noFileResults && (searchType === DataSearchTypes.FILES_SEARCH_TYPE || isChannelFiles)),\r\n                            'channel-files-container': isChannelFiles,\r\n                        },\r\n                    ])}\r\n                    data-a11y-sort-order='3'\r\n                    data-a11y-focus-child={true}\r\n                    data-a11y-loop-navigation={false}\r\n                    aria-label={intl.formatMessage({\r\n                        id: 'accessibility.sections.rhs',\r\n                        defaultMessage: '{regionTitle} complementary region',\r\n                    }, {\r\n                        regionTitle: formattedTitle,\r\n                    })}\r\n                >\r\n                    <div\r\n                        id={`${searchType}Panel`}\r\n                        className='files-or-messages-panel'\r\n                    >\r\n                        {contentItems}\r\n                    </div>\r\n                    {loadingMorePostsComponent}\r\n                </div>\r\n            </Scrollbars>\r\n        </div>\r\n    );\r\n};\r\n\r\nSearchResults.defaultProps = defaultProps;\r\n\r\nexport const arePropsEqual = (props: Props, nextProps: Props): boolean => {\r\n    // Shallow compare for all props except 'results' and 'fileResults'\r\n    for (const key in nextProps) {\r\n        if (!Object.hasOwn(nextProps, key) || key === 'results') {\r\n            continue;\r\n        }\r\n\r\n        if (!Object.hasOwn(nextProps, key) || key === 'fileResults') {\r\n            continue;\r\n        }\r\n\r\n        if (nextProps[key] !== props[key]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Here we do a slightly deeper compare on 'results' because it is frequently a new\r\n    // array but without any actual changes\r\n    const {results} = props;\r\n    const {results: nextResults} = nextProps;\r\n\r\n    if (results.length !== nextResults.length) {\r\n        return false;\r\n    }\r\n\r\n    for (let i = 0; i < results.length; i++) {\r\n        // Only need a shallow compare on each post\r\n        if (results[i] !== nextResults[i]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Here we do a slightly deeper compare on 'fileResults' because it is frequently a new\r\n    // array but without any actual changes\r\n    const {fileResults} = props;\r\n    const {fileResults: nextFileResults} = nextProps;\r\n\r\n    if (fileResults.length !== nextFileResults.length) {\r\n        return false;\r\n    }\r\n\r\n    for (let i = 0; i < fileResults.length; i++) {\r\n        // Only need a shallow compare on each file\r\n        if (fileResults[i] !== nextFileResults[i]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nexport default React.memo(SearchResults, arePropsEqual);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport type {FileSearchResultItem} from '@mattermost/types/files';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport {getSearchFilesResults} from 'mattermost-redux/selectors/entities/files';\r\nimport {getSearchMatches, getSearchResults} from 'mattermost-redux/selectors/entities/posts';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\nimport {makeAddDateSeparatorsForSearchResults} from 'mattermost-redux/utils/post_list';\r\n\r\nimport {\r\n    getSearchResultsTerms,\r\n    getSearchResultsType,\r\n    getIsSearchingTerm,\r\n    getIsSearchingFlaggedPost,\r\n    getIsSearchingPinnedPost,\r\n    getIsSearchGettingMore,\r\n    getCurrentSearchForSearchTeam,\r\n} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport SearchResults from './search_results';\r\nimport type {StateProps, OwnProps} from './types';\r\n\r\nfunction makeMapStateToProps() {\r\n    let results: Post[];\r\n    let fileResults: FileSearchResultItem[];\r\n    let files: FileSearchResultItem[] = [];\r\n    const addDateSeparatorsForSearchResults = makeAddDateSeparatorsForSearchResults();\r\n\r\n    return function mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n        const newResults = getSearchResults(state);\r\n\r\n        // Cache results\r\n        if (newResults && newResults !== results) {\r\n            results = newResults;\r\n\r\n            if (ownProps.isPinnedPosts) {\r\n                results = results.sort((postA: Post | FileSearchResultItem, postB: Post | FileSearchResultItem) => postB.create_at - postA.create_at);\r\n            }\r\n        }\r\n\r\n        const newFilesResults = getSearchFilesResults(state);\r\n\r\n        // Cache files and channels\r\n        if (newFilesResults && newFilesResults !== fileResults) {\r\n            fileResults = newFilesResults;\r\n\r\n            files = [];\r\n            fileResults.forEach((file) => {\r\n                if (!file) {\r\n                    return;\r\n                }\r\n\r\n                files.push(file);\r\n            });\r\n        }\r\n\r\n        // this is basically a hack to make ts compiler happy\r\n        // add correct type when it is known what exactly is returned from the function\r\n        const currentSearch = (getCurrentSearchForSearchTeam(state) as unknown as Record<string, any>) || {};\r\n        const currentTeamName = getCurrentTeam(state)?.name ?? '';\r\n\r\n        const resultsWithDateSeparators = addDateSeparatorsForSearchResults(state, results);\r\n\r\n        return {\r\n            results: resultsWithDateSeparators,\r\n            fileResults: files,\r\n            matches: getSearchMatches(state),\r\n            searchTerms: getSearchResultsTerms(state),\r\n            searchSelectedType: getSearchResultsType(state),\r\n            isSearchingTerm: getIsSearchingTerm(state),\r\n            isSearchingFlaggedPost: getIsSearchingFlaggedPost(state),\r\n            isSearchingPinnedPost: getIsSearchingPinnedPost(state),\r\n            isSearchGettingMore: getIsSearchGettingMore(state),\r\n            isSearchAtEnd: currentSearch.isEnd,\r\n            isSearchFilesAtEnd: currentSearch.isFilesEnd,\r\n            searchPage: currentSearch.params?.page,\r\n            currentTeamName,\r\n        };\r\n    };\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport default connect<StateProps, {}, OwnProps, GlobalState>(makeMapStateToProps)(SearchResults);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect, useState, useRef, useCallback} from 'react';\r\nimport type {ChangeEvent, FormEvent} from 'react';\r\nimport {useIntl} from 'react-intl';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {getCurrentChannelNameForSearchShortcut} from 'mattermost-redux/selectors/entities/channels';\r\n\r\nimport HeaderIconWrapper from 'components/channel_header/components/header_icon_wrapper';\r\nimport SearchBar from 'components/search_bar/search_bar';\r\nimport SearchHint from 'components/search_hint/search_hint';\r\nimport SearchResults from 'components/search_results';\r\nimport type Provider from 'components/suggestion/provider';\r\nimport SearchChannelProvider from 'components/suggestion/search_channel_provider';\r\nimport SearchDateProvider from 'components/suggestion/search_date_provider';\r\nimport SearchUserProvider from 'components/suggestion/search_user_provider';\r\nimport SearchIcon from 'components/widgets/icons/search_icon';\r\nimport Popover from 'components/widgets/popover';\r\n\r\nimport Constants, {searchHintOptions, RHSStates, searchFilesHintOptions} from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\nimport {isServerVersionGreaterThanOrEqualTo} from 'utils/server_version';\r\nimport {isDesktopApp, getDesktopVersion, isMacApp} from 'utils/user_agent';\r\n\r\nimport type {SearchType} from 'types/store/rhs';\r\n\r\nimport type {Props, SearchFilterType} from './types';\r\n\r\ninterface SearchHintOption {\r\n    searchTerm: string;\r\n    message: {\r\n        id: string;\r\n        defaultMessage: string;\r\n    };\r\n}\r\n\r\nconst determineVisibleSearchHintOptions = (searchTerms: string, searchType: SearchType): SearchHintOption[] => {\r\n    let newVisibleSearchHintOptions: SearchHintOption[] = [];\r\n    let options = searchHintOptions;\r\n    if (searchType === 'files') {\r\n        options = searchFilesHintOptions;\r\n    }\r\n\r\n    if (searchTerms.trim() === '') {\r\n        return options;\r\n    }\r\n\r\n    const pretextArray = searchTerms.split(/\\s+/g);\r\n    const pretext = pretextArray[pretextArray.length - 1];\r\n    const penultimatePretext = pretextArray[pretextArray.length - 2];\r\n\r\n    let shouldShowHintOptions: boolean;\r\n\r\n    if (penultimatePretext) {\r\n        shouldShowHintOptions = !(options.some(({searchTerm}) => penultimatePretext.toLowerCase().endsWith(searchTerm.toLowerCase())) && penultimatePretext !== '@');\r\n    } else {\r\n        shouldShowHintOptions = !options.some(({searchTerm}) => searchTerms.toLowerCase().endsWith(searchTerm.toLowerCase())) || searchTerms === '@';\r\n    }\r\n\r\n    if (shouldShowHintOptions) {\r\n        try {\r\n            newVisibleSearchHintOptions = options.filter((option) => {\r\n                if (pretext === '@' && option.searchTerm === 'From:') {\r\n                    return true;\r\n                }\r\n\r\n                return new RegExp(pretext, 'ig').\r\n                    test(option.searchTerm) && option.searchTerm.toLowerCase() !== pretext.toLowerCase();\r\n            });\r\n        } catch {\r\n            newVisibleSearchHintOptions = [];\r\n        }\r\n    }\r\n\r\n    return newVisibleSearchHintOptions;\r\n};\r\n\r\nconst Search = ({\r\n    actions: {\r\n        autocompleteChannelsForSearch,\r\n        autocompleteUsersInTeam,\r\n        closeRightHandSide,\r\n        filterFilesSearchByExt,\r\n        getMoreFilesForSearch,\r\n        getMorePostsForSearch,\r\n        openRHSSearch,\r\n        setRhsExpanded,\r\n        showChannelFiles,\r\n        showSearchResults,\r\n        updateRhsState,\r\n        updateSearchTeam,\r\n        updateSearchTerms,\r\n        updateSearchTermsForShortcut,\r\n        updateSearchType,\r\n    },\r\n    crossTeamSearchEnabled,\r\n    hideMobileSearchBarInRHS,\r\n    isChannelFiles,\r\n    isFlaggedPosts,\r\n    isMentionSearch,\r\n    isMobileView,\r\n    isPinnedPosts,\r\n    isRhsExpanded,\r\n    isSearchingTerm,\r\n    searchTeam,\r\n    searchTerms,\r\n    searchType,\r\n    searchVisible,\r\n    channelDisplayName,\r\n    children,\r\n    currentChannel,\r\n    enableFindShortcut,\r\n    getFocus,\r\n    hideSearchBar,\r\n    isSideBarRight,\r\n    isSideBarRightOpen,\r\n}: Props): JSX.Element => {\r\n    const intl = useIntl();\r\n    const currentChannelName = useSelector(getCurrentChannelNameForSearchShortcut);\r\n\r\n    // generate intial component state and setters\r\n    const [focused, setFocused] = useState<boolean>(false);\r\n    const [dropdownFocused, setDropdownFocused] = useState<boolean>(false);\r\n    const [keepInputFocused, setKeepInputFocused] = useState<boolean>(false);\r\n    const [indexChangedViaKeyPress, setIndexChangedViaKeyPress] = useState<boolean>(false);\r\n    const [highlightedSearchHintIndex, setHighlightedSearchHintIndex] = useState<number>(-1);\r\n    const [visibleSearchHintOptions, setVisibleSearchHintOptions] = useState<SearchHintOption[]>(\r\n        determineVisibleSearchHintOptions(searchTerms, searchType),\r\n    );\r\n    const [searchFilterType, setSearchFilterType] = useState<SearchFilterType>('all');\r\n\r\n    const suggestionProviders = useRef<Provider[]>([\r\n        new SearchDateProvider(),\r\n        new SearchChannelProvider(autocompleteChannelsForSearch),\r\n        new SearchUserProvider(autocompleteUsersInTeam),\r\n    ]);\r\n\r\n    const isDesktop = isDesktopApp() && isServerVersionGreaterThanOrEqualTo(getDesktopVersion(), '4.7.0');\r\n    useEffect(() => {\r\n        if (!enableFindShortcut) {\r\n            return undefined;\r\n        }\r\n\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (Keyboard.cmdOrCtrlPressed(e) && Keyboard.isKeyPressed(e, Constants.KeyCodes.F)) {\r\n                if (!isDesktop && !e.shiftKey) {\r\n                    return;\r\n                }\r\n\r\n                // Special case for Mac Desktop xApp where Ctrl+Cmd+F triggers full screen view\r\n                if (isMacApp() && e.ctrlKey) {\r\n                    return;\r\n                }\r\n\r\n                e.preventDefault();\r\n                if (hideSearchBar) {\r\n                    openRHSSearch();\r\n                    setKeepInputFocused(true);\r\n                }\r\n                if (currentChannelName) {\r\n                    updateSearchTermsForShortcut();\r\n                }\r\n                handleFocus();\r\n            }\r\n        };\r\n\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        return () => {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n        };\r\n    }, [hideSearchBar, currentChannelName]);\r\n\r\n    useEffect((): void => {\r\n        if (isMobileView && isSideBarRight) {\r\n            handleFocus();\r\n        }\r\n    }, [isMobileView, isSideBarRight]);\r\n\r\n    useEffect((): void => {\r\n        if (!isMobileView) {\r\n            setVisibleSearchHintOptions(determineVisibleSearchHintOptions(searchTerms, searchType));\r\n        }\r\n    }, [isMobileView, searchTerms, searchType]);\r\n\r\n    useEffect((): void => {\r\n        if (!isMobileView && focused && keepInputFocused) {\r\n            handleBlur();\r\n        }\r\n    }, [isMobileView, searchTerms]);\r\n\r\n    const getMorePostsForSearchCallback = useCallback(() => {\r\n        let team = searchTeam;\r\n        if (isMentionSearch) {\r\n            team = '';\r\n        }\r\n        getMorePostsForSearch(team);\r\n    }, [searchTeam, isMentionSearch, getMorePostsForSearch]);\r\n\r\n    const getMoreFilesForSearchCallback = useCallback(() => {\r\n        let team = searchTeam;\r\n        if (isMentionSearch) {\r\n            team = '';\r\n        }\r\n        getMoreFilesForSearch(team);\r\n    }, [searchTeam, isMentionSearch, getMoreFilesForSearch]);\r\n\r\n    // handle cloding of rhs-flyout\r\n    const handleClose = (): void => closeRightHandSide();\r\n\r\n    // focus the search input\r\n    const handleFocus = (): void => setFocused(true);\r\n\r\n    // release focus from the search input or unset `keepInputFocused` value\r\n    // `keepInputFocused` is used to keep the search input focused when a\r\n    // user selects a suggestion from `SearchHint` with a click\r\n    const handleBlur = (): void => {\r\n        // add time out so that the pinned and member buttons are clickable\r\n        // when focus is released from the search box.\r\n        setTimeout((): void => {\r\n            if (keepInputFocused) {\r\n                setKeepInputFocused(false);\r\n            } else {\r\n                setFocused(false);\r\n            }\r\n        }, 0);\r\n        updateHighlightedSearchHint();\r\n    };\r\n\r\n    const handleDropdownBlur = () => setDropdownFocused(false);\r\n\r\n    const handleDropdownFocus = () => setDropdownFocused(true);\r\n\r\n    const handleSearchHintSelection = (): void => {\r\n        if (focused) {\r\n            setKeepInputFocused(true);\r\n        } else {\r\n            setFocused(true);\r\n        }\r\n    };\r\n\r\n    const handleAddSearchTerm = (term: string): void => {\r\n        const pretextArray = searchTerms?.split(' ') || [];\r\n        pretextArray.pop();\r\n        pretextArray.push(term.toLowerCase());\r\n        handleUpdateSearchTerms(pretextArray.join(' '));\r\n    };\r\n\r\n    const handleUpdateSearchTeamFromResult = async (teamId: string) => {\r\n        updateSearchTeam(teamId);\r\n        const newTerms = searchTerms.\r\n            replace(/\\bin:[^\\s]*/gi, '').replace(/\\s{2,}/g, ' ').\r\n            replace(/\\bfrom:[^\\s]*/gi, '').replace(/\\s{2,}/g, ' ');\r\n\r\n        if (newTerms.trim() !== searchTerms.trim()) {\r\n            updateSearchTerms(newTerms);\r\n        }\r\n\r\n        handleSearch().then(() => {\r\n            setKeepInputFocused(false);\r\n            setFocused(false);\r\n        });\r\n    };\r\n\r\n    const handleUpdateSearchTerms = (terms: string): void => {\r\n        updateSearchTerms(terms);\r\n        updateHighlightedSearchHint();\r\n    };\r\n\r\n    const handleOnSearchTypeSelected = (searchType || searchTerms) ? undefined : (value: SearchType) => {\r\n        updateSearchType(value);\r\n        if (!searchType) {\r\n            setDropdownFocused(false);\r\n        }\r\n        setFocused(true);\r\n    };\r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>): void => {\r\n        const term = e.target.value;\r\n        updateSearchTerms(term);\r\n    };\r\n\r\n    // call this function without parameters to reset `SearchHint`\r\n    const updateHighlightedSearchHint = (indexDelta = 0, changedViaKeyPress = false): void => {\r\n        if (Math.abs(indexDelta) > 1) {\r\n            return;\r\n        }\r\n\r\n        let newIndex = highlightedSearchHintIndex + indexDelta;\r\n\r\n        switch (indexDelta) {\r\n        case 1:\r\n            // KEY.DOWN\r\n            // is it at the end of the list?\r\n            newIndex = newIndex === visibleSearchHintOptions.length ? 0 : newIndex;\r\n            break;\r\n        case -1:\r\n            // KEY.UP\r\n            // is it at the start of the list (or initial value)?\r\n            newIndex = newIndex < 0 ? visibleSearchHintOptions.length - 1 : newIndex;\r\n            break;\r\n        case 0:\r\n        default:\r\n            // reset the index (e.g. on blur)\r\n            newIndex = -1;\r\n        }\r\n\r\n        setHighlightedSearchHintIndex(newIndex);\r\n        setIndexChangedViaKeyPress(changedViaKeyPress);\r\n    };\r\n\r\n    const handleEnterKey = (e: ChangeEvent<HTMLInputElement>): void => {\r\n        e.preventDefault();\r\n\r\n        if (indexChangedViaKeyPress) {\r\n            setKeepInputFocused(true);\r\n            if (!searchType && !searchTerms) {\r\n                updateSearchType(highlightedSearchHintIndex === 0 ? 'messages' : 'files');\r\n                setHighlightedSearchHintIndex(-1);\r\n            } else {\r\n                handleAddSearchTerm(visibleSearchHintOptions[highlightedSearchHintIndex].searchTerm);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (isMentionSearch) {\r\n            updateRhsState(RHSStates.SEARCH);\r\n        }\r\n\r\n        handleSearch().then(() => {\r\n            setKeepInputFocused(false);\r\n            setFocused(false);\r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e: FormEvent<HTMLFormElement>): void => {\r\n        e.preventDefault();\r\n\r\n        handleSearch().then(() => {\r\n            setKeepInputFocused(false);\r\n            setFocused(false);\r\n        });\r\n    };\r\n\r\n    const handleSearch = async (): Promise<void> => {\r\n        const terms = searchTerms.trim();\r\n\r\n        if (terms.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const {error} = await showSearchResults(Boolean(isMentionSearch)) as any;\r\n\r\n        if (!error) {\r\n            handleSearchOnSuccess();\r\n        }\r\n    };\r\n\r\n    const handleSearchOnSuccess = (): void => {\r\n        if (isMobileView) {\r\n            handleClear();\r\n        }\r\n    };\r\n\r\n    const handleClear = (): void => {\r\n        if (isMentionSearch) {\r\n            setFocused(false);\r\n            updateRhsState(RHSStates.SEARCH);\r\n        }\r\n        updateSearchTerms('');\r\n        updateSearchTeam(null);\r\n        updateSearchType('');\r\n    };\r\n\r\n    const handleShrink = (): void => {\r\n        setRhsExpanded(false);\r\n    };\r\n\r\n    const handleSetSearchFilter = (filterType: SearchFilterType): void => {\r\n        switch (filterType) {\r\n        case 'documents':\r\n            filterFilesSearchByExt(['doc', 'pdf', 'docx', 'odt', 'rtf', 'txt']);\r\n            break;\r\n        case 'spreadsheets':\r\n            filterFilesSearchByExt(['xls', 'xlsx', 'ods']);\r\n            break;\r\n        case 'presentations':\r\n            filterFilesSearchByExt(['ppt', 'pptx', 'odp']);\r\n            break;\r\n        case 'code':\r\n            filterFilesSearchByExt(['py', 'go', 'java', 'kt', 'c', 'cpp', 'h', 'html', 'js', 'ts', 'cs', 'vb', 'php', 'pl', 'r', 'rb', 'sql', 'swift', 'json']);\r\n            break;\r\n        case 'images':\r\n            filterFilesSearchByExt(['png', 'jpg', 'jpeg', 'bmp', 'tiff', 'svg', 'psd', 'xcf']);\r\n            break;\r\n        case 'audio':\r\n            filterFilesSearchByExt(['ogg', 'mp3', 'wav', 'flac']);\r\n            break;\r\n        case 'video':\r\n            filterFilesSearchByExt(['ogm', 'mp4', 'avi', 'webm', 'mov', 'mkv', 'mpeg', 'mpg']);\r\n            break;\r\n        default:\r\n            filterFilesSearchByExt([]);\r\n        }\r\n        setSearchFilterType(filterType);\r\n        if (isChannelFiles && currentChannel) {\r\n            showChannelFiles(currentChannel.id);\r\n        } else {\r\n            showSearchResults(false);\r\n        }\r\n    };\r\n\r\n    const setHoverHintIndex = (_highlightedSearchHintIndex: number): void => {\r\n        setHighlightedSearchHintIndex(_highlightedSearchHintIndex);\r\n        setIndexChangedViaKeyPress(false);\r\n    };\r\n\r\n    const searchButtonClick = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n\r\n        openRHSSearch();\r\n    };\r\n\r\n    const renderHintPopover = (): JSX.Element => {\r\n        let termsUsed = 0;\r\n\r\n        searchTerms?.split(/[: ]/g).forEach((word: string): void => {\r\n            let options = searchHintOptions;\r\n            if (searchType === 'files') {\r\n                options = searchFilesHintOptions;\r\n            }\r\n            if (options.some(({searchTerm}) => searchTerm.toLowerCase() === word.toLowerCase())) {\r\n                termsUsed++;\r\n            }\r\n        });\r\n\r\n        if (visibleSearchHintOptions.length === 0 || isMentionSearch) {\r\n            return <></>;\r\n        }\r\n\r\n        const helpClass = `search-help-popover${((dropdownFocused || focused) && termsUsed <= 2) ? ' visible' : ''}`;\r\n\r\n        return (\r\n            <Popover\r\n                id={`${isSideBarRight ? 'sbr-' : ''}searchbar-help-popup`}\r\n                placement='bottom'\r\n                className={helpClass}\r\n            >\r\n                <SearchHint\r\n                    options={visibleSearchHintOptions}\r\n                    withTitle={true}\r\n                    onOptionSelected={handleAddSearchTerm}\r\n                    onMouseDown={handleSearchHintSelection}\r\n                    highlightedIndex={highlightedSearchHintIndex}\r\n                    onOptionHover={setHoverHintIndex}\r\n                    onSearchTypeSelected={handleOnSearchTypeSelected}\r\n                    onElementBlur={handleDropdownBlur}\r\n                    onElementFocus={handleDropdownFocus}\r\n                    searchType={searchType}\r\n                />\r\n            </Popover>\r\n        );\r\n    };\r\n\r\n    const renderSearchBar = (): JSX.Element => (\r\n        <>\r\n            <div className='sidebar-collapse__container'>\r\n                <button\r\n                    id={isSideBarRight ? 'sbrSidebarCollapse' : 'sidebarCollapse'}\r\n                    className='sidebar-collapse'\r\n                    onClick={handleClose}\r\n                    aria-label={intl.formatMessage({id: 'channel_header.back', defaultMessage: 'Back to channel'})}\r\n                >\r\n                    <span\r\n                        className='fa fa-2x fa-angle-left'\r\n                        title={intl.formatMessage({id: 'generic_icons.back', defaultMessage: 'Back Icon'})}\r\n                        aria-hidden='true'\r\n                    />\r\n                </button>\r\n            </div>\r\n            <SearchBar\r\n                updateHighlightedSearchHint={updateHighlightedSearchHint}\r\n                handleEnterKey={handleEnterKey}\r\n                handleClear={handleClear}\r\n                handleChange={handleChange}\r\n                handleSubmit={handleSubmit}\r\n                handleFocus={handleFocus}\r\n                handleBlur={handleBlur}\r\n                keepFocused={keepInputFocused}\r\n                setKeepFocused={setKeepInputFocused}\r\n                isFocused={focused}\r\n                suggestionProviders={suggestionProviders.current}\r\n                isSideBarRight={isSideBarRight}\r\n                isSearchingTerm={isSearchingTerm}\r\n                getFocus={getFocus}\r\n                searchTerms={searchTerms}\r\n                searchType={searchType}\r\n                clearSearchType={() => updateSearchType('')}\r\n            >\r\n                {!isMobileView && renderHintPopover()}\r\n            </SearchBar>\r\n        </>\r\n    );\r\n\r\n    // when inserted in RHSSearchNav component, just return SearchBar\r\n    if (!isSideBarRight) {\r\n        if (hideSearchBar) {\r\n            return (\r\n                <HeaderIconWrapper\r\n                    buttonId={'channelHeaderSearchButton'}\r\n                    onClick={searchButtonClick}\r\n                    tooltip={intl.formatMessage({id: 'channel_header.search', defaultMessage: 'Search'})}\r\n                >\r\n                    <SearchIcon\r\n                        className='icon icon--standard'\r\n                        aria-hidden='true'\r\n                    />\r\n                </HeaderIconWrapper>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='searchbarContainer'\r\n                className={'search-bar-container--global'}\r\n            >\r\n                <div className='sidebar-right__table'>\r\n                    {renderSearchBar()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className='sidebar--right__content'>\r\n            {!hideMobileSearchBarInRHS && (\r\n                <div className='search-bar__container channel-header alt'>\r\n                    <div className='sidebar-right__table'>\r\n                        {renderSearchBar()}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {searchVisible ? (\r\n                <SearchResults\r\n                    isMentionSearch={isMentionSearch}\r\n                    isFlaggedPosts={isFlaggedPosts}\r\n                    isPinnedPosts={isPinnedPosts}\r\n                    isChannelFiles={isChannelFiles}\r\n                    shrink={handleShrink}\r\n                    channelDisplayName={channelDisplayName}\r\n                    isOpened={isSideBarRightOpen}\r\n                    updateSearchTerms={handleAddSearchTerm}\r\n                    updateSearchTeam={handleUpdateSearchTeamFromResult}\r\n                    handleSearchHintSelection={handleSearchHintSelection}\r\n                    isSideBarExpanded={isRhsExpanded}\r\n                    getMorePostsForSearch={getMorePostsForSearchCallback}\r\n                    getMoreFilesForSearch={getMoreFilesForSearchCallback}\r\n                    setSearchFilterType={handleSetSearchFilter}\r\n                    searchFilterType={searchFilterType}\r\n                    setSearchType={(value: SearchType) => updateSearchType(value)}\r\n                    searchType={searchType || 'messages'}\r\n                    crossTeamSearchEnabled={crossTeamSearchEnabled}\r\n                />\r\n            ) : children}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst defaultProps: Partial<Props> = {\r\n    searchTerms: '',\r\n    channelDisplayName: '',\r\n    isSideBarRight: false,\r\n    hideMobileSearchBarInRHS: false,\r\n    getFocus: () => {},\r\n};\r\n\r\nSearch.defaultProps = defaultProps;\r\n\r\nexport default React.memo(Search);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {ServerError} from '@mattermost/types/errors';\r\n\r\nimport {getMorePostsForSearch, getMoreFilesForSearch} from 'mattermost-redux/actions/search';\r\nimport {getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getIsCrossTeamSearchEnabled} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport {autocompleteChannelsForSearch} from 'actions/channel_actions';\r\nimport {autocompleteUsersInCurrentTeam} from 'actions/user_actions';\r\nimport {\r\n    updateSearchTerms,\r\n    updateSearchTeam,\r\n    updateSearchTermsForShortcut,\r\n    showSearchResults,\r\n    showChannelFiles,\r\n    closeRightHandSide,\r\n    updateRhsState,\r\n    setRhsExpanded,\r\n    openRHSSearch,\r\n    filterFilesSearchByExt,\r\n    updateSearchType,\r\n} from 'actions/views/rhs';\r\nimport {getRhsState, getSearchTeam, getSearchTerms, getSearchType, getIsSearchingTerm, getIsRhsOpen, getIsRhsExpanded} from 'selectors/rhs';\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport Search from './search';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const rhsState = getRhsState(state);\r\n    const currentChannel = getCurrentChannel(state);\r\n    const isMobileView = getIsMobileView(state);\r\n    const isRhsOpen = getIsRhsOpen(state);\r\n    const crossTeamSearchEnabled = getIsCrossTeamSearchEnabled(state);\r\n\r\n    return {\r\n        currentChannel,\r\n        isRhsExpanded: getIsRhsExpanded(state),\r\n        isSearchingTerm: getIsSearchingTerm(state),\r\n        searchTerms: getSearchTerms(state),\r\n        searchTeam: getSearchTeam(state),\r\n        searchType: getSearchType(state),\r\n        searchVisible: rhsState !== null && (![\r\n            RHSStates.PLUGIN,\r\n            RHSStates.CHANNEL_INFO,\r\n            RHSStates.CHANNEL_MEMBERS,\r\n            RHSStates.EDIT_HISTORY,\r\n        ].includes(rhsState)),\r\n        hideMobileSearchBarInRHS: isMobileView && isRhsOpen && rhsState === RHSStates.CHANNEL_INFO,\r\n        isMentionSearch: rhsState === RHSStates.MENTION,\r\n        isFlaggedPosts: rhsState === RHSStates.FLAG,\r\n        isPinnedPosts: rhsState === RHSStates.PIN,\r\n        isChannelFiles: rhsState === RHSStates.CHANNEL_FILES,\r\n        isMobileView,\r\n        crossTeamSearchEnabled,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    const autocompleteChannels = (term: string, teamId: string, success?: (channels: Channel[]) => void, error?: (err: ServerError) => void) => {\r\n        return autocompleteChannelsForSearch(term, success, error);\r\n    };\r\n\r\n    return {\r\n        actions: bindActionCreators({\r\n            updateSearchTerms,\r\n            updateSearchTeam,\r\n            updateSearchTermsForShortcut,\r\n            updateSearchType,\r\n            showSearchResults,\r\n            showChannelFiles,\r\n            setRhsExpanded,\r\n            closeRightHandSide,\r\n            autocompleteChannelsForSearch: autocompleteChannels,\r\n            autocompleteUsersInTeam: autocompleteUsersInCurrentTeam,\r\n            updateRhsState,\r\n            getMorePostsForSearch,\r\n            openRHSSearch,\r\n            getMoreFilesForSearch,\r\n            filterFilesSearchByExt,\r\n        }, dispatch),\r\n    };\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport SearchResultsHeader from 'components/search_results_header';\r\n\r\nimport Pluggable from 'plugins/pluggable';\r\n\r\nexport type Props = {\r\n    showPluggable: boolean;\r\n    pluggableId: string;\r\n    title: React.ReactNode;\r\n}\r\n\r\nconst RhsPlugin = ({showPluggable, pluggableId, title}: Props) => {\r\n    return (\r\n        <div\r\n            id='rhsContainer'\r\n            className='sidebar-right__body'\r\n        >\r\n            <SearchResultsHeader>\r\n                {title}\r\n            </SearchResultsHeader>\r\n            {\r\n                showPluggable &&\r\n                <Pluggable\r\n                    pluggableName='RightHandSidebarComponent'\r\n                    pluggableId={pluggableId}\r\n                />\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(RhsPlugin);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getPluggableId} from 'selectors/rhs';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RHSPlugin from './rhs_plugin';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const rhsPlugins = state.plugins.components.RightHandSidebarComponent;\r\n    const pluggableId = getPluggableId(state);\r\n    const pluginComponent = rhsPlugins.find((element) => element.id === pluggableId);\r\n    const pluginTitle = pluginComponent ? pluginComponent.title : '';\r\n\r\n    return {\r\n        showPluggable: Boolean(pluginComponent),\r\n        pluggableId,\r\n        title: pluginTitle,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(RHSPlugin);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {ProductIdentifier} from '@mattermost/types/products';\r\nimport type {Team} from '@mattermost/types/teams';\r\n\r\nimport ChannelInfoRhs from 'components/channel_info_rhs';\r\nimport ChannelMembersRhs from 'components/channel_members_rhs';\r\nimport FileUploadOverlay from 'components/file_upload_overlay';\r\nimport {DropOverlayIdRHS} from 'components/file_upload_overlay/file_upload_overlay';\r\nimport LoadingScreen from 'components/loading_screen';\r\nimport PostEditHistory from 'components/post_edit_history';\r\nimport ResizableRhs from 'components/resizable_sidebar/resizable_rhs';\r\nimport RhsCard from 'components/rhs_card';\r\nimport RhsThread from 'components/rhs_thread';\r\nimport Search from 'components/search/index';\r\n\r\nimport RhsPlugin from 'plugins/rhs_plugin';\r\nimport a11yController from 'utils/a11y_controller_instance';\r\nimport {focusElement, getFirstFocusableChild} from 'utils/a11y_utils';\r\nimport Constants from 'utils/constants';\r\nimport {cmdOrCtrlPressed, isKeyPressed} from 'utils/keyboard';\r\nimport {isMac} from 'utils/user_agent';\r\n\r\nimport type {RhsState} from 'types/store/rhs';\r\n\r\nexport type Props = {\r\n    isExpanded: boolean;\r\n    isOpen: boolean;\r\n    channel?: Channel;\r\n    team?: Team;\r\n    teamId: Team['id'];\r\n    productId: ProductIdentifier;\r\n    postRightVisible: boolean;\r\n    postCardVisible: boolean;\r\n    searchVisible: boolean;\r\n    isPinnedPosts: boolean;\r\n    isChannelFiles: boolean;\r\n    isChannelInfo: boolean;\r\n    isChannelMembers: boolean;\r\n    isPluginView: boolean;\r\n    isPostEditHistory: boolean;\r\n    previousRhsState: RhsState;\r\n    rhsChannel?: Channel;\r\n    selectedPostId: string;\r\n    selectedPostCardId: string;\r\n    isSavedPosts?: boolean;\r\n    isRecentMentions?: boolean;\r\n    ariaLabel?: string;\r\n    ariaLabeledby?: string;\r\n    actions: {\r\n        setRhsExpanded: (expanded: boolean) => void;\r\n        showPinnedPosts: (channelId: string) => void;\r\n        openRHSSearch: () => void;\r\n        closeRightHandSide: () => void;\r\n        openAtPrevious: (previous: Partial<Props> | undefined) => void;\r\n        updateSearchTerms: (terms: string) => void;\r\n        showChannelFiles: (channelId: string) => void;\r\n        showChannelInfo: (channelId: string) => void;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    isOpened: boolean;\r\n}\r\n\r\nexport default class SidebarRight extends React.PureComponent<Props, State> {\r\n    sidebarRight: React.RefObject<HTMLDivElement>;\r\n    sidebarRightWidthHolder: React.RefObject<HTMLDivElement>;\r\n    previous: Partial<Props> | undefined = undefined;\r\n    focusSearchBar?: () => void;\r\n    private previousActiveElement: HTMLElement | null = null;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.sidebarRightWidthHolder = React.createRef<HTMLDivElement>();\r\n        this.sidebarRight = React.createRef<HTMLDivElement>();\r\n        this.state = {\r\n            isOpened: false,\r\n        };\r\n    }\r\n\r\n    setPrevious = () => {\r\n        if (!this.props.isOpen) {\r\n            return;\r\n        }\r\n\r\n        this.previous = {\r\n            searchVisible: this.props.searchVisible,\r\n            isPinnedPosts: this.props.isPinnedPosts,\r\n            isRecentMentions: this.props.isRecentMentions,\r\n            isSavedPosts: this.props.isSavedPosts,\r\n            isChannelFiles: this.props.isChannelFiles,\r\n            isChannelInfo: this.props.isChannelInfo,\r\n            isChannelMembers: this.props.isChannelMembers,\r\n            isPostEditHistory: this.props.isPostEditHistory,\r\n            selectedPostId: this.props.selectedPostId,\r\n            selectedPostCardId: this.props.selectedPostCardId,\r\n            previousRhsState: this.props.previousRhsState,\r\n        };\r\n    };\r\n\r\n    handleShortcut = (e: KeyboardEvent) => {\r\n        const channelInfoShortcutMac = isMac() && e.shiftKey;\r\n        const channelInfoShortcut = !isMac() && e.altKey;\r\n\r\n        if (cmdOrCtrlPressed(e, true)) {\r\n            if (e.shiftKey && isKeyPressed(e, Constants.KeyCodes.PERIOD)) {\r\n                e.preventDefault();\r\n                if (this.props.isOpen) {\r\n                    if (this.props.isExpanded) {\r\n                        this.props.actions.setRhsExpanded(false);\r\n                    } else {\r\n                        this.props.actions.setRhsExpanded(true);\r\n                    }\r\n                } else {\r\n                    this.props.actions.openAtPrevious(this.previous);\r\n                }\r\n            } else if (isKeyPressed(e, Constants.KeyCodes.PERIOD)) {\r\n                e.preventDefault();\r\n                if (this.props.isOpen) {\r\n                    this.props.actions.closeRightHandSide();\r\n                } else {\r\n                    this.props.actions.openAtPrevious(this.previous);\r\n                }\r\n            } else if (isKeyPressed(e, Constants.KeyCodes.I) && (channelInfoShortcutMac || channelInfoShortcut)) {\r\n                e.preventDefault();\r\n                if (this.props.isOpen && this.props.isChannelInfo) {\r\n                    this.props.actions.closeRightHandSide();\r\n                } else if (this.props.channel) {\r\n                    this.props.actions.showChannelInfo(this.props.channel.id);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    handleRHSFocus(prevProps: Props) {\r\n        const wasOpen = prevProps.isOpen;\r\n        const isOpen = this.props.isOpen;\r\n\r\n        const contentChanged = (\r\n            (this.props.isPinnedPosts !== prevProps.isPinnedPosts) ||\r\n            (this.props.isRecentMentions !== prevProps.isRecentMentions) ||\r\n            (this.props.isSavedPosts !== prevProps.isSavedPosts) ||\r\n            (this.props.isChannelFiles !== prevProps.isChannelFiles) ||\r\n            (this.props.isChannelInfo !== prevProps.isChannelInfo) ||\r\n            (this.props.isChannelMembers !== prevProps.isChannelMembers) ||\r\n            (this.props.isPostEditHistory !== prevProps.isPostEditHistory) ||\r\n            (this.props.rhsChannel?.id !== prevProps.rhsChannel?.id) ||\r\n            (this.props.teamId !== prevProps.teamId)\r\n        );\r\n\r\n        if (this.props.isOpen && (contentChanged || (!wasOpen && isOpen))) {\r\n            this.previousActiveElement = document.activeElement as HTMLElement;\r\n\r\n            // Focus the sidebar after a tick\r\n            setTimeout(() => {\r\n                if (this.sidebarRight.current) {\r\n                    const rhsContainer = this.sidebarRight.current.querySelector('#rhsContainer') as HTMLElement;\r\n                    const searchContainer = this.sidebarRight.current.querySelector('#searchContainer') as HTMLElement;\r\n                    if (rhsContainer || searchContainer) {\r\n                        const firstFocusable = getFirstFocusableChild(rhsContainer || searchContainer);\r\n                        focusElement(firstFocusable || rhsContainer, true);\r\n                    } else {\r\n                        // Fallback: if rhsContainer isn't found, use sidebarRight.current directly.\r\n                        const firstFocusable = getFirstFocusableChild(this.sidebarRight.current);\r\n                        focusElement(firstFocusable || this.sidebarRight.current, true);\r\n                    }\r\n                }\r\n            }, 0);\r\n        } else if (!this.props.isOpen && wasOpen) {\r\n            // RHS just was closed, restore focus to the previous element had it\r\n            if (a11yController.originElement) {\r\n                a11yController.restoreOriginFocus();\r\n            } else {\r\n                setTimeout(() => {\r\n                    if (this.previousActiveElement) {\r\n                        focusElement(this.previousActiveElement, true);\r\n                        this.previousActiveElement = null;\r\n                    }\r\n                }, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleShortcut);\r\n        document.addEventListener('mousedown', this.handleClickOutside);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleShortcut);\r\n        document.removeEventListener('mousedown', this.handleClickOutside);\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        this.handleRHSFocus(prevProps);\r\n\r\n        const {actions, isChannelFiles, isPinnedPosts, rhsChannel, channel} = this.props;\r\n        if (isPinnedPosts && prevProps.isPinnedPosts === isPinnedPosts && rhsChannel && rhsChannel.id !== prevProps.rhsChannel?.id) {\r\n            actions.showPinnedPosts(rhsChannel.id);\r\n        }\r\n\r\n        if (isChannelFiles && prevProps.isChannelFiles === isChannelFiles && rhsChannel && rhsChannel.id !== prevProps.rhsChannel?.id) {\r\n            actions.showChannelFiles(rhsChannel.id);\r\n        }\r\n\r\n        // in the case of navigating to another channel\r\n        // or from global threads to a channel\r\n        // we shrink the sidebar\r\n        if (\r\n            (channel && prevProps.channel && (channel.id !== prevProps.channel.id)) ||\r\n            (channel && !prevProps.channel)\r\n        ) {\r\n            this.props.actions.setRhsExpanded(false);\r\n        }\r\n\r\n        // close when changing products or teams\r\n        if (\r\n            (prevProps.teamId && this.props.teamId !== prevProps.teamId) ||\r\n            this.props.productId !== prevProps.productId\r\n        ) {\r\n            this.props.actions.closeRightHandSide();\r\n        }\r\n\r\n        this.setPrevious();\r\n    }\r\n\r\n    handleClickOutside = (e: MouseEvent) => {\r\n        if (\r\n            (this.props.isOpen && this.props.isExpanded) && // can be collapsed\r\n            e.target && // has target\r\n            document.getElementById('root')?.contains(e.target as Element) &&//  within Root\r\n            !this.sidebarRight.current?.contains(e.target as Element) && // not within RHS\r\n            !document.getElementById('global-header')?.contains(e.target as Element) && // not within Global Header\r\n            !document.querySelector('.app-bar')?.contains(e.target as Element) // not within App Bar\r\n        ) {\r\n            this.props.actions.setRhsExpanded(false);\r\n        }\r\n    };\r\n\r\n    handleUpdateSearchTerms = (term: string) => {\r\n        this.props.actions.updateSearchTerms(term);\r\n        this.focusSearchBar?.();\r\n    };\r\n\r\n    getSearchBarFocus = (focusSearchBar: () => void) => {\r\n        this.focusSearchBar = focusSearchBar;\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            team,\r\n            channel,\r\n            rhsChannel,\r\n            postRightVisible,\r\n            postCardVisible,\r\n            previousRhsState,\r\n            searchVisible,\r\n            isPluginView,\r\n            isOpen,\r\n            isChannelInfo,\r\n            isChannelMembers,\r\n            isExpanded,\r\n            isPostEditHistory,\r\n        } = this.props;\r\n\r\n        if (!isOpen) {\r\n            return null;\r\n        }\r\n\r\n        const teamNeeded = true;\r\n        let selectedChannelNeeded;\r\n        let currentChannelNeeded;\r\n        let content = null;\r\n\r\n        if (postRightVisible) {\r\n            selectedChannelNeeded = true;\r\n            content = (\r\n                <div className='post-right__container'>\r\n                    <FileUploadOverlay\r\n                        overlayType='right'\r\n                        id={DropOverlayIdRHS}\r\n                    />\r\n                    <RhsThread previousRhsState={previousRhsState}/>\r\n                </div>\r\n            );\r\n        } else if (postCardVisible) {\r\n            content = <RhsCard previousRhsState={previousRhsState}/>;\r\n        } else if (isPluginView) {\r\n            content = <RhsPlugin/>;\r\n        } else if (isChannelInfo) {\r\n            currentChannelNeeded = true;\r\n            content = <ChannelInfoRhs/>;\r\n        } else if (isChannelMembers) {\r\n            currentChannelNeeded = true;\r\n            content = <ChannelMembersRhs/>;\r\n        } else if (isPostEditHistory) {\r\n            content = <PostEditHistory/>;\r\n        }\r\n\r\n        const isRHSLoading = Boolean(\r\n            (teamNeeded && !team) ||\r\n            (selectedChannelNeeded && !rhsChannel) ||\r\n            (currentChannelNeeded && !channel),\r\n        );\r\n\r\n        const channelDisplayName = rhsChannel ? rhsChannel.display_name : '';\r\n\r\n        const isSidebarRightExpanded = (postRightVisible || postCardVisible || isPluginView || searchVisible || isPostEditHistory) && isExpanded;\r\n        const containerClassName = classNames('sidebar--right', 'move--left is-open', {\r\n            'sidebar--right--expanded expanded': isSidebarRightExpanded,\r\n        });\r\n\r\n        return (\r\n            <>\r\n                <div\r\n                    className={'sidebar--right sidebar--right--width-holder'}\r\n                    ref={this.sidebarRightWidthHolder}\r\n                />\r\n                <ResizableRhs\r\n                    className={containerClassName}\r\n                    id='sidebar-right'\r\n                    role='region'\r\n                    rightWidthHolderRef={this.sidebarRightWidthHolder}\r\n                    ariaLabel={this.props.ariaLabel}\r\n                    ariaLabeledby={this.props.ariaLabeledby}\r\n                >\r\n                    <div\r\n                        tabIndex={-1}\r\n                        className='sidebar-right-container'\r\n                        ref={this.sidebarRight}\r\n                    >\r\n                        {isRHSLoading ? (\r\n                            <div className='sidebar-right__body'>\r\n                                {/* Sometimes the channel/team is not loaded yet, so we need to wait for it */}\r\n                                <LoadingScreen centered={true}/>\r\n                            </div>\r\n                        ) : (\r\n                            <Search\r\n                                isSideBarRight={true}\r\n                                isSideBarRightOpen={true}\r\n                                getFocus={this.getSearchBarFocus}\r\n                                channelDisplayName={channelDisplayName}\r\n                            >\r\n                                {content}\r\n                            </Search>\r\n                        )}\r\n                    </div>\r\n                </ResizableRhs>\r\n            </>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\nimport type {RouteComponentProps} from 'react-router-dom';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {setRhsExpanded, showChannelInfo, showPinnedPosts, showChannelFiles, openRHSSearch, closeRightHandSide, openAtPrevious, updateSearchTerms} from 'actions/views/rhs';\r\nimport {selectCurrentProductId} from 'selectors/products';\r\nimport {\r\n    getIsRhsExpanded,\r\n    getIsRhsOpen,\r\n    getRhsState,\r\n    getSelectedChannel,\r\n    getSelectedPostId,\r\n    getSelectedPostCardId,\r\n    getPreviousRhsState,\r\n} from 'selectors/rhs';\r\n\r\nimport {RHSStates} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport SidebarRight from './sidebar_right';\r\n\r\nfunction mapStateToProps(state: GlobalState, props: RouteComponentProps) {\r\n    const rhsState = getRhsState(state);\r\n    const channel = getCurrentChannel(state);\r\n    const team = getCurrentTeam(state);\r\n    const teamId = team?.id ?? '';\r\n    const productId = selectCurrentProductId(state, props.location.pathname);\r\n\r\n    const selectedPostId = getSelectedPostId(state);\r\n    const selectedPostCardId = getSelectedPostCardId(state);\r\n\r\n    return {\r\n        isExpanded: getIsRhsExpanded(state),\r\n        isOpen: getIsRhsOpen(state),\r\n        channel,\r\n        postRightVisible: Boolean(selectedPostId) && rhsState !== RHSStates.EDIT_HISTORY,\r\n        postCardVisible: Boolean(selectedPostCardId),\r\n        searchVisible: Boolean(rhsState) && rhsState !== RHSStates.PLUGIN,\r\n        previousRhsState: getPreviousRhsState(state),\r\n        isPinnedPosts: rhsState === RHSStates.PIN,\r\n        isChannelFiles: rhsState === RHSStates.CHANNEL_FILES,\r\n        isChannelInfo: rhsState === RHSStates.CHANNEL_INFO,\r\n        isChannelMembers: rhsState === RHSStates.CHANNEL_MEMBERS,\r\n        isPluginView: rhsState === RHSStates.PLUGIN,\r\n        isPostEditHistory: rhsState === RHSStates.EDIT_HISTORY,\r\n        isRecentMention: rhsState === RHSStates.MENTION,\r\n        isSavedPosts: rhsState === RHSStates.FLAG,\r\n        rhsChannel: getSelectedChannel(state),\r\n        selectedPostId,\r\n        selectedPostCardId,\r\n        team,\r\n        teamId,\r\n        productId,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            setRhsExpanded,\r\n            showPinnedPosts,\r\n            openRHSSearch,\r\n            closeRightHandSide,\r\n            openAtPrevious,\r\n            updateSearchTerms,\r\n            showChannelFiles,\r\n            showChannelInfo,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SidebarRight));\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nexport default function SearchIcon(props: React.HTMLAttributes<HTMLSpanElement>) {\r\n    const {formatMessage} = useIntl();\r\n    return (\r\n        <span {...props}>\r\n            <svg\r\n                width='16px'\r\n                height='16px'\r\n                viewBox='0 0 17 17'\r\n                role='img'\r\n                aria-label={formatMessage({id: 'generic_icons.search', defaultMessage: 'Search Icon'})}\r\n            >\r\n                <path d='M16.398 15.138L13.014 11.754C13.458 11.178 13.8 10.548 14.04 9.86399C14.28 9.14399 14.4 8.40599 14.4 7.64999C14.4 6.42599 14.094 5.29199 13.482 4.24799C12.882 3.22799 12.072 2.41799 11.052 1.81799C10.008 1.20599 8.874 0.899988 7.65 0.899988C6.426 0.899988 5.292 1.20599 4.248 1.81799C3.228 2.41799 2.418 3.22799 1.818 4.24799C1.206 5.29199 0.9 6.42599 0.9 7.64999C0.9 8.87399 1.206 10.008 1.818 11.052C2.418 12.072 3.228 12.882 4.248 13.482C5.292 14.094 6.426 14.4 7.65 14.4C8.406 14.4 9.138 14.274 9.846 14.022C10.53 13.794 11.16 13.458 11.736 13.014L15.138 16.398C15.306 16.566 15.516 16.65 15.768 16.65C16.02 16.65 16.23 16.56 16.398 16.38C16.566 16.212 16.65 16.008 16.65 15.768C16.65 15.528 16.566 15.318 16.398 15.138ZM2.7 7.64999C2.7 6.74999 2.922 5.92199 3.366 5.16599C3.81 4.40999 4.41 3.80999 5.166 3.36599C5.922 2.92199 6.75 2.69999 7.65 2.69999C8.55 2.69999 9.378 2.92199 10.134 3.36599C10.89 3.80999 11.49 4.40999 11.934 5.16599C12.378 5.92199 12.6 6.74999 12.6 7.64999C12.6 8.54999 12.378 9.37799 11.934 10.134C11.49 10.89 10.89 11.49 10.134 11.934C9.378 12.378 8.55 12.6 7.65 12.6C6.75 12.6 5.922 12.378 5.166 11.934C4.41 11.49 3.81 10.89 3.366 10.134C2.922 9.37799 2.7 8.54999 2.7 7.64999Z'/>\r\n            </svg>\r\n        </span>\r\n    );\r\n}\r\n"],"names":["NewChannelWithBoardTourTip","_ref","pulsatingDotPlacement","pulsatingDotTranslate","dispatch","useDispatch","showTip","useSelector","showNewChannelWithBoardPulsatingDot","title","React","FormattedMessage","id","defaultMessage","screen","tipOpened","setTipOpened","useState","handleDismiss","useCallback","e","stopPropagation","setNewChannelWithBoardPreference","Preferences","NEW_CHANNEL_WITH_BOARD_TOUR_SHOWED","handleOpen","preventDefault","overlayPunchOut","useMeasurePunchouts","y","height","x","width","TourTip","show","placement","step","singleTip","showOptOut","interactivePunchOut","handlePrevious","offset","propTypes","_pt","isRequired","HeaderIconWrapper","props","ariaLabelOverride","buttonClass","buttonId","children","onClick","tooltip","tooltipText","tooltipShortcut","isRhsOpen","pluginId","boardsEnabled","suitePluginIds","focalboard","ariaLabelText","WithTooltip","shortcut","className","DEFAULT_COPY_TIMEOUT","useCopyText","text","successCopyTimeout","successCopyTimeoutReceived","copiedRecently","setCopiedRecently","copyError","setCopyError","timerRef","useRef","current","clearTimeout","clipboard","navigator","writeText","then","catch","textField","document","createElement","innerText","style","position","opacity","body","appendChild","select","success","execCommand","err","remove","setTimeout","messages","defineMessages","copy","copied","AlertSvg","toString","viewBox","fill","xmlns","rx","fillOpacity","d","stroke","strokeOpacity","strokeWidth","strokeLinecap","EditButton","styled","withConfig","displayName","EmptyPlace","EditableAreaBase","editable","content","emptyLabel","onEdit","formatMessage","useIntl","allowEditArea","LineLimiterBase","maxLines","lineHeight","moreText","lessText","errorMargin","maxLineHeight","needLimiter","setNeedLimiter","open","setOpen","maxHeight","setMaxHeight","ref","useEffect","contentHeight","scrollHeight","concat","CSSTransition","in","timeout","classNames","ToggleButton","ChannelId","ChannelPurpose","ChannelDescriptionHeading","ChannelHeader","AboutAreaChannel","channel","canEditChannelProperties","actions","purpose","EditableArea","LineLimiter","Markdown","message","editChannelPurpose","header","editChannelHeader","Username","UserInfoContainer","UserAvatar","UserInfo","UsernameContainer","UserPosition","AboutAreaDM","dmUser","ProfilePicture","src","Client4","getProfilePictureUrl","user","last_picture_update","isBot","is_bot","status","undefined","username","display_name","userId","channelId","size","BotTag","is_guest","GuestTag","bot_description","Usernames","ProfilePictures","ProfilePictureContainer","UsersArea","AboutAreaGM","gmUsers","map","idx","key","i","_ref2","length","UserProfileElement","Container","AboutArea","type","Constants","DM_CHANNEL","GM_CHANNEL","OPEN_CHANNEL","PRIVATE_CHANNEL","includes","Icon","HeaderTitle","Header","isArchived","isMobile","onClose","MenuContainer","MenuItemButton","MenuItemText","RightSide","Badge","MenuItem","icon","opensSubpanel","badge","hasRightSide","Menu","channelStats","loadingStats","setLoadingStats","showNotificationPreferences","showMembers","fileCount","files_count","getChannelStats","openNotificationSettings","member_count","showChannelMembers","pinnedpost_count","showPinnedPosts","LoadingSpinner","showChannelFiles","ChannelInfoRhsTopButtons","Button","CopyButton","TopButtons","channelType","channelURL","isFavorite","isMuted","isInvitingPeople","canAddPeople","propsCanAddPeople","copyLink","canCopyLink","favoriteIcon","favoriteText","mutedIcon","mutedText","copyIcon","copyText","toggleFavorite","toggleMute","addPeople","Divider","ChannelInfoRhs","currentTeam","currentUser","channelMembers","canManageMembers","canManageProperties","currentUserId","getSiteURL","name","filter","closeRightHandSide","unfavoriteChannel","favoriteChannel","unmuteChannel","muteChannel","openModal","modalId","ModalIdentifiers","CREATE_DM_CHANNEL","dialogType","MoreDirectChannels","dialogProps","isExistingChannel","focusOriginElement","CHANNEL_INVITE","ChannelInviteModal","EDIT_CHANNEL_HEADER","EditChannelHeaderModal","EDIT_CHANNEL_PURPOSE","EditChannelPurposeModal","CHANNEL_NOTIFICATIONS","ChannelNotificationsModal","memo","EMPTY_CHANNEL_STATS","guest_count","connect","state","getCurrentChannel","getCurrentUser","getCurrentTeam","getCurrentChannelStats","isCurrentChannelArchived","isCurrentChannelFavorite","isCurrentChannelMuted","isModalOpen","getIsMobileView","isPrivate","haveIChannelPermission","Permissions","MANAGE_PRIVATE_CHANNEL_MEMBERS","MANAGE_PUBLIC_CHANNEL_MEMBERS","MANAGE_PRIVATE_CHANNEL_PROPERTIES","MANAGE_PUBLIC_CHANNEL_PROPERTIES","getProfilesInCurrentChannel","getUser","getUserIdFromChannelId","getDisplayNameByUser","isGuest","roles","getStatusForUserId","bindActionCreators","RHS","Title","Actions","ButtonIcon","ActionBar","membersCount","editing","showManageButton","handleShortcut","isKeyPressed","KeyCodes","ESCAPE","stopEditing","addEventListener","removeEventListener","values","members_count","startEditing","inviteMembers","canGoBack","goBack","SearchBar","terms","onInput","inputSuffix","Input","value","currentTarget","inputPrefix","placeholder","useLegend","ChannelMembersRHS","currentUserIsChannelAdmin","searchTerms","teamUrl","history","useHistory","list","setList","page","setPage","isNextPageLoading","setIsNextPageLoading","structuredAttributes","loading","useAccessControlAttributes","EntityType","Channel","policy_enforced","searching","isDefaultChannel","DEFAULT_CHANNEL","showSearch","setChannelMembersRhsSearchTerm","listcp","memberDone","_member$membership2","member","_member$membership","membership","scheme_admin","push","ListItemType","FirstSeparator","data","Separator","Member","JSON","stringify","rhsAction","loadProfilesAndReloadChannelMembers","ProfilesInChannelSortBy","Admin","loadMyChannelMemberAndRole","doSearch","debounce","async","searchProfilesAndChannelMembers","in_team_id","team_id","in_channel_id","SEARCH_TIMEOUT_MILLISECONDS","openDirectMessage","openDirectChannelToUserId","loadMore","AlertBanner","mode","variant","TagGroup","flatMap","attribute","AlertTag","tooltipTitle","replace","txt","charAt","toUpperCase","substring","toLowerCase","setEditChannelMembers","link","msg","ExternalLink","href","location","MemberList","members","fetchRemoteClusterInfo","hasNextPage","buildProfileList","profilesInCurrentChannel","userStatuses","teammateNameDisplaySetting","membersInCurrentChannel","forEach","profile","remoteDisplayName","remote_id","getRemoteDisplayName","displayUsername","sort","a","b","_a$membership","_b$membership","_a$membership2","localeCompare","getProfiles","createSelector","getActiveProfilesInCurrentChannelWithoutSorting","getUserStatuses","getTeammateNameDisplaySetting","getMembersInCurrentChannel","searchProfiles","search","searchActiveProfilesInCurrentChannel","getMyCurrentChannelMembership","channelAdmins","views","channelMembersRhsSearch","trim","getCurrentRelativeTeamUrl","prevRhsState","getPreviousRhsState","hasInfoPrevState","RHSStates","CHANNEL_INFO","CHANNEL_FILES","PIN","Boolean","getIsEditingMembers","SearchResultsHeader","showExpand","previousRhsState","sidebarTooltipContent","isExpanded","KeyboardShortcutSequence","KEYBOARD_SHORTCUTS","navExpandSidebar","hideDescription","isInsideTooltip","expandOrCollapseSidebarButtonAriaLabel","toggleRhsExpanded","CHANNEL_MEMBERS","getIsRhsExpanded","getCurrentChannelId","InfoToast","onExited","closeToast","undoTodo","_content$undo","undo","call","toastContainerClassname","timer","mountOnEnter","unmountOnExit","appear","modalMessages","titleQuestion","RestorePostModal","post","postHeader","onHide","modalHeaderText","GenericModal","compassDesign","enforceFocus","handleCancel","cancelButtonClassName","handleConfirm","handleRestore","PostMessageView","overflowType","showPostEditedIndicator","FileAttachmentListContainer","isEditHistory","disableDownload","disableActions","DATE_RANGES","RelativeRanges","itemMessages","helpText","currentVersionText","ariaLabelMessage","EditedPostItem","_post$props","isCurrent","postCurrentVersion","connectionId","getConnectionId","openRestorePostModal","restorePostModalData","RESTORE_POST_MODAL","restorePostVersion","original_id","showInfoTooltip","infoToastModalData","INFO_TOAST","CheckIcon","handleUndo","StoragePrefixes","EDIT_DRAFT","removeDraft","channel_id","root_id","result","getPostEditHistory","previousPostVersion","currentVersionIndicator","profileSrc","imageURLForUser","user_id","overwriteName","ensureString","override_username","Avatar","url","UserProfileComponent","disablePopover","PostMessageContainer","isRHS","isFileDeleted","delete_at","messageContainer","restoreButton","postContainerClass","timeStampValue","edit_at","create_at","togglePost","prevState","PostAriaLabelDiv","Timestamp","ranges","selectedPostId","getSelectedPostId","getPost","editPost","PostEditHistory","channelDisplayName","originalPost","postEditHistory","setPostEditHistory","hasError","setHasError","isLoading","setIsLoading","scrollbars","retrieveErrorHeading","retrieveErrorSubheading","_scrollbars$current","fetchPostEditHistory","scrollTo","top","errorContainer","AlertIcon","LoadingScreen","display","placeContent","flex","postEditItems","postEdited","Scrollbars","_getCurrentChannel","getChannel","ResizableRhs","role","rightWidthHolderRef","ariaLabel","ariaLabeledby","containerRef","rhsSize","getRhsSize","isRhsExpanded","previousRhsExpanded","setPreviousRhsExpanded","defaultWidth","RHS_MIN_MAX_WIDTH","default","shouldRhsOverlap","shouldRhsOverlapChannelView","handleResizeEnd","_","cssVarProp","rightWidthHolderRefElement","removeProperty","containerRefElement","classList","add","ResizableDivider","globalCssVar","CssVarKeyForResizable","dir","ResizeDirection","RIGHT","disabled","onResize","handleResize","cssVarValue","setProperty","onResizeEnd","onDividerDoubleClick","handleDividerDoubleClick","RhsCardHeader","constructor","arguments","_defineProperty","this","SEARCH","showSearchResults","MENTION","showMentions","FLAG","showFlaggedPosts","render","back","expandSidebarTooltip","shrinkSidebarTooltip","handleBack","intl","collapseIconLabel","expandIconLabel","injectIntl","RhsCard","super","isScrolling","setState","scrollStopAction","fireAfter","SCROLL_DELAY","isMobileView","emitCloseRightHandSide","DelayedAction","handleScrollStop","shouldComponentUpdate","nextProps","nextState","_nextProps$selected","_nextProps$selected$p","_this$props$selected","_this$props$selected$","deepEqual","selected","card","pluginPostCardTypes","postType","Object","hasOwn","PluginComponent","component","_selected$props","UserProfile","hideStatus","overrideUsername","enablePostUsernameOverride","avatar","PostProfilePicture","compactDisplay","onScroll","handleScroll","Link","to","handleClick","getSelectedPostCard","getConfig","EnablePostUsernameOverride","plugins","postCardTypes","translate","CRTThreadsPaneTutorialTip","getCurrentUserId","dimensions","useFollowElementDimensions","onDismiss","preferences","category","CRT_THREAD_PANE_STEP","CrtThreadPaneSteps","FINISHED","savePreferences","handleNext","nextBtn","RhsHeaderPost","setRhsExpanded","relativeTeamUrl","getHistory","rootPostId","currentTeamId","isFollowingThread","setThreadFollow","closeSidebarTooltip","backToResultsTooltip","rhsHeaderTooltipContent","channelName","handleJumpClick","isCollapsedThreadsEnabled","FollowButton","isFollowing","handleFollowChange","showThreadsTutorialTip","getThreadOrSynthetic","makeGetThreadOrSynthetic","collapsedThreads","root","tipStep","getInt","thread","is_following","reply_count","currentUserMentionKeys","getCurrentUserMentionKeys","rootMessageMentionKeys","allAtMentions","matchUserMentionTriggersWithMessageMentions","THREADS_PANE_POPOVER","onboardingTourTipsEnabled","getCurrentTeamId","RhsThread","ThreadViewer","useRelativeTimestamp","isThreadView","getSelectedPost","getSelectedChannel","SizeMap","xs","sm","md","lg","Popover","popoverSize","popoverStyle","onMouseOut","onMouseOver","BSPopover","bsStyle","bsClass","bsSize","SearchSuggestionList","SuggestionList","_this$itemsContainerR","_this$itemsContainerR2","itemsContainerRef","parentNode","popoverRef","hasResults","results","SuggestionListContents","selectedTerm","selection","getItemId","term","onItemClick","onCompleteWord","onItemHover","SuggestionDate","matchedPretext","preventClose","handleEscape","ungroupedResults","item","items","Component","components","isSelection","searchForm","overflow","isFocused","keepFocused","suggestionProviders","searchRef","_searchRef$current","focus","_searchRef$current2","blur","endsWith","_searchRef$current3","isSideBarRight","onSubmit","handleSubmit","autoComplete","searchType","onMouseDown","handleFocus","setKeepFocused","clearSearchType","SuggestionBox","node","getFocus","tabIndex","containerClass","onFocus","onBlur","handleBlur","onChange","handleChange","onKeyDown","_searchRef$current4","Keyboard","DOWN","updateHighlightedSearchHint","UP","ENTER","handleEnterKey","BACKSPACE","listComponent","dateComponent","providers","delayInputUpdate","clearable","onClear","handleClear","isSearchingTerm","defaultProps","SearchHint","config","isFileAttachmentEnabled","isFileAttachmentsEnabled","onSearchTypeSelected","chunks","highlighted","highlightedIndex","onElementBlur","onElementFocus","withTitle","onTouchEnd","options","option","optionIndex","searchTerm","onOptionSelected","onOptionHover","handleOnOptionHover","additionalDisplay","FILE_TOOLTIP_RANGES","FileSearchResultItem","teamName","fileInfo","post_id","copyToClipboard","keepOpen","_this$props$pluginMen","enableSharedChannelsPlugins","shared","pluginItems","pluginMenuItems","match","ItemAction","_item$action","action","FILE_PREVIEW_MODAL","FilePreviewModal","fileInfos","postId","startIndex","showPreview","FileThumbnail","Tag","fileSizeToString","defineMessage","MenuWrapper","onToggle","stopPropagationOnToggle","openLeft","jumpToConv","localizeMessage","renderPluginItems","getFileDownloadUrl","ownProps","getFeatureFlagValue","FilesFilterMenu","IconContainer","selectedFilter","FilterVariantIcon","color","onFilter","MessagesOrFilesSelector","searchTeam","getSearchTeam","hasMoreThanOneTeam","getMyTeams","messagesTabRef","filesTabRef","handleTabKeyDown","currentTab","LEFT","nextTab","nextTabRef","DataSearchTypes","MESSAGES_SEARCH_TYPE","FILES_SEARCH_TYPE","dispatchEvent","CustomEvent","A11yCustomEventTypes","FOCUS","detail","target","keyboardOnly","messagesCounter","filesCounter","crossTeamSearchEnabled","SelectTeam","selectedTeamId","onTeamSelected","onTeamChange","PostSearchResultsItem","PostComponent","matches","isFlaggedPosts","isPinnedPosts","isMentionSearch","a11yIndex","Locations","SearchLimitsBanner","serverLimits","useGetServerLimits","searchTruncated","isSearchTruncated","isShowingSearchResults","getRhsState","postHistoryLimit","CenterMessageLock","SearchResults","setSearchType","filesDropdownPluginMenuItems","getFilesDropdownPluginMenuItems","searchFilterType","setSearchFilterType","searchSelectedType","searchPage","isChannelFiles","getMorePostsForSearch","getMoreFilesForSearch","loadMorePosts","loadMoreFiles","fileResults","isCard","isSearchAtEnd","isSearchFilesAtEnd","isSearchingFlaggedPost","isSearchingPinnedPost","isSideBarExpanded","isOpened","updateSearchTerms","handleSearchHintSelection","noResults","Array","isArray","noFileResults","showLoadMore","isMessagesSearch","contentItems","loadingMorePostsComponent","titleDescriptor","sortedResults","noResultsProps","NoResultsVariant","ChannelSearch","Mentions","FlaggedPosts","subtitleValues","buttonText","PinnedPosts","ChannelFiles","ChannelFilesFiltered","titleValues","Files","formattedTitle","handleOptionSelection","LoadingWrapper","searchHintOptions","NoResultsIndicator","assign","padding","index","isDateLine","date","getDateForDateLine","DateSeparator","currentTeamName","MessageOrFileSelector","teamId","updateSearchTeam","isSearchGettingMore","_scrollbars$current2","_scrollbars$current3","_scrollbars$current4","scrollTop","clientHeight","regionTitle","arePropsEqual","nextResults","nextFileResults","files","addDateSeparatorsForSearchResults","makeAddDateSeparatorsForSearchResults","_getCurrentTeam$name","_getCurrentTeam","_currentSearch$params","newResults","getSearchResults","postA","postB","newFilesResults","getSearchFilesResults","file","currentSearch","getCurrentSearchForSearchTeam","getSearchMatches","getSearchResultsTerms","getSearchResultsType","getIsSearchingTerm","getIsSearchingFlaggedPost","getIsSearchingPinnedPost","getIsSearchGettingMore","isEnd","isFilesEnd","params","determineVisibleSearchHintOptions","newVisibleSearchHintOptions","searchFilesHintOptions","pretextArray","split","pretext","penultimatePretext","shouldShowHintOptions","some","RegExp","test","_unused","Search","_ref3","autocompleteChannelsForSearch","autocompleteUsersInTeam","filterFilesSearchByExt","openRHSSearch","updateRhsState","updateSearchTermsForShortcut","updateSearchType","hideMobileSearchBarInRHS","searchVisible","currentChannel","enableFindShortcut","hideSearchBar","isSideBarRightOpen","currentChannelName","getCurrentChannelNameForSearchShortcut","focused","setFocused","dropdownFocused","setDropdownFocused","keepInputFocused","setKeepInputFocused","indexChangedViaKeyPress","setIndexChangedViaKeyPress","highlightedSearchHintIndex","setHighlightedSearchHintIndex","visibleSearchHintOptions","setVisibleSearchHintOptions","SearchDateProvider","SearchChannelProvider","SearchUserProvider","isDesktop","isDesktopApp","isServerVersionGreaterThanOrEqualTo","getDesktopVersion","handleKeyDown","F","shiftKey","isMacApp","ctrlKey","getMorePostsForSearchCallback","team","getMoreFilesForSearchCallback","handleClose","handleDropdownBlur","handleDropdownFocus","handleAddSearchTerm","pop","handleUpdateSearchTerms","join","handleOnSearchTypeSelected","indexDelta","changedViaKeyPress","Math","abs","newIndex","handleSearch","error","handleSearchOnSuccess","setHoverHintIndex","_highlightedSearchHintIndex","renderSearchBar","renderHintPopover","termsUsed","word","_ref4","helpClass","shrink","handleShrink","newTerms","filterType","SearchIcon","rhsState","getIsRhsOpen","getIsCrossTeamSearchEnabled","getSearchTerms","getSearchType","PLUGIN","EDIT_HISTORY","autocompleteChannels","autocompleteUsersInCurrentTeam","RhsPlugin","showPluggable","pluggableId","Pluggable","pluggableName","rhsPlugins","RightHandSidebarComponent","getPluggableId","pluginComponent","find","element","pluginTitle","RHSPlugin","SidebarRight","isOpen","previous","isRecentMentions","isSavedPosts","isChannelInfo","isChannelMembers","isPostEditHistory","selectedPostCardId","channelInfoShortcutMac","isMac","channelInfoShortcut","altKey","cmdOrCtrlPressed","PERIOD","openAtPrevious","I","showChannelInfo","_document$getElementB","_this$sidebarRight$cu","_document$getElementB2","_document$querySelect","getElementById","contains","sidebarRight","querySelector","_this$focusSearchBar","focusSearchBar","sidebarRightWidthHolder","handleRHSFocus","prevProps","_this$props$rhsChanne","_prevProps$rhsChannel","wasOpen","contentChanged","rhsChannel","previousActiveElement","activeElement","rhsContainer","searchContainer","firstFocusable","getFirstFocusableChild","focusElement","a11yController","originElement","restoreOriginFocus","componentDidMount","handleClickOutside","componentWillUnmount","componentDidUpdate","_prevProps$rhsChannel2","_prevProps$rhsChannel3","productId","setPrevious","postRightVisible","postCardVisible","isPluginView","selectedChannelNeeded","currentChannelNeeded","FileUploadOverlay","overlayType","DropOverlayIdRHS","ChannelMembersRhs","isRHSLoading","isSidebarRightExpanded","containerClassName","centered","getSearchBarFocus","withRouter","_team$id","selectCurrentProductId","pathname","getSelectedPostCardId","isRecentMention"],"sourceRoot":""}