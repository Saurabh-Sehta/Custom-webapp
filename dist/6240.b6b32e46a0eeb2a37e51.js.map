{"version":3,"file":"6240.b6b32e46a0eeb2a37e51.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/actions/views/cookie.js","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/action_types/drafts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/action_types/errors.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/action_types/playbooks.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/action_types/plugins.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/action_types/shared_channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/apps.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/channel_categories.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/general.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/emoji.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/posts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/request_status.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/roles.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/stats.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/teams.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/users.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/websocket.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/permissions.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/plugins.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/constants/threads.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/create_selector/index.js","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/access_control.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/admin.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/channel_categories.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/common.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/content_flagging.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/general.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/i18n.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/posts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/preferences.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/roles.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/roles_helpers.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/teams.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/selectors/entities/users.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/store/helpers.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/posts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/store/initial_state.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/admin.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/apps.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/bots.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/channel_bookmarks.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/channel_categories.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/channels/message_counts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/cloud.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/content_flagging.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/emojis.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/files.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/general.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/groups.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/hosted_customer.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/integrations.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/jobs.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/limits.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/preferences.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/roles.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/scheduled_posts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/schemes.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/search.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/shared_channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/teams.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/threads/counts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/threads/threadsInTeam.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/threads/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/usage.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/users.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/entities/typing.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/helpers.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/admin.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/channels.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/files.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/general.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/posts.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/roles.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/search.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/teams.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/users.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/errors/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/requests/index.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/reducers/websocket.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/store/configureStore.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/store/reducer_registry.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/apps.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/array_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/channel_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/deep_freeze.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/group_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/helpers.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/i18n_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/key_mirror.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/post_list.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/post_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/preference_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/team_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/timezone_utils.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/utils/user_utils.ts","webpack://mattermost-webapp/./src/utils/plugins/plugin_setting_extraction.tsx","webpack://mattermost-webapp/./src/reducers/plugins/index.ts","webpack://mattermost-webapp/./src/reducers/storage.ts","webpack://mattermost-webapp/./src/reducers/views/add_channel_cta_dropdown.ts","webpack://mattermost-webapp/./src/reducers/views/announcement_bar.ts","webpack://mattermost-webapp/./src/reducers/views/browser.ts","webpack://mattermost-webapp/./src/reducers/views/channel.ts","webpack://mattermost-webapp/./src/reducers/views/channel_selector_modal.ts","webpack://mattermost-webapp/./src/reducers/views/channel_sidebar.ts","webpack://mattermost-webapp/./src/reducers/views/drafts.ts","webpack://mattermost-webapp/./src/reducers/views/emoji.ts","webpack://mattermost-webapp/./src/reducers/views/i18n.ts","webpack://mattermost-webapp/./src/reducers/views/lhs.ts","webpack://mattermost-webapp/./src/reducers/views/marketplace.ts","webpack://mattermost-webapp/./src/reducers/views/modals.ts","webpack://mattermost-webapp/./src/reducers/views/notice.ts","webpack://mattermost-webapp/./src/reducers/views/onboarding_tasks.ts","webpack://mattermost-webapp/./src/reducers/views/posts.ts","webpack://mattermost-webapp/./src/reducers/views/product_menu.ts","webpack://mattermost-webapp/./src/reducers/views/readout.ts","webpack://mattermost-webapp/./src/reducers/views/rhs.ts","webpack://mattermost-webapp/./src/reducers/views/search.ts","webpack://mattermost-webapp/./src/reducers/views/system.ts","webpack://mattermost-webapp/./src/reducers/views/textbox.ts","webpack://mattermost-webapp/./src/reducers/views/threads.ts","webpack://mattermost-webapp/./src/reducers/index.ts","webpack://mattermost-webapp/./src/reducers/views/index.ts","webpack://mattermost-webapp/./src/reducers/views/rhs_suppressed.ts","webpack://mattermost-webapp/./src/reducers/views/settings.ts","webpack://mattermost-webapp/./src/reducers/views/admin.ts","webpack://mattermost-webapp/./src/selectors/general.ts","webpack://mattermost-webapp/./src/packages/mattermost-redux/src/store/index.ts","webpack://mattermost-webapp/./src/store/index.ts","webpack://mattermost-webapp/./src/utils/constants.tsx","webpack://mattermost-webapp/./src/utils/storage_utils.ts","webpack://mattermost-webapp/../node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://mattermost-webapp/../platform/types/lib/channel_categories.js","webpack://mattermost-webapp/../platform/types/lib/reports.js","webpack://mattermost-webapp/../platform/types/lib/users.js","webpack://mattermost-webapp/../platform/types/lib/utilities.js"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport function clearUserCookie() {\r\n    // We need to clear the cookie without the domain, with the domain, and with both the domain and path set because we\r\n    // can't tell if the server set the cookie with or without the domain.\r\n    // The server will have set the domain if ServiceSettings.EnableCookiesForSubdomains is true\r\n    // The server will have set a non-default path if Mattermost is also served from a subpath.\r\n    document.cookie = 'MMUSERID=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\r\n    document.cookie = `MMUSERID=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=${window.basename}`;\r\n    document.cookie = `MMUSERID=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${window.location.hostname};path=/`;\r\n    document.cookie = `MMUSERID=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${window.location.hostname};path=${window.basename}`;\r\n    document.cookie = 'MMCSRF=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\r\n    document.cookie = `MMCSRF=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=${window.basename}`;\r\n    document.cookie = `MMCSRF=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${window.location.hostname};path=/`;\r\n    document.cookie = `MMCSRF=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${window.location.hostname};path=${window.basename}`;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\nexport default keyMirror({\r\n    GET_USER_DRAFTS: null,\r\n    CREATE_USER_DRAFT: null,\r\n    DELETE_USER_DRAFT: null,\r\n    UPDATE_USER_DRAFT: null,\r\n    UPSERT_USER_DRAFT: null,\r\n\r\n    GET_DRAFTS_FAILURE: null,\r\n    UPSERT_DRAFT_FAILURE: null,\r\n    DELETE_DRAFT_FAILURE: null,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\nexport default keyMirror({\r\n    DISMISS_ERROR: null,\r\n    LOG_ERROR: null,\r\n    CLEAR_ERRORS: null,\r\n    RESTORE_ERRORS: null,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\n// The actions are created and triggered from the playbooks repository\r\nexport default keyMirror({\r\n    PLAYBOOKS_PUBLISH_TEMPLATES: null,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\nexport default keyMirror({\r\n    RECEIVED_MARKETPLACE_PLUGINS: null,\r\n    GET_MARKETPLACE_PLUGINS_FAILURE: null,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\nexport default keyMirror({\r\n    RECEIVED_CHANNEL_REMOTES: null,\r\n    RECEIVED_REMOTE_CLUSTER_INFO: null,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AppCallResponseType, AppExpandLevel, AppFieldType} from '@mattermost/types/apps';\r\n\r\nexport const AppBindingLocations = {\r\n    POST_MENU_ITEM: '/post_menu',\r\n    CHANNEL_HEADER_ICON: '/channel_header',\r\n    APP_BAR: '/app_bar',\r\n    COMMAND: '/command',\r\n    IN_POST: '/in_post',\r\n    MARKETPLACE: '/marketplace',\r\n};\r\n\r\nexport const AppBindingPresentations = {\r\n    MODAL: 'modal',\r\n};\r\n\r\nexport const AppCallResponseTypes: { [name: string]: AppCallResponseType } = {\r\n    OK: 'ok',\r\n    ERROR: 'error',\r\n    FORM: 'form',\r\n    CALL: 'call',\r\n    NAVIGATE: 'navigate',\r\n};\r\n\r\nexport const AppExpandLevels: { [name: string]: AppExpandLevel } = {\r\n    EXPAND_DEFAULT: '',\r\n    EXPAND_NONE: 'none',\r\n    EXPAND_ALL: 'all',\r\n    EXPAND_SUMMARY: 'summary',\r\n};\r\n\r\nexport const AppFieldTypes: { [name: string]: AppFieldType } = {\r\n    TEXT: 'text',\r\n    STATIC_SELECT: 'static_select',\r\n    DYNAMIC_SELECT: 'dynamic_select',\r\n    BOOL: 'bool',\r\n    USER: 'user',\r\n    CHANNEL: 'channel',\r\n    MARKDOWN: 'markdown',\r\n    RADIO: 'radio',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ChannelCategoryType} from '@mattermost/types/channel_categories';\r\n\r\nexport const CategoryTypes: {[name: string]: ChannelCategoryType} = {\r\n    FAVORITES: 'favorites',\r\n    CHANNELS: 'channels',\r\n    DIRECT_MESSAGES: 'direct_messages',\r\n    CUSTOM: 'custom',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport const NotificationLevel = {\r\n    DEFAULT: 'default' as const,\r\n    ALL: 'all' as const,\r\n    MENTION: 'mention' as const,\r\n    NONE: 'none' as const,\r\n};\r\n\r\nexport const MarkUnread = {\r\n    ALL: 'all',\r\n    MENTION: 'mention',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    CONFIG_CHANGED: 'config_changed',\r\n    SERVER_VERSION_CHANGED: 'server_version_changed',\r\n    PAGE_SIZE_DEFAULT: 60,\r\n    PAGE_SIZE_MAXIMUM: 200,\r\n    LOGS_PAGE_SIZE_DEFAULT: 10000,\r\n    AUDITS_CHUNK_SIZE: 100,\r\n    PROFILE_CHUNK_SIZE: 100, // WARN: Do not change this without changing the cache key on server side as well. See https://github.com/mattermost/mattermost/pull/26391.\r\n    CHANNELS_CHUNK_SIZE: 50,\r\n    TEAMS_CHUNK_SIZE: 50,\r\n    JOBS_CHUNK_SIZE: 50,\r\n    SEARCH_TIMEOUT_MILLISECONDS: 100,\r\n    AUTOCOMPLETE_SPLIT_CHARACTERS: ['.', '-', '_'],\r\n    OUT_OF_OFFICE: 'ooo',\r\n    OFFLINE: 'offline',\r\n    AWAY: 'away',\r\n    ONLINE: 'online',\r\n    DND: 'dnd',\r\n    PERMISSIONS_ALL: 'all',\r\n    PERMISSIONS_CHANNEL_ADMIN: 'channel_admin',\r\n    PERMISSIONS_TEAM_ADMIN: 'team_admin',\r\n    PERMISSIONS_SYSTEM_ADMIN: 'system_admin',\r\n    TEAM_GUEST_ROLE: 'team_guest',\r\n    TEAM_USER_ROLE: 'team_user',\r\n    TEAM_ADMIN_ROLE: 'team_admin',\r\n    CHANNEL_GUEST_ROLE: 'channel_guest',\r\n    CHANNEL_USER_ROLE: 'channel_user',\r\n    CHANNEL_ADMIN_ROLE: 'channel_admin',\r\n    SYSTEM_GUEST_ROLE: 'system_guest',\r\n    SYSTEM_USER_ROLE: 'system_user',\r\n    SYSTEM_ADMIN_ROLE: 'system_admin',\r\n    SYSTEM_USER_MANAGER_ROLE: 'system_user_manager',\r\n    SYSTEM_READ_ONLY_ADMIN_ROLE: 'system_read_only_admin',\r\n    SYSTEM_MANAGER_ROLE: 'system_manager',\r\n    SYSTEM_USER_ACCESS_TOKEN_ROLE: 'system_user_access_token',\r\n    SYSTEM_POST_ALL_ROLE: 'system_post_all',\r\n    SYSTEM_POST_ALL_PUBLIC_ROLE: 'system_post_all_public',\r\n    PLAYBOOK_ADMIN_ROLE: 'playbook_admin',\r\n    PLAYBOOK_MEMBER_ROLE: 'playbook_member',\r\n    RUN_ADMIN_ROLE: 'run_admin',\r\n    RUN_MEMBER_ROLE: 'run_member',\r\n    ALLOW_EDIT_POST_ALWAYS: 'always',\r\n    ALLOW_EDIT_POST_NEVER: 'never',\r\n    ALLOW_EDIT_POST_TIME_LIMIT: 'time_limit',\r\n    DEFAULT_POST_EDIT_TIME_LIMIT: 300,\r\n    RESTRICT_DIRECT_MESSAGE_ANY: 'any',\r\n    RESTRICT_DIRECT_MESSAGE_TEAM: 'team',\r\n    SWITCH_TO_DEFAULT_CHANNEL: 'switch_to_default_channel',\r\n    DEFAULT_CHANNEL: 'town-square',\r\n    DM_CHANNEL: 'D' as const,\r\n    OPEN_CHANNEL: 'O' as const,\r\n    PRIVATE_CHANNEL: 'P' as const,\r\n    GM_CHANNEL: 'G' as const,\r\n    ARCHIVED_CHANNEL: 'archive',\r\n    PUSH_NOTIFY_APPLE_REACT_NATIVE: 'apple_rn',\r\n    PUSH_NOTIFY_ANDROID_REACT_NATIVE: 'android_rn',\r\n    STORE_REHYDRATION_COMPLETE: 'store_hydation_complete',\r\n    TEAMMATE_NAME_DISPLAY: {\r\n        SHOW_USERNAME: 'username',\r\n        SHOW_NICKNAME_FULLNAME: 'nickname_full_name',\r\n        SHOW_FULLNAME: 'full_name',\r\n    },\r\n    SPECIAL_MENTIONS: ['all', 'channel', 'here'],\r\n    MAX_USERS_IN_GM: 8,\r\n    MIN_USERS_IN_GM: 3,\r\n    MAX_GROUP_CHANNELS_FOR_PROFILES: 50,\r\n    DEFAULT_LOCALE: 'en',\r\n    DEFAULT_AUTOLINKED_URL_SCHEMES: ['http', 'https', 'ftp', 'mailto', 'tel', 'mattermost'],\r\n    DISABLED: 'disabled',\r\n    DEFAULT_ON: 'default_on',\r\n    DEFAULT_OFF: 'default_off',\r\n    ALWAYS_ON: 'always_on',\r\n    DEFAULT_GROUP: 'board',\r\n    CUSTOM_GROUP_USER_ROLE: 'custom_group_user',\r\n    MAX_GET_ROLES_BY_NAMES: 100,\r\n    SKUEnterprise: 'enterprise',\r\n    SKUEnterpriseAdvanced: 'advanced',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    SORT_BY_NAME: 'name',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {PostType} from '@mattermost/types/posts';\r\n\r\nexport const PostTypes = {\r\n    CHANNEL_DELETED: 'system_channel_deleted' as PostType,\r\n    CHANNEL_UNARCHIVED: 'system_channel_restored' as PostType,\r\n    DISPLAYNAME_CHANGE: 'system_displayname_change' as PostType,\r\n    CONVERT_CHANNEL: 'system_convert_channel' as PostType,\r\n    EPHEMERAL: 'system_ephemeral' as PostType,\r\n    EPHEMERAL_ADD_TO_CHANNEL: 'system_ephemeral_add_to_channel' as PostType,\r\n    HEADER_CHANGE: 'system_header_change' as PostType,\r\n    PURPOSE_CHANGE: 'system_purpose_change' as PostType,\r\n\r\n    JOIN_LEAVE: 'system_join_leave' as PostType,\r\n    JOIN_CHANNEL: 'system_join_channel' as PostType,\r\n    GUEST_JOIN_CHANNEL: 'system_guest_join_channel' as PostType,\r\n    LEAVE_CHANNEL: 'system_leave_channel' as PostType,\r\n    JOIN_LEAVE_CHANNEL: 'system_join_leave_channel' as PostType,\r\n    ADD_REMOVE: 'system_add_remove' as PostType,\r\n    ADD_TO_CHANNEL: 'system_add_to_channel' as PostType,\r\n    ADD_GUEST_TO_CHANNEL: 'system_add_guest_to_chan' as PostType,\r\n    REMOVE_FROM_CHANNEL: 'system_remove_from_channel' as PostType,\r\n\r\n    JOIN_TEAM: 'system_join_team' as PostType,\r\n    LEAVE_TEAM: 'system_leave_team' as PostType,\r\n    ADD_TO_TEAM: 'system_add_to_team' as PostType,\r\n    REMOVE_FROM_TEAM: 'system_remove_from_team' as PostType,\r\n\r\n    COMBINED_USER_ACTIVITY: 'system_combined_user_activity' as PostType,\r\n    ME: 'me' as PostType,\r\n    ADD_BOT_TEAMS_CHANNELS: 'add_bot_teams_channels' as PostType,\r\n    REMINDER: 'reminder' as PostType,\r\n    WRANGLER: 'system_wrangler' as PostType,\r\n    GM_CONVERTED_TO_CHANNEL: 'system_gm_to_channel' as PostType,\r\n};\r\n\r\nexport default {\r\n    POST_CHUNK_SIZE: 60,\r\n    POST_DELETED: 'DELETED',\r\n    SYSTEM_MESSAGE_PREFIX: 'system_',\r\n    SYSTEM_AUTO_RESPONDER: 'system_auto_responder',\r\n    POST_TYPES: PostTypes,\r\n    MESSAGE_TYPES: {\r\n        POST: 'post',\r\n        COMMENT: 'comment',\r\n    },\r\n    MAX_PREV_MSGS: 100,\r\n    POST_COLLAPSE_TIMEOUT: 1000 * 60 * 5, // five minutes\r\n    IGNORE_POST_TYPES: [\r\n        PostTypes.ADD_REMOVE,\r\n        PostTypes.ADD_TO_CHANNEL,\r\n        PostTypes.CHANNEL_DELETED,\r\n        PostTypes.CHANNEL_UNARCHIVED,\r\n        PostTypes.JOIN_LEAVE,\r\n        PostTypes.JOIN_CHANNEL,\r\n        PostTypes.LEAVE_CHANNEL,\r\n        PostTypes.REMOVE_FROM_CHANNEL,\r\n        PostTypes.JOIN_TEAM,\r\n        PostTypes.LEAVE_TEAM,\r\n        PostTypes.ADD_TO_TEAM,\r\n        PostTypes.REMOVE_FROM_TEAM,\r\n    ],\r\n    USER_ACTIVITY_POST_TYPES: [\r\n        PostTypes.ADD_TO_CHANNEL,\r\n        PostTypes.JOIN_CHANNEL,\r\n        PostTypes.LEAVE_CHANNEL,\r\n        PostTypes.REMOVE_FROM_CHANNEL,\r\n        PostTypes.ADD_TO_TEAM,\r\n        PostTypes.JOIN_TEAM,\r\n        PostTypes.LEAVE_TEAM,\r\n        PostTypes.REMOVE_FROM_TEAM,\r\n    ],\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {RequestStatusOption} from '@mattermost/types/requests';\r\n\r\nconst status: Record<string, RequestStatusOption> = {\r\n    NOT_STARTED: 'not_started',\r\n    STARTED: 'started',\r\n    SUCCESS: 'success',\r\n    FAILURE: 'failure',\r\n    CANCELLED: 'cancelled',\r\n};\r\n\r\nexport default status;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    MEMBERS: 'members',\r\n    GUESTS: 'guests',\r\n    ADMINS: 'admins',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\n\r\nexport default keyMirror({\r\n    TOTAL_USERS: null,\r\n    TOTAL_INACTIVE_USERS: null,\r\n    TOTAL_PUBLIC_CHANNELS: null,\r\n    TOTAL_PRIVATE_GROUPS: null,\r\n    TOTAL_POSTS: null,\r\n    TOTAL_TEAMS: null,\r\n    TOTAL_IHOOKS: null,\r\n    TOTAL_OHOOKS: null,\r\n    TOTAL_COMMANDS: null,\r\n    TOTAL_SESSIONS: null,\r\n    POST_PER_DAY: null,\r\n    BOT_POST_PER_DAY: null,\r\n    USERS_WITH_POSTS_PER_DAY: null,\r\n    RECENTLY_ACTIVE_USERS: null,\r\n    NEWLY_CREATED_USERS: null,\r\n    TOTAL_WEBSOCKET_CONNECTIONS: null,\r\n    TOTAL_MASTER_DB_CONNECTIONS: null,\r\n    TOTAL_READ_DB_CONNECTIONS: null,\r\n    DAILY_ACTIVE_USERS: null,\r\n    MONTHLY_ACTIVE_USERS: null,\r\n    REGISTERED_USERS: null,\r\n    TOTAL_FILE_COUNT: null,\r\n    TOTAL_FILE_SIZE: null,\r\n});\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    TEAM_TYPE_OPEN: 'O',\r\n    TEAM_TYPE_INVITE: 'I',\r\n    SORT_USERNAME_OPTION: 'Username',\r\n} as const;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    IGNORE_CHANNEL_MENTIONS_ON: 'on',\r\n    IGNORE_CHANNEL_MENTIONS_OFF: 'off',\r\n    IGNORE_CHANNEL_MENTIONS_DEFAULT: 'default',\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nconst WebsocketEvents = {\r\n    POSTED: 'posted',\r\n    POST_EDITED: 'post_edited',\r\n    POST_DELETED: 'post_deleted',\r\n    POST_UNREAD: 'post_unread',\r\n    CHANNEL_CONVERTED: 'channel_converted',\r\n    CHANNEL_CREATED: 'channel_created',\r\n    CHANNEL_DELETED: 'channel_deleted',\r\n    CHANNEL_UNARCHIVED: 'channel_restored',\r\n    CHANNEL_UPDATED: 'channel_updated',\r\n    MULTIPLE_CHANNELS_VIEWED: 'multiple_channels_viewed',\r\n    CHANNEL_MEMBER_UPDATED: 'channel_member_updated',\r\n    CHANNEL_SCHEME_UPDATED: 'channel_scheme_updated',\r\n    DIRECT_ADDED: 'direct_added',\r\n    ADDED_TO_TEAM: 'added_to_team',\r\n    LEAVE_TEAM: 'leave_team',\r\n    UPDATE_TEAM: 'update_team',\r\n    USER_ADDED: 'user_added',\r\n    USER_REMOVED: 'user_removed',\r\n    USER_UPDATED: 'user_updated',\r\n    USER_ROLE_UPDATED: 'user_role_updated',\r\n    ROLE_ADDED: 'role_added',\r\n    ROLE_REMOVED: 'role_removed',\r\n    ROLE_UPDATED: 'role_updated',\r\n    TYPING: 'typing',\r\n    STOP_TYPING: 'stop_typing',\r\n    PREFERENCE_CHANGED: 'preference_changed',\r\n    PREFERENCES_CHANGED: 'preferences_changed',\r\n    PREFERENCES_DELETED: 'preferences_deleted',\r\n    EPHEMERAL_MESSAGE: 'ephemeral_message',\r\n    STATUS_CHANGED: 'status_change',\r\n    HELLO: 'hello',\r\n    WEBRTC: 'webrtc',\r\n    REACTION_ADDED: 'reaction_added',\r\n    REACTION_REMOVED: 'reaction_removed',\r\n    EMOJI_ADDED: 'emoji_added',\r\n    LICENSE_CHANGED: 'license_changed',\r\n    CONFIG_CHANGED: 'config_changed',\r\n    PLUGIN_STATUSES_CHANGED: 'plugin_statuses_changed',\r\n    OPEN_DIALOG: 'open_dialog',\r\n    INCREASE_POST_VISIBILITY_BY_ONE: 'increase_post_visibility_by_one',\r\n    RECEIVED_GROUP: 'received_group',\r\n    RECEIVED_GROUP_ASSOCIATED_TO_TEAM: 'group_associated_to_team',\r\n    RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM: 'group_not_associated_to_team',\r\n    RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL: 'group_associated_to_channel',\r\n    RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL: 'group_not_associated_to_channel',\r\n    THREAD_UPDATED: 'thread_updated',\r\n    THREAD_FOLLOW_CHANGED: 'thread_follow_changed',\r\n    THREAD_READ_CHANGED: 'thread_read_changed',\r\n    FIRST_ADMIN_VISIT_MARKETPLACE_STATUS_RECEIVED: 'first_admin_visit_marketplace_status_received',\r\n    GROUP_MEMBER_DELETED: 'group_member_deleted',\r\n};\r\nexport default WebsocketEvents;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nconst values = {\r\n    INVITE_USER: 'invite_user',\r\n    ADD_USER_TO_TEAM: 'add_user_to_team',\r\n    MANAGE_SLASH_COMMANDS: 'manage_slash_commands',\r\n    MANAGE_OTHERS_SLASH_COMMANDS: 'manage_others_slash_commands',\r\n    CREATE_PUBLIC_CHANNEL: 'create_public_channel',\r\n    CREATE_PRIVATE_CHANNEL: 'create_private_channel',\r\n    MANAGE_PUBLIC_CHANNEL_MEMBERS: 'manage_public_channel_members',\r\n    MANAGE_PRIVATE_CHANNEL_MEMBERS: 'manage_private_channel_members',\r\n    READ_PUBLIC_CHANNEL_GROUPS: 'read_public_channel_groups',\r\n    READ_PRIVATE_CHANNEL_GROUPS: 'read_private_channel_groups',\r\n    ASSIGN_SYSTEM_ADMIN_ROLE: 'assign_system_admin_role',\r\n    MANAGE_ROLES: 'manage_roles',\r\n    MANAGE_TEAM_ROLES: 'manage_team_roles',\r\n    MANAGE_CHANNEL_ROLES: 'manage_channel_roles',\r\n    MANAGE_SYSTEM: 'manage_system',\r\n    CREATE_DIRECT_CHANNEL: 'create_direct_channel',\r\n    CREATE_GROUP_CHANNEL: 'create_group_channel',\r\n    MANAGE_PUBLIC_CHANNEL_PROPERTIES: 'manage_public_channel_properties',\r\n    MANAGE_PRIVATE_CHANNEL_PROPERTIES: 'manage_private_channel_properties',\r\n    LIST_PUBLIC_TEAMS: 'list_public_teams',\r\n    JOIN_PUBLIC_TEAMS: 'join_public_teams',\r\n    LIST_PRIVATE_TEAMS: 'list_private_teams',\r\n    JOIN_PRIVATE_TEAMS: 'join_private_teams',\r\n    LIST_TEAM_CHANNELS: 'list_team_channels',\r\n    JOIN_PUBLIC_CHANNELS: 'join_public_channels',\r\n    DELETE_PUBLIC_CHANNEL: 'delete_public_channel',\r\n    CONVERT_PUBLIC_CHANNEL_TO_PRIVATE: 'convert_public_channel_to_private',\r\n    CONVERT_PRIVATE_CHANNEL_TO_PUBLIC: 'convert_private_channel_to_public',\r\n    MANAGE_PUBLIC_CHANNEL_BANNER: 'manage_public_channel_banner',\r\n    MANAGE_PRIVATE_CHANNEL_BANNER: 'manage_private_channel_banner',\r\n    MANAGE_CHANNEL_ACCESS_RULES: 'manage_channel_access_rules',\r\n    DELETE_PRIVATE_CHANNEL: 'delete_private_channel',\r\n    EDIT_OTHER_USERS: 'edit_other_users',\r\n    READ_CHANNEL: 'read_channel',\r\n    READ_CHANNEL_CONTENT: 'read_channel_content',\r\n    READ_PUBLIC_CHANNEL: 'read_public_channel',\r\n    ADD_REACTION: 'add_reaction',\r\n    REMOVE_REACTION: 'remove_reaction',\r\n    REMOVE_OTHERS_REACTIONS: 'remove_others_reactions',\r\n    PERMANENT_DELETE_USER: 'permanent_delete_user',\r\n    UPLOAD_FILE: 'upload_file',\r\n    GET_PUBLIC_LINK: 'get_public_link',\r\n    MANAGE_WEBHOOKS: 'manage_webhooks',\r\n    MANAGE_OTHERS_WEBHOOKS: 'manage_others_webhooks',\r\n    MANAGE_INCOMING_WEBHOOKS: 'manage_incoming_webhooks',\r\n    MANAGE_OTHERS_INCOMING_WEBHOOKS: 'manage_others_incoming_webhooks',\r\n    MANAGE_OUTGOING_WEBHOOKS: 'manage_outgoing_webhooks',\r\n    MANAGE_OTHERS_OUTGOING_WEBHOOKS: 'manage_others_outgoing_webhooks',\r\n    MANAGE_OAUTH: 'manage_oauth',\r\n    MANAGE_OUTGOING_OAUTH_CONNECTIONS: 'manage_outgoing_oauth_connections',\r\n    MANAGE_SYSTEM_WIDE_OAUTH: 'manage_system_wide_oauth',\r\n    CREATE_POST: 'create_post',\r\n    CREATE_POST_PUBLIC: 'create_post_public',\r\n    EDIT_POST: 'edit_post',\r\n    EDIT_OTHERS_POSTS: 'edit_others_posts',\r\n    DELETE_POST: 'delete_post',\r\n    DELETE_OTHERS_POSTS: 'delete_others_posts',\r\n    REMOVE_USER_FROM_TEAM: 'remove_user_from_team',\r\n    CREATE_TEAM: 'create_team',\r\n    MANAGE_TEAM: 'manage_team',\r\n    IMPORT_TEAM: 'import_team',\r\n    VIEW_TEAM: 'view_team',\r\n    LIST_USERS_WITHOUT_TEAM: 'list_users_without_team',\r\n    CREATE_USER_ACCESS_TOKEN: 'create_user_access_token',\r\n    READ_USER_ACCESS_TOKEN: 'read_user_access_token',\r\n    REVOKE_USER_ACCESS_TOKEN: 'revoke_user_access_token',\r\n    MANAGE_JOBS: 'manage_jobs',\r\n    MANAGE_EMOJIS: 'manage_emojis',\r\n    MANAGE_OTHERS_EMOJIS: 'manage_others_emojis',\r\n    CREATE_EMOJIS: 'create_emojis',\r\n    DELETE_EMOJIS: 'delete_emojis',\r\n    DELETE_OTHERS_EMOJIS: 'delete_others_emojis',\r\n    VIEW_MEMBERS: 'view_members',\r\n    INVITE_GUEST: 'invite_guest',\r\n    PROMOTE_GUEST: 'promote_guest',\r\n    DEMOTE_TO_GUEST: 'demote_to_guest',\r\n    USE_CHANNEL_MENTIONS: 'use_channel_mentions',\r\n    USE_GROUP_MENTIONS: 'use_group_mentions',\r\n    READ_OTHER_USERS_TEAMS: 'read_other_users_teams',\r\n    EDIT_BRAND: 'edit_brand',\r\n    READ_JOBS: 'read_jobs',\r\n    DOWNLOAD_COMPLIANCE_EXPORT_RESULT: 'download_compliance_export_result',\r\n    CREATE_LDAP_SYNC_JOB: 'create_ldap_sync_job',\r\n    READ_LDAP_SYNC_JOB: 'read_ldap_sync_job',\r\n    TEST_LDAP: 'test_ldap',\r\n    GET_SAML_METADATA_FROM_IDP: 'get_saml_metadata_from_idp',\r\n    ADD_SAML_PUBLIC_CERT: 'add_saml_public_cert',\r\n    ADD_SAML_PRIVATE_CERT: 'add_saml_private_cert',\r\n    ADD_SAML_IDP_CERT: 'add_saml_idp_cert',\r\n    REMOVE_SAML_PUBLIC_CERT: 'remove_saml_public_cert',\r\n    REMOVE_SAML_PRIVATE_CERT: 'remove_saml_private_cert',\r\n    REMOVE_SAML_IDP_CERT: 'remove_saml_idp_cert',\r\n    GET_SAML_CERT_STATUS: 'get_saml_cert_status',\r\n    ADD_LDAP_PUBLIC_CERT: 'add_ldap_public_cert',\r\n    ADD_LDAP_PRIVATE_CERT: 'add_ldap_private_cert',\r\n    REMOVE_LDAP_PUBLIC_CERT: 'remove_ldap_public_cert',\r\n    REMOVE_LDAP_PRIVATE_CERT: 'remove_ldap_private_cert',\r\n    INVALIDATE_EMAIL_INVITE: 'invalidate_email_invite',\r\n    TEST_SITE_URL: 'test_site_url',\r\n    TEST_ELASTICSEARCH: 'test_elasticsearch',\r\n    TEST_S3: 'test_s3',\r\n    TEST_EMAIL: 'test_email',\r\n    RELOAD_CONFIG: 'reload_config',\r\n    INVALIDATE_CACHES: 'invalidate_caches',\r\n    PURGE_ELASTICSEARCH_INDEXES: 'purge_elasticsearch_indexes',\r\n    RECYCLE_DATABASE_CONNECTIONS: 'recycle_database_connections',\r\n    CREATE_ELASTICSEARCH_POST_INDEXING_JOB: 'create_elasticsearch_post_indexing_job',\r\n    CREATE_ELASTICSEARCH_POST_AGGREGATION_JOB: 'create_elasticsearch_post_aggregation_job',\r\n    READ_ELASTICSEARCH_POST_INDEXING_JOB: 'read_elasticsearch_post_indexing_job',\r\n    READ_ELASTICSEARCH_POST_AGGREGATION_JOB: 'read_elasticsearch_post_aggregation_job',\r\n    USE_SLASH_COMMANDS: 'use_slash_commands',\r\n\r\n    SYSCONSOLE_READ_ABOUT_EDITION_AND_LICENSE: 'sysconsole_read_about_edition_and_license',\r\n    SYSCONSOLE_WRITE_ABOUT_EDITION_AND_LICENSE: 'sysconsole_write_about_edition_and_license',\r\n    SYSCONSOLE_READ_BILLING: 'sysconsole_read_billing',\r\n    SYSCONSOLE_WRITE_BILLING: 'sysconsole_write_billing',\r\n    SYSCONSOLE_READ_REPORTING_SITE_STATISTICS: 'sysconsole_read_reporting_site_statistics',\r\n    SYSCONSOLE_WRITE_REPORTING_SITE_STATISTICS: 'sysconsole_write_reporting_site_statistics',\r\n    SYSCONSOLE_READ_REPORTING_TEAM_STATISTICS: 'sysconsole_read_reporting_team_statistics',\r\n    SYSCONSOLE_WRITE_REPORTING_TEAM_STATISTICS: 'sysconsole_write_reporting_statistics',\r\n    SYSCONSOLE_READ_REPORTING_SERVER_LOGS: 'sysconsole_read_reporting_server_logs',\r\n    SYSCONSOLE_WRITE_REPORTING_SERVER_LOGS: 'sysconsole_write_reporting_server_logs',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_USERS: 'sysconsole_read_user_management_users',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_USERS: 'sysconsole_write_user_management_users',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_GROUPS: 'sysconsole_read_user_management_groups',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_GROUPS: 'sysconsole_write_user_management_groups',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_TEAMS: 'sysconsole_read_user_management_teams',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_TEAMS: 'sysconsole_write_user_management_teams',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_CHANNELS: 'sysconsole_read_user_management_channels',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_CHANNELS: 'sysconsole_write_user_management_channels',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_PERMISSIONS: 'sysconsole_read_user_management_permissions',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_PERMISSIONS: 'sysconsole_write_user_management_permissions',\r\n    SYSCONSOLE_READ_USERMANAGEMENT_SYSTEM_ROLES: 'sysconsole_read_user_management_system_roles',\r\n    SYSCONSOLE_WRITE_USERMANAGEMENT_SYSTEM_ROLES: 'sysconsole_write_user_management_system_roles',\r\n    SYSCONSOLE_READ_SITE_CUSTOMIZATION: 'sysconsole_read_site_customization',\r\n    SYSCONSOLE_WRITE_SITE_CUSTOMIZATION: 'sysconsole_write_site_customization',\r\n    SYSCONSOLE_READ_SITE_LOCALIZATION: 'sysconsole_read_site_localization',\r\n    SYSCONSOLE_WRITE_SITE_LOCALIZATION: 'sysconsole_write_site_localization',\r\n    SYSCONSOLE_READ_SITE_USERS_AND_TEAMS: 'sysconsole_read_site_users_and_teams',\r\n    SYSCONSOLE_WRITE_SITE_USERS_AND_TEAMS: 'sysconsole_write_site_users_and_teams',\r\n    SYSCONSOLE_READ_SITE_NOTIFICATIONS: 'sysconsole_read_site_notifications',\r\n    SYSCONSOLE_WRITE_SITE_NOTIFICATIONS: 'sysconsole_write_site_notifications',\r\n    SYSCONSOLE_READ_SITE_ANNOUNCEMENT_BANNER: 'sysconsole_read_site_announcement_banner',\r\n    SYSCONSOLE_WRITE_SITE_ANNOUNCEMENT_BANNER: 'sysconsole_write_site_announcement_banner',\r\n    SYSCONSOLE_READ_SITE_EMOJI: 'sysconsole_read_site_emoji',\r\n    SYSCONSOLE_WRITE_SITE_EMOJI: 'sysconsole_write_site_emoji',\r\n    SYSCONSOLE_READ_SITE_POSTS: 'sysconsole_read_site_posts',\r\n    SYSCONSOLE_WRITE_SITE_POSTS: 'sysconsole_write_site_posts',\r\n    SYSCONSOLE_READ_SITE_FILE_SHARING_AND_DOWNLOADS: 'sysconsole_read_site_file_sharing_and_downloads',\r\n    SYSCONSOLE_WRITE_SITE_FILE_SHARING_AND_DOWNLOADS: 'sysconsole_write_site_file_sharing_and_downloads',\r\n    SYSCONSOLE_READ_SITE_PUBLIC_LINKS: 'sysconsole_read_site_public_links',\r\n    SYSCONSOLE_WRITE_SITE_PUBLIC_LINKS: 'sysconsole_write_site_public_links',\r\n    SYSCONSOLE_READ_SITE_NOTICES: 'sysconsole_read_site_notices',\r\n    SYSCONSOLE_WRITE_SITE_NOTICES: 'sysconsole_write_site_notices',\r\n    SYSCONSOLE_READ_SITE_IP_FILTERS: 'sysconsole_read_site_ip_filters',\r\n    SYSCONSOLE_WRITE_SITE_IP_FILTERS: 'sysconsole_write_site_ip_filters',\r\n    SYSCONSOLE_READ_ENVIRONMENT_WEB_SERVER: 'sysconsole_read_environment_web_server',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_WEB_SERVER: 'sysconsole_write_environment_web_server',\r\n    SYSCONSOLE_READ_ENVIRONMENT_DATABASE: 'sysconsole_read_environment_database',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_DATABASE: 'sysconsole_write_environment_database',\r\n    SYSCONSOLE_READ_ENVIRONMENT_ELASTICSEARCH: 'sysconsole_read_environment_elasticsearch',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_ELASTICSEARCH: 'sysconsole_write_environment_elasticsearch',\r\n    SYSCONSOLE_READ_ENVIRONMENT_FILE_STORAGE: 'sysconsole_read_environment_file_storage',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_FILE_STORAGE: 'sysconsole_write_environment_file_storage',\r\n    SYSCONSOLE_READ_ENVIRONMENT_IMAGE_PROXY: 'sysconsole_read_environment_image_proxy',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_IMAGE_PROXY: 'sysconsole_write_environment_image_proxy',\r\n    SYSCONSOLE_READ_ENVIRONMENT_SMTP: 'sysconsole_read_environment_smtp',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_SMTP: 'sysconsole_write_environment_smtp',\r\n    SYSCONSOLE_READ_ENVIRONMENT_PUSH_NOTIFICATION_SERVER: 'sysconsole_read_environment_push_notification_server',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_PUSH_NOTIFICATION_SERVER: 'sysconsole_write_environment_push_notification_server',\r\n    SYSCONSOLE_READ_ENVIRONMENT_HIGH_AVAILABILITY: 'sysconsole_read_environment_high_availability',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_HIGH_AVAILABILITY: 'sysconsole_write_environment_high_availability',\r\n    SYSCONSOLE_READ_ENVIRONMENT_RATE_LIMITING: 'sysconsole_read_environment_rate_limiting',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_RATE_LIMITING: 'sysconsole_write_environment_rate_limiting',\r\n    SYSCONSOLE_READ_ENVIRONMENT_LOGGING: 'sysconsole_read_environment_logging',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_LOGGING: 'sysconsole_write_environment_logging',\r\n    SYSCONSOLE_READ_ENVIRONMENT_SESSION_LENGTHS: 'sysconsole_read_environment_session_lengths',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_SESSION_LENGTHS: 'sysconsole_write_environment_session_lengths',\r\n    SYSCONSOLE_READ_ENVIRONMENT_PERFORMANCE_MONITORING: 'sysconsole_read_environment_performance_monitoring',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_PERFORMANCE_MONITORING: 'sysconsole_write_environment_performance_monitoring',\r\n    SYSCONSOLE_READ_ENVIRONMENT_DEVELOPER: 'sysconsole_read_environment_developer',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_DEVELOPER: 'sysconsole_write_environment_developer',\r\n    SYSCONSOLE_READ_ENVIRONMENT_MOBILE_SECURITY: 'sysconsole_read_environment_mobile_security',\r\n    SYSCONSOLE_WRITE_ENVIRONMENT_MOBILE_SECURITY: 'sysconsole_write_environment_mobile_security',\r\n    SYSCONSOLE_READ_AUTHENTICATION_SIGNUP: 'sysconsole_read_authentication_signup',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_SIGNUP: 'sysconsole_write_authentication_signup',\r\n    SYSCONSOLE_READ_AUTHENTICATION_EMAIL: 'sysconsole_read_authentication_email',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_EMAIL: 'sysconsole_write_authentication_email',\r\n    SYSCONSOLE_READ_AUTHENTICATION_PASSWORD: 'sysconsole_read_authentication_password',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_PASSWORD: 'sysconsole_write_authentication_password',\r\n    SYSCONSOLE_READ_AUTHENTICATION_MFA: 'sysconsole_read_authentication_mfa',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_MFA: 'sysconsole_write_authentication_mfa',\r\n    SYSCONSOLE_READ_AUTHENTICATION_LDAP: 'sysconsole_read_authentication_ldap',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_LDAP: 'sysconsole_write_authentication_ldap',\r\n    SYSCONSOLE_READ_AUTHENTICATION_SAML: 'sysconsole_read_authentication_saml',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_SAML: 'sysconsole_write_authentication_saml',\r\n    SYSCONSOLE_READ_AUTHENTICATION_OPENID: 'sysconsole_read_authentication_openid',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_OPENID: 'sysconsole_write_authentication_openid',\r\n    SYSCONSOLE_READ_AUTHENTICATION_GUEST_ACCESS: 'sysconsole_read_authentication_guest_access',\r\n    SYSCONSOLE_WRITE_AUTHENTICATION_GUEST_ACCESS: 'sysconsole_write_authentication_guest_access',\r\n    SYSCONSOLE_READ_PLUGINS: 'sysconsole_read_plugins',\r\n    SYSCONSOLE_WRITE_PLUGINS: 'sysconsole_write_plugins',\r\n    SYSCONSOLE_READ_INTEGRATIONS_INTEGRATION_MANAGEMENT: 'sysconsole_read_integrations_integration_management',\r\n    SYSCONSOLE_WRITE_INTEGRATIONS_INTEGRATION_MANAGEMENT: 'sysconsole_write_integrations_integration_management',\r\n    SYSCONSOLE_READ_INTEGRATIONS_BOT_ACCOUNTS: 'sysconsole_read_integrations_bot_accounts',\r\n    SYSCONSOLE_WRITE_INTEGRATIONS_BOT_ACCOUNTS: 'sysconsole_write_integrations_bot_accounts',\r\n    SYSCONSOLE_READ_INTEGRATIONS_GIF: 'sysconsole_read_integrations_gif',\r\n    SYSCONSOLE_WRITE_INTEGRATIONS_GIF: 'sysconsole_write_integrations_gif',\r\n    SYSCONSOLE_READ_INTEGRATIONS_CORS: 'sysconsole_read_integrations_cors',\r\n    SYSCONSOLE_WRITE_INTEGRATIONS_CORS: 'sysconsole_write_integrations_cors',\r\n    SYSCONSOLE_READ_COMPLIANCE_DATA_RETENTION_POLICY: 'sysconsole_read_compliance_data_retention_policy',\r\n    SYSCONSOLE_WRITE_COMPLIANCE_DATA_RETENTION_POLICY: 'sysconsole_write_compliance_data_retention_policy',\r\n    SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_EXPORT: 'sysconsole_read_compliance_compliance_export',\r\n    SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_EXPORT: 'sysconsole_write_compliance_compliance_export',\r\n    SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_MONITORING: 'sysconsole_read_compliance_compliance_monitoring',\r\n    SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_MONITORING: 'sysconsole_write_compliance_compliance_monitoring',\r\n    SYSCONSOLE_READ_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE: 'sysconsole_read_compliance_custom_terms_of_service',\r\n    SYSCONSOLE_WRITE_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE: 'sysconsole_write_compliance_custom_terms_of_service',\r\n    SYSCONSOLE_READ_EXPERIMENTAL_FEATURES: 'sysconsole_read_experimental_features',\r\n    SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURES: 'sysconsole_write_experimental_features',\r\n    SYSCONSOLE_READ_EXPERIMENTAL_FEATURE_FLAGS: 'sysconsole_read_experimental_feature_flags',\r\n    SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURE_FLAGS: 'sysconsole_write_experimental_feature_flags',\r\n    SYSCONSOLE_READ_EXPERIMENTAL_BLEVE: 'sysconsole_read_experimental_bleve',\r\n    SYSCONSOLE_WRITE_EXPERIMENTAL_BLEVE: 'sysconsole_write_experimental_bleve',\r\n\r\n    SYSCONSOLE_READ_PRODUCTS_BOARDS: 'sysconsole_read_products_boards',\r\n    SYSCONSOLE_WRITE_PRODUCTS_BOARDS: 'sysconsole_write_products_boards',\r\n\r\n    PLAYBOOK_PUBLIC_CREATE: 'playbook_public_create',\r\n    PLAYBOOK_PUBLIC_MANAGE_PROPERTIES: 'playbook_public_manage_properties',\r\n    PLAYBOOK_PUBLIC_MANAGE_MEMBERS: 'playbook_public_manage_members',\r\n    PLAYBOOK_PUBLIC_VIEW: 'playbook_public_view',\r\n    PLAYBOOK_PUBLIC_MAKE_PRIVATE: 'playbook_public_make_private',\r\n\r\n    PLAYBOOK_PRIVATE_CREATE: 'playbook_private_create',\r\n    PLAYBOOK_PRIVATE_MANAGE_PROPERTIES: 'playbook_private_manage_properties',\r\n    PLAYBOOK_PRIVATE_MANAGE_MEMBERS: 'playbook_private_manage_members',\r\n    PLAYBOOK_PRIVATE_VIEW: 'playbook_private_view',\r\n    PLAYBOOK_PRIVATE_MAKE_PUBLIC: 'playbook_private_make_public',\r\n\r\n    RUN_CREATE: 'run_create',\r\n    RUN_MANAGE_PROPERTIES: 'run_manage_properties',\r\n    RUN_MANAGE_MEMBERS: 'run_manage_members',\r\n    RUN_VIEW: 'run_view',\r\n\r\n    CHANNEL_MODERATED_PERMISSIONS: {\r\n        CREATE_POST: 'create_post',\r\n        CREATE_REACTIONS: 'create_reactions',\r\n        MANAGE_MEMBERS: 'manage_members',\r\n        USE_CHANNEL_MENTIONS: 'use_channel_mentions',\r\n        MANAGE_BOOKMARKS: 'manage_bookmarks',\r\n    },\r\n    MANAGE_BOTS: 'manage_bots',\r\n    MANAGE_OTHERS_BOTS: 'manage_others_bots',\r\n    SYSCONSOLE_READ_PERMISSIONS: [] as string[],\r\n    SYSCONSOLE_WRITE_PERMISSIONS: [] as string[],\r\n    MANAGE_SHARED_CHANNELS: 'manage_shared_channels',\r\n    MANAGE_SECURE_CONNECTIONS: 'manage_secure_connections',\r\n\r\n    CREATE_CUSTOM_GROUP: 'create_custom_group',\r\n    MANAGE_CUSTOM_GROUP_MEMBERS: 'manage_custom_group_members',\r\n    EDIT_CUSTOM_GROUP: 'edit_custom_group',\r\n    DELETE_CUSTOM_GROUP: 'delete_custom_group',\r\n    RESTORE_CUSTOM_GROUP: 'restore_custom_group',\r\n\r\n    ADD_BOOKMARK_PUBLIC_CHANNEL: 'add_bookmark_public_channel',\r\n    EDIT_BOOKMARK_PUBLIC_CHANNEL: 'edit_bookmark_public_channel',\r\n    DELETE_BOOKMARK_PUBLIC_CHANNEL: 'delete_bookmark_public_channel',\r\n    ORDER_BOOKMARK_PUBLIC_CHANNEL: 'order_bookmark_public_channel',\r\n    ADD_BOOKMARK_PRIVATE_CHANNEL: 'add_bookmark_private_channel',\r\n    EDIT_BOOKMARK_PRIVATE_CHANNEL: 'edit_bookmark_private_channel',\r\n    DELETE_BOOKMARK_PRIVATE_CHANNEL: 'delete_bookmark_private_channel',\r\n    ORDER_BOOKMARK_PRIVATE_CHANNEL: 'order_bookmark_private_channel',\r\n};\r\n\r\nvalues.SYSCONSOLE_READ_PERMISSIONS = [\r\n    values.SYSCONSOLE_READ_ABOUT_EDITION_AND_LICENSE,\r\n    values.SYSCONSOLE_READ_BILLING,\r\n    values.SYSCONSOLE_READ_REPORTING_SITE_STATISTICS,\r\n    values.SYSCONSOLE_READ_REPORTING_TEAM_STATISTICS,\r\n    values.SYSCONSOLE_READ_REPORTING_SERVER_LOGS,\r\n    values.SYSCONSOLE_READ_USERMANAGEMENT_USERS,\r\n    values.SYSCONSOLE_READ_USERMANAGEMENT_GROUPS,\r\n    values.SYSCONSOLE_READ_USERMANAGEMENT_TEAMS,\r\n    values.SYSCONSOLE_READ_USERMANAGEMENT_CHANNELS,\r\n    values.SYSCONSOLE_READ_USERMANAGEMENT_PERMISSIONS,\r\n    values.SYSCONSOLE_READ_SITE_CUSTOMIZATION,\r\n    values.SYSCONSOLE_READ_SITE_LOCALIZATION,\r\n    values.SYSCONSOLE_READ_SITE_USERS_AND_TEAMS,\r\n    values.SYSCONSOLE_READ_SITE_NOTIFICATIONS,\r\n    values.SYSCONSOLE_READ_SITE_ANNOUNCEMENT_BANNER,\r\n    values.SYSCONSOLE_READ_SITE_EMOJI,\r\n    values.SYSCONSOLE_READ_SITE_POSTS,\r\n    values.SYSCONSOLE_READ_SITE_FILE_SHARING_AND_DOWNLOADS,\r\n    values.SYSCONSOLE_READ_SITE_PUBLIC_LINKS,\r\n    values.SYSCONSOLE_READ_SITE_NOTICES,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_WEB_SERVER,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_DATABASE,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_ELASTICSEARCH,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_FILE_STORAGE,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_IMAGE_PROXY,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_SMTP,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_PUSH_NOTIFICATION_SERVER,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_HIGH_AVAILABILITY,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_RATE_LIMITING,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_LOGGING,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_SESSION_LENGTHS,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_PERFORMANCE_MONITORING,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_DEVELOPER,\r\n    values.SYSCONSOLE_READ_ENVIRONMENT_MOBILE_SECURITY,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_SIGNUP,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_EMAIL,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_PASSWORD,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_MFA,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_LDAP,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_SAML,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_OPENID,\r\n    values.SYSCONSOLE_READ_AUTHENTICATION_GUEST_ACCESS,\r\n    values.SYSCONSOLE_READ_PLUGINS,\r\n    values.SYSCONSOLE_READ_INTEGRATIONS_INTEGRATION_MANAGEMENT,\r\n    values.SYSCONSOLE_READ_INTEGRATIONS_BOT_ACCOUNTS,\r\n    values.SYSCONSOLE_READ_INTEGRATIONS_GIF,\r\n    values.SYSCONSOLE_READ_INTEGRATIONS_CORS,\r\n    values.SYSCONSOLE_READ_COMPLIANCE_DATA_RETENTION_POLICY,\r\n    values.SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_EXPORT,\r\n    values.SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_MONITORING,\r\n    values.SYSCONSOLE_READ_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE,\r\n    values.SYSCONSOLE_READ_EXPERIMENTAL_FEATURES,\r\n    values.SYSCONSOLE_READ_EXPERIMENTAL_FEATURE_FLAGS,\r\n    values.SYSCONSOLE_READ_EXPERIMENTAL_BLEVE,\r\n    values.SYSCONSOLE_READ_PRODUCTS_BOARDS,\r\n];\r\n\r\nvalues.SYSCONSOLE_WRITE_PERMISSIONS = [\r\n    values.SYSCONSOLE_WRITE_ABOUT_EDITION_AND_LICENSE,\r\n    values.SYSCONSOLE_WRITE_BILLING,\r\n    values.SYSCONSOLE_WRITE_REPORTING_SITE_STATISTICS,\r\n    values.SYSCONSOLE_WRITE_REPORTING_TEAM_STATISTICS,\r\n    values.SYSCONSOLE_WRITE_REPORTING_SERVER_LOGS,\r\n    values.SYSCONSOLE_WRITE_USERMANAGEMENT_USERS,\r\n    values.SYSCONSOLE_WRITE_USERMANAGEMENT_GROUPS,\r\n    values.SYSCONSOLE_WRITE_USERMANAGEMENT_TEAMS,\r\n    values.SYSCONSOLE_WRITE_USERMANAGEMENT_CHANNELS,\r\n    values.SYSCONSOLE_WRITE_USERMANAGEMENT_PERMISSIONS,\r\n    values.SYSCONSOLE_WRITE_SITE_CUSTOMIZATION,\r\n    values.SYSCONSOLE_WRITE_SITE_LOCALIZATION,\r\n    values.SYSCONSOLE_WRITE_SITE_USERS_AND_TEAMS,\r\n    values.SYSCONSOLE_WRITE_SITE_NOTIFICATIONS,\r\n    values.SYSCONSOLE_WRITE_SITE_ANNOUNCEMENT_BANNER,\r\n    values.SYSCONSOLE_WRITE_SITE_EMOJI,\r\n    values.SYSCONSOLE_WRITE_SITE_POSTS,\r\n    values.SYSCONSOLE_WRITE_SITE_FILE_SHARING_AND_DOWNLOADS,\r\n    values.SYSCONSOLE_WRITE_SITE_PUBLIC_LINKS,\r\n    values.SYSCONSOLE_WRITE_SITE_NOTICES,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_WEB_SERVER,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_DATABASE,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_ELASTICSEARCH,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_FILE_STORAGE,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_IMAGE_PROXY,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_SMTP,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_PUSH_NOTIFICATION_SERVER,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_HIGH_AVAILABILITY,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_RATE_LIMITING,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_LOGGING,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_SESSION_LENGTHS,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_PERFORMANCE_MONITORING,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_DEVELOPER,\r\n    values.SYSCONSOLE_WRITE_ENVIRONMENT_MOBILE_SECURITY,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_SIGNUP,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_EMAIL,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_PASSWORD,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_MFA,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_LDAP,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_SAML,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_OPENID,\r\n    values.SYSCONSOLE_WRITE_AUTHENTICATION_GUEST_ACCESS,\r\n    values.SYSCONSOLE_WRITE_PLUGINS,\r\n    values.SYSCONSOLE_WRITE_INTEGRATIONS_INTEGRATION_MANAGEMENT,\r\n    values.SYSCONSOLE_WRITE_INTEGRATIONS_BOT_ACCOUNTS,\r\n    values.SYSCONSOLE_WRITE_INTEGRATIONS_GIF,\r\n    values.SYSCONSOLE_WRITE_INTEGRATIONS_CORS,\r\n    values.SYSCONSOLE_WRITE_COMPLIANCE_DATA_RETENTION_POLICY,\r\n    values.SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_EXPORT,\r\n    values.SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_MONITORING,\r\n    values.SYSCONSOLE_WRITE_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE,\r\n    values.SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURES,\r\n    values.SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURE_FLAGS,\r\n    values.SYSCONSOLE_WRITE_EXPERIMENTAL_BLEVE,\r\n    values.SYSCONSOLE_WRITE_PRODUCTS_BOARDS,\r\n];\r\n\r\nexport default values;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    PLUGIN_STATE_NOT_RUNNING: 0,\r\n    PLUGIN_STATE_STARTING: 1,\r\n    PLUGIN_STATE_RUNNING: 2,\r\n    PLUGIN_STATE_FAILED_TO_START: 3,\r\n    PLUGIN_STATE_FAILED_TO_STAY_RUNNING: 4,\r\n    PLUGIN_STATE_STOPPING: 5,\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport default {\r\n    THREADS_CHUNK_SIZE: 20,\r\n    THREADS_PAGE_SIZE: 25,\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable */\r\n\r\nfunction defaultEqualityCheck(a, b) {\r\n    return a === b;\r\n}\r\n\r\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\r\n    if (prev === null || next === null || prev.length !== next.length) {\r\n        return false;\r\n    }\r\n\r\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\r\n    const length = prev.length;\r\n    for (let i = 0; i < length; i++) {\r\n        if (!equalityCheck(prev[i], next[i])) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nexport function defaultMemoize(func, equalityCheck = defaultEqualityCheck) {\r\n    let lastArgs = null\r\n    let lastResult = null\r\n    // we reference arguments instead of spreading them for performance reasons\r\n    return function () {\r\n        if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\r\n            // apply arguments instead of spreading for performance.\r\n            lastResult = func.apply(null, arguments)\r\n        }\r\n\r\n        lastArgs = arguments\r\n        return lastResult\r\n    }\r\n}\r\n\r\nfunction getDependencies(funcs) {\r\n    const dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\r\n\r\n    if (!dependencies.every((dep) => typeof dep === 'function')) {\r\n        const dependencyTypes = dependencies.map(\r\n            (dep) => typeof dep,\r\n        ).join(', ');\r\n        throw new Error(\r\n            'Selector creators expect all input-selectors to be functions, ' +\r\n        `instead received the following types: [${dependencyTypes}]`,\r\n        );\r\n    }\r\n\r\n    return dependencies;\r\n}\r\n\r\nexport function createSelectorCreator(memoize, ...memoizeOptions) {\r\n    return (name, ...funcs) => {\r\n        const resultFunc = funcs.pop();\r\n        const dependencies = getDependencies(funcs);\r\n\r\n        const memoizedResultFunc = memoize(\r\n            function() {\r\n                // apply arguments instead of spreading for performance.\r\n                return resultFunc?.apply(null, arguments);\r\n            },\r\n            ...memoizeOptions,\r\n        );\r\n\r\n        // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\r\n        const selector = memoize(function() {\r\n            const params = [];\r\n            const length = dependencies.length;\r\n\r\n            for (let i = 0; i < length; i++) {\r\n                // apply arguments instead of spreading and mutate a local list of params for performance.\r\n                params.push(dependencies[i].apply(null, arguments));\r\n            }\r\n\r\n            // apply arguments instead of spreading for performance.\r\n            return memoizedResultFunc.apply(null, params);\r\n        });\r\n\r\n        selector.resultFunc = resultFunc;\r\n        selector.dependencies = dependencies;\r\n\r\n        return selector;\r\n    };\r\n}\r\n\r\nexport const createSelector = /* #__PURE__ */ createSelectorCreator(defaultMemoize);\r\n\r\nexport function createStructuredSelector(selectors, selectorCreator = createSelector) {\r\n    if (typeof selectors !== 'object') {\r\n        throw new Error(\r\n            'createStructuredSelector expects first argument to be an object ' +\r\n        `where each property is a selector, instead received a ${typeof selectors}`,\r\n        );\r\n    }\r\n    const objectKeys = Object.keys(selectors);\r\n    return selectorCreator(\r\n        objectKeys.map((key) => selectors[key]),\r\n        (...values) => {\r\n            return values.reduce((composition, value, index) => {\r\n                composition[objectKeys[index]] = value;\r\n                return composition;\r\n            }, {});\r\n        },\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel, ChannelWithTeamData, ChannelSearchOpts} from '@mattermost/types/channels';\r\nimport type {AccessControlSettings} from '@mattermost/types/config';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {filterChannelsMatchingTerm} from 'mattermost-redux/utils/channel_utils';\r\n\r\nimport {filterChannelList} from './channels';\r\n\r\nimport {createSelector} from '../create_selector';\r\n\r\nexport function getAccessControlSettings(state: GlobalState): AccessControlSettings {\r\n    // First try to get from admin config (for admin console pages)\r\n    const adminConfig = state.entities.admin.config.AccessControlSettings as AccessControlSettings;\r\n    if (adminConfig) {\r\n        return adminConfig;\r\n    }\r\n\r\n    // Otherwise, build from client config (for regular users/channel admins)\r\n    const config = getConfig(state) as any;\r\n    return {\r\n        EnableAttributeBasedAccessControl: config?.EnableAttributeBasedAccessControl === 'true',\r\n        EnableChannelScopeAccessControl: config?.EnableChannelScopeAccessControl === 'true',\r\n        EnableUserManagedAttributes: config?.EnableUserManagedAttributes === 'true',\r\n    } as AccessControlSettings;\r\n}\r\n\r\nexport function isChannelScopeAccessControlEnabled(state: GlobalState): boolean {\r\n    const settings = getAccessControlSettings(state);\r\n    return settings?.EnableChannelScopeAccessControl || false;\r\n}\r\n\r\nexport function getAccessControlPolicy(state: GlobalState, id: string) {\r\n    return state.entities.admin.accessControlPolicies[id];\r\n}\r\n\r\nexport const getChannelIdsForAccessControlPolicy = createSelector(\r\n    'getChannelIdsForAccessControlPolicy',\r\n    (state: GlobalState, parentId: string) => state.entities.admin.channelsForAccessControlPolicy[parentId],\r\n    (channelIds) => (Array.isArray(channelIds) ? channelIds : []),\r\n) as (state: GlobalState, parentId: string) => string[];\r\n\r\nexport function makeGetChannelsInAccessControlPolicy() {\r\n    return (createSelector(\r\n        'getChannelsInAccessControlPolicy',\r\n        (state: GlobalState) => state.entities.channels.channels,\r\n        (state: GlobalState, props: {policyId: string}) => getChannelIdsForAccessControlPolicy(state, props.policyId),\r\n        (state: GlobalState) => state.entities.teams.teams,\r\n        (channels, ids, teams) => {\r\n            if (!ids) {\r\n                return [];\r\n            }\r\n\r\n            const policyChannels: ChannelWithTeamData[] = [];\r\n\r\n            ids.forEach((channelId) => {\r\n                const channel = channels[channelId];\r\n                if (channel) {\r\n                    const team = teams[channel.team_id] || {};\r\n                    policyChannels.push({\r\n                        ...channel,\r\n                        team_id: channel.team_id,\r\n                        team_display_name: team.display_name || '',\r\n                        team_name: team.name || '',\r\n                        team_update_at: team.update_at || 0,\r\n                    });\r\n                }\r\n            });\r\n\r\n            return policyChannels;\r\n        }) as (b: GlobalState, a: {\r\n        policyId: string;\r\n    }) => ChannelWithTeamData[]);\r\n}\r\n\r\nexport function searchChannelsInheritsPolicy(state: GlobalState, policyId: string, term: string, filters: ChannelSearchOpts): Channel[] {\r\n    const channelsInPolicy = makeGetChannelsInAccessControlPolicy();\r\n    const channelArray = channelsInPolicy(state, {policyId});\r\n    let channels = filterChannelList(channelArray, filters);\r\n    channels = filterChannelsMatchingTerm(channels, term);\r\n\r\n    return channels;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {LogObject} from '@mattermost/types/admin';\r\nimport type {DataRetentionCustomPolicies, DataRetentionCustomPolicy} from '@mattermost/types/data_retention';\r\nimport type {PluginStatusRedux} from '@mattermost/types/plugins';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\n\r\nexport function getLogs(state: GlobalState) {\r\n    return state.entities.admin.logs;\r\n}\r\n\r\nexport function getPlainLogs(state: GlobalState) {\r\n    return state.entities.admin.plainLogs;\r\n}\r\n\r\nexport const getAllLogs = createSelector(\r\n    'getAllLogs',\r\n    getLogs,\r\n    (logs) => {\r\n        return Object.values(logs).reduce<LogObject[]>((acc, log) => {\r\n            // @ts-expect-error: object that is returned from the server contains an array of logs but ts gets confused that its one log object\r\n            acc.push(...log);\r\n            return acc;\r\n        }, []);\r\n    },\r\n);\r\n\r\nexport function getAudits(state: GlobalState) {\r\n    return state.entities.admin.audits;\r\n}\r\n\r\nexport function getConfig(state: GlobalState) {\r\n    return state.entities.admin.config;\r\n}\r\n\r\nexport function getLdapGroups(state: GlobalState) {\r\n    return state.entities.admin.ldapGroups;\r\n}\r\n\r\nexport function getLdapGroupsCount(state: GlobalState) {\r\n    return state.entities.admin.ldapGroupsCount;\r\n}\r\n\r\nexport function getEnvironmentConfig(state: GlobalState) {\r\n    return state.entities.admin.environmentConfig;\r\n}\r\n\r\nexport function getComplianceReports(state: GlobalState) {\r\n    return state.entities.admin.complianceReports;\r\n}\r\n\r\nexport function getClusterInfo(state: GlobalState) {\r\n    return state.entities.admin.clusterInfo;\r\n}\r\n\r\nexport function getUserAccessTokens(state: GlobalState) {\r\n    return state.entities.admin.userAccessTokens;\r\n}\r\n\r\nexport function getDataRetentionCustomPolicies(state: GlobalState): DataRetentionCustomPolicies {\r\n    return state.entities.admin.dataRetentionCustomPolicies;\r\n}\r\n\r\nexport function getDataRetentionCustomPoliciesCount(state: GlobalState): number {\r\n    return state.entities.admin.dataRetentionCustomPoliciesCount;\r\n}\r\n\r\nexport function getDataRetentionCustomPolicy(state: GlobalState, id: string): DataRetentionCustomPolicy | undefined | null {\r\n    const policy = getDataRetentionCustomPolicies(state);\r\n    return policy[id];\r\n}\r\n\r\nexport function getAdminAnalytics(state: GlobalState) {\r\n    return state.entities.admin.analytics;\r\n}\r\n\r\nexport function getPluginStatuses(state: GlobalState): Record<string, PluginStatusRedux> | undefined {\r\n    return state.entities.admin.pluginStatuses;\r\n}\r\n\r\nexport function getPluginStatus(state: GlobalState, id: string): PluginStatusRedux | undefined {\r\n    return getPluginStatuses(state)?.[id];\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport shallowEquals from 'shallow-equals';\r\n\r\nimport type {ChannelCategory, ChannelCategoryType} from '@mattermost/types/channel_categories';\r\nimport {CategorySorting} from '@mattermost/types/channel_categories';\r\nimport type {Channel, ChannelMembership, ChannelMessageCount} from '@mattermost/types/channels';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {IDMappedObjects, RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport {General, Preferences} from 'mattermost-redux/constants';\r\nimport {CategoryTypes} from 'mattermost-redux/constants/channel_categories';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getChannelMessageCounts, getCurrentChannelId, getMyChannelMemberships, makeGetChannelsForIds} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentUserLocale} from 'mattermost-redux/selectors/entities/i18n';\r\nimport {getMyPreferences, getTeammateNameDisplaySetting, getVisibleDmGmLimit, isCollapsedThreadsEnabled} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\nimport {\r\n    calculateUnreadCount,\r\n    getUserIdFromChannelName,\r\n    isChannelMuted,\r\n} from 'mattermost-redux/utils/channel_utils';\r\nimport {getPreferenceKey} from 'mattermost-redux/utils/preference_utils';\r\nimport {displayUsername} from 'mattermost-redux/utils/user_utils';\r\n\r\nexport function getAllCategoriesByIds(state: GlobalState) {\r\n    return state.entities.channelCategories.byId;\r\n}\r\n\r\nexport function getCategory(state: GlobalState, categoryId: string) {\r\n    return getAllCategoriesByIds(state)[categoryId];\r\n}\r\n\r\n// getCategoryInTeamByType returns the first category found of the given type on the given team. This is intended for use\r\n// with only non-custom types of categories.\r\nexport function getCategoryInTeamByType(state: GlobalState, teamId: string, categoryType: ChannelCategoryType) {\r\n    return getCategoryWhere(\r\n        state,\r\n        (category) => category.type === categoryType && category.team_id === teamId,\r\n    );\r\n}\r\n\r\n// getCategoryInTeamWithChannel returns the category on a given team containing the given channel ID.\r\nexport function getCategoryInTeamWithChannel(state: GlobalState, teamId: string, channelId: string) {\r\n    return getCategoryWhere(\r\n        state,\r\n        (category) => category.team_id === teamId && category.channel_ids.includes(channelId),\r\n    );\r\n}\r\n\r\n// getCategoryWhere returns the first category meeting the given condition. This should not be used with a condition\r\n// that matches multiple categories.\r\nexport function getCategoryWhere(state: GlobalState, condition: (category: ChannelCategory) => boolean) {\r\n    const categoriesByIds = getAllCategoriesByIds(state);\r\n\r\n    return Object.values(categoriesByIds).find(condition);\r\n}\r\n\r\nexport function getCategoryIdsForTeam(state: GlobalState, teamId: string): string[] {\r\n    return state.entities.channelCategories.orderByTeam[teamId];\r\n}\r\n\r\nexport function makeGetCategoriesForTeam(): (state: GlobalState, teamId: string) => ChannelCategory[] {\r\n    return createSelector(\r\n        'makeGetCategoriesForTeam',\r\n        getCategoryIdsForTeam,\r\n        (state: GlobalState) => state.entities.channelCategories.byId,\r\n        (categoryIds, categoriesById) => {\r\n            if (!categoryIds) {\r\n                return [];\r\n            }\r\n\r\n            return categoryIds.map((id) => categoriesById[id]);\r\n        },\r\n    );\r\n}\r\n\r\n// makeFilterArchivedChannels returns a selector that filters a given list of channels based on whether or not the channel\r\n// is archived or is currently being viewed. The selector returns the original array if no channels are filtered out.\r\nexport function makeFilterArchivedChannels(): (state: GlobalState, channels: Channel[]) => Channel[] {\r\n    return createSelector(\r\n        'makeFilterArchivedChannels',\r\n        (state: GlobalState, channels: Channel[]) => channels,\r\n        getCurrentChannelId,\r\n        (channels: Channel[], currentChannelId: string) => {\r\n            const filtered = channels.filter((channel) => channel && (channel.id === currentChannelId || channel.delete_at === 0));\r\n\r\n            return filtered.length === channels.length ? channels : filtered;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeFilterAutoclosedDMs(): (state: GlobalState, channels: Channel[], categoryType: string) => Channel[] {\r\n    return createSelector(\r\n        'makeFilterAutoclosedDMs',\r\n        (state: GlobalState, channels: Channel[]) => channels,\r\n        (state: GlobalState, channels: Channel[], categoryType: string) => categoryType,\r\n        getCurrentChannelId,\r\n        (state: GlobalState) => state.entities.users.profiles,\r\n        getCurrentUserId,\r\n        getMyChannelMemberships,\r\n        getChannelMessageCounts,\r\n        (state) => getVisibleDmGmLimit(state),\r\n        getMyPreferences,\r\n        isCollapsedThreadsEnabled,\r\n        (channels, categoryType, currentChannelId, profiles, currentUserId, myMembers, messageCounts, limitPref, myPreferences, collapsedThreads) => {\r\n            if (categoryType !== CategoryTypes.DIRECT_MESSAGES) {\r\n                // Only autoclose DMs that haven't been assigned to a category\r\n                return channels;\r\n            }\r\n\r\n            const getTimestampFromPrefs = (category: string, name: string) => {\r\n                const pref = myPreferences[getPreferenceKey(category, name)];\r\n                return parseInt(pref ? pref.value! : '0', 10);\r\n            };\r\n            const getLastViewedAt = (channel: Channel) => {\r\n                // The server only ever sets the last_viewed_at to the time of the last post in channel, so we may need\r\n                // to use the preferences added for the previous version of autoclosing DMs.\r\n                return Math.max(\r\n                    myMembers[channel.id]?.last_viewed_at,\r\n                    getTimestampFromPrefs(Preferences.CATEGORY_CHANNEL_APPROXIMATE_VIEW_TIME, channel.id),\r\n                    getTimestampFromPrefs(Preferences.CATEGORY_CHANNEL_OPEN_TIME, channel.id),\r\n                );\r\n            };\r\n\r\n            let unreadCount = 0;\r\n            let visibleChannels = channels.filter((channel) => {\r\n                if (isUnreadChannel(channel.id, messageCounts, myMembers, collapsedThreads)) {\r\n                    unreadCount++;\r\n\r\n                    // Unread DMs/GMs are always visible\r\n                    return true;\r\n                }\r\n\r\n                if (channel.id === currentChannelId) {\r\n                    return true;\r\n                }\r\n\r\n                // DMs with deactivated users will be visible if you're currently viewing them and they were opened\r\n                // since the user was deactivated\r\n                if (channel.type === General.DM_CHANNEL) {\r\n                    const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n                    const teammate = profiles[teammateId];\r\n\r\n                    const lastViewedAt = getLastViewedAt(channel);\r\n\r\n                    if (!teammate || teammate.delete_at > lastViewedAt) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                return true;\r\n            });\r\n\r\n            visibleChannels.sort((channelA, channelB) => {\r\n                // Should always prioritise the current channel\r\n                if (channelA.id === currentChannelId) {\r\n                    return -1;\r\n                } else if (channelB.id === currentChannelId) {\r\n                    return 1;\r\n                }\r\n\r\n                // Second priority is for unread channels\r\n                if (isUnreadChannel(channelA.id, messageCounts, myMembers, collapsedThreads) && !isUnreadChannel(channelB.id, messageCounts, myMembers, collapsedThreads)) {\r\n                    return -1;\r\n                } else if (!isUnreadChannel(channelA.id, messageCounts, myMembers, collapsedThreads) && isUnreadChannel(channelB.id, messageCounts, myMembers, collapsedThreads)) {\r\n                    return 1;\r\n                }\r\n\r\n                // Third priority is last_viewed_at\r\n                const channelAlastViewed = getLastViewedAt(channelA) || 0;\r\n                const channelBlastViewed = getLastViewedAt(channelB) || 0;\r\n\r\n                if (channelAlastViewed > channelBlastViewed) {\r\n                    return -1;\r\n                } else if (channelBlastViewed > channelAlastViewed) {\r\n                    return 1;\r\n                }\r\n\r\n                return 0;\r\n            });\r\n\r\n            // The limit of DMs user specifies to be rendered in the sidebar\r\n            const remaining = Math.max(limitPref, unreadCount);\r\n            visibleChannels = visibleChannels.slice(0, remaining);\r\n\r\n            const visibleChannelsSet = new Set(visibleChannels);\r\n            const filteredChannels = channels.filter((channel) => visibleChannelsSet.has(channel));\r\n\r\n            return filteredChannels.length === channels.length ? channels : filteredChannels;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeFilterManuallyClosedDMs(): (state: GlobalState, channels: Channel[]) => Channel[] {\r\n    return createSelector(\r\n        'makeFilterManuallyClosedDMs',\r\n        (state: GlobalState, channels: Channel[]) => channels,\r\n        getMyPreferences,\r\n        getCurrentChannelId,\r\n        getCurrentUserId,\r\n        getMyChannelMemberships,\r\n        getChannelMessageCounts,\r\n        isCollapsedThreadsEnabled,\r\n        (channels, myPreferences, currentChannelId, currentUserId, myMembers, messageCounts, collapsedThreads) => {\r\n            const filtered = channels.filter((channel) => {\r\n                let preference;\r\n\r\n                if (channel.type !== General.DM_CHANNEL && channel.type !== General.GM_CHANNEL) {\r\n                    return true;\r\n                }\r\n\r\n                if (isUnreadChannel(channel.id, messageCounts, myMembers, collapsedThreads)) {\r\n                    // Unread DMs/GMs are always visible\r\n                    return true;\r\n                }\r\n\r\n                if (currentChannelId === channel.id) {\r\n                    // The current channel is always visible\r\n                    return true;\r\n                }\r\n\r\n                if (channel.type === General.DM_CHANNEL) {\r\n                    const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n\r\n                    preference = myPreferences[getPreferenceKey(Preferences.CATEGORY_DIRECT_CHANNEL_SHOW, teammateId)];\r\n                } else {\r\n                    preference = myPreferences[getPreferenceKey(Preferences.CATEGORY_GROUP_CHANNEL_SHOW, channel.id)];\r\n                }\r\n\r\n                return preference && preference.value !== 'false';\r\n            });\r\n\r\n            // Only return a new array if anything was removed\r\n            return filtered.length === channels.length ? channels : filtered;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeCompareChannels(getDisplayName: (channel: Channel) => string, locale: string, myMembers: RelationOneToOne<Channel, ChannelMembership>) {\r\n    return (a: Channel, b: Channel) => {\r\n        // Sort muted channels last\r\n        const aMuted = isChannelMuted(myMembers[a.id]);\r\n        const bMuted = isChannelMuted(myMembers[b.id]);\r\n\r\n        if (aMuted && !bMuted) {\r\n            return 1;\r\n        } else if (!aMuted && bMuted) {\r\n            return -1;\r\n        }\r\n\r\n        // And then sort alphabetically\r\n        return getDisplayName(a).localeCompare(getDisplayName(b), locale, {numeric: true});\r\n    };\r\n}\r\n\r\nexport function makeSortChannelsByName(): (state: GlobalState, channels: Channel[]) => Channel[] {\r\n    return createSelector(\r\n        'makeSortChannelsByName',\r\n        (state: GlobalState, channels: Channel[]) => channels,\r\n        (state: GlobalState) => getCurrentUserLocale(state),\r\n        getMyChannelMemberships,\r\n        (channels: Channel[], locale: string, myMembers: RelationOneToOne<Channel, ChannelMembership>) => {\r\n            const getDisplayName = (channel: Channel) => channel.display_name;\r\n\r\n            return [...channels].sort(makeCompareChannels(getDisplayName, locale, myMembers));\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeSortChannelsByNameWithDMs(): (state: GlobalState, channels: Channel[]) => Channel[] {\r\n    return createSelector(\r\n        'makeSortChannelsByNameWithDMs',\r\n        (state: GlobalState, channels: Channel[]) => channels,\r\n        getCurrentUserId,\r\n        (state: GlobalState) => state.entities.users.profiles,\r\n        getTeammateNameDisplaySetting,\r\n        (state: GlobalState) => getCurrentUserLocale(state),\r\n        getMyChannelMemberships,\r\n        (channels: Channel[], currentUserId: string, profiles: IDMappedObjects<UserProfile>, teammateNameDisplay: string, locale: string, myMembers: RelationOneToOne<Channel, ChannelMembership>) => {\r\n            const cachedNames: RelationOneToOne<Channel, string> = {};\r\n\r\n            const getDisplayName = (channel: Channel): string => {\r\n                if (cachedNames[channel.id]) {\r\n                    return cachedNames[channel.id];\r\n                }\r\n\r\n                let displayName;\r\n\r\n                // TODO it might be easier to do this by using channel members to find the users\r\n                if (channel.type === General.DM_CHANNEL) {\r\n                    const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n                    const teammate = profiles[teammateId];\r\n\r\n                    displayName = displayUsername(teammate, teammateNameDisplay, false);\r\n                } else if (channel.type === General.GM_CHANNEL) {\r\n                    const usernames = channel.display_name.split(', ');\r\n\r\n                    const userDisplayNames = [];\r\n                    for (const username of usernames) {\r\n                        const user = Object.values(profiles).find((profile) => profile.username === username);\r\n\r\n                        if (!user) {\r\n                            continue;\r\n                        }\r\n\r\n                        if (user.id === currentUserId) {\r\n                            continue;\r\n                        }\r\n\r\n                        userDisplayNames.push(displayUsername(user, teammateNameDisplay, false));\r\n                    }\r\n\r\n                    displayName = userDisplayNames.sort((a, b) => a.localeCompare(b, locale, {numeric: true})).join(', ');\r\n                } else {\r\n                    displayName = channel.display_name;\r\n                }\r\n\r\n                cachedNames[channel.id] = displayName;\r\n\r\n                return displayName;\r\n            };\r\n\r\n            return [...channels].sort(makeCompareChannels(getDisplayName, locale, myMembers));\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeSortChannelsByRecency(): (state: GlobalState, channels: Channel[]) => Channel[] {\r\n    return createSelector(\r\n        'makeSortChannelsByRecency',\r\n        (_state: GlobalState, channels: Channel[]) => channels,\r\n        isCollapsedThreadsEnabled,\r\n        (channels, crtEnabled) => {\r\n            return [...channels].sort((a, b) => {\r\n                const aLastPostAt = Math.max(crtEnabled ? (a.last_root_post_at || a.last_post_at) : a.last_post_at, a.create_at);\r\n                const bLastPostAt = Math.max(crtEnabled ? (b.last_root_post_at || b.last_post_at) : b.last_post_at, b.create_at);\r\n                return bLastPostAt - aLastPostAt;\r\n            });\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeSortChannels() {\r\n    const sortChannelsByName = makeSortChannelsByName();\r\n    const sortChannelsByNameWithDMs = makeSortChannelsByNameWithDMs();\r\n    const sortChannelsByRecency = makeSortChannelsByRecency();\r\n\r\n    return (state: GlobalState, originalChannels: Channel[], category: ChannelCategory) => {\r\n        let channels = originalChannels;\r\n\r\n        // While this function isn't memoized, sortChannelsByX should be since they know what parts of state\r\n        // will affect sort order.\r\n\r\n        if (category.sorting === CategorySorting.Recency) {\r\n            channels = sortChannelsByRecency(state, channels);\r\n        } else if (category.sorting === CategorySorting.Alphabetical || category.sorting === CategorySorting.Default) {\r\n            if (channels.some((channel) => channel.type === General.DM_CHANNEL || channel.type === General.GM_CHANNEL)) {\r\n                channels = sortChannelsByNameWithDMs(state, channels);\r\n            } else {\r\n                channels = sortChannelsByName(state, channels);\r\n            }\r\n        }\r\n\r\n        return channels;\r\n    };\r\n}\r\n\r\nexport function makeGetChannelIdsForCategory() {\r\n    const getChannels = makeGetChannelsForIds();\r\n    const filterAndSortChannelsForCategory = makeFilterAndSortChannelsForCategory();\r\n\r\n    let lastChannelIds: string[] = [];\r\n\r\n    return (state: GlobalState, category: ChannelCategory) => {\r\n        const channels = getChannels(state, category.channel_ids);\r\n\r\n        const filteredChannelIds = filterAndSortChannelsForCategory(state, channels, category).map((channel) => channel.id);\r\n\r\n        if (shallowEquals(filteredChannelIds, lastChannelIds)) {\r\n            return lastChannelIds;\r\n        }\r\n\r\n        lastChannelIds = filteredChannelIds;\r\n        return lastChannelIds;\r\n    };\r\n}\r\n\r\n// Returns a selector that takes an array of channels and the category they belong to and returns the array sorted and\r\n// with inactive DMs/GMs and archived channels filtered out.\r\nexport function makeFilterAndSortChannelsForCategory() {\r\n    const filterArchivedChannels = makeFilterArchivedChannels();\r\n    const filterAutoclosedDMs = makeFilterAutoclosedDMs();\r\n\r\n    const filterManuallyClosedDMs = makeFilterManuallyClosedDMs();\r\n\r\n    const sortChannels = makeSortChannels();\r\n\r\n    return (state: GlobalState, originalChannels: Channel[], category: ChannelCategory) => {\r\n        let channels = originalChannels;\r\n\r\n        channels = filterArchivedChannels(state, channels);\r\n        channels = filterManuallyClosedDMs(state, channels);\r\n\r\n        channels = filterAutoclosedDMs(state, channels, category.type);\r\n\r\n        channels = sortChannels(state, channels, category);\r\n\r\n        return channels;\r\n    };\r\n}\r\n\r\nexport function makeGetChannelsByCategory() {\r\n    const getCategoriesForTeam = makeGetCategoriesForTeam();\r\n\r\n    // Memoize by category. As long as the categories don't change, we can keep using the same selectors for each category.\r\n    let getChannels: RelationOneToOne<ChannelCategory, ReturnType<typeof makeGetChannelsForIds>>;\r\n    let filterAndSortChannels: RelationOneToOne<ChannelCategory, ReturnType<typeof makeFilterAndSortChannelsForCategory>>;\r\n\r\n    let lastCategoryIds: ReturnType<typeof getCategoryIdsForTeam> = [];\r\n    let lastChannelsByCategory: RelationOneToOne<ChannelCategory, Channel[]> = {};\r\n\r\n    return (state: GlobalState, teamId: string) => {\r\n        const categoryIds = getCategoryIdsForTeam(state, teamId);\r\n\r\n        // Create an instance of filterAndSortChannels for each category. As long as we don't add or remove new categories,\r\n        // we can reuse these selectors to memoize the results of each category. This will also create new selectors when\r\n        // categories are reordered, but that should be rare enough that it won't meaningfully affect performance.\r\n        if (categoryIds !== lastCategoryIds) {\r\n            lastCategoryIds = categoryIds;\r\n            lastChannelsByCategory = {};\r\n\r\n            getChannels = {};\r\n            filterAndSortChannels = {};\r\n\r\n            if (categoryIds) {\r\n                for (const categoryId of categoryIds) {\r\n                    getChannels[categoryId] = makeGetChannelsForIds();\r\n                    filterAndSortChannels[categoryId] = makeFilterAndSortChannelsForCategory();\r\n                }\r\n            }\r\n        }\r\n\r\n        const categories = getCategoriesForTeam(state, teamId);\r\n\r\n        const channelsByCategory: RelationOneToOne<ChannelCategory, Channel[]> = {};\r\n\r\n        // TODO: This avoids some rendering, but there is a bigger issue underneath\r\n        // Every time myPreferences or myChannels change (which can happen for many\r\n        // unrelated reasons) the whole list of channels gets reordered and re-filtered.\r\n        let allEquals = categoryIds === lastCategoryIds;\r\n        for (const category of categories) {\r\n            const channels = getChannels[category.id](state, category.channel_ids);\r\n            channelsByCategory[category.id] = filterAndSortChannels[category.id](state, channels, category);\r\n            allEquals = allEquals && shallowEquals(channelsByCategory[category.id], lastChannelsByCategory[category.id]);\r\n        }\r\n\r\n        // Do a shallow equality check of channelsByCategory to avoid returning a new object containing the same data\r\n        if (allEquals) {\r\n            return lastChannelsByCategory;\r\n        }\r\n\r\n        lastChannelsByCategory = channelsByCategory;\r\n        return channelsByCategory;\r\n    };\r\n}\r\n\r\nfunction isUnreadChannel(\r\n    channelId: string,\r\n    messageCounts: RelationOneToOne<Channel, ChannelMessageCount>,\r\n    members: RelationOneToOne<Channel, ChannelMembership>,\r\n    crtEnabled: boolean,\r\n): boolean {\r\n    const unreadCount = calculateUnreadCount(messageCounts[channelId], members[channelId], crtEnabled);\r\n    return unreadCount.showUnread;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport max from 'lodash/max';\r\n\r\nimport type {\r\n    Channel,\r\n    ChannelBanner,\r\n    ChannelMemberCountsByGroup,\r\n    ChannelMembership,\r\n    ChannelMessageCount,\r\n    ChannelModeration,\r\n    ChannelSearchOpts,\r\n    ChannelStats,\r\n} from '@mattermost/types/channels';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {UserProfile, UsersState} from '@mattermost/types/users';\r\nimport type {\r\n    IDMappedObjects,\r\n    RelationOneToManyUnique,\r\n    RelationOneToOne,\r\n} from '@mattermost/types/utilities';\r\n\r\nimport {General, Permissions, Preferences} from 'mattermost-redux/constants';\r\nimport {CategoryTypes} from 'mattermost-redux/constants/channel_categories';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getDataRetentionCustomPolicy} from 'mattermost-redux/selectors/entities/admin';\r\nimport {getCategoryInTeamByType} from 'mattermost-redux/selectors/entities/channel_categories';\r\nimport {\r\n    getCurrentChannelId as getCurrentChannelIdInternal,\r\n    getCurrentUser,\r\n    getMyChannelMemberships as getMyChannelMembershipsInternal,\r\n    getMyCurrentChannelMembership as getMyCurrentChannelMembershipInternal,\r\n    getUsers,\r\n} from 'mattermost-redux/selectors/entities/common';\r\nimport {\r\n    getTeammateNameDisplaySetting,\r\n    isCollapsedThreadsEnabled,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {\r\n    haveIChannelPermission,\r\n    haveICurrentChannelPermission,\r\n    haveITeamPermission,\r\n} from 'mattermost-redux/selectors/entities/roles';\r\nimport {getCurrentTeamId, getMyTeams} from 'mattermost-redux/selectors/entities/teams';\r\nimport {\r\n    getCurrentUserId,\r\n    getStatusForUserId,\r\n    getUser,\r\n    getUserIdsInChannels,\r\n    isCurrentUserSystemAdmin,\r\n} from 'mattermost-redux/selectors/entities/users';\r\nimport {\r\n    calculateUnreadCount,\r\n    completeDirectChannelDisplayName,\r\n    completeDirectChannelInfo,\r\n    completeDirectGroupInfo,\r\n    filterChannelsMatchingTerm,\r\n    getChannelByName as getChannelByNameHelper,\r\n    getUserIdFromChannelName,\r\n    isChannelMuted,\r\n    isDefault,\r\n    isDirectChannel,\r\n    newCompleteDirectChannelInfo,\r\n    sortChannelsByDisplayName,\r\n} from 'mattermost-redux/utils/channel_utils';\r\nimport {createIdsSelector} from 'mattermost-redux/utils/helpers';\r\n\r\nimport {isPostPriorityEnabled} from './posts';\r\nimport {getThreadCounts, getThreadCountsIncludingDirect} from './threads';\r\n\r\n// Re-define these types to ensure that these are typed correctly when mattermost-redux is published\r\nexport const getCurrentChannelId: (state: GlobalState) => string = getCurrentChannelIdInternal;\r\nexport const getMyChannelMemberships: (state: GlobalState) => RelationOneToOne<Channel, ChannelMembership> = getMyChannelMembershipsInternal;\r\nexport const getMyCurrentChannelMembership: (state: GlobalState) => ChannelMembership | undefined = getMyCurrentChannelMembershipInternal;\r\n\r\nexport function getAllChannels(state: GlobalState): IDMappedObjects<Channel> {\r\n    return state.entities.channels.channels;\r\n}\r\n\r\nexport const getAllDmChannels = createSelector(\r\n    'getAllDmChannels',\r\n    getAllChannels,\r\n    (allChannels) => {\r\n        let allDmChannels: Record<string, Channel> = {};\r\n\r\n        Object.values(allChannels).forEach((channel: Channel) => {\r\n            if (channel.type === General.DM_CHANNEL) {\r\n                allDmChannels = {...allDmChannels, [channel.name]: channel};\r\n            }\r\n        });\r\n\r\n        return allDmChannels;\r\n    },\r\n);\r\n\r\nexport function getAllChannelStats(state: GlobalState): RelationOneToOne<Channel, ChannelStats> {\r\n    return state.entities.channels.stats;\r\n}\r\n\r\nexport function getChannelsMemberCount(state: GlobalState): Record<string, number> {\r\n    return state.entities.channels.channelsMemberCount;\r\n}\r\n\r\nexport function getChannelsInTeam(state: GlobalState): RelationOneToManyUnique<Team, Channel> {\r\n    return state.entities.channels.channelsInTeam;\r\n}\r\n\r\nexport function getChannelsInPolicy() {\r\n    return (createSelector(\r\n        'getChannelsInPolicy',\r\n        getAllChannels,\r\n        (state: GlobalState, props: {policyId: string}) => getDataRetentionCustomPolicy(state, props.policyId),\r\n        (getAllChannels, policy) => {\r\n            if (!policy) {\r\n                return [];\r\n            }\r\n\r\n            const policyChannels: Channel[] = [];\r\n\r\n            Object.entries(getAllChannels).forEach((channelEntry: [string, Channel]) => {\r\n                const [, channel] = channelEntry;\r\n                if (channel.policy_id === policy.id) {\r\n                    policyChannels.push(channel);\r\n                }\r\n            });\r\n\r\n            return policyChannels;\r\n        }) as (b: GlobalState, a: {\r\n        policyId: string;\r\n    }) => Channel[]);\r\n}\r\n\r\nexport const getDirectChannelsSet: (state: GlobalState) => Set<string> = createSelector(\r\n    'getDirectChannelsSet',\r\n    getChannelsInTeam,\r\n    (channelsInTeam: RelationOneToManyUnique<Team, Channel>): Set<string> => {\r\n        if (!channelsInTeam) {\r\n            return new Set();\r\n        }\r\n\r\n        return new Set(channelsInTeam['']);\r\n    },\r\n);\r\n\r\nexport function getChannelMembersInChannels(state: GlobalState): RelationOneToOne<Channel, Record<string, ChannelMembership>> {\r\n    return state.entities.channels.membersInChannel;\r\n}\r\n\r\nexport function getChannelMember(state: GlobalState, channelId: string, userId: string): ChannelMembership | undefined {\r\n    return getChannelMembersInChannels(state)[channelId]?.[userId];\r\n}\r\n\r\ntype OldMakeChannelArgument = {id: string};\r\n\r\n// makeGetChannel returns a selector that returns a channel from the store with the following filled in for DM/GM channels:\r\n// - The display_name set to the other user(s) names, following the Teammate Name Display setting\r\n// - The teammate_id for DM channels\r\n// - The status of the other user in a DM channel\r\nexport function makeGetChannel(): (state: GlobalState, id: string) => Channel | undefined {\r\n    return createSelector(\r\n        'makeGetChannel',\r\n        getCurrentUserId,\r\n        (state: GlobalState) => state.entities.users.profiles,\r\n        (state: GlobalState) => state.entities.users.profilesInChannel,\r\n        (state: GlobalState, channelId: string | OldMakeChannelArgument) => {\r\n            const id = typeof channelId === 'string' ? channelId : channelId.id;\r\n            const channel = getChannel(state, id);\r\n            if (!channel || !isDirectChannel(channel)) {\r\n                return '';\r\n            }\r\n\r\n            const currentUserId = getCurrentUserId(state);\r\n            const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n            const teammateStatus = getStatusForUserId(state, teammateId);\r\n\r\n            return teammateStatus || 'offline';\r\n        },\r\n        (state: GlobalState, channelId: string | OldMakeChannelArgument) => {\r\n            const id = typeof channelId === 'string' ? channelId : channelId.id;\r\n            return getChannel(state, id);\r\n        },\r\n        getTeammateNameDisplaySetting,\r\n        (currentUserId, profiles, profilesInChannel, teammateStatus, channel, teammateNameDisplay) => {\r\n            if (channel) {\r\n                return newCompleteDirectChannelInfo(currentUserId, profiles, profilesInChannel, teammateStatus, teammateNameDisplay!, channel);\r\n            }\r\n\r\n            return channel;\r\n        },\r\n    );\r\n}\r\n\r\n// getChannel returns a channel as it exists in the store without filling in any additional details such as the\r\n// display_name for DM/GM channels.\r\nexport function getChannel(state: GlobalState, id: string): Channel | undefined {\r\n    return getAllChannels(state)[id];\r\n}\r\n\r\n// getDirectChannel returns a direct channel channel as it exists in the store filling in any additional details such as the\r\n// display_name or teammate_id.\r\nexport function getDirectChannel(state: GlobalState, id: string): Channel | undefined {\r\n    const channel = getAllChannels(state)[id];\r\n    if (channel && channel.type === 'D') {\r\n        return completeDirectChannelInfo(state.entities.users, getTeammateNameDisplaySetting(state), channel);\r\n    }\r\n    return undefined;\r\n}\r\n\r\nexport function getMyChannelMembership(state: GlobalState, channelId: string): ChannelMembership | undefined {\r\n    return getMyChannelMemberships(state)[channelId];\r\n}\r\n\r\n// makeGetChannelsForIds returns a selector that, given an array of channel IDs, returns a list of the corresponding\r\n// channels. Channels are returned in the same order as the given IDs with undefined entries replacing any invalid IDs.\r\n// Note that memoization will fail if an array literal is passed in.\r\nexport function makeGetChannelsForIds(): (state: GlobalState, ids: string[]) => Channel[] {\r\n    return createSelector(\r\n        'makeGetChannelsForIds',\r\n        getAllChannels,\r\n        (state: GlobalState, ids: string[]) => ids,\r\n        (allChannels, ids) => {\r\n            return ids.map((id) => allChannels[id]);\r\n        },\r\n    );\r\n}\r\n\r\nexport const getCurrentChannel: (state: GlobalState) => Channel | undefined = createSelector(\r\n    'getCurrentChannel',\r\n    getAllChannels,\r\n    getCurrentChannelId,\r\n    (state: GlobalState) => state.entities.users,\r\n    getTeammateNameDisplaySetting,\r\n    (allChannels, currentChannelId, users, teammateNameDisplay): Channel => {\r\n        const channel = allChannels[currentChannelId];\r\n\r\n        if (channel) {\r\n            return completeDirectChannelInfo(users, teammateNameDisplay, channel);\r\n        }\r\n\r\n        return channel;\r\n    },\r\n);\r\n\r\nconst getChannelNameForSearch = (channel: Channel | undefined, users: UsersState): string | undefined => {\r\n    if (!channel) {\r\n        return undefined;\r\n    }\r\n\r\n    // Only get the extra info from users if we need it\r\n    if (channel.type === General.DM_CHANNEL) {\r\n        const dmChannelWithInfo = completeDirectChannelInfo(users, Preferences.DISPLAY_PREFER_USERNAME, channel);\r\n        return `@${dmChannelWithInfo.display_name}`;\r\n    }\r\n\r\n    // Replace spaces in GM channel names\r\n    if (channel.type === General.GM_CHANNEL) {\r\n        const gmChannelWithInfo = completeDirectGroupInfo(users, Preferences.DISPLAY_PREFER_USERNAME, channel, false);\r\n        return `@${gmChannelWithInfo.display_name.replace(/\\s/g, '')}`;\r\n    }\r\n\r\n    return channel.name;\r\n};\r\n\r\nexport const getCurrentChannelNameForSearchShortcut: (state: GlobalState) => string | undefined = createSelector(\r\n    'getCurrentChannelNameForSearchShortcut',\r\n    getAllChannels,\r\n    getCurrentChannelId,\r\n    (state: GlobalState): UsersState => state.entities.users,\r\n    (allChannels: IDMappedObjects<Channel>, currentChannelId: string, users: UsersState): string | undefined => {\r\n        const channel = allChannels[currentChannelId];\r\n        return getChannelNameForSearch(channel, users);\r\n    },\r\n);\r\n\r\nexport const getChannelNameForSearchShortcut: (state: GlobalState, channelId: string) => string | undefined = createSelector(\r\n    'getChannelNameForSearchShortcut',\r\n    getAllChannels,\r\n    (state: GlobalState): UsersState => state.entities.users,\r\n    (state: GlobalState, channelId: string): string => channelId,\r\n    (allChannels: IDMappedObjects<Channel>, users: UsersState, channelId: string): string | undefined => {\r\n        const channel = allChannels[channelId];\r\n        return getChannelNameForSearch(channel, users);\r\n    },\r\n);\r\n\r\nexport const getMyChannelMember: (state: GlobalState, channelId: string) => ChannelMembership | undefined = createSelector(\r\n    'getMyChannelMember',\r\n    getMyChannelMemberships,\r\n    (state: GlobalState, channelId: string): string => channelId,\r\n    (channelMemberships: RelationOneToOne<Channel, ChannelMembership>, channelId: string): ChannelMembership | undefined => {\r\n        return channelMemberships[channelId];\r\n    },\r\n);\r\n\r\nexport const getCurrentChannelStats: (state: GlobalState) => ChannelStats | undefined = createSelector(\r\n    'getCurrentChannelStats',\r\n    getAllChannelStats,\r\n    getCurrentChannelId,\r\n    (allChannelStats: RelationOneToOne<Channel, ChannelStats>, currentChannelId: string): ChannelStats => {\r\n        return allChannelStats[currentChannelId];\r\n    },\r\n);\r\n\r\nexport function isCurrentChannelFavorite(state: GlobalState): boolean {\r\n    const currentChannelId = getCurrentChannelId(state);\r\n    return isFavoriteChannel(state, currentChannelId);\r\n}\r\n\r\nexport const isCurrentChannelMuted: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentChannelMuted',\r\n    getMyCurrentChannelMembership,\r\n    (membership?: ChannelMembership): boolean => {\r\n        if (!membership) {\r\n            return false;\r\n        }\r\n\r\n        return isChannelMuted(membership);\r\n    },\r\n);\r\n\r\nexport const isMutedChannel: (state: GlobalState, channelId: string) => boolean = createSelector(\r\n    'isMutedChannel',\r\n    (state: GlobalState, channelId: string) => getMyChannelMembership(state, channelId),\r\n    (membership?: ChannelMembership): boolean => {\r\n        if (!membership) {\r\n            return false;\r\n        }\r\n\r\n        return isChannelMuted(membership);\r\n    },\r\n);\r\n\r\nexport const isCurrentChannelArchived: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentChannelArchived',\r\n    getCurrentChannel,\r\n    (channel) => channel?.delete_at !== 0,\r\n);\r\n\r\nexport const isCurrentChannelDefault: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentChannelDefault',\r\n    getCurrentChannel,\r\n    (channel) => isDefault(channel),\r\n);\r\n\r\nexport function isCurrentChannelReadOnly(state: GlobalState): boolean {\r\n    return isChannelReadOnly(state, getCurrentChannel(state));\r\n}\r\n\r\nexport function isChannelReadOnlyById(state: GlobalState, channelId: string): boolean {\r\n    return isChannelReadOnly(state, getChannel(state, channelId));\r\n}\r\n\r\nexport function isChannelReadOnly(state: GlobalState, channel?: Channel): boolean {\r\n    return Boolean(channel && channel.name === General.DEFAULT_CHANNEL && !isCurrentUserSystemAdmin(state));\r\n}\r\n\r\nexport function getChannelMessageCounts(state: GlobalState): RelationOneToOne<Channel, ChannelMessageCount> {\r\n    return state.entities.channels.messageCounts;\r\n}\r\n\r\nexport function getChannelMessageCount(state: GlobalState, channelId: string): ChannelMessageCount | undefined {\r\n    return getChannelMessageCounts(state)[channelId];\r\n}\r\n\r\nfunction getCurrentChannelMessageCount(state: GlobalState) {\r\n    return getChannelMessageCount(state, getCurrentChannelId(state));\r\n}\r\n\r\nexport const countCurrentChannelUnreadMessages: (state: GlobalState) => number = createSelector(\r\n    'countCurrentChannelUnreadMessages',\r\n    getCurrentChannelMessageCount,\r\n    getMyCurrentChannelMembership,\r\n    isCollapsedThreadsEnabled,\r\n    (messageCount?: ChannelMessageCount, membership?: ChannelMembership, crtEnabled?: boolean): number => {\r\n        if (!membership || !messageCount) {\r\n            return 0;\r\n        }\r\n        return crtEnabled ? messageCount.root - membership.msg_count_root : messageCount.total - membership.msg_count;\r\n    },\r\n);\r\n\r\nexport function makeGetChannelUnreadCount(): (state: GlobalState, channelId: string) => ReturnType<typeof calculateUnreadCount> {\r\n    return createSelector(\r\n        'makeGetChannelUnreadCount',\r\n        (state: GlobalState, channelId: string) => getChannelMessageCount(state, channelId),\r\n        (state: GlobalState, channelId: string) => getMyChannelMembership(state, channelId),\r\n        isCollapsedThreadsEnabled,\r\n        (messageCount: ChannelMessageCount | undefined, member: ChannelMembership | undefined, crtEnabled) =>\r\n            calculateUnreadCount(messageCount, member, crtEnabled),\r\n    );\r\n}\r\n\r\nexport function getChannelByName(state: GlobalState, channelName: string): Channel | undefined {\r\n    return getChannelByNameHelper(getAllChannels(state), channelName);\r\n}\r\n\r\nexport function getChannelByTeamIdAndChannelName(state: GlobalState, teamId: string, channelName: string): Channel | undefined | null {\r\n    return Object.values(getAllChannels(state)).find((channel) =>\r\n        channel.team_id === teamId && channel.name === channelName,\r\n    );\r\n}\r\n\r\nexport const getChannelSetInCurrentTeam: (state: GlobalState) => Set<string> = createSelector(\r\n    'getChannelSetInCurrentTeam',\r\n    getCurrentTeamId,\r\n    getChannelsInTeam,\r\n    (currentTeamId: string, channelsInTeam: RelationOneToManyUnique<Team, Channel>) => {\r\n        return (channelsInTeam && channelsInTeam[currentTeamId]) || new Set();\r\n    },\r\n);\r\n\r\nexport const getChannelSetForAllTeams: (state: GlobalState) => string[] = createSelector(\r\n    'getChannelSetForAllTeams',\r\n    getAllChannels,\r\n    (allChannels): string[] => {\r\n        const channelSet: string[] = [];\r\n        Object.values(allChannels).forEach((channel: Channel) => {\r\n            if (channel.type !== General.GM_CHANNEL && channel.type !== General.DM_CHANNEL) {\r\n                channelSet.push(channel.id);\r\n            }\r\n        });\r\n        return channelSet;\r\n    },\r\n);\r\n\r\nfunction sortAndInjectChannels(channels: IDMappedObjects<Channel>, channelSet: string[] | Set<string>, locale: string): Channel[] {\r\n    const currentChannels: Channel[] = [];\r\n\r\n    if (typeof channelSet === 'undefined') {\r\n        return currentChannels;\r\n    }\r\n\r\n    channelSet.forEach((c) => {\r\n        currentChannels.push(channels[c]);\r\n    });\r\n\r\n    return currentChannels.sort(sortChannelsByDisplayName.bind(null, locale));\r\n}\r\n\r\nexport const getChannelsInCurrentTeam: (state: GlobalState) => Channel[] = createSelector(\r\n    'getChannelsInCurrentTeam',\r\n    getAllChannels,\r\n    getChannelSetInCurrentTeam,\r\n    getCurrentUser,\r\n    (channels: IDMappedObjects<Channel>, currentTeamChannelSet: Set<string>, currentUser: UserProfile): Channel[] => {\r\n        let locale = General.DEFAULT_LOCALE;\r\n\r\n        if (currentUser && currentUser.locale) {\r\n            locale = currentUser.locale;\r\n        }\r\n\r\n        return sortAndInjectChannels(channels, currentTeamChannelSet, locale);\r\n    },\r\n);\r\n\r\nexport const getChannelsInAllTeams: (state: GlobalState) => Channel[] = createSelector(\r\n    'getChannelsInAllTeams',\r\n    getAllChannels,\r\n    getChannelSetForAllTeams,\r\n    getCurrentUser,\r\n    (channels: IDMappedObjects<Channel>, getChannelSetForAllTeams: string[], currentUser: UserProfile): Channel[] => {\r\n        const locale = currentUser?.locale || General.DEFAULT_LOCALE;\r\n        return sortAndInjectChannels(channels, getChannelSetForAllTeams, locale);\r\n    },\r\n);\r\n\r\nexport const getChannelsNameMapInTeam: (state: GlobalState, teamId: string) => Record<string, Channel> = createSelector(\r\n    'getChannelsNameMapInTeam',\r\n    getAllChannels,\r\n    getChannelsInTeam,\r\n    (state: GlobalState, teamId: string): string => teamId,\r\n    (channels: IDMappedObjects<Channel>, channelsInTeams: RelationOneToManyUnique<Team, Channel>, teamId: string): Record<string, Channel> => {\r\n        const channelsInTeam = channelsInTeams[teamId] || new Set();\r\n        const channelMap: Record<string, Channel> = {};\r\n        channelsInTeam.forEach((id) => {\r\n            const channel = channels[id];\r\n            channelMap[channel.name] = channel;\r\n        });\r\n        return channelMap;\r\n    },\r\n);\r\n\r\nexport const getChannelsNameMapInCurrentTeam: (state: GlobalState) => Record<string, Channel> = createSelector(\r\n    'getChannelsNameMapInCurrentTeam',\r\n    getAllChannels,\r\n    getChannelSetInCurrentTeam,\r\n    (channels: IDMappedObjects<Channel>, currentTeamChannelSet: Set<string>): Record<string, Channel> => {\r\n        const channelMap: Record<string, Channel> = {};\r\n        currentTeamChannelSet.forEach((id) => {\r\n            const channel = channels[id];\r\n            channelMap[channel.name] = channel;\r\n        });\r\n        return channelMap;\r\n    },\r\n);\r\n\r\nexport const getChannelNameToDisplayNameMap: (state: GlobalState) => Record<string, string> = createIdsSelector(\r\n    'getChannelNameToDisplayNameMap',\r\n    getAllChannels,\r\n    getChannelSetInCurrentTeam,\r\n    (channels: IDMappedObjects<Channel>, currentTeamChannelSet: Set<string>) => {\r\n        const channelMap: Record<string, string> = {};\r\n        for (const id of currentTeamChannelSet) {\r\n            const channel = channels[id];\r\n            channelMap[channel.name] = channel.display_name;\r\n        }\r\n        return channelMap;\r\n    },\r\n);\r\n\r\n// Returns both DMs and GMs\r\nexport const getAllDirectChannels: (state: GlobalState) => Channel[] = createSelector(\r\n    'getAllDirectChannels',\r\n    getAllChannels,\r\n    getDirectChannelsSet,\r\n    (state: GlobalState): UsersState => state.entities.users,\r\n    getTeammateNameDisplaySetting,\r\n    (channels: IDMappedObjects<Channel>, channelSet: Set<string>, users: UsersState, teammateNameDisplay: string): Channel[] => {\r\n        const dmChannels: Channel[] = [];\r\n        channelSet.forEach((c) => {\r\n            dmChannels.push(completeDirectChannelInfo(users, teammateNameDisplay, channels[c]));\r\n        });\r\n        return dmChannels;\r\n    },\r\n);\r\n\r\nexport const getAllDirectChannelsNameMapInCurrentTeam: (state: GlobalState) => Record<string, Channel> = createSelector(\r\n    'getAllDirectChannelsNameMapInCurrentTeam',\r\n    getAllChannels,\r\n    getDirectChannelsSet,\r\n    (state: GlobalState): UsersState => state.entities.users,\r\n    getTeammateNameDisplaySetting,\r\n    (channels: IDMappedObjects<Channel>, channelSet: Set<string>, users: UsersState, teammateNameDisplay: string): Record<string, Channel> => {\r\n        const channelMap: Record<string, Channel> = {};\r\n        channelSet.forEach((id) => {\r\n            const channel = channels[id];\r\n            channelMap[channel.name] = completeDirectChannelInfo(users, teammateNameDisplay, channel);\r\n        });\r\n        return channelMap;\r\n    },\r\n);\r\n\r\n// Returns only GMs\r\nexport const getGroupChannels: (state: GlobalState) => Channel[] = createSelector(\r\n    'getGroupChannels',\r\n    getAllChannels,\r\n    getDirectChannelsSet,\r\n    (state: GlobalState): UsersState => state.entities.users,\r\n    getTeammateNameDisplaySetting,\r\n    (channels: IDMappedObjects<Channel>, channelSet: Set<string>, users: UsersState, teammateNameDisplay: string): Channel[] => {\r\n        const gmChannels: Channel[] = [];\r\n        channelSet.forEach((id) => {\r\n            const channel = channels[id];\r\n\r\n            if (channel.type === General.GM_CHANNEL) {\r\n                gmChannels.push(completeDirectChannelInfo(users, teammateNameDisplay, channel));\r\n            }\r\n        });\r\n        return gmChannels;\r\n    },\r\n);\r\n\r\nexport const getMyChannels: (state: GlobalState) => Channel[] = createSelector(\r\n    'getMyChannels',\r\n    getChannelsInCurrentTeam,\r\n    getAllDirectChannels,\r\n    getMyChannelMemberships,\r\n    (channels: Channel[], directChannels: Channel[], myMembers: RelationOneToOne<Channel, ChannelMembership>): Channel[] => {\r\n        return [...channels, ...directChannels].filter((c) => Object.hasOwn(myMembers, c.id));\r\n    },\r\n);\r\n\r\nexport const getOtherChannels: (state: GlobalState, archived?: boolean | null) => Channel[] = createSelector(\r\n    'getOtherChannels',\r\n    getChannelsInCurrentTeam,\r\n    getMyChannelMemberships,\r\n    (state: GlobalState, archived: boolean | undefined | null = true) => archived,\r\n    (channels: Channel[], myMembers: RelationOneToOne<Channel, ChannelMembership>, archived?: boolean | null): Channel[] => {\r\n        return channels.filter((c) => !Object.hasOwn(myMembers, c.id) && c.type === General.OPEN_CHANNEL && (archived ? true : c.delete_at === 0));\r\n    },\r\n);\r\n\r\nexport const getMembersInCurrentChannel: (state: GlobalState) => Record<string, ChannelMembership> = createSelector(\r\n    'getMembersInCurrentChannel',\r\n    getCurrentChannelId,\r\n    getChannelMembersInChannels,\r\n    (currentChannelId: string, members: RelationOneToOne<Channel, Record<string, ChannelMembership>>): Record<string, ChannelMembership> => {\r\n        return members[currentChannelId];\r\n    },\r\n);\r\n\r\n/**\r\n * A scalar encoding or primitive-value representation of\r\n */\r\nexport type BasicUnreadStatus = boolean | number;\r\nexport type BasicUnreadMeta = {isUnread: boolean; unreadMentionCount: number}\r\n\r\nexport function basicUnreadMeta(unreadStatus: BasicUnreadStatus): BasicUnreadMeta {\r\n    return {\r\n        isUnread: Boolean(unreadStatus),\r\n        unreadMentionCount: (typeof unreadStatus === 'number' && unreadStatus) || 0,\r\n    };\r\n}\r\n\r\n// muted channel will not be counted towards unreads\r\nexport const getUnreadStatus: (state: GlobalState) => BasicUnreadStatus = createSelector(\r\n    'getUnreadStatus',\r\n    getAllChannels,\r\n    getMyChannelMemberships,\r\n    getChannelMessageCounts,\r\n    getUsers,\r\n    getCurrentUserId,\r\n    getCurrentTeamId,\r\n    isCollapsedThreadsEnabled,\r\n    getThreadCounts,\r\n    getThreadCountsIncludingDirect,\r\n    (\r\n        channels,\r\n        myMembers,\r\n        messageCounts,\r\n        users,\r\n        currentUserId,\r\n        currentTeamId,\r\n        collapsedThreads,\r\n        threadCounts,\r\n        threadCountsIncludingDirect,\r\n    ) => {\r\n        const {\r\n            messages: unreadMessages,\r\n            mentions: unreadMentions,\r\n        } = Object.entries(myMembers).reduce((counts, [channelId, membership]) => {\r\n            const channel = channels[channelId];\r\n\r\n            if (!channel || !membership) {\r\n                return counts;\r\n            }\r\n\r\n            const channelExists = channel.type === General.DM_CHANNEL ? users[getUserIdFromChannelName(currentUserId, channel.name)]?.delete_at === 0 : channel.delete_at === 0;\r\n            if (!channelExists) {\r\n                return counts;\r\n            }\r\n\r\n            if (isChannelMuted(membership)) {\r\n                return counts;\r\n            }\r\n\r\n            const mentions = collapsedThreads ? membership.mention_count_root : membership.mention_count;\r\n            if (mentions) {\r\n                counts.mentions += mentions;\r\n            }\r\n\r\n            const unreadCount = calculateUnreadCount(messageCounts[channelId], myMembers[channelId], collapsedThreads);\r\n            if (unreadCount.showUnread) {\r\n                counts.messages += unreadCount.messages;\r\n            }\r\n\r\n            return counts;\r\n        }, {\r\n            messages: 0,\r\n            mentions: 0,\r\n        });\r\n\r\n        const totalUnreadMessages = unreadMessages;\r\n        let totalUnreadMentions = unreadMentions;\r\n        let anyUnreadThreads = false;\r\n\r\n        // when collapsed threads are enabled, we start with root-post counts from channels, then\r\n        // add the same thread-reply counts from the global threads view\r\n        if (collapsedThreads) {\r\n            Object.keys(threadCounts).forEach((teamId) => {\r\n                const c = threadCounts[teamId];\r\n                if (teamId === currentTeamId) {\r\n                    const currentTeamDirectCounts = threadCountsIncludingDirect[currentTeamId] || 0;\r\n                    anyUnreadThreads = Boolean(currentTeamDirectCounts.total_unread_threads);\r\n                    totalUnreadMentions += currentTeamDirectCounts.total_unread_mentions;\r\n                } else {\r\n                    anyUnreadThreads = anyUnreadThreads || Boolean(c.total_unread_threads);\r\n                    totalUnreadMentions += c.total_unread_mentions;\r\n                }\r\n            });\r\n        }\r\n\r\n        return totalUnreadMentions || anyUnreadThreads || Boolean(totalUnreadMessages);\r\n    },\r\n);\r\n\r\n/**\r\n * Return a tuple of\r\n * - Set of team IDs that have unread messages\r\n * - Map with team IDs as keys and unread mentions counts as values\r\n */\r\nexport const getTeamsUnreadStatuses: (state: GlobalState) => [Set<Team['id']>, Map<Team['id'], number>, Map<Team['id'], boolean>] = createSelector(\r\n    'getTeamsUnreadStatuses',\r\n    getAllChannels,\r\n    getMyChannelMemberships,\r\n    getChannelMessageCounts,\r\n    isCollapsedThreadsEnabled,\r\n    getThreadCounts,\r\n    (\r\n        channels,\r\n        channelMemberships,\r\n        channelMessageCounts,\r\n        collapsedThreadsEnabled,\r\n        teamThreadCounts,\r\n    ) => {\r\n        const teamUnreadsSet = new Set<Team['id']>();\r\n        const teamMentionsMap = new Map<Team['id'], number>();\r\n        const teamHasUrgentMap = new Map<Team['id'], boolean>();\r\n\r\n        for (const [channelId, channelMembership] of Object.entries(channelMemberships)) {\r\n            const channel = channels[channelId];\r\n\r\n            if (!channel || !channelMembership) {\r\n                continue;\r\n            }\r\n\r\n            // if channel is muted, we skip its count\r\n            if (isChannelMuted(channelMembership)) {\r\n                continue;\r\n            }\r\n\r\n            // We skip DMs and GMs in counting since they are accesible through Direct messages across teams\r\n            if (channel.type === General.DM_CHANNEL || channel.type === General.GM_CHANNEL) {\r\n                continue;\r\n            }\r\n\r\n            // If other user is deleted in a DM channel, we skip its count\r\n            // TODO: This is a check overlap with the above condition, so it can never execute.\r\n            // Evaluate if it some logic should be changed or if this branch should be removed.\r\n            // if (channel.type === General.DM_CHANNEL) {\r\n            //     const otherUserId = getUserIdFromChannelName(currentUserId, channel.name);\r\n            //     if (users[otherUserId]?.delete_at !== 0) {\r\n            //         continue;\r\n            //     }\r\n            // }\r\n\r\n            // If channel is deleted, we skip its count\r\n            if (channel.delete_at !== 0) {\r\n                continue;\r\n            }\r\n\r\n            // Add read/unread from channel membership\r\n            const unreadCountObjectForChannel = calculateUnreadCount(channelMessageCounts[channelId], channelMembership, collapsedThreadsEnabled);\r\n            if (unreadCountObjectForChannel.showUnread) {\r\n                teamUnreadsSet.add(channel.team_id);\r\n            }\r\n\r\n            // Add mentions count from channel membership\r\n            if (unreadCountObjectForChannel.mentions > 0) {\r\n                const previousMentionsInTeam = teamMentionsMap.has(channel.team_id) ? teamMentionsMap.get(channel.team_id) as number : 0;\r\n                if (previousMentionsInTeam === 0) {\r\n                    teamMentionsMap.set(channel.team_id, unreadCountObjectForChannel.mentions);\r\n                } else {\r\n                    teamMentionsMap.set(channel.team_id, unreadCountObjectForChannel.mentions + previousMentionsInTeam);\r\n                }\r\n            }\r\n\r\n            // Add has urgent mentions count from channel membership\r\n            if (unreadCountObjectForChannel.hasUrgent) {\r\n                const previousHasUrgetInTeam = teamHasUrgentMap.has(channel.team_id) ? teamHasUrgentMap.get(channel.team_id) as boolean : false;\r\n                if (!previousHasUrgetInTeam) {\r\n                    teamHasUrgentMap.set(channel.team_id, unreadCountObjectForChannel.hasUrgent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (collapsedThreadsEnabled) {\r\n            for (const teamId of Object.keys(teamThreadCounts)) {\r\n                const threadCountsObjectForTeam = teamThreadCounts[teamId];\r\n\r\n                // Add read/unread from global threads view for team\r\n                if (threadCountsObjectForTeam.total_unread_threads > 0) {\r\n                    teamUnreadsSet.add(teamId);\r\n                }\r\n\r\n                // Add mentions count from global threads view for team\r\n                if (threadCountsObjectForTeam.total_unread_mentions > 0) {\r\n                    const previousMentionsInTeam = teamMentionsMap.has(teamId) ? teamMentionsMap.get(teamId) as number : 0;\r\n                    if (previousMentionsInTeam === 0) {\r\n                        teamMentionsMap.set(teamId, threadCountsObjectForTeam.total_unread_mentions);\r\n                    } else {\r\n                        teamMentionsMap.set(teamId, threadCountsObjectForTeam.total_unread_mentions + previousMentionsInTeam);\r\n                    }\r\n                }\r\n\r\n                // Add mentions count from global threads view for team\r\n                if (threadCountsObjectForTeam.total_unread_urgent_mentions) {\r\n                    const previousHasUrgetInTeam = teamHasUrgentMap.has(teamId) ? teamHasUrgentMap.get(teamId) as boolean : false;\r\n                    if (!previousHasUrgetInTeam) {\r\n                        teamHasUrgentMap.set(teamId, Boolean(threadCountsObjectForTeam.total_unread_urgent_mentions));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return [teamUnreadsSet, teamMentionsMap, teamHasUrgentMap];\r\n    },\r\n);\r\n\r\nexport const getUnreadStatusInCurrentTeam: (state: GlobalState) => BasicUnreadStatus = createSelector(\r\n    'getUnreadStatusInCurrentTeam',\r\n    getCurrentChannelId,\r\n    getMyChannels,\r\n    getMyChannelMemberships,\r\n    getChannelMessageCounts,\r\n    getUsers,\r\n    getCurrentUserId,\r\n    getCurrentTeamId,\r\n    isCollapsedThreadsEnabled,\r\n    getThreadCountsIncludingDirect,\r\n    isPostPriorityEnabled,\r\n    (\r\n        currentChannelId,\r\n        channels,\r\n        myMembers,\r\n        messageCounts,\r\n        users,\r\n        currentUserId,\r\n        currentTeamId,\r\n        collapsedThreadsEnabled,\r\n        threadCounts,\r\n        postPriorityEnabled,\r\n    ) => {\r\n        const {\r\n            messages: currentTeamUnreadMessages,\r\n            mentions: currentTeamUnreadMentions,\r\n        } = channels.reduce((counts, channel) => {\r\n            const m = myMembers[channel.id];\r\n\r\n            if (!m || channel.id === currentChannelId) {\r\n                return counts;\r\n            }\r\n\r\n            const channelExists = channel.type === General.DM_CHANNEL ? users[getUserIdFromChannelName(currentUserId, channel.name)]?.delete_at === 0 : channel.delete_at === 0;\r\n            if (!channelExists) {\r\n                return counts;\r\n            }\r\n\r\n            const mentions = collapsedThreadsEnabled ? m.mention_count_root : m.mention_count;\r\n            if (mentions) {\r\n                counts.mentions += mentions;\r\n            }\r\n\r\n            if (postPriorityEnabled) {\r\n                counts.urgentMentions += m.urgent_mention_count;\r\n            }\r\n\r\n            const unreadCount = calculateUnreadCount(messageCounts[channel.id], m, collapsedThreadsEnabled);\r\n            if (unreadCount.showUnread) {\r\n                counts.messages += unreadCount.messages;\r\n            }\r\n\r\n            return counts;\r\n        }, {\r\n            messages: 0,\r\n            mentions: 0,\r\n            urgentMentions: 0,\r\n        });\r\n\r\n        let totalUnreadMentions = currentTeamUnreadMentions;\r\n        let anyUnreadThreads = false;\r\n\r\n        // when collapsed threads are enabled, we start with root-post counts from channels, then\r\n        // add the same thread-reply counts from the global threads view IF we're not in global threads\r\n        if (collapsedThreadsEnabled && currentChannelId) {\r\n            const c = threadCounts[currentTeamId];\r\n            if (c) {\r\n                anyUnreadThreads = anyUnreadThreads || Boolean(c.total_unread_threads);\r\n                totalUnreadMentions += c.total_unread_mentions;\r\n            }\r\n        }\r\n\r\n        return totalUnreadMentions || anyUnreadThreads || Boolean(currentTeamUnreadMessages);\r\n    },\r\n);\r\n\r\nexport const canManageChannelMembers: (state: GlobalState) => boolean = createSelector(\r\n    'canManageChannelMembers',\r\n    getCurrentChannel,\r\n    (state: GlobalState): boolean => haveICurrentChannelPermission(state,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n    ),\r\n    (state: GlobalState): boolean => haveICurrentChannelPermission(state,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n    ),\r\n    (\r\n        channel: Channel | undefined,\r\n        managePrivateMembers: boolean,\r\n        managePublicMembers: boolean,\r\n    ): boolean => {\r\n        if (!channel) {\r\n            return false;\r\n        }\r\n\r\n        if (channel.delete_at !== 0) {\r\n            return false;\r\n        }\r\n\r\n        if (channel.type === General.DM_CHANNEL || channel.type === General.GM_CHANNEL || channel.name === General.DEFAULT_CHANNEL) {\r\n            return false;\r\n        }\r\n\r\n        if (channel.type === General.OPEN_CHANNEL) {\r\n            return managePublicMembers;\r\n        } else if (channel.type === General.PRIVATE_CHANNEL) {\r\n            return managePrivateMembers;\r\n        }\r\n\r\n        return true;\r\n    },\r\n);\r\n\r\n// Determine if the user has permissions to manage members in at least one channel of the current team\r\nexport function canManageAnyChannelMembersInCurrentTeam(state: GlobalState): boolean {\r\n    const myChannelMemberships = getMyChannelMemberships(state);\r\n    const myChannelsIds = Object.keys(myChannelMemberships);\r\n    const currentTeamId = getCurrentTeamId(state);\r\n\r\n    for (const channelId of myChannelsIds) {\r\n        const channel = getChannel(state, channelId);\r\n\r\n        if (!channel || channel.team_id !== currentTeamId) {\r\n            continue;\r\n        }\r\n\r\n        if (channel.type === General.OPEN_CHANNEL && haveIChannelPermission(state,\r\n            currentTeamId,\r\n            channelId,\r\n            Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n        )) {\r\n            return true;\r\n        } else if (channel.type === General.PRIVATE_CHANNEL && haveIChannelPermission(state,\r\n            currentTeamId,\r\n            channelId,\r\n            Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n        )) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport const getAllDirectChannelIds: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getAllDirectChannelIds',\r\n    getDirectChannelsSet,\r\n    (directIds: Set<string>): string[] => {\r\n        return Array.from(directIds);\r\n    },\r\n);\r\n\r\nexport const getChannelIdsInCurrentTeam: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getChannelIdsInCurrentTeam',\r\n    getCurrentTeamId,\r\n    getChannelsInTeam,\r\n    (currentTeamId: string, channelsInTeam: RelationOneToManyUnique<Team, Channel>): string[] => {\r\n        return Array.from(channelsInTeam[currentTeamId] || []);\r\n    },\r\n);\r\n\r\nexport const getChannelIdsForCurrentTeam: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getChannelIdsForCurrentTeam',\r\n    getChannelIdsInCurrentTeam,\r\n    getAllDirectChannelIds,\r\n    (channels, direct) => {\r\n        return [...channels, ...direct];\r\n    },\r\n);\r\n\r\nexport const getChannelIdsInAllTeams: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getChannelIdsInAllTeams',\r\n    getChannelSetForAllTeams,\r\n    (channels): string[] => {\r\n        return Array.from(channels || []);\r\n    },\r\n);\r\n\r\nexport const getChannelIdsForAllTeams: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getChannelIdsForAllTeams',\r\n    getChannelIdsInAllTeams,\r\n    getAllDirectChannelIds,\r\n    (channels, direct) => {\r\n        return [...channels, ...direct];\r\n    },\r\n);\r\n\r\nexport const getUnreadChannelIds: (state: GlobalState, lastUnreadChannel?: Channel | null) => string[] = createIdsSelector(\r\n    'getUnreadChannelIds',\r\n    isCollapsedThreadsEnabled,\r\n    getMyChannelMemberships,\r\n    getChannelMessageCounts,\r\n    getChannelIdsForCurrentTeam,\r\n    (state: GlobalState, lastUnreadChannel: Channel | undefined | null = null): Channel | undefined | null => lastUnreadChannel,\r\n    (\r\n        collapsedThreads,\r\n        members: RelationOneToOne<Channel, ChannelMembership>,\r\n        messageCounts: RelationOneToOne<Channel, ChannelMessageCount>,\r\n        teamChannelIds: string[],\r\n        lastUnreadChannel?: Channel | null,\r\n    ): string[] => {\r\n        const unreadIds = teamChannelIds.filter((id) => {\r\n            return calculateUnreadCount(messageCounts[id], members[id], collapsedThreads).showUnread;\r\n        });\r\n\r\n        if (lastUnreadChannel && members[lastUnreadChannel.id] && !unreadIds.includes(lastUnreadChannel.id)) {\r\n            unreadIds.push(lastUnreadChannel.id);\r\n        }\r\n\r\n        return unreadIds;\r\n    },\r\n);\r\n\r\nexport const getAllTeamsUnreadChannelIds: (state: GlobalState) => string[] = createIdsSelector(\r\n    'getAllTeamsUnreadChannelIds',\r\n    isCollapsedThreadsEnabled,\r\n    getMyChannelMemberships,\r\n    getChannelMessageCounts,\r\n    getChannelIdsForAllTeams,\r\n    (\r\n        collapsedThreads,\r\n        members: RelationOneToOne<Channel, ChannelMembership>,\r\n        messageCounts: RelationOneToOne<Channel, ChannelMessageCount>,\r\n        allTeamsChannelIds: string[],\r\n    ): string[] => {\r\n        return allTeamsChannelIds.filter((id) => {\r\n            return calculateUnreadCount(messageCounts[id], members[id], collapsedThreads).showUnread;\r\n        });\r\n    },\r\n);\r\n\r\nexport const getUnreadChannels: (state: GlobalState, lastUnreadChannel?: Channel | null) => Channel[] = createIdsSelector(\r\n    'getUnreadChannels',\r\n    getCurrentUser,\r\n    getUsers,\r\n    getUserIdsInChannels,\r\n    getAllChannels,\r\n    getUnreadChannelIds,\r\n    getTeammateNameDisplaySetting,\r\n    (currentUser, profiles, userIdsInChannels: any, channels, unreadIds, settings) => {\r\n        // If we receive an unread for a channel and then a mention the channel\r\n        // won't be sorted correctly until we receive a message in another channel\r\n        if (!currentUser) {\r\n            return [];\r\n        }\r\n\r\n        const allUnreadChannels = unreadIds.filter((id) => channels[id] && channels[id].delete_at === 0).map((id) => {\r\n            const c = channels[id];\r\n\r\n            if (c.type === General.DM_CHANNEL || c.type === General.GM_CHANNEL) {\r\n                return completeDirectChannelDisplayName(currentUser.id, profiles, userIdsInChannels[id], settings!, c);\r\n            }\r\n\r\n            return c;\r\n        });\r\n        return allUnreadChannels;\r\n    },\r\n);\r\n\r\nexport const getUnsortedAllTeamsUnreadChannels: (state: GlobalState) => Channel[] = createSelector(\r\n    'getAllTeamsUnreadChannels',\r\n    getCurrentUser,\r\n    getUsers,\r\n    getUserIdsInChannels,\r\n    getAllChannels,\r\n    getAllTeamsUnreadChannelIds,\r\n    getTeammateNameDisplaySetting,\r\n    (currentUser, profiles, userIdsInChannels, channels, allTeamsUnreadChannelIds, settings) => {\r\n        // If we receive an unread for a channel and then a mention the channel\r\n        // won't be sorted correctly until we receive a message in another channel\r\n        if (!currentUser) {\r\n            return [];\r\n        }\r\n\r\n        return allTeamsUnreadChannelIds.filter((id) => channels[id] && channels[id].delete_at === 0).map((id) => {\r\n            const c = channels[id];\r\n\r\n            if (c.type === General.DM_CHANNEL || c.type === General.GM_CHANNEL) {\r\n                return completeDirectChannelDisplayName(currentUser.id, profiles, userIdsInChannels[id], settings!, c);\r\n            }\r\n\r\n            return c;\r\n        });\r\n    },\r\n);\r\n\r\nexport const sortUnreadChannels = (\r\n    channels: Channel[],\r\n    myMembers: RelationOneToOne<Channel, ChannelMembership>,\r\n    lastUnreadChannel: (Channel & {hadMentions: boolean}) | null,\r\n    crtEnabled: boolean,\r\n) => {\r\n    function isMuted(channel: Channel) {\r\n        return isChannelMuted(myMembers[channel.id]);\r\n    }\r\n\r\n    function hasMentions(channel: Channel) {\r\n        if (lastUnreadChannel && channel.id === lastUnreadChannel.id && lastUnreadChannel.hadMentions) {\r\n            return true;\r\n        }\r\n\r\n        const member = myMembers[channel.id];\r\n        return member?.mention_count !== 0;\r\n    }\r\n\r\n    // Sort channels with mentions first and then sort by recency\r\n    return [...channels].sort((a, b) => {\r\n        // Sort muted channels last\r\n        if (isMuted(a) && !isMuted(b)) {\r\n            return 1;\r\n        } else if (!isMuted(a) && isMuted(b)) {\r\n            return -1;\r\n        }\r\n\r\n        // Sort non-muted mentions first\r\n        if (hasMentions(a) && !hasMentions(b)) {\r\n            return -1;\r\n        } else if (!hasMentions(a) && hasMentions(b)) {\r\n            return 1;\r\n        }\r\n\r\n        const aLastPostAt = max([crtEnabled ? a.last_root_post_at : a.last_post_at, a.create_at]) || 0;\r\n        const bLastPostAt = max([crtEnabled ? b.last_root_post_at : b.last_post_at, b.create_at]) || 0;\r\n\r\n        return bLastPostAt - aLastPostAt;\r\n    });\r\n};\r\n\r\nexport const getSortedAllTeamsUnreadChannels: (state: GlobalState) => Channel[] = createSelector(\r\n    'getSortedAllTeamsUnreadChannels',\r\n    getUnsortedAllTeamsUnreadChannels,\r\n    getMyChannelMemberships,\r\n    isCollapsedThreadsEnabled,\r\n    (channels, myMembers, crtEnabled) => {\r\n        return sortUnreadChannels(channels, myMembers, null, crtEnabled);\r\n    },\r\n);\r\n\r\n// getDirectAndGroupChannels returns all direct and group channels, even if they have been manually\r\n// or automatically closed.\r\n//\r\n// This is similar to the getAllDirectChannels above which actually also returns group channels,\r\n// but suppresses manually closed group channels but not manually closed direct channels. This\r\n// method does away with all the suppression, since the webapp client downstream uses this for\r\n// the channel switcher and puts such suppressed channels in a separate category.\r\nexport const getDirectAndGroupChannels: (a: GlobalState) => Channel[] = createSelector(\r\n    'getDirectAndGroupChannels',\r\n    getCurrentUser,\r\n    getUsers,\r\n    getUserIdsInChannels,\r\n    getAllChannels,\r\n    getTeammateNameDisplaySetting,\r\n    (currentUser: UserProfile, profiles: IDMappedObjects<UserProfile>, userIdsInChannels: any, channels: IDMappedObjects<Channel>, settings): Channel[] => {\r\n        if (!currentUser) {\r\n            return [];\r\n        }\r\n\r\n        return Object.keys(channels).\r\n            map((key) => channels[key]).\r\n            filter((channel: Channel): boolean => Boolean(channel)).\r\n            filter((channel: Channel): boolean => channel.type === General.DM_CHANNEL || channel.type === General.GM_CHANNEL).\r\n            map((channel: Channel): Channel => completeDirectChannelDisplayName(currentUser.id, profiles, userIdsInChannels[channel.id], settings!, channel));\r\n    },\r\n);\r\n\r\nconst getProfiles = (currentUserId: string, usersIdsInChannel: Set<string>, users: IDMappedObjects<UserProfile>): UserProfile[] => {\r\n    const profiles: UserProfile[] = [];\r\n    usersIdsInChannel.forEach((userId) => {\r\n        if (userId !== currentUserId) {\r\n            profiles.push(users[userId]);\r\n        }\r\n    });\r\n    return profiles;\r\n};\r\n\r\n/**\r\n * Returns an array of unsorted group channels, each with an array of the user profiles in the channel attached to them.\r\n */\r\nexport const getChannelsWithUserProfiles: (state: GlobalState) => Array<{\r\n    profiles: UserProfile[];\r\n} & Channel> = createSelector(\r\n    'getChannelsWithUserProfiles',\r\n    getUserIdsInChannels,\r\n    getUsers,\r\n    getGroupChannels,\r\n    getCurrentUserId,\r\n    (channelUserMap: RelationOneToManyUnique<Channel, UserProfile>, users: IDMappedObjects<UserProfile>, channels: Channel[], currentUserId: string) => {\r\n        return channels.map((channel: Channel): {\r\n            profiles: UserProfile[];\r\n        } & Channel => {\r\n            const profiles = getProfiles(currentUserId, channelUserMap[channel.id] || new Set(), users);\r\n            return {\r\n                ...channel,\r\n                profiles,\r\n            };\r\n        });\r\n    },\r\n);\r\n\r\nexport const getDefaultChannelForTeams: (state: GlobalState) => RelationOneToOne<Team, Channel> = createSelector(\r\n    'getDefaultChannelForTeams',\r\n    getAllChannels,\r\n    (channels: IDMappedObjects<Channel>): RelationOneToOne<Team, Channel> => {\r\n        const result: RelationOneToOne<Team, Channel> = {};\r\n\r\n        for (const channel of Object.keys(channels).map((key) => channels[key])) {\r\n            if (channel && channel.name === General.DEFAULT_CHANNEL) {\r\n                result[channel.team_id] = channel;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    },\r\n);\r\n\r\nexport const getMyFirstChannelForTeams: (state: GlobalState) => RelationOneToOne<Team, Channel> = createSelector(\r\n    'getMyFirstChannelForTeams',\r\n    getAllChannels,\r\n    getMyChannelMemberships,\r\n    getMyTeams,\r\n    getCurrentUser,\r\n    (allChannels: IDMappedObjects<Channel>, myChannelMemberships: RelationOneToOne<Channel, ChannelMembership>, myTeams: Team[], currentUser: UserProfile): RelationOneToOne<Team, Channel> => {\r\n        const locale = currentUser.locale || General.DEFAULT_LOCALE;\r\n        const result: RelationOneToOne<Team, Channel> = {};\r\n\r\n        for (const team of myTeams) {\r\n        // Get a sorted array of all channels in the team that the current user is a member of\r\n            const teamChannels = Object.values(allChannels).filter((channel: Channel) => channel && channel.team_id === team.id && Boolean(myChannelMemberships[channel.id])).sort(sortChannelsByDisplayName.bind(null, locale));\r\n\r\n            if (teamChannels.length === 0) {\r\n                continue;\r\n            }\r\n\r\n            result[team.id] = teamChannels[0];\r\n        }\r\n\r\n        return result;\r\n    },\r\n);\r\n\r\nexport const getRedirectChannelNameForCurrentTeam = (state: GlobalState): string => {\r\n    const currentTeamId = getCurrentTeamId(state);\r\n    return getRedirectChannelNameForTeam(state, currentTeamId);\r\n};\r\n\r\nexport const getRedirectChannelNameForTeam = (state: GlobalState, teamId: string): string => {\r\n    const defaultChannelForTeam = getDefaultChannelForTeams(state)[teamId];\r\n    const canIJoinPublicChannelsInTeam = haveITeamPermission(state,\r\n        teamId,\r\n        Permissions.JOIN_PUBLIC_CHANNELS,\r\n    );\r\n    const myChannelMemberships = getMyChannelMemberships(state);\r\n    const iAmMemberOfTheTeamDefaultChannel = Boolean(defaultChannelForTeam && myChannelMemberships[defaultChannelForTeam.id]);\r\n\r\n    if (iAmMemberOfTheTeamDefaultChannel || canIJoinPublicChannelsInTeam) {\r\n        return General.DEFAULT_CHANNEL;\r\n    }\r\n\r\n    const myFirstChannelForTeam = getMyFirstChannelForTeams(state)[teamId];\r\n\r\n    return (myFirstChannelForTeam && myFirstChannelForTeam.name) || General.DEFAULT_CHANNEL;\r\n};\r\n\r\n// isManually unread looks into state if the provided channelId is marked as unread by the user.\r\nexport function isManuallyUnread(state: GlobalState, channelId?: string): boolean {\r\n    if (!channelId) {\r\n        return false;\r\n    }\r\n\r\n    return Boolean(state.entities.channels.manuallyUnread[channelId]);\r\n}\r\n\r\nexport function getChannelModerations(state: GlobalState, channelId: string): ChannelModeration[] {\r\n    return state.entities.channels.channelModerations[channelId];\r\n}\r\n\r\nconst EMPTY_OBJECT = {};\r\nexport function getChannelMemberCountsByGroup(state: GlobalState, channelId?: string): ChannelMemberCountsByGroup {\r\n    if (!channelId) {\r\n        return EMPTY_OBJECT;\r\n    }\r\n    return state.entities.channels.channelMemberCountsByGroup[channelId] || EMPTY_OBJECT;\r\n}\r\n\r\nexport function isFavoriteChannel(state: GlobalState, channelId: string): boolean {\r\n    const channel = getChannel(state, channelId);\r\n    if (!channel) {\r\n        return false;\r\n    }\r\n\r\n    const category = getCategoryInTeamByType(state, channel.team_id || getCurrentTeamId(state), CategoryTypes.FAVORITES);\r\n\r\n    if (!category) {\r\n        return false;\r\n    }\r\n\r\n    return category.channel_ids.includes(channel.id);\r\n}\r\n\r\nexport function filterChannelList(channelList: Channel[], filters: ChannelSearchOpts): Channel[] {\r\n    if (!filters || (!filters.private && !filters.public && !filters.deleted && !filters.team_ids)) {\r\n        return channelList;\r\n    }\r\n    let result: Channel[] = [];\r\n    const channelType: string[] = [];\r\n    const channels = channelList;\r\n    if (filters.public) {\r\n        channelType.push(General.OPEN_CHANNEL);\r\n    }\r\n    if (filters.private) {\r\n        channelType.push(General.PRIVATE_CHANNEL);\r\n    }\r\n    if (filters.deleted) {\r\n        channelType.push(General.ARCHIVED_CHANNEL);\r\n    }\r\n    channelType.forEach((type) => {\r\n        result = result.concat(channels.filter((channel) => channel.type === type));\r\n    });\r\n    if (filters.team_ids && filters.team_ids.length > 0) {\r\n        let teamResult: Channel[] = [];\r\n        filters.team_ids.forEach((id) => {\r\n            if (channelType.length > 0) {\r\n                const filterResult = result.filter((channel) => channel.team_id === id);\r\n                teamResult = teamResult.concat(filterResult);\r\n            } else {\r\n                teamResult = teamResult.concat(channels.filter((channel) => channel.team_id === id));\r\n            }\r\n        });\r\n        result = teamResult;\r\n    }\r\n    return result;\r\n}\r\nexport function searchChannelsInPolicy(state: GlobalState, policyId: string, term: string, filters: ChannelSearchOpts): Channel[] {\r\n    const channelsInPolicy = getChannelsInPolicy();\r\n    const channelArray = channelsInPolicy(state, {policyId});\r\n    let channels = filterChannelList(channelArray, filters);\r\n    channels = filterChannelsMatchingTerm(channels, term);\r\n\r\n    return channels;\r\n}\r\n\r\nexport function getDirectTeammate(state: GlobalState, channelId: string): UserProfile | undefined {\r\n    const channel = getChannel(state, channelId);\r\n    if (!channel || channel.type !== 'D') {\r\n        return undefined;\r\n    }\r\n\r\n    const userIds = channel.name.split('__');\r\n    const currentUserId = getCurrentUserId(state);\r\n\r\n    if (userIds.length !== 2 || userIds.indexOf(currentUserId) === -1) {\r\n        return undefined;\r\n    }\r\n\r\n    if (userIds[0] === userIds[1]) {\r\n        return getUser(state, userIds[0]);\r\n    }\r\n\r\n    for (const id of userIds) {\r\n        if (id !== currentUserId) {\r\n            return getUser(state, id);\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\nexport function makeGetGmChannelMemberCount(): (state: GlobalState, channel: Channel) => number {\r\n    return createSelector(\r\n        'getChannelMemberCount',\r\n        getUserIdsInChannels,\r\n        getCurrentUserId,\r\n        (_state: GlobalState, channel: Channel) => channel,\r\n        (memberIds, userId, channel) => {\r\n            let membersCount = 0;\r\n            if (memberIds && memberIds[channel.id]) {\r\n                const groupMemberIds: Set<string> = memberIds[channel.id] as unknown as Set<string>;\r\n                membersCount = groupMemberIds.size;\r\n                if (groupMemberIds.has(userId)) {\r\n                    membersCount--;\r\n                }\r\n            }\r\n\r\n            return membersCount;\r\n        },\r\n    );\r\n}\r\n\r\nexport const getMyActiveChannelIds = createSelector(\r\n    'getMyActiveChannels',\r\n    getMyChannels,\r\n    (channels) => channels.flatMap((chan) => {\r\n        if (chan.delete_at > 0) {\r\n            return [];\r\n        }\r\n        return chan.id;\r\n    }),\r\n);\r\nexport const getRecentProfilesFromDMs: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getRecentProfilesFromDMs',\r\n    getAllChannels,\r\n    getUsers,\r\n    getCurrentUser,\r\n    getMyChannelMemberships,\r\n    (allChannels: IDMappedObjects<Channel>, users: IDMappedObjects<UserProfile>, currentUser: UserProfile, memberships: RelationOneToOne<Channel, ChannelMembership>) => {\r\n        if (!allChannels || !users) {\r\n            return [];\r\n        }\r\n        const recentChannelIds = Object.values(memberships).sort((aMembership, bMembership) => {\r\n            return bMembership.last_viewed_at - aMembership.last_viewed_at;\r\n        }).map((membership) => membership.channel_id);\r\n        const groupChannels = Object.values(allChannels).filter((channel: Channel) => channel.type === General.GM_CHANNEL);\r\n        const dmChannels = Object.values(allChannels).filter((channel: Channel) => channel.type === General.DM_CHANNEL);\r\n\r\n        const userProfilesByChannel: {[key: string]: UserProfile[]} = {};\r\n\r\n        dmChannels.forEach((channel) => {\r\n            if (channel.name) {\r\n                const otherUserId = getUserIdFromChannelName(currentUser.id, channel.name);\r\n                const userProfile = users[otherUserId];\r\n                if (userProfile) {\r\n                    userProfilesByChannel[channel.id] = [userProfile];\r\n                }\r\n            }\r\n        });\r\n\r\n        groupChannels.forEach((channel) => {\r\n            if (channel.display_name) {\r\n                const memberUsernames = channel.display_name.split(',').map((username) => username.trim()).filter((username) => username !== currentUser.username).sort();\r\n                const memberProfiles = memberUsernames.map((username) => {\r\n                    return Object.values(users).find((profile) => profile.username === username);\r\n                });\r\n                if (memberProfiles) {\r\n                    userProfilesByChannel[channel.id] = memberProfiles as UserProfile[];\r\n                }\r\n            }\r\n        });\r\n        const sortedUserProfiles: Set<UserProfile> = new Set<UserProfile>();\r\n        recentChannelIds.forEach((cid: string) => {\r\n            if (userProfilesByChannel[cid]) {\r\n                userProfilesByChannel[cid].forEach((user) => sortedUserProfiles.add(user));\r\n            }\r\n        });\r\n        return [...sortedUserProfiles];\r\n    },\r\n);\r\n\r\nexport const isDeactivatedDirectChannel = (state: GlobalState, channelId: string) => {\r\n    const teammate = getDirectTeammate(state, channelId);\r\n    return Boolean(teammate && teammate.delete_at);\r\n};\r\n\r\nexport function getChannelBanner(state: GlobalState, channelId: string): ChannelBanner | undefined {\r\n    const channel = getChannel(state, channelId);\r\n    return channel ? channel.banner_info : undefined;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ChannelMembership, Channel} from '@mattermost/types/channels';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {TeamMembership} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {RelationOneToOne, IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\n\r\n// Channels\r\n\r\nexport function getCurrentChannelId(state: GlobalState): string {\r\n    return state.entities.channels.currentChannelId;\r\n}\r\n\r\nexport function getMyChannelMemberships(state: GlobalState): RelationOneToOne<Channel, ChannelMembership> {\r\n    return state.entities.channels.myMembers;\r\n}\r\n\r\nexport const getMyCurrentChannelMembership: (a: GlobalState) => ChannelMembership | undefined = createSelector(\r\n    'getMyCurrentChannelMembership',\r\n    getCurrentChannelId,\r\n    getMyChannelMemberships,\r\n    (currentChannelId, channelMemberships) => {\r\n        return channelMemberships[currentChannelId];\r\n    },\r\n);\r\n\r\nexport function getMembersInChannel(state: GlobalState, channelId: string): Record<string, ChannelMembership> {\r\n    return state.entities.channels?.membersInChannel?.[channelId] || {};\r\n}\r\n\r\n// Teams\r\n\r\nexport function getMembersInTeam(state: GlobalState, teamId: string): RelationOneToOne<UserProfile, TeamMembership> {\r\n    return state.entities.teams?.membersInTeam?.[teamId] || {};\r\n}\r\n\r\n// Users\r\n\r\nexport function getCurrentUser(state: GlobalState): UserProfile {\r\n    return state.entities.users.profiles[getCurrentUserId(state)];\r\n}\r\n\r\nexport function getCurrentUserEmail(state: GlobalState): UserProfile['email'] {\r\n    return getCurrentUser(state)?.email;\r\n}\r\n\r\nexport function getCurrentUserId(state: GlobalState): string {\r\n    return state.entities.users.currentUserId;\r\n}\r\n\r\nexport function getUsers(state: GlobalState): IDMappedObjects<UserProfile> {\r\n    return state.entities.users.profiles;\r\n}\r\n\r\n// Config\r\nexport const getIsUserStatusesConfigEnabled: (a: GlobalState) => boolean = createSelector(\r\n    'getIsUserStatusesConfigEnabled',\r\n    (state: GlobalState) => state.entities.general.config.EnableUserStatuses,\r\n    (EnableUserStatuses) => EnableUserStatuses !== 'false',\r\n);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {getFeatureFlagValue} from 'mattermost-redux/selectors/entities/general';\r\n\r\nexport const contentFlaggingFeatureEnabled = (state: GlobalState): boolean => {\r\n    const featureFlagEnabled = getFeatureFlagValue(state, 'ContentFlagging') === 'true';\r\n    const featureEnabled = state.entities.general.config.ContentFlaggingEnabled === 'true';\r\n\r\n    return featureFlagEnabled && featureEnabled;\r\n};\r\n\r\nexport const contentFlaggingConfig = (state: GlobalState) => state.entities.contentFlagging.settings;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ClientConfig, FeatureFlags, ClientLicense} from '@mattermost/types/config';\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {General} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {isMinimumServerVersion} from 'mattermost-redux/utils/helpers';\r\n\r\nimport type {CWSAvailabilityState} from '../../reducers/entities/general';\r\n\r\nexport function getConfig(state: GlobalState): Partial<ClientConfig> {\r\n    return state.entities.general.config;\r\n}\r\n\r\n/**\r\n * Safely get value of a specific or known FeatureFlag\r\n */\r\nexport function getFeatureFlagValue(state: GlobalState, key: keyof FeatureFlags): string | undefined {\r\n    return getConfig(state)?.[`FeatureFlag${key}` as keyof Partial<ClientConfig>];\r\n}\r\n\r\nexport type PasswordConfig = {\r\n    minimumLength: number;\r\n    requireLowercase: boolean;\r\n    requireUppercase: boolean;\r\n    requireNumber: boolean;\r\n    requireSymbol: boolean;\r\n};\r\n\r\nexport const getPasswordConfig: (state: GlobalState) => PasswordConfig = createSelector(\r\n    'getPasswordConfig',\r\n    getConfig,\r\n    (config) => {\r\n        return {\r\n            minimumLength: parseInt(config.PasswordMinimumLength!, 10),\r\n            requireLowercase: config.PasswordRequireLowercase === 'true',\r\n            requireUppercase: config.PasswordRequireUppercase === 'true',\r\n            requireNumber: config.PasswordRequireNumber === 'true',\r\n            requireSymbol: config.PasswordRequireSymbol === 'true',\r\n        };\r\n    },\r\n);\r\n\r\nexport function getLicense(state: GlobalState): ClientLicense {\r\n    return state.entities.general.license;\r\n}\r\n\r\nexport const isCloudLicense: (state: GlobalState) => boolean = createSelector(\r\n    'isCloudLicense',\r\n    getLicense,\r\n    (license: ClientLicense) => license?.Cloud === 'true',\r\n);\r\n\r\nexport function isCompatibleWithJoinViewTeamPermissions(state: GlobalState): boolean {\r\n    const version = state.entities.general.serverVersion;\r\n    return isMinimumServerVersion(version, 5, 10, 0) ||\r\n       (version.indexOf('dev') !== -1 && isMinimumServerVersion(version, 5, 8, 0)) ||\r\n       (version.match(/^5.8.\\d.\\d\\d\\d\\d.*$/) !== null && isMinimumServerVersion(version, 5, 8, 0));\r\n}\r\n\r\nexport const canUploadFilesOnMobile: (a: GlobalState) => boolean = createSelector(\r\n    'canUploadFilesOnMobile',\r\n    getConfig,\r\n    getLicense,\r\n    (config: Partial<ClientConfig>, license: any): boolean => {\r\n        // Defaults to true if either setting doesn't exist\r\n        return config.EnableFileAttachments !== 'false' &&\r\n           (license.IsLicensed === 'false' || license.Compliance === 'false' || config.EnableMobileFileUpload !== 'false');\r\n    },\r\n);\r\n\r\nexport const canDownloadFilesOnMobile: (a: GlobalState) => boolean = createSelector(\r\n    'canDownloadFilesOnMobile',\r\n    getConfig,\r\n    getLicense,\r\n    (config: Partial<ClientConfig>, license: any): boolean => {\r\n        // Defaults to true if the setting doesn't exist\r\n        return license.IsLicensed === 'false' || license.Compliance === 'false' || config.EnableMobileFileDownload !== 'false';\r\n    },\r\n);\r\n\r\nexport const getAutolinkedUrlSchemes: (a: GlobalState) => string[] = createSelector(\r\n    'getAutolinkedUrlSchemes',\r\n    getConfig,\r\n    (config: Partial<ClientConfig>): string[] => {\r\n        if (!config.CustomUrlSchemes) {\r\n            return General.DEFAULT_AUTOLINKED_URL_SCHEMES;\r\n        }\r\n\r\n        return [\r\n            ...General.DEFAULT_AUTOLINKED_URL_SCHEMES,\r\n            ...config.CustomUrlSchemes.split(','),\r\n        ];\r\n    },\r\n);\r\n\r\nexport const getManagedResourcePaths: (state: GlobalState) => string[] = createSelector(\r\n    'getManagedResourcePaths',\r\n    getConfig,\r\n    (config) => {\r\n        if (!config.ManagedResourcePaths) {\r\n            return [];\r\n        }\r\n\r\n        return config.ManagedResourcePaths.split(',').map((path) => path.trim());\r\n    },\r\n);\r\n\r\nexport const getServerVersion = (state: GlobalState): string => {\r\n    return state.entities.general.serverVersion;\r\n};\r\n\r\nexport function getFirstAdminVisitMarketplaceStatus(state: GlobalState): boolean {\r\n    return state.entities.general.firstAdminVisitMarketplaceStatus;\r\n}\r\n\r\nexport function getFirstAdminSetupComplete(state: GlobalState): boolean {\r\n    return state.entities.general.firstAdminCompleteSetup;\r\n}\r\n\r\nexport function isPerformanceDebuggingEnabled(state: GlobalState): boolean {\r\n    return state.entities.general.config.EnableClientPerformanceDebugging === 'true';\r\n}\r\n\r\nexport const isMarketplaceEnabled: (state: GlobalState) => boolean = createSelector(\r\n    'isMarketplaceEnabled',\r\n    getConfig,\r\n    (config) => {\r\n        return config.PluginsEnabled === 'true' && config.EnableMarketplace === 'true';\r\n    },\r\n);\r\n\r\nexport const getUsersStatusAndProfileFetchingPollInterval: (state: GlobalState) => number | null = createSelector(\r\n    'getUsersStatusAndProfileFetchingPollInterval',\r\n    getConfig,\r\n    (config) => {\r\n        const usersStatusAndProfileFetchingPollInterval = config.UsersStatusAndProfileFetchingPollIntervalMilliseconds;\r\n        if (usersStatusAndProfileFetchingPollInterval) {\r\n            return parseInt(usersStatusAndProfileFetchingPollInterval, 10);\r\n        }\r\n\r\n        return null;\r\n    },\r\n);\r\n\r\nexport function developerModeEnabled(state: GlobalState): boolean {\r\n    return state.entities.general.config.EnableDeveloper === 'true';\r\n}\r\n\r\nexport function testingEnabled(state: GlobalState): boolean {\r\n    return state.entities.general.config.EnableTesting === 'true';\r\n}\r\n\r\nexport const getCustomProfileAttributes: (state: GlobalState) => UserPropertyField[] = createSelector(\r\n    'getCustomProfileAttributes',\r\n    (state) => state.entities.general.customProfileAttributes,\r\n    (fields) => {\r\n        return Object.values(fields).sort((a, b) => (a.attrs?.sort_order ?? 0) - (b.attrs?.sort_order ?? 0));\r\n    },\r\n);\r\n\r\nexport function getIsCrossTeamSearchEnabled(state: GlobalState): boolean {\r\n    return state.entities.general.config.EnableCrossTeamSearch === 'true';\r\n}\r\n\r\nexport function getCWSAvailability(state: GlobalState): CWSAvailabilityState {\r\n    return state.entities.general.cwsAvailability;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {General} from 'mattermost-redux/constants';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/common';\r\n\r\nexport function getCurrentUserLocale(state: GlobalState, defaultLocale = General.DEFAULT_LOCALE) {\r\n    const currentUser = getCurrentUser(state);\r\n\r\n    if (!currentUser) {\r\n        return defaultLocale;\r\n    }\r\n\r\n    return currentUser.locale || defaultLocale;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {\r\n    MessageHistory,\r\n    OpenGraphMetadata,\r\n    Post,\r\n    PostAcknowledgement,\r\n    PostOrderBlock,\r\n} from '@mattermost/types/posts';\r\nimport type {Reaction} from '@mattermost/types/reactions';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {\r\n    RelationOneToOne,\r\n    RelationOneToMany,\r\n} from '@mattermost/types/utilities';\r\n\r\nimport {General, Posts, Preferences} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getCurrentChannelId, getCurrentUser} from 'mattermost-redux/selectors/entities/common';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool, shouldShowJoinLeaveMessages} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\nimport {getUsers, getCurrentUserId, getUserStatuses} from 'mattermost-redux/selectors/entities/users';\r\nimport {createIdsSelector} from 'mattermost-redux/utils/helpers';\r\nimport {\r\n    isPostEphemeral,\r\n    isSystemMessage,\r\n    shouldFilterJoinLeavePost,\r\n    comparePosts,\r\n    isPostPendingOrFailed,\r\n    isPostCommentMention,\r\n} from 'mattermost-redux/utils/post_utils';\r\nimport {isGuest} from 'mattermost-redux/utils/user_utils';\r\n\r\nexport function getAllPosts(state: GlobalState) {\r\n    return state.entities.posts.posts;\r\n}\r\n\r\nexport type UserActivityPost = Post & {\r\n    system_post_ids: string[];\r\n    user_activity_posts: Post[];\r\n}\r\n\r\nexport function getPost(state: GlobalState, postId: Post['id']): Post {\r\n    return getAllPosts(state)[postId];\r\n}\r\n\r\nexport function isPostFlagged(state: GlobalState, postId: Post['id']): boolean {\r\n    return getBool(state, Preferences.CATEGORY_FLAGGED_POST, postId);\r\n}\r\n\r\nexport function getPostRepliesCount(state: GlobalState, postId: Post['id']): number {\r\n    return state.entities.posts.postsReplies[postId] || 0;\r\n}\r\n\r\nexport function getPostsInThread(state: GlobalState): RelationOneToMany<Post, Post> {\r\n    return state.entities.posts.postsInThread;\r\n}\r\n\r\nexport function getPostsInThreadOrdered(state: GlobalState, rootId: string): string[] {\r\n    const postIds = getPostsInThread(state)[rootId];\r\n    if (!postIds) {\r\n        return [rootId];\r\n    }\r\n\r\n    const allPosts = getAllPosts(state);\r\n    const threadPosts = postIds.map((v) => allPosts[v]).filter((v) => v);\r\n    const sortedPosts = threadPosts.sort(comparePosts);\r\n    return [...sortedPosts.map((v) => v.id), rootId];\r\n}\r\n\r\nexport function getReactionsForPosts(state: GlobalState): RelationOneToOne<Post, {\r\n    [x: string]: Reaction;\r\n}> {\r\n    return state.entities.posts.reactions;\r\n}\r\n\r\nexport function makeGetReactionsForPost(): (state: GlobalState, postId: Post['id']) => {\r\n    [x: string]: Reaction;\r\n} | undefined {\r\n    return createSelector('makeGetReactionsForPost', getReactionsForPosts, (state: GlobalState, postId: string) => postId, (reactions, postId) => {\r\n        if (reactions[postId]) {\r\n            return reactions[postId];\r\n        }\r\n\r\n        return undefined;\r\n    });\r\n}\r\n\r\nexport function getHasReactions(state: GlobalState, postId: Post['id']): boolean {\r\n    const reactions = getReactionsForPosts(state)?.[postId] || {};\r\n    return Object.keys(reactions).length > 0;\r\n}\r\n\r\nexport function getOpenGraphMetadata(state: GlobalState): RelationOneToOne<Post, Record<string, OpenGraphMetadata>> {\r\n    return state.entities.posts.openGraph;\r\n}\r\n\r\nexport function getOpenGraphMetadataForUrl(state: GlobalState, postId: string, url: string) {\r\n    const openGraphForPost = state.entities.posts.openGraph[postId];\r\n    return openGraphForPost ? openGraphForPost[url] : undefined;\r\n}\r\n\r\n// getPostIdsInCurrentChannel returns the IDs of posts loaded at the bottom of the channel. It does not include older\r\n// posts such as those loaded by viewing a thread or a permalink.\r\nexport function getPostIdsInCurrentChannel(state: GlobalState): Array<Post['id']> | undefined | null {\r\n    return getPostIdsInChannel(state, state.entities.channels.currentChannelId);\r\n}\r\n\r\nexport function makeGetPostIdsForThread(): (state: GlobalState, postId: Post['id']) => Array<Post['id']> {\r\n    const getPostsForThread = makeGetPostsForThread();\r\n\r\n    return createIdsSelector(\r\n        'makeGetPostIdsForThread',\r\n        (state: GlobalState, rootId: Post['id']) => getPostsForThread(state, rootId),\r\n        (posts) => {\r\n            return posts.map((post) => post.id);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetPostsChunkAroundPost(): (state: GlobalState, postId: Post['id'], channelId: Channel['id']) => PostOrderBlock| null | undefined {\r\n    return createIdsSelector(\r\n        'makeGetPostsChunkAroundPost',\r\n        (state: GlobalState, postId: string, channelId: string) => state.entities.posts.postsInChannel[channelId],\r\n        (state: GlobalState, postId) => postId,\r\n        (postsForChannel, postId) => {\r\n            if (!postsForChannel) {\r\n                return null;\r\n            }\r\n\r\n            let postChunk;\r\n\r\n            for (const block of postsForChannel) {\r\n                const index = block.order.indexOf(postId);\r\n\r\n                if (index === -1) {\r\n                    continue;\r\n                }\r\n\r\n                postChunk = block;\r\n            }\r\n\r\n            return postChunk;\r\n        },\r\n    );\r\n}\r\n\r\nfunction isPostInteractable(post: Post | undefined) {\r\n    return post &&\r\n        !post.delete_at &&\r\n        !isPostEphemeral(post) &&\r\n        !isSystemMessage(post) &&\r\n        !isPostPendingOrFailed(post) &&\r\n        post.state !== Posts.POST_DELETED;\r\n}\r\n\r\nexport function getLatestInteractablePostId(state: GlobalState, channelId: string, rootId = '') {\r\n    const postsIds = rootId ? getPostsInThreadOrdered(state, rootId) : getPostIdsInChannel(state, channelId);\r\n    if (!postsIds) {\r\n        return '';\r\n    }\r\n\r\n    const allPosts = getAllPosts(state);\r\n\r\n    for (const postId of postsIds) {\r\n        if (!isPostInteractable(allPosts[postId])) {\r\n            continue;\r\n        }\r\n        return postId;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function getLatestPostToEdit(state: GlobalState, channelId: string, rootId = '') {\r\n    const postsIds = rootId ? getPostsInThreadOrdered(state, rootId) : getPostIdsInChannel(state, channelId);\r\n    if (!postsIds) {\r\n        return '';\r\n    }\r\n\r\n    if (rootId) {\r\n        postsIds.push(rootId);\r\n    }\r\n\r\n    const allPosts = getAllPosts(state);\r\n    const currentUserId = getCurrentUserId(state);\r\n\r\n    for (const postId of postsIds) {\r\n        const post = allPosts[postId];\r\n        if (post?.user_id !== currentUserId || !isPostInteractable(post)) {\r\n            continue;\r\n        }\r\n\r\n        return post.id;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport const getLatestReplyablePostId: (state: GlobalState) => Post['id'] = (state) => getLatestInteractablePostId(state, getCurrentChannelId(state));\r\n\r\n// getPostsInCurrentChannel returns an array of all recent posts loaded at the bottom of the given channel.\r\n// It does not include older posts such as those loaded by viewing a thread or a permalink.\r\nexport const getPostsInCurrentChannel: (state: GlobalState) => Post[] | undefined | null = createSelector(\r\n    'getPostsInCurrentChannel',\r\n    getAllPosts,\r\n    getPostIdsInCurrentChannel,\r\n    getCurrentUser,\r\n    shouldShowJoinLeaveMessages,\r\n    (allPosts, postIds, currentUser, showJoinLeave) => {\r\n        if (!postIds) {\r\n            return null;\r\n        }\r\n\r\n        const posts: Post[] = [];\r\n\r\n        for (let i = 0; i < postIds.length; i++) {\r\n            const post = allPosts[postIds[i]];\r\n\r\n            if (!post || shouldFilterJoinLeavePost(post, showJoinLeave, currentUser ? currentUser.username : '')) {\r\n                continue;\r\n            }\r\n\r\n            posts.push(post);\r\n        }\r\n\r\n        return posts;\r\n    },\r\n);\r\n\r\n// Returns a function that creates a creates a selector that will get the posts for a given thread.\r\n// That selector will take a props object (containing a rootId field) as its\r\n// only argument and will be memoized based on that argument.\r\n\r\nexport function makeGetPostsForThread(): (state: GlobalState, rootId: string) => Post[] {\r\n    return createIdsSelector(\r\n        'makeGetPostsForThread',\r\n        getAllPosts,\r\n        getCurrentUser,\r\n        (state: GlobalState, rootId: string) => state.entities.posts.postsInThread[rootId],\r\n        (state: GlobalState, rootId: string) => state.entities.posts.posts[rootId],\r\n        shouldShowJoinLeaveMessages,\r\n        (posts, currentUser, postsForThread, rootPost, showJoinLeave) => {\r\n            const thread: Post[] = [];\r\n\r\n            if (rootPost) {\r\n                thread.push(rootPost);\r\n            }\r\n\r\n            if (postsForThread && Array.isArray(postsForThread) && postsForThread.length > 0) {\r\n                for (const postId of postsForThread) {\r\n                    const post = posts[postId];\r\n                    if (!post) {\r\n                        continue;\r\n                    }\r\n\r\n                    const skip = shouldFilterJoinLeavePost(post, showJoinLeave, currentUser ? currentUser.username : '');\r\n                    if (!skip) {\r\n                        thread.push(post);\r\n                    }\r\n                }\r\n            }\r\n\r\n            thread.sort(comparePosts);\r\n            return thread;\r\n        },\r\n    );\r\n}\r\n\r\n// The selector below filters current user if it exists. Excluding currentUser is just for convenience\r\nexport function makeGetProfilesForThread(): (state: GlobalState, rootId: string) => UserProfile[] {\r\n    const getPostsForThread = makeGetPostsForThread();\r\n    return createSelector(\r\n        'makeGetProfilesForThread',\r\n        getUsers,\r\n        getCurrentUserId,\r\n        getPostsForThread,\r\n        getUserStatuses,\r\n        (allUsers, currentUserId, posts, userStatuses) => {\r\n            const profileIds = posts.map((post) => post.user_id).filter(Boolean);\r\n            const uniqueIds = [...new Set(profileIds)];\r\n            return uniqueIds.reduce((acc: UserProfile[], id: string) => {\r\n                const profile: UserProfile = userStatuses ? {...allUsers[id], status: userStatuses[id]} : {...allUsers[id]};\r\n\r\n                if (profile && Object.keys(profile).length > 0 && currentUserId !== id) {\r\n                    return [\r\n                        ...acc,\r\n                        profile,\r\n                    ];\r\n                }\r\n                return acc;\r\n            }, []);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetCommentCountForPost(): (state: GlobalState, post: Post) => number {\r\n    return createSelector(\r\n        'makeGetCommentCountForPost',\r\n        getAllPosts,\r\n        (state: GlobalState, post: Post) => state.entities.posts.postsInThread[post ? post.root_id || post.id : ''] || null,\r\n        (state, post: Post) => post,\r\n        (posts, postsForThread, post) => {\r\n            if (!post) {\r\n                return 0;\r\n            }\r\n\r\n            if (!postsForThread) {\r\n                return post.reply_count;\r\n            }\r\n\r\n            let count = 0;\r\n            postsForThread.forEach((id) => {\r\n                const post = posts[id];\r\n                if (post && post.state !== Posts.POST_DELETED && !isPostEphemeral(post)) {\r\n                    count += 1;\r\n                }\r\n            });\r\n            return count;\r\n        },\r\n    );\r\n}\r\n\r\nexport const getSearchResults: (state: GlobalState) => Post[] = createSelector(\r\n    'getSearchResults',\r\n    getAllPosts,\r\n    (state: GlobalState) => state.entities.search.results,\r\n    (posts, postIds) => {\r\n        if (!postIds) {\r\n            return [];\r\n        }\r\n\r\n        // Filter out posts that may no longer exist\r\n        return postIds.map((id) => posts[id]).filter((post) => post);\r\n    },\r\n);\r\n\r\n// Returns the matched text from the search results, if the server has provided them.\r\n// These matches will only be present if the server is running Mattermost 5.1 or higher\r\n// with Elasticsearch enabled to search posts. Otherwise, null will be returned.\r\nexport function getSearchMatches(state: GlobalState): {\r\n    [x: string]: string[];\r\n} {\r\n    return state.entities.search.matches;\r\n}\r\n\r\nexport function makeGetMessageInHistoryItem(type: 'post'|'comment'): (state: GlobalState) => string {\r\n    return createSelector(\r\n        'makeGetMessageInHistoryItem',\r\n        (state: GlobalState) => state.entities.posts.messagesHistory,\r\n        (messagesHistory: MessageHistory) => {\r\n            const idx = messagesHistory.index[type];\r\n            const messages = messagesHistory.messages;\r\n            if (idx >= 0 && messages && messages.length > idx) {\r\n                return messages[idx];\r\n            }\r\n            return '';\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetPostsForIds(): (state: GlobalState, postIds: Array<Post['id']>) => Post[] {\r\n    return createIdsSelector(\r\n        'makeGetPostsForIds',\r\n        getAllPosts,\r\n        (state: GlobalState, postIds: Array<Post['id']>) => postIds,\r\n        (allPosts, postIds) => {\r\n            if (!postIds) {\r\n                return [];\r\n            }\r\n\r\n            return postIds.map((id) => allPosts[id]);\r\n        },\r\n    );\r\n}\r\n\r\nexport const getMostRecentPostIdInChannel: (state: GlobalState, channelId: Channel['id']) => Post['id'] | undefined | null = createSelector(\r\n    'getMostRecentPostIdInChannel',\r\n    getAllPosts,\r\n    (state: GlobalState, channelId: string) => getPostIdsInChannel(state, channelId),\r\n    shouldShowJoinLeaveMessages,\r\n    (posts, postIdsInChannel, allowSystemMessages) => {\r\n        if (!postIdsInChannel) {\r\n            return '';\r\n        }\r\n\r\n        if (!allowSystemMessages) {\r\n            // return the most recent non-system message in the channel\r\n            let postId;\r\n            for (let i = 0; i < postIdsInChannel.length; i++) {\r\n                const p = posts[postIdsInChannel[i]];\r\n                if (!p.type || !p.type.startsWith(Posts.SYSTEM_MESSAGE_PREFIX)) {\r\n                    postId = p.id;\r\n                    break;\r\n                }\r\n            }\r\n            return postId;\r\n        }\r\n\r\n        // return the most recent message in the channel\r\n        return postIdsInChannel[0];\r\n    },\r\n);\r\n\r\nexport function getRecentPostsChunkInChannel(state: GlobalState, channelId: Channel['id']): PostOrderBlock | null | undefined {\r\n    const postsForChannel = state.entities.posts.postsInChannel[channelId];\r\n\r\n    if (!postsForChannel) {\r\n        return null;\r\n    }\r\n\r\n    return postsForChannel.find((block) => block.recent);\r\n}\r\n\r\nexport function getOldestPostsChunkInChannel(state: GlobalState, channelId: Channel['id']): PostOrderBlock | null | undefined {\r\n    const postsForChannel = state.entities.posts.postsInChannel[channelId];\r\n\r\n    if (!postsForChannel) {\r\n        return null;\r\n    }\r\n\r\n    return postsForChannel.find((block) => block.oldest);\r\n}\r\n\r\n// returns timestamp of the channel's oldest post. 0 otherwise\r\nexport function getOldestPostTimeInChannel(state: GlobalState, channelId: Channel['id']): number {\r\n    const postsForChannel = state.entities.posts.postsInChannel[channelId];\r\n\r\n    if (!postsForChannel) {\r\n        return 0;\r\n    }\r\n\r\n    const allPosts = getAllPosts(state);\r\n    const oldestPostTime = postsForChannel.reduce((acc: number, postBlock) => {\r\n        if (postBlock.order.length > 0) {\r\n            const oldestPostIdInBlock = postBlock.order[postBlock.order.length - 1];\r\n            const blockOldestPostTime = allPosts[oldestPostIdInBlock]?.create_at;\r\n            if (typeof blockOldestPostTime === 'number' && blockOldestPostTime < acc) {\r\n                return blockOldestPostTime;\r\n            }\r\n        }\r\n        return acc;\r\n    }, Number.MAX_SAFE_INTEGER);\r\n    if (oldestPostTime === Number.MAX_SAFE_INTEGER) {\r\n        return 0;\r\n    }\r\n    return oldestPostTime;\r\n}\r\n\r\n// getPostIdsInChannel returns the IDs of posts loaded at the bottom of the given channel. It does not include older\r\n// posts such as those loaded by viewing a thread or a permalink.\r\nexport function getPostIdsInChannel(state: GlobalState, channelId: Channel['id']): Array<Post['id']> | undefined | null {\r\n    const recentBlock = getRecentPostsChunkInChannel(state, channelId);\r\n\r\n    if (!recentBlock) {\r\n        return null;\r\n    }\r\n\r\n    return recentBlock.order;\r\n}\r\n\r\nexport function getPostsChunkInChannelAroundTime(state: GlobalState, channelId: Channel['id'], timeStamp: number): PostOrderBlock | undefined | null {\r\n    const postsEntity = state.entities.posts;\r\n    const postsForChannel = postsEntity.postsInChannel[channelId];\r\n    const posts = postsEntity.posts;\r\n    if (!postsForChannel) {\r\n        return null;\r\n    }\r\n\r\n    const blockAroundTimestamp = postsForChannel.find((block) => {\r\n        const {order} = block;\r\n        const recentPostInBlock = posts[order[0]];\r\n        const oldestPostInBlock = posts[order[order.length - 1]];\r\n        if (recentPostInBlock && oldestPostInBlock) {\r\n            return (recentPostInBlock.create_at >= timeStamp && oldestPostInBlock.create_at <= timeStamp);\r\n        }\r\n        return false;\r\n    });\r\n\r\n    return blockAroundTimestamp;\r\n}\r\n\r\nexport function getUnreadPostsChunk(state: GlobalState, channelId: Channel['id'], timeStamp: number): PostOrderBlock | undefined | null {\r\n    const postsEntity = state.entities.posts;\r\n    const posts = postsEntity.posts;\r\n    const recentChunk = getRecentPostsChunkInChannel(state, channelId);\r\n\r\n    /* 1. lastViewedAt can be greater than the most recent chunk in case of edited posts etc.\r\n          * return if recent block exists and oldest post is created after the last lastViewedAt timestamp\r\n          i.e all posts are read and the lastViewedAt is greater than the last post\r\n\r\n       2. lastViewedAt can be less than the first post in a channel if all the last viewed posts are deleted\r\n          * return if oldest block exist and oldest post created_at is greater than the last viewed post\r\n          i.e all posts are unread so the lastViewedAt is lessthan the first post\r\n\r\n      The above two exceptions are added because we cannot select the chunk based on timestamp alone as these cases are out of bounds\r\n\r\n      3. Normal cases where there are few unreads and few reads in a chunk as that is how unread API returns data\r\n          * return getPostsChunkInChannelAroundTime\r\n    */\r\n\r\n    if (recentChunk) {\r\n        // This would happen if there are no posts in channel.\r\n        // If the system messages are deleted by sys admin.\r\n        // Experimental changes like hiding Join/Leave still will have recent chunk so it follows the default path based on timestamp\r\n        if (!recentChunk.order.length) {\r\n            return recentChunk;\r\n        }\r\n\r\n        const {order} = recentChunk;\r\n        const oldestPostInBlock = posts[order[order.length - 1]];\r\n\r\n        // check for only oldest posts because this can be higher than the latest post if the last post is edited\r\n        if (oldestPostInBlock.create_at <= timeStamp) {\r\n            return recentChunk;\r\n        }\r\n    }\r\n\r\n    const oldestPostsChunk = getOldestPostsChunkInChannel(state, channelId);\r\n\r\n    if (oldestPostsChunk && oldestPostsChunk.order.length) {\r\n        const {order} = oldestPostsChunk;\r\n        const oldestPostInBlock = posts[order[order.length - 1]];\r\n\r\n        if (oldestPostInBlock.create_at >= timeStamp) {\r\n            return oldestPostsChunk;\r\n        }\r\n    }\r\n\r\n    return getPostsChunkInChannelAroundTime(state, channelId, timeStamp);\r\n}\r\n\r\nexport const isPostsChunkIncludingUnreadsPosts = (state: GlobalState, chunk: PostOrderBlock, timeStamp: number): boolean => {\r\n    const postsEntity = state.entities.posts;\r\n    const posts = postsEntity.posts;\r\n\r\n    if (!chunk || !chunk.order.length) {\r\n        return false;\r\n    }\r\n\r\n    const {order} = chunk;\r\n    const oldestPostInBlock = posts[order[order.length - 1]];\r\n\r\n    return oldestPostInBlock.create_at <= timeStamp;\r\n};\r\n\r\nexport const isPostIdSending = (state: GlobalState, postId: Post['id']): boolean => {\r\n    return state.entities.posts.pendingPostIds.some((sendingPostId) => sendingPostId === postId);\r\n};\r\n\r\nexport const makeIsPostCommentMention = (): ((state: GlobalState, postId: Post['id']) => boolean) => {\r\n    return createSelector(\r\n        'makeIsPostCommentMention',\r\n        getAllPosts,\r\n        getPostsInThread,\r\n        getCurrentUser,\r\n        getPost,\r\n        (allPosts, postsInThread, currentUser, post) => {\r\n            if (!post) {\r\n                return false;\r\n            }\r\n\r\n            let threadRepliedToByCurrentUser = false;\r\n            let isCommentMention = false;\r\n            if (currentUser) {\r\n                const rootId = post.root_id || post.id;\r\n                const threadIds = postsInThread[rootId] || [];\r\n\r\n                for (const pid of threadIds) {\r\n                    const p = allPosts[pid];\r\n                    if (!p) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (p.user_id === currentUser.id) {\r\n                        threadRepliedToByCurrentUser = true;\r\n                    }\r\n                }\r\n\r\n                const rootPost = allPosts[rootId];\r\n\r\n                isCommentMention = isPostCommentMention({post, currentUser, threadRepliedToByCurrentUser, rootPost});\r\n            }\r\n\r\n            return isCommentMention;\r\n        },\r\n    );\r\n};\r\n\r\nexport function getLimitedViews(state: GlobalState): GlobalState['entities']['posts']['limitedViews'] {\r\n    return state.entities.posts.limitedViews;\r\n}\r\n\r\nexport function isPostPriorityEnabled(state: GlobalState) {\r\n    return getConfig(state).PostPriority === 'true';\r\n}\r\n\r\nexport function isPostAcknowledgementsEnabled(state: GlobalState) {\r\n    return (\r\n        isPostPriorityEnabled(state) &&\r\n        getConfig(state).PostAcknowledgements === 'true'\r\n    );\r\n}\r\n\r\nexport function getAllowPersistentNotifications(state: GlobalState) {\r\n    return (\r\n        isPostPriorityEnabled(state) &&\r\n        getConfig(state).AllowPersistentNotifications === 'true'\r\n    );\r\n}\r\n\r\nexport function getPersistentNotificationMaxRecipients(state: GlobalState) {\r\n    return getConfig(state).PersistentNotificationMaxRecipients;\r\n}\r\n\r\nexport function getPersistentNotificationIntervalMinutes(state: GlobalState) {\r\n    return getConfig(state).PersistentNotificationIntervalMinutes;\r\n}\r\n\r\nexport function getAllowPersistentNotificationsForGuests(state: GlobalState) {\r\n    return (\r\n        isPostPriorityEnabled(state) &&\r\n        getConfig(state).AllowPersistentNotificationsForGuests === 'true'\r\n    );\r\n}\r\n\r\nexport function getPostAcknowledgements(state: GlobalState, postId: Post['id']): Record<UserProfile['id'], PostAcknowledgement['acknowledged_at']> {\r\n    return state.entities.posts.acknowledgements[postId];\r\n}\r\n\r\nexport const isPersistentNotificationsEnabled = createSelector(\r\n    'getPersistentNotificationsEnabled',\r\n    getCurrentUser,\r\n    getAllowPersistentNotifications,\r\n    getAllowPersistentNotificationsForGuests,\r\n    (user, forAll, forGuests) => (isGuest(user.roles) ? (forAll && forGuests) : forAll),\r\n);\r\n\r\nexport function makeGetPostAcknowledgementsWithProfiles(): (state: GlobalState, postId: Post['id']) => Array<{user: UserProfile; acknowledgedAt: PostAcknowledgement['acknowledged_at']}> {\r\n    return createSelector(\r\n        'makeGetPostAcknowledgementsWithProfiles',\r\n        getUsers,\r\n        getPostAcknowledgements,\r\n        (users, acknowledgements) => {\r\n            if (!acknowledgements) {\r\n                return [];\r\n            }\r\n            return Object.keys(acknowledgements).flatMap((userId) => {\r\n                if (!users[userId]) {\r\n                    return [];\r\n                }\r\n                return {\r\n                    user: users[userId],\r\n                    acknowledgedAt: acknowledgements[userId],\r\n                };\r\n            }).sort((a, b) => b.acknowledgedAt - a.acknowledgedAt);\r\n        },\r\n    );\r\n}\r\n\r\nexport function getTeamIdFromPost(state: GlobalState, post: Post): Team['id'] | undefined {\r\n    const channel = getChannel(state, post.channel_id);\r\n\r\n    if (!channel) {\r\n        return undefined;\r\n    }\r\n\r\n    if (channel.type === General.DM_CHANNEL || channel.type === General.GM_CHANNEL) {\r\n        return getCurrentTeamId(state);\r\n    }\r\n\r\n    return channel.team_id;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {CollapsedThreads} from '@mattermost/types/config';\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {General, Preferences} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getConfig, getFeatureFlagValue, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {createIdsSelector, createShallowSelector} from 'mattermost-redux/utils/helpers';\r\nimport {getPreferenceKey} from 'mattermost-redux/utils/preference_utils';\r\nimport {setThemeDefaults} from 'mattermost-redux/utils/theme_utils';\r\n\r\nexport function getMyPreferences(state: GlobalState): { [x: string]: PreferenceType } {\r\n    return state.entities.preferences.myPreferences;\r\n}\r\n\r\nexport function getUserPreferences(state: GlobalState, userID: string): PreferencesType {\r\n    return state.entities.preferences.userPreferences[userID];\r\n}\r\n\r\nfunction getPreferenceObject(state: GlobalState, category: string, name: string): PreferenceType | undefined {\r\n    return getMyPreferences(state)[getPreferenceKey(category, name)];\r\n}\r\n\r\nexport function get(state: GlobalState, category: string, name: string, defaultValue = '', preferences?: PreferencesType): string {\r\n    if (preferences) {\r\n        return getFromPreferences(preferences, category, name, defaultValue);\r\n    }\r\n\r\n    const pref = getPreferenceObject(state, category, name);\r\n\r\n    return pref ? pref.value : defaultValue;\r\n}\r\n\r\nexport function getFromPreferences(preferences: PreferencesType, category: string, name: string, defaultValue: any = '') {\r\n    const key = getPreferenceKey(category, name);\r\n\r\n    if (!(key in preferences)) {\r\n        return defaultValue;\r\n    }\r\n\r\n    return preferences[key].value;\r\n}\r\n\r\nexport function getBool(state: GlobalState, category: string, name: string, defaultValue = false, userPreferences?: PreferencesType): boolean {\r\n    const value = get(state, category, name, String(defaultValue), userPreferences);\r\n    return value !== 'false';\r\n}\r\n\r\nexport function getInt(state: GlobalState, category: string, name: string, defaultValue = 0, userPreferences?: PreferencesType): number {\r\n    const value = get(state, category, name, String(defaultValue), userPreferences);\r\n    return parseInt(value, 10);\r\n}\r\n\r\nexport function makeGetCategory(selectorName: string, category: string): (state: GlobalState) => PreferenceType[] {\r\n    return createIdsSelector(\r\n        selectorName,\r\n        getMyPreferences,\r\n        (preferences) => {\r\n            const prefix = category + '--';\r\n            const prefsInCategory: PreferenceType[] = [];\r\n\r\n            for (const key in preferences) {\r\n                if (key.startsWith(prefix)) {\r\n                    prefsInCategory.push(preferences[key]);\r\n                }\r\n            }\r\n\r\n            return prefsInCategory;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetUserCategory(selectorName: string, category: string): (state: GlobalState, userID: string) => PreferenceType[] {\r\n    return createIdsSelector(\r\n        selectorName,\r\n        (state: GlobalState, userID: string) => getUserPreferences(state, userID),\r\n        (preferences) => {\r\n            const prefix = category + '--';\r\n            const prefsInCategory: PreferenceType[] = [];\r\n\r\n            for (const key in preferences) {\r\n                if (key.startsWith(prefix)) {\r\n                    prefsInCategory.push(preferences[key]);\r\n                }\r\n            }\r\n\r\n            return prefsInCategory;\r\n        },\r\n    );\r\n}\r\n\r\nexport const getDirectShowPreferences = makeGetCategory('getDirectShowPreferences', Preferences.CATEGORY_DIRECT_CHANNEL_SHOW);\r\nexport const getGroupShowPreferences = makeGetCategory('getGroupShowPreferences', Preferences.CATEGORY_GROUP_CHANNEL_SHOW);\r\n\r\nexport const getTeammateNameDisplaySetting: (state: GlobalState) => string = createSelector(\r\n    'getTeammateNameDisplaySetting',\r\n    getConfig,\r\n    (state) => getPreferenceObject(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.NAME_NAME_FORMAT),\r\n    getLicense,\r\n    (config, teammateNameDisplayPreference, license) => {\r\n        const useAdminTeammateNameDisplaySetting = (license && license.LockTeammateNameDisplay === 'true') && config.LockTeammateNameDisplay === 'true';\r\n        if (teammateNameDisplayPreference && !useAdminTeammateNameDisplaySetting) {\r\n            return teammateNameDisplayPreference.value || '';\r\n        } else if (config.TeammateNameDisplay) {\r\n            return config.TeammateNameDisplay;\r\n        }\r\n        return General.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME;\r\n    },\r\n);\r\n\r\nexport const getThemePreferences = makeGetCategory('getThemePreferences', Preferences.CATEGORY_THEME);\r\n\r\nconst getThemePreference = createSelector(\r\n    'getThemePreference',\r\n    getMyPreferences,\r\n    (state) => state.entities.teams.currentTeamId,\r\n    (myPreferences, currentTeamId) => {\r\n        // Prefer the user's current team-specific theme over the user's current global theme\r\n        let themePreference;\r\n\r\n        if (currentTeamId) {\r\n            themePreference = myPreferences[getPreferenceKey(Preferences.CATEGORY_THEME, currentTeamId)];\r\n        }\r\n\r\n        if (!themePreference) {\r\n            themePreference = myPreferences[getPreferenceKey(Preferences.CATEGORY_THEME, '')];\r\n        }\r\n\r\n        return themePreference;\r\n    },\r\n);\r\n\r\nexport type ThemeKey = 'denim' | 'sapphire' | 'quartz' | 'indigo' | 'onyx';\r\n\r\nexport type LegacyThemeType = 'Mattermost' | 'Organization' | 'Mattermost Dark' | 'Windows Dark';\r\n\r\nexport type ThemeType = 'Denim' | 'Sapphire' | 'Quartz' | 'Indigo' | 'Onyx';\r\n\r\nexport type Theme = {\r\n    [key: string]: string | undefined;\r\n    type?: ThemeType | 'custom';\r\n    sidebarBg: string;\r\n    sidebarText: string;\r\n    sidebarUnreadText: string;\r\n    sidebarTextHoverBg: string;\r\n    sidebarTextActiveBorder: string;\r\n    sidebarTextActiveColor: string;\r\n    sidebarHeaderBg: string;\r\n    sidebarTeamBarBg: string;\r\n    sidebarHeaderTextColor: string;\r\n    onlineIndicator: string;\r\n    awayIndicator: string;\r\n    dndIndicator: string;\r\n    mentionBg: string;\r\n    mentionBj: string;\r\n    mentionColor: string;\r\n    centerChannelBg: string;\r\n    centerChannelColor: string;\r\n    newMessageSeparator: string;\r\n    linkColor: string;\r\n    buttonBg: string;\r\n    buttonColor: string;\r\n    errorTextColor: string;\r\n    mentionHighlightBg: string;\r\n    mentionHighlightLink: string;\r\n    codeTheme: string;\r\n};\r\n\r\nconst getDefaultTheme = createSelector('getDefaultTheme', getConfig, (config): Theme => {\r\n    if (config.DefaultTheme && config.DefaultTheme in Preferences.THEMES) {\r\n        const theme: Theme = Preferences.THEMES[config.DefaultTheme as ThemeKey];\r\n        if (theme) {\r\n            return theme;\r\n        }\r\n    }\r\n\r\n    // If no config.DefaultTheme or value doesn't refer to a valid theme name...\r\n    return Preferences.THEMES.denim;\r\n});\r\n\r\nexport const getTheme: (state: GlobalState) => Theme = createShallowSelector(\r\n    'getTheme',\r\n    getThemePreference,\r\n    getDefaultTheme,\r\n    (themePreference, defaultTheme): Theme => {\r\n        const themeValue: Theme | string = themePreference?.value ?? defaultTheme;\r\n\r\n        // A custom theme will be a JSON-serialized object stored in a preference\r\n        // At this point, the theme should be a plain object\r\n        const theme: Theme = typeof themeValue === 'string' ? JSON.parse(themeValue) : themeValue;\r\n\r\n        return setThemeDefaults(theme);\r\n    },\r\n);\r\n\r\nexport function makeGetStyleFromTheme<Style>(): (state: GlobalState, getStyleFromTheme: (theme: Theme) => Style) => Style {\r\n    return createSelector(\r\n        'makeGetStyleFromTheme',\r\n        getTheme,\r\n        (state: GlobalState, getStyleFromTheme: (theme: Theme) => Style) => getStyleFromTheme,\r\n        (theme, getStyleFromTheme) => {\r\n            return getStyleFromTheme(theme);\r\n        },\r\n    );\r\n}\r\n\r\nexport function shouldShowJoinLeaveMessages(state: GlobalState) {\r\n    const config = getConfig(state);\r\n    const enableJoinLeaveMessage = config.EnableJoinLeaveMessageByDefault === 'true';\r\n\r\n    // This setting is true or not set if join/leave messages are to be displayed\r\n    return getBool(state, Preferences.CATEGORY_ADVANCED_SETTINGS, Preferences.ADVANCED_FILTER_JOIN_LEAVE, enableJoinLeaveMessage);\r\n}\r\n\r\n// shouldShowUnreadsCategory returns true if the user has unereads grouped separately with the new sidebar enabled.\r\nexport const shouldShowUnreadsCategory: (state: GlobalState, userPreferences?: PreferencesType) => boolean = createSelector(\r\n    'shouldShowUnreadsCategory',\r\n    (state: GlobalState, userPreferences?: PreferencesType) => get(state, Preferences.CATEGORY_SIDEBAR_SETTINGS, Preferences.SHOW_UNREAD_SECTION, '', userPreferences),\r\n    (state: GlobalState, userPreferences?: PreferencesType) => get(state, Preferences.CATEGORY_SIDEBAR_SETTINGS, '', '', userPreferences),\r\n    (state: GlobalState) => getConfig(state).ExperimentalGroupUnreadChannels,\r\n    (userPreference: string, oldUserPreference: string, serverDefault?: string): boolean => {\r\n        // Prefer the show_unread_section user preference over the previous version\r\n        if (userPreference) {\r\n            return userPreference === 'true';\r\n        }\r\n\r\n        if (oldUserPreference) {\r\n            return JSON.parse(oldUserPreference).unreads_at_top === 'true';\r\n        }\r\n\r\n        // The user setting is not set, so use the system default\r\n        return serverDefault === General.DEFAULT_ON;\r\n    },\r\n);\r\n\r\nexport function getUnreadScrollPositionPreference(state: GlobalState, userPreferences?: PreferencesType): string {\r\n    return get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, Preferences.UNREAD_SCROLL_POSITION, Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT, userPreferences);\r\n}\r\n\r\nexport function getCollapsedThreadsPreference(state: GlobalState): string {\r\n    const configValue = getConfig(state)?.CollapsedThreads;\r\n    let preferenceDefault = Preferences.COLLAPSED_REPLY_THREADS_OFF;\r\n\r\n    if (configValue === CollapsedThreads.DEFAULT_ON || configValue === CollapsedThreads.ALWAYS_ON) {\r\n        preferenceDefault = Preferences.COLLAPSED_REPLY_THREADS_ON;\r\n    }\r\n\r\n    return get(\r\n        state,\r\n        Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n        Preferences.COLLAPSED_REPLY_THREADS,\r\n        preferenceDefault,\r\n    );\r\n}\r\n\r\nexport function getCollapsedThreadsPreferenceFromPreferences(state: GlobalState, userPreferences: PreferencesType): string {\r\n    const configValue = getConfig(state)?.CollapsedThreads;\r\n    let preferenceDefault = Preferences.COLLAPSED_REPLY_THREADS_OFF;\r\n\r\n    if (configValue === CollapsedThreads.DEFAULT_ON || configValue === CollapsedThreads.ALWAYS_ON) {\r\n        preferenceDefault = Preferences.COLLAPSED_REPLY_THREADS_ON;\r\n    }\r\n\r\n    return getFromPreferences(\r\n        userPreferences,\r\n        Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n        Preferences.COLLAPSED_REPLY_THREADS,\r\n        preferenceDefault,\r\n    );\r\n}\r\n\r\nexport function isCollapsedThreadsAllowed(state: GlobalState): boolean {\r\n    return Boolean(getConfig(state)) && getConfig(state).CollapsedThreads !== undefined && getConfig(state).CollapsedThreads !== CollapsedThreads.DISABLED;\r\n}\r\n\r\nexport function isCollapsedThreadsEnabled(state: GlobalState): boolean {\r\n    const isAllowed = isCollapsedThreadsAllowed(state);\r\n    const userPreference = getCollapsedThreadsPreference(state);\r\n\r\n    return isAllowed && (userPreference === Preferences.COLLAPSED_REPLY_THREADS_ON || getConfig(state).CollapsedThreads === CollapsedThreads.ALWAYS_ON);\r\n}\r\n\r\nexport function isCollapsedThreadsEnabledForUser(state: GlobalState, userPreferences: PreferencesType): boolean {\r\n    const isAllowed = isCollapsedThreadsAllowed(state);\r\n    const userPreference = getCollapsedThreadsPreferenceFromPreferences(state, userPreferences);\r\n\r\n    return isAllowed && (userPreference === Preferences.COLLAPSED_REPLY_THREADS_ON || getConfig(state).CollapsedThreads === CollapsedThreads.ALWAYS_ON);\r\n}\r\n\r\nexport function isGroupChannelManuallyVisible(state: GlobalState, channelId: string): boolean {\r\n    return getBool(state, Preferences.CATEGORY_GROUP_CHANNEL_SHOW, channelId, false);\r\n}\r\n\r\nexport function isCustomGroupsEnabled(state: GlobalState): boolean {\r\n    return getConfig(state).EnableCustomGroups === 'true';\r\n}\r\n\r\nexport function getIsOnboardingFlowEnabled(state: GlobalState): boolean {\r\n    return getConfig(state).EnableOnboardingFlow === 'true';\r\n}\r\n\r\nexport function getHasDismissedSystemConsoleLimitReached(state: GlobalState): boolean {\r\n    return getBool(state, Preferences.CATEGORY_UPGRADE_CLOUD, Preferences.SYSTEM_CONSOLE_LIMIT_REACHED, false);\r\n}\r\n\r\nexport function syncedDraftsAreAllowed(state: GlobalState): boolean {\r\n    return getConfig(state).AllowSyncedDrafts === 'true';\r\n}\r\n\r\nexport function syncedDraftsAreAllowedAndEnabled(state: GlobalState): boolean {\r\n    const isConfiguredForFeature = getConfig(state).AllowSyncedDrafts === 'true';\r\n    const isConfiguredForUser = getBool(state, Preferences.CATEGORY_ADVANCED_SETTINGS, Preferences.ADVANCED_SYNC_DRAFTS, true);\r\n\r\n    return isConfiguredForFeature && isConfiguredForUser;\r\n}\r\n\r\nexport function getVisibleDmGmLimit(state: GlobalState, userPreferences?: PreferencesType) {\r\n    const defaultLimit = 40;\r\n    return getInt(state, Preferences.CATEGORY_SIDEBAR_SETTINGS, Preferences.LIMIT_VISIBLE_DMS_GMS, defaultLimit, userPreferences);\r\n}\r\n\r\nexport function onboardingTourTipsEnabled(state: GlobalState): boolean {\r\n    return getFeatureFlagValue(state, 'OnboardingTourTips') === 'true';\r\n}\r\n\r\nexport function moveThreadsEnabled(state: GlobalState): boolean {\r\n    return getFeatureFlagValue(state, 'MoveThreadsEnabled') === 'true' && getLicense(state).IsLicensed === 'true';\r\n}\r\n\r\nexport function streamlinedMarketplaceEnabled(state: GlobalState): boolean {\r\n    return getFeatureFlagValue(state, 'StreamlinedMarketplace') === 'true';\r\n}\r\n\r\nexport const getOverageBannerPreferences = makeGetCategory('getOverageBannerPreferences', Preferences.CATEGORY_OVERAGE_USERS_BANNER);\r\nexport const getPostHistoryLimitBannerPreferences = makeGetCategory('getPostHistoryLimitBannerPreferences', Preferences.CATEGORY_POST_HISTORY_LIMIT_BANNER);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {GroupMembership, GroupPermissions} from '@mattermost/types/groups';\r\nimport type {Role} from '@mattermost/types/roles';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {General, Permissions} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getCurrentChannelId, getCurrentUserId} from 'mattermost-redux/selectors/entities/common';\r\nimport type {PermissionsOptions} from 'mattermost-redux/selectors/entities/roles_helpers';\r\nimport {\r\n    getMySystemPermissions as getMySystemPermissionsInternal,\r\n    getMySystemRoles as getMySystemRolesInternal,\r\n    getPermissionsForRoles,\r\n    getRoles as getRolesInternal,\r\n    haveISystemPermission as haveISystemPermissionInternal,\r\n} from 'mattermost-redux/selectors/entities/roles_helpers';\r\nimport {getTeamMemberships, getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\r\nimport {isSyncableSource} from 'mattermost-redux/utils/group_utils';\r\n\r\n// Re-define these types to ensure that these are typed correctly when mattermost-redux is published\r\nexport const getMySystemPermissions: (state: GlobalState) => Set<string> = getMySystemPermissionsInternal;\r\nexport const getMySystemRoles: (state: GlobalState) => Set<string> = getMySystemRolesInternal;\r\nexport const getRoles: (state: GlobalState) => Record<string, Role> = getRolesInternal;\r\nexport const haveISystemPermission: (state: GlobalState, options: PermissionsOptions) => boolean = haveISystemPermissionInternal;\r\n\r\nexport const getGroupMemberships: (state: GlobalState) => Record<string, GroupMembership> = createSelector(\r\n    'getGroupMemberships',\r\n    (state) => state.entities.groups.myGroups,\r\n    getCurrentUserId,\r\n    (myGroupIDs: string[], currentUserID: string) => {\r\n        const groupMemberships: Record<string, GroupMembership> = {};\r\n        myGroupIDs.forEach((groupID) => {\r\n            groupMemberships[groupID] = {user_id: currentUserID, roles: General.CUSTOM_GROUP_USER_ROLE};\r\n        });\r\n        return groupMemberships;\r\n    },\r\n);\r\n\r\nexport const getMyGroupRoles: (state: GlobalState) => Record<string, Set<string>> = createSelector(\r\n    'getMyGroupRoles',\r\n    getGroupMemberships,\r\n    (groupMemberships) => {\r\n        const roles: Record<string, Set<string>> = {};\r\n        if (groupMemberships) {\r\n            for (const key in groupMemberships) {\r\n                if (Object.hasOwn(groupMemberships, key) && groupMemberships[key].roles) {\r\n                    roles[key] = new Set<string>(groupMemberships[key].roles.split(' '));\r\n                }\r\n            }\r\n        }\r\n        return roles;\r\n    },\r\n);\r\n\r\n/**\r\n * Returns a map of permissions, keyed by group id, for all groups that are mentionable and not deleted.\r\n */\r\nexport const getGroupListPermissions: (state: GlobalState) => Record<string, GroupPermissions> = createSelector(\r\n    'getGroupListPermissions',\r\n    getMyGroupRoles,\r\n    getRoles,\r\n    getMySystemPermissions,\r\n    (state) => state.entities.groups.groups,\r\n    (myGroupRoles, roles, systemPermissions, allGroups) => {\r\n        const groups = Object.entries(allGroups).filter((entry) => (entry[1].allow_reference)).map((entry) => entry[1]);\r\n\r\n        const permissions = new Set<string>();\r\n        groups.forEach((group) => {\r\n            const roleNames = myGroupRoles[group.id!];\r\n            if (roleNames) {\r\n                for (const roleName of roleNames) {\r\n                    if (roles[roleName]) {\r\n                        for (const permission of roles[roleName].permissions) {\r\n                            permissions.add(permission);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        for (const permission of systemPermissions) {\r\n            permissions.add(permission);\r\n        }\r\n\r\n        const groupPermissionsMap: Record<string, GroupPermissions> = {};\r\n        groups.forEach((g) => {\r\n            groupPermissionsMap[g.id] = {\r\n                can_delete: permissions.has(Permissions.DELETE_CUSTOM_GROUP) && !isSyncableSource(g.source) && g.delete_at === 0,\r\n                can_manage_members: permissions.has(Permissions.MANAGE_CUSTOM_GROUP_MEMBERS) && !isSyncableSource(g.source) && g.delete_at === 0,\r\n                can_restore: permissions.has(Permissions.RESTORE_CUSTOM_GROUP) && !isSyncableSource(g.source) && g.delete_at !== 0,\r\n            };\r\n        });\r\n        return groupPermissionsMap;\r\n    },\r\n);\r\n\r\nexport const getMyTeamRoles: (state: GlobalState) => Record<string, Set<string>> = createSelector(\r\n    'getMyTeamRoles',\r\n    getTeamMemberships,\r\n    (teamsMemberships) => {\r\n        const roles: Record<string, Set<string>> = {};\r\n        if (teamsMemberships) {\r\n            for (const key in teamsMemberships) {\r\n                if (Object.hasOwn(teamsMemberships, key) && teamsMemberships[key].roles) {\r\n                    roles[key] = new Set<string>(teamsMemberships[key].roles.split(' '));\r\n                }\r\n            }\r\n        }\r\n        return roles;\r\n    },\r\n);\r\n\r\nexport function getMyChannelRoles(state: GlobalState): Record<string, Set<string>> {\r\n    return state.entities.channels.roles;\r\n}\r\n\r\nexport const getRolesById: (state: GlobalState) => Record<string, Role> = createSelector(\r\n    'getRolesById',\r\n    getRoles,\r\n    (rolesByName) => {\r\n        const rolesById: Record<string, Role> = {};\r\n        for (const role of Object.values(rolesByName)) {\r\n            rolesById[role.id] = role;\r\n        }\r\n        return rolesById;\r\n    },\r\n);\r\n\r\nconst getMyPermissionsByTeam = createSelector(\r\n    'getMyPermissionsByTeam',\r\n    getMyTeamRoles,\r\n    getRoles,\r\n    (myTeamRoles, allRoles) => {\r\n        const permissionsByTeam: Record<string, Set<string>> = {};\r\n\r\n        for (const [teamId, roles] of Object.entries(myTeamRoles)) {\r\n            permissionsByTeam[teamId] = getPermissionsForRoles(allRoles, roles);\r\n        }\r\n\r\n        return permissionsByTeam;\r\n    },\r\n);\r\n\r\nconst getMyPermissionsByGroup = createSelector(\r\n    'getMyPermissionsByGroup',\r\n    getMyGroupRoles,\r\n    getRoles,\r\n    (myGroupRoles, allRoles) => {\r\n        const permissionsByGroup: Record<string, Set<string>> = {};\r\n\r\n        for (const [groupId, roles] of Object.entries(myGroupRoles)) {\r\n            permissionsByGroup[groupId] = getPermissionsForRoles(allRoles, roles);\r\n        }\r\n\r\n        return permissionsByGroup;\r\n    },\r\n);\r\n\r\nconst getMyPermissionsByChannel = createSelector(\r\n    'getMyPermissionsByChannel',\r\n    getMyChannelRoles,\r\n    getRoles,\r\n    (myChannelRoles, allRoles) => {\r\n        const permissionsByChannel: Record<string, Set<string>> = {};\r\n\r\n        for (const [channelId, roles] of Object.entries(myChannelRoles)) {\r\n            permissionsByChannel[channelId] = getPermissionsForRoles(allRoles, roles);\r\n        }\r\n\r\n        return permissionsByChannel;\r\n    },\r\n);\r\n\r\nexport function haveITeamPermission(state: GlobalState, teamId: string | undefined, permission: string) {\r\n    if (getMySystemPermissions(state).has(permission)) {\r\n        return true;\r\n    }\r\n    if (!teamId) {\r\n        return false;\r\n    }\r\n\r\n    return getMyPermissionsByTeam(state)[teamId]?.has(permission);\r\n}\r\n\r\nexport const haveIGroupPermission: (state: GlobalState, groupID: string, permission: string) => boolean = createSelector(\r\n    'haveIGroupPermission',\r\n    getMySystemPermissions,\r\n    getMyPermissionsByGroup,\r\n    (state: GlobalState, groupID: string) => state.entities.groups.groups[groupID],\r\n    (state: GlobalState, groupID: string, permission: string) => permission,\r\n    (systemPermissions, permissionGroups, group, permission) => {\r\n        if (permission === Permissions.RESTORE_CUSTOM_GROUP) {\r\n            if ((!isSyncableSource(group.source) && group.delete_at !== 0) && (systemPermissions.has(permission) || (permissionGroups[group.id] && permissionGroups[group.id].has(permission)))) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (isSyncableSource(group.source) || group.delete_at !== 0) {\r\n            return false;\r\n        }\r\n\r\n        if (systemPermissions.has(permission)) {\r\n            return true;\r\n        }\r\n\r\n        if (permissionGroups[group.id] && permissionGroups[group.id].has(permission)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n);\r\n\r\nexport function haveIChannelPermission(state: GlobalState, teamId: string | undefined, channelId: string | undefined, permission: string): boolean {\r\n    if (getMySystemPermissions(state).has(permission)) {\r\n        return true;\r\n    }\r\n\r\n    if (teamId && getMyPermissionsByTeam(state)[teamId]?.has(permission)) {\r\n        return true;\r\n    }\r\n\r\n    if (channelId && getMyPermissionsByChannel(state)[channelId]?.has(permission)) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function haveICurrentTeamPermission(state: GlobalState, permission: string): boolean {\r\n    return haveITeamPermission(state, getCurrentTeamId(state), permission);\r\n}\r\n\r\nexport function haveICurrentChannelPermission(state: GlobalState, permission: string): boolean {\r\n    return haveIChannelPermission(state, getCurrentTeamId(state), getCurrentChannelId(state), permission);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Role} from '@mattermost/types/roles';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/common';\r\n\r\nexport type PermissionsOptions = {\r\n    channel?: string;\r\n    team?: string;\r\n    permission: string;\r\n};\r\n\r\nexport function getRoles(state: GlobalState) {\r\n    return state.entities.roles.roles;\r\n}\r\n\r\nexport const getMySystemRoles: (state: GlobalState) => Set<string> = createSelector(\r\n    'getMySystemRoles',\r\n    getCurrentUser,\r\n    (user: UserProfile) => {\r\n        if (user) {\r\n            return new Set<string>(user.roles.split(' '));\r\n        }\r\n\r\n        return new Set<string>();\r\n    },\r\n);\r\n\r\nexport const getMySystemPermissions: (state: GlobalState) => Set<string> = createSelector(\r\n    'getMySystemPermissions',\r\n    getMySystemRoles,\r\n    getRoles,\r\n    (mySystemRoles: Set<string>, allRoles) => {\r\n        return getPermissionsForRoles(allRoles, mySystemRoles);\r\n    },\r\n);\r\n\r\nexport function haveISystemPermission(state: GlobalState, options: PermissionsOptions) {\r\n    return getMySystemPermissions(state).has(options.permission);\r\n}\r\n\r\nexport function getPermissionsForRoles(allRoles: Record<string, Role>, roleSet: Set<string>) {\r\n    const permissions = new Set<string>();\r\n\r\n    for (const roleName of roleSet) {\r\n        const role = allRoles[roleName];\r\n\r\n        if (!role) {\r\n            continue;\r\n        }\r\n\r\n        for (const permission of role.permissions) {\r\n            permissions.add(permission);\r\n        }\r\n    }\r\n\r\n    return permissions;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {Team, TeamMembership, TeamStats} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport {Permissions} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getDataRetentionCustomPolicy} from 'mattermost-redux/selectors/entities/admin';\r\nimport {contentFlaggingFeatureEnabled} from 'mattermost-redux/selectors/entities/content_flagging';\r\nimport {getConfig, isCompatibleWithJoinViewTeamPermissions} from 'mattermost-redux/selectors/entities/general';\r\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles_helpers';\r\nimport {createIdsSelector} from 'mattermost-redux/utils/helpers';\r\nimport {sortTeamsWithLocale, filterTeamsStartingWithTerm} from 'mattermost-redux/utils/team_utils';\r\nimport {isTeamAdmin} from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {isCollapsedThreadsEnabled} from './preferences';\r\n\r\nexport function getCurrentTeamId(state: GlobalState) {\r\n    return state.entities.teams.currentTeamId;\r\n}\r\n\r\nexport function getTeamByName(state: GlobalState, name: string) {\r\n    const teams = getTeams(state);\r\n\r\n    return Object.values(teams).find((team) => team.name === name);\r\n}\r\n\r\nexport function getTeams(state: GlobalState) {\r\n    return state.entities.teams.teams;\r\n}\r\n\r\nexport function getTeamsInPolicy() {\r\n    return (createSelector(\r\n        'getTeamsInPolicy',\r\n        getTeams,\r\n        (state: GlobalState, props: {policyId: string}) => getDataRetentionCustomPolicy(state, props.policyId),\r\n        (allTeams, policy) => {\r\n            if (!policy) {\r\n                return [];\r\n            }\r\n\r\n            const policyTeams: Team[] = [];\r\n\r\n            Object.entries(allTeams).forEach((item: [string, Team]) => {\r\n                const [, team] = item;\r\n                if (team.policy_id === policy.id) {\r\n                    policyTeams.push(team);\r\n                }\r\n            });\r\n\r\n            return policyTeams;\r\n        }) as (b: GlobalState, a: {\r\n        policyId: string;\r\n    }) => Team[]);\r\n}\r\n\r\nexport function getTeamStats(state: GlobalState) {\r\n    return state.entities.teams.stats;\r\n}\r\n\r\nexport function getTeamMemberships(state: GlobalState) {\r\n    return state.entities.teams.myMembers;\r\n}\r\n\r\nexport function getMembersInTeams(state: GlobalState) {\r\n    return state.entities.teams.membersInTeam;\r\n}\r\n\r\nexport const getTeamsList: (state: GlobalState) => Team[] = createSelector(\r\n    'getTeamsList',\r\n    getTeams,\r\n    (teams) => {\r\n        return Object.values(teams);\r\n    },\r\n);\r\n\r\nexport const getActiveTeamsList: (state: GlobalState) => Team[] = createSelector(\r\n    'getActiveTeamsList',\r\n    getTeamsList,\r\n    (teams) => {\r\n        return teams.filter((team) => team.delete_at === 0);\r\n    },\r\n);\r\n\r\nexport const getCurrentTeam: (state: GlobalState) => Team | undefined = createSelector(\r\n    'getCurrentTeam',\r\n    getTeams,\r\n    getCurrentTeamId,\r\n    (teams, currentTeamId) => {\r\n        return teams[currentTeamId];\r\n    },\r\n);\r\n\r\nexport function getTeam(state: GlobalState, id: string): Team | undefined {\r\n    const teams = getTeams(state);\r\n    return teams[id];\r\n}\r\n\r\nexport const getCurrentTeamMembership: (state: GlobalState) => TeamMembership | undefined = createSelector(\r\n    'getCurrentTeamMembership',\r\n    getCurrentTeamId,\r\n    getTeamMemberships,\r\n    (currentTeamId: string, teamMemberships: {[teamId: string]: TeamMembership}): TeamMembership => {\r\n        return teamMemberships[currentTeamId];\r\n    },\r\n);\r\n\r\nexport const isCurrentUserCurrentTeamAdmin: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentUserCurrentTeamAdmin',\r\n    getCurrentTeamMembership,\r\n    (member) => {\r\n        if (member) {\r\n            const roles = member.roles || '';\r\n            return isTeamAdmin(roles);\r\n        }\r\n        return false;\r\n    },\r\n);\r\n\r\nexport const getCurrentTeamUrl: (state: GlobalState) => string = createSelector(\r\n    'getCurrentTeamUrl',\r\n    getCurrentTeam,\r\n    (state) => getConfig(state).SiteURL as string,\r\n    (currentTeam, siteURL) => {\r\n        if (!currentTeam) {\r\n            return siteURL;\r\n        }\r\n\r\n        return `${siteURL}/${currentTeam.name}`;\r\n    },\r\n);\r\n\r\nexport const getCurrentRelativeTeamUrl: (state: GlobalState) => string = createSelector(\r\n    'getCurrentRelativeTeamUrl',\r\n    getCurrentTeam,\r\n    (currentTeam) => {\r\n        if (!currentTeam) {\r\n            return '/';\r\n        }\r\n        return `/${currentTeam.name}`;\r\n    },\r\n);\r\n\r\nexport function getRelativeTeamUrl(state: GlobalState, teamId: string): string {\r\n    const team = getTeam(state, teamId);\r\n    if (!team) {\r\n        return '/';\r\n    }\r\n    return `/${team.name}`;\r\n}\r\n\r\nexport const getCurrentTeamStats: (state: GlobalState) => TeamStats | undefined = createSelector(\r\n    'getCurrentTeamStats',\r\n    getCurrentTeamId,\r\n    getTeamStats,\r\n    (currentTeamId, teamStats) => {\r\n        return teamStats[currentTeamId];\r\n    },\r\n);\r\n\r\nexport const getMyTeams: (state: GlobalState) => Team[] = createSelector(\r\n    'getMyTeams',\r\n    getTeams,\r\n    getTeamMemberships,\r\n    (teams, members) => {\r\n        return Object.values(teams).filter((t) => members[t.id] && t.delete_at === 0);\r\n    },\r\n);\r\n\r\nexport const getMyDeletedTeams: (state: GlobalState) => Team[] = createSelector(\r\n    'getMyDeletedTeams',\r\n    getTeams,\r\n    getTeamMemberships,\r\n    (teams, members) => {\r\n        return Object.values(teams).filter((t) => members[t.id] && t.delete_at !== 0);\r\n    },\r\n);\r\n\r\nexport const getMyTeamMember: (state: GlobalState, teamId: string) => TeamMembership | undefined = createSelector(\r\n    'getMyTeamMember',\r\n    getTeamMemberships,\r\n    (state: GlobalState, teamId: string) => teamId,\r\n    (teamMemberships, teamId) => {\r\n        return teamMemberships[teamId];\r\n    },\r\n);\r\n\r\nexport const getMembersInCurrentTeam: (state: GlobalState) => RelationOneToOne<UserProfile, TeamMembership> | undefined = createSelector(\r\n    'getMembersInCurrentTeam',\r\n    getCurrentTeamId,\r\n    getMembersInTeams,\r\n    (currentTeamId, teamMembers) => {\r\n        return teamMembers[currentTeamId];\r\n    },\r\n);\r\n\r\nexport const getMembersInTeam: (state: GlobalState, teamId: string) => RelationOneToOne<UserProfile, TeamMembership> | undefined = createSelector(\r\n    'getMembersInTeam',\r\n    (state: GlobalState, teamId: string) => teamId,\r\n    getMembersInTeams,\r\n    (teamId, teamMembers) => {\r\n        return teamMembers[teamId];\r\n    },\r\n);\r\n\r\nexport function getTeamMember(state: GlobalState, teamId: string, userId: string): TeamMembership | undefined {\r\n    return getMembersInTeams(state)[teamId]?.[userId];\r\n}\r\n\r\nexport const getListableTeamIds: (state: GlobalState) => Array<Team['id']> = createIdsSelector(\r\n    'getListableTeamIds',\r\n    getTeams,\r\n    getTeamMemberships,\r\n    (state) => haveISystemPermission(state, {permission: Permissions.LIST_PUBLIC_TEAMS}),\r\n    (state) => haveISystemPermission(state, {permission: Permissions.LIST_PRIVATE_TEAMS}),\r\n    isCompatibleWithJoinViewTeamPermissions,\r\n    (teams, myMembers, canListPublicTeams, canListPrivateTeams, compatibleWithJoinViewTeamPermissions) => {\r\n        return Object.keys(teams).filter((id) => {\r\n            const team = teams[id];\r\n            const member = myMembers[id];\r\n            let canList = team.allow_open_invite;\r\n            if (compatibleWithJoinViewTeamPermissions) {\r\n                canList = (canListPrivateTeams && !team.allow_open_invite) || (canListPublicTeams && team.allow_open_invite);\r\n            }\r\n            return team.delete_at === 0 && canList && !member;\r\n        });\r\n    },\r\n);\r\n\r\nexport const getSortedListableTeams: (state: GlobalState, locale: string) => Team[] = createSelector(\r\n    'getSortedListableTeams',\r\n    getTeams,\r\n    getListableTeamIds,\r\n    (state: GlobalState, locale: string) => locale,\r\n    (teams, listableTeamIds, locale) => {\r\n        const listableTeams: {[x: string]: Team} = {};\r\n\r\n        for (const id of listableTeamIds) {\r\n            listableTeams[id] = teams[id];\r\n        }\r\n\r\n        return Object.values(listableTeams).sort(sortTeamsWithLocale(locale));\r\n    },\r\n);\r\n\r\nexport const getJoinableTeamIds: (state: GlobalState) => Array<Team['id']> = createIdsSelector(\r\n    'getJoinableTeamIds',\r\n    getTeams,\r\n    getTeamMemberships,\r\n    (state: GlobalState) => haveISystemPermission(state, {permission: Permissions.JOIN_PUBLIC_TEAMS}),\r\n    (state: GlobalState) => haveISystemPermission(state, {permission: Permissions.JOIN_PRIVATE_TEAMS}),\r\n    isCompatibleWithJoinViewTeamPermissions,\r\n    (teams, myMembers, canJoinPublicTeams, canJoinPrivateTeams, compatibleWithJoinViewTeamPermissions) => {\r\n        return Object.keys(teams).filter((id) => {\r\n            const team = teams[id];\r\n            const member = myMembers[id];\r\n            let canJoin = team.allow_open_invite;\r\n            if (compatibleWithJoinViewTeamPermissions) {\r\n                canJoin = (canJoinPrivateTeams && !team.allow_open_invite) || (canJoinPublicTeams && team.allow_open_invite);\r\n            }\r\n            return team.delete_at === 0 && canJoin && !member;\r\n        });\r\n    },\r\n);\r\n\r\nexport const getJoinableTeams: (state: GlobalState) => Team[] = createSelector(\r\n    'getJoinableTeams',\r\n    getTeams,\r\n    getJoinableTeamIds,\r\n    (teams, joinableTeamIds) => {\r\n        return joinableTeamIds.map((id) => teams[id]);\r\n    },\r\n);\r\n\r\nexport const getSortedJoinableTeams: (state: GlobalState, locale: string) => Team[] = createSelector(\r\n    'getSortedJoinableTeams',\r\n    getTeams,\r\n    getJoinableTeamIds,\r\n    (state: GlobalState, locale: string) => locale,\r\n    (teams, joinableTeamIds, locale) => {\r\n        const joinableTeams: {[x: string]: Team} = {};\r\n\r\n        for (const id of joinableTeamIds) {\r\n            joinableTeams[id] = teams[id];\r\n        }\r\n\r\n        return Object.values(joinableTeams).sort(sortTeamsWithLocale(locale));\r\n    },\r\n);\r\n\r\nexport const getMySortedTeamIds: (state: GlobalState, locale: string) => Array<Team['id']> = createIdsSelector(\r\n    'getMySortedTeamIds',\r\n    getMyTeams,\r\n    (state: GlobalState, locale: string) => locale,\r\n    (teams, locale) => {\r\n        return teams.sort(sortTeamsWithLocale(locale)).map((t) => t.id);\r\n    },\r\n);\r\n\r\nexport function getMyTeamsCount(state: GlobalState) {\r\n    return getMyTeams(state).length;\r\n}\r\n\r\n// returns the badge number to show (excluding the current team)\r\n// > 0 means is returning the mention count\r\n// 0 means that there are no unread messages\r\n// -1 means that there are unread messages but no mentions\r\nexport const getChannelDrawerBadgeCount: (state: GlobalState) => number = createSelector(\r\n    'getChannelDrawerBadgeCount',\r\n    getCurrentTeamId,\r\n    getTeamMemberships,\r\n    isCollapsedThreadsEnabled,\r\n    (currentTeamId, teamMembers, collapsed) => {\r\n        let mentionCount = 0;\r\n        let messageCount = 0;\r\n        Object.values(teamMembers).forEach((m: TeamMembership) => {\r\n            if (m.team_id !== currentTeamId) {\r\n                mentionCount += collapsed ? (m.mention_count_root || 0) : (m.mention_count || 0);\r\n                messageCount += collapsed ? (m.msg_count_root || 0) : (m.msg_count || 0);\r\n            }\r\n        });\r\n\r\n        let badgeCount = 0;\r\n        if (mentionCount) {\r\n            badgeCount = mentionCount;\r\n        } else if (messageCount) {\r\n            badgeCount = -1;\r\n        }\r\n\r\n        return badgeCount;\r\n    },\r\n);\r\n\r\nexport const isTeamSameWithCurrentTeam = (state: GlobalState, teamName: string): boolean => {\r\n    const targetTeam = getTeamByName(state, teamName);\r\n    const currentTeam = getCurrentTeam(state);\r\n\r\n    return Boolean(targetTeam && targetTeam.id === currentTeam?.id);\r\n};\r\n\r\n// returns the badge for a team\r\n// > 0 means is returning the mention count\r\n// 0 means that there are no unread messages\r\n// -1 means that there are unread messages but no mentions\r\nexport function makeGetBadgeCountForTeamId(): (state: GlobalState, id: string) => number {\r\n    return createSelector(\r\n        'makeGetBadgeCountForTeamId',\r\n        getTeamMemberships,\r\n        (state: GlobalState, id: string) => id,\r\n        isCollapsedThreadsEnabled,\r\n        (members, teamId, collapsed) => {\r\n            const member = members[teamId];\r\n            let badgeCount = 0;\r\n\r\n            if (member) {\r\n                const mentionCount = collapsed ? member.mention_count_root : member.mention_count;\r\n                const msgCount = collapsed ? member.msg_count_root : member.msg_count;\r\n                if (mentionCount) {\r\n                    badgeCount = mentionCount;\r\n                } else if (msgCount) {\r\n                    badgeCount = -1;\r\n                }\r\n            }\r\n\r\n            return badgeCount;\r\n        },\r\n    );\r\n}\r\n\r\nexport function searchTeamsInPolicy(teams: Team[], term: string): Team[] {\r\n    return filterTeamsStartingWithTerm(teams, term);\r\n}\r\n\r\nexport function getTeamIdByChannelId(state: GlobalState, channelId: string): string | undefined {\r\n    const channels = state.entities.channels.channels;\r\n    if (!channels) {\r\n        return undefined;\r\n    }\r\n    const channel = channels[channelId];\r\n    return channel ? channel.team_id : undefined;\r\n}\r\n\r\nexport function contentFlaggingEnabledInTeam(state: GlobalState, teamId: string): boolean {\r\n    const featureEnabled = contentFlaggingFeatureEnabled(state);\r\n    if (!featureEnabled) {\r\n        return false;\r\n    }\r\n\r\n    return Boolean(state.entities.teams.contentFlaggingStatus[teamId]);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel, ChannelMembership} from '@mattermost/types/channels';\r\nimport type {Group} from '@mattermost/types/groups';\r\nimport type {Reaction} from '@mattermost/types/reactions';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {Team, TeamMembership} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {\r\n    IDMappedObjects,\r\n    RelationOneToManyUnique,\r\n    RelationOneToOne,\r\n} from '@mattermost/types/utilities';\r\n\r\nimport {General} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {\r\n    getCurrentChannelId,\r\n    getCurrentUser as getCurrentUserInternal,\r\n    getCurrentUserId as getCurrentUserIdInternal,\r\n    getMyCurrentChannelMembership,\r\n    getUsers as getUsersInternal,\r\n    getMembersInTeam,\r\n    getMembersInChannel,\r\n} from 'mattermost-redux/selectors/entities/common';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {getDirectShowPreferences, getTeammateNameDisplaySetting} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {secureGetFromRecord} from 'mattermost-redux/utils/post_utils';\r\nimport {\r\n    displayUsername,\r\n    filterProfilesStartingWithTerm,\r\n    filterProfilesMatchingWithTerm,\r\n    isSystemAdmin,\r\n    includesAnAdminRole,\r\n    profileListToMap,\r\n    sortByUsername,\r\n    isGuest,\r\n    applyRolesFilters,\r\n} from 'mattermost-redux/utils/user_utils';\r\n\r\n// Re-define these types to ensure that these are typed correctly when mattermost-redux is published\r\nexport const getCurrentUser: (state: GlobalState) => UserProfile = getCurrentUserInternal;\r\nexport const getCurrentUserId: (state: GlobalState) => string = getCurrentUserIdInternal;\r\nexport const getUsers: (state: GlobalState) => IDMappedObjects<UserProfile> = getUsersInternal;\r\n\r\nexport type Filters = {\r\n    role?: string;\r\n    inactive?: boolean;\r\n    active?: boolean;\r\n    roles?: string[];\r\n    exclude_roles?: string[];\r\n    channel_roles?: string[];\r\n    team_roles?: string[];\r\n    exclude_bots?: boolean;\r\n    exclude_remote?: boolean;\r\n};\r\n\r\nexport function getUserIdsInChannels(state: GlobalState): RelationOneToManyUnique<Channel, UserProfile> {\r\n    return state.entities.users.profilesInChannel;\r\n}\r\n\r\nexport function getUserIdsNotInChannels(state: GlobalState): RelationOneToManyUnique<Channel, UserProfile> {\r\n    return state.entities.users.profilesNotInChannel;\r\n}\r\n\r\nexport function getUserIdsInTeams(state: GlobalState): RelationOneToManyUnique<Team, UserProfile> {\r\n    return state.entities.users.profilesInTeam;\r\n}\r\n\r\nexport function getUserIdsNotInTeams(state: GlobalState): RelationOneToManyUnique<Team, UserProfile> {\r\n    return state.entities.users.profilesNotInTeam;\r\n}\r\n\r\nexport function getUserIdsWithoutTeam(state: GlobalState): Set<UserProfile['id']> {\r\n    return state.entities.users.profilesWithoutTeam;\r\n}\r\n\r\nexport function getUserIdsInGroups(state: GlobalState): RelationOneToManyUnique<Group, UserProfile> {\r\n    return state.entities.users.profilesInGroup;\r\n}\r\n\r\nexport function getUserIdsNotInGroups(state: GlobalState): RelationOneToManyUnique<Group, UserProfile> {\r\n    return state.entities.users.profilesNotInGroup;\r\n}\r\n\r\nexport function getUserStatuses(state: GlobalState): RelationOneToOne<UserProfile, string> {\r\n    return state.entities.users.statuses;\r\n}\r\n\r\nexport function getUserSessions(state: GlobalState): any[] {\r\n    return state.entities.users.mySessions;\r\n}\r\n\r\nexport function getUserAudits(state: GlobalState): any[] {\r\n    return state.entities.users.myAudits;\r\n}\r\n\r\nexport function getUser(state: GlobalState, id: UserProfile['id']): UserProfile {\r\n    return state.entities.users.profiles[id];\r\n}\r\n\r\nexport function getUsersByIDs(state: GlobalState, ids: Array<UserProfile['id']>): UserProfile[] {\r\n    return ids.map((userId) => getUser(state, userId));\r\n}\r\n\r\nexport const getUsersByUsername: (a: GlobalState) => Record<string, UserProfile> = createSelector(\r\n    'getUsersByUsername',\r\n    getUsers,\r\n    (users) => {\r\n        const usersByUsername: Record<string, UserProfile> = {};\r\n\r\n        for (const id in users) {\r\n            if (Object.hasOwn(users, id)) {\r\n                const user = users[id];\r\n                usersByUsername[user.username] = user;\r\n            }\r\n        }\r\n\r\n        return usersByUsername;\r\n    },\r\n);\r\n\r\nexport function getUserByUsername(state: GlobalState, username: UserProfile['username']): UserProfile {\r\n    return getUsersByUsername(state)[username];\r\n}\r\n\r\nexport const getUsersByEmail: (a: GlobalState) => Record<string, UserProfile> = createSelector(\r\n    'getUsersByEmail',\r\n    getUsers,\r\n    (users) => {\r\n        const usersByEmail: Record<string, UserProfile> = {};\r\n\r\n        for (const user of Object.keys(users).map((key) => users[key])) {\r\n            usersByEmail[user.email] = user;\r\n        }\r\n\r\n        return usersByEmail;\r\n    },\r\n);\r\n\r\nexport function getUserByEmail(state: GlobalState, email: UserProfile['email']): UserProfile {\r\n    return getUsersByEmail(state)[email];\r\n}\r\n\r\nexport const isCurrentUserSystemAdmin: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentUserSystemAdmin',\r\n    getCurrentUser,\r\n    (user) => {\r\n        const roles = user?.roles || '';\r\n        return isSystemAdmin(roles);\r\n    },\r\n);\r\n\r\nexport const isCurrentUserGuestUser: (state: GlobalState) => boolean = createSelector(\r\n    'isCurrentUserGuestUser',\r\n    getCurrentUser,\r\n    (user) => {\r\n        const roles = user?.roles || '';\r\n        return isGuest(roles);\r\n    },\r\n);\r\n\r\nexport const currentUserHasAnAdminRole: (state: GlobalState) => boolean = createSelector(\r\n    'currentUserHasAnAdminRole',\r\n    getCurrentUser,\r\n    (user) => {\r\n        const roles = user.roles || '';\r\n        return includesAnAdminRole(roles);\r\n    },\r\n);\r\n\r\nexport const getCurrentUserRoles: (_: GlobalState) => UserProfile['roles'] = createSelector(\r\n    'getCurrentUserRoles',\r\n    getMyCurrentChannelMembership,\r\n    (state) => state.entities.teams.myMembers[state.entities.teams.currentTeamId],\r\n    getCurrentUser,\r\n    (currentChannelMembership, currentTeamMembership, currentUser) => {\r\n        let roles = '';\r\n        if (currentTeamMembership) {\r\n            roles += `${currentTeamMembership.roles} `;\r\n        }\r\n\r\n        if (currentChannelMembership) {\r\n            roles += `${currentChannelMembership.roles} `;\r\n        }\r\n\r\n        if (currentUser) {\r\n            roles += currentUser.roles;\r\n        }\r\n        return roles.trim();\r\n    },\r\n);\r\n\r\nexport type UserMentionKey = {\r\n    key: string;\r\n    caseSensitive?: boolean;\r\n}\r\n\r\nexport const getCurrentUserMentionKeys: (state: GlobalState) => UserMentionKey[] = createSelector(\r\n    'getCurrentUserMentionKeys',\r\n    getCurrentUser,\r\n    (user: UserProfile) => {\r\n        let keys: UserMentionKey[] = [];\r\n\r\n        if (!user || !user.notify_props) {\r\n            return keys;\r\n        }\r\n\r\n        if (user.notify_props.mention_keys) {\r\n            keys = keys.concat(user.notify_props.mention_keys.split(',').map((key) => {\r\n                return {key};\r\n            }));\r\n        }\r\n\r\n        if (user.notify_props.first_name === 'true' && user.first_name) {\r\n            keys.push({key: user.first_name, caseSensitive: true});\r\n        }\r\n\r\n        if (user.notify_props.channel === 'true') {\r\n            keys.push({key: '@channel'});\r\n            keys.push({key: '@all'});\r\n            keys.push({key: '@here'});\r\n        }\r\n\r\n        const usernameKey = '@' + user.username;\r\n        if (keys.findIndex((key) => key.key === usernameKey) === -1) {\r\n            keys.push({key: usernameKey});\r\n        }\r\n\r\n        return keys;\r\n    },\r\n);\r\n\r\nexport type HighlightWithoutNotificationKey = {\r\n    key: string;\r\n}\r\n\r\nexport const getHighlightWithoutNotificationKeys: (state: GlobalState) => HighlightWithoutNotificationKey[] = createSelector(\r\n    'getHighlightWithoutNotificationKeys',\r\n    getCurrentUser,\r\n    (user: UserProfile) => {\r\n        const highlightKeys: HighlightWithoutNotificationKey[] = [];\r\n\r\n        if (user?.notify_props?.highlight_keys?.length > 0) {\r\n            user.notify_props.highlight_keys.split(',').forEach((key) => {\r\n                highlightKeys.push({key});\r\n            });\r\n        }\r\n\r\n        return highlightKeys;\r\n    },\r\n);\r\n\r\nexport const getProfileSetInCurrentChannel: (state: GlobalState) => Set<UserProfile['id']> = createSelector(\r\n    'getProfileSetInCurrentChannel',\r\n    getCurrentChannelId,\r\n    getUserIdsInChannels,\r\n    (currentChannel, channelProfiles) => {\r\n        return channelProfiles[currentChannel];\r\n    },\r\n);\r\n\r\nexport const getProfileSetNotInCurrentChannel: (state: GlobalState) => Set<UserProfile['id']> = createSelector(\r\n    'getProfileSetNotInCurrentChannel',\r\n    getCurrentChannelId,\r\n    getUserIdsNotInChannels,\r\n    (currentChannel, channelProfiles) => {\r\n        return channelProfiles[currentChannel];\r\n    },\r\n);\r\n\r\nexport const getProfileSetInCurrentTeam: (state: GlobalState) => Set<UserProfile['id']> = createSelector(\r\n    'getProfileSetInCurrentTeam',\r\n    (state) => state.entities.teams.currentTeamId,\r\n    getUserIdsInTeams,\r\n    (currentTeam, teamProfiles) => {\r\n        return teamProfiles[currentTeam];\r\n    },\r\n);\r\n\r\nexport const getProfileSetNotInCurrentTeam: (state: GlobalState) => Set<UserProfile['id']> = createSelector(\r\n    'getProfileSetNotInCurrentTeam',\r\n    (state) => state.entities.teams.currentTeamId,\r\n    getUserIdsNotInTeams,\r\n    (currentTeam, teamProfiles) => {\r\n        return teamProfiles[currentTeam];\r\n    },\r\n);\r\n\r\nconst PROFILE_SET_ALL = 'all';\r\nfunction sortAndInjectProfiles(profiles: IDMappedObjects<UserProfile>, profileSet?: 'all' | Set<UserProfile['id']>): UserProfile[] {\r\n    const currentProfiles = injectProfiles(profiles, profileSet);\r\n    return currentProfiles.sort(sortByUsername);\r\n}\r\n\r\nfunction injectProfiles(profiles: IDMappedObjects<UserProfile>, profileSet?: 'all' | Set<UserProfile['id']>): UserProfile[] {\r\n    let currentProfiles: UserProfile[] = [];\r\n\r\n    if (typeof profileSet === 'undefined') {\r\n        return currentProfiles;\r\n    } else if (profileSet === PROFILE_SET_ALL) {\r\n        currentProfiles = Object.keys(profiles).map((key) => profiles[key]);\r\n    } else {\r\n        currentProfiles = Array.from(profileSet).map((p) => profiles[p]);\r\n    }\r\n\r\n    return currentProfiles.filter((profile) => Boolean(profile));\r\n}\r\n\r\nexport const getProfiles: (state: GlobalState, filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfiles',\r\n    getUsers,\r\n    (state: GlobalState, filters?: Filters) => filters,\r\n    (profiles, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), PROFILE_SET_ALL);\r\n    },\r\n);\r\n\r\nexport function filterProfiles(profiles: IDMappedObjects<UserProfile>, filters?: Filters, memberships?: RelationOneToOne<UserProfile, TeamMembership> | RelationOneToOne<UserProfile, ChannelMembership>): IDMappedObjects<UserProfile> {\r\n    if (!filters) {\r\n        return profiles;\r\n    }\r\n\r\n    let users = Object.keys(profiles).map((key) => profiles[key]);\r\n\r\n    const filterRole = (filters.role && filters.role !== '') ? [filters.role] : [];\r\n    const filterRoles = [...filterRole, ...(filters.roles || []), ...(filters.team_roles || []), ...(filters.channel_roles || [])];\r\n    const excludeRoles = filters.exclude_roles || [];\r\n    if (filterRoles.length > 0 || excludeRoles.length > 0) {\r\n        users = users.filter((user) => {\r\n            return user.roles.length > 0 && applyRolesFilters(user, filterRoles, excludeRoles, memberships?.[user.id]);\r\n        });\r\n    }\r\n\r\n    if (filters.exclude_bots) {\r\n        users = users.filter((user) => !user.is_bot);\r\n    }\r\n\r\n    if (filters.inactive) {\r\n        users = users.filter((user) => user.delete_at !== 0);\r\n    } else if (filters.active) {\r\n        users = users.filter((user) => user.delete_at === 0);\r\n    }\r\n\r\n    if (filters.exclude_remote) {\r\n        users = users.filter((user) => !user.remote_id);\r\n    }\r\n\r\n    return users.reduce((acc, user) => {\r\n        acc[user.id] = user;\r\n        return acc;\r\n    }, {} as IDMappedObjects<UserProfile>);\r\n}\r\n\r\nexport function getIsManualStatusForUserId(state: GlobalState, userId: UserProfile['id']): boolean {\r\n    return state.entities.users.isManualStatus[userId];\r\n}\r\n\r\nexport const getProfilesInCurrentChannel: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getProfilesInCurrentChannel',\r\n    getUsers,\r\n    getProfileSetInCurrentChannel,\r\n    (profiles, currentChannelProfileSet) => {\r\n        return sortAndInjectProfiles(profiles, currentChannelProfileSet);\r\n    },\r\n);\r\n\r\nexport const getActiveProfilesInCurrentChannel: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getProfilesInCurrentChannel',\r\n    getUsers,\r\n    getProfileSetInCurrentChannel,\r\n    (profiles, currentChannelProfileSet) => {\r\n        return sortAndInjectProfiles(profiles, currentChannelProfileSet).filter((user) => user.delete_at === 0);\r\n    },\r\n);\r\n\r\nexport const getActiveProfilesInCurrentChannelWithoutSorting: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getProfilesInCurrentChannel',\r\n    getUsers,\r\n    getProfileSetInCurrentChannel,\r\n    (profiles, currentChannelProfileSet) => {\r\n        return injectProfiles(profiles, currentChannelProfileSet).filter((user) => user.delete_at === 0);\r\n    },\r\n);\r\n\r\nexport const getProfilesNotInCurrentChannel: (state: GlobalState, filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesNotInCurrentChannel',\r\n    getUsers,\r\n    getProfileSetNotInCurrentChannel,\r\n    (state: GlobalState, filters?: Filters) => filters,\r\n    (profiles, notInCurrentChannelProfileSet, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), notInCurrentChannelProfileSet);\r\n    },\r\n);\r\n\r\nexport const getProfilesInCurrentTeam: (state: GlobalState, filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesInCurrentTeam',\r\n    getUsers,\r\n    getProfileSetInCurrentTeam,\r\n    (state: GlobalState, filters?: Filters) => filters,\r\n    (profiles, currentTeamProfileSet, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), currentTeamProfileSet);\r\n    },\r\n);\r\n\r\nexport const getProfilesInTeam: (state: GlobalState, teamId: Team['id'], filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesInTeam',\r\n    getUsers,\r\n    getUserIdsInTeams,\r\n    getMembersInTeam,\r\n    (state: GlobalState, teamId: string) => teamId,\r\n    (state: GlobalState, teamId: string, filters: Filters) => filters,\r\n    (profiles, usersInTeams, memberships, teamId, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters, memberships), usersInTeams[teamId] || new Set());\r\n    },\r\n);\r\n\r\nexport const getProfilesNotInTeam: (state: GlobalState, teamId: Team['id'], filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesNotInTeam',\r\n    getUsers,\r\n    getUserIdsNotInTeams,\r\n    (state: GlobalState, teamId: string) => teamId,\r\n    (state: GlobalState, teamId: string, filters: Filters) => filters,\r\n    (profiles, usersNotInTeams, teamId, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), usersNotInTeams[teamId] || new Set());\r\n    },\r\n);\r\n\r\nexport const getProfilesNotInCurrentTeam: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getProfilesNotInCurrentTeam',\r\n    getUsers,\r\n    getProfileSetNotInCurrentTeam,\r\n    (profiles, notInCurrentTeamProfileSet) => {\r\n        return sortAndInjectProfiles(profiles, notInCurrentTeamProfileSet);\r\n    },\r\n);\r\n\r\nexport const getProfilesWithoutTeam: (state: GlobalState, filters: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesWithoutTeam',\r\n    getUsers,\r\n    getUserIdsWithoutTeam,\r\n    (state: GlobalState, filters: Filters) => filters,\r\n    (profiles, withoutTeamProfileSet, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), withoutTeamProfileSet);\r\n    },\r\n);\r\n\r\nexport function getStatusForUserId(state: GlobalState, userId: UserProfile['id']): string {\r\n    return getUserStatuses(state)[userId];\r\n}\r\n\r\nexport function getDndEndTimeForUserId(state: GlobalState, userId: UserProfile['id']): number {\r\n    return state.entities.users.dndEndTimes[userId];\r\n}\r\n\r\nexport function getTotalUsersStats(state: GlobalState) {\r\n    return state.entities.users.stats;\r\n}\r\n\r\nexport function getFilteredUsersStats(state: GlobalState) {\r\n    return state.entities.users.filteredStats;\r\n}\r\n\r\nfunction filterFromProfiles(currentUserId: UserProfile['id'], profiles: UserProfile[], skipCurrent = false, filters?: Filters): UserProfile[] {\r\n    const filteredProfilesMap = filterProfiles(profileListToMap(profiles), filters);\r\n    const filteredProfiles = Object.keys(filteredProfilesMap).map((key) => filteredProfilesMap[key]);\r\n\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(filteredProfiles, currentUserId);\r\n    }\r\n\r\n    return filteredProfiles;\r\n}\r\n\r\nexport function makeSearchProfilesStartingWithTerm(): (state: GlobalState, term: string, skipCurrent?: boolean, filters?: Filters) => UserProfile[] {\r\n    return createSelector(\r\n        'makeSearchProfilesStartingWithTerm',\r\n        getUsers,\r\n        getCurrentUserId,\r\n        (state: GlobalState, term: string) => term,\r\n        (state: GlobalState, term: string, skipCurrent?: boolean) => skipCurrent || false,\r\n        (stateGlobalState, term: string, skipCurrent?: boolean, filters?: Filters) => filters,\r\n        (users, currentUserId, term, skipCurrent, filters) => {\r\n            const profiles = filterProfilesMatchingWithTerm(Object.values(users), term);\r\n            return filterFromProfiles(currentUserId, profiles, skipCurrent, filters);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeSearchProfilesMatchingWithTerm(): (state: GlobalState, term: string, skipCurrent?: boolean, filters?: Filters) => UserProfile[] {\r\n    return createSelector(\r\n        'makeSearchProfilesMatchingWithTerm',\r\n        getUsers,\r\n        getCurrentUserId,\r\n        (state: GlobalState, term: string) => term,\r\n        (state: GlobalState, term: string, skipCurrent?: boolean) => skipCurrent || false,\r\n        (stateGlobalState, term: string, skipCurrent?: boolean, filters?: Filters) => filters,\r\n        (users, currentUserId, term, skipCurrent, filters) => {\r\n            const profiles = filterProfilesMatchingWithTerm(Object.values(users), term);\r\n            return filterFromProfiles(currentUserId, profiles, skipCurrent, filters);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeSearchProfilesInChannel() {\r\n    const doGetProfilesInChannel = makeGetProfilesInChannel();\r\n    return (state: GlobalState, channelId: Channel['id'], term: string, skipCurrent = false, filters?: Filters): UserProfile[] => {\r\n        const profiles = filterProfilesStartingWithTerm(doGetProfilesInChannel(state, channelId, filters), term);\r\n\r\n        if (skipCurrent) {\r\n            removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n        }\r\n\r\n        return profiles;\r\n    };\r\n}\r\n\r\nexport function searchProfilesInCurrentChannel(state: GlobalState, term: string, skipCurrent = false): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesInCurrentChannel(state), term);\r\n\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchActiveProfilesInCurrentChannel(state: GlobalState, term: string, skipCurrent = false): UserProfile[] {\r\n    return searchProfilesInCurrentChannel(state, term, skipCurrent).filter((user) => user.delete_at === 0);\r\n}\r\n\r\nexport function searchProfilesNotInCurrentChannel(state: GlobalState, term: string, skipCurrent = false): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesNotInCurrentChannel(state), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchProfilesInCurrentTeam(state: GlobalState, term: string, skipCurrent = false, filters?: Filters): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesInCurrentTeam(state, filters), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchProfilesInTeam(state: GlobalState, teamId: Team['id'], term: string, skipCurrent = false, filters?: Filters): UserProfile[] {\r\n    const profiles = filterProfilesMatchingWithTerm(getProfilesInTeam(state, teamId, filters), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchProfilesNotInCurrentTeam(state: GlobalState, term: string, skipCurrent = false): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesNotInCurrentTeam(state), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchProfilesWithoutTeam(state: GlobalState, term: string, skipCurrent = false, filters: Filters): UserProfile[] {\r\n    const filteredProfiles = filterProfilesStartingWithTerm(getProfilesWithoutTeam(state, filters), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(filteredProfiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return filteredProfiles;\r\n}\r\n\r\nfunction removeCurrentUserFromList(profiles: UserProfile[], currentUserId: UserProfile['id']) {\r\n    const index = profiles.findIndex((p) => p.id === currentUserId);\r\n    if (index >= 0) {\r\n        profiles.splice(index, 1);\r\n    }\r\n}\r\n\r\nexport const shouldShowTermsOfService: (state: GlobalState) => boolean = createSelector(\r\n    'shouldShowTermsOfService',\r\n    getConfig,\r\n    getCurrentUser,\r\n    getLicense,\r\n    (config, user, license) => {\r\n        // Defaults to false if the user is not logged in or the setting doesn't exist\r\n        const acceptedTermsId = user ? user.terms_of_service_id : '';\r\n        const acceptedAt = user ? user.terms_of_service_create_at : 0;\r\n\r\n        const featureEnabled = license.IsLicensed === 'true' && config.EnableCustomTermsOfService === 'true';\r\n        const reacceptanceTime = parseInt(config.CustomTermsOfServiceReAcceptancePeriod!, 10) * 1000 * 60 * 60 * 24;\r\n        const timeElapsed = new Date().getTime() - acceptedAt;\r\n        return Boolean(user && featureEnabled && (config.CustomTermsOfServiceId !== acceptedTermsId || timeElapsed > reacceptanceTime));\r\n    },\r\n);\r\n\r\nexport const getUsersInVisibleDMs: (state: GlobalState) => UserProfile[] = createSelector(\r\n    'getUsersInVisibleDMs',\r\n    getUsers,\r\n    getDirectShowPreferences,\r\n    (users, preferences) => {\r\n        const dmUsers: UserProfile[] = [];\r\n        preferences.forEach((pref) => {\r\n            if (pref.value === 'true' && users[pref.name]) {\r\n                dmUsers.push(users[pref.name]);\r\n            }\r\n        });\r\n        return dmUsers;\r\n    },\r\n);\r\n\r\nexport function makeGetProfilesForReactions(): (state: GlobalState, reactions: Reaction[]) => UserProfile[] {\r\n    return createSelector(\r\n        'makeGetProfilesForReactions',\r\n        getUsers,\r\n        (state: GlobalState, reactions: Reaction[]) => reactions,\r\n        (users, reactions) => {\r\n            const profiles: UserProfile[] = [];\r\n            reactions.forEach((r) => {\r\n                if (users[r.user_id]) {\r\n                    profiles.push(users[r.user_id]);\r\n                }\r\n            });\r\n            return profiles;\r\n        },\r\n    );\r\n}\r\n\r\n/**\r\n * Returns a selector that returns all profiles in a given channel with the given filters applied.\r\n *\r\n * Note that filters, if provided, must be either a constant or memoized to prevent constant recomputation of the selector.\r\n */\r\nexport function makeGetProfilesInChannel(): (state: GlobalState, channelId: Channel['id'], filters?: Filters) => UserProfile[] {\r\n    return createSelector(\r\n        'makeGetProfilesInChannel',\r\n        getUsers,\r\n        getUserIdsInChannels,\r\n        getMembersInChannel,\r\n        (state: GlobalState, channelId: string) => channelId,\r\n        (state, channelId, filters) => filters,\r\n        (users, userIds, membersInChannel, channelId, filters = {}) => {\r\n            const userIdsInChannel = userIds[channelId];\r\n\r\n            if (!userIdsInChannel) {\r\n                return [];\r\n            }\r\n\r\n            return sortAndInjectProfiles(filterProfiles(users, filters, membersInChannel), userIdsInChannel);\r\n        },\r\n    );\r\n}\r\n\r\n/**\r\n * Returns a selector that returns all profiles not in a given channel.\r\n */\r\nexport function makeGetProfilesNotInChannel(): (state: GlobalState, channelId: Channel['id'], filters?: Filters) => UserProfile[] {\r\n    return createSelector(\r\n        'makeGetProfilesNotInChannel',\r\n        getUsers,\r\n        getUserIdsNotInChannels,\r\n        (state: GlobalState, channelId: string) => channelId,\r\n        (users, userIds, channelId) => {\r\n            const userIdsInChannel = userIds[channelId];\r\n\r\n            if (!userIdsInChannel) {\r\n                return [];\r\n            }\r\n\r\n            return sortAndInjectProfiles(users, userIdsInChannel);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetProfilesByIdsAndUsernames(): (\r\n    state: GlobalState,\r\n    props: {\r\n        allUserIds: Array<UserProfile['id']>;\r\n        allUsernames: Array<UserProfile['username']>;\r\n    }\r\n) => UserProfile[] {\r\n    return createSelector(\r\n        'makeGetProfilesByIdsAndUsernames',\r\n        getUsers,\r\n        getUsersByUsername,\r\n        (state: GlobalState, props: {allUserIds: Array<UserProfile['id']>; allUsernames: Array<UserProfile['username']>}) => props.allUserIds,\r\n        (state, props) => props.allUsernames,\r\n        (allProfilesById: Record<string, UserProfile>, allProfilesByUsername: Record<string, UserProfile>, allUserIds: string[], allUsernames: string[]) => {\r\n            const userProfiles: UserProfile[] = [];\r\n\r\n            if (allUserIds && allUserIds.length > 0) {\r\n                const profilesById = allUserIds.\r\n                    filter((userId) => secureGetFromRecord(allProfilesById, userId)).\r\n                    map((userId) => allProfilesById[userId]);\r\n\r\n                if (profilesById && profilesById.length > 0) {\r\n                    userProfiles.push(...profilesById);\r\n                }\r\n            }\r\n\r\n            if (allUsernames && allUsernames.length > 0) {\r\n                const profilesByUsername = allUsernames.\r\n                    filter((username) => secureGetFromRecord(allProfilesByUsername, username)).\r\n                    map((username) => allProfilesByUsername[username]);\r\n\r\n                if (profilesByUsername && profilesByUsername.length > 0) {\r\n                    userProfiles.push(...profilesByUsername);\r\n                }\r\n            }\r\n\r\n            return userProfiles;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeGetDisplayName(): (state: GlobalState, userId: UserProfile['id'], useFallbackUsername?: boolean) => string {\r\n    return createSelector(\r\n        'makeGetDisplayName',\r\n        (state: GlobalState, userId: string) => getUser(state, userId),\r\n        getTeammateNameDisplaySetting,\r\n        (state, userId, useFallbackUsername = true) => useFallbackUsername,\r\n        (user, teammateNameDisplaySetting, useFallbackUsername) => {\r\n            return displayUsername(user, teammateNameDisplaySetting!, useFallbackUsername);\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeDisplayNameGetter(): (state: GlobalState, useFallbackUsername: boolean) => (user: UserProfile | null | undefined) => string {\r\n    return createSelector(\r\n        'makeDisplayNameGetter',\r\n        getTeammateNameDisplaySetting,\r\n        (_, useFallbackUsername = true) => useFallbackUsername,\r\n        (teammateNameDisplaySetting, useFallbackUsername) => {\r\n            return (user: UserProfile | null | undefined) => displayUsername(user, teammateNameDisplaySetting!, useFallbackUsername);\r\n        },\r\n    );\r\n}\r\n\r\nexport const getProfilesInGroup: (state: GlobalState, groupId: Group['id'], filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesInGroup',\r\n    getUsers,\r\n    getUserIdsInGroups,\r\n    (state: GlobalState, groupId: string) => groupId,\r\n    (state: GlobalState, groupId: string, filters: Filters) => filters,\r\n    (profiles, usersInGroups, groupId, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), usersInGroups[groupId] || new Set());\r\n    },\r\n);\r\n\r\nexport const getProfilesInGroupWithoutSorting: (state: GlobalState, groupId: Group['id'], filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesInGroup',\r\n    getUsers,\r\n    getUserIdsInGroups,\r\n    (state: GlobalState, groupId: string) => groupId,\r\n    (state: GlobalState, groupId: string, filters: Filters) => filters,\r\n    (profiles, usersInGroups, groupId, filters) => {\r\n        return injectProfiles(filterProfiles(profiles, filters), usersInGroups[groupId] || new Set());\r\n    },\r\n);\r\n\r\nexport const getProfilesNotInCurrentGroup: (state: GlobalState, groupId: Group['id'], filters?: Filters) => UserProfile[] = createSelector(\r\n    'getProfilesNotInGroup',\r\n    getUsers,\r\n    getUserIdsNotInGroups,\r\n    (state: GlobalState, groupId: string) => groupId,\r\n    (state: GlobalState, groupId: string, filters: Filters) => filters,\r\n    (profiles, usersNotInGroups, groupId, filters) => {\r\n        return sortAndInjectProfiles(filterProfiles(profiles, filters), usersNotInGroups[groupId] || new Set());\r\n    },\r\n);\r\n\r\nexport function searchProfilesInGroup(state: GlobalState, groupId: Group['id'], term: string, skipCurrent = false, filters?: Filters): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesInGroup(state, groupId, filters), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function searchProfilesInGroupWithoutSorting(state: GlobalState, groupId: Group['id'], term: string, skipCurrent = false, filters?: Filters): UserProfile[] {\r\n    const profiles = filterProfilesStartingWithTerm(getProfilesInGroupWithoutSorting(state, groupId, filters), term);\r\n    if (skipCurrent) {\r\n        removeCurrentUserFromList(profiles, getCurrentUserId(state));\r\n    }\r\n\r\n    return profiles;\r\n}\r\n\r\nexport function getUserLastActivities(state: GlobalState): RelationOneToOne<UserProfile, number> {\r\n    return state.entities.users.lastActivity;\r\n}\r\n\r\nexport function getLastActivityForUserId(state: GlobalState, userId: UserProfile['id']): number {\r\n    return getUserLastActivities(state)[userId];\r\n}\r\n\r\nexport function checkIsFirstAdmin(currentUser: UserProfile, users: IDMappedObjects<UserProfile>): boolean {\r\n    if (!currentUser) {\r\n        return false;\r\n    }\r\n    if (!currentUser.roles.includes('system_admin')) {\r\n        return false;\r\n    }\r\n    for (const user of Object.values(users)) {\r\n        if (user.roles.includes('system_admin') && user.create_at < currentUser.create_at) {\r\n            // If the user in the list is an admin with create_at less than our user, than that user is older than the current one, so it can't be the first admin.\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport const isFirstAdmin = createSelector(\r\n    'isFirstAdmin',\r\n    (state: GlobalState) => getCurrentUser(state),\r\n    (state: GlobalState) => getUsers(state),\r\n    checkIsFirstAdmin,\r\n);\r\n\r\nexport const displayLastActiveLabel: (state: GlobalState, userId: string) => boolean = createSelector(\r\n    'displayLastActiveLabel',\r\n    (state: GlobalState, userId: string) => getStatusForUserId(state, userId),\r\n    (state: GlobalState, userId: string) => getLastActivityForUserId(state, userId),\r\n    (state: GlobalState, userId: string) => getUser(state, userId),\r\n    getConfig,\r\n    (userStatus, timestamp, user, config) => {\r\n        const currentTime = new Date();\r\n        const oneMin = 60 * 1000;\r\n\r\n        if (\r\n            (!userStatus || userStatus === General.ONLINE) ||\r\n            (timestamp && (currentTime.valueOf() - new Date(timestamp).valueOf()) <= oneMin) ||\r\n            user?.props?.show_last_active === 'false' ||\r\n            user?.is_bot ||\r\n            timestamp === 0 ||\r\n            config.EnableLastActiveTime !== 'true'\r\n        ) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n);\r\n\r\nexport const getLastActiveTimestampUnits: (state: GlobalState, userId: string) => string[] = createSelector(\r\n    'getLastActiveTimestampUnits',\r\n    (state: GlobalState, userId: string) => getLastActivityForUserId(state, userId),\r\n    (timestamp) => {\r\n        const timestampUnits = [\r\n            'now',\r\n            'minute',\r\n            'hour',\r\n        ];\r\n        const currentTime = new Date();\r\n        const twoDaysAgo = 48 * 60 * 60 * 1000;\r\n        if ((currentTime.valueOf() - new Date(timestamp).valueOf()) < twoDaysAgo) {\r\n            timestampUnits.push('day');\r\n        }\r\n        return timestampUnits;\r\n    },\r\n);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\nimport type {AnyAction, Reducer} from 'redux';\r\nimport {enableBatching} from 'redux-batched-actions';\r\n\r\nimport deepFreezeAndThrowOnMutation from 'mattermost-redux/utils/deep_freeze';\r\n\r\nexport function createReducer(...reducerSets: Array<Record<string, Reducer>>) {\r\n    // Merge each dictionary of reducers into a single combined reducer\r\n    let reducer: Reducer = combineReducers(reducerSets.reduce((fullSet, reducerSet) => {\r\n        return {...fullSet, ...reducerSet};\r\n    }, {}));\r\n\r\n    reducer = enableBatching(reducer);\r\n    reducer = enableFreezing(reducer);\r\n\r\n    return reducer;\r\n}\r\n\r\nfunction enableFreezing<S, A extends AnyAction>(reducer: Reducer<S, A>) {\r\n    // Skip the overhead of freezing in production.\r\n    // eslint-disable-next-line no-process-env\r\n    if (process.env.NODE_ENV === 'production') {\r\n        return reducer;\r\n    }\r\n\r\n    const frozenReducer = (state: S | undefined, action: A): S => {\r\n        const nextState = reducer(state, action);\r\n\r\n        if (nextState !== state) {\r\n            deepFreezeAndThrowOnMutation(nextState);\r\n        }\r\n\r\n        return nextState;\r\n    };\r\n\r\n    return frozenReducer;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {\r\n    OpenGraphMetadata,\r\n    Post,\r\n    PostsState,\r\n    PostOrderBlock,\r\n    MessageHistory,\r\n    PostAcknowledgement,\r\n    PostEmbed,\r\n    PostPreviewMetadata,\r\n} from '@mattermost/types/posts';\r\nimport type {Reaction} from '@mattermost/types/reactions';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {\r\n    RelationOneToOne,\r\n    IDMappedObjects,\r\n    RelationOneToMany,\r\n} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelTypes, PostTypes, UserTypes, ThreadTypes, CloudTypes, LimitsTypes} from 'mattermost-redux/action_types';\r\nimport {Posts} from 'mattermost-redux/constants';\r\nimport {comparePosts, isPermalink, shouldUpdatePost} from 'mattermost-redux/utils/post_utils';\r\n\r\nexport function removeUnneededMetadata(post: Post) {\r\n    if (!post.metadata) {\r\n        return post;\r\n    }\r\n\r\n    const metadata = {...post.metadata};\r\n    let changed = false;\r\n\r\n    // These fields are stored separately\r\n    if (metadata.emojis) {\r\n        Reflect.deleteProperty(metadata, 'emojis');\r\n        changed = true;\r\n    }\r\n\r\n    if (metadata.files) {\r\n        Reflect.deleteProperty(metadata, 'files');\r\n        changed = true;\r\n    }\r\n\r\n    if (metadata.reactions) {\r\n        Reflect.deleteProperty(metadata, 'reactions');\r\n        changed = true;\r\n    }\r\n\r\n    if (metadata.reactions) {\r\n        Reflect.deleteProperty(metadata, 'acknowledgements');\r\n        changed = true;\r\n    }\r\n\r\n    if (metadata.embeds) {\r\n        let embedsChanged = false;\r\n\r\n        const newEmbeds = metadata.embeds.map((embed) => {\r\n            switch (embed.type) {\r\n            case 'opengraph': {\r\n                const newEmbed = {...embed};\r\n                Reflect.deleteProperty(newEmbed, 'data');\r\n\r\n                embedsChanged = true;\r\n\r\n                return newEmbed;\r\n            }\r\n            case 'permalink': {\r\n                const permalinkEmbed = {...embed};\r\n                if (permalinkEmbed.data) {\r\n                    Reflect.deleteProperty(permalinkEmbed.data, 'post');\r\n                }\r\n                embedsChanged = true;\r\n\r\n                return permalinkEmbed;\r\n            }\r\n            default:\r\n                return embed;\r\n            }\r\n        });\r\n\r\n        if (embedsChanged) {\r\n            metadata.embeds = newEmbeds;\r\n            changed = true;\r\n        }\r\n    }\r\n\r\n    if (!changed) {\r\n        // Nothing changed\r\n        return post;\r\n    }\r\n\r\n    return {\r\n        ...post,\r\n        metadata,\r\n    };\r\n}\r\n\r\nexport function nextPostsReplies(state: {[x in Post['id']]: number} = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_POST:\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        const post = action.data;\r\n        if (!post.id || !post.root_id || !post.reply_count) {\r\n            // Ignoring pending posts and root posts\r\n            return state;\r\n        }\r\n\r\n        const newState = {...state};\r\n        newState[post.root_id] = post.reply_count;\r\n        return newState;\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts = Object.values(action.data.posts) as Post[];\r\n\r\n        if (posts.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n\r\n        for (const post of posts) {\r\n            if (post.root_id) {\r\n                nextState[post.root_id] = post.reply_count;\r\n            } else {\r\n                nextState[post.id] = post.reply_count;\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case PostTypes.POST_DELETED: {\r\n        const post: Post = action.data;\r\n\r\n        if (!state[post.root_id] && !state[post.id]) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        if (post.root_id && state[post.root_id]) {\r\n            nextState[post.root_id] -= 1;\r\n        }\r\n        if (!post.root_id && state[post.id]) {\r\n            Reflect.deleteProperty(nextState, post.id);\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function handlePosts(state: IDMappedObjects<Post> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_POST:\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        return handlePostReceived({...state}, action.data);\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts = Object.values(action.data.posts) as Post[];\r\n\r\n        if (posts.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n\r\n        for (const post of posts) {\r\n            handlePostReceived(nextState, post);\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case PostTypes.POST_DELETED: {\r\n        const post: Post = action.data;\r\n\r\n        if (!state[post.id]) {\r\n            return state;\r\n        }\r\n\r\n        // Mark the post as deleted\r\n        const nextState = {\r\n            ...state,\r\n            [post.id]: {\r\n                ...state[post.id],\r\n                state: Posts.POST_DELETED,\r\n                message: '',\r\n                file_ids: [],\r\n                has_reactions: false,\r\n            },\r\n        };\r\n\r\n        for (const otherPost of Object.values(state)) {\r\n            // Remove any of its comments\r\n            if (otherPost.root_id === post.id) {\r\n                Reflect.deleteProperty(nextState, otherPost.id);\r\n            }\r\n\r\n            // a deleted post may exist in some other post's\r\n            // embeds when its link is mentioned in the post message.\r\n            // We need to remove the deleted post from post embeds of all posts\r\n            // to ensure the deleted post's contents cannot be retrieved from the store.\r\n            if (otherPost.metadata && otherPost.metadata.embeds && otherPost.metadata.embeds.length > 0) {\r\n                // This will become the post's new embeds array.\r\n                // We'll add everything other than the deleted post's embed here.\r\n                const newEmbeds: PostEmbed[] = [];\r\n\r\n                for (const embed of otherPost.metadata.embeds) {\r\n                    if (embed.type === 'permalink' && embed.data && (embed.data as PostPreviewMetadata).post_id === post.id) {\r\n                        // skip if the embed is the deleted post\r\n                        continue;\r\n                    }\r\n\r\n                    // include everything else\r\n                    newEmbeds.push(embed);\r\n                }\r\n\r\n                // if newEmbeds changed, update post's embeds\r\n                if (newEmbeds.length !== otherPost.metadata.embeds.length) {\r\n                    // Since otherPost refers to the post from store, its frozen un immutable.\r\n                    // That's why cloning it and modifying required parts here.\r\n                    nextState[otherPost.id] = {\r\n                        ...nextState[otherPost.id],\r\n                        metadata: {\r\n                            ...nextState[otherPost.id].metadata,\r\n                            embeds: newEmbeds,\r\n                        },\r\n                    };\r\n                }\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        if (!state[post.id]) {\r\n            return state;\r\n        }\r\n\r\n        // Remove the post itself\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, post.id);\r\n\r\n        // Remove any of its comments\r\n        for (const otherPost of Object.values(state)) {\r\n            if (otherPost.root_id === post.id) {\r\n                Reflect.deleteProperty(nextState, otherPost.id);\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case PostTypes.POST_PINNED_CHANGED: {\r\n        const {postId, isPinned, updateAt} = action;\r\n\r\n        if (!state[postId]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [postId]: {\r\n                ...state[postId],\r\n                is_pinned: isPinned,\r\n                last_update_at: updateAt,\r\n            },\r\n        };\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId = action.data.id;\r\n\r\n        let postDeleted = false;\r\n\r\n        // Remove any posts from the channel left by the user\r\n        const nextState = {...state};\r\n        for (const post of Object.values(state)) {\r\n            if (post.channel_id === channelId) {\r\n                Reflect.deleteProperty(nextState, post.id);\r\n                postDeleted = true;\r\n            }\r\n        }\r\n\r\n        if (!postDeleted) {\r\n            // Nothing changed\r\n            return state;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ThreadTypes.FOLLOW_CHANGED_THREAD: {\r\n        const {id, following} = action.data;\r\n        const post = state[id];\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...post,\r\n                is_following: following,\r\n            },\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction handlePostReceived(nextState: any, post: Post, nestedPermalinkLevel?: number) {\r\n    let currentState = nextState;\r\n\r\n    // Check if post already exists in state or if nested permalink\r\n    if (!shouldUpdatePost(post, currentState[post.id]) || (nestedPermalinkLevel && nestedPermalinkLevel > 1)) {\r\n        return currentState;\r\n    }\r\n\r\n    // If post is a permalink and not nested (it links directly to the original message),\r\n    // and is missing embedded metadata, then update state with new post metadata\r\n    if (!nestedPermalinkLevel && isPermalink(post) && currentState[post.id] && !currentState[post.id].metadata && post.metadata) {\r\n        currentState[post.id] = {...currentState[post.id], ...post.metadata};\r\n    }\r\n\r\n    // Edited posts that don't have 'is_following' specified should maintain 'is_following' state\r\n    if (post.update_at > 0 && post.is_following == null && currentState[post.id]) {\r\n        post.is_following = currentState[post.id].is_following;\r\n    }\r\n\r\n    if (post.delete_at > 0) {\r\n        // We've received a deleted post, so mark the post as deleted if we already have it\r\n        if (currentState[post.id]) {\r\n            currentState[post.id] = {\r\n                ...removeUnneededMetadata(post),\r\n                state: Posts.POST_DELETED,\r\n                file_ids: [],\r\n                has_reactions: false,\r\n            };\r\n        }\r\n    } else if (post.metadata && post.metadata.embeds) {\r\n        post.metadata.embeds.forEach((embed) => {\r\n            if (embed.type === 'permalink') {\r\n                if (embed.data && 'post_id' in embed.data && embed.data.post) {\r\n                    currentState = handlePostReceived(currentState, embed.data.post, nestedPermalinkLevel ? nestedPermalinkLevel + 1 : 1);\r\n\r\n                    if (isPermalink(embed.data.post)) {\r\n                        currentState[post.id] = removeUnneededMetadata(post);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        currentState[post.id] = post;\r\n    } else {\r\n        currentState[post.id] = removeUnneededMetadata(post);\r\n    }\r\n\r\n    // Delete any pending post that existed for this post\r\n    if (post.pending_post_id && post.id !== post.pending_post_id && currentState[post.pending_post_id]) {\r\n        Reflect.deleteProperty(currentState, post.pending_post_id);\r\n    }\r\n\r\n    const rootPost: Post = currentState[post.root_id];\r\n    if (post.root_id && rootPost) {\r\n        const participants = rootPost.participants || [];\r\n        const nextRootPost = {...rootPost};\r\n        if (!participants.find((user: UserProfile) => user.id === post.user_id)) {\r\n            nextRootPost.participants = [...participants, {id: post.user_id}];\r\n        }\r\n\r\n        if (post.reply_count) {\r\n            nextRootPost.reply_count = post.reply_count;\r\n        }\r\n\r\n        currentState[post.root_id] = nextRootPost;\r\n    }\r\n\r\n    return currentState;\r\n}\r\n\r\nexport function handlePendingPosts(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        const post = action.data;\r\n\r\n        if (!post.pending_post_id) {\r\n            // This is not a pending post\r\n            return state;\r\n        }\r\n\r\n        const index = state.indexOf(post.pending_post_id);\r\n\r\n        if (index !== -1) {\r\n            // An entry already exists for this post\r\n            return state;\r\n        }\r\n\r\n        // Add the new pending post ID\r\n        const nextState = [...state];\r\n        nextState.push(post.pending_post_id);\r\n\r\n        return nextState;\r\n    }\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        const index = state.indexOf(post.id);\r\n\r\n        if (index === -1) {\r\n            // There's nothing to remove\r\n            return state;\r\n        }\r\n\r\n        // The post has been removed, so remove the entry for it\r\n        const nextState = [...state];\r\n        nextState.splice(index, 1);\r\n\r\n        return nextState;\r\n    }\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        if (!post.pending_post_id) {\r\n            // This isn't a pending post\r\n            return state;\r\n        }\r\n\r\n        const index = state.indexOf(post.pending_post_id);\r\n\r\n        if (index === -1) {\r\n            // There's nothing to remove\r\n            return state;\r\n        }\r\n\r\n        // The post has actually been created, so remove the entry for it\r\n        const nextState = [...state];\r\n        nextState.splice(index, 1);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function postsInChannel(state: Record<string, PostOrderBlock[]> = {}, action: MMReduxAction, prevPosts: IDMappedObjects<Post>, nextPosts: Record<string, Post>) {\r\n    switch (action.type) {\r\n    case PostTypes.RESET_POSTS_IN_CHANNEL: {\r\n        return {};\r\n    }\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        const post = action.data as Post;\r\n\r\n        if (action.features?.crtEnabled && post.root_id) {\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[post.channel_id];\r\n        if (!postsForChannel) {\r\n            // Don't save newly created posts until the channel has been loaded\r\n            return state;\r\n        }\r\n\r\n        const recentBlockIndex = postsForChannel.findIndex((block: PostOrderBlock) => block.recent);\r\n\r\n        let nextRecentBlock: PostOrderBlock;\r\n        if (recentBlockIndex === -1) {\r\n            nextRecentBlock = {\r\n                order: [],\r\n                recent: true,\r\n            };\r\n        } else {\r\n            const recentBlock = postsForChannel[recentBlockIndex];\r\n            nextRecentBlock = {\r\n                ...recentBlock,\r\n                order: [...recentBlock.order],\r\n            };\r\n        }\r\n\r\n        let changed = false;\r\n\r\n        // Add the new post to the channel\r\n        if (!nextRecentBlock.order.includes(post.id)) {\r\n            nextRecentBlock.order.unshift(post.id);\r\n            changed = true;\r\n        }\r\n\r\n        // If this is a newly created post, remove any pending post that exists for it\r\n        if (post.pending_post_id && post.id !== post.pending_post_id) {\r\n            const index = nextRecentBlock.order.indexOf(post.pending_post_id);\r\n\r\n            if (index !== -1) {\r\n                nextRecentBlock.order.splice(index, 1);\r\n\r\n                // Need to re-sort to make sure any other pending posts come first\r\n                nextRecentBlock.order.sort((a, b) => {\r\n                    return comparePosts(nextPosts[a], nextPosts[b]);\r\n                });\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        if (!changed) {\r\n            return state;\r\n        }\r\n\r\n        const nextPostsForChannel = [...postsForChannel];\r\n\r\n        if (recentBlockIndex === -1) {\r\n            nextPostsForChannel.push(nextRecentBlock);\r\n        } else {\r\n            nextPostsForChannel[recentBlockIndex] = nextRecentBlock;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [post.channel_id]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        if (action.features?.crtEnabled && post.root_id) {\r\n            return state;\r\n        }\r\n\r\n        // Receiving a single post doesn't usually affect the order of posts in a channel, except for when we've\r\n        // received a newly created post that was previously stored as pending\r\n\r\n        if (!post.pending_post_id) {\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[post.channel_id] || [];\r\n\r\n        const recentBlockIndex = postsForChannel.findIndex((block: PostOrderBlock) => block.recent);\r\n        if (recentBlockIndex === -1) {\r\n            // Nothing to do since there's no recent block and only the recent block should contain pending posts\r\n            return state;\r\n        }\r\n\r\n        const recentBlock = postsForChannel[recentBlockIndex];\r\n\r\n        // Replace the pending post with the newly created one\r\n        const index = recentBlock.order.indexOf(post.pending_post_id);\r\n        if (index === -1) {\r\n            // No pending post found to remove\r\n            return state;\r\n        }\r\n\r\n        const nextRecentBlock = {\r\n            ...recentBlock,\r\n            order: [...recentBlock.order],\r\n        };\r\n\r\n        nextRecentBlock.order[index] = post.id;\r\n\r\n        const nextPostsForChannel = [...postsForChannel];\r\n        nextPostsForChannel[recentBlockIndex] = nextRecentBlock;\r\n\r\n        return {\r\n            ...state,\r\n            [post.channel_id]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_IN_CHANNEL: {\r\n        const {recent, oldest} = action;\r\n        const order = action.data.order;\r\n\r\n        if (order.length === 0 && state[action.channelId]) {\r\n            // No new posts received when we already have posts\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[action.channelId] || [];\r\n        let nextPostsForChannel = [...postsForChannel];\r\n\r\n        if (recent) {\r\n            // The newly received block is now the most recent, so unmark the current most recent block\r\n            const recentBlockIndex = postsForChannel.findIndex((block: PostOrderBlock) => block.recent);\r\n            if (recentBlockIndex !== -1) {\r\n                const recentBlock = postsForChannel[recentBlockIndex];\r\n\r\n                if (recentBlock.order.length === order.length &&\r\n                        recentBlock.order[0] === order[0] &&\r\n                        recentBlock.order[recentBlock.order.length - 1] === order[order.length - 1]) {\r\n                    // The newly received posts are identical to the most recent block, so there's nothing to do\r\n                    return state;\r\n                }\r\n\r\n                // Unmark the most recent block since the new posts are more recent\r\n                const nextRecentBlock = {\r\n                    ...recentBlock,\r\n                    recent: false,\r\n                };\r\n\r\n                nextPostsForChannel[recentBlockIndex] = nextRecentBlock;\r\n            }\r\n        }\r\n\r\n        // Add the new most recent block\r\n        nextPostsForChannel.push({\r\n            order,\r\n            recent,\r\n            oldest,\r\n        });\r\n\r\n        // Merge overlapping blocks\r\n        nextPostsForChannel = mergePostBlocks(nextPostsForChannel, nextPosts);\r\n\r\n        return {\r\n            ...state,\r\n            [action.channelId]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_AFTER: {\r\n        const order = action.data.order;\r\n        const afterPostId = action.afterPostId;\r\n\r\n        if (order.length === 0) {\r\n            // No posts received\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[action.channelId] || [];\r\n\r\n        // Add a new block including the previous post and then have mergePostBlocks sort out any overlap or duplicates\r\n        const newBlock = {\r\n            order: [...order, afterPostId],\r\n            recent: action.recent,\r\n        };\r\n\r\n        let nextPostsForChannel = [...postsForChannel, newBlock];\r\n        nextPostsForChannel = mergePostBlocks(nextPostsForChannel, nextPosts);\r\n\r\n        return {\r\n            ...state,\r\n            [action.channelId]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_BEFORE: {\r\n        const {order} = action.data;\r\n        const {beforePostId, oldest} = action;\r\n\r\n        if (order.length === 0) {\r\n            // No posts received\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[action.channelId] || [];\r\n\r\n        // Add a new block including the next post and then have mergePostBlocks sort out any overlap or duplicates\r\n        const newBlock = {\r\n            order: [beforePostId, ...order],\r\n            recent: false,\r\n            oldest,\r\n        };\r\n\r\n        let nextPostsForChannel = [...postsForChannel, newBlock];\r\n        nextPostsForChannel = mergePostBlocks(nextPostsForChannel, nextPosts);\r\n\r\n        return {\r\n            ...state,\r\n            [action.channelId]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_SINCE: {\r\n        const order = action.data.order;\r\n\r\n        if (order.length === 0 && state[action.channelId]) {\r\n            // No new posts received when we already have posts\r\n            return state;\r\n        }\r\n\r\n        const postsForChannel = state[action.channelId] || [];\r\n\r\n        const recentBlockIndex = postsForChannel.findIndex((block: PostOrderBlock) => block.recent);\r\n        if (recentBlockIndex === -1) {\r\n            // Nothing to do since this shouldn't be dispatched if we haven't loaded the most recent posts yet\r\n            return state;\r\n        }\r\n\r\n        const recentBlock = postsForChannel[recentBlockIndex];\r\n\r\n        const mostOldestCreateAt = nextPosts[recentBlock.order[recentBlock.order.length - 1]].create_at;\r\n\r\n        const nextRecentBlock: PostOrderBlock = {\r\n            ...recentBlock,\r\n            order: [...recentBlock.order],\r\n        };\r\n\r\n        // Add any new posts to the most recent block while skipping ones that were only updated\r\n        for (let i = order.length - 1; i >= 0; i--) {\r\n            const postId = order[i];\r\n\r\n            if (!nextPosts[postId]) {\r\n                // the post was removed from the list\r\n                continue;\r\n            }\r\n\r\n            if (nextPosts[postId].create_at <= mostOldestCreateAt) {\r\n                // This is an old post\r\n                continue;\r\n            }\r\n\r\n            if (nextRecentBlock.order.indexOf(postId) !== -1) {\r\n                // This postId exists so no need to add it again\r\n                continue;\r\n            }\r\n\r\n            // This post is newer than what we have\r\n            nextRecentBlock.order.unshift(postId);\r\n        }\r\n\r\n        if (nextRecentBlock.order.length === recentBlock.order.length) {\r\n            // Nothing was added\r\n            return state;\r\n        }\r\n\r\n        nextRecentBlock.order.sort((a, b) => {\r\n            return comparePosts(nextPosts[a], nextPosts[b]);\r\n        });\r\n\r\n        const nextPostsForChannel = [...postsForChannel];\r\n        nextPostsForChannel[recentBlockIndex] = nextRecentBlock;\r\n\r\n        return {\r\n            ...state,\r\n            [action.channelId]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.POST_DELETED: {\r\n        const post = action.data;\r\n\r\n        // Deleting a post removes its comments from the order, but does not remove the post itself\r\n\r\n        const postsForChannel = state[post.channel_id] || [];\r\n        if (postsForChannel.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        let changed = false;\r\n\r\n        let nextPostsForChannel = [...postsForChannel];\r\n        for (let i = 0; i < nextPostsForChannel.length; i++) {\r\n            const block = nextPostsForChannel[i];\r\n\r\n            // Remove any comments for this post\r\n            const nextOrder = block.order.filter((postId: string) => prevPosts[postId].root_id !== post.id);\r\n\r\n            if (nextOrder.length !== block.order.length) {\r\n                nextPostsForChannel[i] = {\r\n                    ...block,\r\n                    order: nextOrder,\r\n                };\r\n\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        if (!changed) {\r\n            // Nothing was removed\r\n            return state;\r\n        }\r\n\r\n        nextPostsForChannel = removeNonRecentEmptyPostBlocks(nextPostsForChannel);\r\n\r\n        return {\r\n            ...state,\r\n            [post.channel_id]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        // Removing a post removes it as well as its comments\r\n\r\n        const postsForChannel = state[post.channel_id] || [];\r\n        if (postsForChannel.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        let changed = false;\r\n\r\n        // Remove the post and its comments from the channel\r\n        let nextPostsForChannel = [...postsForChannel];\r\n        for (let i = 0; i < nextPostsForChannel.length; i++) {\r\n            const block = nextPostsForChannel[i];\r\n\r\n            const nextOrder = block.order.filter((postId: string) => postId !== post.id && prevPosts[postId].root_id !== post.id);\r\n\r\n            if (nextOrder.length !== block.order.length) {\r\n                nextPostsForChannel[i] = {\r\n                    ...block,\r\n                    order: nextOrder,\r\n                };\r\n\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        if (!changed) {\r\n            // Nothing was removed\r\n            return state;\r\n        }\r\n\r\n        nextPostsForChannel = removeNonRecentEmptyPostBlocks(nextPostsForChannel);\r\n\r\n        return {\r\n            ...state,\r\n            [post.channel_id]: nextPostsForChannel,\r\n        };\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId = action.data.id;\r\n\r\n        if (!state[channelId]) {\r\n            // Nothing to do since we have no posts for this channel\r\n            return state;\r\n        }\r\n\r\n        // Remove the entry for the deleted channel\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, channelId);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function removeNonRecentEmptyPostBlocks(blocks: PostOrderBlock[]) {\r\n    return blocks.filter((block: PostOrderBlock) => block.order.length !== 0 || block.recent);\r\n}\r\n\r\nexport function mergePostBlocks(blocks: PostOrderBlock[], posts: Record<string, Post>) {\r\n    let nextBlocks = [...blocks];\r\n\r\n    // Remove any blocks that may have become empty by removing posts\r\n    nextBlocks = removeNonRecentEmptyPostBlocks(blocks);\r\n\r\n    // If a channel does not have any posts(Experimental feature where join and leave messages don't exist)\r\n    // return the previous state i.e an empty block\r\n    if (!nextBlocks.length) {\r\n        return blocks;\r\n    }\r\n\r\n    // Sort blocks so that the most recent one comes first\r\n    nextBlocks.sort((a, b) => {\r\n        const aStartsAt = posts[a.order[0]].create_at;\r\n        const bStartsAt = posts[b.order[0]].create_at;\r\n\r\n        return bStartsAt - aStartsAt;\r\n    });\r\n\r\n    // Merge adjacent blocks\r\n    let i = 0;\r\n    while (i < nextBlocks.length - 1) {\r\n        // Since we know the start of a is more recent than the start of b, they'll overlap if the last post in a is\r\n        // older than the first post in b\r\n        const a = nextBlocks[i];\r\n        const aEndsAt = posts[a.order[a.order.length - 1]].create_at;\r\n\r\n        const b = nextBlocks[i + 1];\r\n        const bStartsAt = posts[b.order[0]].create_at;\r\n\r\n        if (aEndsAt <= bStartsAt) {\r\n            // The blocks overlap, so combine them and remove the second block\r\n            nextBlocks[i] = {\r\n                order: mergePostOrder(a.order, b.order, posts),\r\n            };\r\n\r\n            nextBlocks[i].recent = a.recent || b.recent;\r\n            nextBlocks[i].oldest = a.oldest || b.oldest;\r\n\r\n            nextBlocks.splice(i + 1, 1);\r\n\r\n            // Do another iteration on this index since it may need to be merged into the next\r\n        } else {\r\n            // The blocks don't overlap, so move on to the next one\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    if (blocks.length === nextBlocks.length) {\r\n        // No changes were made\r\n        return blocks;\r\n    }\r\n\r\n    return nextBlocks;\r\n}\r\n\r\nexport function mergePostOrder(left: string[], right: string[], posts: Record<string, Post>) {\r\n    const result = [...left];\r\n\r\n    // Add without duplicates\r\n    const seen = new Set(left);\r\n    for (const id of right) {\r\n        if (seen.has(id)) {\r\n            continue;\r\n        }\r\n\r\n        result.push(id);\r\n    }\r\n\r\n    if (result.length === left.length) {\r\n        // No new items added\r\n        return left;\r\n    }\r\n\r\n    // Re-sort so that the most recent post comes first\r\n    result.sort((a, b) => posts[b].create_at - posts[a].create_at);\r\n\r\n    return result;\r\n}\r\n\r\nexport function postsInThread(state: RelationOneToMany<Post, Post> = {}, action: MMReduxAction, prevPosts: Record<string, Post>) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        if (!post.root_id) {\r\n            // Only store comments, not the root post\r\n            return state;\r\n        }\r\n\r\n        const postsForThread = state[post.root_id] || [];\r\n        const nextPostsForThread = [...postsForThread];\r\n\r\n        let changed = false;\r\n\r\n        if (!postsForThread.includes(post.id)) {\r\n            nextPostsForThread.push(post.id);\r\n            changed = true;\r\n        }\r\n\r\n        // If this is a new non-pending post, remove any pending post that exists for it\r\n        if (post.pending_post_id && post.id !== post.pending_post_id) {\r\n            const index = nextPostsForThread.indexOf(post.pending_post_id);\r\n\r\n            if (index !== -1) {\r\n                nextPostsForThread.splice(index, 1);\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        if (!changed) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [post.root_id]: nextPostsForThread,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_AFTER:\r\n    case PostTypes.RECEIVED_POSTS_BEFORE:\r\n    case PostTypes.RECEIVED_POSTS_IN_CHANNEL:\r\n    case PostTypes.RECEIVED_POSTS_SINCE: {\r\n        const newPosts: Post[] = Object.values(action.data.posts);\r\n\r\n        if (newPosts.length === 0) {\r\n            // Nothing to add\r\n            return state;\r\n        }\r\n\r\n        const nextState: Record<string, string[]> = {};\r\n\r\n        for (const post of newPosts) {\r\n            if (!post.root_id) {\r\n                // Only store comments, not the root post\r\n                continue;\r\n            }\r\n\r\n            const postsForThread = state[post.root_id] || [];\r\n            const nextPostsForThread = nextState[post.root_id] || [...postsForThread];\r\n\r\n            // Add the post to the thread\r\n            if (!nextPostsForThread.includes(post.id)) {\r\n                nextPostsForThread.push(post.id);\r\n            }\r\n\r\n            nextState[post.root_id] = nextPostsForThread;\r\n        }\r\n\r\n        if (Object.keys(nextState).length === 0) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            ...nextState,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS_IN_THREAD: {\r\n        const newPosts: Post[] = Object.values(action.data.posts);\r\n\r\n        if (newPosts.length === 0) {\r\n            // Nothing to add\r\n            return state;\r\n        }\r\n\r\n        const postsForThread = state[action.rootId] || [];\r\n        const nextPostsForThread = [...postsForThread];\r\n\r\n        for (const post of newPosts) {\r\n            if (post.root_id !== action.rootId) {\r\n                // Only store comments\r\n                continue;\r\n            }\r\n\r\n            if (nextPostsForThread.includes(post.id)) {\r\n                // Don't store duplicates\r\n                continue;\r\n            }\r\n\r\n            nextPostsForThread.push(post.id);\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.rootId]: nextPostsForThread,\r\n        };\r\n    }\r\n\r\n    case PostTypes.POST_DELETED: {\r\n        const post = action.data;\r\n\r\n        const postsForThread = state[post.id];\r\n        if (!postsForThread) {\r\n            // Nothing to remove\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, post.id);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        if (post.root_id) {\r\n            // This is a comment, so remove it from the thread\r\n            const postsForThread = state[post.root_id];\r\n            if (!postsForThread) {\r\n                return state;\r\n            }\r\n\r\n            const index = postsForThread.findIndex((postId) => postId === post.id);\r\n            if (index === -1) {\r\n                return state;\r\n            }\r\n\r\n            const nextPostsForThread = [...postsForThread];\r\n            nextPostsForThread.splice(index, 1);\r\n\r\n            return {\r\n                ...state,\r\n                [post.root_id]: nextPostsForThread,\r\n            };\r\n        }\r\n\r\n        // This is not a comment, so remove any comments on it\r\n        const postsForThread = state[post.id];\r\n        if (!postsForThread) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, post.id);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId = action.data.id;\r\n\r\n        let postDeleted = false;\r\n\r\n        // Remove entries for any thread in the channel\r\n        const nextState = {...state};\r\n        for (const rootId of Object.keys(state)) {\r\n            if (prevPosts[rootId] && prevPosts[rootId].channel_id === channelId) {\r\n                Reflect.deleteProperty(nextState, rootId);\r\n                postDeleted = true;\r\n            }\r\n        }\r\n\r\n        if (!postDeleted) {\r\n            // Nothing was actually removed\r\n            return state;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function postEditHistory(state: Post[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_POST_HISTORY:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction currentFocusedPostId(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_FOCUSED_POST:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function reactions(state: RelationOneToOne<Post, Record<string, Reaction>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_REACTION: {\r\n        const reaction = action.data as Reaction;\r\n        const nextReactions = {...(state[reaction.post_id] || {})};\r\n        nextReactions[reaction.user_id + '-' + reaction.emoji_name] = reaction;\r\n\r\n        return {\r\n            ...state,\r\n            [reaction.post_id]: nextReactions,\r\n        };\r\n    }\r\n    case PostTypes.REACTION_DELETED: {\r\n        const reaction = action.data;\r\n        const nextReactions = {...(state[reaction.post_id] || {})};\r\n        if (!nextReactions[reaction.user_id + '-' + reaction.emoji_name]) {\r\n            return state;\r\n        }\r\n\r\n        Reflect.deleteProperty(nextReactions, reaction.user_id + '-' + reaction.emoji_name);\r\n\r\n        return {\r\n            ...state,\r\n            [reaction.post_id]: nextReactions,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        return storeReactionsForPost(state, post);\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce(storeReactionsForPost, state);\r\n    }\r\n\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        if (post && state[post.id]) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, post.id);\r\n\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function acknowledgements(state: RelationOneToOne<Post, Record<UserProfile['id'], number>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.CREATE_ACK_POST_SUCCESS: {\r\n        const ack = action.data as PostAcknowledgement;\r\n        const oldState = state[ack.post_id] || {};\r\n\r\n        return {\r\n            ...state,\r\n            [ack.post_id]: {\r\n                ...oldState,\r\n                [ack.user_id]: ack.acknowledged_at,\r\n            },\r\n        };\r\n    }\r\n    case PostTypes.DELETE_ACK_POST_SUCCESS: {\r\n        const ack = action.data;\r\n\r\n        if (!state[ack.post_id] || !state[ack.post_id][ack.user_id]) {\r\n            return state;\r\n        }\r\n\r\n        // avoid a race condition\r\n        const acknowledgedAt = state[ack.post_id][ack.user_id];\r\n        if (acknowledgedAt > ack.acknowledged_at) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...(state[ack.post_id])};\r\n        Reflect.deleteProperty(nextState, ack.user_id);\r\n\r\n        return {\r\n            ...state,\r\n            [ack.post_id]: {\r\n                ...nextState,\r\n            },\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        return storeAcknowledgementsForPost(state, post);\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce(storeAcknowledgementsForPost, state);\r\n    }\r\n\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        if (post && state[post.id]) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, post.id);\r\n\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction storeReactionsForPost(state: RelationOneToOne<Post, Record<string, Reaction>>, post: Post) {\r\n    if (!post.metadata || post.delete_at > 0) {\r\n        return state;\r\n    }\r\n\r\n    const reactionsForPost: Record<string, Reaction> = {};\r\n    if (post.metadata.reactions && post.metadata.reactions.length > 0) {\r\n        for (const reaction of post.metadata.reactions) {\r\n            reactionsForPost[reaction.user_id + '-' + reaction.emoji_name] = reaction;\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [post.id]: reactionsForPost,\r\n    };\r\n}\r\n\r\nfunction storeAcknowledgementsForPost(state: any, post: Post) {\r\n    if (\r\n        !post.metadata ||\r\n        !post.metadata.acknowledgements ||\r\n        !post.metadata.acknowledgements.length ||\r\n        post.delete_at > 0\r\n    ) {\r\n        return state;\r\n    }\r\n\r\n    const acknowledgementsForPost: Record<UserProfile['id'], number> = {};\r\n    if (post?.metadata?.acknowledgements && post.metadata.acknowledgements.length > 0) {\r\n        for (const ack of post.metadata.acknowledgements) {\r\n            acknowledgementsForPost[ack.user_id] = ack.acknowledged_at;\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [post.id]: acknowledgementsForPost,\r\n    };\r\n}\r\n\r\nexport function openGraph(state: RelationOneToOne<Post, Record<string, OpenGraphMetadata>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        return storeOpenGraphForPost(state, post);\r\n    }\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce(storeOpenGraphForPost, state);\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction storeOpenGraphForPost(state: any, post: Post) {\r\n    if (!post.metadata || !post.metadata.embeds) {\r\n        return state;\r\n    }\r\n\r\n    return post.metadata.embeds.reduce((nextState, embed) => {\r\n        // If post contains a permalink, we need to store opengraph data for the embedded message\r\n        if (embed.type === 'permalink' && embed.data && 'post' in embed.data && embed.data.post) {\r\n            const previewPost = embed.data.post;\r\n\r\n            if (previewPost.metadata && previewPost.metadata.embeds) {\r\n                return previewPost.metadata.embeds.reduce((nextState, embed) => {\r\n                    if (embed.type !== 'opengraph' || !embed.data || nextState[previewPost.id]) {\r\n                        return nextState;\r\n                    }\r\n\r\n                    return {\r\n                        ...nextState,\r\n                        [previewPost.id]: {[embed.url]: embed.data},\r\n                    };\r\n                }, nextState);\r\n            }\r\n        }\r\n\r\n        if (embed.type !== 'opengraph' || !embed.data) {\r\n            // Not an OpenGraph embed\r\n            return nextState;\r\n        }\r\n\r\n        const postIdState = nextState[post.id] ? {...nextState[post.id], [embed.url]: embed.data} : {[embed.url]: embed.data};\r\n        return {\r\n            ...nextState,\r\n            [post.id]: postIdState,\r\n        };\r\n    }, state);\r\n}\r\n\r\nfunction messagesHistory(state: Partial<MessageHistory> = {\r\n    messages: [],\r\n    index: {\r\n        post: -1,\r\n        comment: -1,\r\n    },\r\n}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PostTypes.ADD_MESSAGE_INTO_HISTORY: {\r\n        const nextIndex: Record<string, number> = {};\r\n        let nextMessages = state.messages ? [...state.messages] : [];\r\n        nextMessages.push(action.data);\r\n        nextIndex[Posts.MESSAGE_TYPES.POST] = nextMessages.length;\r\n        nextIndex[Posts.MESSAGE_TYPES.COMMENT] = nextMessages.length;\r\n\r\n        if (nextMessages.length > Posts.MAX_PREV_MSGS) {\r\n            nextMessages = nextMessages.slice(1, Posts.MAX_PREV_MSGS + 1);\r\n        }\r\n\r\n        return {\r\n            messages: nextMessages,\r\n            index: nextIndex,\r\n        };\r\n    }\r\n    case PostTypes.RESET_HISTORY_INDEX: {\r\n        const index: Record<string, number> = {};\r\n        index[Posts.MESSAGE_TYPES.POST] = -1;\r\n        index[Posts.MESSAGE_TYPES.COMMENT] = -1;\r\n\r\n        const messages = state.messages || [];\r\n        const nextIndex = state.index ? {...state.index} : index;\r\n        nextIndex[action.data] = messages.length;\r\n        return {\r\n            messages: state.messages,\r\n            index: nextIndex,\r\n        };\r\n    }\r\n    case PostTypes.MOVE_HISTORY_INDEX_BACK: {\r\n        const index: Record<string, number> = {};\r\n        index[Posts.MESSAGE_TYPES.POST] = -1;\r\n        index[Posts.MESSAGE_TYPES.COMMENT] = -1;\r\n\r\n        const nextIndex = state.index ? {...state.index} : index;\r\n        if (nextIndex[action.data] > 0) {\r\n            nextIndex[action.data]--;\r\n        }\r\n        return {\r\n            messages: state.messages,\r\n            index: nextIndex,\r\n        };\r\n    }\r\n    case PostTypes.MOVE_HISTORY_INDEX_FORWARD: {\r\n        const index: Record<string, number> = {};\r\n        index[Posts.MESSAGE_TYPES.POST] = -1;\r\n        index[Posts.MESSAGE_TYPES.COMMENT] = -1;\r\n\r\n        const messages = state.messages || [];\r\n        const nextIndex = state.index ? {...state.index} : index;\r\n        if (nextIndex[action.data] < messages.length) {\r\n            nextIndex[action.data]++;\r\n        }\r\n        return {\r\n            messages: state.messages,\r\n            index: nextIndex,\r\n        };\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS: {\r\n        const index: Record<string, number> = {};\r\n        index[Posts.MESSAGE_TYPES.POST] = -1;\r\n        index[Posts.MESSAGE_TYPES.COMMENT] = -1;\r\n\r\n        return {\r\n            messages: [],\r\n            index,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport const zeroStateLimitedViews = {\r\n    threads: {},\r\n    channels: {},\r\n};\r\n\r\nexport function limitedViews(\r\n    state: PostsState['limitedViews'] = zeroStateLimitedViews,\r\n    action: MMReduxAction,\r\n): PostsState['limitedViews'] {\r\n    switch (action.type) {\r\n    case PostTypes.RECEIVED_POSTS:\r\n    case PostTypes.RECEIVED_POSTS_AFTER:\r\n    case PostTypes.RECEIVED_POSTS_BEFORE:\r\n    case PostTypes.RECEIVED_POSTS_SINCE:\r\n    case PostTypes.RECEIVED_POSTS_IN_CHANNEL: {\r\n        if (action.data.first_inaccessible_post_time && action.channelId) {\r\n            return {\r\n                ...state,\r\n                channels: {\r\n                    ...state.channels,\r\n                    [action.channelId]: action.data.first_inaccessible_post_time || 0,\r\n                },\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case PostTypes.RECEIVED_POSTS_IN_THREAD: {\r\n        if (action.data.first_inaccessible_post_time && action.rootId) {\r\n            return {\r\n                ...state,\r\n                threads: {\r\n                    ...state.threads,\r\n                    [action.rootId]: action.data.first_inaccessible_post_time || 0,\r\n                },\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_LIMITS: {\r\n        const {limits} = action.data;\r\n\r\n        // If limits change and there is no message limit any more (e.g. upgrade to non limited plan),\r\n        // this state is stale and should be dumped.\r\n        if (!limits?.messages || (!limits?.messages?.history && limits?.messages?.history !== 0)) {\r\n            return zeroStateLimitedViews;\r\n        }\r\n        return state;\r\n    }\r\n    case LimitsTypes.RECEIVED_APP_LIMITS: {\r\n        const serverLimits = action.data;\r\n\r\n        // If server limits change and there is no post history limit any more (e.g. upgrade to unlimited plan),\r\n        // this state is stale and should be dumped.\r\n        if (!serverLimits?.postHistoryLimit || serverLimits.postHistoryLimit <= 0) {\r\n            return zeroStateLimitedViews;\r\n        }\r\n        return state;\r\n    }\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId = action.data.id;\r\n        if (!state.channels[channelId]) {\r\n            return state;\r\n        }\r\n        const newState = {\r\n            threads: state.threads,\r\n            channels: {...state.channels},\r\n        };\r\n        delete newState.channels[channelId];\r\n        return newState;\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default function reducer(state: Partial<PostsState> = {}, action: MMReduxAction) {\r\n    const nextPosts = handlePosts(state.posts, action);\r\n    const nextPostsInChannel = postsInChannel(state.postsInChannel, action, state.posts!, nextPosts);\r\n\r\n    const nextState = {\r\n\r\n        // Object mapping post ids to post objects\r\n        posts: nextPosts,\r\n\r\n        // Object mapping post ids to replies count\r\n        postsReplies: nextPostsReplies(state.postsReplies, action),\r\n\r\n        // Array that contains the pending post ids for those messages that are in transition to being created\r\n        pendingPostIds: handlePendingPosts(state.pendingPostIds, action),\r\n\r\n        // Object mapping channel ids to an array of posts ids in that channel with the most recent post first\r\n        postsInChannel: nextPostsInChannel,\r\n\r\n        // Object mapping post root ids to an array of posts ids of comments (but not the root post) in that thread\r\n        // with no guaranteed order\r\n        postsInThread: postsInThread(state.postsInThread, action, state.posts!),\r\n\r\n        // The post history of selected post\r\n        postEditHistory: postEditHistory(state.postEditHistory, action),\r\n\r\n        // The current selected focused post (permalink view)\r\n        currentFocusedPostId: currentFocusedPostId(state.currentFocusedPostId, action),\r\n\r\n        // Object mapping post ids to an object of emoji reactions using userId-emojiName as keys\r\n        reactions: reactions(state.reactions, action),\r\n\r\n        // Object mapping URLs to their relevant opengraph metadata for link previews\r\n        openGraph: openGraph(state.openGraph, action),\r\n\r\n        // History of posts and comments\r\n        messagesHistory: messagesHistory(state.messagesHistory, action),\r\n        acknowledgements: acknowledgements(state.acknowledgements, action),\r\n\r\n        // For cloud instances with a message limit,\r\n        // whether this particular view has messages that are hidden\r\n        // because of the cloud workspace limit.\r\n        limitedViews: limitedViews(state.limitedViews, action),\r\n    };\r\n\r\n    if (state.posts === nextState.posts && state.postsInChannel === nextState.postsInChannel &&\r\n        state.postsInThread === nextState.postsInThread &&\r\n        state.pendingPostIds === nextState.pendingPostIds &&\r\n        state.postEditHistory === nextState.postEditHistory &&\r\n        state.currentFocusedPostId === nextState.currentFocusedPostId &&\r\n        state.reactions === nextState.reactions &&\r\n        state.acknowledgements === nextState.acknowledgements &&\r\n        state.openGraph === nextState.openGraph &&\r\n        state.messagesHistory === nextState.messagesHistory &&\r\n        state.limitedViews === nextState.limitedViews) {\r\n        // None of the children have changed so don't even let the parent object change\r\n        return state;\r\n    }\r\n\r\n    return nextState;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {zeroStateLimitedViews} from '../reducers/entities/posts';\r\n\r\nconst state: GlobalState = {\r\n    entities: {\r\n        general: {\r\n            config: {},\r\n            license: {},\r\n            serverVersion: '',\r\n            firstAdminVisitMarketplaceStatus: false,\r\n            firstAdminCompleteSetup: false,\r\n            customProfileAttributes: {},\r\n            cwsAvailability: 'pending',\r\n        },\r\n        users: {\r\n            currentUserId: '',\r\n            isManualStatus: {},\r\n            mySessions: [],\r\n            myAudits: [],\r\n            profiles: {},\r\n            profilesInTeam: {},\r\n            profilesNotInTeam: {},\r\n            profilesWithoutTeam: new Set(),\r\n            profilesInChannel: {},\r\n            profilesNotInChannel: {},\r\n            profilesInGroup: {},\r\n            profilesNotInGroup: {},\r\n            statuses: {},\r\n            stats: {},\r\n            filteredStats: {},\r\n            myUserAccessTokens: {},\r\n            lastActivity: {},\r\n            dndEndTimes: {},\r\n        },\r\n        limits: {\r\n            serverLimits: {\r\n                activeUserCount: 0,\r\n                maxUsersLimit: 0,\r\n            },\r\n        },\r\n        teams: {\r\n            currentTeamId: '',\r\n            teams: {},\r\n            myMembers: {},\r\n            membersInTeam: {},\r\n            stats: {},\r\n            groupsAssociatedToTeam: {},\r\n            totalCount: 0,\r\n            contentFlaggingStatus: {},\r\n        },\r\n        channels: {\r\n            currentChannelId: '',\r\n            channels: {},\r\n            channelsInTeam: {},\r\n            myMembers: {},\r\n            membersInChannel: {},\r\n            stats: {},\r\n            roles: {},\r\n            groupsAssociatedToChannel: {},\r\n            totalCount: 0,\r\n            manuallyUnread: {},\r\n            channelModerations: {},\r\n            channelMemberCountsByGroup: {},\r\n            messageCounts: {},\r\n            channelsMemberCount: {},\r\n        },\r\n        channelBookmarks: {\r\n            byChannelId: {},\r\n        },\r\n        posts: {\r\n            posts: {},\r\n            postsReplies: {},\r\n            postsInChannel: {},\r\n            postsInThread: {},\r\n            pendingPostIds: [],\r\n            postEditHistory: [],\r\n            reactions: {},\r\n            openGraph: {},\r\n            currentFocusedPostId: '',\r\n            messagesHistory: {\r\n                messages: [],\r\n                index: {\r\n                    post: -1,\r\n                    comment: -1,\r\n                },\r\n            },\r\n            limitedViews: zeroStateLimitedViews,\r\n            acknowledgements: {},\r\n        },\r\n        threads: {\r\n            threadsInTeam: {},\r\n            unreadThreadsInTeam: {},\r\n            threads: {},\r\n            counts: {},\r\n            countsIncludingDirect: {},\r\n        },\r\n        preferences: {\r\n            myPreferences: {},\r\n            userPreferences: {},\r\n        },\r\n        bots: {\r\n            accounts: {},\r\n        },\r\n        admin: {\r\n            logs: [],\r\n            plainLogs: [],\r\n            audits: {},\r\n            config: {},\r\n            environmentConfig: {},\r\n            complianceReports: {},\r\n            ldapGroups: {},\r\n            ldapGroupsCount: 0,\r\n            userAccessTokens: {},\r\n            clusterInfo: [],\r\n            analytics: {},\r\n            teamAnalytics: {},\r\n            dataRetentionCustomPolicies: {},\r\n            dataRetentionCustomPoliciesCount: 0,\r\n            prevTrialLicense: {},\r\n            accessControlPolicies: {},\r\n            channelsForAccessControlPolicy: {},\r\n        },\r\n        jobs: {\r\n            jobs: {},\r\n            jobsByTypeList: {},\r\n        },\r\n        integrations: {\r\n            incomingHooks: {},\r\n            incomingHooksTotalCount: 0,\r\n            outgoingHooks: {},\r\n            oauthApps: {},\r\n            systemCommands: {},\r\n            commands: {},\r\n            appsBotIDs: [],\r\n            appsOAuthAppIDs: [],\r\n            dialogTriggerId: '',\r\n            outgoingOAuthConnections: {},\r\n        },\r\n        files: {\r\n            files: {},\r\n            filesFromSearch: {},\r\n            fileIdsByPostId: {},\r\n        },\r\n        emojis: {\r\n            customEmoji: {},\r\n            nonExistentEmoji: new Set(),\r\n        },\r\n        search: {\r\n            results: [],\r\n            fileResults: [],\r\n            current: {},\r\n            matches: {},\r\n            flagged: [],\r\n            pinned: {},\r\n            isSearchingTerm: false,\r\n            isSearchGettingMore: false,\r\n            isLimitedResults: -1,\r\n        },\r\n        typing: {},\r\n        roles: {\r\n            roles: {},\r\n            pending: new Set(),\r\n        },\r\n        schemes: {\r\n            schemes: {},\r\n        },\r\n        groups: {\r\n            groups: {},\r\n            syncables: {},\r\n            myGroups: [],\r\n            stats: {},\r\n        },\r\n        channelCategories: {\r\n            byId: {},\r\n            orderByTeam: {},\r\n        },\r\n        apps: {\r\n            main: {\r\n                bindings: [],\r\n                forms: {},\r\n            },\r\n            rhs: {\r\n                bindings: [],\r\n                forms: {},\r\n            },\r\n            pluginEnabled: true,\r\n        },\r\n        cloud: {\r\n            limits: {\r\n                limits: {},\r\n                limitsLoaded: false,\r\n            },\r\n            errors: {},\r\n        },\r\n        hostedCustomer: {\r\n            products: {\r\n                products: {},\r\n                productsLoaded: false,\r\n            },\r\n        },\r\n        usage: {\r\n            files: {\r\n                totalStorage: 0,\r\n                totalStorageLoaded: false,\r\n            },\r\n            messages: {\r\n                history: 0,\r\n                historyLoaded: false,\r\n            },\r\n            teams: {\r\n                active: 0,\r\n                cloudArchived: 0,\r\n                teamsLoaded: false,\r\n            },\r\n        },\r\n        scheduledPosts: {\r\n            byId: {},\r\n            byTeamId: {},\r\n            errorsByTeamId: {},\r\n            byChannelOrThreadId: {},\r\n        },\r\n        contentFlagging: {},\r\n    },\r\n    errors: [],\r\n    requests: {\r\n        channels: {\r\n            getAllChannels: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            getChannels: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            myChannels: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            createChannel: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        general: {\r\n            websocket: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        posts: {\r\n            createPost: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            editPost: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            getPostThread: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        teams: {\r\n            getTeams: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        users: {\r\n            login: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            logout: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            autocompleteUsers: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            updateMe: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        admin: {\r\n            createCompliance: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        files: {\r\n            uploadFiles: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n        roles: {\r\n            getRolesByNames: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            getRoleByName: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            getRole: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n            editRole: {\r\n                status: 'not_started',\r\n                error: null,\r\n            },\r\n        },\r\n    },\r\n    websocket: {\r\n        connected: false,\r\n        lastConnectAt: 0,\r\n        lastDisconnectAt: 0,\r\n        connectionId: '',\r\n        serverHostname: '',\r\n    },\r\n};\r\nexport default state;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {AccessControlPolicy} from '@mattermost/types/access_control';\r\nimport type {ClusterInfo, AnalyticsRow, AnalyticsState, AdminState} from '@mattermost/types/admin';\r\nimport type {Audit} from '@mattermost/types/audits';\r\nimport type {Compliance} from '@mattermost/types/compliance';\r\nimport type {AdminConfig, EnvironmentConfig} from '@mattermost/types/config';\r\nimport type {DataRetentionCustomPolicy} from '@mattermost/types/data_retention';\r\nimport type {MixedUnlinkedGroupRedux} from '@mattermost/types/groups';\r\nimport type {PluginRedux, PluginStatusRedux} from '@mattermost/types/plugins';\r\nimport type {SamlCertificateStatus, SamlMetadataResponse} from '@mattermost/types/saml';\r\nimport type {UserAccessToken, UserProfile} from '@mattermost/types/users';\r\nimport type {RelationOneToOne, IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {AdminTypes, UserTypes} from 'mattermost-redux/action_types';\r\nimport {Stats} from 'mattermost-redux/constants';\r\nimport PluginState from 'mattermost-redux/constants/plugins';\r\n\r\nfunction logs(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_LOGS: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction plainLogs(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_PLAIN_LOGS: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction audits(state: Record<string, Audit> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_AUDITS: {\r\n        const nextState = {...state};\r\n        for (const audit of action.data) {\r\n            nextState[audit.id] = audit;\r\n        }\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction config(state: Partial<AdminConfig> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_CONFIG: {\r\n        return action.data;\r\n    }\r\n    case AdminTypes.ENABLED_PLUGIN: {\r\n        const nextPluginSettings = {...state.PluginSettings!};\r\n        const nextPluginStates = {...nextPluginSettings.PluginStates};\r\n        nextPluginStates[action.data] = {Enable: true};\r\n        nextPluginSettings.PluginStates = nextPluginStates;\r\n        return {...state, PluginSettings: nextPluginSettings};\r\n    }\r\n    case AdminTypes.DISABLED_PLUGIN: {\r\n        const nextPluginSettings = {...state.PluginSettings!};\r\n        const nextPluginStates = {...nextPluginSettings.PluginStates};\r\n        nextPluginStates[action.data] = {Enable: false};\r\n        nextPluginSettings.PluginStates = nextPluginStates;\r\n        return {...state, PluginSettings: nextPluginSettings};\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction prevTrialLicense(state: Partial<AdminConfig> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.PREV_TRIAL_LICENSE_SUCCESS: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction environmentConfig(state: Partial<EnvironmentConfig> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_ENVIRONMENT_CONFIG: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction complianceReports(state: Record<string, Compliance> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_COMPLIANCE_REPORT: {\r\n        const nextState = {...state};\r\n        nextState[action.data.id] = action.data;\r\n        return nextState;\r\n    }\r\n    case AdminTypes.RECEIVED_COMPLIANCE_REPORTS: {\r\n        const nextState = {...state};\r\n        for (const report of action.data) {\r\n            nextState[report.id] = report;\r\n        }\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction clusterInfo(state: ClusterInfo[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_CLUSTER_STATUS: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction samlCertStatus(state: Partial<SamlCertificateStatus> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_SAML_CERT_STATUS: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function convertAnalyticsRowsToStats(data: AnalyticsRow[], name: string): AnalyticsState {\r\n    const stats: AnalyticsState = {};\r\n    const clonedData = [...data];\r\n\r\n    if (name === 'post_counts_day') {\r\n        clonedData.reverse();\r\n        stats[Stats.POST_PER_DAY] = clonedData;\r\n        return stats;\r\n    }\r\n\r\n    if (name === 'bot_post_counts_day') {\r\n        clonedData.reverse();\r\n        stats[Stats.BOT_POST_PER_DAY] = clonedData;\r\n        return stats;\r\n    }\r\n\r\n    if (name === 'user_counts_with_posts_day') {\r\n        clonedData.reverse();\r\n        stats[Stats.USERS_WITH_POSTS_PER_DAY] = clonedData;\r\n        return stats;\r\n    }\r\n\r\n    clonedData.forEach((row) => {\r\n        let key;\r\n        switch (row.name) {\r\n        case 'channel_open_count':\r\n            key = Stats.TOTAL_PUBLIC_CHANNELS;\r\n            break;\r\n        case 'channel_private_count':\r\n            key = Stats.TOTAL_PRIVATE_GROUPS;\r\n            break;\r\n        case 'post_count':\r\n            key = Stats.TOTAL_POSTS;\r\n            break;\r\n        case 'unique_user_count':\r\n            key = Stats.TOTAL_USERS;\r\n            break;\r\n        case 'inactive_user_count':\r\n            key = Stats.TOTAL_INACTIVE_USERS;\r\n            break;\r\n        case 'team_count':\r\n            key = Stats.TOTAL_TEAMS;\r\n            break;\r\n        case 'total_websocket_connections':\r\n            key = Stats.TOTAL_WEBSOCKET_CONNECTIONS;\r\n            break;\r\n        case 'total_master_db_connections':\r\n            key = Stats.TOTAL_MASTER_DB_CONNECTIONS;\r\n            break;\r\n        case 'total_read_db_connections':\r\n            key = Stats.TOTAL_READ_DB_CONNECTIONS;\r\n            break;\r\n        case 'daily_active_users':\r\n            key = Stats.DAILY_ACTIVE_USERS;\r\n            break;\r\n        case 'monthly_active_users':\r\n            key = Stats.MONTHLY_ACTIVE_USERS;\r\n            break;\r\n        case 'incoming_webhook_count':\r\n            key = Stats.TOTAL_IHOOKS;\r\n            break;\r\n        case 'outgoing_webhook_count':\r\n            key = Stats.TOTAL_OHOOKS;\r\n            break;\r\n        case 'command_count':\r\n            key = Stats.TOTAL_COMMANDS;\r\n            break;\r\n        case 'session_count':\r\n            key = Stats.TOTAL_SESSIONS;\r\n            break;\r\n        case 'registered_users':\r\n            key = Stats.REGISTERED_USERS;\r\n            break;\r\n        case 'total_file_count':\r\n            key = Stats.TOTAL_FILE_COUNT;\r\n            break;\r\n        case 'total_file_size':\r\n            key = Stats.TOTAL_FILE_SIZE;\r\n            break;\r\n        }\r\n\r\n        if (key) {\r\n            stats[key] = row.value;\r\n        }\r\n    });\r\n\r\n    return stats;\r\n}\r\n\r\nfunction analytics(state: AdminState['analytics'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_SYSTEM_ANALYTICS: {\r\n        const stats = convertAnalyticsRowsToStats(action.data, action.name);\r\n        return {...state, ...stats};\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction teamAnalytics(state: AdminState['teamAnalytics'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_TEAM_ANALYTICS: {\r\n        const nextState = {...state};\r\n        const stats = convertAnalyticsRowsToStats(action.data, action.name);\r\n        const analyticsForTeam = {...(nextState[action.teamId] || {}), ...stats};\r\n        nextState[action.teamId] = analyticsForTeam;\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction userAccessTokens(state: Record<string, UserAccessToken> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_USER_ACCESS_TOKEN: {\r\n        return {...state, [action.data.id]: action.data};\r\n    }\r\n    case AdminTypes.RECEIVED_USER_ACCESS_TOKENS_FOR_USER: {\r\n        const nextState: any = {};\r\n\r\n        for (const uat of action.data) {\r\n            nextState[uat.id] = uat;\r\n        }\r\n\r\n        return {...state, ...nextState};\r\n    }\r\n    case UserTypes.REVOKED_USER_ACCESS_TOKEN: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data);\r\n        return {...nextState};\r\n    }\r\n    case UserTypes.ENABLED_USER_ACCESS_TOKEN: {\r\n        const token = {...state[action.data], is_active: true};\r\n        return {...state, [action.data]: token};\r\n    }\r\n    case UserTypes.DISABLED_USER_ACCESS_TOKEN: {\r\n        const token = {...state[action.data], is_active: false};\r\n        return {...state, [action.data]: token};\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction userAccessTokensByUser(state: RelationOneToOne<UserProfile, Record<string, UserAccessToken>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_USER_ACCESS_TOKEN: { // UserAccessToken\r\n        const nextUserState: UserAccessToken | Record<string, UserAccessToken> = {...(state[action.data.user_id] || {})};\r\n        nextUserState[action.data.id] = action.data;\r\n\r\n        return {...state, [action.data.user_id]: nextUserState};\r\n    }\r\n    case AdminTypes.RECEIVED_USER_ACCESS_TOKENS_FOR_USER: { // UserAccessToken[]\r\n        const nextUserState = {...(state[action.userId] || {})};\r\n\r\n        for (const uat of action.data) {\r\n            nextUserState[uat.id] = uat;\r\n        }\r\n\r\n        return {...state, [action.userId]: nextUserState};\r\n    }\r\n    case UserTypes.REVOKED_USER_ACCESS_TOKEN: {\r\n        const userIds = Object.keys(state);\r\n        for (let i = 0; i < userIds.length; i++) {\r\n            const userId = userIds[i];\r\n            if (state[userId] && state[userId][action.data]) {\r\n                const nextUserState = {...state[userId]};\r\n                Reflect.deleteProperty(nextUserState, action.data);\r\n                return {...state, [userId]: nextUserState};\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.ENABLED_USER_ACCESS_TOKEN: {\r\n        const userIds = Object.keys(state);\r\n        for (let i = 0; i < userIds.length; i++) {\r\n            const userId = userIds[i];\r\n            if (state[userId] && state[userId][action.data]) {\r\n                const nextUserState = {...state[userId]};\r\n                const token = {...nextUserState[action.data], is_active: true};\r\n                nextUserState[token.id] = token;\r\n                return {...state, [userId]: nextUserState};\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.DISABLED_USER_ACCESS_TOKEN: {\r\n        const userIds = Object.keys(state);\r\n        for (let i = 0; i < userIds.length; i++) {\r\n            const userId = userIds[i];\r\n            if (state[userId] && state[userId][action.data]) {\r\n                const nextUserState = {...state[userId]};\r\n                const token = {...nextUserState[action.data], is_active: false};\r\n                nextUserState[token.id] = token;\r\n                return {...state, [userId]: nextUserState};\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction plugins(state: Record<string, PluginRedux> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_PLUGINS: {\r\n        const nextState = {...state};\r\n        const activePlugins = action.data.active;\r\n        for (const plugin of activePlugins) {\r\n            nextState[plugin.id] = {...plugin, active: true};\r\n        }\r\n\r\n        const inactivePlugins = action.data.inactive;\r\n        for (const plugin of inactivePlugins) {\r\n            nextState[plugin.id] = {...plugin, active: false};\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.REMOVED_PLUGIN: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data);\r\n        return nextState;\r\n    }\r\n    case AdminTypes.ENABLED_PLUGIN: {\r\n        const nextState = {...state};\r\n        const plugin = nextState[action.data];\r\n        if (plugin && !plugin.active) {\r\n            nextState[action.data] = {...plugin, active: true};\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case AdminTypes.DISABLED_PLUGIN: {\r\n        const nextState = {...state};\r\n        const plugin = nextState[action.data];\r\n        if (plugin && plugin.active) {\r\n            nextState[action.data] = {...plugin, active: false};\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction pluginStatuses(state: Record<string, PluginStatusRedux> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_PLUGIN_STATUSES: {\r\n        const nextState: any = {};\r\n\r\n        for (const plugin of (action.data || [])) {\r\n            const id = plugin.plugin_id;\r\n\r\n            // The plugin may be in different states across the cluster. Pick the highest one to\r\n            // surface an error.\r\n            const pluginState = Math.max((nextState[id] && nextState[id].state) || 0, plugin.state);\r\n\r\n            const instances = [\r\n                ...((nextState[id] && nextState[id].instances) || []),\r\n                {\r\n                    cluster_id: plugin.cluster_id,\r\n                    version: plugin.version,\r\n                    state: plugin.state,\r\n                },\r\n            ];\r\n\r\n            nextState[id] = {\r\n                id,\r\n                name: (nextState[id] && nextState[id].name) || plugin.name,\r\n                description: (nextState[id] && nextState[id].description) || plugin.description,\r\n                version: (nextState[id] && nextState[id].version) || plugin.version,\r\n                active: pluginState > 0,\r\n                state: pluginState,\r\n                error: plugin.error,\r\n                instances,\r\n            };\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case AdminTypes.ENABLE_PLUGIN_REQUEST: {\r\n        const pluginId = action.data;\r\n        if (!state[pluginId]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [pluginId]: {\r\n                ...state[pluginId],\r\n                state: PluginState.PLUGIN_STATE_STARTING,\r\n            },\r\n        };\r\n    }\r\n\r\n    case AdminTypes.ENABLE_PLUGIN_FAILURE: {\r\n        const pluginId = action.data;\r\n        if (!state[pluginId]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [pluginId]: {\r\n                ...state[pluginId],\r\n                state: PluginState.PLUGIN_STATE_NOT_RUNNING,\r\n            },\r\n        };\r\n    }\r\n\r\n    case AdminTypes.DISABLE_PLUGIN_REQUEST: {\r\n        const pluginId = action.data;\r\n        if (!state[pluginId]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [pluginId]: {\r\n                ...state[pluginId],\r\n                state: PluginState.PLUGIN_STATE_STOPPING,\r\n            },\r\n        };\r\n    }\r\n\r\n    case AdminTypes.REMOVED_PLUGIN: {\r\n        const pluginId = action.data;\r\n        if (!state[pluginId]) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, pluginId);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction ldapGroupsCount(state = 0, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_LDAP_GROUPS:\r\n        return action.data.count;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 0;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction ldapGroups(state: Record<string, MixedUnlinkedGroupRedux> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_LDAP_GROUPS: {\r\n        const nextState: any = {};\r\n        for (const group of action.data.groups) {\r\n            nextState[group.primary_key] = group;\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.LINKED_LDAP_GROUP: {\r\n        const nextState = {...state};\r\n        if (nextState[action.data.primary_key]) {\r\n            nextState[action.data.primary_key] = action.data;\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.UNLINKED_LDAP_GROUP: {\r\n        const nextState = {...state};\r\n        if (nextState[action.data]) {\r\n            nextState[action.data] = {\r\n                ...nextState[action.data],\r\n                mattermost_group_id: undefined,\r\n                has_syncables: undefined,\r\n                failed: false,\r\n            };\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.LINK_LDAP_GROUP_FAILURE: {\r\n        const nextState = {...state};\r\n        if (nextState[action.data]) {\r\n            nextState[action.data] = {\r\n                ...nextState[action.data],\r\n                failed: true,\r\n            };\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.UNLINK_LDAP_GROUP_FAILURE: {\r\n        const nextState = {...state};\r\n        if (nextState[action.data]) {\r\n            nextState[action.data] = {\r\n                ...nextState[action.data],\r\n                failed: true,\r\n            };\r\n        }\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction samlMetadataResponse(state: Partial<SamlMetadataResponse> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_SAML_METADATA_RESPONSE: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction dataRetentionCustomPolicies(state: IDMappedObjects<DataRetentionCustomPolicy> = {}, action: MMReduxAction): IDMappedObjects<DataRetentionCustomPolicy> {\r\n    switch (action.type) {\r\n    case AdminTypes.CREATE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS:\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY:\r\n    case AdminTypes.UPDATE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS: {\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    }\r\n\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICIES: {\r\n        const nextState = {...state};\r\n        if (action.data.policies) {\r\n            for (const dataRetention of action.data.policies) {\r\n                nextState[dataRetention.id] = dataRetention;\r\n            }\r\n        }\r\n        return nextState;\r\n    }\r\n\r\n    case AdminTypes.DELETE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\nfunction dataRetentionCustomPoliciesCount(state = 0, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICIES:\r\n        return action.data.total_count;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 0;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction accessControlPolicies(state: IDMappedObjects<AccessControlPolicy> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.CREATE_ACCESS_CONTROL_POLICY_SUCCESS:\r\n    case AdminTypes.RECEIVED_ACCESS_CONTROL_POLICY:\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    case AdminTypes.RECEIVED_ACCESS_CONTROL_POLICIES: {\r\n        const nextState: IDMappedObjects<AccessControlPolicy> = {};\r\n        for (const policy of action.data) {\r\n            nextState[policy.id] = policy;\r\n        }\r\n        return nextState;\r\n    }\r\n    case AdminTypes.DELETE_ACCESS_CONTROL_POLICY_SUCCESS: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case AdminTypes.RECEIVED_ACCESS_CONTROL_POLICIES_SEARCH: {\r\n        const nextState = {...state};\r\n        for (const policy of action.data) {\r\n            nextState[policy.id] = policy;\r\n        }\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channelsForAccessControlPolicy(state: Record<string, string[]> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case AdminTypes.RECEIVED_ACCESS_CONTROL_CHILD_POLICIES:\r\n        if (action.data) {\r\n            return {...state, ...action.data};\r\n        }\r\n        return state;\r\n    case AdminTypes.ASSIGN_CHANNELS_TO_ACCESS_CONTROL_POLICY_SUCCESS:\r\n        return {\r\n            ...state,\r\n            [action.data.policyId]: action.data.channelIds,\r\n        };\r\n    case AdminTypes.UNASSIGN_CHANNELS_FROM_ACCESS_CONTROL_POLICY_SUCCESS:\r\n        return {\r\n            ...state,\r\n            [action.data.policyId]: action.data.channelIds,\r\n        };\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // array of LogObjects each representing a log entry (JSON)\r\n    logs,\r\n\r\n    // array of strings each representing a log entry (legacy) with pagination\r\n    plainLogs,\r\n\r\n    // object where every key is an audit id and has an object with audit details\r\n    audits,\r\n\r\n    // object representing the server configuration\r\n    config,\r\n\r\n    // object representing which fields of the server configuration were set through the environment config\r\n    environmentConfig,\r\n\r\n    // object where every key is a report id and has an object with report details\r\n    complianceReports,\r\n\r\n    // array of cluster status data\r\n    clusterInfo,\r\n\r\n    // object with certificate type as keys and boolean statuses as values\r\n    samlCertStatus,\r\n\r\n    // object with analytic categories as types and numbers as values\r\n    analytics,\r\n\r\n    // object with team ids as keys and analytics objects as values\r\n    teamAnalytics,\r\n\r\n    // object with user ids as keys and objects, with token ids as keys, and\r\n    // user access tokens as values without actual token\r\n    userAccessTokensByUser,\r\n\r\n    // object with token ids as keys, and user access tokens as values without actual token\r\n    userAccessTokens,\r\n\r\n    // object with plugin ids as keys and objects representing plugin manifests as values\r\n    plugins,\r\n\r\n    // object with plugin ids as keys and objects representing plugin statuses across the cluster\r\n    pluginStatuses,\r\n\r\n    // object representing the ldap groups\r\n    ldapGroups,\r\n\r\n    // total ldap groups\r\n    ldapGroupsCount,\r\n\r\n    // object representing the metadata response obtained from the IdP\r\n    samlMetadataResponse,\r\n\r\n    // object representing the custom data retention policies\r\n    dataRetentionCustomPolicies,\r\n\r\n    // total custom retention policies\r\n    dataRetentionCustomPoliciesCount,\r\n\r\n    // the last trial license the server used.\r\n    prevTrialLicense,\r\n\r\n    // object with policy ids as keys and objects representing the policies as values\r\n    accessControlPolicies,\r\n\r\n    // object with policy ids as keys and arrays of channel ids as values\r\n    channelsForAccessControlPolicy,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {AppBinding, AppCommandFormMap} from '@mattermost/types/apps';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {AppsTypes} from 'mattermost-redux/action_types';\r\nimport {validateBindings} from 'mattermost-redux/utils/apps';\r\n\r\nexport function mainBindings(state: AppBinding[] = [], action: MMReduxAction): AppBinding[] {\r\n    switch (action.type) {\r\n    case AppsTypes.FAILED_TO_FETCH_APP_BINDINGS: {\r\n        if (!state.length) {\r\n            return state;\r\n        }\r\n\r\n        return [];\r\n    }\r\n    case AppsTypes.RECEIVED_APP_BINDINGS: {\r\n        const bindings = action.data;\r\n        return validateBindings(bindings);\r\n    }\r\n    case AppsTypes.APPS_PLUGIN_DISABLED: {\r\n        if (!state.length) {\r\n            return state;\r\n        }\r\n\r\n        return [];\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction mainForms(state: AppCommandFormMap = {}, action: MMReduxAction): AppCommandFormMap {\r\n    switch (action.type) {\r\n    case AppsTypes.RECEIVED_APP_BINDINGS:\r\n        return {};\r\n    case AppsTypes.RECEIVED_APP_COMMAND_FORM: {\r\n        const {form, location} = action.data;\r\n        const newState = {\r\n            ...state,\r\n            [location]: form,\r\n        };\r\n        return newState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nconst main = combineReducers({\r\n    bindings: mainBindings,\r\n    forms: mainForms,\r\n});\r\n\r\nfunction rhsBindings(state: AppBinding[] = [], action: MMReduxAction): AppBinding[] {\r\n    switch (action.type) {\r\n    case AppsTypes.RECEIVED_APP_RHS_BINDINGS: {\r\n        const bindings = action.data;\r\n        return validateBindings(bindings);\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction rhsForms(state: AppCommandFormMap = {}, action: MMReduxAction): AppCommandFormMap {\r\n    switch (action.type) {\r\n    case AppsTypes.RECEIVED_APP_RHS_BINDINGS:\r\n        return {};\r\n    case AppsTypes.RECEIVED_APP_RHS_COMMAND_FORM: {\r\n        const {form, location} = action.data;\r\n        const newState = {\r\n            ...state,\r\n            [location]: form,\r\n        };\r\n        return newState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nconst rhs = combineReducers({\r\n    bindings: rhsBindings,\r\n    forms: rhsForms,\r\n});\r\n\r\nexport function pluginEnabled(state = true, action: MMReduxAction): boolean {\r\n    switch (action.type) {\r\n    case AppsTypes.APPS_PLUGIN_ENABLED: {\r\n        return true;\r\n    }\r\n    case AppsTypes.APPS_PLUGIN_DISABLED: {\r\n        return false;\r\n    }\r\n    case AppsTypes.RECEIVED_APP_BINDINGS: {\r\n        return true;\r\n    }\r\n    case AppsTypes.FAILED_TO_FETCH_APP_BINDINGS: {\r\n        return false;\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    main,\r\n    rhs,\r\n    pluginEnabled,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Bot} from '@mattermost/types/bots';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {BotTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction accounts(state: Record<string, Bot> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case BotTypes.RECEIVED_BOT_ACCOUNTS: {\r\n        const newBots = action.data;\r\n        const nextState = {...state};\r\n        for (const bot of newBots) {\r\n            nextState[bot.user_id] = bot;\r\n        }\r\n        return nextState;\r\n    }\r\n    case BotTypes.RECEIVED_BOT_ACCOUNT: {\r\n        const bot = action.data;\r\n        const nextState = {...state};\r\n        nextState[bot.user_id] = bot;\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    accounts,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ChannelBookmark, ChannelBookmarksState} from '@mattermost/types/channel_bookmarks';\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelBookmarkTypes, UserTypes, ChannelTypes} from 'mattermost-redux/action_types';\r\n\r\nconst toNewObj = <T extends {id: string}>(current: IDMappedObjects<T>, arr: T[]) => {\r\n    return arr.reduce((acc, x) => {\r\n        return {...acc, [x.id]: x};\r\n    }, {...current});\r\n};\r\n\r\nexport function byChannelId(state: ChannelBookmarksState['byChannelId'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelBookmarkTypes.RECEIVED_BOOKMARKS: {\r\n        const channelId: Channel['id'] = action.data.channelId;\r\n        const bookmarks: ChannelBookmark[] = action.data.bookmarks;\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: toNewObj(state[channelId], bookmarks),\r\n        };\r\n    }\r\n\r\n    case ChannelBookmarkTypes.RECEIVED_BOOKMARK: {\r\n        const bookmark: ChannelBookmark = action.data;\r\n        const {id, channel_id: channelId} = bookmark;\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...state[channelId],\r\n                [id]: bookmark,\r\n            },\r\n        };\r\n    }\r\n\r\n    case ChannelBookmarkTypes.BOOKMARK_DELETED: {\r\n        const bookmark: ChannelBookmark = action.data;\r\n\r\n        const channelNextState = {...state[bookmark.channel_id]};\r\n\r\n        Reflect.deleteProperty(channelNextState, bookmark.id);\r\n\r\n        const nextState = {...state, [bookmark.channel_id]: channelNextState};\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId: string = action.data.channelId;\r\n\r\n        const nextState = {...state};\r\n\r\n        Reflect.deleteProperty(nextState, channelId);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    byChannelId,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ChannelCategory} from '@mattermost/types/channel_categories';\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {IDMappedObjects, RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelCategoryTypes, TeamTypes, UserTypes, ChannelTypes} from 'mattermost-redux/action_types';\r\nimport {removeItem} from 'mattermost-redux/utils/array_utils';\r\n\r\nexport function byId(state: IDMappedObjects<ChannelCategory> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelCategoryTypes.RECEIVED_CATEGORIES: {\r\n        const categories: ChannelCategory[] = action.data;\r\n\r\n        return categories.reduce((nextState, category) => {\r\n            return {\r\n                ...nextState,\r\n                [category.id]: {\r\n                    ...nextState[category.id],\r\n                    ...category,\r\n                    collapsed: action.isWebSocket ? state[category.id].collapsed : category.collapsed,\r\n                },\r\n            };\r\n        }, state);\r\n    }\r\n    case ChannelCategoryTypes.RECEIVED_CATEGORY: {\r\n        const category: ChannelCategory = action.data;\r\n\r\n        return {\r\n            ...state,\r\n            [category.id]: {\r\n                ...state[category.id],\r\n                ...category,\r\n            },\r\n        };\r\n    }\r\n\r\n    case ChannelCategoryTypes.CATEGORY_DELETED: {\r\n        const categoryId: ChannelCategory['id'] = action.data;\r\n\r\n        const nextState = {...state};\r\n\r\n        Reflect.deleteProperty(nextState, categoryId);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channelId: string = action.data.id;\r\n\r\n        const nextState = {...state};\r\n        let changed = false;\r\n\r\n        for (const category of Object.values(state)) {\r\n            const index = category.channel_ids.indexOf(channelId);\r\n\r\n            if (index === -1) {\r\n                continue;\r\n            }\r\n\r\n            const nextChannelIds = [...category.channel_ids];\r\n            nextChannelIds.splice(index, 1);\r\n\r\n            nextState[category.id] = {\r\n                ...category,\r\n                channel_ids: nextChannelIds,\r\n            };\r\n\r\n            changed = true;\r\n        }\r\n\r\n        return changed ? nextState : state;\r\n    }\r\n    case TeamTypes.LEAVE_TEAM: {\r\n        const team: Team = action.data;\r\n\r\n        const nextState = {...state};\r\n        let changed = false;\r\n\r\n        for (const category of Object.values(state)) {\r\n            if (category.team_id !== team.id) {\r\n                continue;\r\n            }\r\n\r\n            Reflect.deleteProperty(nextState, category.id);\r\n            changed = true;\r\n        }\r\n\r\n        return changed ? nextState : state;\r\n    }\r\n    case ChannelTypes.GM_CONVERTED_TO_CHANNEL: {\r\n        // For GM to Private channel conversion feature\r\n        // In the case when someone converts your GM to a private channel and moves it to a team\r\n        // you're not currently on, we need to remove the channel from \"direct messages\" category\r\n        // and add it to \"channels\" category of target team. Even though the server sends a websocket event about updated category data,\r\n        // it does so only for the team the channel got moved into, and not every team a user is part of, for performance reasons.\r\n        // For every other team, we update the state here. Everything is correct on server side, but we update state here\r\n        // to avoid re-fetching all categories again for all teams.\r\n\r\n        const receivedChannel = action.data as Channel;\r\n        const newState: IDMappedObjects<ChannelCategory> = {};\r\n        const categoryIDs = Object.keys(state);\r\n\r\n        categoryIDs.forEach((categoryID) => {\r\n            if (categoryID.startsWith('channels_') && state[categoryID].team_id === receivedChannel.team_id && state[categoryID].channel_ids.indexOf(receivedChannel.id) < 0) {\r\n                // We don't need to worry about adding the channel in the right order as this is only\r\n                // an intermediate step, meant to handle the edge case of missing the upcoming \"update category\"\r\n                // websocket message, triggered on conversion of GM to private channel.\r\n                newState[categoryID] = {\r\n                    ...state[categoryID],\r\n                    channel_ids: [...state[categoryID].channel_ids, receivedChannel.id],\r\n                };\r\n            } else {\r\n                newState[categoryID] = {\r\n                    ...state[categoryID],\r\n                    channel_ids: state[categoryID].channel_ids.filter((channelID) => channelID !== receivedChannel.id),\r\n                };\r\n            }\r\n        });\r\n\r\n        return newState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function orderByTeam(state: RelationOneToOne<Team, Array<ChannelCategory['id']>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelCategoryTypes.RECEIVED_CATEGORY_ORDER: {\r\n        const teamId: string = action.data.teamId;\r\n        const order: string[] = action.data.order;\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: order,\r\n        };\r\n    }\r\n\r\n    case ChannelCategoryTypes.CATEGORY_DELETED: {\r\n        const categoryId: ChannelCategory['id'] = action.data;\r\n\r\n        const nextState = {...state};\r\n\r\n        for (const teamId of Object.keys(nextState)) {\r\n            // removeItem only modifies the array if it contains the category ID, so other teams' state won't be modified\r\n            nextState[teamId] = removeItem(state[teamId], categoryId);\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case TeamTypes.LEAVE_TEAM: {\r\n        const team: Team = action.data;\r\n\r\n        if (!state[team.id]) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, team.id);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    byId,\r\n    orderByTeam,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {\r\n    Channel,\r\n    ChannelMessageCount,\r\n    ServerChannel,\r\n} from '@mattermost/types/channels';\r\nimport type {RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {\r\n    AdminTypes,\r\n    ChannelTypes,\r\n    UserTypes,\r\n    SchemeTypes,\r\n} from 'mattermost-redux/action_types';\r\nimport {General} from 'mattermost-redux/constants';\r\n\r\nexport default function messageCounts(state: RelationOneToOne<Channel, ChannelMessageCount> = {}, action: MMReduxAction): RelationOneToOne<Channel, ChannelMessageCount> {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL: {\r\n        const channel: ServerChannel = action.data;\r\n\r\n        return updateMessageCount(state, channel);\r\n    }\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS: {\r\n        const channels: ServerChannel[] = action.data.channels;\r\n\r\n        return channels.reduce(updateMessageCount, state);\r\n    }\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS_SEARCH:\r\n    case ChannelTypes.RECEIVED_CHANNELS:\r\n    case ChannelTypes.RECEIVED_ALL_CHANNELS:\r\n    case SchemeTypes.RECEIVED_SCHEME_CHANNELS: {\r\n        const channels: ServerChannel[] = action.data;\r\n\r\n        return channels.reduce(updateMessageCount, state);\r\n    }\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const channel: ServerChannel | undefined = action.data;\r\n\r\n        if (!channel || channel.type !== General.OPEN_CHANNEL) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, channel.id);\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelTypes.INCREMENT_TOTAL_MSG_COUNT: {\r\n        const channelId: string = action.data.channelId;\r\n        const amount: number = action.data.amount;\r\n        const amountRoot: number = action.data.amountRoot;\r\n\r\n        const existing = state[channelId];\r\n\r\n        if (!existing) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                root: existing.root + amountRoot,\r\n                total: existing.total + amount,\r\n            },\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function updateMessageCount(state: RelationOneToOne<Channel, ChannelMessageCount>, channel: ServerChannel) {\r\n    const existing = state[channel.id];\r\n    if (\r\n        existing &&\r\n        existing.root === channel.total_msg_count_root &&\r\n        existing.total === channel.total_msg_count\r\n    ) {\r\n        return state;\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [channel.id]: {\r\n            root: channel.total_msg_count_root,\r\n            total: channel.total_msg_count,\r\n        },\r\n    };\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport isEqual from 'lodash/isEqual';\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {\r\n    Channel,\r\n    ChannelMembership,\r\n    ChannelStats,\r\n    ChannelMemberCountByGroup,\r\n    ChannelMemberCountsByGroup,\r\n    ServerChannel,\r\n    ChannelsState,\r\n} from '@mattermost/types/channels';\r\nimport type {Group} from '@mattermost/types/groups';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {\r\n    RelationOneToManyUnique,\r\n    RelationOneToOne,\r\n    IDMappedObjects,\r\n} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {AdminTypes, ChannelTypes, UserTypes, SchemeTypes, GroupTypes, PostTypes} from 'mattermost-redux/action_types';\r\nimport {General} from 'mattermost-redux/constants';\r\nimport {MarkUnread} from 'mattermost-redux/constants/channels';\r\nimport {channelListToMap, splitRoles} from 'mattermost-redux/utils/channel_utils';\r\n\r\nimport messageCounts from './channels/message_counts';\r\n\r\nfunction removeMemberFromChannels(state: RelationOneToOne<Channel, Record<string, ChannelMembership>>, action: AnyAction) {\r\n    const nextState = {...state};\r\n    Object.keys(state).forEach((channel) => {\r\n        nextState[channel] = {...nextState[channel]};\r\n        delete nextState[channel][action.data.user_id];\r\n    });\r\n    return nextState;\r\n}\r\n\r\nfunction channelListToSet(state: RelationOneToManyUnique<Team, Channel>, action: AnyAction) {\r\n    const nextState = {...state};\r\n\r\n    action.data.forEach((channel: Channel) => {\r\n        const nextSet = new Set(nextState[channel.team_id]);\r\n        nextSet.add(channel.id);\r\n        nextState[channel.team_id] = nextSet;\r\n    });\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction removeChannelFromSet(state: RelationOneToManyUnique<Team, Channel>, action: AnyAction): RelationOneToManyUnique<Team, Channel> {\r\n    const id = action.data.team_id;\r\n    const nextSet = new Set(state[id]);\r\n    nextSet.delete(action.data.id);\r\n    return {\r\n        ...state,\r\n        [id]: nextSet,\r\n    };\r\n}\r\n\r\nfunction currentChannelId(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.SELECT_CHANNEL:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channels(state: IDMappedObjects<Channel> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL: {\r\n        const channel: Channel = toClientChannel(action.data);\r\n\r\n        if (state[channel.id] && channel.type === General.DM_CHANNEL) {\r\n            channel.display_name = channel.display_name || state[channel.id].display_name;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channel.id]: channel,\r\n        };\r\n    }\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS: {\r\n        const channels: Channel[] = action.data.channels.map(toClientChannel);\r\n\r\n        if (channels.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            ...channelListToMap(channels),\r\n        };\r\n    }\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS_SEARCH:\r\n    case ChannelTypes.RECEIVED_CHANNELS:\r\n    case ChannelTypes.RECEIVED_ALL_CHANNELS:\r\n    case SchemeTypes.RECEIVED_SCHEME_CHANNELS: {\r\n        const channels: Channel[] = action.data.map(toClientChannel);\r\n\r\n        if (channels.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n\r\n        for (let channel of channels) {\r\n            if (state[channel.id] && channel.type === General.DM_CHANNEL && !channel.display_name) {\r\n                channel = {...channel, display_name: state[channel.id].display_name};\r\n            }\r\n            nextState[channel.id] = channel;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED: {\r\n        const {id, deleteAt} = action.data;\r\n\r\n        if (!state[id]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...state[id],\r\n                delete_at: deleteAt,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_UNARCHIVED: {\r\n        const {id} = action.data;\r\n\r\n        if (!state[id]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...state[id],\r\n                delete_at: 0,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, action.data.id);\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        const {channel_id: channelId, create_at: createAt, root_id: rootId} = action.data;\r\n        const isCrtReply = action.features?.crtEnabled && rootId !== '';\r\n\r\n        const channel = state[channelId];\r\n\r\n        if (!channel) {\r\n            return state;\r\n        }\r\n\r\n        const lastRootPostAt = isCrtReply ? channel.last_root_post_at : Math.max(createAt, channel.last_root_post_at);\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...channel,\r\n                last_post_at: Math.max(createAt, channel.last_post_at),\r\n                last_root_post_at: lastRootPostAt,\r\n            },\r\n        };\r\n    }\r\n\r\n    case ChannelTypes.UPDATED_CHANNEL_SCHEME: {\r\n        const {channelId, schemeId} = action.data;\r\n        const channel = state[channelId];\r\n\r\n        if (!channel) {\r\n            return state;\r\n        }\r\n\r\n        return {...state, [channelId]: {...channel, scheme_id: schemeId}};\r\n    }\r\n\r\n    case AdminTypes.REMOVE_DATA_RETENTION_CUSTOM_POLICY_CHANNELS_SUCCESS: {\r\n        const {channels} = action.data;\r\n        const nextState = {...state};\r\n        channels.forEach((channelId: string) => {\r\n            if (nextState[channelId]) {\r\n                nextState[channelId] = {\r\n                    ...nextState[channelId],\r\n                    policy_id: null,\r\n                };\r\n            }\r\n        });\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction toClientChannel(serverChannel: ServerChannel): Channel {\r\n    const channel = {...serverChannel};\r\n\r\n    Reflect.deleteProperty(channel, 'total_msg_count');\r\n    Reflect.deleteProperty(channel, 'total_msg_count_root');\r\n\r\n    return channel;\r\n}\r\n\r\nfunction channelsInTeam(state: ChannelsState['channelsInTeam'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL: {\r\n        const nextSet = new Set(state[action.data.team_id]);\r\n        nextSet.add(action.data.id);\r\n        return {\r\n            ...state,\r\n            [action.data.team_id]: nextSet,\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNELS: {\r\n        return channelListToSet(state, action);\r\n    }\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        if (action.data) {\r\n            return removeChannelFromSet(state, action);\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function myMembers(state: RelationOneToOne<Channel, ChannelMembership> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER: {\r\n        const channelMember: ChannelMembership = action.data;\r\n\r\n        return receiveChannelMember(state, channelMember);\r\n    }\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBERS: {\r\n        const nextState = {...state};\r\n        const remove = action.remove as string[];\r\n        if (remove) {\r\n            remove.forEach((id: string) => {\r\n                Reflect.deleteProperty(nextState, id);\r\n            });\r\n        }\r\n\r\n        const channelMembers: ChannelMembership[] = action.data;\r\n\r\n        return channelMembers.reduce(receiveChannelMember, state);\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_PROPS: {\r\n        const member = {...state[action.data.channel_id]};\r\n        member.notify_props = action.data.notifyProps;\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.channel_id]: member,\r\n        };\r\n    }\r\n    case ChannelTypes.SET_CHANNEL_MUTED: {\r\n        const {channelId, muted} = action.data;\r\n\r\n        if (!state[channelId]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...state[channelId],\r\n                notify_props: {\r\n                    ...state[channelId].notify_props,\r\n                    mark_unread: muted ? MarkUnread.MENTION : MarkUnread.ALL,\r\n                },\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.INCREMENT_UNREAD_MSG_COUNT: {\r\n        const {\r\n            channelId,\r\n            amount,\r\n            amountRoot,\r\n            onlyMentions,\r\n            fetchedChannelMember,\r\n        } = action.data;\r\n        const member = state[channelId];\r\n\r\n        if (amount === 0 && amountRoot === 0) {\r\n            return state;\r\n        }\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual channel member\r\n            return state;\r\n        }\r\n\r\n        if (!onlyMentions) {\r\n            // Incrementing the msg_count marks the channel as read, so don't do that if these posts should be unread\r\n            return state;\r\n        }\r\n\r\n        if (fetchedChannelMember) {\r\n            // We've already updated the channel member with the correct msg_count\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...member,\r\n                msg_count: member.msg_count + amount,\r\n                msg_count_root: member.msg_count_root + amountRoot,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.DECREMENT_UNREAD_MSG_COUNT: {\r\n        const {channelId, amount, amountRoot} = action.data;\r\n\r\n        if (amount === 0 && amountRoot === 0) {\r\n            return state;\r\n        }\r\n\r\n        const member = state[channelId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual channel member\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...member,\r\n                msg_count: member.msg_count + amount,\r\n                msg_count_root: member.msg_count_root + amountRoot,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.INCREMENT_UNREAD_MENTION_COUNT: {\r\n        const {\r\n            channelId,\r\n            amount,\r\n            amountRoot,\r\n            amountUrgent,\r\n            fetchedChannelMember,\r\n        } = action.data;\r\n\r\n        if (amount === 0 && amountRoot === 0) {\r\n            return state;\r\n        }\r\n\r\n        const member = state[channelId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual channel member\r\n            return state;\r\n        }\r\n\r\n        if (fetchedChannelMember) {\r\n            // We've already updated the channel member with the correct msg_count\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...member,\r\n                mention_count: member.mention_count + amount,\r\n                mention_count_root: member.mention_count_root + amountRoot,\r\n                urgent_mention_count: member.urgent_mention_count + amountUrgent,\r\n\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.DECREMENT_UNREAD_MENTION_COUNT: {\r\n        const {channelId, amount, amountRoot, amountUrgent} = action.data;\r\n\r\n        if (amount === 0 && amountRoot === 0) {\r\n            return state;\r\n        }\r\n\r\n        const member = state[channelId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual channel member\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: {\r\n                ...member,\r\n                mention_count: Math.max(member.mention_count - amount, 0),\r\n                mention_count_root: Math.max(member.mention_count_root - amountRoot, 0),\r\n                urgent_mention_count: Math.max(member.urgent_mention_count - amountUrgent, 0),\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_LAST_VIEWED_AT: {\r\n        const {data} = action;\r\n        let member = state[data.channel_id];\r\n\r\n        if (member.last_viewed_at === data.last_viewed_at) {\r\n            return state;\r\n        }\r\n\r\n        member = {\r\n            ...member,\r\n            last_viewed_at: data.last_viewed_at,\r\n        };\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.channel_id]: member,\r\n        };\r\n    }\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const nextState = {...state};\r\n        if (action.data) {\r\n            Reflect.deleteProperty(nextState, action.data.id);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.UPDATED_CHANNEL_MEMBER_SCHEME_ROLES: {\r\n        return updateChannelMemberSchemeRoles(state, action);\r\n    }\r\n    case ChannelTypes.POST_UNREAD_SUCCESS: {\r\n        const data = action.data;\r\n        const channelState = state[data.channelId];\r\n\r\n        if (!channelState) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [data.channelId]: {\r\n                ...channelState,\r\n                msg_count: data.msgCount,\r\n                mention_count: data.mentionCount,\r\n                msg_count_root: data.msgCountRoot,\r\n                mention_count_root: data.mentionCountRoot,\r\n                urgent_mention_count: data.urgentMentionCount,\r\n                last_viewed_at: data.lastViewedAt,\r\n            },\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction receiveChannelMember(state: RelationOneToOne<Channel, ChannelMembership>, received: ChannelMembership) {\r\n    const existingChannelMember = state[received.channel_id];\r\n    let updatedChannelMember = {...received};\r\n\r\n    if (isEqual(existingChannelMember, updatedChannelMember)) {\r\n        return state;\r\n    }\r\n\r\n    // https://github.com/mattermost/mattermost-webapp/pull/10589 and\r\n    // https://github.com/mattermost/mattermost-webapp/pull/11094\r\n    if (existingChannelMember &&\r\n        updatedChannelMember.last_viewed_at < existingChannelMember.last_viewed_at &&\r\n        updatedChannelMember.last_update_at <= existingChannelMember.last_update_at) {\r\n        // The last_viewed_at should almost never decrease upon receiving a member, so if it does, assume that the\r\n        // unread state of the existing channel member is correct. See MM-44900 for more information.\r\n        updatedChannelMember = {\r\n            ...received,\r\n            last_viewed_at: Math.max(existingChannelMember.last_viewed_at, received.last_viewed_at),\r\n            last_update_at: Math.max(existingChannelMember.last_update_at, received.last_update_at),\r\n            msg_count: Math.max(existingChannelMember.msg_count, received.msg_count),\r\n            msg_count_root: Math.max(existingChannelMember.msg_count_root, received.msg_count_root),\r\n            mention_count: Math.min(existingChannelMember.mention_count, received.mention_count),\r\n            urgent_mention_count: Math.min(existingChannelMember.urgent_mention_count, received.urgent_mention_count),\r\n            mention_count_root: Math.min(existingChannelMember.mention_count_root, received.mention_count_root),\r\n        };\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [updatedChannelMember.channel_id]: updatedChannelMember,\r\n    };\r\n}\r\n\r\nfunction membersInChannel(state: RelationOneToOne<Channel, Record<string, ChannelMembership>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER:\r\n    case ChannelTypes.RECEIVED_CHANNEL_MEMBER: {\r\n        const member = action.data;\r\n        const members = {...(state[member.channel_id] || {})};\r\n        if ((!members[member.user_id]) ||\r\n            (member.last_update_at > members[member.user_id]?.last_update_at) ||\r\n            (member.roles !== members[member.user_id]?.roles)) {\r\n            members[member.user_id] = member;\r\n            return {\r\n                ...state,\r\n                [member.channel_id]: members,\r\n            };\r\n        }\r\n        return {\r\n            ...state,\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBERS:\r\n    case ChannelTypes.RECEIVED_CHANNEL_MEMBERS: {\r\n        const nextState = {...state};\r\n        const remove = action.remove as string[];\r\n        const currentUserId = action.currentUserId;\r\n        if (remove && currentUserId) {\r\n            remove.forEach((id) => {\r\n                if (nextState[id]) {\r\n                    Reflect.deleteProperty(nextState[id], currentUserId);\r\n                }\r\n            });\r\n        }\r\n\r\n        for (const cm of action.data) {\r\n            if (nextState[cm.channel_id]) {\r\n                nextState[cm.channel_id] = {...nextState[cm.channel_id]};\r\n            } else {\r\n                nextState[cm.channel_id] = {};\r\n            }\r\n            nextState[cm.channel_id][cm.user_id] = cm;\r\n        }\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeMemberFromChannels(state, action);\r\n\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n    case ChannelTypes.REMOVE_MEMBER_FROM_CHANNEL:\r\n    case UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL: {\r\n        if (action.data) {\r\n            const data = action.data;\r\n            const members = {...(state[data.id] || {})};\r\n            if (state[data.id]) {\r\n                Reflect.deleteProperty(members, data.user_id);\r\n                return {\r\n                    ...state,\r\n                    [data.id]: members,\r\n                };\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.UPDATED_CHANNEL_MEMBER_SCHEME_ROLES: {\r\n        return updateChannelMemberSchemeRoles(state, action);\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction stats(state: RelationOneToOne<Channel, ChannelStats> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL_STATS: {\r\n        const stat: ChannelStats = action.data;\r\n\r\n        if (isEqual(state[stat.channel_id], stat)) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [stat.channel_id]: stat,\r\n        };\r\n    }\r\n    case ChannelTypes.ADD_CHANNEL_MEMBER_SUCCESS: {\r\n        const nextState = {...state};\r\n        const id = action.id;\r\n        const receivedCount = action.count ? action.count : 1;\r\n        const nextStat = nextState[id];\r\n        if (nextStat) {\r\n            const count = nextStat.member_count + receivedCount;\r\n            return {\r\n                ...nextState,\r\n                [id]: {\r\n                    ...nextStat,\r\n                    member_count: count,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.REMOVE_CHANNEL_MEMBER_SUCCESS: {\r\n        const nextState = {...state};\r\n        const id = action.id;\r\n        const nextStat = nextState[id];\r\n        if (nextStat) {\r\n            const count = nextStat.member_count - 1;\r\n            return {\r\n                ...nextState,\r\n                [id]: {\r\n                    ...nextStat,\r\n                    member_count: count || 1,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.INCREMENT_PINNED_POST_COUNT: {\r\n        const nextState = {...state};\r\n        const id = action.id;\r\n        const nextStat = nextState[id];\r\n        if (nextStat) {\r\n            const count = nextStat.pinnedpost_count + 1;\r\n            return {\r\n                ...nextState,\r\n                [id]: {\r\n                    ...nextStat,\r\n                    pinnedpost_count: count,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.DECREMENT_PINNED_POST_COUNT: {\r\n        const nextState = {...state};\r\n        const id = action.id;\r\n        const nextStat = nextState[id];\r\n        if (nextStat) {\r\n            const count = nextStat.pinnedpost_count - 1;\r\n            return {\r\n                ...nextState,\r\n                [id]: {\r\n                    ...nextStat,\r\n                    pinnedpost_count: count,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.INCREMENT_FILE_COUNT: {\r\n        const nextState = {...state};\r\n        const id = action.id;\r\n        const nextStat = nextState[id];\r\n        if (nextStat) {\r\n            const count = nextStat.files_count + action.amount;\r\n            return {\r\n                ...nextState,\r\n                [id]: {\r\n                    ...nextStat,\r\n                    files_count: count,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channelsMemberCount(state: Record<string, number> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNELS_MEMBER_COUNT: {\r\n        const memberCount = action.data;\r\n        return {\r\n            ...state,\r\n            ...memberCount,\r\n        };\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction groupsAssociatedToChannel(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNELS_IN_TEAM: {\r\n        const {groupsByChannelId} = action.data;\r\n        const nextState = {...state};\r\n\r\n        for (const channelID of Object.keys(groupsByChannelId)) {\r\n            if (groupsByChannelId[channelID]) {\r\n                const associatedGroupIDs = new Set<string>([]);\r\n                for (const group of groupsByChannelId[channelID]) {\r\n                    associatedGroupIDs.add(group.id);\r\n                }\r\n                const ids = Array.from(associatedGroupIDs);\r\n                nextState[channelID] = {ids, totalCount: ids.length};\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL: {\r\n        const {channelID, groups} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set(state[channelID] ? state[channelID].ids : []);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        nextState[channelID] = {ids: Array.from(associatedGroupIDs), totalCount: associatedGroupIDs.size};\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUPS_ASSOCIATED_TO_CHANNEL: {\r\n        const {channelID, groups, totalGroupCount} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set<string>([]);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        nextState[channelID] = {ids: Array.from(associatedGroupIDs), totalCount: totalGroupCount};\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNEL: {\r\n        const {channelID, groups} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set<string>([]);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        const ids = Array.from(associatedGroupIDs);\r\n        nextState[channelID] = {ids, totalCount: ids.length};\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL:\r\n    case GroupTypes.RECEIVED_GROUPS_NOT_ASSOCIATED_TO_CHANNEL: {\r\n        const {channelID, groups} = action.data;\r\n\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set(state[channelID] ? state[channelID].ids : []);\r\n\r\n        for (const group of groups) {\r\n            associatedGroupIDs.delete(group.id);\r\n        }\r\n        nextState[channelID] = {ids: Array.from(associatedGroupIDs), totalCount: associatedGroupIDs.size};\r\n\r\n        return nextState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction updateChannelMemberSchemeRoles(state: any, action: AnyAction) {\r\n    const {channelId, userId, isSchemeUser, isSchemeAdmin} = action.data;\r\n    const channel = state[channelId];\r\n    if (channel) {\r\n        const member = channel[userId];\r\n        if (member) {\r\n            return {\r\n                ...state,\r\n                [channelId]: {\r\n                    ...state[channelId],\r\n                    [userId]: {\r\n                        ...state[channelId][userId],\r\n                        scheme_user: isSchemeUser,\r\n                        scheme_admin: isSchemeAdmin,\r\n                    },\r\n                },\r\n            };\r\n        }\r\n    }\r\n    return state;\r\n}\r\n\r\nfunction totalCount(state = 0, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_TOTAL_CHANNEL_COUNT: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function manuallyUnread(state: RelationOneToOne<Channel, boolean> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.REMOVE_MANUALLY_UNREAD: {\r\n        if (state[action.data.channelId]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.channelId];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS: {\r\n        // user is logging out, remove any reference\r\n        return {};\r\n    }\r\n\r\n    case ChannelTypes.ADD_MANUALLY_UNREAD:\r\n    case ChannelTypes.POST_UNREAD_SUCCESS: {\r\n        return {...state, [action.data.channelId]: true};\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function channelModerations(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL_MODERATIONS: {\r\n        const {channelId, moderations} = action.data;\r\n        return {\r\n            ...state,\r\n            [channelId]: moderations,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function channelMemberCountsByGroup(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_CHANNEL_MEMBER_COUNTS_BY_GROUP: {\r\n        const {channelId, memberCounts} = action.data;\r\n        const memberCountsByGroup: ChannelMemberCountsByGroup = {};\r\n        memberCounts.forEach((channelMemberCount: ChannelMemberCountByGroup) => {\r\n            memberCountsByGroup[channelMemberCount.group_id] = channelMemberCount;\r\n        });\r\n\r\n        return {\r\n            ...state,\r\n            [channelId]: memberCountsByGroup,\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_MEMBER_COUNTS_FROM_GROUPS_LIST: {\r\n        const memberCountsByGroup: ChannelMemberCountsByGroup = {};\r\n        action.data.forEach((group: Group) => {\r\n            memberCountsByGroup[group.id] = {\r\n                group_id: group.id,\r\n                channel_member_count: group.member_count || 0,\r\n                channel_member_timezones_count: group.channel_member_timezones_count || 0,\r\n            };\r\n        });\r\n\r\n        return {\r\n            ...state,\r\n            [action.channelId]: memberCountsByGroup,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction roles(state: RelationOneToOne<Channel, Set<string>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER: {\r\n        const channelMember = action.data;\r\n        const oldRoles = state[channelMember.channel_id];\r\n        const newRoles = splitRoles(channelMember.roles);\r\n\r\n        // If roles didn't change no need to update state\r\n        if (isEqual(oldRoles, newRoles)) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [channelMember.channel_id]: newRoles,\r\n        };\r\n    }\r\n    case ChannelTypes.RECEIVED_MY_CHANNEL_MEMBERS: {\r\n        const nextState = {...state};\r\n        const remove = action.remove as string[];\r\n        let stateChanged = false;\r\n        if (remove && remove.length) {\r\n            remove.forEach((id: string) => {\r\n                Reflect.deleteProperty(nextState, id);\r\n            });\r\n            stateChanged = true;\r\n        }\r\n\r\n        for (const cm of action.data) {\r\n            const oldRoles = nextState[cm.channel_id];\r\n            const newRoles = splitRoles(cm.roles);\r\n\r\n            // If roles didn't change no need to update state\r\n            if (!isEqual(oldRoles, newRoles)) {\r\n                nextState[cm.channel_id] = splitRoles(cm.roles);\r\n                stateChanged = true;\r\n            }\r\n        }\r\n\r\n        if (stateChanged) {\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        const nextState = {...state};\r\n        if (action.data) {\r\n            Reflect.deleteProperty(nextState, action.data.id);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // the current selected channel\r\n    currentChannelId,\r\n\r\n    // object where every key is the channel id and has and object with the channel detail\r\n    channels,\r\n\r\n    // object where every key is a team id and has set of channel ids that are on the team\r\n    channelsInTeam,\r\n\r\n    // object where every key is the channel id and has an object with the channel members detail\r\n    myMembers,\r\n\r\n    // object where every key is the channel id and has an object with the channel roles\r\n    roles,\r\n\r\n    // object where every key is the channel id with an object where key is a user id and has an object with the channel members detail\r\n    membersInChannel,\r\n\r\n    // object where every key is the channel id and has an object with the channel stats\r\n    stats,\r\n\r\n    groupsAssociatedToChannel,\r\n\r\n    totalCount,\r\n\r\n    // object where every key is the channel id, if present means a user requested to mark that channel as unread.\r\n    manuallyUnread,\r\n\r\n    // object where every key is the channel id and has an object with the channel moderations\r\n    channelModerations,\r\n\r\n    // object where every key is the channel id containing map of <group_id: ChannelMemberCountByGroup>\r\n    channelMemberCountsByGroup,\r\n\r\n    // object where every key is the channel id mapping to an object containing the number of messages in the channel\r\n    messageCounts,\r\n\r\n    // object where key is the channel id and value is the member count for the channel\r\n    channelsMemberCount,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Product, Subscription, CloudCustomer, Invoice, Limits} from '@mattermost/types/cloud';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {CloudTypes} from 'mattermost-redux/action_types';\r\n\r\nexport function subscription(state: Subscription | null = null, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_CLOUD_SUBSCRIPTION: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction customer(state: CloudCustomer | null = null, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_CLOUD_CUSTOMER: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction products(state: Record<string, Product> | null = null, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_CLOUD_PRODUCTS: {\r\n        const productList: Product[] = action.data;\r\n        const productDict = productList.reduce((map, obj) => {\r\n            map[obj.id] = obj;\r\n            return map;\r\n        }, {} as Record<string, Product>);\r\n        return {\r\n            ...state,\r\n            ...productDict,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction invoices(state: Record<string, Invoice> | null = null, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_CLOUD_INVOICES: {\r\n        const invoiceList: Invoice[] = action.data;\r\n        const invoiceDict = invoiceList.reduce((map, obj) => {\r\n            map[obj.id] = obj;\r\n            return map;\r\n        }, {} as Record<string, Invoice>);\r\n        return {\r\n            ...state,\r\n            ...invoiceDict,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport interface LimitsReducer {\r\n    limits: Limits;\r\n    limitsLoaded: boolean;\r\n}\r\n\r\nconst emptyLimits = {\r\n    limits: {},\r\n    limitsLoaded: false,\r\n};\r\n\r\nexport function limits(state: LimitsReducer = emptyLimits, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_CLOUD_LIMITS: {\r\n        return {\r\n            limits: action.data,\r\n            limitsLoaded: true,\r\n        };\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_SUBSCRIPTION: {\r\n        return emptyLimits;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport interface ErrorsReducer {\r\n    subscription?: true;\r\n    products?: true;\r\n    customer?: true;\r\n    invoices?: true;\r\n    limits?: true;\r\n    trueUpReview?: true;\r\n}\r\nconst emptyErrors = {};\r\nexport function errors(state: ErrorsReducer = emptyErrors, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.CLOUD_SUBSCRIPTION_FAILED: {\r\n        return {...state, subscription: true};\r\n    }\r\n    case CloudTypes.CLOUD_PRODUCTS_FAILED: {\r\n        return {...state, products: true};\r\n    }\r\n    case CloudTypes.CLOUD_CUSTOMER_FAILED: {\r\n        return {...state, customer: true};\r\n    }\r\n    case CloudTypes.CLOUD_INVOICES_FAILED: {\r\n        return {...state, invoices: true};\r\n    }\r\n    case CloudTypes.CLOUD_LIMITS_FAILED: {\r\n        return {...state, limits: true};\r\n    }\r\n\r\n    case CloudTypes.RECEIVED_CLOUD_SUBSCRIPTION: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.subscription;\r\n        return newState;\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_PRODUCTS: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.products;\r\n        return newState;\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_CUSTOMER: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.customer;\r\n        return newState;\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_INVOICES: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.invoices;\r\n        return newState;\r\n    }\r\n    case CloudTypes.RECEIVED_CLOUD_LIMITS: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.limits;\r\n        return newState;\r\n    }\r\n\r\n    case CloudTypes.CLOUD_SUBSCRIPTION_REQUEST: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.subscription;\r\n        return newState;\r\n    }\r\n    case CloudTypes.CLOUD_PRODUCTS_REQUEST: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.products;\r\n        return newState;\r\n    }\r\n    case CloudTypes.CLOUD_CUSTOMER_REQUEST: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.customer;\r\n        return newState;\r\n    }\r\n    case CloudTypes.CLOUD_INVOICES_REQUEST: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.invoices;\r\n        return newState;\r\n    }\r\n    case CloudTypes.CLOUD_LIMITS_REQUEST: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.limits;\r\n        return newState;\r\n    }\r\n\r\n    default: {\r\n        return state;\r\n    }\r\n    }\r\n}\r\nexport default combineReducers({\r\n\r\n    // represents the current cloud customer\r\n    customer,\r\n\r\n    // represents the current cloud subscription\r\n    subscription,\r\n\r\n    // represents the cloud products offered\r\n    products,\r\n\r\n    // represents the invoices tied to the current subscription\r\n    invoices,\r\n\r\n    // represents the usage limits associated with this workspace\r\n    limits,\r\n\r\n    // network errors, used to show errors in ui instead of blowing up and showing nothing\r\n    errors,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ContentFlaggingTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction settings(state = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ContentFlaggingTypes.RECEIVED_CONTENT_FLAGGING_CONFIG: {\r\n        return {\r\n            ...state,\r\n            ...action.data,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    settings,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {CustomEmoji} from '@mattermost/types/emojis';\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {EmojiTypes, PostTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nexport function customEmoji(state: IDMappedObjects<CustomEmoji> = {}, action: MMReduxAction): IDMappedObjects<CustomEmoji> {\r\n    switch (action.type) {\r\n    case EmojiTypes.RECEIVED_CUSTOM_EMOJI: {\r\n        const emoji: CustomEmoji = action.data;\r\n\r\n        return storeEmoji(state, emoji);\r\n    }\r\n    case EmojiTypes.RECEIVED_CUSTOM_EMOJIS: {\r\n        const emojis: CustomEmoji[] = action.data;\r\n\r\n        return emojis.reduce(storeEmoji, state);\r\n    }\r\n    case EmojiTypes.DELETED_CUSTOM_EMOJI: {\r\n        const emoji: CustomEmoji = action.data;\r\n\r\n        if (!state[emoji.id]) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, emoji.id);\r\n        return nextState;\r\n    }\r\n\r\n    case EmojiTypes.CLEAR_CUSTOM_EMOJIS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post: Post = action.data;\r\n\r\n        return storeEmojisForPost(state, post);\r\n    }\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce(storeEmojisForPost, state);\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction storeEmoji(state: IDMappedObjects<CustomEmoji>, emoji: CustomEmoji) {\r\n    if (state[emoji.id]) {\r\n        // Emoji is already in the store\r\n        return state;\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [emoji.id]: emoji,\r\n    };\r\n}\r\n\r\nfunction storeEmojisForPost(state: IDMappedObjects<CustomEmoji>, post: Post): IDMappedObjects<CustomEmoji> {\r\n    if (!post.metadata || !post.metadata.emojis) {\r\n        return state;\r\n    }\r\n\r\n    return post.metadata.emojis.reduce(storeEmoji, state);\r\n}\r\n\r\nfunction nonExistentEmoji(state: Set<string> = new Set(), action: MMReduxAction): Set<string> {\r\n    switch (action.type) {\r\n    case EmojiTypes.CUSTOM_EMOJI_DOES_NOT_EXIST: {\r\n        if (!state.has(action.data)) {\r\n            const nextState = new Set(state);\r\n            nextState.add(action.data);\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case EmojiTypes.RECEIVED_CUSTOM_EMOJI: {\r\n        if (action.data && state.has(action.data.name)) {\r\n            const nextState = new Set(state);\r\n            nextState.delete(action.data.name);\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case EmojiTypes.RECEIVED_CUSTOM_EMOJIS: {\r\n        const data = action.data || [];\r\n        const nextState = new Set(state);\r\n\r\n        let changed = false;\r\n        for (const emoji of data) {\r\n            if (emoji && nextState.has(emoji.name)) {\r\n                nextState.delete(emoji.name);\r\n                changed = true;\r\n            }\r\n        }\r\n        return changed ? nextState : state;\r\n    }\r\n    case EmojiTypes.CLEAR_CUSTOM_EMOJIS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return new Set();\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where every key is the custom emoji id and has an object with the custom emoji details\r\n    customEmoji,\r\n\r\n    // set containing custom emoji names that do not exist\r\n    nonExistentEmoji,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ChannelBookmark} from '@mattermost/types/channel_bookmarks';\r\nimport type {FileInfo, FileSearchResultItem} from '@mattermost/types/files';\r\nimport type {Post} from '@mattermost/types/posts';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {FileTypes, PostTypes, UserTypes, ChannelBookmarkTypes} from 'mattermost-redux/action_types';\r\n\r\nexport function files(state: Record<string, FileInfo> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case FileTypes.RECEIVED_UPLOAD_FILES:\r\n    case FileTypes.RECEIVED_FILES_FOR_POST: {\r\n        const filesById = action.data.reduce((filesMap: any, file: any) => {\r\n            return {...filesMap,\r\n                [file.id]: file,\r\n            };\r\n        }, {} as any);\r\n        return {...state,\r\n            ...filesById,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        return storeAllFilesForPost(storeFilesForPost, state, post);\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce((nextState, post) => {\r\n            return storeAllFilesForPost(storeFilesForPost, nextState, post);\r\n        }, state);\r\n    }\r\n\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        if (action.data && action.data.file_ids && action.data.file_ids.length) {\r\n            const nextState = {...state};\r\n            const fileIds = action.data.file_ids as string[];\r\n            fileIds.forEach((id) => {\r\n                Reflect.deleteProperty(nextState, id);\r\n            });\r\n\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case FileTypes.REMOVED_FILE: {\r\n        const nextState = {...state};\r\n        const {fileIds} = action.data;\r\n        if (fileIds) {\r\n            fileIds.forEach((id: string) => {\r\n                Reflect.deleteProperty(nextState, id);\r\n            });\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelBookmarkTypes.RECEIVED_BOOKMARKS: {\r\n        const bookmarks: ChannelBookmark[] = action.data.bookmarks;\r\n\r\n        const nextState = {...state};\r\n\r\n        bookmarks.forEach(({file}) => {\r\n            if (file) {\r\n                nextState[file.id] = file;\r\n            }\r\n        });\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case ChannelBookmarkTypes.RECEIVED_BOOKMARK: {\r\n        const {file}: ChannelBookmark = action.data;\r\n\r\n        if (file) {\r\n            return {...state, [file.id]: file};\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case ChannelBookmarkTypes.BOOKMARK_DELETED: {\r\n        const {file}: ChannelBookmark = action.data;\r\n\r\n        if (!file) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, file.id);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function filesFromSearch(state: Record<string, FileSearchResultItem> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case FileTypes.RECEIVED_FILES_FOR_SEARCH: {\r\n        return {...state,\r\n            ...action.data,\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction storeAllFilesForPost(storeFilesCallback: (state: Record<string, any>, post: Post) => any, state: any, post: Post) {\r\n    let currentState = state;\r\n\r\n    // Handle permalink embedded files\r\n    if (post.metadata && post.metadata.embeds) {\r\n        const embeds = post.metadata.embeds;\r\n\r\n        currentState = embeds.reduce((nextState, embed) => {\r\n            if (embed && embed.type === 'permalink' && embed.data && 'post' in embed.data && embed.data.post) {\r\n                return storeFilesCallback(nextState, embed.data.post);\r\n            }\r\n\r\n            return nextState;\r\n        }, currentState);\r\n    }\r\n\r\n    return storeFilesCallback(currentState, post);\r\n}\r\n\r\nfunction storeFilesForPost(state: Record<string, FileInfo>, post: Post) {\r\n    if (!post.metadata || !post.metadata.files) {\r\n        return state;\r\n    }\r\n\r\n    return post.metadata.files.reduce((nextState, file) => {\r\n        if (nextState[file.id]) {\r\n            // File is already in the store\r\n            return nextState;\r\n        }\r\n\r\n        return {\r\n            ...nextState,\r\n            [file.id]: file,\r\n        };\r\n    }, state);\r\n}\r\n\r\nexport function fileIdsByPostId(state: Record<string, string[]> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case FileTypes.RECEIVED_FILES_FOR_POST: {\r\n        const {data, postId} = action;\r\n        const filesIdsForPost = data.map((file: FileInfo) => file.id);\r\n        return {...state,\r\n            [postId as string]: filesIdsForPost,\r\n        };\r\n    }\r\n\r\n    case PostTypes.RECEIVED_NEW_POST:\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n\r\n        return storeAllFilesForPost(storeFilesIdsForPost, state, post);\r\n    }\r\n\r\n    case PostTypes.RECEIVED_POSTS: {\r\n        const posts: Post[] = Object.values(action.data.posts);\r\n\r\n        return posts.reduce((nextState, post) => {\r\n            return storeAllFilesForPost(storeFilesIdsForPost, nextState, post);\r\n        }, state);\r\n    }\r\n\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, action.data.id);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction storeFilesIdsForPost(state: Record<string, string[]>, post: Post) {\r\n    if (!post.metadata || !post.metadata.files) {\r\n        return state;\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [post.id]: post.metadata.files ? post.metadata.files.map((file) => file.id) : [],\r\n    };\r\n}\r\n\r\nfunction filePublicLink(state: {link: string} = {link: ''}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case FileTypes.RECEIVED_FILE_PUBLIC_LINK: {\r\n        return action.data;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {link: ''};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    files,\r\n    filesFromSearch,\r\n    fileIdsByPostId,\r\n    filePublicLink,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ClientLicense, ClientConfig} from '@mattermost/types/config';\r\nimport type {UserPropertyField} from '@mattermost/types/properties';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {GeneralTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction config(state: Partial<ClientConfig> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.CLIENT_CONFIG_RECEIVED:\r\n        return Object.assign({}, state, action.data);\r\n    case UserTypes.LOGIN: // Used by the mobile app\r\n    case GeneralTypes.SET_CONFIG_AND_LICENSE:\r\n        return Object.assign({}, state, action.data.config);\r\n    case GeneralTypes.CLIENT_CONFIG_RESET:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction license(state: ClientLicense = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.CLIENT_LICENSE_RECEIVED:\r\n        return action.data;\r\n    case GeneralTypes.SET_CONFIG_AND_LICENSE:\r\n        return Object.assign({}, state, action.data.license);\r\n    case GeneralTypes.CLIENT_LICENSE_RESET:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction customProfileAttributes(state: IDMappedObjects<UserPropertyField> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.CUSTOM_PROFILE_ATTRIBUTE_FIELDS_RECEIVED: {\r\n        const data: UserPropertyField[] = action.data;\r\n        return data.reduce<IDMappedObjects<UserPropertyField>>((acc, field) => {\r\n            acc[field.id] = field;\r\n            return acc;\r\n        }, {});\r\n    }\r\n    case GeneralTypes.CUSTOM_PROFILE_ATTRIBUTE_FIELD_DELETED: {\r\n        const nextState = {...state};\r\n        const fieldId = action.data;\r\n        if (Object.hasOwn(nextState, fieldId)) {\r\n            Reflect.deleteProperty(nextState, fieldId);\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case GeneralTypes.CUSTOM_PROFILE_ATTRIBUTE_FIELD_CREATED:\r\n    case GeneralTypes.CUSTOM_PROFILE_ATTRIBUTE_FIELD_PATCHED: {\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction serverVersion(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.RECEIVED_SERVER_VERSION:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction firstAdminVisitMarketplaceStatus(state = false, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.FIRST_ADMIN_VISIT_MARKETPLACE_STATUS_RECEIVED:\r\n        return action.data;\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction firstAdminCompleteSetup(state = false, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.FIRST_ADMIN_COMPLETE_SETUP_RECEIVED:\r\n        return action.data;\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport type CWSAvailabilityState = 'pending' | 'available' | 'unavailable' | 'not_applicable';\r\n\r\nfunction cwsAvailability(state: CWSAvailabilityState = 'pending', action: MMReduxAction): CWSAvailabilityState {\r\n    switch (action.type) {\r\n    case GeneralTypes.CWS_AVAILABILITY_CHECK_REQUEST:\r\n        return 'pending';\r\n    case GeneralTypes.CWS_AVAILABILITY_CHECK_SUCCESS:\r\n        return action.data;\r\n    case GeneralTypes.CWS_AVAILABILITY_CHECK_FAILURE:\r\n        return 'unavailable';\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 'pending';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    config,\r\n    license,\r\n    customProfileAttributes,\r\n    serverVersion,\r\n    firstAdminVisitMarketplaceStatus,\r\n    firstAdminCompleteSetup,\r\n    cwsAvailability,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {GroupChannel, GroupSyncablesState, GroupTeam, Group, GroupMember} from '@mattermost/types/groups';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {GroupTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction syncables(state: Record<string, GroupSyncablesState> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.RECEIVED_GROUP_TEAMS: {\r\n        return {\r\n            ...state,\r\n            [action.group_id]: {\r\n                ...state[action.group_id],\r\n                teams: action.data,\r\n            },\r\n        };\r\n    }\r\n    case GroupTypes.RECEIVED_GROUP_CHANNELS: {\r\n        return {\r\n            ...state,\r\n            [action.group_id]: {\r\n                ...state[action.group_id],\r\n                channels: action.data,\r\n            },\r\n        };\r\n    }\r\n    case GroupTypes.PATCHED_GROUP_TEAM:\r\n    case GroupTypes.LINKED_GROUP_TEAM: {\r\n        let nextGroupTeams: GroupTeam[] = [];\r\n        if (!state[action.data.group_id] || !state[action.data.group_id].teams || state[action.data.group_id].teams.length === 0) {\r\n            nextGroupTeams = [action.data];\r\n        } else {\r\n            nextGroupTeams = {...state}[action.data.group_id].teams.slice();\r\n\r\n            for (let i = 0, len = nextGroupTeams.length; i < len; i++) {\r\n                if (nextGroupTeams[i].team_id === action.data.team_id) {\r\n                    nextGroupTeams[i] = action.data;\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.group_id]: {\r\n                ...state[action.data.group_id],\r\n                teams: nextGroupTeams,\r\n            },\r\n        };\r\n    }\r\n    case GroupTypes.PATCHED_GROUP_CHANNEL:\r\n    case GroupTypes.LINKED_GROUP_CHANNEL: {\r\n        let nextGroupChannels: GroupChannel[] = [];\r\n\r\n        if (!state[action.data.group_id] || !state[action.data.group_id].channels) {\r\n            nextGroupChannels = [action.data];\r\n        } else {\r\n            nextGroupChannels = {...state}[action.data.group_id].channels.slice();\r\n            for (let i = 0, len = nextGroupChannels.length; i < len; i++) {\r\n                if (nextGroupChannels[i].channel_id === action.data.channel_id) {\r\n                    nextGroupChannels[i] = action.data;\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.group_id]: {\r\n                ...state[action.data.group_id],\r\n                channels: nextGroupChannels,\r\n            },\r\n        };\r\n    }\r\n    case GroupTypes.UNLINKED_GROUP_TEAM: {\r\n        if (!state[action.data.group_id]) {\r\n            return state;\r\n        }\r\n        let nextTeams: GroupTeam[] = [];\r\n        let nextChannels: GroupChannel[] = [];\r\n        if (state[action.data.group_id].teams?.length > 0) {\r\n            nextTeams = state[action.data.group_id].teams.slice();\r\n\r\n            const index = nextTeams.findIndex((groupTeam) => {\r\n                return groupTeam.team_id === action.data.syncable_id;\r\n            });\r\n\r\n            if (index !== -1) {\r\n                nextTeams.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        // When we remove a team we also need to remove all channels in that team\r\n        if (state[action.data.group_id].channels?.length > 0) {\r\n            nextChannels = state[action.data.group_id].channels.slice();\r\n\r\n            const index = nextChannels.findIndex((groupChannel) => {\r\n                return groupChannel.team_id === action.data.syncable_id;\r\n            });\r\n\r\n            if (index !== -1) {\r\n                nextChannels.splice(index, 1);\r\n            }\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.group_id]: {\r\n                ...state[action.data.group_id],\r\n                teams: nextTeams,\r\n                channels: nextChannels,\r\n            },\r\n        };\r\n    }\r\n    case GroupTypes.UNLINKED_GROUP_CHANNEL: {\r\n        if (!state[action.data.group_id]) {\r\n            return state;\r\n        }\r\n        const nextChannels = state[action.data.group_id].channels.slice();\r\n\r\n        const index = nextChannels.findIndex((groupChannel) => {\r\n            return groupChannel.channel_id === action.data.syncable_id;\r\n        });\r\n\r\n        if (index !== -1) {\r\n            nextChannels.splice(index, 1);\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.group_id]: {\r\n                ...state[action.data.group_id],\r\n                channels: nextChannels,\r\n            },\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction myGroups(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.ADD_MY_GROUP: {\r\n        const groupId = action.id;\r\n        const nextState = [...state];\r\n        if (state.indexOf(groupId) === -1) {\r\n            nextState.push(groupId);\r\n        }\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_MY_GROUPS: {\r\n        const groups: Group[] = action.data;\r\n        const nextState = [...state];\r\n\r\n        groups.forEach((group) => {\r\n            const index = state.indexOf(group.id);\r\n\r\n            if (index === -1) {\r\n                nextState.push(group.id);\r\n            }\r\n        });\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.REMOVE_MY_GROUP: {\r\n        const groupId = action.id;\r\n        const index = state.indexOf(groupId);\r\n\r\n        if (index === -1) {\r\n            // There's nothing to remove\r\n            return state;\r\n        }\r\n\r\n        // Remove the group ID from my groups list\r\n        const nextState = [...state];\r\n        nextState.splice(index, 1);\r\n\r\n        return nextState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction stats(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.RECEIVED_GROUP_STATS: {\r\n        const stat = action.data;\r\n        return {\r\n            ...state,\r\n            [stat.group_id]: stat,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction groups(state: Record<string, Group> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.CREATE_GROUP_SUCCESS:\r\n    case GroupTypes.PATCHED_GROUP:\r\n    case GroupTypes.RESTORED_GROUP:\r\n    case GroupTypes.ARCHIVED_GROUP:\r\n    case GroupTypes.RECEIVED_GROUP: {\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    }\r\n    case GroupTypes.RECEIVED_MY_GROUPS:\r\n    case GroupTypes.RECEIVED_GROUPS: {\r\n        const nextState = {...state};\r\n        for (const group of action.data) {\r\n            nextState[group.id] = group;\r\n        }\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNELS_IN_TEAM: {\r\n        const nextState = {...state};\r\n        const {groupsByChannelId} = action.data;\r\n\r\n        for (const channelID of Object.keys(groupsByChannelId)) {\r\n            if (groupsByChannelId[channelID]) {\r\n                for (const group of groupsByChannelId[channelID]) {\r\n                    nextState[group.id] = group;\r\n                }\r\n            }\r\n        }\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUPS_ASSOCIATED_TO_TEAM:\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_TEAM:\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNEL:\r\n    case GroupTypes.RECEIVED_GROUPS_ASSOCIATED_TO_CHANNEL: {\r\n        const nextState = {...state};\r\n        for (const group of action.data.groups) {\r\n            nextState[group.id] = group;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_MEMBER_TO_REMOVE_FROM_GROUP: {\r\n        const dataInfo: GroupMember = action.data;\r\n\r\n        const group = state[dataInfo.group_id];\r\n\r\n        if (Array.isArray(group?.member_ids)) {\r\n            const newMemberIds = new Set(group.member_ids);\r\n            newMemberIds.delete(dataInfo.user_id);\r\n            const newGroup = {...group,\r\n                member_ids: [...newMemberIds],\r\n                member_count: newMemberIds.size,\r\n            };\r\n            return {\r\n                ...state,\r\n                [group.id]: newGroup,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case GroupTypes.RECEIVED_MEMBER_TO_ADD_TO_GROUP: {\r\n        const {group_id: groupId, user_id: userId}: GroupMember = action.data;\r\n\r\n        const group = state[groupId];\r\n\r\n        if (Array.isArray(group?.member_ids)) {\r\n            const newMemberIds = new Set(group.member_ids);\r\n            newMemberIds.add(userId);\r\n            const newGroup = {...group,\r\n                member_ids: [...newMemberIds],\r\n                member_count: newMemberIds.size,\r\n            };\r\n            return {\r\n                ...state,\r\n                [group.id]: newGroup,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    syncables,\r\n    groups,\r\n    stats,\r\n    myGroups,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Product} from '@mattermost/types/cloud';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {HostedCustomerTypes} from 'mattermost-redux/action_types';\r\n\r\nexport interface SelfHostedProducts {\r\n    products: Record<string, Product>;\r\n    productsLoaded: boolean;\r\n}\r\n\r\nconst initialProducts = {\r\n    products: {},\r\n    productsLoaded: false,\r\n};\r\n\r\nfunction products(state: SelfHostedProducts = initialProducts, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case HostedCustomerTypes.RECEIVED_SELF_HOSTED_PRODUCTS: {\r\n        const productList: Product[] = action.data;\r\n        const productDict = productList.reduce((map, obj) => {\r\n            map[obj.id] = obj;\r\n            return map;\r\n        }, {} as Record<string, Product>);\r\n        return {\r\n            ...state,\r\n            products: {\r\n                ...state.products,\r\n                ...productDict,\r\n            },\r\n            productsLoaded: true,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport interface ErrorsReducer {\r\n    products?: true;\r\n    invoices?: true;\r\n}\r\n\r\nconst emptyErrors = {};\r\nexport function errors(state: ErrorsReducer = emptyErrors, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case HostedCustomerTypes.SELF_HOSTED_PRODUCTS_FAILED: {\r\n        return {...state, products: true};\r\n    }\r\n    case HostedCustomerTypes.SELF_HOSTED_PRODUCTS_REQUEST:\r\n    case HostedCustomerTypes.RECEIVED_SELF_HOSTED_PRODUCTS: {\r\n        const newState = Object.assign({}, state);\r\n        delete newState.products;\r\n        return newState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    products,\r\n    errors,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Command, IncomingWebhook, OutgoingWebhook, OAuthApp, OutgoingOAuthConnection, DialogArgs} from '@mattermost/types/integrations';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {IntegrationTypes, UserTypes, ChannelTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction incomingHooks(state: IDMappedObjects<IncomingWebhook> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_INCOMING_HOOK: {\r\n        const nextState = {...state};\r\n        nextState[action.data.id] = action.data;\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.RECEIVED_INCOMING_HOOKS: {\r\n        const nextState = {...state};\r\n        for (const hook of action.data) {\r\n            nextState[hook.id] = hook;\r\n        }\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.DELETED_INCOMING_HOOK: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED: {\r\n        const nextState = {...state};\r\n        let deleted = false;\r\n        Object.keys(nextState).forEach((id) => {\r\n            if (nextState[id].channel_id === action.data.id) {\r\n                deleted = true;\r\n                Reflect.deleteProperty(nextState, id);\r\n            }\r\n        });\r\n\r\n        if (deleted) {\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction incomingHooksTotalCount(state: number = 0, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_INCOMING_HOOKS_TOTAL_COUNT: {\r\n        return action.data;\r\n    }\r\n    case IntegrationTypes.DELETED_INCOMING_HOOK: {\r\n        return Math.max(state - 1, 0);\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction outgoingHooks(state: IDMappedObjects<OutgoingWebhook> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_OUTGOING_HOOK: {\r\n        const nextState = {...state};\r\n        nextState[action.data.id] = action.data;\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.RECEIVED_OUTGOING_HOOKS: {\r\n        const nextState = {...state};\r\n        for (const hook of action.data) {\r\n            nextState[hook.id] = hook;\r\n        }\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.DELETED_OUTGOING_HOOK: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED: {\r\n        const nextState = {...state};\r\n        let deleted = false;\r\n        Object.keys(nextState).forEach((id) => {\r\n            if (nextState[id].channel_id === action.data.id) {\r\n                deleted = true;\r\n                Reflect.deleteProperty(nextState, id);\r\n            }\r\n        });\r\n\r\n        if (deleted) {\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction commands(state: IDMappedObjects<Command> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_COMMANDS:\r\n    case IntegrationTypes.RECEIVED_CUSTOM_TEAM_COMMANDS: {\r\n        const nextState = {...state};\r\n        for (const command of action.data) {\r\n            if (command.id) {\r\n                const id = command.id;\r\n                nextState[id] = command;\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.RECEIVED_COMMAND:\r\n        if (action.data.id) {\r\n            return {\r\n                ...state,\r\n                [action.data.id]: action.data,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    case IntegrationTypes.RECEIVED_COMMAND_TOKEN: {\r\n        const {id, token} = action.data;\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...state[id],\r\n                token,\r\n            },\r\n        };\r\n    }\r\n    case IntegrationTypes.DELETED_COMMAND: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction systemCommands(state: IDMappedObjects<Command> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_COMMANDS: {\r\n        const nextCommands: Record<string, Command> = {};\r\n        for (const command of action.data) {\r\n            if (!command.id) {\r\n                nextCommands[command.trigger] = command;\r\n            }\r\n        }\r\n        return nextCommands;\r\n    }\r\n    case IntegrationTypes.RECEIVED_COMMAND:\r\n        if (!action.data.id) {\r\n            return {\r\n                ...state,\r\n                [action.data.trigger]: action.data,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction oauthApps(state: IDMappedObjects<OAuthApp> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_OAUTH_APPS: {\r\n        const nextState = {...state};\r\n        for (const app of action.data) {\r\n            nextState[app.id] = app;\r\n        }\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.RECEIVED_OAUTH_APP:\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    case IntegrationTypes.DELETED_OAUTH_APP: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction appsOAuthAppIDs(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_APPS_OAUTH_APP_IDS: {\r\n        if (state.length === 0 && action.data.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        if (state.length !== action.data.length) {\r\n            return action.data;\r\n        }\r\n\r\n        const orderedState = state.concat().sort();\r\n        const orderedData = action.data.concat().sort();\r\n        for (let i = 0; i < state.length; i++) {\r\n            if (orderedState[i] !== orderedData[i]) {\r\n                return orderedData;\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction outgoingOAuthConnections(state: IDMappedObjects<OutgoingOAuthConnection> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_OUTGOING_OAUTH_CONNECTIONS: {\r\n        const nextState = {...state};\r\n        for (const connection of action.data) {\r\n            nextState[connection.id] = connection;\r\n        }\r\n        return nextState;\r\n    }\r\n    case IntegrationTypes.RECEIVED_OUTGOING_OAUTH_CONNECTION:\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    case IntegrationTypes.DELETED_OUTGOING_OAUTH_CONNECTION: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.id);\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction appsBotIDs(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_APPS_BOT_IDS: {\r\n        if (!action.data) {\r\n            return state;\r\n        }\r\n\r\n        if (state.length === 0 && action.data.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        if (state.length !== action.data.length) {\r\n            return action.data;\r\n        }\r\n\r\n        const orderedState = state.concat().sort();\r\n        const orderedData = action.data.concat().sort();\r\n        for (let i = 0; i < state.length; i++) {\r\n            if (orderedState[i] !== orderedData[i]) {\r\n                return orderedData;\r\n            }\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction dialogArguments(state: DialogArgs | null = null, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_DIALOG_ARGUMENTS:\r\n        return action.data;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction dialogTriggerId(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_DIALOG_TRIGGER_ID:\r\n        return action.data;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction dialog(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case IntegrationTypes.RECEIVED_DIALOG:\r\n        return action.data;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where every key is the hook id and has an object with the incoming hook details\r\n    incomingHooks,\r\n\r\n    // object to represent total amount of incoming hooks\r\n    incomingHooksTotalCount,\r\n\r\n    // object where every key is the hook id and has an object with the outgoing hook details\r\n    outgoingHooks,\r\n\r\n    // object to represent installed slash commands for a current team\r\n    commands,\r\n\r\n    // object to represent registered oauth apps with app id as the key\r\n    oauthApps,\r\n\r\n    // object to represent the list of ids for oauth apps associated to apps\r\n    appsOAuthAppIDs,\r\n\r\n    // object to represent the list of ids for bots associated to apps\r\n    appsBotIDs,\r\n\r\n    // object to represent registered outgoing oauth connections with connection id as the key\r\n    outgoingOAuthConnections,\r\n\r\n    // object to represent built-in slash commands\r\n    systemCommands,\r\n\r\n    // object containing arguments for interactive dialog\r\n    dialogArguments,\r\n\r\n    // trigger ID for interactive dialogs\r\n    dialogTriggerId,\r\n\r\n    // data for an interactive dialog to display\r\n    dialog,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {JobType, Job, JobsByType} from '@mattermost/types/jobs';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {JobTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction jobs(state: IDMappedObjects<Job> = {}, action: MMReduxAction): IDMappedObjects<Job> {\r\n    switch (action.type) {\r\n    case JobTypes.RECEIVED_JOB: {\r\n        const nextState = {...state};\r\n        nextState[action.data.id] = action.data;\r\n        return nextState;\r\n    }\r\n    case JobTypes.RECEIVED_JOBS: {\r\n        const nextState = {...state};\r\n        for (const job of action.data) {\r\n            nextState[job.id] = job;\r\n        }\r\n        return nextState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction jobsByTypeList(state: JobsByType = {}, action: MMReduxAction): JobsByType {\r\n    switch (action.type) {\r\n    case JobTypes.RECEIVED_JOBS_BY_TYPE: {\r\n        const nextState = {...state};\r\n        if (action.data && action.data.length && action.data.length > 0) {\r\n            nextState[action.data[0].type as JobType] = action.data;\r\n        }\r\n        return nextState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where every key is the job id and has an object with the job details\r\n    jobs,\r\n\r\n    // object where every key is a job type and contains a list of jobs.\r\n    jobsByTypeList,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {LimitsTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction serverLimits(state = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case LimitsTypes.RECEIVED_APP_LIMITS: {\r\n        const serverLimits = action.data;\r\n        return {\r\n            ...state,\r\n            ...serverLimits,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    serverLimits,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {PreferenceTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction getKey(preference: PreferenceType) {\r\n    return `${preference.category}--${preference.name}`;\r\n}\r\n\r\nfunction setAllPreferences(preferences: PreferenceType[]): any {\r\n    const nextState: any = {};\r\n\r\n    if (preferences) {\r\n        for (const preference of preferences) {\r\n            nextState[getKey(preference)] = preference;\r\n        }\r\n    }\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction setAllUserPreferences(preferences: PreferenceType[]): {[key: string]: PreferencesType} {\r\n    const nextState: {[key: string]: PreferencesType} = {};\r\n    if (preferences.length === 0) {\r\n        return nextState;\r\n    }\r\n\r\n    const userID = preferences[0].user_id;\r\n    nextState[userID] = {};\r\n\r\n    if (preferences) {\r\n        for (const preference of preferences) {\r\n            nextState[userID][getKey(preference)] = preference;\r\n        }\r\n    }\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction myPreferences(state: Record<string, PreferenceType> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PreferenceTypes.RECEIVED_ALL_PREFERENCES:\r\n        return setAllPreferences(action.data);\r\n\r\n    case UserTypes.LOGIN: // Used by the mobile app\r\n        return setAllPreferences(action.data.preferences);\r\n\r\n    case PreferenceTypes.RECEIVED_PREFERENCES: {\r\n        const nextState = {...state};\r\n\r\n        if (action.data) {\r\n            for (const preference of action.data) {\r\n                nextState[getKey(preference)] = preference;\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case PreferenceTypes.DELETED_PREFERENCES: {\r\n        const nextState = {...state};\r\n\r\n        if (action.data) {\r\n            for (const preference of action.data) {\r\n                Reflect.deleteProperty(nextState, getKey(preference));\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction userPreferences(state: Record<string, PreferencesType> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case PreferenceTypes.RECEIVED_USER_ALL_PREFERENCES:\r\n        return setAllUserPreferences(action.data);\r\n\r\n    case PreferenceTypes.RECEIVED_USER_PREFERENCES: {\r\n        const nextState = {...state};\r\n\r\n        const data = action.data as PreferenceType[];\r\n        if (action.data && data.length > 0) {\r\n            const userID = data[0].user_id;\r\n            nextState[userID] = nextState[userID] ? {...nextState[userID]} : {};\r\n\r\n            for (const preference of action.data) {\r\n                nextState[preference.user_id][getKey(preference)] = preference;\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where the key is the category-name and has the corresponding value\r\n    myPreferences,\r\n    userPreferences,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Role} from '@mattermost/types/roles';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {RoleTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction pending(state: Set<string> = new Set(), action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case RoleTypes.SET_PENDING_ROLES:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return new Set();\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction roles(state: Record<string, Role> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case RoleTypes.RECEIVED_ROLES: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            for (const role of action.data) {\r\n                nextState[role.name] = role;\r\n            }\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case RoleTypes.ROLE_DELETED: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, action.data.name);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case RoleTypes.RECEIVED_ROLE: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            nextState[action.data.name] = action.data;\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where the key is the category-name and has the corresponding value\r\n    roles,\r\n    pending,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ScheduledPost, ScheduledPostsState} from '@mattermost/types/schedule_post';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ScheduledPostTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction byId(state: ScheduledPostsState['byId'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ScheduledPostTypes.SCHEDULED_POSTS_RECEIVED: {\r\n        const {scheduledPostsByTeamId} = action.data;\r\n        const newState = {...state};\r\n\r\n        Object.keys(scheduledPostsByTeamId).forEach((teamId: string) => {\r\n            if (Object.hasOwn(scheduledPostsByTeamId, teamId)) {\r\n                scheduledPostsByTeamId[teamId].forEach((scheduledPost: ScheduledPost) => {\r\n                    newState[scheduledPost.id] = scheduledPost;\r\n                });\r\n            }\r\n        });\r\n\r\n        return newState;\r\n    }\r\n    case ScheduledPostTypes.SINGLE_SCHEDULED_POST_RECEIVED: {\r\n        const scheduledPost = action.data.scheduledPost;\r\n        return {\r\n            ...state,\r\n            [scheduledPost.id]: scheduledPost,\r\n        };\r\n    }\r\n    case ScheduledPostTypes.SCHEDULED_POST_UPDATED: {\r\n        const scheduledPost = action.data.scheduledPost;\r\n        return {\r\n            ...state,\r\n            [scheduledPost.id]: scheduledPost,\r\n        };\r\n    }\r\n    case ScheduledPostTypes.SCHEDULED_POST_DELETED: {\r\n        const scheduledPost = action.data.scheduledPost;\r\n        const newState = {...state};\r\n        delete newState[scheduledPost.id];\r\n        return newState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction byTeamId(state: ScheduledPostsState['byTeamId'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ScheduledPostTypes.SCHEDULED_POSTS_RECEIVED: {\r\n        const {scheduledPostsByTeamId} = action.data;\r\n        const newState = {...state};\r\n\r\n        Object.keys(scheduledPostsByTeamId).forEach((teamId: string) => {\r\n            if (Object.hasOwn(scheduledPostsByTeamId, teamId)) {\r\n                newState[teamId] = scheduledPostsByTeamId[teamId].map((scheduledPost: ScheduledPost) => scheduledPost.id);\r\n            }\r\n        });\r\n\r\n        return newState;\r\n    }\r\n    case ScheduledPostTypes.SINGLE_SCHEDULED_POST_RECEIVED: {\r\n        const scheduledPost = action.data.scheduledPost as ScheduledPost;\r\n        const teamId = action.data.teamId || 'directChannels';\r\n\r\n        const newState = {...state};\r\n\r\n        const existingIndex = newState[teamId].findIndex((existingScheduledPostId) => existingScheduledPostId === scheduledPost.id);\r\n        if (existingIndex >= 0) {\r\n            newState[teamId].splice(existingIndex, 1);\r\n        }\r\n\r\n        if (newState[teamId]) {\r\n            newState[teamId] = [...newState[teamId], scheduledPost.id];\r\n        } else {\r\n            newState[teamId] = [scheduledPost.id];\r\n        }\r\n\r\n        return newState;\r\n    }\r\n    case ScheduledPostTypes.SCHEDULED_POST_DELETED: {\r\n        const scheduledPost = action.data.scheduledPost as ScheduledPost;\r\n\r\n        const newState = {...state};\r\n        let modified = false;\r\n\r\n        for (const teamId of Object.keys(state)) {\r\n            const index = newState[teamId].findIndex((existingScheduledPostId) => existingScheduledPostId === scheduledPost.id);\r\n\r\n            if (index >= 0) {\r\n                newState[teamId] = [...newState[teamId]];\r\n                newState[teamId].splice(index, 1);\r\n                modified = true;\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        return modified ? newState : state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction errorsByTeamId(state: ScheduledPostsState['errorsByTeamId'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ScheduledPostTypes.SCHEDULED_POSTS_RECEIVED: {\r\n        const {scheduledPostsByTeamId} = action.data;\r\n        const newState = {...state};\r\n\r\n        Object.keys(scheduledPostsByTeamId).forEach((teamId: string) => {\r\n            if (Object.hasOwn(scheduledPostsByTeamId, teamId)) {\r\n                const teamScheduledPosts = scheduledPostsByTeamId[teamId] as ScheduledPost[];\r\n                newState[teamId] = teamScheduledPosts.filter((scheduledPost) => scheduledPost.error_code).map((scheduledPost) => scheduledPost.id);\r\n            }\r\n        });\r\n\r\n        return newState;\r\n    }\r\n    case ScheduledPostTypes.SINGLE_SCHEDULED_POST_RECEIVED: {\r\n        let changed = false;\r\n\r\n        const teamId = action.data.teamId || 'directChannels';\r\n        const newState = {...state};\r\n        if (!newState[teamId]) {\r\n            newState[teamId] = [];\r\n        }\r\n\r\n        const scheduledPost = action.data.scheduledPost as ScheduledPost;\r\n        if (scheduledPost.error_code) {\r\n            const alreadyExists = newState[teamId].find((scheduledPostId) => scheduledPostId === scheduledPost.id);\r\n            if (!alreadyExists) {\r\n                newState[teamId] = [...newState[teamId], scheduledPost.id];\r\n                changed = true;\r\n            }\r\n        }\r\n\r\n        return changed ? newState : state;\r\n    }\r\n    case ScheduledPostTypes.SCHEDULED_POST_DELETED: {\r\n        let changed = false;\r\n\r\n        const scheduledPost = action.data.scheduledPost as ScheduledPost;\r\n        const newState = {...state};\r\n\r\n        for (const teamId of Object.keys(state)) {\r\n            const index = newState[teamId].findIndex((scheduledPostId) => scheduledPostId === scheduledPost.id);\r\n\r\n            if (index >= 0) {\r\n                changed = true;\r\n                newState[teamId] = [...newState[teamId]];\r\n                newState[teamId].splice(index, 1);\r\n                break;\r\n            }\r\n        }\r\n        return changed ? newState : state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS: {\r\n        return {};\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction byChannelOrThreadId(state: ScheduledPostsState['byChannelOrThreadId'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case ScheduledPostTypes.SCHEDULED_POSTS_RECEIVED: {\r\n        const {scheduledPostsByTeamId, prune} = action.data;\r\n        const newState = prune ? {} : {...state};\r\n\r\n        Object.keys(scheduledPostsByTeamId).forEach((teamId: string) => {\r\n            if (Object.hasOwn(scheduledPostsByTeamId, teamId)) {\r\n                scheduledPostsByTeamId[teamId].forEach((scheduledPost: ScheduledPost) => {\r\n                    const id = scheduledPost.root_id || scheduledPost.channel_id;\r\n\r\n                    // Check if the entry for that channel/thread ID exists\r\n                    if (newState[id]) {\r\n                        // Only add if its not already there\r\n                        if (!newState[id].includes(scheduledPost.id)) {\r\n                            newState[id] = [...newState[id], scheduledPost.id];\r\n                        }\r\n                    } else {\r\n                        // If the entry does not exist at this moment, create it\r\n                        newState[id] = [scheduledPost.id];\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return newState;\r\n    }\r\n    case ScheduledPostTypes.SINGLE_SCHEDULED_POST_RECEIVED: {\r\n        const scheduledPost = action.data.scheduledPost;\r\n        const newState = {...state};\r\n        const id = scheduledPost.root_id || scheduledPost.channel_id;\r\n\r\n        if (!newState[id]) {\r\n            newState[id] = [scheduledPost.id];\r\n            return newState;\r\n        }\r\n\r\n        let changed = false;\r\n        const existingIndex = newState[id].findIndex((scheduledPostId) => scheduledPostId === scheduledPost.id);\r\n\r\n        if (existingIndex) {\r\n            newState[id] = [...newState[id], scheduledPost.id];\r\n            changed = true;\r\n        }\r\n\r\n        return changed ? newState : state;\r\n    }\r\n    case ScheduledPostTypes.SCHEDULED_POST_DELETED: {\r\n        const scheduledPost = action.data.scheduledPost;\r\n        const id = scheduledPost.root_id || scheduledPost.channel_id;\r\n\r\n        if (!state[id]) {\r\n            return state;\r\n        }\r\n\r\n        const newState = {...state};\r\n        const index = newState[id].findIndex((scheduledPostId) => scheduledPostId === scheduledPost.id);\r\n        newState[id] = [...newState[id]];\r\n        newState[id].splice(index, 1);\r\n\r\n        return newState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    byId,\r\n    byTeamId,\r\n    byChannelOrThreadId,\r\n    errorsByTeamId,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Scheme} from '@mattermost/types/schemes';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {SchemeTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction schemes(state: {\r\n    [x: string]: Scheme;\r\n} = {}, action: MMReduxAction): {\r\n        [x: string]: Scheme;\r\n    } {\r\n    switch (action.type) {\r\n    case SchemeTypes.CREATED_SCHEME:\r\n    case SchemeTypes.PATCHED_SCHEME:\r\n    case SchemeTypes.RECEIVED_SCHEME: {\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n    }\r\n\r\n    case SchemeTypes.RECEIVED_SCHEMES: {\r\n        const nextState = {...state};\r\n        for (const scheme of action.data) {\r\n            nextState[scheme.id] = scheme;\r\n        }\r\n        return nextState;\r\n    }\r\n\r\n    case SchemeTypes.DELETED_SCHEME: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.schemeId);\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    schemes,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {PostTypes, PreferenceTypes, SearchTypes, UserTypes} from 'mattermost-redux/action_types';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nfunction results(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_POSTS: {\r\n        if (action.isGettingMore) {\r\n            return [...new Set(state.concat(action.data.order))];\r\n        }\r\n        return action.data.order;\r\n    }\r\n    case PostTypes.POST_REMOVED: {\r\n        const postId = action.data ? action.data.id : null;\r\n        const index = state.indexOf(postId);\r\n        if (index !== -1) {\r\n            const newState = [...state];\r\n            newState.splice(index, 1);\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n    case SearchTypes.REMOVE_SEARCH_POSTS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction fileResults(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_FILES: {\r\n        if (action.isGettingMore) {\r\n            return [...new Set(state.concat(action.data.order))];\r\n        }\r\n        return action.data.order;\r\n    }\r\n    case SearchTypes.REMOVE_SEARCH_FILES:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction matches(state: Record<string, string[]> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_POSTS:\r\n        if (action.isGettingMore) {\r\n            return Object.assign({}, state, action.data.matches);\r\n        }\r\n        return action.data.matches || {};\r\n    case PostTypes.POST_REMOVED: {\r\n        if (!state[action.data.id]) {\r\n            return state;\r\n        }\r\n\r\n        const newState = {...state};\r\n        Reflect.deleteProperty(newState, action.data.id);\r\n        return newState;\r\n    }\r\n    case SearchTypes.REMOVE_SEARCH_POSTS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction flagged(state: string[] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_FLAGGED_POSTS: {\r\n        return action.data.order;\r\n    }\r\n    case PostTypes.POST_REMOVED: {\r\n        const postId = action.data ? action.data.id : null;\r\n        const index = state.indexOf(postId);\r\n        if (index !== -1) {\r\n            const newState = [...state];\r\n            newState.splice(index, 1);\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n    case PreferenceTypes.RECEIVED_PREFERENCES: {\r\n        if (action.data) {\r\n            const nextState = [...state];\r\n            let hasNewFlaggedPosts = false;\r\n            action.data.forEach((pref: PreferenceType) => {\r\n                if (pref.category === Preferences.CATEGORY_FLAGGED_POST) {\r\n                    const exists = nextState.find((p) => p === pref.name);\r\n                    if (!exists) {\r\n                        hasNewFlaggedPosts = true;\r\n                        nextState.unshift(pref.name);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return hasNewFlaggedPosts ? nextState : state;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case PreferenceTypes.DELETED_PREFERENCES: {\r\n        if (action.data) {\r\n            const nextState = [...state];\r\n            let flaggedPostsRemoved = false;\r\n            action.data.forEach((pref: PreferenceType) => {\r\n                if (pref.category === Preferences.CATEGORY_FLAGGED_POST) {\r\n                    const index = state.indexOf(pref.name);\r\n                    if (index !== -1) {\r\n                        flaggedPostsRemoved = true;\r\n                        nextState.splice(index, 1);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return flaggedPostsRemoved ? nextState : state;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case SearchTypes.REMOVE_SEARCH_POSTS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction removePinnedPost(state: Record<string, string[]>, post: Post) {\r\n    if (post && state[post.channel_id]) {\r\n        const postId = post.id;\r\n        const channelId = post.channel_id;\r\n        const pinnedPosts = [...state[channelId]];\r\n        const index = pinnedPosts.indexOf(postId);\r\n\r\n        if (index !== -1) {\r\n            pinnedPosts.splice(index, 1);\r\n            return {\r\n                ...state,\r\n                [channelId]: pinnedPosts,\r\n            };\r\n        }\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction pinned(state: Record<string, string[]> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_PINNED_POSTS: {\r\n        const {channelId, pinned: posts} = action.data;\r\n        return {\r\n            ...state,\r\n            [channelId]: posts.order.reverse(),\r\n        };\r\n    }\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        return removePinnedPost(state, action.data);\r\n    }\r\n    case PostTypes.RECEIVED_POST: {\r\n        const post = action.data;\r\n        if (post && post.is_pinned) {\r\n            const channelId = post.channel_id;\r\n            let pinnedPosts: string[] = [];\r\n\r\n            if (state[channelId]) {\r\n                pinnedPosts = [...state[channelId]];\r\n            }\r\n\r\n            if (!pinnedPosts.includes(post.id)) {\r\n                pinnedPosts.unshift(post.id);\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                [channelId]: pinnedPosts,\r\n            };\r\n        }\r\n\r\n        return removePinnedPost(state, action.data);\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction current(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_TERM: {\r\n        const nextState = {...state};\r\n        const {params, isEnd, isFilesEnd} = action.data;\r\n        const teamId = action.data.teamId || 'ALL_TEAMS';\r\n        return {\r\n            ...nextState,\r\n            [teamId]: {\r\n                params,\r\n                isEnd: typeof isEnd === 'undefined' && state[teamId] ? state[teamId].isEnd : isEnd,\r\n                isFilesEnd: typeof isFilesEnd === 'undefined' && state[teamId] ? state[teamId].isFilesEnd : isFilesEnd,\r\n            },\r\n        };\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSearchingTerm(state = false, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SEARCH_POSTS_REQUEST:\r\n        return !action.isGettingMore;\r\n    case SearchTypes.SEARCH_POSTS_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSearchGettingMore(state = false, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SEARCH_POSTS_REQUEST:\r\n        return action.isGettingMore;\r\n    case SearchTypes.SEARCH_POSTS_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isLimitedResults(state = -1, action: MMReduxAction): number {\r\n    switch (action.type) {\r\n    case SearchTypes.SEARCH_POSTS_REQUEST: {\r\n        if (!action.isGettingMore) {\r\n            return -1;\r\n        }\r\n        return state;\r\n    }\r\n    case SearchTypes.RECEIVED_SEARCH_POSTS: {\r\n        if (action.data?.first_inaccessible_post_time) {\r\n            return action.data.first_inaccessible_post_time || 0;\r\n        }\r\n        return state;\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n    }\r\n}\r\n\r\nfunction truncationInfo(state = {posts: 0, files: 0}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.RECEIVED_SEARCH_TRUNCATION_INFO: {\r\n        const {firstInaccessiblePostTime, searchType} = action.data;\r\n        return {\r\n            ...state,\r\n            [searchType]: firstInaccessiblePostTime,\r\n        };\r\n    }\r\n    case SearchTypes.REMOVE_SEARCH_POSTS:\r\n        return {\r\n            ...state,\r\n            posts: 0,\r\n        };\r\n    case SearchTypes.REMOVE_SEARCH_FILES:\r\n        return {\r\n            ...state,\r\n            files: 0,\r\n        };\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {posts: 0, files: 0};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // An ordered array with posts ids of flagged posts\r\n    flagged,\r\n\r\n    // An Object where every key is a channel id mapping to an ordered array with posts ids of pinned posts\r\n    pinned,\r\n\r\n    // An ordered array with posts ids from the search results\r\n    results,\r\n\r\n    // An ordered array with files ids from the search results\r\n    fileResults,\r\n\r\n    // Object where every key is a post id mapping to an array of matched words in that post\r\n    matches,\r\n\r\n    // Object holding the current searches for every team\r\n    current,\r\n\r\n    // Boolean true if we are are searching initally\r\n    isSearchingTerm,\r\n\r\n    // Boolean true if we are getting more search results\r\n    isSearchGettingMore,\r\n\r\n    // Boolean true if the search returns results inaccessible because\r\n    // they are beyond a cloud workspace's message limits.\r\n    isLimitedResults,\r\n\r\n    // Object tracking truncation info for posts and files separately\r\n    truncationInfo,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\nimport type {AnyAction} from 'redux';\r\n\r\nimport type {RemoteClusterInfo} from '@mattermost/types/shared_channels';\r\n\r\nimport SharedChannelTypes from '../../action_types/shared_channels';\r\n\r\nexport function remotes(state: Record<string, RemoteClusterInfo[]> = {}, action: AnyAction) {\r\n    switch (action.type) {\r\n    case SharedChannelTypes.RECEIVED_CHANNEL_REMOTES: {\r\n        const {channelId, remotes} = action.data;\r\n        return {\r\n            ...state,\r\n            [channelId]: remotes,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function remotesByRemoteId(state: Record<string, RemoteClusterInfo> = {}, action: AnyAction) {\r\n    switch (action.type) {\r\n    case SharedChannelTypes.RECEIVED_REMOTE_CLUSTER_INFO: {\r\n        const {remoteId, remoteInfo} = action.data;\r\n        return {\r\n            ...state,\r\n            [remoteId]: remoteInfo,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    remotes,\r\n    remotesByRemoteId,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Team, TeamMembership, TeamUnread} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {RelationOneToOne, IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {AdminTypes, ChannelTypes, TeamTypes, UserTypes, SchemeTypes, GroupTypes} from 'mattermost-redux/action_types';\r\nimport {teamListToMap} from 'mattermost-redux/utils/team_utils';\r\n\r\nfunction currentTeamId(state = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.SELECT_TEAM:\r\n        return action.data;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction teams(state: IDMappedObjects<Team> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_TEAMS_LIST:\r\n    case SchemeTypes.RECEIVED_SCHEME_TEAMS:\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_TEAMS_SEARCH:\r\n        return Object.assign({}, state, teamListToMap(action.data));\r\n    case AdminTypes.RECEIVED_DATA_RETENTION_CUSTOM_POLICY_TEAMS:\r\n    case UserTypes.LOGIN: // Used by the mobile app\r\n        return Object.assign({}, state, teamListToMap(action.data.teams));\r\n    case TeamTypes.RECEIVED_TEAMS:\r\n        return Object.assign({}, state, action.data);\r\n    case TeamTypes.CREATED_TEAM:\r\n    case TeamTypes.UPDATED_TEAM:\r\n    case TeamTypes.PATCHED_TEAM:\r\n    case TeamTypes.REGENERATED_TEAM_INVITE_ID:\r\n    case TeamTypes.RECEIVED_TEAM:\r\n        return {\r\n            ...state,\r\n            [action.data.id]: action.data,\r\n        };\r\n\r\n    case TeamTypes.RECEIVED_TEAM_DELETED: {\r\n        const nextState = {...state};\r\n        const teamId = action.data.id;\r\n        if (Object.hasOwn(nextState, teamId)) {\r\n            Reflect.deleteProperty(nextState, teamId);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case TeamTypes.RECEIVED_TEAM_UNARCHIVED: {\r\n        const team = action.data;\r\n\r\n        return {...state, [team.id]: team};\r\n    }\r\n\r\n    case TeamTypes.UPDATED_TEAM_SCHEME: {\r\n        const {teamId, schemeId} = action.data;\r\n        const team = state[teamId];\r\n\r\n        if (!team) {\r\n            return state;\r\n        }\r\n\r\n        return {...state, [teamId]: {...team, scheme_id: schemeId}};\r\n    }\r\n\r\n    case AdminTypes.REMOVE_DATA_RETENTION_CUSTOM_POLICY_TEAMS_SUCCESS: {\r\n        const {teams} = action.data;\r\n        const nextState = {...state};\r\n        teams.forEach((teamId: string) => {\r\n            if (nextState[teamId]) {\r\n                nextState[teamId] = {\r\n                    ...nextState[teamId],\r\n                    policy_id: null,\r\n                };\r\n            }\r\n        });\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction myMembers(state: RelationOneToOne<Team, TeamMembership> = {}, action: MMReduxAction) {\r\n    function updateState(receivedTeams: IDMappedObjects<Team> = {}, currentState: RelationOneToOne<Team, TeamMembership> = {}) {\r\n        return Object.keys(receivedTeams).forEach((teamId) => {\r\n            if (receivedTeams[teamId].delete_at > 0 && currentState[teamId]) {\r\n                Reflect.deleteProperty(currentState, teamId);\r\n            }\r\n        });\r\n    }\r\n\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_MY_TEAM_MEMBER: {\r\n        const nextState = {...state};\r\n        const member = action.data;\r\n        if (member.delete_at === 0) {\r\n            nextState[member.team_id] = member;\r\n        }\r\n        return nextState;\r\n    }\r\n    case TeamTypes.RECEIVED_MY_TEAM_MEMBERS: {\r\n        const nextState: RelationOneToOne<Team, TeamMembership> = {};\r\n        const members = action.data;\r\n        for (const m of members) {\r\n            if (m.delete_at == null || m.delete_at === 0) {\r\n                const prevMember = state[m.team_id] || {mention_count: 0, msg_count: 0, mention_count_root: 0, msg_count_root: 0};\r\n                nextState[m.team_id] = {\r\n                    ...prevMember,\r\n                    ...m,\r\n                };\r\n            }\r\n        }\r\n        return nextState;\r\n    }\r\n    case TeamTypes.RECEIVED_TEAMS_LIST: {\r\n        const nextState = {...state};\r\n        const receivedTeams = teamListToMap(action.data);\r\n        updateState(receivedTeams, nextState);\r\n        return nextState;\r\n    }\r\n    case TeamTypes.RECEIVED_TEAMS: {\r\n        const nextState = {...state};\r\n        const receivedTeams = action.data;\r\n        updateState(receivedTeams, nextState);\r\n        return nextState;\r\n    }\r\n    case TeamTypes.RECEIVED_MY_TEAM_UNREADS: {\r\n        const nextState = {...state};\r\n        const unreads = action.data;\r\n        for (const u of unreads) {\r\n            const msgCount = u.msg_count < 0 ? 0 : u.msg_count;\r\n            const mentionCount = u.mention_count < 0 ? 0 : u.mention_count;\r\n            const msgCountRoot = u.msg_count_root < 0 ? 0 : u.msg_count_root;\r\n            const mentionCountRoot = u.mention_count_root < 0 ? 0 : u.mention_count_root;\r\n            const m = {\r\n                ...state[u.team_id],\r\n                mention_count: mentionCount,\r\n                msg_count: msgCount,\r\n                mention_count_root: mentionCountRoot,\r\n                msg_count_root: msgCountRoot,\r\n            };\r\n            nextState[u.team_id] = m;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case ChannelTypes.INCREMENT_UNREAD_MSG_COUNT: {\r\n        const {teamId, amount, amountRoot, onlyMentions} = action.data;\r\n        const member = state[teamId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual team member\r\n            return state;\r\n        }\r\n\r\n        if (onlyMentions) {\r\n            // Incrementing the msg_count marks the team as unread, so don't do that if these posts shouldn't be unread\r\n            return state;\r\n        }\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...member,\r\n                msg_count: member.msg_count + amount,\r\n                msg_count_root: member.msg_count_root + amountRoot,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.DECREMENT_UNREAD_MSG_COUNT: {\r\n        const {teamId, amount, amountRoot} = action.data;\r\n        const member = state[teamId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual team member\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...member,\r\n                msg_count: Math.max(member.msg_count - Math.abs(amount), 0),\r\n                msg_count_root: Math.max(member.msg_count_root - Math.abs(amountRoot), 0),\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.INCREMENT_UNREAD_MENTION_COUNT: {\r\n        const {teamId, amount, amountRoot} = action.data;\r\n        const member = state[teamId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual team member\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...member,\r\n                mention_count: member.mention_count + amount,\r\n                mention_count_root: member.mention_count_root + amountRoot,\r\n            },\r\n        };\r\n    }\r\n    case ChannelTypes.DECREMENT_UNREAD_MENTION_COUNT: {\r\n        const {teamId, amount, amountRoot} = action.data;\r\n        const member = state[teamId];\r\n\r\n        if (!member) {\r\n            // Don't keep track of unread posts until we've loaded the actual team member\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...member,\r\n                mention_count: Math.max(member.mention_count - amount, 0),\r\n                mention_count_root: Math.max(member.mention_count_root - amountRoot, 0),\r\n            },\r\n        };\r\n    }\r\n\r\n    case TeamTypes.LEAVE_TEAM:\r\n    case TeamTypes.RECEIVED_TEAM_DELETED: {\r\n        const nextState = {...state};\r\n        const data = action.data;\r\n        Reflect.deleteProperty(nextState, data.id);\r\n        return nextState;\r\n    }\r\n    case TeamTypes.UPDATED_TEAM_MEMBER_SCHEME_ROLES: {\r\n        return updateMyTeamMemberSchemeRoles(state, action);\r\n    }\r\n\r\n    case ChannelTypes.POST_UNREAD_SUCCESS: {\r\n        const {teamId, deltaMsgs, mentionCount, msgCount} = action.data;\r\n\r\n        const teamState = state[teamId];\r\n        if (!teamState) {\r\n            return state;\r\n        }\r\n\r\n        const newTeamState = {\r\n            ...teamState,\r\n            msg_count: (typeof teamState.msg_count === 'undefined' ? msgCount : teamState.msg_count - deltaMsgs),\r\n            mention_count: (typeof teamState.mention_count === 'undefined' ? mentionCount : teamState.mention_count + mentionCount),\r\n        };\r\n\r\n        return {...state, [teamId]: newTeamState};\r\n    }\r\n\r\n    case UserTypes.LOGIN: {// Used by the mobile app\r\n        const {teamMembers, teamUnreads} = action.data;\r\n        const nextState = {...state};\r\n\r\n        for (const m of teamMembers) {\r\n            if (m.delete_at == null || m.delete_at === 0) {\r\n                const unread = teamUnreads.find((u: TeamUnread) => u.team_id === m.team_id);\r\n                if (unread) {\r\n                    m.mention_count = unread.mention_count;\r\n                    m.msg_count = unread.msg_count;\r\n                    m.mention_count_root = unread.mention_count_root;\r\n                    m.msg_count_root = unread.msg_count_root;\r\n                }\r\n                nextState[m.team_id] = m;\r\n            }\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction membersInTeam(state: RelationOneToOne<Team, RelationOneToOne<UserProfile, TeamMembership>> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_MEMBER_IN_TEAM: {\r\n        const data = action.data;\r\n        const members = {...(state[data.team_id] || {})};\r\n        members[data.user_id] = data;\r\n        return {\r\n            ...state,\r\n            [data.team_id]: members,\r\n        };\r\n    }\r\n    case TeamTypes.RECEIVED_TEAM_MEMBERS: {\r\n        const data = action.data;\r\n        if (data && data.length) {\r\n            const nextState = {...state};\r\n            for (const member of data) {\r\n                if (nextState[member.team_id]) {\r\n                    nextState[member.team_id] = {...nextState[member.team_id]};\r\n                } else {\r\n                    nextState[member.team_id] = {};\r\n                }\r\n                nextState[member.team_id][member.user_id] = member;\r\n            }\r\n\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case TeamTypes.RECEIVED_MEMBERS_IN_TEAM: {\r\n        const data = action.data;\r\n        if (data && data.length) {\r\n            const teamId = data[0].team_id;\r\n            const members = {...(state[teamId] || {})};\r\n            for (const member of data) {\r\n                members[member.user_id] = member;\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                [teamId]: members,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case TeamTypes.REMOVE_MEMBER_FROM_TEAM: {\r\n        const data = action.data;\r\n        const members = state[data.team_id];\r\n        if (members) {\r\n            const nextState = {...members};\r\n            Reflect.deleteProperty(nextState, data.user_id);\r\n            return {\r\n                ...state,\r\n                [data.team_id]: nextState,\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case TeamTypes.RECEIVED_TEAM_DELETED: {\r\n        const nextState = {...state};\r\n        const teamId = action.data.id;\r\n        if (Object.hasOwn(nextState, teamId)) {\r\n            Reflect.deleteProperty(nextState, teamId);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case TeamTypes.UPDATED_TEAM_MEMBER_SCHEME_ROLES: {\r\n        return updateTeamMemberSchemeRoles(state, action);\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction stats(state: any = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_TEAM_STATS: {\r\n        const stat = action.data;\r\n        return {\r\n            ...state,\r\n            [stat.team_id]: stat,\r\n        };\r\n    }\r\n    case TeamTypes.RECEIVED_TEAM_DELETED: {\r\n        const nextState = {...state};\r\n        const teamId = action.data.id;\r\n        if (Object.hasOwn(nextState, teamId)) {\r\n            Reflect.deleteProperty(nextState, teamId);\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction groupsAssociatedToTeam(state: RelationOneToOne<Team, {ids: string[]; totalCount: number}> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case GroupTypes.RECEIVED_GROUP_ASSOCIATED_TO_TEAM: {\r\n        const {teamID, groups} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set(state[teamID] ? state[teamID].ids : []);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        nextState[teamID] = {ids: Array.from(associatedGroupIDs), totalCount: associatedGroupIDs.size};\r\n\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUPS_ASSOCIATED_TO_TEAM: {\r\n        const {teamID, groups, totalGroupCount} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set(state[teamID] ? state[teamID].ids : []);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        nextState[teamID] = {ids: Array.from(associatedGroupIDs), totalCount: totalGroupCount};\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_ALL_GROUPS_ASSOCIATED_TO_TEAM: {\r\n        const {teamID, groups} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set<string>([]);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.add(group.id);\r\n        }\r\n        const ids = Array.from(associatedGroupIDs);\r\n        nextState[teamID] = {ids, totalCount: ids.length};\r\n        return nextState;\r\n    }\r\n    case GroupTypes.RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM:\r\n    case GroupTypes.RECEIVED_GROUPS_NOT_ASSOCIATED_TO_TEAM: {\r\n        const {teamID, groups} = action.data;\r\n        const nextState = {...state};\r\n        const associatedGroupIDs = new Set(state[teamID] ? state[teamID].ids : []);\r\n        for (const group of groups) {\r\n            associatedGroupIDs.delete(group.id);\r\n        }\r\n        nextState[teamID] = {ids: Array.from(associatedGroupIDs), totalCount: associatedGroupIDs.size};\r\n        return nextState;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction updateTeamMemberSchemeRoles(state: RelationOneToOne<Team, RelationOneToOne<UserProfile, TeamMembership>>, action: AnyAction) {\r\n    const {teamId, userId, isSchemeUser, isSchemeAdmin} = action.data;\r\n    const team = state[teamId];\r\n    if (team) {\r\n        const member = team[userId];\r\n        if (member) {\r\n            return {\r\n                ...state,\r\n                [teamId]: {\r\n                    ...state[teamId],\r\n                    [userId]: {\r\n                        ...state[teamId][userId],\r\n                        scheme_user: isSchemeUser,\r\n                        scheme_admin: isSchemeAdmin,\r\n                    },\r\n                },\r\n            };\r\n        }\r\n    }\r\n    return state;\r\n}\r\n\r\nfunction updateMyTeamMemberSchemeRoles(state: RelationOneToOne<Team, TeamMembership>, action: AnyAction) {\r\n    const {teamId, isSchemeUser, isSchemeAdmin} = action.data;\r\n    const member = state[teamId];\r\n    if (member) {\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...state[teamId],\r\n                scheme_user: isSchemeUser,\r\n                scheme_admin: isSchemeAdmin,\r\n            },\r\n        };\r\n    }\r\n    return state;\r\n}\r\n\r\nfunction totalCount(state = 0, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_TOTAL_TEAM_COUNT: {\r\n        return action.data;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction contentFlaggingStatus(state = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case TeamTypes.RECEIVED_CONTENT_FLAGGING_STATUS: {\r\n        return {\r\n            ...state,\r\n            [action.data.teamId]: action.data.status,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // the current selected team\r\n    currentTeamId,\r\n\r\n    // object where every key is the team id and has and object with the team detail\r\n    teams,\r\n\r\n    // object where every key is the team id and has and object with the team members detail\r\n    myMembers,\r\n\r\n    // object where every key is the team id and has an object of members in the team where the key is user id\r\n    membersInTeam,\r\n\r\n    // object where every key is the team id and has an object with the team stats\r\n    stats,\r\n\r\n    groupsAssociatedToTeam,\r\n\r\n    totalCount,\r\n\r\n    contentFlaggingStatus,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {Team, TeamUnread} from '@mattermost/types/teams';\r\nimport type {ThreadsState, UserThread} from '@mattermost/types/threads';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelTypes, TeamTypes, ThreadTypes, UserTypes} from 'mattermost-redux/action_types';\r\nimport {General} from 'mattermost-redux/constants';\r\n\r\nimport type {ExtraData} from './types';\r\n\r\nfunction isDmGmChannel(channelType: Channel['type']) {\r\n    return channelType === General.DM_CHANNEL || channelType === General.GM_CHANNEL;\r\n}\r\n\r\nfunction handleAllTeamThreadsRead(state: ThreadsState['counts'], action: AnyAction): ThreadsState['counts'] {\r\n    const counts = state[action.data.team_id] ?? {};\r\n    return {\r\n        ...state,\r\n        [action.data.team_id]: {\r\n            ...counts,\r\n            total_unread_mentions: 0,\r\n            total_unread_threads: 0,\r\n            total_unread_urgent_mentions: 0,\r\n        },\r\n    };\r\n}\r\n\r\nfunction isEqual(state: ThreadsState['counts'], action: AnyAction, unreads: boolean) {\r\n    const counts = state[action.data.team_id] ?? {};\r\n\r\n    const {\r\n        total,\r\n        total_unread_threads: totalUnreadThreads,\r\n        total_unread_mentions: totalUnreadMentions,\r\n        total_unread_urgent_mentions: totalUnreadUrgentMentions,\r\n    } = action.data;\r\n\r\n    if (\r\n        totalUnreadMentions !== counts.total_unread_mentions ||\r\n        totalUnreadThreads !== counts.total_unread_threads ||\r\n        totalUnreadUrgentMentions !== counts.total_unread_urgent_mentions\r\n    ) {\r\n        return false;\r\n    }\r\n\r\n    // in unread threads we exclude saving the total number,\r\n    // since it doesn't reflect the actual total of threads\r\n    // but only the total of unread threads\r\n    if (!unreads && total !== counts.total) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction handleReadChangedThread(state: ThreadsState['counts'], action: AnyAction, teamId: string, isUrgent: boolean): ThreadsState['counts'] {\r\n    const {\r\n        prevUnreadMentions = 0,\r\n        newUnreadMentions = 0,\r\n        prevUnreadReplies = 0,\r\n        newUnreadReplies = 0,\r\n    } = action.data;\r\n    const counts = state[teamId] ? {\r\n        ...state[teamId],\r\n    } : {\r\n        total_unread_threads: prevUnreadReplies,\r\n        total: 0,\r\n        total_unread_mentions: prevUnreadMentions,\r\n        total_unread_urgent_mentions: isUrgent ? prevUnreadMentions : 0,\r\n    };\r\n\r\n    const unreadMentionDiff = newUnreadMentions - prevUnreadMentions;\r\n\r\n    counts.total_unread_mentions = Math.max(counts.total_unread_mentions + unreadMentionDiff, 0);\r\n    if (isUrgent) {\r\n        counts.total_unread_urgent_mentions = Math.max(counts.total_unread_urgent_mentions + unreadMentionDiff, 0);\r\n    }\r\n\r\n    if (newUnreadReplies > 0 && prevUnreadReplies === 0) {\r\n        counts.total_unread_threads += 1;\r\n    } else if (prevUnreadReplies > 0 && newUnreadReplies === 0) {\r\n        counts.total_unread_threads = Math.max(counts.total_unread_threads - 1, 0);\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [teamId]: counts,\r\n    };\r\n}\r\n\r\nfunction handleLeaveTeam(state: ThreadsState['counts'], action: AnyAction): ThreadsState['counts'] {\r\n    const team: Team = action.data;\r\n\r\n    if (!state[team.id]) {\r\n        return state;\r\n    }\r\n\r\n    const nextState = {...state};\r\n    Reflect.deleteProperty(nextState, team.id);\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction handleLeaveChannel(state: ThreadsState['counts'] = {}, action: AnyAction, extra: ExtraData) {\r\n    if (!extra.threadsToDelete || extra.threadsToDelete.length === 0) {\r\n        return state;\r\n    }\r\n\r\n    const teamId = action.data.team_id;\r\n\r\n    if (!teamId || !state[teamId]) {\r\n        return state;\r\n    }\r\n\r\n    const {unreadMentions, unreadThreads, unreadUrgentMentions} = extra.threadsToDelete.reduce((curr, item: UserThread) => {\r\n        curr.unreadMentions += item.unread_mentions;\r\n        curr.unreadThreads = item.unread_replies > 0 ? curr.unreadThreads + 1 : curr.unreadThreads;\r\n        curr.unreadUrgentMentions = item.is_urgent ? curr.unreadUrgentMentions + item.unread_mentions : curr.unreadUrgentMentions;\r\n        return curr;\r\n    }, {unreadMentions: 0, unreadThreads: 0, unreadUrgentMentions: 0});\r\n\r\n    const {total, total_unread_mentions: totalUnreadMentions, total_unread_threads: totalUnreadThreads, total_unread_urgent_mentions: totalUnreadUrgentMentions} = state[teamId];\r\n\r\n    return {\r\n        ...state,\r\n        [teamId]: {\r\n            total: Math.max(total - extra.threadsToDelete.length, 0),\r\n            total_unread_mentions: Math.max(totalUnreadMentions - unreadMentions, 0),\r\n            total_unread_threads: Math.max(totalUnreadThreads - unreadThreads, 0),\r\n            total_unread_urgent_mentions: Math.max((totalUnreadUrgentMentions || 0) - unreadUrgentMentions, 0),\r\n        },\r\n    };\r\n}\r\n\r\nfunction handleDecrementThreadCounts(state: ThreadsState['counts'], action: AnyAction) {\r\n    const {teamId, replies, mentions} = action;\r\n    const counts = state[teamId];\r\n    if (!counts) {\r\n        return state;\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [teamId]: {\r\n            total: Math.max(counts.total - 1, 0),\r\n            total_unread_mentions: Math.max(counts.total_unread_mentions - mentions, 0),\r\n            total_unread_threads: Math.max(counts.total_unread_threads - replies, 0),\r\n        },\r\n    };\r\n}\r\n\r\nexport function countsIncludingDirectReducer(state: ThreadsState['counts'] = {}, action: MMReduxAction, extra: ExtraData) {\r\n    switch (action.type) {\r\n    case ThreadTypes.ALL_TEAM_THREADS_READ:\r\n        return handleAllTeamThreadsRead(state, action);\r\n    case ThreadTypes.READ_CHANGED_THREAD: {\r\n        const {teamId, channelType, isUrgent} = action.data;\r\n        if (isDmGmChannel(channelType)) {\r\n            const teamIds = new Set(Object.keys(state));\r\n\r\n            // if the case of dm/gm make sure we add counts for all teams\r\n            if (teamId !== '') {\r\n                teamIds.add(teamId);\r\n            }\r\n\r\n            let newState = {...state};\r\n            teamIds.forEach((id) => {\r\n                newState = handleReadChangedThread(newState, action, id, isUrgent);\r\n            });\r\n\r\n            return newState;\r\n        }\r\n\r\n        return handleReadChangedThread(state, action, teamId, isUrgent);\r\n    }\r\n    case ThreadTypes.FOLLOW_CHANGED_THREAD: {\r\n        const {team_id: teamId, following} = action.data;\r\n        const counts = state[teamId];\r\n\r\n        if (counts?.total == null) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: {\r\n                ...counts,\r\n                total: following ? counts.total + 1 : counts.total - 1,\r\n            },\r\n        };\r\n    }\r\n    case TeamTypes.LEAVE_TEAM:\r\n        return handleLeaveTeam(state, action);\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED:\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n        return handleLeaveChannel(state, action, extra);\r\n    case ThreadTypes.RECEIVED_THREAD_COUNTS:\r\n        if (isEqual(state, action, false)) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.data.team_id]: {\r\n                total: action.data.total,\r\n                total_unread_threads: action.data.total_unread_threads,\r\n                total_unread_mentions: action.data.total_unread_mentions,\r\n                total_unread_urgent_mentions: action.data.total_unread_urgent_mentions,\r\n            },\r\n        };\r\n    case ThreadTypes.DECREMENT_THREAD_COUNTS:\r\n        return handleDecrementThreadCounts(state, action);\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    }\r\n    return state;\r\n}\r\n\r\nexport function countsReducer(state: ThreadsState['counts'] = {}, action: MMReduxAction, extra: ExtraData) {\r\n    switch (action.type) {\r\n    case ThreadTypes.ALL_TEAM_THREADS_READ:\r\n        return handleAllTeamThreadsRead(state, action);\r\n    case ThreadTypes.READ_CHANGED_THREAD:\r\n        if (isDmGmChannel(action.data.channelType)) {\r\n            return state;\r\n        }\r\n        return handleReadChangedThread(state, action, action.data.teamId, action.data.isUrgent);\r\n    case TeamTypes.LEAVE_TEAM:\r\n        return handleLeaveTeam(state, action);\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED:\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n        return handleLeaveChannel(state, action, extra);\r\n    case TeamTypes.RECEIVED_MY_TEAM_UNREADS: {\r\n        const members = action.data;\r\n        return {\r\n            ...state,\r\n            ...members.reduce((result: ThreadsState['counts'], member: TeamUnread) => {\r\n                result[member.team_id] = {\r\n                    ...state[member.team_id],\r\n                    total_unread_threads: member.thread_count || 0,\r\n                    total_unread_mentions: member.thread_mention_count || 0,\r\n                    total_unread_urgent_mentions: member.thread_urgent_mention_count || 0,\r\n                };\r\n\r\n                return result;\r\n            }, {}),\r\n        };\r\n    }\r\n    case ThreadTypes.DECREMENT_THREAD_COUNTS: {\r\n        if (isDmGmChannel(action.channelType)) {\r\n            return state;\r\n        }\r\n        return handleDecrementThreadCounts(state, action);\r\n    }\r\n    }\r\n    return state;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\n\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {ThreadsState, UserThread, UserThreadWithPost} from '@mattermost/types/threads';\r\nimport type {IDMappedObjects, RelationOneToMany} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelTypes, PostTypes, TeamTypes, ThreadTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport type {ExtraData} from './types';\r\n\r\ntype State = ThreadsState['threadsInTeam'] | ThreadsState['unreadThreadsInTeam'];\r\n\r\n// return true only if it's 'newer' than other threads\r\n// older threads will be added by scrolling so no need to manually add.\r\n// furthermore manually adding older thread will BREAK pagination\r\nfunction shouldAddThreadId(ids: Array<UserThread['id']>, thread: UserThread, threads: IDMappedObjects<UserThread>) {\r\n    return ids.some((id) => {\r\n        const t = threads![id];\r\n        return thread.last_reply_at > t.last_reply_at;\r\n    });\r\n}\r\n\r\nfunction handlePostRemoved(state: State, action: AnyAction): State {\r\n    const post = action.data;\r\n    if (post.root_id) {\r\n        return state;\r\n    }\r\n\r\n    const teams = Object.keys(state).\r\n        filter((id) => state[id].indexOf(post.id) !== -1);\r\n\r\n    if (!teams?.length) {\r\n        return state;\r\n    }\r\n\r\n    const teamState: RelationOneToMany<Team, UserThread> = {};\r\n\r\n    for (let i = 0; i < teams.length; i++) {\r\n        const teamId = teams[i];\r\n        const index = state[teamId].indexOf(post.id);\r\n\r\n        teamState[teamId] = [\r\n            ...state[teamId].slice(0, index),\r\n            ...state[teamId].slice(index + 1),\r\n        ];\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        ...teamState,\r\n    };\r\n}\r\n\r\n// adds thread to all teams in state\r\nfunction handleAllTeamsReceivedThread(state: State, thread: UserThread, teamId: Team['id'], extra: ExtraData) {\r\n    const teamIds = Object.keys(state);\r\n\r\n    let newState = {...state};\r\n    for (const teamId of teamIds) {\r\n        newState = handleSingleTeamReceivedThread(newState, thread, teamId, extra);\r\n    }\r\n\r\n    return newState;\r\n}\r\n\r\n// adds thread to single team\r\nfunction handleSingleTeamReceivedThread(state: State, thread: UserThread, teamId: Team['id'], extra: ExtraData) {\r\n    const nextSet = new Set(state[teamId] || []);\r\n\r\n    // thread exists in state\r\n    if (nextSet.has(thread.id)) {\r\n        return state;\r\n    }\r\n\r\n    // check if thread is newer than any of the existing threads\r\n    const shouldAdd = shouldAddThreadId([...nextSet], thread, extra.threads);\r\n\r\n    if (shouldAdd) {\r\n        nextSet.add(thread.id);\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: [...nextSet],\r\n        };\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nexport function handleReceivedThread(state: State, action: AnyAction, extra: ExtraData) {\r\n    const {thread, team_id: teamId} = action.data;\r\n\r\n    if (!teamId) {\r\n        return handleAllTeamsReceivedThread(state, thread, teamId, extra);\r\n    }\r\n\r\n    return handleSingleTeamReceivedThread(state, thread, teamId, extra);\r\n}\r\n\r\n// add the thread only if it's 'newer' than other threads\r\n// older threads will be added by scrolling so no need to manually add.\r\n// furthermore manually adding older thread will BREAK pagination\r\nexport function handleFollowChanged(state: State, action: AnyAction, extra: ExtraData) {\r\n    const {id, team_id: teamId, following} = action.data;\r\n    const nextSet = new Set(state[teamId] || []);\r\n\r\n    const thread = extra.threads[id];\r\n\r\n    if (!thread) {\r\n        return state;\r\n    }\r\n\r\n    // thread exists in state\r\n    if (nextSet.has(id)) {\r\n        // remove it if we unfollowed\r\n        if (!following) {\r\n            nextSet.delete(id);\r\n            return {\r\n                ...state,\r\n                [teamId]: [...nextSet],\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n\r\n    // check if thread is newer than any of the existing threads\r\n    const shouldAdd = shouldAddThreadId([...nextSet], thread, extra.threads);\r\n\r\n    if (shouldAdd && following) {\r\n        nextSet.add(thread.id);\r\n\r\n        return {\r\n            ...state,\r\n            [teamId]: [...nextSet],\r\n        };\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction handleReceiveThreads(state: State, action: AnyAction) {\r\n    const nextSet = new Set(state[action.data.team_id] || []);\r\n\r\n    action.data.threads.forEach((thread: UserThread) => {\r\n        nextSet.add(thread.id);\r\n    });\r\n\r\n    return {\r\n        ...state,\r\n        [action.data.team_id]: [...nextSet],\r\n    };\r\n}\r\n\r\nfunction handleLeaveChannel(state: State, action: AnyAction, extra: ExtraData) {\r\n    if (!extra.threadsToDelete || extra.threadsToDelete.length === 0) {\r\n        return state;\r\n    }\r\n\r\n    const teamId = action.data.team_id;\r\n\r\n    let threadDeleted = false;\r\n\r\n    // Remove entries for any thread in the channel\r\n    const nextState = {...state};\r\n    for (const thread of extra.threadsToDelete) {\r\n        if (nextState[teamId]) {\r\n            const index = nextState[teamId].indexOf(thread.id);\r\n            if (index !== -1) {\r\n                nextState[teamId] = [...nextState[teamId].slice(0, index), ...nextState[teamId].slice(index + 1)];\r\n                threadDeleted = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!threadDeleted) {\r\n        // Nothing was actually removed\r\n        return state;\r\n    }\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction handleLeaveTeam(state: State, action: AnyAction) {\r\n    const team: Team = action.data;\r\n\r\n    if (!state[team.id]) {\r\n        return state;\r\n    }\r\n\r\n    const nextState = {...state};\r\n    Reflect.deleteProperty(nextState, team.id);\r\n\r\n    return nextState;\r\n}\r\n\r\nfunction handleSingleTeamThreadRead(state: ThreadsState['unreadThreadsInTeam'], action: AnyAction, teamId: string, extra: ExtraData) {\r\n    const {\r\n        id,\r\n        newUnreadMentions,\r\n        newUnreadReplies,\r\n    } = action.data;\r\n    const team = state[teamId] || [];\r\n    const index = team.indexOf(id);\r\n\r\n    // the thread is not in the unread list\r\n    if (index === -1) {\r\n        const thread = extra.threads[id];\r\n\r\n        // the thread is unread\r\n        if (thread && (newUnreadReplies > 0 || newUnreadMentions > 0)) {\r\n            // if it's newer add it, we don't care about ordering here since we order on the selector\r\n            if (shouldAddThreadId(team, thread, extra.threads)) {\r\n                return {\r\n                    ...state,\r\n                    [teamId]: [\r\n                        ...team,\r\n                        id,\r\n                    ],\r\n                };\r\n            }\r\n        }\r\n\r\n        // do nothing when the thread is read\r\n        return state;\r\n    }\r\n\r\n    // do nothing when the thread exists and it's unread\r\n    if (newUnreadReplies > 0 || newUnreadMentions > 0) {\r\n        return state;\r\n    }\r\n\r\n    // if the thread is read remove it\r\n    return {\r\n        ...state,\r\n        [teamId]: [\r\n            ...team.slice(0, index),\r\n            ...team.slice(index + 1),\r\n        ],\r\n    };\r\n}\r\n\r\nexport const threadsInTeamReducer = (state: ThreadsState['threadsInTeam'] = {}, action: MMReduxAction, extra: ExtraData) => {\r\n    switch (action.type) {\r\n    case ThreadTypes.RECEIVED_THREAD:\r\n        return handleReceivedThread(state, action, extra);\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED:\r\n        return handlePostRemoved(state, action);\r\n    case ThreadTypes.RECEIVED_THREADS:\r\n        return handleReceiveThreads(state, action);\r\n    case TeamTypes.LEAVE_TEAM:\r\n        return handleLeaveTeam(state, action);\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED:\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n        return handleLeaveChannel(state, action, extra);\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nexport const unreadThreadsInTeamReducer = (state: ThreadsState['unreadThreadsInTeam'] = {}, action: MMReduxAction, extra: ExtraData) => {\r\n    switch (action.type) {\r\n    case ThreadTypes.READ_CHANGED_THREAD: {\r\n        const {teamId} = action.data;\r\n        if (teamId === '') {\r\n            const teamIds = Object.keys(state);\r\n\r\n            let newState = {...state};\r\n            for (const teamId of teamIds) {\r\n                newState = handleSingleTeamThreadRead(newState, action, teamId, extra);\r\n            }\r\n            return newState;\r\n        }\r\n\r\n        return handleSingleTeamThreadRead(state, action, teamId, extra);\r\n    }\r\n    case ThreadTypes.RECEIVED_THREAD:\r\n        if (action.data.thread.unread_replies > 0 || action.data.thread.unread_mentions > 0) {\r\n            return handleReceivedThread(state, action, extra);\r\n        }\r\n        return state;\r\n    case ThreadTypes.RECEIVED_THREADS:\r\n        return handleReceiveThreads(state, {\r\n            ...action,\r\n            data: {\r\n                ...action.data,\r\n                threads: action.data.threads.filter((thread: UserThreadWithPost) => thread.unread_replies > 0 || thread.unread_mentions > 0),\r\n            },\r\n        });\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED:\r\n        return handlePostRemoved(state, action);\r\n    case ThreadTypes.RECEIVED_UNREAD_THREADS:\r\n        return handleReceiveThreads(state, action);\r\n    case TeamTypes.LEAVE_TEAM:\r\n        return handleLeaveTeam(state, action);\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED:\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n        return handleLeaveChannel(state, action, extra);\r\n    case ThreadTypes.FOLLOW_CHANGED_THREAD:\r\n        return handleFollowChanged(state, action, extra);\r\n    }\r\n    return state;\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {ThreadsState, UserThread} from '@mattermost/types/threads';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ChannelTypes, PostTypes, ThreadTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {countsReducer, countsIncludingDirectReducer} from './counts';\r\nimport {threadsInTeamReducer, unreadThreadsInTeamReducer} from './threadsInTeam';\r\nimport type {ExtraData} from './types';\r\n\r\nexport const threadsReducer = (state: ThreadsState['threads'] = {}, action: MMReduxAction, extra: ExtraData) => {\r\n    switch (action.type) {\r\n    case ThreadTypes.RECEIVED_UNREAD_THREADS:\r\n    case ThreadTypes.RECEIVED_THREADS: {\r\n        const {threads} = action.data;\r\n        return {\r\n            ...state,\r\n            ...threads.reduce((results: IDMappedObjects<UserThread>, thread: UserThread) => {\r\n                results[thread.id] = thread;\r\n                return results;\r\n            }, {}),\r\n        };\r\n    }\r\n    case PostTypes.POST_DELETED:\r\n    case PostTypes.POST_REMOVED: {\r\n        const post = action.data;\r\n\r\n        if (post.root_id || !state[post.id]) {\r\n            return state;\r\n        }\r\n\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, post.id);\r\n\r\n        return nextState;\r\n    }\r\n    case ThreadTypes.RECEIVED_THREAD: {\r\n        const {thread} = action.data;\r\n        return {\r\n            ...state,\r\n            [thread.id]: thread,\r\n        };\r\n    }\r\n    case ThreadTypes.READ_CHANGED_THREAD: {\r\n        const {\r\n            id,\r\n            newUnreadMentions,\r\n            newUnreadReplies,\r\n            lastViewedAt,\r\n        } = action.data;\r\n\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...(state[id] || {}),\r\n                last_viewed_at: lastViewedAt,\r\n                unread_mentions: newUnreadMentions,\r\n                unread_replies: newUnreadReplies,\r\n                is_following: true,\r\n            },\r\n        };\r\n    }\r\n    case ThreadTypes.FOLLOW_CHANGED_THREAD: {\r\n        const {id, following} = action.data;\r\n\r\n        if (!state[id]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [id]: {\r\n                ...state[id],\r\n                is_following: following,\r\n            },\r\n        };\r\n    }\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        const post: Post = action.data;\r\n        const thread: UserThread | undefined = state[post.root_id];\r\n        if (post.root_id && thread) {\r\n            const participants = thread.participants || [];\r\n            const nextThread = {...thread};\r\n            if (!participants.find((user: UserProfile | {id: string}) => user.id === post.user_id)) {\r\n                nextThread.participants = [...participants, {id: post.user_id}];\r\n            }\r\n\r\n            if (post.reply_count) {\r\n                nextThread.reply_count = post.reply_count;\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                [post.root_id]: nextThread,\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case ThreadTypes.ALL_TEAM_THREADS_READ: {\r\n        return Object.entries(state).reduce<ThreadsState['threads']>((newState, [id, thread]) => {\r\n            newState[id] = {\r\n                ...thread,\r\n                unread_mentions: 0,\r\n                unread_replies: 0,\r\n            };\r\n            return newState;\r\n        }, {});\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    case ChannelTypes.RECEIVED_CHANNEL_DELETED:\r\n    case ChannelTypes.LEAVE_CHANNEL: {\r\n        if (!extra.threadsToDelete || extra.threadsToDelete.length === 0) {\r\n            return state;\r\n        }\r\n\r\n        let threadDeleted = false;\r\n\r\n        // Remove entries for any thread in the channel\r\n        const nextState = {...state};\r\n        for (const thread of extra.threadsToDelete) {\r\n            Reflect.deleteProperty(nextState, thread.id);\r\n            threadDeleted = true;\r\n        }\r\n\r\n        if (!threadDeleted) {\r\n            // Nothing was actually removed\r\n            return state;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    }\r\n\r\n    return state;\r\n};\r\n\r\nfunction getThreadsOfChannel(threads: ThreadsState['threads'], channelId: string) {\r\n    const channelThreads: UserThread[] = [];\r\n    for (const rootId of Object.keys(threads)) {\r\n        if (\r\n            threads[rootId] &&\r\n            threads[rootId].post &&\r\n            threads[rootId].post.channel_id === channelId\r\n        ) {\r\n            channelThreads.push(threads[rootId]);\r\n        }\r\n    }\r\n\r\n    return channelThreads;\r\n}\r\n\r\nconst initialState = {\r\n    threads: {},\r\n    threadsInTeam: {},\r\n    unreadThreadsInTeam: {},\r\n    counts: {},\r\n    countsIncludingDirect: {},\r\n};\r\n\r\n// custom combineReducers function\r\n// enables passing data between reducers\r\nfunction reducer(state: ThreadsState = initialState, action: MMReduxAction): ThreadsState {\r\n    const extra: ExtraData = {\r\n        threads: state.threads,\r\n    };\r\n\r\n    // acting as a 'middleware'\r\n    if (action.type === ChannelTypes.LEAVE_CHANNEL) {\r\n        extra.threadsToDelete = getThreadsOfChannel(state.threads, action.data.id);\r\n    }\r\n\r\n    const nextState = {\r\n\r\n        // Object mapping thread ids to thread objects\r\n        threads: threadsReducer(state.threads, action, extra),\r\n\r\n        // Object mapping teams ids to thread ids\r\n        threadsInTeam: threadsInTeamReducer(state.threadsInTeam, action, extra),\r\n\r\n        // Object mapping teams ids to unread thread ids\r\n        unreadThreadsInTeam: unreadThreadsInTeamReducer(state.unreadThreadsInTeam, action, extra),\r\n\r\n        // Object mapping teams ids to unread counts without DM/GM\r\n        counts: countsReducer(state.counts, action, extra),\r\n\r\n        // Object mapping teams ids to unread counts including direct channels\r\n        countsIncludingDirect: countsIncludingDirectReducer(state.countsIncludingDirect, action, extra),\r\n    };\r\n\r\n    if (\r\n        state.threads === nextState.threads &&\r\n        state.threadsInTeam === nextState.threadsInTeam &&\r\n        state.unreadThreadsInTeam === nextState.unreadThreadsInTeam &&\r\n        state.counts === nextState.counts &&\r\n        state.countsIncludingDirect === nextState.countsIncludingDirect\r\n    ) {\r\n        // None of the children have changed so don't even let the parent object change\r\n        return state;\r\n    }\r\n\r\n    return nextState;\r\n}\r\n\r\nexport default reducer;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {CloudUsage} from '@mattermost/types/cloud';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {CloudTypes} from 'mattermost-redux/action_types';\r\n\r\nconst emptyUsage = {\r\n    files: {\r\n        totalStorage: 0,\r\n        totalStorageLoaded: false,\r\n    },\r\n    messages: {\r\n        history: 0,\r\n        historyLoaded: false,\r\n    },\r\n    boards: {\r\n        cards: 0,\r\n        cardsLoaded: false,\r\n    },\r\n    teams: {\r\n        active: 0,\r\n        cloudArchived: 0,\r\n        teamsLoaded: false,\r\n    },\r\n};\r\n\r\n// represents the usage associated with this workspace\r\nexport default function usage(state: CloudUsage = emptyUsage, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case CloudTypes.RECEIVED_MESSAGES_USAGE: {\r\n        return {\r\n            ...state,\r\n            messages: {\r\n                history: action.data,\r\n                historyLoaded: true,\r\n            },\r\n        };\r\n    }\r\n    case CloudTypes.RECEIVED_FILES_USAGE: {\r\n        return {\r\n            ...state,\r\n            files: {\r\n                totalStorage: action.data,\r\n                totalStorageLoaded: true,\r\n            },\r\n        };\r\n    }\r\n    case CloudTypes.RECEIVED_BOARDS_USAGE: {\r\n        return {\r\n            ...state,\r\n            boards: {\r\n                cards: action.data,\r\n                cardsLoaded: true,\r\n            },\r\n        };\r\n    }\r\n    case CloudTypes.RECEIVED_TEAMS_USAGE: {\r\n        return {\r\n            ...state,\r\n            teams: {\r\n                ...action.data,\r\n                teamsLoaded: true,\r\n            },\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport isEqual from 'lodash/isEqual';\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {UserProfile, UsersState} from '@mattermost/types/users';\r\nimport type {IDMappedObjects, RelationOneToManyUnique, RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {UserTypes, ChannelTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction profilesToSet(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction) {\r\n    const id = action.id;\r\n    const users: UserProfile[] = Object.values(action.data);\r\n\r\n    return users.reduce((nextState, user) => addProfileToSet(nextState, id, user.id), state);\r\n}\r\n\r\nfunction removeProfilesFromSet(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction) {\r\n    const id = action.id;\r\n    const users: UserProfile[] = Object.values(action.data);\r\n    return users.reduce((nextState, user) => removeProfileFromSet(nextState, {type: '', data: {id, user_id: user.id}}), state);\r\n}\r\n\r\nfunction profileListToSet(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction, replace = false) {\r\n    const id = action.id;\r\n    const users: UserProfile[] = action.data || [];\r\n\r\n    if (replace) {\r\n        return {\r\n            ...state,\r\n            [id]: new Set(users.map((user) => user.id)),\r\n        };\r\n    }\r\n\r\n    return users.reduce((nextState, user) => addProfileToSet(nextState, id, user.id), state);\r\n}\r\n\r\nfunction removeProfileListFromSet(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction) {\r\n    const id = action.id;\r\n    const nextSet = new Set(state[id]);\r\n    if (action.data) {\r\n        action.data.forEach((profile: UserProfile) => {\r\n            nextSet.delete(profile.id);\r\n        });\r\n\r\n        return {\r\n            ...state,\r\n            [id]: nextSet,\r\n        };\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction addProfileToSet(state: RelationOneToManyUnique<Team, UserProfile>, id: string, userId: string) {\r\n    const nextSet = new Set(state[id]);\r\n    nextSet.add(userId);\r\n    return {\r\n        ...state,\r\n        [id]: nextSet,\r\n    };\r\n}\r\n\r\nfunction removeProfileFromSets(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction) {\r\n    const newState = {...state};\r\n    let removed = false;\r\n    Object.keys(state).forEach((key) => {\r\n        if (newState[key].has(action.data.user_id)) {\r\n            newState[key] = new Set(newState[key]);\r\n            newState[key].delete(action.data.user_id);\r\n            removed = true;\r\n        }\r\n    });\r\n    return removed ? newState : state;\r\n}\r\n\r\nfunction removeProfileFromSet(state: RelationOneToManyUnique<Team, UserProfile>, action: AnyAction) {\r\n    const {id, user_id: userId} = action.data;\r\n\r\n    const nextSet = new Set(state[id]);\r\n    nextSet.delete(userId);\r\n    return {\r\n        ...state,\r\n        [id]: nextSet,\r\n    };\r\n}\r\n\r\nfunction currentUserId(state: UsersState['currentUserId'] = '', action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_ME: {\r\n        const data = action.data;\r\n\r\n        return data.id;\r\n    }\r\n\r\n    case UserTypes.LOGIN: { // Used by the mobile app\r\n        const {user} = action.data;\r\n\r\n        return user ? user.id : state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction mySessions(state: UsersState['mySessions'] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_SESSIONS:\r\n        return [...action.data];\r\n\r\n    case UserTypes.RECEIVED_REVOKED_SESSION: {\r\n        let index = -1;\r\n        const length = state.length;\r\n        for (let i = 0; i < length; i++) {\r\n            if (state[i].id === action.sessionId) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        if (index > -1) {\r\n            return state.slice(0, index).concat(state.slice(index + 1));\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.REVOKE_ALL_USER_SESSIONS_SUCCESS:\r\n        if (action.data.isCurrentUser === true) {\r\n            return [];\r\n        }\r\n        return state;\r\n\r\n    case UserTypes.REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS:\r\n        return [];\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction myAudits(state: UsersState['myAudits'] = [], action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_AUDITS:\r\n        return [...action.data];\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction receiveUserProfile(state: IDMappedObjects<UserProfile>, received: UserProfile) {\r\n    const existing = state[received.id];\r\n\r\n    if (!existing) {\r\n        // No existing data to merge with\r\n        return {\r\n            ...state,\r\n            [received.id]: received,\r\n        };\r\n    }\r\n\r\n    const merged = {\r\n        ...existing,\r\n        ...received,\r\n    };\r\n\r\n    // If there was a remote_id but not anymore, remove it\r\n    if (existing.remote_id && !received.remote_id) {\r\n        delete merged.remote_id;\r\n    }\r\n\r\n    // MM-53377:\r\n    // For non-admin users, certain API responses don't return details for the current user that would be sanitized\r\n    // out for others. This currently includes:\r\n    // - email (if PrivacySettings.ShowEmailAddress is false)\r\n    // - first_name/last_name (if PrivacySettings.ShowFullName is false)\r\n    // - last_password_update\r\n    // - auth_service\r\n    // - notify_props\r\n    //\r\n    // Because email, first_name, last_name, and auth_service can all be empty strings regularly, we can't just\r\n    // merge the received user and the existing one together like we normally would. Instead, we can use the\r\n    // existence of existing.notify_props or existing.last_password_update to determine which object has that extra\r\n    // data so that it can take precedence. Those fields are:\r\n    // 1. Never empty or zero by Go standards\r\n    // 2. Only ever sent to the current user, not even to admins, so we know that the object contains privileged data\r\n    //\r\n    // Note that admins may have the email/name/auth_service of other users loaded as well. This does not prevent that\r\n    // data from being replaced when merging sanitized user objects. There doesn't seem to be a way for us to detect\r\n    // whether the object is sanitized for admins.\r\n    if (existing.notify_props && (!received.notify_props || Object.keys(received.notify_props).length === 0)) {\r\n        merged.email = existing.email;\r\n        merged.first_name = existing.first_name;\r\n        merged.last_name = existing.last_name;\r\n        merged.last_password_update = existing.last_password_update;\r\n        merged.auth_service = existing.auth_service;\r\n        merged.notify_props = existing.notify_props;\r\n    }\r\n\r\n    if (isEqual(existing, merged)) {\r\n        return state;\r\n    }\r\n\r\n    return {\r\n        ...state,\r\n        [merged.id]: merged,\r\n    };\r\n}\r\n\r\nfunction profiles(state: UsersState['profiles'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_ME:\r\n    case UserTypes.RECEIVED_PROFILE: {\r\n        const user = action.data;\r\n\r\n        return receiveUserProfile(state, user);\r\n    }\r\n    case UserTypes.RECEIVED_CPA_VALUES: {\r\n        const {userID, customAttributeValues} = action.data;\r\n        const existingProfile = state[userID];\r\n        if (!existingProfile) {\r\n            return state;\r\n        }\r\n        const profileAttributes = {...existingProfile.custom_profile_attributes, ...customAttributeValues};\r\n        return receiveUserProfile(state, {...existingProfile, custom_profile_attributes: profileAttributes});\r\n    }\r\n    case UserTypes.CLEAR_CPA_VALUES: {\r\n        const {fieldId} = action.data;\r\n\r\n        return Object.values(state).reduce<Record<string, UserProfile>>((nextState, profile) => {\r\n            // Only modify profiles that have this field value\r\n            if (profile.custom_profile_attributes && profile.custom_profile_attributes[fieldId] !== undefined) {\r\n                const newAttributes = {...profile.custom_profile_attributes};\r\n                delete newAttributes[fieldId];\r\n\r\n                nextState[profile.id] = {\r\n                    ...profile,\r\n                    custom_profile_attributes: newAttributes,\r\n                };\r\n            } else {\r\n                nextState[profile.id] = profile;\r\n            }\r\n\r\n            return nextState;\r\n        }, {});\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES_LIST: {\r\n        const users: UserProfile[] = action.data;\r\n\r\n        return users.reduce(receiveUserProfile, state);\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES: {\r\n        const users: UserProfile[] = Object.values(action.data);\r\n\r\n        return users.reduce(receiveUserProfile, state);\r\n    }\r\n\r\n    case UserTypes.RECEIVED_TERMS_OF_SERVICE_STATUS: {\r\n        const data = action.data;\r\n        return {\r\n            ...state,\r\n            [data.user_id]: {\r\n                ...state[data.user_id],\r\n                terms_of_service_id: data.terms_of_service_id,\r\n                terms_of_service_create_at: data.terms_of_service_create_at,\r\n            },\r\n        };\r\n    }\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        if (state[action.data.user_id]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.user_id];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesInTeam(state: UsersState['profilesInTeam'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILE_IN_TEAM:\r\n        return addProfileToSet(state, action.data.id, action.data.user_id);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_IN_TEAM:\r\n        return profileListToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_IN_TEAM:\r\n        return profilesToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM:\r\n        return removeProfileFromSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_TEAM:\r\n        return removeProfileListFromSet(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesNotInTeam(state: UsersState['profilesNotInTeam'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM:\r\n        return addProfileToSet(state, action.data.id, action.data.user_id);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_TEAM:\r\n        return profileListToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_TEAM_AND_REPLACE:\r\n        return profileListToSet(state, action, true);\r\n\r\n    case UserTypes.RECEIVED_PROFILE_IN_TEAM:\r\n        return removeProfileFromSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_IN_TEAM:\r\n        return removeProfileListFromSet(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesWithoutTeam(state: UsersState['profilesWithoutTeam'] = new Set<string>(), action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILE_WITHOUT_TEAM: {\r\n        const nextSet = new Set(state);\r\n        Object.values(action.data as string[]).forEach((id: string) => nextSet.add(id));\r\n        return nextSet;\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES_LIST_WITHOUT_TEAM: {\r\n        const nextSet = new Set(state);\r\n        action.data.forEach((user: UserProfile) => nextSet.add(user.id));\r\n        return nextSet;\r\n    }\r\n    case UserTypes.RECEIVED_PROFILE_IN_TEAM: {\r\n        const nextSet = new Set(state);\r\n        nextSet.delete(action.data.id);\r\n        return nextSet;\r\n    }\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        const nextSet = new Set(state);\r\n        nextSet.delete(action.data.user_id);\r\n        return nextSet;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return new Set<string>();\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesInChannel(state: UsersState['profilesInChannel'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILE_IN_CHANNEL:\r\n        return addProfileToSet(state, action.data.id, action.data.user_id);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_IN_CHANNEL:\r\n        return profileListToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_IN_CHANNEL:\r\n        return profilesToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL:\r\n        return removeProfileFromSet(state, action);\r\n\r\n    case ChannelTypes.CHANNEL_MEMBER_REMOVED:\r\n        return removeProfileFromSet(state, {\r\n            type: '',\r\n            data: {\r\n                id: action.data.channel_id,\r\n                user_id: action.data.user_id,\r\n            }});\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesNotInChannel(state: UsersState['profilesNotInChannel'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL:\r\n        return addProfileToSet(state, action.data.id, action.data.user_id);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL:\r\n        return profileListToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL_AND_REPLACE:\r\n        return profileListToSet(state, action, true);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_NOT_IN_CHANNEL:\r\n        return profilesToSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILES_IN_CHANNEL:\r\n        return removeProfilesFromSet(state, action);\r\n\r\n    case UserTypes.RECEIVED_PROFILE_IN_CHANNEL:\r\n        return removeProfileFromSet(state, action);\r\n\r\n    case ChannelTypes.CHANNEL_MEMBER_ADDED:\r\n        return removeProfileFromSet(state, {\r\n            type: '',\r\n            data: {\r\n                id: action.data.channel_id,\r\n                user_id: action.data.user_id,\r\n            }});\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesInGroup(state: UsersState['profilesInGroup'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILES_LIST_IN_GROUP: {\r\n        return profileListToSet(state, action);\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES_FOR_GROUP: {\r\n        const id = action.id;\r\n        const nextSet = new Set(state[id]);\r\n        if (action.data) {\r\n            action.data.forEach((profile: any) => {\r\n                nextSet.add(profile.user_id);\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                [id]: nextSet,\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES_LIST_TO_REMOVE_FROM_GROUP: {\r\n        const id = action.id;\r\n        const nextSet = new Set(state[id]);\r\n        if (action.data) {\r\n            action.data.forEach((profile: any) => {\r\n                nextSet.delete(profile.user_id);\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                [id]: nextSet,\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction profilesNotInGroup(state: UsersState['profilesNotInGroup'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_PROFILES_FOR_GROUP: {\r\n        const id = action.id;\r\n        const nextSet = new Set(state[id]);\r\n        if (action.data) {\r\n            action.data.forEach((profile: any) => {\r\n                nextSet.delete(profile.user_id);\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                [id]: nextSet,\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.RECEIVED_PROFILES_LIST_NOT_IN_GROUP: {\r\n        return profileListToSet(state, action);\r\n    }\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE:\r\n        return removeProfileFromSets(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction dndEndTimes(state: UsersState['dndEndTimes'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_DND_END_TIMES: {\r\n        return {...state, ...action.data};\r\n    }\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        if (state[action.data.user_id]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.user_id];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction statuses(state: RelationOneToOne<UserProfile, string> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_STATUSES: {\r\n        return {...state, ...action.data};\r\n    }\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        if (state[action.data.user_id]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.user_id];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isManualStatus(state: RelationOneToOne<UserProfile, boolean> = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_STATUSES_IS_MANUAL: {\r\n        return {...state, ...action.data};\r\n    }\r\n\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        if (state[action.data.user_id]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.user_id];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction myUserAccessTokens(state: UsersState['myUserAccessTokens'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_MY_USER_ACCESS_TOKEN: {\r\n        const nextState = {...state};\r\n        nextState[action.data.id] = action.data;\r\n\r\n        return nextState;\r\n    }\r\n    case UserTypes.RECEIVED_MY_USER_ACCESS_TOKENS: {\r\n        const nextState = {...state};\r\n\r\n        for (const uat of action.data) {\r\n            nextState[uat.id] = uat;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case UserTypes.REVOKED_USER_ACCESS_TOKEN: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data);\r\n\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.ENABLED_USER_ACCESS_TOKEN: {\r\n        if (state[action.data]) {\r\n            const nextState = {...state};\r\n            nextState[action.data] = {...nextState[action.data], is_active: true};\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.DISABLED_USER_ACCESS_TOKEN: {\r\n        if (state[action.data]) {\r\n            const nextState = {...state};\r\n            nextState[action.data] = {...nextState[action.data], is_active: false};\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.CLEAR_MY_USER_ACCESS_TOKENS:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction stats(state: UsersState['stats'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_USER_STATS: {\r\n        const stat = action.data;\r\n        return {\r\n            ...state,\r\n            ...stat,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction filteredStats(state: UsersState['filteredStats'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_FILTERED_USER_STATS: {\r\n        const stat = action.data;\r\n        return {\r\n            ...state,\r\n            ...stat,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction lastActivity(state: UsersState['lastActivity'] = {}, action: MMReduxAction) {\r\n    switch (action.type) {\r\n    case UserTypes.RECEIVED_LAST_ACTIVITIES: {\r\n        return {...state, ...action.data};\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    case UserTypes.PROFILE_NO_LONGER_VISIBLE: {\r\n        if (state[action.data.user_id]) {\r\n            const newState = {...state};\r\n            delete newState[action.data.user_id];\r\n            return newState;\r\n        }\r\n        return state;\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // the current selected user\r\n    currentUserId,\r\n\r\n    // array with the user's sessions\r\n    mySessions,\r\n\r\n    // array with the user's audits\r\n    myAudits,\r\n\r\n    // object where every key is the token id and has a user access token as a value\r\n    myUserAccessTokens,\r\n\r\n    // object where every key is a user id and has an object with the users details\r\n    profiles,\r\n\r\n    // object where every key is a team id and has a Set with the users id that are members of the team\r\n    profilesInTeam,\r\n\r\n    // object where every key is a team id and has a Set with the users id that are not members of the team\r\n    profilesNotInTeam,\r\n\r\n    // set with user ids for users that are not on any team\r\n    profilesWithoutTeam,\r\n\r\n    // object where every key is a channel id and has a Set with the users id that are members of the channel\r\n    profilesInChannel,\r\n\r\n    // object where every key is a channel id and has a Set with the users id that are not members of the channel\r\n    profilesNotInChannel,\r\n\r\n    // object where every key is a group id and has a Set with the users id that are members of the group\r\n    profilesInGroup,\r\n\r\n    // object where every key is a group id and has a Set with the users id that are members of the group\r\n    profilesNotInGroup,\r\n\r\n    // object where every key is the user id and has a value with the dnd end time of each user\r\n    dndEndTimes,\r\n\r\n    // object where every key is the user id and has a value with the current status of each user\r\n    statuses,\r\n\r\n    // object where every key is the user id and has a value with a flag determining if their status was set manually\r\n    isManualStatus,\r\n\r\n    // Total user stats\r\n    stats,\r\n\r\n    // Total user stats after filters have been applied\r\n    filteredStats,\r\n\r\n    // object where every key is the user id and has a value with the last activity timestamp\r\n    lastActivity,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport admin from './admin';\r\nimport apps from './apps';\r\nimport bots from './bots';\r\nimport channelBookmarks from './channel_bookmarks';\r\nimport channelCategories from './channel_categories';\r\nimport channels from './channels';\r\nimport cloud from './cloud';\r\nimport contentFlagging from './content_flagging';\r\nimport emojis from './emojis';\r\nimport files from './files';\r\nimport general from './general';\r\nimport groups from './groups';\r\nimport hostedCustomer from './hosted_customer';\r\nimport integrations from './integrations';\r\nimport jobs from './jobs';\r\nimport limits from './limits';\r\nimport posts from './posts';\r\nimport preferences from './preferences';\r\nimport roles from './roles';\r\nimport scheduledPosts from './scheduled_posts';\r\nimport schemes from './schemes';\r\nimport search from './search';\r\nimport sharedChannels from './shared_channels';\r\nimport teams from './teams';\r\nimport threads from './threads';\r\nimport typing from './typing';\r\nimport usage from './usage';\r\nimport users from './users';\r\n\r\nexport default combineReducers({\r\n    general,\r\n    users,\r\n    limits,\r\n    teams,\r\n    channels,\r\n    posts,\r\n    files,\r\n    preferences,\r\n    typing,\r\n    integrations,\r\n    emojis,\r\n    admin,\r\n    jobs,\r\n    search,\r\n    roles,\r\n    schemes,\r\n    groups,\r\n    bots,\r\n    threads,\r\n    channelCategories,\r\n    apps,\r\n    cloud,\r\n    usage,\r\n    hostedCustomer,\r\n    channelBookmarks,\r\n    scheduledPosts,\r\n    sharedChannels,\r\n    contentFlagging,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\n\r\nimport type {Typing} from '@mattermost/types/typing';\r\n\r\nimport {WebsocketEvents} from 'mattermost-redux/constants';\r\n\r\nexport default function typing(state: Typing = {}, action: AnyAction): Typing {\r\n    const {\r\n        data,\r\n        type,\r\n    } = action;\r\n\r\n    switch (type) {\r\n    case WebsocketEvents.TYPING: {\r\n        const {\r\n            id,\r\n            userId,\r\n            now,\r\n        } = data;\r\n\r\n        if (id && userId) {\r\n            return {\r\n                ...state,\r\n                [id]: {\r\n                    ...(state[id] || {}),\r\n                    [userId]: now,\r\n                },\r\n            };\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case WebsocketEvents.STOP_TYPING: {\r\n        const {\r\n            id,\r\n            userId,\r\n            now,\r\n        } = data;\r\n\r\n        if (state[id] && state[id][userId] <= now) {\r\n            const nextState: Typing = {\r\n                ...state,\r\n                [id]: {...state[id]},\r\n            };\r\n\r\n            Reflect.deleteProperty(nextState[id], userId);\r\n\r\n            if (Object.keys(nextState[id]).length === 0) {\r\n                Reflect.deleteProperty(nextState, id);\r\n            }\r\n\r\n            return nextState;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {RequestStatus} from 'mattermost-redux/constants';\r\n\r\nexport function initialRequestState(): RequestStatusType {\r\n    return {\r\n        status: RequestStatus.NOT_STARTED,\r\n        error: null,\r\n    };\r\n}\r\n\r\nexport function handleRequest(\r\n    REQUEST: string,\r\n    SUCCESS: string,\r\n    FAILURE: string,\r\n    state: RequestStatusType,\r\n    action: AnyAction,\r\n): RequestStatusType {\r\n    switch (action.type) {\r\n    case REQUEST:\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.STARTED,\r\n        };\r\n    case SUCCESS:\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.SUCCESS,\r\n            error: null,\r\n        };\r\n    case FAILURE: {\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.FAILURE,\r\n            error: action.error,\r\n        };\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {AdminTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction createCompliance(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        AdminTypes.CREATE_COMPLIANCE_REQUEST,\r\n        AdminTypes.CREATE_COMPLIANCE_SUCCESS,\r\n        AdminTypes.CREATE_COMPLIANCE_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    createCompliance,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {ChannelTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction myChannels(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        ChannelTypes.CHANNELS_REQUEST,\r\n        ChannelTypes.CHANNELS_SUCCESS,\r\n        ChannelTypes.CHANNELS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction createChannel(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        ChannelTypes.CREATE_CHANNEL_REQUEST,\r\n        ChannelTypes.CREATE_CHANNEL_SUCCESS,\r\n        ChannelTypes.CREATE_CHANNEL_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction getChannels(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        ChannelTypes.GET_CHANNELS_REQUEST,\r\n        ChannelTypes.GET_CHANNELS_SUCCESS,\r\n        ChannelTypes.GET_CHANNELS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction getAllChannels(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        ChannelTypes.GET_ALL_CHANNELS_REQUEST,\r\n        ChannelTypes.GET_ALL_CHANNELS_SUCCESS,\r\n        ChannelTypes.GET_ALL_CHANNELS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    getChannels,\r\n    getAllChannels,\r\n    myChannels,\r\n    createChannel,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {FileTypes} from 'mattermost-redux/action_types';\r\nimport {RequestStatus} from 'mattermost-redux/constants';\r\n\r\nimport {initialRequestState} from './helpers';\r\n\r\nexport function handleUploadFilesRequest(\r\n    REQUEST: string,\r\n    SUCCESS: string,\r\n    FAILURE: string,\r\n    CANCEL: string,\r\n    state: RequestStatusType,\r\n    action: AnyAction,\r\n): RequestStatusType {\r\n    switch (action.type) {\r\n    case REQUEST:\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.STARTED,\r\n        };\r\n    case SUCCESS:\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.SUCCESS,\r\n            error: null,\r\n        };\r\n    case FAILURE: {\r\n        let error = action.error;\r\n\r\n        if (error instanceof Error) {\r\n            error = Object.hasOwn(error, 'intl') ? {...error} : error.toString();\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.FAILURE,\r\n            error,\r\n        };\r\n    }\r\n    case CANCEL:\r\n        return {\r\n            ...state,\r\n            status: RequestStatus.CANCELLED,\r\n            error: null,\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction uploadFiles(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleUploadFilesRequest(\r\n        FileTypes.UPLOAD_FILES_REQUEST,\r\n        FileTypes.UPLOAD_FILES_SUCCESS,\r\n        FileTypes.UPLOAD_FILES_FAILURE,\r\n        FileTypes.UPLOAD_FILES_CANCEL,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    uploadFiles,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {GeneralTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction websocket(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    if (action.type === GeneralTypes.WEBSOCKET_CLOSED) {\r\n        return initialRequestState();\r\n    }\r\n\r\n    return handleRequest(\r\n        GeneralTypes.WEBSOCKET_REQUEST,\r\n        GeneralTypes.WEBSOCKET_SUCCESS,\r\n        GeneralTypes.WEBSOCKET_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    websocket,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {PostTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction createPost(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    if (action.type === PostTypes.CREATE_POST_RESET_REQUEST) {\r\n        return initialRequestState();\r\n    }\r\n\r\n    return handleRequest(\r\n        PostTypes.CREATE_POST_REQUEST,\r\n        PostTypes.CREATE_POST_SUCCESS,\r\n        PostTypes.CREATE_POST_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction editPost(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        PostTypes.EDIT_POST_REQUEST,\r\n        PostTypes.EDIT_POST_SUCCESS,\r\n        PostTypes.EDIT_POST_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction getPostThread(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        PostTypes.GET_POST_THREAD_REQUEST,\r\n        PostTypes.GET_POST_THREAD_SUCCESS,\r\n        PostTypes.GET_POST_THREAD_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    createPost,\r\n    editPost,\r\n    getPostThread,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {RoleTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction getRolesByNames(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        RoleTypes.ROLES_BY_NAMES_REQUEST,\r\n        RoleTypes.ROLES_BY_NAMES_SUCCESS,\r\n        RoleTypes.ROLES_BY_NAMES_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction getRoleByName(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        RoleTypes.ROLE_BY_NAME_REQUEST,\r\n        RoleTypes.ROLE_BY_NAME_SUCCESS,\r\n        RoleTypes.ROLE_BY_NAME_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction getRole(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        RoleTypes.ROLE_BY_ID_REQUEST,\r\n        RoleTypes.ROLE_BY_ID_SUCCESS,\r\n        RoleTypes.ROLE_BY_ID_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction editRole(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        RoleTypes.EDIT_ROLE_REQUEST,\r\n        RoleTypes.EDIT_ROLE_SUCCESS,\r\n        RoleTypes.EDIT_ROLE_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    getRolesByNames,\r\n    getRoleByName,\r\n    getRole,\r\n    editRole,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {SearchTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction flaggedPosts(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    if (action.type === SearchTypes.REMOVE_SEARCH_POSTS) {\r\n        return initialRequestState();\r\n    }\r\n\r\n    return handleRequest(\r\n        SearchTypes.SEARCH_FLAGGED_POSTS_REQUEST,\r\n        SearchTypes.SEARCH_FLAGGED_POSTS_SUCCESS,\r\n        SearchTypes.SEARCH_FLAGGED_POSTS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction pinnedPosts(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    if (action.type === SearchTypes.REMOVE_SEARCH_POSTS) {\r\n        return initialRequestState();\r\n    }\r\n\r\n    return handleRequest(\r\n        SearchTypes.SEARCH_PINNED_POSTS_REQUEST,\r\n        SearchTypes.SEARCH_PINNED_POSTS_SUCCESS,\r\n        SearchTypes.SEARCH_PINNED_POSTS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    flaggedPosts,\r\n    pinnedPosts,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {TeamTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction getTeams(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        TeamTypes.GET_TEAMS_REQUEST,\r\n        TeamTypes.GET_TEAMS_SUCCESS,\r\n        TeamTypes.GET_TEAMS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    getTeams,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {RequestStatusType} from '@mattermost/types/requests';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\nimport {RequestStatus} from 'mattermost-redux/constants';\r\n\r\nimport {handleRequest, initialRequestState} from './helpers';\r\n\r\nfunction login(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    switch (action.type) {\r\n    case UserTypes.LOGIN_REQUEST:\r\n        return {...state, status: RequestStatus.STARTED};\r\n\r\n    case UserTypes.LOGIN_SUCCESS:\r\n        return {...state, status: RequestStatus.SUCCESS, error: null};\r\n\r\n    case UserTypes.LOGIN_FAILURE:\r\n        return {...state, status: RequestStatus.FAILURE, error: action.error};\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {...state, status: RequestStatus.NOT_STARTED, error: null};\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction logout(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    switch (action.type) {\r\n    case UserTypes.LOGOUT_REQUEST:\r\n        return {...state, status: RequestStatus.STARTED};\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {...state, status: RequestStatus.SUCCESS, error: null};\r\n\r\n    case UserTypes.LOGOUT_FAILURE:\r\n        return {...state, status: RequestStatus.FAILURE, error: action.error};\r\n\r\n    case UserTypes.RESET_LOGOUT_STATE:\r\n        return initialRequestState();\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction autocompleteUsers(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        UserTypes.AUTOCOMPLETE_USERS_REQUEST,\r\n        UserTypes.AUTOCOMPLETE_USERS_SUCCESS,\r\n        UserTypes.AUTOCOMPLETE_USERS_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nfunction updateMe(state: RequestStatusType = initialRequestState(), action: AnyAction): RequestStatusType {\r\n    return handleRequest(\r\n        UserTypes.UPDATE_ME_REQUEST,\r\n        UserTypes.UPDATE_ME_SUCCESS,\r\n        UserTypes.UPDATE_ME_FAILURE,\r\n        state,\r\n        action,\r\n    );\r\n}\r\n\r\nexport default combineReducers({\r\n    login,\r\n    logout,\r\n    autocompleteUsers,\r\n    updateMe,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport entities from './entities';\r\nimport errors from './errors';\r\nimport requests from './requests';\r\nimport websocket from './websocket';\r\n\r\nexport default {\r\n    entities,\r\n    errors,\r\n    requests,\r\n    websocket,\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {ErrorTypes} from 'mattermost-redux/action_types';\r\n\r\nexport default ((state: Array<{error: any;displayable?: boolean;date: string}> = [], action: MMReduxAction) => {\r\n    switch (action.type) {\r\n    case ErrorTypes.DISMISS_ERROR: {\r\n        const nextState = [...state];\r\n        nextState.splice(action.index!, 1);\r\n\r\n        return nextState;\r\n    }\r\n    case ErrorTypes.LOG_ERROR: {\r\n        const nextState = [...state];\r\n        const {displayable, error} = action;\r\n        nextState.push({\r\n            displayable,\r\n            error,\r\n            date: new Date(Date.now()).toUTCString(),\r\n        });\r\n\r\n        return nextState;\r\n    }\r\n    case ErrorTypes.RESTORE_ERRORS:\r\n        return action.data;\r\n    case ErrorTypes.CLEAR_ERRORS: {\r\n        return [];\r\n    }\r\n    default:\r\n        return state;\r\n    }\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport admin from './admin';\r\nimport channels from './channels';\r\nimport files from './files';\r\nimport general from './general';\r\nimport posts from './posts';\r\nimport roles from './roles';\r\nimport search from './search';\r\nimport teams from './teams';\r\nimport users from './users';\r\n\r\nexport default combineReducers({\r\n    channels,\r\n    files,\r\n    general,\r\n    posts,\r\n    teams,\r\n    users,\r\n    admin,\r\n    search,\r\n    roles,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {MMReduxAction} from 'mattermost-redux/action_types';\r\nimport {GeneralTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nfunction getInitialState() {\r\n    return {\r\n        connected: false,\r\n        lastConnectAt: 0,\r\n        lastDisconnectAt: 0,\r\n        connectionId: '',\r\n        serverHostname: '',\r\n    };\r\n}\r\n\r\nexport default function reducer(state = getInitialState(), action: MMReduxAction) {\r\n    if (!state.connected && action.type === GeneralTypes.WEBSOCKET_SUCCESS) {\r\n        return {\r\n            ...state,\r\n            connected: true,\r\n            lastConnectAt: action.timestamp,\r\n        };\r\n    } else if (state.connected && (action.type === GeneralTypes.WEBSOCKET_FAILURE || action.type === GeneralTypes.WEBSOCKET_CLOSED)) {\r\n        return {\r\n            ...state,\r\n            connected: false,\r\n            lastDisconnectAt: action.timestamp,\r\n            serverHostname: '',\r\n        };\r\n    }\r\n\r\n    if (action.type === UserTypes.LOGOUT_SUCCESS) {\r\n        return getInitialState();\r\n    }\r\n\r\n    if (action.type === GeneralTypes.SET_CONNECTION_ID) {\r\n        return {\r\n            ...state,\r\n            connectionId: action.payload.connectionId,\r\n        };\r\n    }\r\n\r\n    if (action.type === GeneralTypes.SET_SERVER_HOSTNAME) {\r\n        return {\r\n            ...state,\r\n            serverHostname: action.payload.serverHostname,\r\n        };\r\n    }\r\n\r\n    return state;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {composeWithDevTools} from '@redux-devtools/extension';\r\nimport {\r\n    applyMiddleware,\r\n    legacy_createStore,\r\n} from 'redux';\r\nimport type {\r\n    Reducer,\r\n    Store} from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {createReducer} from './helpers';\r\nimport initialState from './initial_state';\r\nimport reducerRegistry from './reducer_registry';\r\n\r\nimport serviceReducers from '../reducers';\r\n\r\n/**\r\n * Configures and constructs the redux store. Accepts the following parameters:\r\n * preloadedState - Any preloaded state to be applied to the store after it is initially configured.\r\n * appReducer - An object containing any app-specific reducer functions that the client needs.\r\n * getAppReducers - A function that returns the appReducer as defined above. Only used in development to enable hot reloading.\r\n */\r\nexport default function configureStore<S extends GlobalState>({\r\n    appReducers,\r\n    getAppReducers,\r\n    preloadedState,\r\n}: {\r\n    appReducers: Record<string, Reducer>;\r\n    getAppReducers: () => Record<string, Reducer>;\r\n    preloadedState: Partial<S>;\r\n}): Store {\r\n    const baseState = {\r\n        ...initialState,\r\n        ...preloadedState,\r\n    };\r\n\r\n    const composeEnhancers = composeWithDevTools({\r\n        shouldHotReload: false,\r\n        trace: true,\r\n        traceLimit: 25,\r\n        autoPause: true,\r\n    });\r\n\r\n    const middleware = applyMiddleware(\r\n\r\n        // @hmhealey I've added this extra argument to Thunks to store information related to the store that can't be\r\n        // part of Redux state itself. At the moment, this is so that I can attach let DataLoaders dispatch actions.\r\n        // If you want to make use of this, talk to me first since I want to know more.\r\n        thunk.withExtraArgument({loaders: {}}),\r\n    );\r\n\r\n    const enhancers = composeEnhancers(middleware);\r\n\r\n    const baseReducer = createReducer(serviceReducers, appReducers);\r\n\r\n    const store = legacy_createStore(\r\n        baseReducer,\r\n        baseState,\r\n        enhancers,\r\n    );\r\n\r\n    reducerRegistry.setChangeListener((reducers: Record<string, Reducer>) => {\r\n        store.replaceReducer(createReducer(reducers, serviceReducers, appReducers));\r\n    });\r\n\r\n    if (module.hot) {\r\n        // Enable Webpack hot module replacement for reducers\r\n        module.hot.accept(() => {\r\n            const registryReducers = reducerRegistry.getReducers();\r\n            const nextServiceReducers = require('../reducers').default; // eslint-disable-line global-require\r\n            const nextAppReducers = getAppReducers();\r\n\r\n            // Ensure registryReducers comes first so that stored service/app reducers are replaced by the new ones\r\n            store.replaceReducer(createReducer(registryReducers, nextServiceReducers, nextAppReducers));\r\n        });\r\n    }\r\n\r\n    return store;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Reducer} from 'redux';\r\n\r\n// Based on http://nicolasgallagher.com/redux-modules-and-code-splitting/\r\nexport class ReducerRegistry {\r\n    emitChange?: (reducers: Record<string, Reducer>) => void;\r\n    reducers: Record<string, Reducer> = {};\r\n\r\n    setReducers = (reducers: Record<string, Reducer>): void => {\r\n        this.reducers = reducers;\r\n    };\r\n\r\n    getReducers = (): Record<string, Reducer> => {\r\n        return {...this.reducers};\r\n    };\r\n\r\n    register = (name: string, reducer: Reducer): void => {\r\n        this.reducers = {...this.reducers, [name]: reducer};\r\n        if (this.emitChange) {\r\n            this.emitChange(this.getReducers());\r\n        }\r\n    };\r\n\r\n    setChangeListener = (listener: (reducers: Record<string, Reducer>) => void): void => {\r\n        this.emitChange = listener;\r\n    };\r\n}\r\n\r\nconst reducerRegistry = new ReducerRegistry();\r\nexport default reducerRegistry;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {AppBinding, AppField, AppForm} from '@mattermost/types/apps';\r\n\r\nimport {AppBindingLocations, AppFieldTypes} from 'mattermost-redux/constants/apps';\r\n\r\nexport function cleanBinding(binding: AppBinding, topLocation: string) {\r\n    cleanBindingRec(binding, topLocation, 0);\r\n}\r\n\r\nfunction cleanBindingRec(binding: AppBinding, topLocation: string, depth: number) {\r\n    if (!binding) {\r\n        return;\r\n    }\r\n\r\n    const toRemove: number[] = [];\r\n    const usedLabels: {[label: string]: boolean} = {};\r\n    binding.bindings?.forEach((b, i) => {\r\n        // Inheritance and defaults\r\n\r\n        if (!b.app_id) {\r\n            b.app_id = binding.app_id;\r\n        }\r\n\r\n        if (!b.label) {\r\n            b.label = b.location || '';\r\n        }\r\n\r\n        b.location = binding.location + '/' + b.location;\r\n\r\n        // Validation\r\n        if (!b.app_id) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        // No empty labels nor \"whitespace\" labels\r\n        if (!b.label.trim()) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        switch (topLocation) {\r\n        case AppBindingLocations.COMMAND: {\r\n            if (b.label.match(/ |\\t/)) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n\r\n            if (usedLabels[b.label]) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n            break;\r\n        }\r\n        case AppBindingLocations.CHANNEL_HEADER_ICON: {\r\n            // First level of channel header icons must have an icon to show as the icon\r\n            if (!b.icon && depth === 0) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n            break;\r\n        }\r\n        }\r\n\r\n        // Must have only subbindings, a form or a submit call.\r\n        const hasBindings = Boolean(b.bindings?.length);\r\n        const hasForm = Boolean(b.form);\r\n        const hasSubmit = Boolean(b.submit);\r\n        if ((!hasBindings && !hasForm && !hasSubmit) ||\r\n            (hasBindings && hasForm) ||\r\n            (hasBindings && hasSubmit) ||\r\n            (hasForm && hasSubmit)) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        if (hasBindings) {\r\n            cleanBindingRec(b, topLocation, depth + 1);\r\n\r\n            // Remove invalid branches\r\n            if (!b.bindings?.length) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n        } else if (hasForm) {\r\n            if (!b.form?.submit && !b.form?.source) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n\r\n            cleanForm(b.form);\r\n        }\r\n\r\n        usedLabels[b.label] = true;\r\n    });\r\n\r\n    toRemove.forEach((i) => {\r\n        binding.bindings?.splice(i, 1);\r\n    });\r\n}\r\n\r\nexport function validateBindings(bindings: AppBinding[] | null = []): AppBinding[] {\r\n    if (!bindings || (bindings.length && bindings.length === 0)) {\r\n        return [];\r\n    }\r\n    const filterAndCleanBindings = (location: string): AppBinding[] => {\r\n        const filteredBindings = bindings.filter((b) => b.location === location);\r\n        if (filteredBindings?.length === 0) {\r\n            return [];\r\n        }\r\n        filteredBindings.forEach((b) => cleanBinding(b, location));\r\n        return filteredBindings.filter((b) => b.bindings?.length);\r\n    };\r\n\r\n    const channelHeaderBindings = filterAndCleanBindings(AppBindingLocations.CHANNEL_HEADER_ICON);\r\n    const postMenuBindings = filterAndCleanBindings(AppBindingLocations.POST_MENU_ITEM);\r\n    const commandBindings = filterAndCleanBindings(AppBindingLocations.COMMAND);\r\n\r\n    return postMenuBindings.concat(channelHeaderBindings, commandBindings);\r\n}\r\n\r\nexport function cleanForm(form?: AppForm) {\r\n    if (!form) {\r\n        return;\r\n    }\r\n\r\n    const toRemove: number[] = [];\r\n    const usedLabels: {[label: string]: boolean} = {};\r\n    form.fields?.forEach((field, i) => {\r\n        if (!field.name) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        if (field.name.match(/ |\\t/)) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        let label = field.label;\r\n        if (!label) {\r\n            label = field.name;\r\n        }\r\n\r\n        if (label.match(/ |\\t/)) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        if (usedLabels[label]) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        switch (field.type) {\r\n        case AppFieldTypes.STATIC_SELECT:\r\n            cleanStaticSelect(field);\r\n            if (!field.options?.length) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n            break;\r\n        case AppFieldTypes.DYNAMIC_SELECT:\r\n            if (!field.lookup) {\r\n                toRemove.unshift(i);\r\n                return;\r\n            }\r\n        }\r\n        usedLabels[label] = true;\r\n    });\r\n\r\n    toRemove.forEach((i) => {\r\n        form.fields!.splice(i, 1);\r\n    });\r\n}\r\n\r\nfunction cleanStaticSelect(field: AppField) {\r\n    const toRemove: number[] = [];\r\n    const usedLabels: {[label: string]: boolean} = {};\r\n    const usedValues: {[label: string]: boolean} = {};\r\n    field.options?.forEach((option, i) => {\r\n        let label = option.label;\r\n        if (!label) {\r\n            label = option.value;\r\n        }\r\n\r\n        if (!label) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        if (usedLabels[label]) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        if (usedValues[option.value]) {\r\n            toRemove.unshift(i);\r\n            return;\r\n        }\r\n\r\n        usedLabels[label] = true;\r\n        usedValues[option.value] = true;\r\n    });\r\n\r\n    toRemove.forEach((i) => {\r\n        field.options?.splice(i, 1);\r\n    });\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n// insertWithoutDuplicates inserts an item into an array and returns the result. The provided array is not modified.\r\n// If the array already contains the given item, that item is moved to the new location instead of adding a duplicate.\r\n// If the array already had the given item at the given index, the origianl array is returned.\r\nexport function insertWithoutDuplicates<T>(array: T[], item: T, newIndex: number) {\r\n    const index = array.indexOf(item);\r\n    if (newIndex === index) {\r\n        // The item doesn't need to be moved since its location hasn't changed\r\n        return array;\r\n    }\r\n\r\n    const newArray = [...array];\r\n\r\n    // Remove the item from its old location if it already exists in the array\r\n    if (index !== -1) {\r\n        newArray.splice(index, 1);\r\n    }\r\n\r\n    // And re-add it in its new location\r\n    newArray.splice(newIndex, 0, item);\r\n\r\n    return newArray;\r\n}\r\n\r\nexport function insertMultipleWithoutDuplicates<T>(array: T[], items: T[], newIndex: number) {\r\n    let newArray = [...array];\r\n\r\n    items.forEach((item) => {\r\n        newArray = removeItem(newArray, item);\r\n    });\r\n\r\n    // And re-add it in its new location\r\n    newArray.splice(newIndex, 0, ...items);\r\n\r\n    return newArray;\r\n}\r\n\r\n// removeItem removes an item from an array and returns the result. The provided array is not modified. If the array\r\n// did not originally contain the given item, the original array is returned.\r\nexport function removeItem<T>(array: T[], item: T) {\r\n    const index = array.indexOf(item);\r\n    if (index === -1) {\r\n        return array;\r\n    }\r\n\r\n    const result = [...array];\r\n    result.splice(index, 1);\r\n    return result;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel, ChannelType, ChannelMembership, ChannelNotifyProps, ChannelMessageCount} from '@mattermost/types/channels';\r\nimport type {Post} from '@mattermost/types/posts';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UsersState, UserProfile, UserNotifyProps} from '@mattermost/types/users';\r\nimport type {IDMappedObjects, RelationOneToManyUnique, RelationOneToOne} from '@mattermost/types/utilities';\r\n\r\nimport {MarkUnread} from 'mattermost-redux/constants/channels';\r\n\r\nimport {displayUsername} from './user_utils';\r\n\r\nimport {General, Users} from '../constants';\r\n\r\nconst channelTypeOrder: Record<ChannelType, number> = {\r\n    [General.OPEN_CHANNEL]: 0,\r\n    [General.PRIVATE_CHANNEL]: 1,\r\n    [General.DM_CHANNEL]: 2,\r\n    [General.GM_CHANNEL]: 3,\r\n} as Record<ChannelType, number>;\r\n\r\nexport function completeDirectChannelInfo(usersState: UsersState, teammateNameDisplay: string, channel: Channel): Channel {\r\n    if (isDirectChannel(channel)) {\r\n        const teammateId = getUserIdFromChannelName(usersState.currentUserId, channel.name);\r\n\r\n        // return empty string instead of `someone` default string for display_name\r\n        return {\r\n            ...channel,\r\n            display_name: displayUsername(usersState.profiles[teammateId], teammateNameDisplay, false),\r\n            teammate_id: teammateId,\r\n            status: usersState.statuses[teammateId] || 'offline',\r\n        };\r\n    } else if (isGroupChannel(channel)) {\r\n        return completeDirectGroupInfo(usersState, teammateNameDisplay, channel);\r\n    }\r\n\r\n    return channel;\r\n}\r\n\r\nexport function splitRoles(roles: string): Set<string> {\r\n    return roles ? new Set<string>(roles.split(' ')) : new Set<string>([]);\r\n}\r\n\r\n// newCompleteDirectChannelInfo is a variant of completeDirectChannelInfo that accepts the minimal\r\n// data required instead of depending on the entirety of state.entities.users. This allows the\r\n// calling selector to have fewer dependencies, reducing its need to recompute when memoized.\r\n//\r\n// Ideally, this would replace completeDirectChannelInfo altogether, but is currently factored out\r\n// to minimize changes while addressing a critical performance issue.\r\nexport function newCompleteDirectChannelInfo(currentUserId: string, profiles: IDMappedObjects<UserProfile>, profilesInChannel: RelationOneToManyUnique<Channel, UserProfile>, teammateStatus: string, teammateNameDisplay: string, channel: Channel): Channel {\r\n    if (isDirectChannel(channel)) {\r\n        const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n\r\n        // return empty string instead of `someone` default string for display_name\r\n        return {\r\n            ...channel,\r\n            display_name: displayUsername(profiles[teammateId], teammateNameDisplay, false),\r\n            teammate_id: teammateId,\r\n            status: teammateStatus,\r\n        };\r\n    } else if (isGroupChannel(channel)) {\r\n        return newCompleteDirectGroupInfo(currentUserId, profiles, profilesInChannel, teammateNameDisplay, channel);\r\n    }\r\n\r\n    return channel;\r\n}\r\n\r\nexport function completeDirectChannelDisplayName(currentUserId: string, profiles: IDMappedObjects<UserProfile>, userIdsInChannel: Set<string>, teammateNameDisplay: string, channel: Channel): Channel {\r\n    if (isDirectChannel(channel)) {\r\n        const dmChannelClone = {...channel};\r\n        const teammateId = getUserIdFromChannelName(currentUserId, channel.name);\r\n\r\n        return Object.assign(dmChannelClone, {display_name: displayUsername(profiles[teammateId], teammateNameDisplay)});\r\n    } else if (isGroupChannel(channel) && userIdsInChannel && userIdsInChannel.size > 0) {\r\n        const displayName = getGroupDisplayNameFromUserIds(userIdsInChannel, profiles, currentUserId, teammateNameDisplay);\r\n        return {...channel, display_name: displayName};\r\n    }\r\n\r\n    return channel;\r\n}\r\n\r\nexport function cleanUpUrlable(input: string): string {\r\n    let cleaned = input.trim().replace(/-/g, ' ').replace(/[^\\w\\s]/gi, '').toLowerCase().replace(/\\s/g, '-');\r\n    cleaned = cleaned.replace(/-{2,}/, '-');\r\n    cleaned = cleaned.replace(/^-+/, '');\r\n    cleaned = cleaned.replace(/-+$/, '');\r\n    return cleaned;\r\n}\r\n\r\nexport function getChannelByName(channels: IDMappedObjects<Channel>, name: string): Channel | undefined {\r\n    return Object.values(channels).find((channel) => channel.name === name);\r\n}\r\n\r\nexport function getDirectChannelName(id: string, otherId: string): string {\r\n    let handle;\r\n\r\n    if (otherId > id) {\r\n        handle = id + '__' + otherId;\r\n    } else {\r\n        handle = otherId + '__' + id;\r\n    }\r\n\r\n    return handle;\r\n}\r\n\r\nexport function getUserIdFromChannelName(userId: string, channelName: string): string {\r\n    const ids = channelName.split('__');\r\n    let otherUserId = '';\r\n    if (ids[0] === userId) {\r\n        otherUserId = ids[1];\r\n    } else {\r\n        otherUserId = ids[0];\r\n    }\r\n\r\n    return otherUserId;\r\n}\r\n\r\nexport function isDirectChannel(channel: Channel): boolean {\r\n    return channel.type === General.DM_CHANNEL;\r\n}\r\n\r\nexport function isGroupChannel(channel: Channel): boolean {\r\n    return channel.type === General.GM_CHANNEL;\r\n}\r\n\r\nexport function getChannelsIdForTeam(state: GlobalState, teamId: string): string[] {\r\n    const {channels} = state.entities.channels;\r\n\r\n    return Object.keys(channels).map((key) => channels[key]).reduce((res, channel: Channel) => {\r\n        if (channel.team_id === teamId) {\r\n            res.push(channel.id);\r\n        }\r\n        return res;\r\n    }, [] as string[]);\r\n}\r\n\r\nexport function getGroupDisplayNameFromUserIds(userIds: Set<string>, profiles: IDMappedObjects<UserProfile>, currentUserId: string, teammateNameDisplay: string, omitCurrentUser = true): string {\r\n    const names: string[] = [];\r\n    userIds.forEach((id) => {\r\n        if (!(id === currentUserId && omitCurrentUser)) {\r\n            names.push(displayUsername(profiles[id], teammateNameDisplay));\r\n        }\r\n    });\r\n\r\n    function sortUsernames(a: string, b: string) {\r\n        const locale = getUserLocale(currentUserId, profiles);\r\n        return a.localeCompare(b, locale, {numeric: true});\r\n    }\r\n\r\n    return names.sort(sortUsernames).join(', ');\r\n}\r\n\r\nexport function isDefault(channel?: Channel): boolean {\r\n    return channel?.name === General.DEFAULT_CHANNEL;\r\n}\r\n\r\nexport function completeDirectGroupInfo(usersState: UsersState, teammateNameDisplay: string, channel: Channel, omitCurrentUser = true) {\r\n    const {currentUserId, profiles, profilesInChannel} = usersState;\r\n    const profilesIds = profilesInChannel[channel.id];\r\n    const gm = {...channel};\r\n\r\n    if (profilesIds) {\r\n        // sometimes the current user is not part of the profilesInChannel\r\n        if (!omitCurrentUser) {\r\n            profilesIds.add(currentUserId);\r\n        }\r\n\r\n        gm.display_name = getGroupDisplayNameFromUserIds(profilesIds, profiles, currentUserId, teammateNameDisplay, omitCurrentUser);\r\n        return gm;\r\n    }\r\n\r\n    const usernames = gm.display_name.split(', ');\r\n    const users = Object.keys(profiles).map((key) => profiles[key]);\r\n    const userIds: Set<string> = new Set();\r\n    usernames.forEach((username: string) => {\r\n        const u = users.find((p): boolean => p.username === username);\r\n        if (u) {\r\n            userIds.add(u.id);\r\n        }\r\n    });\r\n    if (usernames.length === userIds.size) {\r\n        gm.display_name = getGroupDisplayNameFromUserIds(userIds, profiles, currentUserId, teammateNameDisplay);\r\n        return gm;\r\n    }\r\n\r\n    return channel;\r\n}\r\n\r\n// newCompleteDirectGroupInfo is a variant of completeDirectGroupInfo that accepts the minimal\r\n// data required instead of depending on the entirety of state.entities.users. This allows the\r\n// calling selector to have fewer dependencies, reducing its need to recompute when memoized.\r\n//\r\n// See also newCompleteDirectChannelInfo.\r\nfunction newCompleteDirectGroupInfo(currentUserId: string, profiles: IDMappedObjects<UserProfile>, profilesInChannel: RelationOneToManyUnique<Channel, UserProfile>, teammateNameDisplay: string, channel: Channel) {\r\n    const profilesIds = profilesInChannel[channel.id];\r\n    const gm = {...channel};\r\n\r\n    if (profilesIds) {\r\n        gm.display_name = getGroupDisplayNameFromUserIds(profilesIds, profiles, currentUserId, teammateNameDisplay);\r\n        return gm;\r\n    }\r\n\r\n    const usernames = gm.display_name.split(', ');\r\n    const users = Object.keys(profiles).map((key) => profiles[key]);\r\n    const userIds: Set<string> = new Set();\r\n    usernames.forEach((username: string) => {\r\n        const u = users.find((p): boolean => p.username === username);\r\n        if (u) {\r\n            userIds.add(u.id);\r\n        }\r\n    });\r\n    if (usernames.length === userIds.size) {\r\n        gm.display_name = getGroupDisplayNameFromUserIds(userIds, profiles, currentUserId, teammateNameDisplay);\r\n        return gm;\r\n    }\r\n\r\n    return channel;\r\n}\r\n\r\nexport function isOpenChannel(channel: Channel): boolean {\r\n    return channel.type === General.OPEN_CHANNEL;\r\n}\r\n\r\nexport function isPrivateChannel(channel: Channel): boolean {\r\n    return channel.type === General.PRIVATE_CHANNEL;\r\n}\r\n\r\nexport function sortChannelsByTypeListAndDisplayName(locale: string, typeList: string[], a: Channel, b: Channel): number {\r\n    const idxA = typeList.indexOf(a.type);\r\n    const idxB = typeList.indexOf(b.type);\r\n\r\n    if (idxA === -1 && idxB !== -1) {\r\n        return 1;\r\n    }\r\n    if (idxB === -1 && idxA !== -1) {\r\n        return -1;\r\n    }\r\n\r\n    if (idxA !== idxB) {\r\n        if (idxA < idxB) {\r\n            return -1;\r\n        }\r\n        return 1;\r\n    }\r\n\r\n    const aDisplayName = filterName(a.display_name);\r\n    const bDisplayName = filterName(b.display_name);\r\n\r\n    if (aDisplayName !== bDisplayName) {\r\n        return aDisplayName.toLowerCase().localeCompare(bDisplayName.toLowerCase(), locale, {numeric: true});\r\n    }\r\n\r\n    return a.name.toLowerCase().localeCompare(b.name.toLowerCase(), locale, {numeric: true});\r\n}\r\n\r\nexport function sortChannelsByTypeAndDisplayName(locale: string, a: Channel, b: Channel): number {\r\n    if (channelTypeOrder[a.type] !== channelTypeOrder[b.type]) {\r\n        if (channelTypeOrder[a.type] < channelTypeOrder[b.type]) {\r\n            return -1;\r\n        }\r\n\r\n        return 1;\r\n    }\r\n\r\n    const aDisplayName = filterName(a.display_name);\r\n    const bDisplayName = filterName(b.display_name);\r\n\r\n    if (aDisplayName !== bDisplayName) {\r\n        return aDisplayName.toLowerCase().localeCompare(bDisplayName.toLowerCase(), locale, {numeric: true});\r\n    }\r\n\r\n    return a.name.toLowerCase().localeCompare(b.name.toLowerCase(), locale, {numeric: true});\r\n}\r\n\r\nfunction filterName(name: string): string {\r\n    return name.replace(/[.,'\"\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, ''); // eslint-disable-line no-useless-escape\r\n}\r\n\r\nexport function sortChannelsByDisplayName(locale: string, a: Channel, b: Channel): number {\r\n    // if both channels have the display_name defined\r\n    if (a.display_name && b.display_name && a.display_name !== b.display_name) {\r\n        return a.display_name.toLowerCase().localeCompare(b.display_name.toLowerCase(), locale, {numeric: true});\r\n    }\r\n\r\n    return a.name.toLowerCase().localeCompare(b.name.toLowerCase(), locale, {numeric: true});\r\n}\r\n\r\nexport function sortChannelsByDisplayNameAndMuted(locale: string, members: RelationOneToOne<Channel, ChannelMembership>, a: Channel, b: Channel): number {\r\n    const aMember = members[a.id];\r\n    const bMember = members[b.id];\r\n\r\n    if (isChannelMuted(bMember) === isChannelMuted(aMember)) {\r\n        return sortChannelsByDisplayName(locale, a, b);\r\n    }\r\n\r\n    if (!isChannelMuted(bMember) && isChannelMuted(aMember)) {\r\n        return 1;\r\n    }\r\n\r\n    return -1;\r\n}\r\n\r\nexport function sortChannelsByRecency(lastPosts: RelationOneToOne<Channel, Post>, a: Channel, b: Channel): number {\r\n    let aLastPostAt = a.last_post_at;\r\n    if (lastPosts[a.id] && lastPosts[a.id].create_at > a.last_post_at) {\r\n        aLastPostAt = lastPosts[a.id].create_at;\r\n    }\r\n\r\n    let bLastPostAt = b.last_post_at;\r\n    if (lastPosts[b.id] && lastPosts[b.id].create_at > b.last_post_at) {\r\n        bLastPostAt = lastPosts[b.id].create_at;\r\n    }\r\n\r\n    return bLastPostAt - aLastPostAt;\r\n}\r\n\r\nexport function isChannelMuted(member?: ChannelMembership): boolean {\r\n    return member?.notify_props ? (member.notify_props.mark_unread === MarkUnread.MENTION) : false;\r\n}\r\n\r\nexport function areChannelMentionsIgnored(channelMemberNotifyProps: ChannelNotifyProps, currentUserNotifyProps: UserNotifyProps) {\r\n    let ignoreChannelMentionsDefault = Users.IGNORE_CHANNEL_MENTIONS_OFF;\r\n\r\n    if (currentUserNotifyProps.channel && currentUserNotifyProps.channel === 'false') {\r\n        ignoreChannelMentionsDefault = Users.IGNORE_CHANNEL_MENTIONS_ON;\r\n    }\r\n\r\n    let ignoreChannelMentions = channelMemberNotifyProps && channelMemberNotifyProps.ignore_channel_mentions;\r\n    if (!ignoreChannelMentions || ignoreChannelMentions === Users.IGNORE_CHANNEL_MENTIONS_DEFAULT) {\r\n        ignoreChannelMentions = ignoreChannelMentionsDefault as any;\r\n    }\r\n\r\n    return ignoreChannelMentions !== Users.IGNORE_CHANNEL_MENTIONS_OFF;\r\n}\r\n\r\nfunction getUserLocale(userId: string, profiles: IDMappedObjects<UserProfile>) {\r\n    let locale = General.DEFAULT_LOCALE;\r\n    if (profiles && profiles[userId] && profiles[userId].locale) {\r\n        locale = profiles[userId].locale;\r\n    }\r\n\r\n    return locale;\r\n}\r\n\r\nexport function filterChannelsMatchingTerm(channels: Channel[], term: string): Channel[] {\r\n    const lowercasedTerm = term.toLowerCase();\r\n\r\n    return channels.filter((channel: Channel): boolean => {\r\n        if (!channel) {\r\n            return false;\r\n        }\r\n        const name = (channel.name || '').toLowerCase();\r\n        const displayName = (channel.display_name || '').toLowerCase();\r\n\r\n        return name.startsWith(lowercasedTerm) ||\r\n            displayName.startsWith(lowercasedTerm);\r\n    });\r\n}\r\n\r\nexport function channelListToMap(channelList: Channel[]): IDMappedObjects<Channel> {\r\n    const channels: Record<string, Channel> = {};\r\n    for (let i = 0; i < channelList.length; i++) {\r\n        channels[channelList[i].id] = channelList[i];\r\n    }\r\n    return channels;\r\n}\r\n\r\n// calculateUnreadCount returns an object containing the number of unread mentions/mesasges in a channel and whether\r\n// or not that channel would be shown as unread in the sidebar.\r\nexport function calculateUnreadCount(\r\n    messageCount: ChannelMessageCount | undefined,\r\n    member: ChannelMembership | undefined,\r\n    crtEnabled: boolean,\r\n): {showUnread: boolean; mentions: number; messages: number; hasUrgent: boolean} {\r\n    if (!member || !messageCount) {\r\n        return {\r\n            showUnread: false,\r\n            hasUrgent: false,\r\n            mentions: 0,\r\n            messages: 0,\r\n        };\r\n    }\r\n\r\n    let messages;\r\n    let mentions;\r\n    let hasUrgent = false;\r\n    if (crtEnabled) {\r\n        messages = messageCount.root - member.msg_count_root;\r\n        mentions = member.mention_count_root;\r\n    } else {\r\n        mentions = member.mention_count;\r\n        messages = messageCount.total - member.msg_count;\r\n    }\r\n    if (member.urgent_mention_count) {\r\n        hasUrgent = true;\r\n    }\r\n\r\n    return {\r\n        showUnread: mentions > 0 || (!isChannelMuted(member) && messages > 0),\r\n        messages,\r\n        mentions,\r\n        hasUrgent,\r\n    };\r\n}\r\n","/**\r\n * Copyright (c) 2015-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n */\r\n\r\n/* eslint-disable header/header */\r\n\r\n/**\r\n * If your application is accepting different values for the same field over\r\n * time and is doing a diff on them, you can either (1) create a copy or\r\n * (2) ensure that those values are not mutated behind two passes.\r\n * This function helps you with (2) by freezing the object and throwing if\r\n * the user subsequently modifies the value.\r\n *\r\n * There are two caveats with this function:\r\n *   - If the call site is not in strict mode, it will only throw when\r\n *     mutating existing fields, adding a new one\r\n *     will unfortunately fail silently :(\r\n *   - If the object is already frozen or sealed, it will not continue the\r\n *     deep traversal and will leave leaf nodes unfrozen.\r\n *\r\n * Freezing the object and adding the throw mechanism is expensive and will\r\n * only be used in DEV.\r\n */\r\n\r\nexport default function deepFreezeAndThrowOnMutation(object: any): any {\r\n    // Some objects in IE11 don't have a hasOwnProperty method so don't even bother trying to freeze them\r\n\r\n    if (typeof object !== 'object' || object === null || Object.isFrozen(object) || Object.isSealed(object)) {\r\n        return object;\r\n    }\r\n\r\n    for (const key in object) {\r\n        if (Object.hasOwn(object, key)) {\r\n            object.__defineGetter__(key, identity.bind(null, object[key])); // eslint-disable-line no-underscore-dangle\r\n            object.__defineSetter__(key, throwOnImmutableMutation.bind(null, key)); // eslint-disable-line no-underscore-dangle\r\n        }\r\n    }\r\n\r\n    Object.freeze(object);\r\n    Object.seal(object);\r\n\r\n    for (const key in object) {\r\n        if (Object.hasOwn(object, key)) {\r\n            deepFreezeAndThrowOnMutation(object[key]);\r\n        }\r\n    }\r\n\r\n    return object;\r\n}\r\n\r\nfunction throwOnImmutableMutation(key: string, value: any) {\r\n    throw Error(\r\n        'You attempted to set the key `' + key + '` with the value `' +\r\n        JSON.stringify(value) + '` on an object that is meant to be immutable ' +\r\n        'and has been frozen.',\r\n    );\r\n}\r\n\r\nfunction identity(value: any): any {\r\n    return value;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Group} from '@mattermost/types/groups';\r\nimport {GroupSource, PluginGroupSourcePrefix} from '@mattermost/types/groups';\r\n\r\nimport {getSuggestionsSplitBy, getSuggestionsSplitByMultiple} from './user_utils';\r\n\r\nimport {General} from '../constants';\r\n\r\nexport function isSyncableSource(source: string): boolean {\r\n    return source.toLowerCase() === GroupSource.Ldap || source.toLowerCase().startsWith(PluginGroupSourcePrefix.Plugin);\r\n}\r\n\r\nexport function filterGroupsMatchingTerm(groups: Group[], term: string): Group[] {\r\n    const lowercasedTerm = term.toLowerCase();\r\n    let trimmedTerm = lowercasedTerm;\r\n    if (trimmedTerm.startsWith('@')) {\r\n        trimmedTerm = trimmedTerm.slice(1);\r\n    }\r\n\r\n    return groups.filter((group: Group) => {\r\n        if (!group) {\r\n            return false;\r\n        }\r\n\r\n        const groupSuggestions: string[] = [];\r\n\r\n        const groupnameSuggestions = getSuggestionsSplitByMultiple((group.name || '').toLowerCase(), General.AUTOCOMPLETE_SPLIT_CHARACTERS);\r\n        groupSuggestions.push(...groupnameSuggestions);\r\n\r\n        const suggestions = getSuggestionsSplitBy(group.display_name.toLowerCase(), ' ');\r\n        groupSuggestions.push(...suggestions);\r\n\r\n        return groupSuggestions.\r\n            filter((suggestion) => suggestion !== '').\r\n            some((suggestion) => suggestion.startsWith(trimmedTerm));\r\n    });\r\n}\r\n\r\nexport function sortGroups(groups: Group[] = [], locale: string = General.DEFAULT_LOCALE): Group[] {\r\n    return groups.sort((a, b) => {\r\n        if ((a.delete_at === 0 && b.delete_at === 0) || (a.delete_at > 0 && b.delete_at > 0)) {\r\n            return a.display_name.localeCompare(b.display_name, locale, {numeric: true});\r\n        }\r\n        if (a.delete_at < b.delete_at) {\r\n            return -1;\r\n        }\r\n        if (a.delete_at > b.delete_at) {\r\n            return 1;\r\n        }\r\n\r\n        return 0;\r\n    });\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport shallowEqual from 'shallow-equals';\r\n\r\nimport {createSelectorCreator, defaultMemoize} from 'mattermost-redux/selectors/create_selector';\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport function memoizeResult<F extends Function>(func: F, measure: Function | undefined = undefined): F {\r\n    let lastArgs: IArguments|null = null;\r\n    let lastResult: any = null;\r\n\r\n    // we reference arguments instead of spreading them for performance reasons\r\n    return function memoizedFunc() {\r\n        if (!shallowEqual(lastArgs, arguments)) { //eslint-disable-line prefer-rest-params\r\n            //eslint-disable-line prefer-rest-params\r\n            // apply arguments instead of spreading for performance.\r\n            const result = Reflect.apply(func, null, arguments); //eslint-disable-line prefer-rest-params\r\n            if (!shallowEqual(lastResult, result)) {\r\n                lastResult = result;\r\n            }\r\n        }\r\n\r\n        if (measure) {\r\n            measure();\r\n        }\r\n\r\n        lastArgs = arguments; //eslint-disable-line prefer-rest-params\r\n        return lastResult;\r\n    } as unknown as F;\r\n}\r\n\r\n// Use this selector when you want a shallow comparison of the arguments and you want to memoize the result\r\n// try and use this only when your selector returns an array of ids\r\nexport const createIdsSelector = createSelectorCreator(memoizeResult);\r\n\r\n// Use this selector when you want a shallow comparison of the arguments and you don't need to memoize the result\r\nexport const createShallowSelector = createSelectorCreator(defaultMemoize, shallowEqual as any);\r\n\r\n// isMinimumServerVersion will return true if currentVersion is equal to higher or than the\r\n// the provided minimum version. A non-equal major version will ignore minor and dot\r\n// versions, and a non-equal minor version will ignore dot version.\r\n// currentVersion is a string, e.g '4.6.0'\r\n// minMajorVersion, minMinorVersion, minDotVersion are integers\r\nexport const isMinimumServerVersion = (currentVersion: string, minMajorVersion = 0, minMinorVersion = 0, minDotVersion = 0): boolean => {\r\n    if (!currentVersion || typeof currentVersion !== 'string') {\r\n        return false;\r\n    }\r\n\r\n    const split = currentVersion.split('.');\r\n\r\n    const major = parseInt(split[0], 10);\r\n    const minor = parseInt(split[1] || '0', 10);\r\n    const dot = parseInt(split[2] || '0', 10);\r\n\r\n    if (major > minMajorVersion) {\r\n        return true;\r\n    }\r\n    if (major < minMajorVersion) {\r\n        return false;\r\n    }\r\n\r\n    // Major version is equal, check minor\r\n    if (minor > minMinorVersion) {\r\n        return true;\r\n    }\r\n    if (minor < minMinorVersion) {\r\n        return false;\r\n    }\r\n\r\n    // Minor version is equal, check dot\r\n    if (dot > minDotVersion) {\r\n        return true;\r\n    }\r\n    if (dot < minDotVersion) {\r\n        return false;\r\n    }\r\n\r\n    // Dot version is equal\r\n    return true;\r\n};\r\n\r\n// Generates a RFC-4122 version 4 compliant globally unique identifier.\r\nexport function generateId(): string {\r\n    // implementation taken from http://stackoverflow.com/a/2117523\r\n    let id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n    id = id.replace(/[xy]/g, (c) => {\r\n        const r = Math.floor(Math.random() * 16);\r\n        let v;\r\n\r\n        if (c === 'x') {\r\n            v = r;\r\n        } else {\r\n            // eslint-disable-next-line no-mixed-operators\r\n            v = r & 0x3 | 0x8;\r\n        }\r\n\r\n        return v.toString(16);\r\n    });\r\n    return id;\r\n}\r\n\r\nexport function isEmail(email: string): boolean {\r\n    // writing a regex to match all valid email addresses is really, really hard. (see http://stackoverflow.com/a/201378)\r\n    // this regex ensures:\r\n    // - at least one character that is not a space, comma, or @ symbol\r\n    // - followed by a single @ symbol\r\n    // - followed by at least one character that is not a space, comma, or @ symbol\r\n    // this prevents <Outlook Style> outlook.style@domain.com addresses and multiple comma-separated addresses from being accepted\r\n    return (/^[^ ,@]+@[^ ,@]+$/).test(email);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\ntype LocalizeFunc = (descriptor: {id: string; defaultMessage?: string}) => string;\r\n\r\nlet localizeFunction: LocalizeFunc;\r\n\r\nexport function setLocalizeFunction(func: LocalizeFunc) {\r\n    localizeFunction = func;\r\n}\r\n\r\nexport function localizeMessage(descriptor: {id: string; defaultMessage?: string}): string {\r\n    if (!localizeFunction) {\r\n        return descriptor.defaultMessage ?? '';\r\n    }\r\n\r\n    return localizeFunction(descriptor);\r\n}\r\n","/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n */\r\n/* eslint-disable header/header */\r\n\r\n/**\r\n * Constructs an enumeration with keys equal to their value.\r\n *\r\n * For example:\r\n *\r\n *   var COLORS = keyMirror({blue: null, red: null});\r\n *   var myColor = COLORS.blue;\r\n *   var isColorValid = !!COLORS[myColor];\r\n *\r\n * The last line could not be performed if the values of the generated enum were\r\n * not equal to their keys.\r\n *\r\n *   Input:  {key1: val1, key2: val2}\r\n *   Output: {key1: key1, key2: key2}\r\n *\r\n * @param {object} obj\r\n * @return {object}\r\n */\r\nexport default function keyMirror<T extends Record<string, unknown>>(obj: T): { [K in keyof T]: K } {\r\n    if (!(obj instanceof Object && !Array.isArray(obj))) {\r\n        throw new Error('keyMirror(...): Argument must be an object.');\r\n    }\r\n\r\n    const ret: any = {};\r\n    for (const key in obj) {\r\n        if (!Object.hasOwn(obj, key)) {\r\n            continue;\r\n        }\r\n\r\n        ret[key] = key;\r\n    }\r\n    return ret;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport moment from 'moment-timezone';\r\n\r\nimport type {ActivityEntry, Post} from '@mattermost/types/posts';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport {isStringArray, isArrayOf} from '@mattermost/types/utilities';\r\n\r\nimport {Posts} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {makeGetPostsForIds} from 'mattermost-redux/selectors/entities/posts';\r\nimport type {UserActivityPost} from 'mattermost-redux/selectors/entities/posts';\r\nimport {shouldShowJoinLeaveMessages} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {createIdsSelector, memoizeResult} from 'mattermost-redux/utils/helpers';\r\nimport {isUserActivityPost, shouldFilterJoinLeavePost, isFromWebhook, ensureString} from 'mattermost-redux/utils/post_utils';\r\nimport {getUserCurrentTimezone} from 'mattermost-redux/utils/timezone_utils';\r\n\r\nexport const COMBINED_USER_ACTIVITY = 'user-activity-';\r\nexport const CREATE_COMMENT = 'create-comment';\r\nexport const DATE_LINE = 'date-';\r\nexport const START_OF_NEW_MESSAGES = 'start-of-new-messages-';\r\nexport const MAX_COMBINED_SYSTEM_POSTS = 100;\r\n\r\ninterface PostFilterOptions {\r\n    postIds: string[];\r\n    lastViewedAt: number;\r\n    indicateNewMessages?: boolean;\r\n}\r\n\r\nexport function makePreparePostIdsForPostList() {\r\n    const filterPostsAndAddSeparators = makeFilterPostsAndAddSeparators();\r\n    const combineUserActivityPosts = makeCombineUserActivityPosts();\r\n    return (state: GlobalState, options: PostFilterOptions) => {\r\n        let postIds = filterPostsAndAddSeparators(state, options);\r\n        postIds = combineUserActivityPosts(state, postIds);\r\n        return postIds;\r\n    };\r\n}\r\n\r\n// Returns a selector that, given the state and an object containing an array of postIds and an optional\r\n// timestamp of when the channel was last read, returns a memoized array of postIds interspersed with\r\n// day indicators and an optional new message indicator.\r\nexport function makeFilterPostsAndAddSeparators() {\r\n    const getPostsForIds = makeGetPostsForIds();\r\n\r\n    return createIdsSelector(\r\n        'makeFilterPostsAndAddSeparators',\r\n        (state: GlobalState, {postIds}: PostFilterOptions) => getPostsForIds(state, postIds),\r\n        (state: GlobalState, {lastViewedAt}: PostFilterOptions) => lastViewedAt,\r\n        (state: GlobalState, {indicateNewMessages}: PostFilterOptions) => indicateNewMessages,\r\n        () => '', // This previously returned state.entities.posts.selectedPostId which stopped being set at some point\r\n        getCurrentUser,\r\n        shouldShowJoinLeaveMessages,\r\n        (posts, lastViewedAt, indicateNewMessages, selectedPostId, currentUser, showJoinLeave) => {\r\n            if (posts.length === 0 || !currentUser) {\r\n                return [];\r\n            }\r\n\r\n            const out: string[] = [];\r\n            let lastDate;\r\n            let addedNewMessagesIndicator = false;\r\n\r\n            // Iterating through the posts from oldest to newest\r\n            for (let i = posts.length - 1; i >= 0; i--) {\r\n                const post = posts[i];\r\n\r\n                if (\r\n                    !post ||\r\n                    (post.type === Posts.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL && !selectedPostId)\r\n                ) {\r\n                    continue;\r\n                }\r\n\r\n                // Filter out join/leave messages if necessary\r\n                if (shouldFilterJoinLeavePost(post, showJoinLeave, currentUser.username)) {\r\n                    continue;\r\n                }\r\n\r\n                lastDate = pushPostDateIfNeeded(post, currentUser, out, lastDate);\r\n\r\n                if (\r\n                    lastViewedAt &&\r\n                    post.create_at > lastViewedAt &&\r\n                    (post.user_id !== currentUser.id || isFromWebhook(post)) &&\r\n                    !addedNewMessagesIndicator &&\r\n                    indicateNewMessages\r\n                ) {\r\n                    out.push(START_OF_NEW_MESSAGES + lastViewedAt);\r\n                    addedNewMessagesIndicator = true;\r\n                }\r\n\r\n                out.push(post.id);\r\n            }\r\n\r\n            // Flip it back to newest to oldest\r\n            return out.reverse();\r\n        },\r\n    );\r\n}\r\n\r\nfunction pushPostDateIfNeeded(post: Post, currentUser: UserProfile, out: Array<Post|string>, lastDate?: Date) {\r\n    // Push on a date header if the last post was on a different day than the current one\r\n    const postDate = new Date(post.create_at);\r\n    const currentOffset = postDate.getTimezoneOffset() * 60 * 1000;\r\n    const timezone = getUserCurrentTimezone(currentUser.timezone);\r\n    if (timezone) {\r\n        const zone = moment.tz.zone(timezone);\r\n        if (zone) {\r\n            const timezoneOffset = zone.utcOffset(postDate.getTime()) * 60 * 1000;\r\n            postDate.setTime(postDate.getTime() + (currentOffset - timezoneOffset));\r\n        }\r\n    }\r\n\r\n    if (!lastDate || lastDate.toDateString() !== postDate.toDateString()) {\r\n        out.push(DATE_LINE + postDate.getTime());\r\n\r\n        return postDate;\r\n    }\r\n\r\n    return lastDate;\r\n}\r\n\r\nexport function makeAddDateSeparatorsForSearchResults() {\r\n    return createIdsSelector(\r\n        'makeAddDateSeparatorsForSearchResults',\r\n        (state: GlobalState, posts: Post[]) => posts,\r\n        getCurrentUser,\r\n        (posts, currentUser) => {\r\n            if (posts.length === 0 || !currentUser) {\r\n                return [];\r\n            }\r\n\r\n            const out: Array<Post|string> = [];\r\n            let lastDate;\r\n\r\n            for (const post of posts) {\r\n                lastDate = pushPostDateIfNeeded(post, currentUser, out, lastDate);\r\n\r\n                out.push(post);\r\n            }\r\n\r\n            return out;\r\n        },\r\n    );\r\n}\r\n\r\nexport function makeCombineUserActivityPosts() {\r\n    const getPostsForIds = makeGetPostsForIds();\r\n\r\n    return createIdsSelector(\r\n        'makeCombineUserActivityPosts',\r\n        (state: GlobalState, postIds: string[]) => postIds,\r\n        (state: GlobalState, postIds: string[]) => getPostsForIds(state, postIds),\r\n        (postIds, posts) => {\r\n            let lastPostIsUserActivity = false;\r\n            let combinedCount = 0;\r\n            const out: string[] = [];\r\n            let changed = false;\r\n\r\n            for (let i = 0; i < postIds.length; i++) {\r\n                const postId = postIds[i];\r\n\r\n                if (isStartOfNewMessages(postId) || isDateLine(postId) || isCreateComment(postId)) {\r\n                    // Not a post, so it won't be combined\r\n                    out.push(postId);\r\n\r\n                    lastPostIsUserActivity = false;\r\n                    combinedCount = 0;\r\n\r\n                    continue;\r\n                }\r\n\r\n                const post = posts[i];\r\n                const postIsUserActivity = isUserActivityPost(post.type);\r\n\r\n                if (postIsUserActivity && lastPostIsUserActivity && combinedCount < MAX_COMBINED_SYSTEM_POSTS) {\r\n                    // Add the ID to the previous combined post\r\n                    out[out.length - 1] += '_' + postId;\r\n\r\n                    combinedCount += 1;\r\n\r\n                    changed = true;\r\n                } else if (postIsUserActivity) {\r\n                    // Start a new combined post, even if the \"combined\" post is only a single post\r\n                    out.push(COMBINED_USER_ACTIVITY + postId);\r\n\r\n                    combinedCount = 1;\r\n\r\n                    changed = true;\r\n                } else {\r\n                    out.push(postId);\r\n\r\n                    combinedCount = 0;\r\n                }\r\n\r\n                lastPostIsUserActivity = postIsUserActivity;\r\n            }\r\n\r\n            if (!changed) {\r\n                // Nothing was combined, so return the original array\r\n                return postIds;\r\n            }\r\n\r\n            return out;\r\n        },\r\n    );\r\n}\r\n\r\nexport function isStartOfNewMessages(item: string) {\r\n    return item.startsWith(START_OF_NEW_MESSAGES);\r\n}\r\n\r\nexport function getTimestampForStartOfNewMessages(item: string) {\r\n    return parseInt(item.substring(START_OF_NEW_MESSAGES.length), 10);\r\n}\r\n\r\nexport function getNewMessagesIndex(postListIds: string[]): number {\r\n    return postListIds.findIndex(isStartOfNewMessages);\r\n}\r\n\r\nexport function isCreateComment(item: string) {\r\n    return item === CREATE_COMMENT;\r\n}\r\n\r\nexport function isDateLine(item: string) {\r\n    return item.startsWith(DATE_LINE);\r\n}\r\n\r\nexport function getDateForDateLine(item: string) {\r\n    return parseInt(item.substring(DATE_LINE.length), 10);\r\n}\r\n\r\nexport function isCombinedUserActivityPost(item: string) {\r\n    return (/^user-activity-(?:[^_]+_)*[^_]+$/).test(item);\r\n}\r\n\r\nexport function getPostIdsForCombinedUserActivityPost(item: string) {\r\n    return item.substring(COMBINED_USER_ACTIVITY.length).split('_');\r\n}\r\n\r\nexport function getFirstPostId(items: string[]) {\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n\r\n        if (isStartOfNewMessages(item) || isDateLine(item) || isCreateComment(item)) {\r\n            // This is not a post at all\r\n            continue;\r\n        }\r\n\r\n        if (isCombinedUserActivityPost(item)) {\r\n            // This is a combined post, so find the first post ID from it\r\n            const combinedIds = getPostIdsForCombinedUserActivityPost(item);\r\n\r\n            return combinedIds[0];\r\n        }\r\n\r\n        // This is a post ID\r\n        return item;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function getLastPostId(items: string[]) {\r\n    for (let i = items.length - 1; i >= 0; i--) {\r\n        const item = items[i];\r\n\r\n        if (isStartOfNewMessages(item) || isDateLine(item) || isCreateComment(item)) {\r\n            // This is not a post at all\r\n            continue;\r\n        }\r\n\r\n        if (isCombinedUserActivityPost(item)) {\r\n            // This is a combined post, so find the first post ID from it\r\n            const combinedIds = getPostIdsForCombinedUserActivityPost(item);\r\n\r\n            return combinedIds[combinedIds.length - 1];\r\n        }\r\n\r\n        // This is a post ID\r\n        return item;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function getLastPostIndex(postIds: string[]) {\r\n    let index = 0;\r\n    for (let i = postIds.length - 1; i > 0; i--) {\r\n        const item = postIds[i];\r\n        if (!isStartOfNewMessages(item) && !isDateLine(item) && !isCreateComment(item)) {\r\n            index = i;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return index;\r\n}\r\n\r\nexport function makeGenerateCombinedPost(): (state: GlobalState, combinedId: string) => UserActivityPost {\r\n    const getPostsForIds = makeGetPostsForIds();\r\n    const getPostIds = memoizeResult(getPostIdsForCombinedUserActivityPost);\r\n\r\n    return createSelector(\r\n        'makeGenerateCombinedPost',\r\n        (state: GlobalState, combinedId: string) => combinedId,\r\n        (state: GlobalState, combinedId: string) => getPostsForIds(state, getPostIds(combinedId)),\r\n        (combinedId, posts) => {\r\n            // All posts should be in the same channel\r\n            const channelId = posts[0].channel_id;\r\n\r\n            // Assume that the last post is the oldest one\r\n            const createAt = posts[posts.length - 1].create_at;\r\n            const messages = posts.map((post) => post.message);\r\n\r\n            return {\r\n                id: combinedId,\r\n                create_at: createAt,\r\n                update_at: 0,\r\n                edit_at: 0,\r\n                delete_at: 0,\r\n                is_pinned: false,\r\n                user_id: '',\r\n                channel_id: channelId,\r\n                root_id: '',\r\n                parent_id: '',\r\n                original_id: '',\r\n                message: messages.join('\\n'),\r\n                type: Posts.POST_TYPES.COMBINED_USER_ACTIVITY,\r\n                props: {\r\n                    messages,\r\n                    user_activity: combineUserActivitySystemPost(posts),\r\n                },\r\n                hashtags: '',\r\n                pending_post_id: '',\r\n                reply_count: 0,\r\n                metadata: {\r\n                    embeds: [],\r\n                    emojis: [],\r\n                    files: [],\r\n                    images: {},\r\n                    reactions: [],\r\n                },\r\n                system_post_ids: posts.map((post) => post.id),\r\n                user_activity_posts: posts,\r\n            };\r\n        },\r\n    );\r\n}\r\n\r\nexport function extractUserActivityData(userActivities: ActivityEntry[]) {\r\n    const messageData: MessageData[] = [];\r\n    const allUserIds: string[] = [];\r\n    const allUsernames: string[] = [];\r\n    userActivities.forEach((activity) => {\r\n        if (isUsersRelatedPost(activity.postType)) {\r\n            const {postType, actorId, userIds, usernames} = activity;\r\n            if (usernames && userIds) {\r\n                messageData.push({postType, userIds: [...userIds], actorId: actorId[0]});\r\n                if (userIds.length > 0) {\r\n                    allUserIds.push(...userIds.filter((userId) => userId));\r\n                }\r\n                if (usernames.length > 0) {\r\n                    allUsernames.push(...usernames.filter((username) => username));\r\n                }\r\n                allUserIds.push(actorId[0]);\r\n            }\r\n        } else {\r\n            const {postType, actorId} = activity;\r\n            const userIds = actorId;\r\n            messageData.push({postType, userIds});\r\n            allUserIds.push(...userIds);\r\n        }\r\n    });\r\n    function reduceUsers(acc: string[], curr: string) {\r\n        if (!acc.includes(curr)) {\r\n            acc.push(curr);\r\n        }\r\n        return acc;\r\n    }\r\n\r\n    return {\r\n        allUserIds: allUserIds.reduce(reduceUsers, []),\r\n        allUsernames: allUsernames.reduce(reduceUsers, []),\r\n        messageData,\r\n    };\r\n}\r\nfunction isUsersRelatedPost(postType: string) {\r\n    return (\r\n        postType === Posts.POST_TYPES.ADD_TO_TEAM ||\r\n        postType === Posts.POST_TYPES.ADD_TO_CHANNEL ||\r\n        postType === Posts.POST_TYPES.REMOVE_FROM_CHANNEL\r\n    );\r\n}\r\nfunction mergeLastSimilarPosts(userActivities: ActivityEntry[]) {\r\n    const prevPost = userActivities[userActivities.length - 1];\r\n    const prePrevPost = userActivities[userActivities.length - 2];\r\n    const prevPostType = prevPost && prevPost.postType;\r\n    const prePrevPostType = prePrevPost && prePrevPost.postType;\r\n\r\n    if (prevPostType === prePrevPostType) {\r\n        userActivities.pop();\r\n        prePrevPost.actorId.push(...prevPost.actorId);\r\n    }\r\n}\r\nfunction isSameActorsInUserActivities(prevActivity: ActivityEntry, curActivity: ActivityEntry) {\r\n    const prevPostActorsSet = new Set(prevActivity.actorId);\r\n    const currentPostActorsSet = new Set(curActivity.actorId);\r\n\r\n    if (prevPostActorsSet.size !== currentPostActorsSet.size) {\r\n        return false;\r\n    }\r\n    let hasAllActors = true;\r\n\r\n    currentPostActorsSet.forEach((actor) => {\r\n        if (!prevPostActorsSet.has(actor)) {\r\n            hasAllActors = false;\r\n        }\r\n    });\r\n    return hasAllActors;\r\n}\r\nexport function combineUserActivitySystemPost(systemPosts: Post[] = []): UserActivityProp | undefined {\r\n    if (systemPosts.length === 0) {\r\n        return undefined;\r\n    }\r\n    const userActivities: ActivityEntry[] = [];\r\n    systemPosts.reverse().forEach((post: Post) => {\r\n        const postType = post.type;\r\n        const actorId = post.user_id;\r\n\r\n        // When combining removed posts, the actorId does not need to be the same for each post.\r\n        // All removed posts will be combined regardless of their respective actorIds.\r\n        const isRemovedPost = post.type === Posts.POST_TYPES.REMOVE_FROM_CHANNEL;\r\n        const addedUserId = ensureString(post.props?.addedUserId);\r\n        const removedUserId = ensureString(post.props?.removedUserId);\r\n        const addedUsername = ensureString(post.props?.addedUsername);\r\n        const removedUsername = ensureString(post.props?.removedUsername);\r\n        const userId = isUsersRelatedPost(postType) ? addedUserId || removedUserId : '';\r\n        const username = isUsersRelatedPost(postType) ? addedUsername || removedUsername : '';\r\n        const prevPost = userActivities[userActivities.length - 1];\r\n        const isSamePostType = prevPost && prevPost.postType === post.type;\r\n        const isSameActor = prevPost && prevPost.actorId[0] === post.user_id;\r\n        const isJoinedPrevPost = prevPost && prevPost.postType === Posts.POST_TYPES.JOIN_CHANNEL;\r\n        const isLeftCurrentPost = post.type === Posts.POST_TYPES.LEAVE_CHANNEL;\r\n        const prePrevPost = userActivities[userActivities.length - 2];\r\n        const isJoinedPrePrevPost = prePrevPost && prePrevPost.postType === Posts.POST_TYPES.JOIN_CHANNEL;\r\n        const isLeftPrevPost = prevPost && prevPost.postType === Posts.POST_TYPES.LEAVE_CHANNEL;\r\n\r\n        if (prevPost && isSamePostType && (isSameActor || isRemovedPost)) {\r\n            prevPost.userIds.push(userId);\r\n            prevPost.usernames.push(username);\r\n        } else if (isSamePostType && !isSameActor && !isUsersRelatedPost(postType)) {\r\n            prevPost.actorId.push(actorId);\r\n            const isSameActors = (prePrevPost && isSameActorsInUserActivities(prePrevPost, prevPost));\r\n            if (isJoinedPrePrevPost && isLeftPrevPost && isSameActors) {\r\n                userActivities.pop();\r\n                prePrevPost.postType = Posts.POST_TYPES.JOIN_LEAVE_CHANNEL;\r\n                mergeLastSimilarPosts(userActivities);\r\n            }\r\n        } else if (isJoinedPrevPost && isLeftCurrentPost && prevPost.actorId.length === 1 && isSameActor) {\r\n            prevPost.postType = Posts.POST_TYPES.JOIN_LEAVE_CHANNEL;\r\n            mergeLastSimilarPosts(userActivities);\r\n        } else {\r\n            userActivities.push({\r\n                actorId: [actorId],\r\n                userIds: [userId],\r\n                usernames: [username],\r\n                postType,\r\n            });\r\n        }\r\n    });\r\n\r\n    return extractUserActivityData(userActivities);\r\n}\r\n\r\nexport type MessageData = {\r\n    actorId?: string;\r\n    postType: string;\r\n    userIds: string[];\r\n}\r\n\r\nfunction isMessageData(v: unknown): v is MessageData {\r\n    if (typeof v !== 'object' || !v) {\r\n        return false;\r\n    }\r\n\r\n    if ('actorId' in v && typeof v.actorId !== 'string') {\r\n        return false;\r\n    }\r\n\r\n    if (!('postType' in v) || typeof v.postType !== 'string') {\r\n        return false;\r\n    }\r\n\r\n    if (!('userIds' in v) || !isStringArray(v.userIds)) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\ntype UserActivityProp = {\r\n    allUserIds: string[];\r\n    allUsernames: string[];\r\n    messageData: MessageData[];\r\n}\r\n\r\nexport function isUserActivityProp(v: unknown): v is UserActivityProp {\r\n    if (typeof v !== 'object' || !v) {\r\n        return false;\r\n    }\r\n\r\n    if (!('allUserIds' in v) || !isStringArray(v.allUserIds)) {\r\n        return false;\r\n    }\r\n\r\n    if (!('allUsernames' in v) || !isStringArray(v.allUsernames)) {\r\n        return false;\r\n    }\r\n\r\n    if (!('messageData' in v) || !isArrayOf(v.messageData, isMessageData)) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {Post, PostType, PostMetadata, PostEmbed} from '@mattermost/types/posts';\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {haveIChannelPermission} from 'mattermost-redux/selectors/entities/roles';\r\n\r\nimport {Posts, Preferences, Permissions} from '../constants';\r\n\r\nexport function isSystemMessage(post: Post): boolean {\r\n    return Boolean(post.type && post.type.startsWith(Posts.SYSTEM_MESSAGE_PREFIX));\r\n}\r\n\r\nexport function isMeMessage(post: Post): boolean {\r\n    return Boolean(post.type && post.type === Posts.POST_TYPES.ME);\r\n}\r\n\r\nexport function isFromWebhook(post: Post): boolean {\r\n    return post.props?.from_webhook === 'true';\r\n}\r\n\r\nexport function isPostEphemeral(post: Post): boolean {\r\n    return post.type === Posts.POST_TYPES.EPHEMERAL || post.type === Posts.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL || post.state === Posts.POST_DELETED;\r\n}\r\n\r\nexport function isUserAddedInChannel(post: Post, userId?: UserProfile['id']): boolean {\r\n    const postTypeCheck = Boolean(post.type && (post.type === Posts.POST_TYPES.ADD_TO_CHANNEL));\r\n    const userIdCheck = Boolean(post.props && post.props.addedUserId && (post.props.addedUserId === userId));\r\n    return postTypeCheck && userIdCheck;\r\n}\r\n\r\nexport function shouldIgnorePost(post: Post, userId?: UserProfile['id']): boolean {\r\n    if (isUserAddedInChannel(post, userId)) {\r\n        return false;\r\n    }\r\n    return Posts.IGNORE_POST_TYPES.includes(post.type);\r\n}\r\n\r\nexport function isUserActivityPost(postType: PostType): boolean {\r\n    return Posts.USER_ACTIVITY_POST_TYPES.includes(postType);\r\n}\r\n\r\nexport function isPostOwner(userId: UserProfile['id'], post: Post) {\r\n    return userId === post.user_id;\r\n}\r\n\r\nexport function isEdited(post: Post): boolean {\r\n    return post.edit_at > 0;\r\n}\r\n\r\nexport function canEditPost(state: GlobalState, config: any, license: any, teamId: Team['id'], channelId: Channel['id'], userId: UserProfile['id'], post: Post): boolean {\r\n    if (!post || isSystemMessage(post)) {\r\n        return false;\r\n    }\r\n\r\n    const isOwner = isPostOwner(userId, post);\r\n    let canEdit = true;\r\n\r\n    const permission = isOwner ? Permissions.EDIT_POST : Permissions.EDIT_OTHERS_POSTS;\r\n    canEdit = haveIChannelPermission(state, teamId, channelId, permission);\r\n    if (license.IsLicensed === 'true' && config.PostEditTimeLimit !== '-1' && config.PostEditTimeLimit !== -1) {\r\n        const timeLeft = (post.create_at + (config.PostEditTimeLimit * 1000)) - Date.now();\r\n        if (timeLeft <= 0) {\r\n            canEdit = false;\r\n        }\r\n    }\r\n\r\n    return canEdit;\r\n}\r\n\r\nexport function getLastCreateAt(postsArray: Post[]): number {\r\n    const createAt = postsArray.map((p) => p.create_at);\r\n\r\n    if (createAt.length) {\r\n        return Reflect.apply(Math.max, null, createAt);\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nconst joinLeavePostTypes = [\r\n    Posts.POST_TYPES.JOIN_LEAVE,\r\n    Posts.POST_TYPES.JOIN_CHANNEL,\r\n    Posts.POST_TYPES.LEAVE_CHANNEL,\r\n    Posts.POST_TYPES.ADD_REMOVE,\r\n    Posts.POST_TYPES.ADD_TO_CHANNEL,\r\n    Posts.POST_TYPES.REMOVE_FROM_CHANNEL,\r\n    Posts.POST_TYPES.JOIN_TEAM,\r\n    Posts.POST_TYPES.LEAVE_TEAM,\r\n    Posts.POST_TYPES.ADD_TO_TEAM,\r\n    Posts.POST_TYPES.REMOVE_FROM_TEAM,\r\n    Posts.POST_TYPES.COMBINED_USER_ACTIVITY,\r\n];\r\n\r\n/**\r\n * If the user has \"Show Join/Leave Messages\" disabled, this function will return true if the post should be hidden if it's of type join/leave.\r\n * The post object passed in must be not null/undefined.\r\n * @returns Returns true if a post should be hidden\r\n */\r\nexport function shouldFilterJoinLeavePost(post: Post, showJoinLeave: boolean, currentUsername: string): boolean {\r\n    if (showJoinLeave) {\r\n        return false;\r\n    }\r\n\r\n    // Don't filter out non-join/leave messages\r\n    if (joinLeavePostTypes.indexOf(post.type) === -1) {\r\n        return false;\r\n    }\r\n\r\n    // Don't filter out join/leave messages about the current user\r\n    return !isJoinLeavePostForUsername(post, currentUsername);\r\n}\r\n\r\nfunction isJoinLeavePostForUsername(post: Post, currentUsername: string): boolean {\r\n    if (!post.props || !currentUsername) {\r\n        return false;\r\n    }\r\n\r\n    if (post.user_activity_posts) {\r\n        for (const childPost of post.user_activity_posts) {\r\n            if (isJoinLeavePostForUsername(childPost, currentUsername)) {\r\n                // If any of the contained posts are for this user, the client will\r\n                // need to figure out how to render the post\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return post.props.username === currentUsername ||\r\n        post.props.addedUsername === currentUsername ||\r\n        post.props.removedUsername === currentUsername;\r\n}\r\n\r\nexport function isPostPendingOrFailed(post: Post): boolean {\r\n    return post.failed || post.id === post.pending_post_id;\r\n}\r\n\r\nexport function comparePosts(a: Post, b: Post): number {\r\n    const aIsPendingOrFailed = isPostPendingOrFailed(a);\r\n    const bIsPendingOrFailed = isPostPendingOrFailed(b);\r\n    if (aIsPendingOrFailed && !bIsPendingOrFailed) {\r\n        return -1;\r\n    } else if (!aIsPendingOrFailed && bIsPendingOrFailed) {\r\n        return 1;\r\n    }\r\n\r\n    if (a.create_at > b.create_at) {\r\n        return -1;\r\n    } else if (a.create_at < b.create_at) {\r\n        return 1;\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nexport function isPostCommentMention({post, currentUser, threadRepliedToByCurrentUser, rootPost}: {post: Post; currentUser: UserProfile; threadRepliedToByCurrentUser: boolean; rootPost: Post}): boolean {\r\n    let commentsNotifyLevel = Preferences.COMMENTS_NEVER;\r\n    let isCommentMention = false;\r\n    let threadCreatedByCurrentUser = false;\r\n\r\n    if (rootPost && rootPost.user_id === currentUser.id) {\r\n        threadCreatedByCurrentUser = true;\r\n    }\r\n    if (currentUser.notify_props && currentUser.notify_props.comments) {\r\n        commentsNotifyLevel = currentUser.notify_props.comments;\r\n    }\r\n\r\n    const notCurrentUser = post.user_id !== currentUser.id || isFromWebhook(post);\r\n    if (notCurrentUser) {\r\n        if (commentsNotifyLevel === Preferences.COMMENTS_ANY && (threadCreatedByCurrentUser || threadRepliedToByCurrentUser)) {\r\n            isCommentMention = true;\r\n        } else if (commentsNotifyLevel === Preferences.COMMENTS_ROOT && threadCreatedByCurrentUser) {\r\n            isCommentMention = true;\r\n        }\r\n    }\r\n    return isCommentMention;\r\n}\r\n\r\nexport function fromAutoResponder(post: Post): boolean {\r\n    return Boolean(post.type && (post.type === Posts.SYSTEM_AUTO_RESPONDER));\r\n}\r\n\r\nexport function getEmbedFromMetadata(metadata: PostMetadata): PostEmbed | null {\r\n    if (!metadata || !metadata.embeds || metadata.embeds.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return metadata.embeds[0];\r\n}\r\n\r\nexport function isPermalink(post: Post) {\r\n    if (post.metadata && post.metadata.embeds) {\r\n        for (const embed of post.metadata.embeds) {\r\n            if (embed.type === 'permalink') {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function shouldUpdatePost(receivedPost: Post, storedPost?: Post): boolean {\r\n    if (!storedPost) {\r\n        return true;\r\n    }\r\n\r\n    if (storedPost.update_at > receivedPost.update_at) {\r\n        // The stored post is newer than the one we've received\r\n        return false;\r\n    }\r\n\r\n    if (\r\n        storedPost.update_at && receivedPost.update_at &&\r\n        storedPost.update_at === receivedPost.update_at\r\n    ) {\r\n        // The stored post has the same update at with the one we've received\r\n        if (\r\n            storedPost.is_following !== receivedPost.is_following ||\r\n            storedPost.reply_count !== receivedPost.reply_count ||\r\n            storedPost.participants?.length !== receivedPost.participants?.length\r\n        ) {\r\n            // CRT properties are not the same between posts\r\n            // e.g: in the case of toggling CRT on/off\r\n            return true;\r\n        }\r\n\r\n        if (!storedPost.metadata && receivedPost.metadata) {\r\n            // Metadata is not the same between posts\r\n            return true;\r\n        }\r\n\r\n        // The stored post is the same as the one we've received\r\n        return false;\r\n    }\r\n\r\n    // The stored post is older than the one we've received\r\n    return true;\r\n}\r\n\r\nexport function ensureString(v: unknown) {\r\n    return typeof v === 'string' ? v : '';\r\n}\r\n\r\nexport function ensureNumber(v: unknown) {\r\n    return typeof v === 'number' ? v : 0;\r\n}\r\n\r\nexport function secureGetFromRecord<T>(v: Record<string, T> | undefined, key: string) {\r\n    return typeof v === 'object' && v && Object.hasOwn(v, key) ? v[key] : undefined;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\n\r\nexport function getPreferenceKey(category: string, name: string): string {\r\n    return `${category}--${name}`;\r\n}\r\n\r\nexport function getPreferencesByCategory(myPreferences: PreferencesType, category: string): Map<string, any> {\r\n    const prefix = `${category}--`;\r\n    const preferences = new Map();\r\n    Object.keys(myPreferences).forEach((key) => {\r\n        if (key.startsWith(prefix)) {\r\n            preferences.set(key.substring(prefix.length), myPreferences[key]);\r\n        }\r\n    });\r\n\r\n    return preferences;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Team} from '@mattermost/types/teams';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport {General} from '../constants';\r\n\r\nexport function teamListToMap(teamList: Team[]): IDMappedObjects<Team> {\r\n    const teams: Record<string, Team> = {};\r\n    for (let i = 0; i < teamList.length; i++) {\r\n        teams[teamList[i].id] = teamList[i];\r\n    }\r\n    return teams;\r\n}\r\n\r\nexport function sortTeamsWithLocale(locale: string): (a: Team, b: Team) => number {\r\n    return (a: Team, b: Team): number => {\r\n        if (a.display_name !== b.display_name) {\r\n            return a.display_name.toLowerCase().localeCompare(b.display_name.toLowerCase(), locale || General.DEFAULT_LOCALE, {numeric: true});\r\n        }\r\n\r\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase(), locale || General.DEFAULT_LOCALE, {numeric: true});\r\n    };\r\n}\r\n\r\nexport function filterTeamsStartingWithTerm(teams: Team[], term: string): Team[] {\r\n    const lowercasedTerm = term.toLowerCase();\r\n\r\n    return teams.filter((team: Team) => {\r\n        if (!team) {\r\n            return false;\r\n        }\r\n\r\n        const name = team.name?.toLowerCase();\r\n        const displayName = team.display_name?.toLowerCase();\r\n\r\n        return name.startsWith(lowercasedTerm) ||\r\n            displayName.startsWith(lowercasedTerm);\r\n    });\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {Timezone} from 'timezones.json';\r\n\r\nimport type {UserTimezone} from '@mattermost/types/users';\r\n\r\nexport function getUserCurrentTimezone(userTimezone?: UserTimezone): string {\r\n    if (!userTimezone) {\r\n        return 'UTC';\r\n    }\r\n    const {\r\n        useAutomaticTimezone,\r\n        automaticTimezone,\r\n        manualTimezone,\r\n    } = userTimezone;\r\n\r\n    let useAutomatic = useAutomaticTimezone;\r\n    if (typeof useAutomaticTimezone === 'string') {\r\n        useAutomatic = useAutomaticTimezone === 'true';\r\n    }\r\n\r\n    if (useAutomatic) {\r\n        return automaticTimezone || 'UTC';\r\n    }\r\n    return manualTimezone || 'UTC';\r\n}\r\n\r\nexport function getTimezoneRegion(timezone: string): string {\r\n    if (timezone) {\r\n        const split = timezone.split('/');\r\n        if (split.length > 1) {\r\n            return split.pop()!.replace(/_/g, ' ');\r\n        }\r\n    }\r\n\r\n    return timezone;\r\n}\r\n\r\nexport function getTimezoneLabel(timezones: Timezone[], timezone: string): string {\r\n    for (let i = 0; i < timezones.length; i++) {\r\n        const zone = timezones[i];\r\n        for (let j = 0; j < zone.utc.length; j++) {\r\n            const utcZone = zone.utc[j];\r\n            if (utcZone.toLowerCase() === timezone.toLowerCase()) {\r\n                return zone.text;\r\n            }\r\n        }\r\n    }\r\n    return timezone;\r\n}\r\n\r\nexport function getDateForTimezone(date: Date|string, tzString: string): Date {\r\n    return new Date((typeof date === 'string' ? new Date(date) : date).toLocaleString('en-US', {timeZone: tzString}));\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ChannelMembership} from '@mattermost/types/channels';\r\nimport type {TeamMembership} from '@mattermost/types/teams';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport {localizeMessage} from 'mattermost-redux/utils/i18n_utils';\r\n\r\nimport {General, Preferences} from '../constants';\r\n\r\nexport function getFullName(user: UserProfile): string {\r\n    if (user.first_name && user.last_name) {\r\n        return user.first_name + ' ' + user.last_name;\r\n    } else if (user.first_name) {\r\n        return user.first_name;\r\n    } else if (user.last_name) {\r\n        return user.last_name;\r\n    }\r\n\r\n    return '';\r\n}\r\n\r\nexport function displayUsername(\r\n    user: UserProfile | null | undefined,\r\n    teammateNameDisplay: string,\r\n    useFallbackUsername = true,\r\n): string {\r\n    let name = useFallbackUsername ? localizeMessage({id: 'channel_loader.someone', defaultMessage: 'Someone'}) : '';\r\n    if (user) {\r\n        if (teammateNameDisplay === Preferences.DISPLAY_PREFER_NICKNAME) {\r\n            name = user.nickname || getFullName(user);\r\n        } else if (teammateNameDisplay === Preferences.DISPLAY_PREFER_FULL_NAME) {\r\n            name = getFullName(user);\r\n        } else {\r\n            name = (user.remote_id && user.props?.RemoteUsername) ? user.props.RemoteUsername : user.username;\r\n        }\r\n\r\n        if (!name || name.trim().length === 0) {\r\n            name = user.username;\r\n        }\r\n    }\r\n\r\n    return name;\r\n}\r\n\r\nexport function spaceSeparatedStringIncludes(item: string, spaceSeparated?: string): boolean {\r\n    if (spaceSeparated) {\r\n        const items = spaceSeparated?.split(' ');\r\n        return items.includes(item);\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function isAdmin(roles: string): boolean {\r\n    return isSystemAdmin(roles) || isTeamAdmin(roles);\r\n}\r\n\r\nexport function isGuest(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes('system_guest', roles);\r\n}\r\n\r\nexport function isTeamAdmin(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.TEAM_ADMIN_ROLE, roles);\r\n}\r\n\r\nexport function isSystemAdmin(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.SYSTEM_ADMIN_ROLE, roles);\r\n}\r\n\r\nexport function includesAnAdminRole(roles: string): boolean {\r\n    const rolesArray = roles.split(' ');\r\n    return [\r\n        General.SYSTEM_ADMIN_ROLE,\r\n        General.SYSTEM_USER_MANAGER_ROLE,\r\n        General.SYSTEM_READ_ONLY_ADMIN_ROLE,\r\n        General.SYSTEM_MANAGER_ROLE,\r\n    ].some((el) => rolesArray.includes(el));\r\n}\r\n\r\nexport function isChannelAdmin(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.CHANNEL_ADMIN_ROLE, roles);\r\n}\r\n\r\nexport function hasUserAccessTokenRole(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.SYSTEM_USER_ACCESS_TOKEN_ROLE, roles);\r\n}\r\n\r\nexport function hasPostAllRole(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.SYSTEM_POST_ALL_ROLE, roles);\r\n}\r\n\r\nexport function hasPostAllPublicRole(roles: string): boolean {\r\n    return spaceSeparatedStringIncludes(General.SYSTEM_POST_ALL_PUBLIC_ROLE, roles);\r\n}\r\n\r\nexport function profileListToMap(profileList: UserProfile[]): IDMappedObjects<UserProfile> {\r\n    const profiles: Record<string, UserProfile> = {};\r\n    for (let i = 0; i < profileList.length; i++) {\r\n        profiles[profileList[i].id] = profileList[i];\r\n    }\r\n    return profiles;\r\n}\r\n\r\nexport function removeUserFromList(userId: UserProfile['id'], list: UserProfile[]): UserProfile[] {\r\n    for (let i = list.length - 1; i >= 0; i--) {\r\n        if (list[i].id === userId) {\r\n            list.splice(i, 1);\r\n            return list;\r\n        }\r\n    }\r\n\r\n    return list;\r\n}\r\n\r\n// Splits the term by a splitStr and composes a list of the parts of\r\n// the split concatenated with the rest, forming a set of suggesitons\r\n// matchable with startsWith\r\n//\r\n// E.g.: for \"one.two.three\" by \".\" it would yield\r\n// [\"one.two.three\", \".two.three\", \"two.three\", \".three\", \"three\"]\r\nexport function getSuggestionsSplitBy(term: string, splitStr: string): string[] {\r\n    const splitTerm = term.split(splitStr);\r\n    const initialSuggestions = splitTerm.map((st, i) => splitTerm.slice(i).join(splitStr));\r\n    let suggestions: string[] = [];\r\n\r\n    if (splitStr === ' ') {\r\n        suggestions = initialSuggestions;\r\n    } else {\r\n        suggestions = initialSuggestions.reduce((acc, val) => {\r\n            if (acc.length === 0) {\r\n                acc.push(val);\r\n            } else {\r\n                acc.push(splitStr + val, val);\r\n            }\r\n            return acc;\r\n        }, [] as string[]);\r\n    }\r\n    return suggestions;\r\n}\r\n\r\nexport function getSuggestionsSplitByMultiple(term: string, splitStrs: string[]): string[] {\r\n    const suggestions = splitStrs.reduce((acc, val) => {\r\n        getSuggestionsSplitBy(term, val).forEach((suggestion) => acc.add(suggestion));\r\n        return acc;\r\n    }, new Set<string>());\r\n\r\n    return [...suggestions];\r\n}\r\n\r\nexport function nameSuggestionsForUser(user: UserProfile, includeFullEmail = false): string[] {\r\n    const profileSuggestions: string[] = [];\r\n    const usernameSuggestions = getSuggestionsSplitByMultiple((user.username || '').toLowerCase(), General.AUTOCOMPLETE_SPLIT_CHARACTERS);\r\n    profileSuggestions.push(...usernameSuggestions);\r\n    const first = (user.first_name || '').toLowerCase();\r\n    const last = (user.last_name || '').toLowerCase();\r\n    const full = first + ' ' + last;\r\n    profileSuggestions.push(first, last, full);\r\n    profileSuggestions.push((user.nickname || '').toLowerCase());\r\n    const positionSuggestions = getSuggestionsSplitBy((user.position || '').toLowerCase(), ' ');\r\n    profileSuggestions.push(...positionSuggestions);\r\n    const email = (user.email || '').toLowerCase();\r\n    const emailPrefix = email.split('@')[0];\r\n    profileSuggestions.push(emailPrefix);\r\n\r\n    // Only include full email if explicitly requested (when search contains @)\r\n    if (includeFullEmail && email.includes('@')) {\r\n        profileSuggestions.push(email);\r\n    }\r\n\r\n    return profileSuggestions;\r\n}\r\n\r\nexport function filterProfilesStartingWithTerm(users: UserProfile[], term: string): UserProfile[] {\r\n    const lowercasedTerm = term.toLowerCase();\r\n    let trimmedTerm = lowercasedTerm;\r\n    if (trimmedTerm.startsWith('@')) {\r\n        trimmedTerm = trimmedTerm.substr(1);\r\n    }\r\n\r\n    // Include full email in suggestions if the search term contains @\r\n    const includeFullEmail = lowercasedTerm.includes('@');\r\n\r\n    return users.filter((user: UserProfile) => {\r\n        if (!user) {\r\n            return false;\r\n        }\r\n\r\n        const profileSuggestions = nameSuggestionsForUser(user, includeFullEmail);\r\n        return profileSuggestions.filter((suggestion) => suggestion !== '').some((suggestion) => suggestion.startsWith(trimmedTerm));\r\n    });\r\n}\r\n\r\nexport function filterProfilesMatchingWithTerm(users: UserProfile[], term: string): UserProfile[] {\r\n    const lowercasedTerm = term.toLowerCase();\r\n    let trimmedTerm = lowercasedTerm;\r\n    if (trimmedTerm.startsWith('@')) {\r\n        trimmedTerm = trimmedTerm.substr(1);\r\n    }\r\n\r\n    // Include full email in suggestions if the search term contains @\r\n    const includeFullEmail = lowercasedTerm.includes('@');\r\n\r\n    return users.filter((user: UserProfile) => {\r\n        if (!user) {\r\n            return false;\r\n        }\r\n\r\n        const profileSuggestions = nameSuggestionsForUser(user, includeFullEmail);\r\n        return profileSuggestions.filter((suggestion) => suggestion !== '').some((suggestion) => suggestion.includes(trimmedTerm));\r\n    });\r\n}\r\n\r\nexport function sortByUsername(a: UserProfile, b: UserProfile): number {\r\n    const nameA = a.username;\r\n    const nameB = b.username;\r\n\r\n    return nameA.localeCompare(nameB);\r\n}\r\n\r\nfunction checkUserHasRole(user: UserProfile, userIsNotAdminOrGuest: boolean, membership: TeamMembership | ChannelMembership | undefined, role: string) {\r\n    const isSystemRole = role.includes('system');\r\n    return (\r\n        (\r\n\r\n            // If role is system user then user cannot have system admin or system guest roles\r\n            isSystemRole && user.roles.includes(role) && (\r\n                (role === General.SYSTEM_USER_ROLE && userIsNotAdminOrGuest) ||\r\n                role !== General.SYSTEM_USER_ROLE\r\n            )\r\n        ) || (\r\n\r\n            // If user is a system admin or a system guest then ignore team and channel memberships\r\n            !isSystemRole && userIsNotAdminOrGuest && (\r\n                (role === General.TEAM_ADMIN_ROLE && membership?.scheme_admin) ||\r\n                (role === General.CHANNEL_ADMIN_ROLE && membership?.scheme_admin) ||\r\n                (role === General.TEAM_USER_ROLE && membership?.scheme_user && !membership?.scheme_admin) ||\r\n                (role === General.CHANNEL_USER_ROLE && membership?.scheme_user && !membership?.scheme_admin)\r\n            )\r\n        )\r\n    );\r\n}\r\n\r\nexport function applyRolesFilters(user: UserProfile, filterRoles: string[], excludeRoles: string[], membership: TeamMembership | ChannelMembership | undefined): boolean {\r\n    const userIsNotAdminOrGuest = !(user.roles.includes(General.SYSTEM_ADMIN_ROLE) || user.roles.includes(General.SYSTEM_GUEST_ROLE));\r\n    const userHasExcludedRole = excludeRoles.some(checkUserHasRole.bind(null, user, userIsNotAdminOrGuest, membership));\r\n    if (userHasExcludedRole) {\r\n        return false;\r\n    }\r\n    return filterRoles.length === 0 || filterRoles.some(checkUserHasRole.bind(null, user, userIsNotAdminOrGuest, membership));\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {\r\n    BasePluginConfigurationSetting,\r\n    PluginConfiguration,\r\n    PluginConfigurationAction,\r\n    PluginConfigurationRadioSetting,\r\n    PluginConfigurationRadioSettingOption,\r\n    PluginConfigurationSection,\r\n    PluginConfigurationCustomSetting,\r\n    PluginCustomSettingComponent,\r\n} from 'types/plugins/user_settings';\r\n\r\nexport function extractPluginConfiguration(pluginConfiguration: unknown, pluginId: string) {\r\n    if (!pluginConfiguration) {\r\n        return undefined;\r\n    }\r\n\r\n    if (typeof pluginConfiguration !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('uiName' in pluginConfiguration) || !pluginConfiguration.uiName || typeof pluginConfiguration.uiName !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    let icon;\r\n    if ('icon' in pluginConfiguration && pluginConfiguration.icon) {\r\n        if (typeof pluginConfiguration.icon === 'string') {\r\n            icon = pluginConfiguration.icon;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    if (!('sections' in pluginConfiguration) || !Array.isArray(pluginConfiguration.sections)) {\r\n        return undefined;\r\n    }\r\n\r\n    if (!pluginConfiguration.sections.length) {\r\n        return undefined;\r\n    }\r\n\r\n    let action;\r\n    if ('action' in pluginConfiguration && pluginConfiguration.action) {\r\n        action = extractPluginConfigurationAction(pluginConfiguration.action);\r\n    }\r\n\r\n    const result: PluginConfiguration = {\r\n        id: pluginId,\r\n        icon,\r\n        sections: [],\r\n        uiName: pluginConfiguration.uiName,\r\n        action,\r\n    };\r\n\r\n    for (const section of pluginConfiguration.sections) {\r\n        const validSections = extractPluginConfigurationSection(section, pluginId);\r\n        if (validSections) {\r\n            result.sections.push(validSections);\r\n        } else {\r\n            // eslint-disable-next-line no-console\r\n            console.warn(`Plugin ${pluginId} is trying to register an invalid configuration section. Contact the plugin developer to fix this issue.`);\r\n        }\r\n    }\r\n\r\n    if (!result.sections.length) {\r\n        return undefined;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction extractPluginConfigurationAction(action: unknown): PluginConfigurationAction | undefined {\r\n    if (!action) {\r\n        return undefined;\r\n    }\r\n\r\n    if (typeof action !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('title' in action) || !action.title || typeof action.title !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('text' in action) || !action.text || typeof action.text !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('buttonText' in action) || !action.buttonText || typeof action.buttonText !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('onClick' in action) || !action.onClick || typeof action.onClick !== 'function') {\r\n        return undefined;\r\n    }\r\n\r\n    return {\r\n        title: action.title,\r\n        text: action.text,\r\n        buttonText: action.buttonText,\r\n        onClick: action.onClick as PluginConfigurationAction['onClick'],\r\n    };\r\n}\r\n\r\nfunction extractPluginConfigurationSection(section: unknown, pluginId: string) {\r\n    if (!section) {\r\n        return undefined;\r\n    }\r\n\r\n    if (typeof section !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('title' in section) || !section.title || typeof section.title !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if ('component' in section) {\r\n        if (!section.component || typeof section.component !== 'function') {\r\n            return undefined;\r\n        }\r\n\r\n        try {\r\n            const Component = section.component;\r\n            if (!React.isValidElement((<Component/>))) {\r\n                return undefined;\r\n            }\r\n        } catch {\r\n            return undefined;\r\n        }\r\n\r\n        return {\r\n            title: section.title,\r\n            component: section.component as React.ComponentType,\r\n        };\r\n    }\r\n\r\n    if (!('settings' in section) || !Array.isArray(section.settings)) {\r\n        return undefined;\r\n    }\r\n\r\n    if (!section.settings.length) {\r\n        return undefined;\r\n    }\r\n\r\n    let onSubmit;\r\n    if ('onSubmit' in section && section.onSubmit) {\r\n        if (typeof section.onSubmit === 'function') {\r\n            onSubmit = section.onSubmit as PluginConfigurationSection['onSubmit'];\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    let disabled;\r\n    if ('disabled' in section && section.disabled) {\r\n        if (typeof section.disabled === 'boolean') {\r\n            disabled = section.disabled;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    const result: PluginConfigurationSection = {\r\n        settings: [],\r\n        title: section.title,\r\n        disabled,\r\n        onSubmit,\r\n    };\r\n\r\n    for (const setting of section.settings) {\r\n        const validSetting = extractPluginConfigurationSetting(setting);\r\n        if (validSetting) {\r\n            result.settings.push(validSetting);\r\n        } else {\r\n            // eslint-disable-next-line no-console\r\n            console.warn(`Plugin ${pluginId} is trying to register an invalid configuration section setting. Contact the plugin developer to fix this issue.`);\r\n        }\r\n    }\r\n\r\n    if (!result.settings.length) {\r\n        return undefined;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nfunction extractPluginConfigurationSetting(setting: unknown) {\r\n    if (!setting || typeof setting !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('name' in setting) || !setting.name || typeof setting.name !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    let title;\r\n    if (('title' in setting) && setting.title) {\r\n        if (typeof setting.title === 'string') {\r\n            title = setting.title;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    let helpText;\r\n    if ('helpText' in setting && setting.helpText) {\r\n        if (typeof setting.helpText === 'string') {\r\n            helpText = setting.helpText;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    let defaultValue;\r\n    if ('default' in setting && setting.default) {\r\n        if (typeof setting.default === 'string') {\r\n            defaultValue = setting.default;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    if (!('type' in setting) || !setting.type || typeof setting.type !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    const res: BasePluginConfigurationSetting = {\r\n        default: defaultValue,\r\n        name: setting.name,\r\n        title,\r\n        helpText,\r\n    };\r\n\r\n    switch (setting.type) {\r\n    case 'radio':\r\n        return extractPluginConfigurationRadioSetting(setting, res);\r\n    case 'custom':\r\n        return extractPluginConfigurationCustomSetting(setting, res);\r\n    default:\r\n        return undefined;\r\n    }\r\n}\r\n\r\nfunction extractPluginConfigurationCustomSetting(setting: unknown, base: BasePluginConfigurationSetting) {\r\n    if (!setting || typeof setting !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('component' in setting) || !setting.component || typeof setting.component !== 'function') {\r\n        return undefined;\r\n    }\r\n\r\n    try {\r\n        const Component = setting.component;\r\n        if (!React.isValidElement((<Component/>))) {\r\n            return undefined;\r\n        }\r\n    } catch {\r\n        return undefined;\r\n    }\r\n\r\n    const res: PluginConfigurationCustomSetting = {\r\n        ...base,\r\n        type: 'custom',\r\n        component: setting.component as PluginCustomSettingComponent,\r\n    };\r\n\r\n    return res;\r\n}\r\n\r\nfunction extractPluginConfigurationRadioSetting(setting: unknown, base: BasePluginConfigurationSetting) {\r\n    if (!setting || typeof setting !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('default' in setting) || !setting.default || typeof setting.default !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('options' in setting) || !Array.isArray(setting.options)) {\r\n        return undefined;\r\n    }\r\n\r\n    const res: PluginConfigurationRadioSetting = {\r\n        ...base,\r\n        type: 'radio',\r\n        default: setting.default,\r\n        options: [],\r\n    };\r\n\r\n    for (const option of setting.options) {\r\n        const isValid = extractValidRadioOption(option);\r\n        if (isValid) {\r\n            res.options.push(isValid);\r\n        }\r\n    }\r\n\r\n    if (!res.options.length) {\r\n        return undefined;\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nfunction extractValidRadioOption(option: unknown) {\r\n    if (!option || typeof option !== 'object') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('value' in option) || !option.value || typeof option.value !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    if (!('text' in option) || !option.text || typeof option.text !== 'string') {\r\n        return undefined;\r\n    }\r\n\r\n    let helpText;\r\n    if ('helpText' in option && option.helpText) {\r\n        if (typeof option.helpText === 'string') {\r\n            helpText = option.helpText;\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    const res: PluginConfigurationRadioSettingOption = {\r\n        value: option.value,\r\n        text: option.text,\r\n        helpText,\r\n    };\r\n\r\n    return res;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport remove from 'lodash/remove';\r\nimport type {AnyAction} from 'redux';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ClientPluginManifest} from '@mattermost/types/plugins';\r\nimport type {IDMappedObjects} from '@mattermost/types/utilities';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\nimport {extractPluginConfiguration} from 'utils/plugins/plugin_setting_extraction';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {\r\n    PluginsState,\r\n    AdminConsolePluginComponent,\r\n    AdminConsolePluginCustomSection,\r\n    PostDropdownMenuAction,\r\n} from 'types/store/plugins';\r\n\r\nfunction hasMenuId(menu: PostDropdownMenuAction, menuId: string) {\r\n    if (!menu.subMenu) {\r\n        return false;\r\n    }\r\n\r\n    if (menu.id === menuId) {\r\n        return true;\r\n    }\r\n    for (const subMenu of menu.subMenu) {\r\n        // Recursively check if subMenu contains menuId.\r\n        if (hasMenuId(subMenu, menuId)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction buildMenu(rootMenu: PostDropdownMenuAction, data: PostDropdownMenuAction): PostDropdownMenuAction {\r\n    // Recursively build the full menu tree.\r\n    const subMenu = rootMenu.subMenu?.map((m) => buildMenu(m, data));\r\n    if (rootMenu.id === data.parentMenuId) {\r\n        subMenu?.push(data);\r\n    }\r\n\r\n    return {\r\n        ...rootMenu,\r\n        subMenu,\r\n    };\r\n}\r\n\r\nfunction sortComponents(a: {pluginId: string}, b: {pluginId: string}) {\r\n    if (a.pluginId < b.pluginId) {\r\n        return -1;\r\n    }\r\n\r\n    if (a.pluginId > b.pluginId) {\r\n        return 1;\r\n    }\r\n\r\n    return 0;\r\n}\r\n\r\nfunction removePostPluginComponents(state: PluginsState['postTypes'], action: AnyAction) {\r\n    if (!action.data) {\r\n        return state;\r\n    }\r\n\r\n    const nextState = {...state};\r\n    let modified = false;\r\n    Object.keys(nextState).forEach((k) => {\r\n        const c = nextState[k];\r\n        if (c.pluginId === action.data.id) {\r\n            Reflect.deleteProperty(nextState, k);\r\n            modified = true;\r\n        }\r\n    });\r\n\r\n    if (modified) {\r\n        return nextState;\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction removePostPluginComponent(state: PluginsState['postTypes'], action: AnyAction) {\r\n    const nextState = {...state};\r\n    const keys = Object.keys(nextState);\r\n    for (let i = 0; i < keys.length; i++) {\r\n        const k = keys[i];\r\n        if (nextState[k].id === action.id) {\r\n            Reflect.deleteProperty(nextState, k);\r\n            return nextState;\r\n        }\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction removePluginComponents(state: PluginsState['components'], action: AnyAction) {\r\n    if (!action.data) {\r\n        return state;\r\n    }\r\n\r\n    const nextState = {...state};\r\n    const types = Object.keys(nextState) as Array<keyof PluginsState['components']>;\r\n    let modified = false;\r\n    for (let i = 0; i < types.length; i++) {\r\n        const componentType = types[i];\r\n        const componentList = nextState[componentType] || [];\r\n        for (let j = componentList.length - 1; j >= 0; j--) {\r\n            if (componentList[j].pluginId === action.data.id) {\r\n                const nextArray = [...nextState[componentType]];\r\n                nextArray.splice(j, 1);\r\n                nextState[componentType] = nextArray as any;\r\n                modified = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (modified) {\r\n        return nextState;\r\n    }\r\n\r\n    return state;\r\n}\r\n\r\nfunction removePluginComponent(state: PluginsState['components'], action: AnyAction) {\r\n    let newState = state;\r\n    const types = Object.keys(state) as Array<keyof PluginsState['components']>;\r\n    for (let i = 0; i < types.length; i++) {\r\n        const componentType = types[i];\r\n        const componentList = state[componentType] || [];\r\n        for (let j = 0; j < componentList.length; j++) {\r\n            if (componentList[j].id === action.id) {\r\n                const nextArray = [...componentList];\r\n                nextArray.splice(j, 1);\r\n                newState = {...newState, [componentType]: nextArray};\r\n            }\r\n        }\r\n    }\r\n    return newState;\r\n}\r\n\r\nfunction plugins(state: IDMappedObjects<ClientPluginManifest> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_WEBAPP_PLUGINS: {\r\n        if (action.data) {\r\n            const nextState: IDMappedObjects<ClientPluginManifest> = {};\r\n            action.data.forEach((p: ClientPluginManifest) => {\r\n                nextState[p.id] = p;\r\n            });\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.RECEIVED_WEBAPP_PLUGIN: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            nextState[action.data.id] = action.data;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN: {\r\n        if (action.data && state[action.data.id]) {\r\n            const nextState = {...state};\r\n            Reflect.deleteProperty(nextState, action.data.id);\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nconst initialComponents: PluginsState['components'] = {\r\n    AppBar: [],\r\n    CallButton: [],\r\n    FilePreview: [],\r\n    LinkTooltip: [],\r\n    MainMenu: [],\r\n    ChannelHeaderButton: [],\r\n    MobileChannelHeaderButton: [],\r\n    PostDropdownMenu: [],\r\n    PostAction: [],\r\n    PostEditorAction: [],\r\n    CodeBlockAction: [],\r\n    NewMessagesSeparatorAction: [],\r\n    Product: [],\r\n    RightHandSidebarComponent: [],\r\n    FilesWillUploadHook: [],\r\n    NeedsTeamComponent: [],\r\n    CreateBoardFromTemplate: [],\r\n    DesktopNotificationHooks: [],\r\n    BottomTeamSidebar: [],\r\n    ChannelHeader: [],\r\n    ChannelIntroButton: [],\r\n    CustomRouteComponent: [],\r\n    FilesDropdown: [],\r\n    FileUploadMethod: [],\r\n    LeftSidebarHeader: [],\r\n    MessageWillFormat: [],\r\n    PopoverUserActions: [],\r\n    PopoverUserAttributes: [],\r\n    PostDropdownMenuItem: [],\r\n    PostMessageAttachment: [],\r\n    PostWillRenderEmbedComponent: [],\r\n    Root: [],\r\n    SearchButtons: [],\r\n    SearchHints: [],\r\n    SearchSuggestions: [],\r\n    UserGuideDropdown: [],\r\n    ChannelToast: [],\r\n    Global: [],\r\n    SidebarChannelLinkLabel: [],\r\n    MessageWillBePosted: [],\r\n    MessageWillBeUpdated: [],\r\n    SlashCommandWillBePosted: [],\r\n    SystemConsoleGroupTable: [],\r\n};\r\n\r\nfunction components(state: PluginsState['components'] = initialComponents, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_PLUGIN_COMPONENT: {\r\n        if (action.name && action.data) {\r\n            const pluggableType = action.name as keyof PluginsState['components'];\r\n            const nextState = {...state};\r\n            const currentArray = nextState[pluggableType] || [];\r\n            const nextArray = [...currentArray];\r\n            let actionData = action.data;\r\n            if (action.name === 'PostDropdownMenu' && actionData.parentMenuId) {\r\n                // Remove the menu from nextArray to rebuild it later.\r\n                const menu = remove(nextArray as PostDropdownMenuAction[], (c) => hasMenuId(c, actionData.parentMenuId) && c.pluginId === actionData.pluginId);\r\n\r\n                // Request is for an unknown menuId, return original state.\r\n                if (!menu[0]) {\r\n                    return state;\r\n                }\r\n                actionData = buildMenu(menu[0], actionData);\r\n            }\r\n            nextArray.push(actionData);\r\n            nextArray.sort(sortComponents);\r\n            nextState[pluggableType] = nextArray as any;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_PLUGIN_COMPONENT:\r\n        return removePluginComponent(state, action);\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        return removePluginComponents(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return initialComponents;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction postTypes(state: PluginsState['postTypes'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_PLUGIN_POST_COMPONENT: {\r\n        if (action.data) {\r\n            // Skip saving the component if one already exists and the new plugin id\r\n            // is lower alphabetically\r\n            const currentPost = state[action.data.type];\r\n            if (currentPost && action.data.pluginId > currentPost.pluginId) {\r\n                return state;\r\n            }\r\n\r\n            const nextState = {...state};\r\n            nextState[action.data.type] = action.data;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_PLUGIN_POST_COMPONENT:\r\n        return removePostPluginComponent(state, action);\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        return removePostPluginComponents(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction postCardTypes(state: PluginsState['postTypes'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_PLUGIN_POST_CARD_COMPONENT: {\r\n        if (action.data) {\r\n            // Skip saving the component if one already exists and the new plugin id\r\n            // is lower alphabetically\r\n            const currentPost = state[action.data.type];\r\n            if (currentPost && action.data.pluginId > currentPost.pluginId) {\r\n                return state;\r\n            }\r\n\r\n            const nextState = {...state};\r\n            nextState[action.data.type] = action.data;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_PLUGIN_POST_CARD_COMPONENT:\r\n        return removePostPluginComponent(state, action);\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        return removePostPluginComponents(state, action);\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction adminConsoleReducers(state: {[pluginId: string]: any} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_ADMIN_CONSOLE_REDUCER: {\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            nextState[action.data.pluginId] = action.data.reducer;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_ADMIN_CONSOLE_REDUCER: {\r\n        if (action.data && state[action.data.pluginId]) {\r\n            const nextState = {...state};\r\n            delete nextState[action.data.pluginId];\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        if (action.data && state[action.data.id]) {\r\n            const nextState = {...state};\r\n            delete nextState[action.data.id];\r\n            return nextState;\r\n        }\r\n        return state;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction adminConsoleCustomComponents(state: {[pluginId: string]: Record<string, AdminConsolePluginComponent>} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_ADMIN_CONSOLE_CUSTOM_COMPONENT: {\r\n        if (!action.data) {\r\n            return state;\r\n        }\r\n\r\n        const pluginId = action.data.pluginId;\r\n        const key = action.data.key.toLowerCase();\r\n\r\n        const nextState = {...state};\r\n        let nextArray: Record<string, AdminConsolePluginComponent> = {};\r\n        if (nextState[pluginId]) {\r\n            nextArray = {...nextState[pluginId]};\r\n        }\r\n        nextArray[key] = action.data;\r\n        nextState[pluginId] = nextArray;\r\n\r\n        return nextState;\r\n    }\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN: {\r\n        if (!action.data || !state[action.data.id]) {\r\n            return state;\r\n        }\r\n\r\n        const pluginId = action.data.id;\r\n        const nextState = {...state};\r\n        delete nextState[pluginId];\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction adminConsoleCustomSections(state: {[pluginId: string]: Record<string, AdminConsolePluginCustomSection>} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_ADMIN_CONSOLE_CUSTOM_SECTION: {\r\n        if (!action.data) {\r\n            return state;\r\n        }\r\n\r\n        const pluginId = action.data.pluginId;\r\n        const key = action.data.key.toLowerCase();\r\n\r\n        const nextState = {...state};\r\n        let nextObject: Record<string, AdminConsolePluginCustomSection> = {};\r\n        if (nextState[pluginId]) {\r\n            nextObject = {...nextState[pluginId]};\r\n        }\r\n        nextObject[key] = action.data;\r\n        nextState[pluginId] = nextObject;\r\n\r\n        return nextState;\r\n    }\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN: {\r\n        if (!action.data || !state[action.data.id]) {\r\n            return state;\r\n        }\r\n\r\n        const pluginId = action.data.id;\r\n        const nextState = {...state};\r\n        delete nextState[pluginId];\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction siteStatsHandlers(state: PluginsState['siteStatsHandlers'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_PLUGIN_STATS_HANDLER:\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            nextState[action.data.pluginId] = action.data.handler;\r\n            return nextState;\r\n        }\r\n        return state;\r\n\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            delete nextState[action.data.id];\r\n            return nextState;\r\n        }\r\n        return state;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction userSettings(state: PluginsState['userSettings'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_PLUGIN_USER_SETTINGS:\r\n        if (action.data) {\r\n            const extractedConfiguration = extractPluginConfiguration(action.data.setting, action.data.pluginId);\r\n            if (!extractedConfiguration) {\r\n                // eslint-disable-next-line no-console\r\n                console.warn(`Plugin ${action.data.pluginId} is trying to register an invalid configuration. Contact the plugin developer to fix this issue.`);\r\n                return state;\r\n            }\r\n            const nextState = {...state};\r\n            nextState[action.data.pluginId] = extractedConfiguration;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    case ActionTypes.REMOVED_WEBAPP_PLUGIN:\r\n        if (action.data) {\r\n            const nextState = {...state};\r\n            delete nextState[action.data.id];\r\n            return nextState;\r\n        }\r\n        return state;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object where every key is a plugin id and values are webapp plugin manifests\r\n    plugins,\r\n\r\n    // object where every key is a component name and the values are arrays of\r\n    // components wrapped in an object that contains an id and plugin id\r\n    components,\r\n\r\n    // object where every key is a post type and the values are components wrapped in an\r\n    // an object that contains a plugin id\r\n    postTypes,\r\n\r\n    // object where every key is a post type and the values are components wrapped in an\r\n    // an object that contains a plugin id\r\n    postCardTypes,\r\n\r\n    // object where every key is a plugin id and the value is a function that\r\n    // modifies the admin console definition data structure\r\n    adminConsoleReducers,\r\n\r\n    // objects where every key is a plugin id and the value is an object mapping keys to a custom\r\n    // React component to render on the plugin's system console.\r\n    adminConsoleCustomComponents,\r\n\r\n    // objects where every key is a plugin id and the value is an object mapping keys to a custom\r\n    // React component to render on the plugin's system console as custom section.\r\n    adminConsoleCustomSections,\r\n\r\n    // objects where every key is a plugin id and the value is a promise to fetch stats from\r\n    // a plugin to render on system console\r\n    siteStatsHandlers,\r\n\r\n    // objects where every key is a plugin id and the value is configuration schema to show in\r\n    // the user settings modal\r\n    userSettings,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport localForage from 'localforage';\r\nimport {combineReducers} from 'redux';\r\nimport {createMigrate, persistReducer, REHYDRATE} from 'redux-persist';\r\nimport type {MigrationManifest, PersistedState} from 'redux-persist';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\nimport {General} from 'mattermost-redux/constants';\r\n\r\nimport {StoragePrefixes, StorageTypes} from 'utils/constants';\r\nimport {getDraftInfoFromKey} from 'utils/storage_utils';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {StorageItem} from 'types/store/storage';\r\n\r\nfunction storage(state: Record<string, any> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case REHYDRATE: {\r\n        if (!action.payload || action.key !== 'storage') {\r\n            return state;\r\n        }\r\n\r\n        // We have to do some transformation here to correct for the transformation we do when persisting storage state\r\n        const nextState = {...state};\r\n\r\n        for (const [key, value] of Object.entries(action.payload)) {\r\n            const nextValue = {...value as StorageItem};\r\n            if (nextValue.timestamp && typeof nextValue.timestamp === 'string') {\r\n                nextValue.timestamp = new Date(nextValue.timestamp);\r\n            }\r\n            nextState[key] = nextValue;\r\n        }\r\n\r\n        return nextState;\r\n    }\r\n    case StorageTypes.SET_GLOBAL_ITEM: {\r\n        if (!state[action.data.name] ||\r\n            !state[action.data.name].timestamp ||\r\n            state[action.data.name].timestamp < action.data.timestamp\r\n        ) {\r\n            const nextState = {...state};\r\n            nextState[action.data.name] = {\r\n                timestamp: action.data.timestamp,\r\n                value: action.data.value,\r\n            };\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case StorageTypes.REMOVE_GLOBAL_ITEM: {\r\n        const nextState = {...state};\r\n        Reflect.deleteProperty(nextState, action.data.name);\r\n        return nextState;\r\n    }\r\n    case StorageTypes.ACTION_ON_GLOBAL_ITEMS_WITH_PREFIX: {\r\n        const nextState = {...state};\r\n        let changed = false;\r\n\r\n        for (const key of Object.keys(nextState)) {\r\n            if (!key.startsWith(action.data.prefix)) {\r\n                continue;\r\n            }\r\n\r\n            const value = nextState[key].value;\r\n            const nextValue = action.data.action(key, value);\r\n            if (value === nextValue) {\r\n                continue;\r\n            }\r\n\r\n            nextState[key] = {\r\n                timestamp: new Date(),\r\n                value: action.data.action(key, state[key].value),\r\n            };\r\n            changed = true;\r\n        }\r\n\r\n        return changed ? nextState : state;\r\n    }\r\n    case StorageTypes.STORAGE_REHYDRATE: {\r\n        return {...state, ...action.data};\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction migrateDrafts(state: any) {\r\n    const drafts: any = {};\r\n    for (const storageKey of Object.keys(state)) {\r\n        if (!storageKey.startsWith('draft')) {\r\n            continue;\r\n        }\r\n\r\n        const storageDraft = state[storageKey];\r\n        if (storageDraft.value?.channelId) {\r\n            // No migration is needed\r\n            continue;\r\n        }\r\n\r\n        const info = getDraftInfoFromKey(storageKey, StoragePrefixes.DRAFT);\r\n        const timestamp = new Date(storageDraft.timestamp);\r\n\r\n        if (!info?.id) {\r\n            drafts[storageKey] = {timestamp, value: {message: '', fileInfos: [], uploadsInProgress: []}};\r\n            continue;\r\n        }\r\n\r\n        const migratedDraft = {\r\n            timestamp,\r\n            value: {\r\n                message: storageDraft.value?.message,\r\n                fileInfos: storageDraft.value?.fileInfos || [],\r\n                props: storageDraft.value?.props || {},\r\n                uploadsInProgress: storageDraft.value?.uploadsInProgress || [],\r\n                channelId: info.id,\r\n                rootId: '',\r\n                createAt: timestamp.getTime(),\r\n                updateAt: timestamp.getTime(),\r\n                show: true,\r\n            },\r\n        };\r\n\r\n        drafts[storageKey] = {...migratedDraft};\r\n    }\r\n\r\n    return drafts;\r\n}\r\n\r\nfunction initialized(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case General.STORE_REHYDRATION_COMPLETE:\r\n        return state || action.complete;\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nconst migrations: MigrationManifest = {\r\n    1: (state: PersistedState): PersistedState => {\r\n        return {\r\n            ...state,\r\n            ...migrateDrafts(state),\r\n        };\r\n    },\r\n};\r\n\r\nconst config = {\r\n    key: 'storage',\r\n    version: 1,\r\n    storage: localForage,\r\n    migrate: createMigrate(migrations, {debug: false}),\r\n};\r\n\r\nexport default combineReducers({\r\n    storage: persistReducer(config, storage),\r\n    initialized,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nexport function isOpen(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.ADD_CHANNEL_CTA_DROPDOWN_TOGGLE:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    isOpen,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction announcementBarState(state = {announcementBarCount: 0}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.TRACK_ANNOUNCEMENT_BAR:\r\n        return {\r\n            ...state,\r\n            announcementBarCount: state.announcementBarCount + 1,\r\n        };\r\n\r\n    case ActionTypes.DISMISS_ANNOUNCEMENT_BAR:\r\n        return {\r\n            ...state,\r\n            announcementBarCount: Math.max(state.announcementBarCount - 1, 0),\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {\r\n            announcementBarCount: 0,\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    announcementBarState,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes, WindowSizes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction focused(state = true, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.BROWSER_CHANGE_FOCUS:\r\n        return action.focus;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction windowSize(state = WindowSizes.DESKTOP_VIEW, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.BROWSER_WINDOW_RESIZED:\r\n        return action.data;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    focused,\r\n    windowSize,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ChannelTypes, PostTypes, UserTypes, GeneralTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes, Constants} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction postVisibility(state: {[channelId: string]: number} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.SELECT_CHANNEL: {\r\n        const nextState = {...state};\r\n        nextState[action.data] = Constants.POST_CHUNK_SIZE / 2;\r\n        return nextState;\r\n    }\r\n    case ActionTypes.INCREASE_POST_VISIBILITY: {\r\n        const nextState = {...state};\r\n        nextState[action.data] += action.amount;\r\n        return nextState;\r\n    }\r\n    case ActionTypes.RECEIVED_FOCUSED_POST: {\r\n        const nextState = {...state};\r\n        nextState[action.channelId] = Constants.POST_CHUNK_SIZE / 2;\r\n        return nextState;\r\n    }\r\n    case PostTypes.RECEIVED_NEW_POST: {\r\n        if (action.data && state[action.data.channel_id]) {\r\n            const nextState = {...state};\r\n            nextState[action.data.channel_id] += 1;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction lastChannelViewTime(state: {[channelId: string]: number} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_CHANNEL_WITH_MEMBER: {\r\n        if (action.member) {\r\n            const nextState = {...state};\r\n            nextState[action.data] = action.member.last_viewed_at;\r\n            return nextState;\r\n        }\r\n        return state;\r\n    }\r\n    case ActionTypes.UPDATE_CHANNEL_LAST_VIEWED_AT: {\r\n        const nextState = {...state};\r\n        nextState[action.channel_id] = action.last_viewed_at;\r\n        return nextState;\r\n    }\r\n\r\n    case ActionTypes.POST_UNREAD_SUCCESS: {\r\n        const data = action.data;\r\n        return {...state, [data.channelId]: data.lastViewedAt};\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction loadingPosts(state: {[channelId: string]: boolean} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.LOADING_POSTS: {\r\n        const nextState = {...state};\r\n        nextState[action.channelId] = action.data;\r\n        return nextState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction focusedPostId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_FOCUSED_POST:\r\n        return action.data;\r\n    case ChannelTypes.SELECT_CHANNEL:\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction mobileView(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_MOBILE_VIEW:\r\n        return action.data;\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// lastUnreadChannel tracks if the current channel was unread and if it had mentions when the user switched to it.\r\nfunction lastUnreadChannel(state: ({channelId: string; hadMentions: boolean}) | null = null, action: MMAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.LEAVE_CHANNEL:\r\n        if (action.data.id === state?.channelId) {\r\n            return null;\r\n        }\r\n        return state;\r\n    case ActionTypes.SET_LAST_UNREAD_CHANNEL: {\r\n        const {\r\n            channelId,\r\n            hadMentions,\r\n            hadUnreads,\r\n        } = action;\r\n\r\n        if (hadMentions || hadUnreads) {\r\n            return {\r\n                id: channelId,\r\n                hadMentions,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return null;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction lastGetPosts(state: {[channelId: string]: number} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME:\r\n        return {\r\n            ...state,\r\n            [action.channelId]: action.time,\r\n        };\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction toastStatus(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_CHANNEL_WITH_MEMBER:\r\n        return false;\r\n    case ActionTypes.UPDATE_TOAST_STATUS:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channelPrefetchStatus(state: {[channelId: string]: string} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.PREFETCH_POSTS_FOR_CHANNEL:\r\n        return {\r\n            ...state,\r\n            [action.channelId]: action.status,\r\n        };\r\n    case GeneralTypes.WEBSOCKET_FAILURE:\r\n    case GeneralTypes.WEBSOCKET_CLOSED:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    postVisibility,\r\n    lastChannelViewTime,\r\n    loadingPosts,\r\n    focusedPostId,\r\n    mobileView,\r\n    lastUnreadChannel,\r\n    lastGetPosts,\r\n    toastStatus,\r\n    channelPrefetchStatus,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {Channel} from '@mattermost/types/channels';\r\n\r\nimport {ChannelTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction channels(state: string[] = [], action: MMAction) {\r\n    switch (action.type) {\r\n    case ChannelTypes.RECEIVED_ALL_CHANNELS:\r\n        return action.data.map((v: Channel) => v.id);\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    channels,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {ChannelCategory} from '@mattermost/types/channel_categories';\r\n\r\nimport {ChannelCategoryTypes, UserTypes} from 'mattermost-redux/action_types';\r\nimport {removeItem} from 'mattermost-redux/utils/array_utils';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {DraggingState, MMAction} from 'types/store';\r\n\r\nexport function unreadFilterEnabled(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_UNREAD_FILTER_ENABLED:\r\n        return action.enabled;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function draggingState(state: DraggingState = {}, action: MMAction): DraggingState {\r\n    switch (action.type) {\r\n    case ActionTypes.SIDEBAR_DRAGGING_SET_STATE:\r\n        return {\r\n            state: action.data.state || state?.state,\r\n            type: action.data.type || state?.type,\r\n            id: action.data.id || state?.id,\r\n        };\r\n\r\n    case ActionTypes.SIDEBAR_DRAGGING_STOP:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function newCategoryIds(state: string[] = [], action: MMAction): string[] {\r\n    switch (action.type) {\r\n    case ActionTypes.ADD_NEW_CATEGORY_ID:\r\n        return [...state, action.data];\r\n    case ChannelCategoryTypes.RECEIVED_CATEGORY: {\r\n        const category: ChannelCategory = action.data;\r\n\r\n        if (category.channel_ids.length > 0) {\r\n            return removeItem(state, category.id);\r\n        }\r\n\r\n        return state;\r\n    }\r\n    case ChannelCategoryTypes.RECEIVED_CATEGORIES: {\r\n        const categories = action.data;\r\n\r\n        return categories.reduce((nextState: string[], category: ChannelCategory) => {\r\n            if (category.channel_ids.length > 0) {\r\n                return removeItem(nextState, category.id);\r\n            }\r\n\r\n            return nextState;\r\n        }, state);\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function multiSelectedChannelIds(state: string[] = [], action: MMAction): string[] {\r\n    switch (action.type) {\r\n    case ActionTypes.MULTISELECT_CHANNEL:\r\n        // Channel was not previously selected\r\n        // now will be the only selected item\r\n        if (!state.includes(action.data)) {\r\n            return [action.data];\r\n        }\r\n\r\n        // Channel was part of a selected group\r\n        // will now become the only selected item\r\n        if (state.length > 1) {\r\n            return [action.data];\r\n        }\r\n\r\n        // Channel was previously selected but not in a group\r\n        // we will now clear the selection\r\n        return [];\r\n    case ActionTypes.MULTISELECT_CHANNEL_ADD:\r\n        // if not selected - add it to the selected items\r\n        if (state.indexOf(action.data) === -1) {\r\n            return [\r\n                ...state,\r\n                action.data,\r\n            ];\r\n        }\r\n\r\n        // it was previously selected and now needs to be removed from the group\r\n        return removeItem(state, action.data);\r\n    case ActionTypes.MULTISELECT_CHANNEL_TO:\r\n        return action.data;\r\n\r\n    case ActionTypes.MULTISELECT_CHANNEL_CLEAR:\r\n        return state.length > 0 ? [] : state;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function lastSelectedChannel(state = '', action: MMAction): string {\r\n    switch (action.type) {\r\n    case ActionTypes.MULTISELECT_CHANNEL:\r\n    case ActionTypes.MULTISELECT_CHANNEL_ADD:\r\n        return action.data;\r\n    case ActionTypes.MULTISELECT_CHANNEL_CLEAR:\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    unreadFilterEnabled,\r\n    draggingState,\r\n    newCategoryIds,\r\n    multiSelectedChannelIds,\r\n    lastSelectedChannel,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction remotes(state: Record<string, boolean> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_DRAFT_SOURCE:\r\n        return {\r\n            ...state,\r\n            [action.data.key]: action.data.isRemote,\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n\r\n    // object that stores global draft keys indicating whether the draft came from a WebSocket event.\r\n    remotes,\r\n\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes, Locations} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction emojiPickerCustomPage(state = 0, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.INCREMENT_EMOJI_PICKER_PAGE:\r\n        return state + 1;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 0;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shortcutReactToLastPostEmittedFrom(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.EMITTED_SHORTCUT_REACT_TO_LAST_POST:\r\n        if (action.payload === Locations.CENTER) {\r\n            return Locations.CENTER;\r\n        } else if (action.payload === Locations.RHS_ROOT) {\r\n            return Locations.RHS_ROOT;\r\n        }\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    emojiPickerCustomPage,\r\n    shortcutReactToLastPostEmittedFrom,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {Translations} from 'types/store/i18n';\r\n\r\nfunction translations(state: Translations = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_TRANSLATIONS:\r\n        return {\r\n            ...state,\r\n            [action.data.locale]: action.data.translations,\r\n        };\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    translations,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {TeamTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {SidebarSize} from 'components/resizable_sidebar/constants';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction isOpen(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.TOGGLE_LHS:\r\n        return !state;\r\n    case ActionTypes.OPEN_LHS:\r\n        return true;\r\n    case ActionTypes.CLOSE_LHS:\r\n        return false;\r\n    case ActionTypes.TOGGLE_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.OPEN_RHS_MENU:\r\n        return false;\r\n    case TeamTypes.SELECT_TEAM:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction size(state = SidebarSize.MEDIUM, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_LHS_SIZE:\r\n        return action.size;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction currentStaticPageId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_STATIC_PAGE:\r\n        return action.data;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    isOpen,\r\n    size,\r\n    currentStaticPageId,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport type {MarketplaceApp, MarketplacePlugin} from '@mattermost/types/marketplace';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes, ModalIdentifiers} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\n// plugins tracks the set of marketplace plugins returned by the server\r\nfunction plugins(state: MarketplacePlugin[] = [], action: MMAction): MarketplacePlugin[] {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_MARKETPLACE_PLUGINS:\r\n        return action.plugins ? action.plugins : [];\r\n\r\n    case ActionTypes.MODAL_CLOSE:\r\n        if (action.modalId !== ModalIdentifiers.PLUGIN_MARKETPLACE) {\r\n            return state;\r\n        }\r\n\r\n        return [];\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// apps tracks the set of marketplace apps returned by the apps plugin\r\nfunction apps(state: MarketplaceApp[] = [], action: MMAction): MarketplaceApp[] {\r\n    switch (action.type) {\r\n    case ActionTypes.RECEIVED_MARKETPLACE_APPS:\r\n        return action.apps ? action.apps : [];\r\n\r\n    case ActionTypes.MODAL_CLOSE:\r\n        if (action.modalId !== ModalIdentifiers.PLUGIN_MARKETPLACE) {\r\n            return state;\r\n        }\r\n\r\n        return [];\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// installing tracks the items pending installation\r\nfunction installing(state: {[id: string]: boolean} = {}, action: MMAction): {[id: string]: boolean} {\r\n    switch (action.type) {\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM:\r\n        if (state[action.id]) {\r\n            return state;\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [action.id]: true,\r\n        };\r\n\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM_SUCCEEDED:\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM_FAILED: {\r\n        if (!Object.hasOwn(state, action.id)) {\r\n            return state;\r\n        }\r\n\r\n        const newState = {...state};\r\n        delete newState[action.id];\r\n\r\n        return newState;\r\n    }\r\n\r\n    case ActionTypes.MODAL_CLOSE:\r\n        if (action.modalId !== ModalIdentifiers.PLUGIN_MARKETPLACE) {\r\n            return state;\r\n        }\r\n\r\n        return {};\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// errors tracks the error messages for items that failed installation\r\nfunction errors(state: {[id: string]: string} = {}, action: MMAction): {[id: string]: string} {\r\n    switch (action.type) {\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM_FAILED:\r\n        return {\r\n            ...state,\r\n            [action.id]: action.error,\r\n        };\r\n\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM_SUCCEEDED:\r\n    case ActionTypes.INSTALLING_MARKETPLACE_ITEM: {\r\n        if (!Object.hasOwn(state, action.id)) {\r\n            return state;\r\n        }\r\n\r\n        const newState = {...state};\r\n        delete newState[action.id];\r\n\r\n        return newState;\r\n    }\r\n\r\n    case ActionTypes.MODAL_CLOSE:\r\n        if (action.modalId !== ModalIdentifiers.PLUGIN_MARKETPLACE) {\r\n            return state;\r\n        }\r\n\r\n        return {};\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// filter tracks the current marketplace search query filter\r\nfunction filter(state = '', action: MMAction): string {\r\n    switch (action.type) {\r\n    case ActionTypes.FILTER_MARKETPLACE_LISTING:\r\n        return action.filter;\r\n\r\n    case ActionTypes.MODAL_CLOSE:\r\n        if (action.modalId !== ModalIdentifiers.PLUGIN_MARKETPLACE) {\r\n            return state;\r\n        }\r\n\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    plugins,\r\n    apps,\r\n    installing,\r\n    errors,\r\n    filter,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {GeneralTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nexport function modalState(state: ViewsState['modals']['modalState'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.MODAL_OPEN:\r\n        return {\r\n            ...state,\r\n            [action.modalId]: {\r\n                open: true,\r\n                dialogProps: action.dialogProps,\r\n                dialogType: action.dialogType,\r\n            },\r\n        };\r\n    case ActionTypes.MODAL_CLOSE: {\r\n        const newState = Object.assign({}, state);\r\n        Reflect.deleteProperty(newState, action.modalId);\r\n        return newState;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function showLaunchingWorkspace(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case GeneralTypes.SHOW_LAUNCHING_WORKSPACE:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    modalState,\r\n    showLaunchingWorkspace,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction hasBeenDismissed(state: Record<string, boolean> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.DISMISS_NOTICE:\r\n        return {...state, [action.data]: true};\r\n    case ActionTypes.SHOW_NOTICE:\r\n        return {...state, [action.data]: false};\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    hasBeenDismissed,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nexport function isShowOnboardingTaskCompletion(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SHOW_ONBOARDING_TASK_COMPLETION:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function isShowOnboardingCompleteProfileTour(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SHOW_ONBOARDING_COMPLETE_PROFILE_TOUR:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function isShowOnboardingVisitConsoleTour(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SHOW_ONBOARDING_VISIT_CONSOLE_TOUR:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    isShowOnboardingTaskCompletion,\r\n    isShowOnboardingCompleteProfileTour,\r\n    isShowOnboardingVisitConsoleTour,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nconst editingPostDefaultState: ViewsState['posts']['editingPost'] = {\r\n    show: false,\r\n    postId: '',\r\n    refocusId: '',\r\n    isRHS: false,\r\n};\r\n\r\nfunction editingPost(state: ViewsState['posts']['editingPost'] = editingPostDefaultState, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.TOGGLE_EDITING_POST: {\r\n        if (action.data.show) {\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            };\r\n        }\r\n\r\n        return editingPostDefaultState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return editingPostDefaultState;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction menuActions(state: {[postId: string]: {[actionId: string]: {text: string; value: string}}} = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_ATTACHMENT_MENU_ACTION: {\r\n        const nextState = {...state};\r\n        if (nextState[action.data.postId]) {\r\n            nextState[action.data.postId] = {\r\n                ...nextState[action.data.postId],\r\n                ...action.data.actions,\r\n            };\r\n        } else {\r\n            nextState[action.data.postId] = action.data.actions;\r\n        }\r\n        return nextState;\r\n    }\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    editingPost,\r\n    menuActions,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nexport function switcherOpen(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_PRODUCT_SWITCHER_OPEN:\r\n        return action.open;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    switcherOpen,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nexport type ReadoutState = {\r\n    message: string | null;\r\n};\r\n\r\nconst initialState: ReadoutState = {\r\n    message: null,\r\n};\r\n\r\nfunction readout(state: ReadoutState = initialState, action: MMAction): ReadoutState {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_READOUT:\r\n        return {\r\n            message: action.data,\r\n        };\r\n    case ActionTypes.CLEAR_READOUT:\r\n        return {\r\n            message: null,\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default readout;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {\r\n    PostTypes,\r\n    TeamTypes,\r\n    SearchTypes,\r\n    UserTypes,\r\n} from 'mattermost-redux/action_types';\r\n\r\nimport {SidebarSize} from 'components/resizable_sidebar/constants';\r\n\r\nimport {ActionTypes, RHSStates, Threads} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {RhsState} from 'types/store/rhs';\r\n\r\nfunction selectedPostId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        return action.postId;\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return '';\r\n    case PostTypes.POST_REMOVED:\r\n        if (action.data && action.data.id === state) {\r\n            return '';\r\n        }\r\n        return state;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return action.postId ?? '';\r\n    case ActionTypes.RHS_GO_BACK:\r\n        return '';\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// selectedPostFocussedAt keeps track of the last time a post was selected, whether or not it\r\n// is currently selected.\r\nfunction selectedPostFocussedAt(state = 0, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        return action.timestamp || 0;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return action.timestamp ?? state;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 0;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction highlightedPostId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.HIGHLIGHT_REPLY:\r\n        return action.postId;\r\n    case ActionTypes.CLEAR_HIGHLIGHT_REPLY:\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\n// filesSearchExtFilter keeps track of the extension filters used for file search.\r\nfunction filesSearchExtFilter(state: string[] = [], action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_FILES_FILTER_BY_EXT:\r\n        return action.data;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction selectedPostCardId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return action.postId;\r\n    case ActionTypes.SELECT_POST:\r\n        return '';\r\n    case PostTypes.POST_REMOVED:\r\n        if (action.data && action.data.id === state) {\r\n            return '';\r\n        }\r\n        return state;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction selectedChannelId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        return action.channelId;\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return action.channelId;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if ([\r\n            RHSStates.PIN,\r\n            RHSStates.CHANNEL_FILES,\r\n            RHSStates.CHANNEL_INFO,\r\n            RHSStates.CHANNEL_MEMBERS,\r\n            RHSStates.EDIT_HISTORY,\r\n        ].includes(action.state)) {\r\n            return action.channelId;\r\n        }\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction previousRhsStates(state: any = [], action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        if (action.previousRhsState) {\r\n            return [\r\n                ...state,\r\n                action.previousRhsState,\r\n            ];\r\n        }\r\n        return [];\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        if (action.previousRhsState) {\r\n            return [\r\n                ...state,\r\n                action.previousRhsState,\r\n            ];\r\n        }\r\n        return [];\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.previousRhsState) {\r\n            return [\r\n                ...state,\r\n                action.previousRhsState,\r\n            ];\r\n        }\r\n        return [];\r\n    case ActionTypes.RHS_GO_BACK:\r\n        // eslint-disable-next-line no-case-declarations\r\n        const newState = [...state];\r\n        newState.pop();\r\n        return newState;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return [];\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction rhsState(state: RhsState = null, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return action.state;\r\n    case ActionTypes.RHS_GO_BACK:\r\n        return action.state;\r\n    case ActionTypes.SELECT_POST:\r\n        return null;\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return null;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return null;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction size(state: SidebarSize = SidebarSize.MEDIUM, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_RHS_SIZE:\r\n        return action.size;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction searchTerms(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_SEARCH_TERMS:\r\n        return action.terms;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.state !== RHSStates.SEARCH) {\r\n            return '';\r\n        }\r\n        return state;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction searchTeam(state = null, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_SEARCH_TEAM:\r\n        return action.teamId;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.state !== RHSStates.SEARCH) {\r\n            return null;\r\n        }\r\n        return state;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return null;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction searchType(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_SEARCH_TYPE:\r\n        return action.searchType;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.state !== RHSStates.SEARCH) {\r\n            return '';\r\n        }\r\n        return state;\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction pluggableId(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.state === RHSStates.PLUGIN) {\r\n            return action.pluggableId;\r\n        }\r\n        return '';\r\n    case ActionTypes.SELECT_POST:\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return '';\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction searchResultsTerms(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_SEARCH_RESULTS_TERMS:\r\n        return action.terms;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction searchResultsType(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_SEARCH_RESULTS_TYPE:\r\n        return action.searchType;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSearchingFlaggedPost(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SEARCH_FLAGGED_POSTS_REQUEST:\r\n        return true;\r\n    case SearchTypes.SEARCH_FLAGGED_POSTS_FAILURE:\r\n    case SearchTypes.SEARCH_FLAGGED_POSTS_SUCCESS:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSearchingPinnedPost(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SEARCH_PINNED_POSTS_REQUEST:\r\n        return true;\r\n    case SearchTypes.SEARCH_PINNED_POSTS_FAILURE:\r\n    case SearchTypes.SEARCH_PINNED_POSTS_SUCCESS:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSidebarOpen(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return Boolean(action.state);\r\n    case ActionTypes.SELECT_POST:\r\n        return Boolean(action.postId);\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return Boolean(action.postId);\r\n    case ActionTypes.TOGGLE_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.OPEN_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.TOGGLE_LHS:\r\n        return false;\r\n    case ActionTypes.OPEN_LHS:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isSidebarExpanded(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_RHS_EXPANDED:\r\n        return action.expanded;\r\n    case ActionTypes.TOGGLE_RHS_EXPANDED:\r\n        return !state;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        return action.state ? state : false;\r\n    case ActionTypes.SELECT_POST:\r\n        return action.postId ? state : false;\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        return action.postId ? state : false;\r\n    case ActionTypes.TOGGLE_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.SUPPRESS_RHS:\r\n        return false;\r\n    case ActionTypes.OPEN_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.TOGGLE_LHS:\r\n        return false;\r\n    case ActionTypes.OPEN_LHS:\r\n        return false;\r\n    case TeamTypes.SELECT_TEAM:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction isMenuOpen(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.TOGGLE_RHS_MENU:\r\n        return !state;\r\n    case ActionTypes.OPEN_RHS_MENU:\r\n        return true;\r\n    case ActionTypes.CLOSE_RHS_MENU:\r\n        return false;\r\n    case ActionTypes.TOGGLE_LHS:\r\n        return false;\r\n    case ActionTypes.OPEN_LHS:\r\n        return false;\r\n    case TeamTypes.SELECT_TEAM:\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction editChannelMembers(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_EDIT_CHANNEL_MEMBERS:\r\n        return action.active;\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (!action.state) {\r\n            return false;\r\n        }\r\n        return state;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shouldFocusRHS(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        return Boolean(action.postId);\r\n    case Threads.CHANGED_SELECTED_THREAD:\r\n        return Boolean(action.data.thread_id);\r\n    case ActionTypes.HIGHLIGHT_REPLY:\r\n        return false;\r\n    case ActionTypes.RHS_FOCUSED:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    selectedPostId,\r\n    selectedPostFocussedAt,\r\n    selectedPostCardId,\r\n    selectedChannelId,\r\n    highlightedPostId,\r\n    previousRhsStates,\r\n    filesSearchExtFilter,\r\n    rhsState,\r\n    searchTerms,\r\n    searchTeam,\r\n    searchType,\r\n    searchResultsTerms,\r\n    searchResultsType,\r\n    size,\r\n    pluggableId,\r\n    isSearchingFlaggedPost,\r\n    isSearchingPinnedPost,\r\n    isSidebarOpen,\r\n    isSidebarExpanded,\r\n    isMenuOpen,\r\n    editChannelMembers,\r\n    shouldFocusRHS,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {SearchTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nfunction modalSearch(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_MODAL_SEARCH: {\r\n        return action.data.trim();\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction popoverSearch(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_POPOVER_SEARCH: {\r\n        return action.data.trim();\r\n    }\r\n\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channelMembersRhsSearch(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_CHANNEL_MEMBERS_RHS_SEARCH: {\r\n        return action.data;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction modalFilters(state: ViewsState['search']['modalFilters'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_MODAL_FILTERS: {\r\n        const filters = action.data;\r\n        return {\r\n            ...filters,\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction userGridSearch(state: Partial<ViewsState['search']['userGridSearch']> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_USER_GRID_SEARCH: {\r\n        const term = action.data.trim();\r\n        return {\r\n            ...state,\r\n            term,\r\n        };\r\n    }\r\n    case SearchTypes.SET_USER_GRID_FILTERS: {\r\n        const filters = action.data;\r\n        return {\r\n            ...state,\r\n            filters,\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction teamListSearch(state = '', action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_TEAM_LIST_SEARCH: {\r\n        return action.data.trim();\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return '';\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction channelListSearch(state: Partial<ViewsState['search']['channelListSearch']> = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case SearchTypes.SET_CHANNEL_LIST_SEARCH: {\r\n        const term = action.data.trim();\r\n        return {\r\n            ...state,\r\n            term,\r\n        };\r\n    }\r\n    case SearchTypes.SET_CHANNEL_LIST_FILTERS: {\r\n        const filters = action.data;\r\n        return {\r\n            ...state,\r\n            filters,\r\n        };\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    modalSearch,\r\n    popoverSearch,\r\n    channelMembersRhsSearch,\r\n    modalFilters,\r\n    userGridSearch,\r\n    teamListSearch,\r\n    channelListSearch,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction websocketConnectionErrorCount(state = 0, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.INCREMENT_WS_ERROR_COUNT: {\r\n        return state + 1;\r\n    }\r\n    case ActionTypes.RESET_WS_ERROR_COUNT: {\r\n        return 0;\r\n    }\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return 0;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    websocketConnectionErrorCount,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\n\r\nfunction shouldShowPreviewOnCreateComment(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_SHOW_PREVIEW_ON_CREATE_COMMENT:\r\n        return action.showPreview;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shouldShowPreviewOnCreatePost(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_SHOW_PREVIEW_ON_CREATE_POST:\r\n        return action.showPreview;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shouldShowPreviewOnEditChannelHeaderModal(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_SHOW_PREVIEW_ON_EDIT_CHANNEL_HEADER_MODAL:\r\n        return action.showPreview;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shouldShowPreviewOnChannelSettingsHeaderModal(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_HEADER_MODAL:\r\n        return action.showPreview;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nfunction shouldShowPreviewOnChannelSettingsPurposeModal(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_PURPOSE_MODAL:\r\n        return action.showPreview;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    shouldShowPreviewOnCreateComment,\r\n    shouldShowPreviewOnCreatePost,\r\n    shouldShowPreviewOnEditChannelHeaderModal,\r\n    shouldShowPreviewOnChannelSettingsHeaderModal,\r\n    shouldShowPreviewOnChannelSettingsPurposeModal,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport findKey from 'lodash/findKey';\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {PostTypes, UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {Threads, ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nexport const selectedThreadIdInTeam = (state: ViewsState['threads']['selectedThreadIdInTeam'] = {}, action: MMAction) => {\r\n    switch (action.type) {\r\n    case PostTypes.POST_REMOVED: {\r\n        const key = findKey(state, (id) => id === action.data.id);\r\n        if (key) {\r\n            return {\r\n                ...state,\r\n                [key]: '',\r\n            };\r\n        }\r\n        return state;\r\n    }\r\n    case Threads.CHANGED_SELECTED_THREAD:\r\n        return {\r\n            ...state,\r\n            [action.data.team_id]: action.data.thread_id,\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n};\r\n\r\nexport const lastViewedAt = (state: ViewsState['threads']['lastViewedAt'] = {}, action: MMAction) => {\r\n    switch (action.type) {\r\n    case Threads.CHANGED_LAST_VIEWED_AT:\r\n        return {\r\n            ...state,\r\n            [action.data.threadId]: action.data.lastViewedAt,\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n};\r\n\r\nexport const lastUpdateAt = (state: ViewsState['threads']['lastUpdateAt'] = {}, action: MMAction) => {\r\n    switch (action.type) {\r\n    case Threads.CHANGED_LAST_UPDATE_AT:\r\n        return {\r\n            ...state,\r\n            [action.data.threadId]: action.data.lastUpdateAt,\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n};\r\n\r\nexport function manuallyUnread(state: ViewsState['threads']['manuallyUnread'] = {}, action: MMAction) {\r\n    switch (action.type) {\r\n    case Threads.CHANGED_LAST_VIEWED_AT:\r\n        return {\r\n            ...state,\r\n            [action.data.threadId]: false,\r\n        };\r\n    case Threads.MANUALLY_UNREAD_THREAD:\r\n        return {\r\n            ...state,\r\n            [action.data.threadId]: true,\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {};\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function toastStatus(state: ViewsState['threads']['toastStatus'] = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SELECT_POST:\r\n        return false;\r\n    case ActionTypes.UPDATE_THREAD_TOAST_STATUS:\r\n        return action.data;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    selectedThreadIdInTeam,\r\n    lastViewedAt,\r\n    manuallyUnread,\r\n    toastStatus,\r\n    lastUpdateAt,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport plugins from './plugins';\r\nimport storage from './storage';\r\nimport views from './views';\r\n\r\nexport default {\r\n    views,\r\n    plugins,\r\n    storage,\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport addChannelCtaDropdown from './add_channel_cta_dropdown';\r\nimport admin from './admin';\r\nimport announcementBar from './announcement_bar';\r\nimport browser from './browser';\r\nimport channel from './channel';\r\nimport channelSelectorModal from './channel_selector_modal';\r\nimport channelSidebar from './channel_sidebar';\r\nimport drafts from './drafts';\r\nimport emoji from './emoji';\r\nimport i18n from './i18n';\r\nimport lhs from './lhs';\r\nimport marketplace from './marketplace';\r\nimport modals from './modals';\r\nimport notice from './notice';\r\nimport onboardingTasks from './onboarding_tasks';\r\nimport posts from './posts';\r\nimport productMenu from './product_menu';\r\nimport readout from './readout';\r\nimport rhs from './rhs';\r\nimport rhsSuppressed from './rhs_suppressed';\r\nimport search from './search';\r\nimport settings from './settings';\r\nimport system from './system';\r\nimport textbox from './textbox';\r\nimport threads from './threads';\r\n\r\nexport default combineReducers({\r\n    admin,\r\n    announcementBar,\r\n    browser,\r\n    channel,\r\n    rhs,\r\n    rhsSuppressed,\r\n    posts,\r\n    modals,\r\n    emoji,\r\n    i18n,\r\n    lhs,\r\n    search,\r\n    notice,\r\n    system,\r\n    channelSelectorModal,\r\n    settings,\r\n    marketplace,\r\n    textbox,\r\n    channelSidebar,\r\n    addChannelCtaDropdown,\r\n    onboardingTasks,\r\n    threads,\r\n    productMenu,\r\n    drafts,\r\n    readout,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nexport default function rhsSuppressed(state: ViewsState['rhsSuppressed'] = false, action: MMAction): boolean {\r\n    switch (action.type) {\r\n    case ActionTypes.SUPPRESS_RHS:\r\n        return true;\r\n    case ActionTypes.UNSUPPRESS_RHS:\r\n        return false;\r\n\r\n    // if RHS is to be opened stop supressing RHS\r\n    case ActionTypes.UPDATE_RHS_STATE:\r\n        if (action.state === null) {\r\n            return state;\r\n        }\r\n        return false;\r\n    case ActionTypes.SELECT_POST:\r\n    case ActionTypes.SELECT_POST_CARD:\r\n        if (action.postId === '') {\r\n            return state;\r\n        }\r\n        return false;\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return false;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {ViewsState} from 'types/store/views';\r\n\r\nexport default function settings(state: ViewsState['settings'] = {activeSection: '', previousActiveSection: ''}, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.UPDATE_ACTIVE_SECTION:\r\n        return {\r\n            activeSection: action.data,\r\n            previousActiveSection: state.activeSection,\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return {\r\n            activeSection: '',\r\n            previousActiveSection: '',\r\n        };\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport {CursorPaginationDirection} from '@mattermost/types/reports';\r\n\r\nimport {UserTypes} from 'mattermost-redux/action_types';\r\n\r\nimport {ActionTypes} from 'utils/constants';\r\n\r\nimport type {MMAction} from 'types/store';\r\nimport type {AdminConsoleUserManagementTableProperties} from 'types/store/views';\r\n\r\nconst navigationBlockInitialState = {\r\n    blocked: false,\r\n    onNavigationConfirmed: null,\r\n    showNavigationPrompt: false,\r\n};\r\n\r\nfunction navigationBlock(state = navigationBlockInitialState, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_NAVIGATION_BLOCKED:\r\n        return {...state, blocked: action.blocked};\r\n    case ActionTypes.DEFER_NAVIGATION:\r\n        return {\r\n            ...state,\r\n            onNavigationConfirmed: action.onNavigationConfirmed,\r\n            showNavigationPrompt: true,\r\n        };\r\n    case ActionTypes.CANCEL_NAVIGATION:\r\n        return {\r\n            ...state,\r\n            onNavigationConfirmed: null,\r\n            showNavigationPrompt: false,\r\n        };\r\n    case ActionTypes.CONFIRM_NAVIGATION:\r\n        return {\r\n            ...state,\r\n            blocked: false,\r\n            onNavigationConfirmed: null,\r\n            showNavigationPrompt: false,\r\n        };\r\n\r\n    case UserTypes.LOGOUT_SUCCESS:\r\n        return navigationBlockInitialState;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport function needsLoggedInLimitReachedCheck(state = false, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.NEEDS_LOGGED_IN_LIMIT_REACHED_CHECK:\r\n        return action.data;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport const adminConsoleUserManagementTablePropertiesInitialState: AdminConsoleUserManagementTableProperties = {\r\n    sortColumn: '',\r\n    sortIsDescending: false,\r\n    pageSize: 0,\r\n    pageIndex: 0,\r\n    cursorDirection: CursorPaginationDirection.next,\r\n    cursorUserId: '',\r\n    cursorColumnValue: '',\r\n    columnVisibility: {},\r\n    searchTerm: '',\r\n    filterTeam: '',\r\n    filterTeamLabel: '',\r\n    filterStatus: '',\r\n    filterRole: '',\r\n};\r\n\r\nexport function adminConsoleUserManagementTableProperties(state = adminConsoleUserManagementTablePropertiesInitialState, action: MMAction) {\r\n    switch (action.type) {\r\n    case ActionTypes.SET_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES: {\r\n        return {...state, ...action.data};\r\n    }\r\n    case ActionTypes.CLEAR_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES:\r\n        return adminConsoleUserManagementTablePropertiesInitialState;\r\n    default:\r\n        return state;\r\n    }\r\n}\r\n\r\nexport default combineReducers({\r\n    navigationBlock,\r\n    needsLoggedInLimitReachedCheck,\r\n    adminConsoleUserManagementTableProperties,\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {getAccessControlSettings} from 'mattermost-redux/selectors/entities/access_control';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        basename: string;\r\n    }\r\n}\r\n\r\nexport function getBasePath(state: GlobalState) {\r\n    const config = getConfig(state) || {};\r\n\r\n    if (config.SiteURL) {\r\n        return new URL(config.SiteURL).pathname;\r\n    }\r\n\r\n    return window.basename || '/';\r\n}\r\n\r\nexport function getConnectionId(state: GlobalState) {\r\n    return state.websocket.connectionId;\r\n}\r\n\r\nexport function isDevModeEnabled(state: GlobalState) {\r\n    const config = getConfig(state);\r\n    const EnableDeveloper = config && config.EnableDeveloper ? config.EnableDeveloper === 'true' : false;\r\n    return EnableDeveloper;\r\n}\r\n\r\nexport function isChannelAccessControlEnabled(state: GlobalState): boolean {\r\n    const accessControlSettings = getAccessControlSettings(state);\r\n\r\n    // Channel-level access control requires both main ABAC and channel scope\r\n    return accessControlSettings.EnableAttributeBasedAccessControl &&\r\n           accessControlSettings.EnableChannelScopeAccessControl;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nconst config = require('./configureStore').default;\r\nexport default config;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport baseLocalForage from 'localforage';\r\nimport {extendPrototype} from 'localforage-observable';\r\nimport type {Store} from 'redux';\r\nimport type {Persistor} from 'redux-persist';\r\nimport {persistStore, REHYDRATE} from 'redux-persist';\r\nimport Observable from 'zen-observable';\r\n\r\nimport type {DeepPartial} from '@mattermost/types/utilities';\r\n\r\nimport {General, RequestStatus} from 'mattermost-redux/constants';\r\nimport configureServiceStore from 'mattermost-redux/store';\r\n\r\nimport {cleanLocalStorage} from 'actions/storage';\r\nimport {clearUserCookie} from 'actions/views/cookie';\r\nimport appReducers from 'reducers';\r\nimport {getBasePath} from 'selectors/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nfunction getAppReducers() {\r\n    return require('../reducers'); // eslint-disable-line global-require\r\n}\r\n\r\ndeclare global {\r\n    interface Window {\r\n        Observable: typeof Observable;\r\n    }\r\n}\r\n\r\nwindow.Observable = Observable;\r\n\r\nconst localForage = extendPrototype(baseLocalForage);\r\n\r\nexport default function configureStore(preloadedState?: DeepPartial<GlobalState>, additionalReducers?: Record<string, any>): Store<GlobalState> {\r\n    const reducers = additionalReducers ? {...appReducers, ...additionalReducers} : appReducers;\r\n    const store = configureServiceStore({\r\n        appReducers: reducers,\r\n        getAppReducers,\r\n        preloadedState,\r\n    });\r\n\r\n    localForage.ready().then(() => {\r\n        const persistor: Persistor = persistStore(store, null, () => {\r\n            store.dispatch({\r\n                type: General.STORE_REHYDRATION_COMPLETE,\r\n                complete: true,\r\n            });\r\n\r\n            migratePersistedState(store, persistor);\r\n        });\r\n\r\n        localForage.configObservables({\r\n            crossTabNotification: true,\r\n        });\r\n\r\n        const observable = localForage.newObservable({\r\n            crossTabNotification: true,\r\n            changeDetection: true,\r\n        });\r\n\r\n        // Rehydrate redux-persist when another tab changes localForage\r\n        observable.subscribe({\r\n            next: (value) => {\r\n                if (!value.crossTabNotification) {\r\n                    // Ignore changes made by this tab\r\n                    return;\r\n                }\r\n\r\n                const keyPrefix = 'persist:';\r\n\r\n                if (!value.key.startsWith(keyPrefix)) {\r\n                    // Ignore changes that weren't made by redux-persist\r\n                    return;\r\n                }\r\n\r\n                const key = value.key.substring(keyPrefix.length);\r\n                const newValue = JSON.parse(value.newValue);\r\n\r\n                const payload: Record<string, any> = {};\r\n\r\n                for (const reducerKey of Object.keys(newValue)) {\r\n                    if (reducerKey === '_persist') {\r\n                        // Don't overwrite information used by redux-persist itself\r\n                        continue;\r\n                    }\r\n\r\n                    payload[reducerKey] = JSON.parse(newValue[reducerKey]);\r\n                }\r\n\r\n                store.dispatch({\r\n                    type: REHYDRATE,\r\n                    key,\r\n                    payload,\r\n                });\r\n            },\r\n        });\r\n\r\n        let purging = false;\r\n\r\n        // Clean up after a logout\r\n        store.subscribe(() => {\r\n            const state = store.getState();\r\n            const basePath = getBasePath(state);\r\n\r\n            if (state.requests.users.logout.status === RequestStatus.SUCCESS && !purging) {\r\n                purging = true;\r\n\r\n                persistor.purge().then(() => {\r\n                    cleanLocalStorage();\r\n                    clearUserCookie();\r\n\r\n                    // Preserve any query string parameters on logout, including parameters\r\n                    // used by the application such as extra and redirect_to.\r\n                    window.location.href = `${basePath}${window.location.search}`;\r\n\r\n                    setTimeout(() => {\r\n                        purging = false;\r\n                    }, 500);\r\n                });\r\n            }\r\n        });\r\n    }).catch((e: Error) => {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to initialize localForage', e);\r\n    });\r\n\r\n    return store;\r\n}\r\n\r\n/**\r\n * Migrates state.storage from redux-persist@4 to redux-persist@6\r\n */\r\nfunction migratePersistedState(store: Store<GlobalState>, persistor: Persistor): void {\r\n    const oldKeyPrefix = 'reduxPersist:storage:';\r\n\r\n    const restoredState: Record<string, string> = {};\r\n    localForage.iterate((value: string, key: string) => {\r\n        if (key && key.startsWith(oldKeyPrefix)) {\r\n            restoredState[key.substring(oldKeyPrefix.length)] = value;\r\n        }\r\n    }).then(async () => {\r\n        if (Object.keys(restoredState).length === 0) {\r\n            // Nothing to migrate\r\n            return;\r\n        }\r\n\r\n        // eslint-disable-next-line no-console\r\n        console.log('Migrating storage for redux-persist@6 upgrade');\r\n\r\n        persistor.pause();\r\n\r\n        const persistedState: Record<string, any> = {};\r\n\r\n        for (const [key, value] of Object.entries(restoredState)) {\r\n            // eslint-disable-next-line no-console\r\n            console.log('Migrating `' + key + '`', JSON.parse(value));\r\n            persistedState[key] = JSON.parse(value);\r\n        }\r\n\r\n        store.dispatch({\r\n            type: REHYDRATE,\r\n            key: 'storage',\r\n            payload: persistedState,\r\n        });\r\n\r\n        // Persist the migrated values and resume\r\n        persistor.persist();\r\n\r\n        // Remove the leftover values from localForage\r\n        for (const key of Object.keys(restoredState)) {\r\n            localForage.removeItem(oldKeyPrefix + key);\r\n        }\r\n\r\n        // eslint-disable-next-line no-console\r\n        console.log('Done migration for redux-persist@6 upgrade');\r\n    });\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport solarizedDarkCSS from 'highlight.js/styles/base16/solarized-dark.css';\r\nimport solarizedLightCSS from 'highlight.js/styles/base16/solarized-light.css';\r\nimport githubCSS from 'highlight.js/styles/github.css';\r\nimport monokaiCSS from 'highlight.js/styles/monokai.css';\r\nimport {defineMessage, defineMessages} from 'react-intl';\r\n\r\nimport {CustomStatusDuration} from '@mattermost/types/users';\r\n\r\nimport {Preferences as ReduxPreferences} from 'mattermost-redux/constants';\r\nimport Permissions from 'mattermost-redux/constants/permissions';\r\nimport keyMirror from 'mattermost-redux/utils/key_mirror';\r\nimport * as PostListUtils from 'mattermost-redux/utils/post_list';\r\n\r\nimport audioIcon from 'images/icons/audio.svg';\r\nimport codeIcon from 'images/icons/code.svg';\r\nimport excelIcon from 'images/icons/excel.svg';\r\nimport genericIcon from 'images/icons/generic.svg';\r\nimport patchIcon from 'images/icons/patch.svg';\r\nimport pdfIcon from 'images/icons/pdf.svg';\r\nimport pptIcon from 'images/icons/ppt.svg';\r\nimport videoIcon from 'images/icons/video.svg';\r\nimport wordIcon from 'images/icons/word.svg';\r\nimport githubIcon from 'images/themes/code_themes/github.png';\r\nimport monokaiIcon from 'images/themes/code_themes/monokai.png';\r\nimport solarizedDarkIcon from 'images/themes/code_themes/solarized-dark.png';\r\nimport solarizedLightIcon from 'images/themes/code_themes/solarized-light.png';\r\nimport logoWebhook from 'images/webhook_icon.jpg';\r\n\r\nexport const SettingsTypes = {\r\n    TYPE_TEXT: 'text' as const,\r\n    TYPE_LONG_TEXT: 'longtext' as const,\r\n    TYPE_NUMBER: 'number' as const,\r\n    TYPE_COLOR: 'color' as const,\r\n    TYPE_BOOL: 'bool' as const,\r\n    TYPE_PERMISSION: 'permission' as const,\r\n    TYPE_RADIO: 'radio' as const,\r\n    TYPE_BANNER: 'banner' as const,\r\n    TYPE_DROPDOWN: 'dropdown' as const,\r\n    TYPE_GENERATED: 'generated' as const,\r\n    TYPE_USERNAME: 'username' as const,\r\n    TYPE_BUTTON: 'button' as const,\r\n    TYPE_LANGUAGE: 'language' as const,\r\n    TYPE_JOBSTABLE: 'jobstable' as const,\r\n    TYPE_FILE_UPLOAD: 'fileupload' as const,\r\n    TYPE_CUSTOM: 'custom' as const,\r\n    TYPE_ROLES: 'roles' as const,\r\n    TYPE_EXPANDABLE_SETTING: 'expandable_setting' as const,\r\n};\r\n\r\nexport const InviteTypes = {\r\n    INVITE_MEMBER: 'member',\r\n    INVITE_GUEST: 'guest',\r\n};\r\n\r\nexport const PreviousViewedTypes = {\r\n    CHANNELS: 'channels',\r\n    THREADS: 'threads',\r\n};\r\n\r\nexport const Preferences = {\r\n    CATEGORY_CHANNEL_OPEN_TIME: 'channel_open_time',\r\n    CATEGORY_DIRECT_CHANNEL_SHOW: ReduxPreferences.CATEGORY_DIRECT_CHANNEL_SHOW,\r\n    CATEGORY_GROUP_CHANNEL_SHOW: ReduxPreferences.CATEGORY_GROUP_CHANNEL_SHOW,\r\n    CATEGORY_DISPLAY_SETTINGS: 'display_settings',\r\n    CATEGORY_SIDEBAR_SETTINGS: 'sidebar_settings',\r\n    CATEGORY_ADVANCED_SETTINGS: 'advanced_settings',\r\n    TUTORIAL_STEP: 'tutorial_step',\r\n    TUTORIAL_STEP_AUTO_TOUR_STATUS: 'tutorial_step_auto_tour_status',\r\n    CRT_TUTORIAL_TRIGGERED: 'crt_tutorial_triggered',\r\n    CRT_TUTORIAL_AUTO_TOUR_STATUS: 'crt_tutorial_auto_tour_status',\r\n    CRT_TUTORIAL_STEP: 'crt_tutorial_step',\r\n    EXPLORE_OTHER_TOOLS_TUTORIAL_STEP: 'explore_other_tools_step',\r\n    CRT_THREAD_PANE_STEP: 'crt_thread_pane_step',\r\n    CHANNEL_DISPLAY_MODE: 'channel_display_mode',\r\n    CHANNEL_DISPLAY_MODE_CENTERED: 'centered',\r\n    CHANNEL_DISPLAY_MODE_FULL_SCREEN: 'full',\r\n    CHANNEL_DISPLAY_MODE_DEFAULT: 'full',\r\n    MESSAGE_DISPLAY: 'message_display',\r\n    MESSAGE_DISPLAY_CLEAN: 'clean',\r\n    MESSAGE_DISPLAY_COMPACT: 'compact',\r\n    MESSAGE_DISPLAY_DEFAULT: 'clean',\r\n    COLORIZE_USERNAMES: 'colorize_usernames',\r\n    COLORIZE_USERNAMES_DEFAULT: 'true',\r\n    COLLAPSED_REPLY_THREADS: 'collapsed_reply_threads',\r\n    COLLAPSED_REPLY_THREADS_OFF: 'off',\r\n    COLLAPSED_REPLY_THREADS_ON: 'on',\r\n    CLICK_TO_REPLY: 'click_to_reply',\r\n    CLICK_TO_REPLY_DEFAULT: 'true',\r\n    COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT: 'off',\r\n    RENDER_EMOTICONS_AS_EMOJI: 'render_emoticons_as_emoji',\r\n    RENDER_EMOTICONS_AS_EMOJI_DEFAULT: 'true',\r\n    LINK_PREVIEW_DISPLAY: 'link_previews',\r\n    LINK_PREVIEW_DISPLAY_DEFAULT: 'true',\r\n    COLLAPSE_DISPLAY: 'collapse_previews',\r\n    COLLAPSE_DISPLAY_DEFAULT: 'false',\r\n    AVAILABILITY_STATUS_ON_POSTS: 'availability_status_on_posts',\r\n    AVAILABILITY_STATUS_ON_POSTS_DEFAULT: 'true',\r\n    USE_MILITARY_TIME: 'use_military_time',\r\n    USE_MILITARY_TIME_DEFAULT: 'false',\r\n    UNREAD_SCROLL_POSITION: 'unread_scroll_position',\r\n    UNREAD_SCROLL_POSITION_START_FROM_LEFT: 'start_from_left_off',\r\n    UNREAD_SCROLL_POSITION_START_FROM_NEWEST: 'start_from_newest',\r\n    CATEGORY_THEME: 'theme',\r\n    CATEGORY_NOTIFICATIONS: 'notifications',\r\n    EMAIL_INTERVAL: 'email_interval',\r\n    INTERVAL_IMMEDIATE: 30, // \"immediate\" is a 30 second interval\r\n    INTERVAL_FIFTEEN_MINUTES: 15 * 60,\r\n    INTERVAL_HOUR: 60 * 60,\r\n    INTERVAL_NEVER: 0,\r\n    NAME_NAME_FORMAT: 'name_format',\r\n    CATEGORY_SYSTEM_NOTICE: 'system_notice',\r\n    RECOMMENDED_NEXT_STEPS: 'recommended_next_steps',\r\n    TEAMS_ORDER: 'teams_order',\r\n    CLOUD_UPGRADE_BANNER: 'cloud_upgrade_banner',\r\n    CLOUD_TRIAL_BANNER: 'cloud_trial_banner',\r\n    START_TRIAL_MODAL: 'start_trial_modal',\r\n    ADMIN_CLOUD_UPGRADE_PANEL: 'admin_cloud_upgrade_panel',\r\n    CATEGORY_EMOJI: 'emoji',\r\n    EMOJI_SKINTONE: 'emoji_skintone',\r\n    ONE_CLICK_REACTIONS_ENABLED: 'one_click_reactions_enabled',\r\n    ONE_CLICK_REACTIONS_ENABLED_DEFAULT: 'true',\r\n    CLOUD_TRIAL_END_BANNER: 'cloud_trial_end_banner',\r\n    CLOUD_USER_EPHEMERAL_INFO: 'cloud_user_ephemeral_info',\r\n    CATEGORY_CLOUD_LIMITS: 'cloud_limits',\r\n    THREE_DAYS_LEFT_TRIAL_MODAL: 'three_days_left_trial_modal',\r\n\r\n    // For one off things that have a special, attention-grabbing UI until you interact with them\r\n    TOUCHED: 'touched',\r\n\r\n    // Category for actions/interactions that will happen just once\r\n    UNIQUE: 'unique',\r\n\r\n    // A/B test preference value\r\n    AB_TEST_PREFERENCE_VALUE: 'ab_test_preference_value',\r\n\r\n    RECENT_EMOJIS: 'recent_emojis',\r\n    ONBOARDING: 'onboarding',\r\n    ADVANCED_TEXT_EDITOR: 'advanced_text_editor',\r\n\r\n    FORWARD_POST_VIEWED: 'forward_post_viewed',\r\n    HIDE_POST_FILE_UPGRADE_WARNING: 'hide_post_file_upgrade_warning',\r\n    SHOWN_LIMITS_REACHED_ON_LOGIN: 'shown_limits_reached_on_login',\r\n    USE_CASE: 'use_case',\r\n    DELINQUENCY_MODAL_CONFIRMED: 'delinquency_modal_confirmed',\r\n    CONFIGURATION_BANNERS: 'configuration_banners',\r\n    NOTIFY_ADMIN_REVOKE_DOWNGRADED_WORKSPACE: 'admin_revoke_downgraded_instance',\r\n    OVERAGE_USERS_BANNER: ReduxPreferences.CATEGORY_OVERAGE_USERS_BANNER,\r\n    POST_HISTORY_LIMIT_BANNER: ReduxPreferences.CATEGORY_POST_HISTORY_LIMIT_BANNER,\r\n    USERS_LIMITS_BANNER: 'users_limits_banner',\r\n    TO_CLOUD_YEARLY_PLAN_NUDGE: 'to_cloud_yearly_plan_nudge',\r\n    TO_PAID_PLAN_NUDGE: 'to_paid_plan_nudge',\r\n    CLOUD_ANNUAL_RENEWAL_BANNER: 'cloud_annual_renewal_banner',\r\n};\r\n\r\n// For one off things that have a special, attention-grabbing UI until you interact with them\r\nexport const Touched = {\r\n    ADD_CHANNELS_CTA: 'add_channels_cta',\r\n};\r\n\r\n// Category for actions/interactions that will happen just once\r\nexport const Unique = {\r\n    HAS_CLOUD_PURCHASE: 'has_cloud_purchase',\r\n    REQUEST_TRIAL_AFTER_SERVER_UPGRADE: 'request_trial_after_upgrade',\r\n    CLICKED_UPGRADE_AND_TRIAL_BTN: 'clicked_upgradeandtrial_btn',\r\n};\r\n\r\nexport const TrialPeriodDays = {\r\n    TRIAL_30_DAYS: 30,\r\n    TRIAL_14_DAYS: 14,\r\n    TRIAL_WARNING_THRESHOLD: 7,\r\n    TRIAL_2_DAYS: 2,\r\n    TRIAL_1_DAY: 1,\r\n    TRIAL_0_DAYS: 0,\r\n};\r\n\r\nexport const suitePluginIds = {\r\n    playbooks: 'playbooks',\r\n    focalboard: 'focalboard',\r\n\r\n    apps: 'com.mattermost.apps',\r\n    calls: 'com.mattermost.calls',\r\n    nps: 'com.mattermost.nps',\r\n    channelExport: 'com.mattermost.plugin-channel-export',\r\n};\r\n\r\nexport const ActionTypes = keyMirror({\r\n    SET_PRODUCT_SWITCHER_OPEN: null,\r\n    RECEIVED_FOCUSED_POST: null,\r\n    SELECT_POST: null,\r\n    HIGHLIGHT_REPLY: null,\r\n    CLEAR_HIGHLIGHT_REPLY: null,\r\n    SELECT_POST_CARD: null,\r\n    INCREASE_POST_VISIBILITY: null,\r\n    LOADING_POSTS: null,\r\n\r\n    UPDATE_RHS_STATE: null,\r\n    UPDATE_RHS_SEARCH_TERMS: null,\r\n    UPDATE_RHS_SEARCH_TEAM: null,\r\n    UPDATE_RHS_SEARCH_TYPE: null,\r\n    UPDATE_RHS_SEARCH_RESULTS_TERMS: null,\r\n    UPDATE_RHS_SEARCH_RESULTS_TYPE: null,\r\n\r\n    SET_RHS_SIZE: null,\r\n\r\n    RHS_GO_BACK: null,\r\n    RHS_FOCUSED: null,\r\n\r\n    SET_RHS_EXPANDED: null,\r\n    TOGGLE_RHS_EXPANDED: null,\r\n\r\n    UPDATE_MOBILE_VIEW: null,\r\n\r\n    SET_NAVIGATION_BLOCKED: null,\r\n    DEFER_NAVIGATION: null,\r\n    CANCEL_NAVIGATION: null,\r\n    CONFIRM_NAVIGATION: null,\r\n\r\n    TOGGLE_IMPORT_THEME_MODAL: null,\r\n    TOGGLE_DELETE_POST_MODAL: null,\r\n    TOGGLE_EDITING_POST: null,\r\n\r\n    EMITTED_SHORTCUT_REACT_TO_LAST_POST: null,\r\n\r\n    BROWSER_CHANGE_FOCUS: null,\r\n    BROWSER_WINDOW_RESIZED: null,\r\n\r\n    RECEIVED_PLUGIN_COMPONENT: null,\r\n    REMOVED_PLUGIN_COMPONENT: null,\r\n    RECEIVED_PLUGIN_POST_COMPONENT: null,\r\n    RECEIVED_PLUGIN_POST_CARD_COMPONENT: null,\r\n    REMOVED_PLUGIN_POST_COMPONENT: null,\r\n    REMOVED_PLUGIN_POST_CARD_COMPONENT: null,\r\n    RECEIVED_WEBAPP_PLUGINS: null,\r\n    RECEIVED_WEBAPP_PLUGIN: null,\r\n    REMOVED_WEBAPP_PLUGIN: null,\r\n    RECEIVED_ADMIN_CONSOLE_REDUCER: null,\r\n    REMOVED_ADMIN_CONSOLE_REDUCER: null,\r\n    RECEIVED_ADMIN_CONSOLE_CUSTOM_COMPONENT: null,\r\n    RECEIVED_ADMIN_CONSOLE_CUSTOM_SECTION: null,\r\n    RECEIVED_PLUGIN_STATS_HANDLER: null,\r\n    RECEIVED_PLUGIN_USER_SETTINGS: null,\r\n\r\n    MODAL_OPEN: null,\r\n    MODAL_CLOSE: null,\r\n\r\n    SELECT_CHANNEL_WITH_MEMBER: null,\r\n    SET_LAST_UNREAD_CHANNEL: null,\r\n    UPDATE_CHANNEL_LAST_VIEWED_AT: null,\r\n\r\n    INCREMENT_EMOJI_PICKER_PAGE: null,\r\n    SET_RECENT_SKIN: null,\r\n\r\n    ADD_CHANNEL_CTA_DROPDOWN_TOGGLE: null,\r\n\r\n    SHOW_ONBOARDING_TASK_COMPLETION: null,\r\n    SHOW_ONBOARDING_COMPLETE_PROFILE_TOUR: null,\r\n    SHOW_ONBOARDING_VISIT_CONSOLE_TOUR: null,\r\n\r\n    TOGGLE_LHS: null,\r\n    OPEN_LHS: null,\r\n    CLOSE_LHS: null,\r\n    SET_LHS_SIZE: null,\r\n    SELECT_STATIC_PAGE: null,\r\n\r\n    SET_SHOW_PREVIEW_ON_CREATE_COMMENT: null,\r\n    SET_SHOW_PREVIEW_ON_CREATE_POST: null,\r\n    SET_SHOW_PREVIEW_ON_EDIT_CHANNEL_HEADER_MODAL: null,\r\n    SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_HEADER_MODAL: null,\r\n    SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_PURPOSE_MODAL: null,\r\n\r\n    TOGGLE_RHS_MENU: null,\r\n    OPEN_RHS_MENU: null,\r\n    CLOSE_RHS_MENU: null,\r\n\r\n    DISMISS_NOTICE: null,\r\n    SHOW_NOTICE: null,\r\n\r\n    SELECT_ATTACHMENT_MENU_ACTION: null,\r\n\r\n    RECEIVED_TRANSLATIONS: null,\r\n\r\n    INCREMENT_WS_ERROR_COUNT: null,\r\n    RESET_WS_ERROR_COUNT: null,\r\n    RECEIVED_POSTS_FOR_CHANNEL_AT_TIME: null,\r\n    CHANNEL_POSTS_STATUS: null,\r\n    CHANNEL_SYNC_STATUS: null,\r\n    ALL_CHANNEL_SYNC_STATUS: null,\r\n\r\n    UPDATE_ACTIVE_SECTION: null,\r\n\r\n    RECEIVED_MARKETPLACE_PLUGINS: null,\r\n    RECEIVED_MARKETPLACE_APPS: null,\r\n    FILTER_MARKETPLACE_LISTING: null,\r\n    INSTALLING_MARKETPLACE_ITEM: null,\r\n    INSTALLING_MARKETPLACE_ITEM_SUCCEEDED: null,\r\n    INSTALLING_MARKETPLACE_ITEM_FAILED: null,\r\n\r\n    POST_UNREAD_SUCCESS: null,\r\n\r\n    SET_UNREAD_FILTER_ENABLED: null,\r\n    UPDATE_TOAST_STATUS: null,\r\n    UPDATE_THREAD_TOAST_STATUS: null,\r\n\r\n    SIDEBAR_DRAGGING_SET_STATE: null,\r\n    SIDEBAR_DRAGGING_STOP: null,\r\n    ADD_NEW_CATEGORY_ID: null,\r\n    MULTISELECT_CHANNEL: null,\r\n    MULTISELECT_CHANNEL_ADD: null,\r\n    MULTISELECT_CHANNEL_TO: null,\r\n    MULTISELECT_CHANNEL_CLEAR: null,\r\n\r\n    TRACK_ANNOUNCEMENT_BAR: null,\r\n    DISMISS_ANNOUNCEMENT_BAR: null,\r\n\r\n    PREFETCH_POSTS_FOR_CHANNEL: null,\r\n\r\n    SET_FILES_FILTER_BY_EXT: null,\r\n\r\n    SUPPRESS_RHS: null,\r\n    UNSUPPRESS_RHS: null,\r\n\r\n    SET_EDIT_CHANNEL_MEMBERS: null,\r\n    NEEDS_LOGGED_IN_LIMIT_REACHED_CHECK: null,\r\n\r\n    SET_DRAFT_SOURCE: null,\r\n\r\n    SET_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES: null,\r\n    CLEAR_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES: null,\r\n\r\n    SET_READOUT: 'SET_READOUT',\r\n    CLEAR_READOUT: 'CLEAR_READOUT',\r\n});\r\n\r\nexport const PostRequestTypes = keyMirror({\r\n    BEFORE_ID: null,\r\n    AFTER_ID: null,\r\n});\r\n\r\nexport const ModalIdentifiers = {\r\n    ABOUT: 'about',\r\n    TEAM_SETTINGS: 'team_settings',\r\n    CHANNEL_INFO: 'channel_info',\r\n    DELETE_CHANNEL: 'delete_channel',\r\n    UNARCHIVE_CHANNEL: 'unarchive_channel',\r\n    CHANNEL_NOTIFICATIONS: 'channel_notifications',\r\n    CHANNEL_INVITE: 'channel_invite',\r\n    CHANNEL_MEMBERS: 'channel_members',\r\n    CHANNEL_SETTINGS: 'channel_settings',\r\n    TEAM_MEMBERS: 'team_members',\r\n    TEST_RESULTS: 'test_results',\r\n    ADD_USER_TO_CHANNEL: 'add_user_to_channel',\r\n    ADD_USER_TO_ROLE: 'add_user_to_role',\r\n    ADD_USER_TO_TEAM: 'add_user_to_team',\r\n    CREATE_DM_CHANNEL: 'create_dm_channel',\r\n    EDIT_CHANNEL_HEADER: 'edit_channel_header',\r\n    EDIT_CHANNEL_PURPOSE: 'edit_channel_purpose',\r\n    NOTIFICATIONS: 'notifications',\r\n    DELETE_POST: 'delete_post',\r\n    CONVERT_CHANNEL: 'convert_channel',\r\n    RESET_STATUS: 'reset_status',\r\n    LEAVE_TEAM: 'leave_team',\r\n    RENAME_CHANNEL: 'rename_channel',\r\n    USER_SETTINGS: 'user_settings',\r\n    QUICK_SWITCH: 'quick_switch',\r\n    REMOVED_FROM_CHANNEL: 'removed_from_channel',\r\n    EMAIL_INVITE: 'email_invite',\r\n    INTERACTIVE_DIALOG: 'interactive_dialog',\r\n    APPS_MODAL: 'apps_modal',\r\n    ADD_TEAMS_TO_SCHEME: 'add_teams_to_scheme',\r\n    INVITATION: 'invitation',\r\n    ADD_GROUPS_TO_TEAM: 'add_groups_to_team',\r\n    ADD_GROUPS_TO_CHANNEL: 'add_groups_to_channel',\r\n    MANAGE_TEAM_GROUPS: 'manage_team_groups',\r\n    MANAGE_CHANNEL_GROUPS: 'manage_channel_groups',\r\n    GROUP_MEMBERS: 'group_members',\r\n    MOBILE_SUBMENU: 'mobile_submenu',\r\n    PLUGIN_MARKETPLACE: 'plugin_marketplace',\r\n    EDIT_CATEGORY: 'edit_category',\r\n    DELETE_CATEGORY: 'delete_category',\r\n    SIDEBAR_WHATS_NEW_MODAL: 'sidebar_whats_new_modal',\r\n    UPGRADE_CLOUD_ACCOUNT: 'upgrade_cloud_account',\r\n    START_TRIAL_MODAL: 'start_trial_modal',\r\n    TRIAL_BENEFITS_MODAL: 'trial_benefits_modal',\r\n    PRICING_MODAL: 'pricing_modal',\r\n    LEARN_MORE_TRIAL_MODAL: 'learn_more_trial_modal',\r\n    ENTERPRISE_EDITION_LICENSE: 'enterprise_edition_license',\r\n    CONFIRM_NOTIFY_ADMIN: 'confirm_notify_admin',\r\n    REMOVE_NEXT_STEPS_MODAL: 'remove_next_steps_modal',\r\n    MORE_CHANNELS: 'more_channels',\r\n    NEW_CHANNEL_MODAL: 'new_channel_modal',\r\n    CLOUD_PURCHASE: 'cloud_purchase',\r\n    SELF_HOSTED_PURCHASE: 'self_hosted_purchase',\r\n    CLOUD_DOWNGRADE_CHOOSE_TEAM: 'cloud_downgrade_choose_team',\r\n    SUCCESS_MODAL: 'success_modal',\r\n    ERROR_MODAL: 'error_modal',\r\n    DND_CUSTOM_TIME_PICKER: 'dnd_custom_time_picker',\r\n    POST_REMINDER_CUSTOM_TIME_PICKER: 'post_reminder_custom_time_picker',\r\n    CUSTOM_STATUS: 'custom_status',\r\n    COMMERCIAL_SUPPORT: 'commercial_support',\r\n    NO_INTERNET_CONNECTION: 'no_internet_connection',\r\n    JOIN_CHANNEL_PROMPT: 'join_channel_prompt',\r\n    COLLAPSED_REPLY_THREADS_MODAL: 'collapsed_reply_threads_modal',\r\n    NOTIFY_CONFIRM_MODAL: 'notify_confirm_modal',\r\n    CONFIRM_LICENSE_REMOVAL: 'confirm_license_removal',\r\n    CONFIRM: 'confirm',\r\n    USER_GROUPS: 'user_groups',\r\n    USER_GROUPS_CREATE: 'user_groups_create',\r\n    VIEW_USER_GROUP: 'view_user_group',\r\n    ADD_USERS_TO_GROUP: 'add_users_to_group',\r\n    EDIT_GROUP_MODAL: 'edit_group_modal',\r\n    POST_DELETED_MODAL: 'post_deleted_modal',\r\n    FILE_PREVIEW_MODAL: 'file_preview_modal',\r\n    LEAVE_PRIVATE_CHANNEL_MODAL: 'leave_private_channel_modal',\r\n    GET_PUBLIC_LINK_MODAL: 'get_public_link_modal',\r\n    KEYBOARD_SHORTCUTS_MODAL: 'keyboar_shortcuts_modal',\r\n    USERS_TO_BE_REMOVED: 'users_to_be_removed',\r\n    DELETE_DRAFT: 'delete_draft_modal',\r\n    SEND_DRAFT: 'send_draft_modal',\r\n    UPLOAD_LICENSE: 'upload_license',\r\n    CLOUD_LIMITS: 'cloud_limits',\r\n    THREE_DAYS_LEFT_TRIAL_MODAL: 'three_days_left_trial_modal',\r\n    REQUEST_BUSINESS_EMAIL_MODAL: 'request_business_email_modal',\r\n    FEATURE_RESTRICTED_MODAL: 'feature_restricted_modal',\r\n    FORWARD_POST_MODAL: 'forward_post_modal',\r\n    JOIN_PUBLIC_CHANNEL_MODAL: 'join_public_channel_modal',\r\n    CLOUD_INVOICE_PREVIEW: 'cloud_invoice_preview',\r\n    BILLING_HISTORY: 'billing_history',\r\n    SUM_OF_MEMBERS_MODAL: 'sum_of_members_modal',\r\n    RESTORE_POST_MODAL: 'restore_post',\r\n    INFO_TOAST: 'info_toast',\r\n    MARK_ALL_THREADS_AS_READ: 'mark_all_threads_as_read_modal',\r\n    DELINQUENCY_MODAL_DOWNGRADE: 'delinquency_modal_downgrade',\r\n    CLOUD_LIMITS_DOWNGRADE: 'cloud_limits_downgrade',\r\n    PERSIST_NOTIFICATION_CONFIRM_MODAL: 'persist_notification_confirm_modal',\r\n    AIR_GAPPED_SELF_HOSTED_PURCHASE: 'air_gapped_self_hosted_purchase',\r\n    DOWNGRADE_MODAL: 'downgrade_modal',\r\n    PURCHASE_IN_PROGRESS: 'purchase_in_progress',\r\n    DELETE_WORKSPACE: 'delete_workspace',\r\n    FEEDBACK: 'feedback',\r\n    DELETE_WORKSPACE_PROGRESS: 'delete_workspace_progress',\r\n    DELETE_WORKSPACE_RESULT: 'delete_workspace_result',\r\n    SCREENING_IN_PROGRESS: 'screening_in_progress',\r\n    CONFIRM_SWITCH_TO_YEARLY: 'confirm_switch_to_yearly',\r\n    EXPANSION_IN_PROGRESS: 'expansion_in_progress',\r\n    SELF_HOSTED_EXPANSION: 'self_hosted_expansion',\r\n    START_TRIAL_FORM_MODAL: 'start_trial_form_modal',\r\n    START_TRIAL_FORM_MODAL_RESULT: 'start_trial_form_modal_result',\r\n    MOVE_THREAD_MODAL: 'move_thread_modal',\r\n    CONVERT_GM_TO_CHANNEL: 'convert_gm_to_channel',\r\n    IP_FILTERING_ADD_EDIT_MODAL: 'ip_filtering_add_edit_modal',\r\n    IP_FILTERING_DELETE_CONFIRMATION_MODAL: 'ip_filtering_delete_confirmation_modal',\r\n    IP_FILTERING_SAVE_CONFIRMATION_MODAL: 'ip_filtering_save_confirmation_modal',\r\n    REACTION_LIMIT_REACHED: 'reaction_limit_reached',\r\n    AIR_GAPPED_CONTACT_SALES: 'air_gapped_contact_sales',\r\n    MANAGE_ROLES_MODAL: 'manage_roles_modal',\r\n    MANAGE_TEAMS_MODAL: 'manage_teams_modal',\r\n    MANAGE_TOKENS_MODAL: 'manage_teams_modal',\r\n    RESET_PASSWORD_MODAL: 'reset_password_modal',\r\n    RESET_EMAIL_MODAL: 'reset_email_modal',\r\n    DEACTIVATE_MEMBER_MODAL: 'deactivate_member_modal',\r\n    PROMOTE_TO_MEMBER_MODAL: 'promote_to_member_modal',\r\n    DEMOTE_TO_GUEST_MODAL: 'demote_to_guest_modal',\r\n    REVOKE_SESSIONS_MODAL: 'revoke_sessions_modal',\r\n    CREATE_GROUP_SYNCABLES_MEMBERSHIP_MODAL: 'create_group_syncables_membership_modal',\r\n    EXPORT_USER_DATA_MODAL: 'export_user_data_modal',\r\n    UPGRADE_EXPORT_DATA_MODAL: 'upgrade_export_data_modal',\r\n    EXPORT_ERROR_MODAL: 'export_error_modal',\r\n    CHANNEL_BOOKMARK_DELETE: 'channel_bookmark_delete',\r\n    CHANNEL_BOOKMARK_CREATE: 'channel_bookmark_create',\r\n    CONFIRM_MANAGE_USER_SETTINGS_MODAL: 'confirm_switch_to_settings',\r\n    SCHEDULED_POST_CUSTOM_TIME_MODAL: 'scheduled_post_custom_time',\r\n    SECURE_CONNECTION_DELETE: 'secure_connection_delete',\r\n    SECURE_CONNECTION_CREATE_INVITE: 'secure_connection_create_invite',\r\n    SECURE_CONNECTION_ACCEPT_INVITE: 'secure_connection_accept_invite',\r\n    SHARED_CHANNEL_REMOTE_INVITE: 'shared_channel_remote_invite',\r\n    SHARED_CHANNEL_REMOTE_UNINVITE: 'shared_channel_remote_uninvite',\r\n    CONFIRM_RESET_FAILED_ATTEMPTS_MODAL: 'confirm_reset_failed_attempts_modal',\r\n    USER_PROPERTY_FIELD_DELETE: 'user_property_field_delete',\r\n    ATTRIBUTE_MODAL_LDAP: 'attribute_modal_ldap',\r\n    ATTRIBUTE_MODAL_SAML: 'attribute_modal_saml',\r\n    FLAG_POST: 'flag_post',\r\n};\r\n\r\nexport const UserStatuses = {\r\n    OUT_OF_OFFICE: 'ooo',\r\n    OFFLINE: 'offline',\r\n    AWAY: 'away',\r\n    ONLINE: 'online',\r\n    DND: 'dnd',\r\n} as const;\r\n\r\nexport const EventTypes = Object.assign(\r\n    {\r\n        KEY_DOWN: 'keydown',\r\n        KEY_UP: 'keyup',\r\n        CLICK: 'click',\r\n        FOCUS: 'focus',\r\n        BLUR: 'blur',\r\n        SHORTCUT: 'shortcut',\r\n        MOUSE_DOWN: 'mousedown',\r\n        MOUSE_UP: 'mouseup',\r\n    },\r\n    keyMirror({\r\n        POST_LIST_SCROLL_TO_BOTTOM: null,\r\n    }),\r\n);\r\n\r\nexport const CloudProducts = {\r\n\r\n    // STARTER sku is used by both free cloud starter\r\n    // and paid cloud starter (legacy cloud starter).\r\n    // Where differentiation is needed, check whether any limits are applied.\r\n    // If none are applied, it must be legacy cloud starter.\r\n    STARTER: 'cloud-starter',\r\n    PROFESSIONAL: 'cloud-professional',\r\n    ENTERPRISE: 'cloud-enterprise',\r\n    LEGACY: 'cloud-legacy',\r\n    ADVANCED: 'cloud-advanced',\r\n};\r\n\r\nexport const CloudBillingTypes = {\r\n    INTERNAL: 'internal',\r\n    LICENSED: 'licensed',\r\n};\r\n\r\nexport const SelfHostedProducts = {\r\n    STARTER: 'starter',\r\n    PROFESSIONAL: 'professional',\r\n    ENTERPRISE: 'enterprise',\r\n};\r\n\r\nexport const MattermostFeatures = {\r\n    GUEST_ACCOUNTS: 'mattermost.feature.guest_accounts',\r\n    CUSTOM_USER_GROUPS: 'mattermost.feature.custom_user_groups',\r\n    CREATE_MULTIPLE_TEAMS: 'mattermost.feature.create_multiple_teams',\r\n    START_CALL: 'mattermost.feature.start_call',\r\n    PLAYBOOKS_RETRO: 'mattermost.feature.playbooks_retro',\r\n    UNLIMITED_MESSAGES: 'mattermost.feature.unlimited_messages',\r\n    UNLIMITED_FILE_STORAGE: 'mattermost.feature.unlimited_file_storage',\r\n    ALL_PROFESSIONAL_FEATURES: 'mattermost.feature.all_professional',\r\n    ALL_ENTERPRISE_FEATURES: 'mattermost.feature.all_enterprise',\r\n    UPGRADE_DOWNGRADED_WORKSPACE: 'mattermost.feature.upgrade_downgraded_workspace',\r\n    PLUGIN_FEATURE: 'mattermost.feature.plugin',\r\n    HIGHLIGHT_WITHOUT_NOTIFICATION: 'mattermost.feature.highlight_without_notification',\r\n};\r\n\r\nexport enum LicenseSkus {\r\n    E10 = 'E10',\r\n    E20 = 'E20',\r\n    Starter = 'starter',\r\n    Professional = 'professional',\r\n    Enterprise = 'enterprise',\r\n    EnterpriseAdvanced = 'advanced',\r\n    Entry = 'entry',\r\n}\r\n\r\nexport function getLicenseTier(licenseSku: string): number {\r\n    switch (licenseSku) {\r\n    case LicenseSkus.Professional:\r\n        return 10;\r\n    case LicenseSkus.Enterprise:\r\n        return 20;\r\n    case LicenseSkus.Entry:\r\n    case LicenseSkus.EnterpriseAdvanced:\r\n        return 30;\r\n    default:\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport const CloudProductToSku = {\r\n    [CloudProducts.PROFESSIONAL]: LicenseSkus.Professional,\r\n    [CloudProducts.ENTERPRISE]: LicenseSkus.Enterprise,\r\n};\r\n\r\nexport const A11yClassNames = {\r\n    REGION: 'a11y__region',\r\n    SECTION: 'a11y__section',\r\n    ACTIVE: 'a11y--active',\r\n    FOCUSED: 'a11y--focused',\r\n    MODAL: 'a11y__modal',\r\n    POPUP: 'a11y__popup',\r\n};\r\n\r\nexport const A11yAttributeNames = {\r\n    SORT_ORDER: 'data-a11y-sort-order',\r\n    ORDER_REVERSE: 'data-a11y-order-reversed',\r\n    FOCUS_CHILD: 'data-a11y-focus-child',\r\n    LOOP_NAVIGATION: 'data-a11y-loop-navigation',\r\n    DISABLE_NAVIGATION: 'data-a11y-disable-nav',\r\n};\r\n\r\nexport const A11yCustomEventTypes = {\r\n    ACTIVATE: 'a11yactivate',\r\n    DEACTIVATE: 'a11ydeactivate',\r\n    UPDATE: 'a11yupdate',\r\n    FOCUS: 'a11yfocus',\r\n};\r\n\r\nexport type A11yFocusEventDetail = {\r\n    target: HTMLElement | null | undefined;\r\n    keyboardOnly: boolean;\r\n}\r\n\r\nexport function isA11yFocusEventDetail(o: unknown): o is A11yFocusEventDetail {\r\n    return Boolean(o && typeof o === 'object' && 'keyboardOnly' in o);\r\n}\r\n\r\nexport const AppEvents = {\r\n    FOCUS_EDIT_TEXTBOX: 'focus_edit_textbox',\r\n};\r\n\r\nexport const SocketEvents = {\r\n    POSTED: 'posted',\r\n    POST_EDITED: 'post_edited',\r\n    POST_DELETED: 'post_deleted',\r\n    POST_UPDATED: 'post_updated',\r\n    POST_UNREAD: 'post_unread',\r\n    CHANNEL_CONVERTED: 'channel_converted',\r\n    CHANNEL_CREATED: 'channel_created',\r\n    CHANNEL_DELETED: 'channel_deleted',\r\n    CHANNEL_UNARCHIVED: 'channel_restored',\r\n    CHANNEL_UPDATED: 'channel_updated',\r\n    CHANNEL_BOOKMARK_CREATED: 'channel_bookmark_created',\r\n    CHANNEL_BOOKMARK_DELETED: 'channel_bookmark_deleted',\r\n    CHANNEL_BOOKMARK_UPDATED: 'channel_bookmark_updated',\r\n    CHANNEL_BOOKMARK_SORTED: 'channel_bookmark_sorted',\r\n    MULTIPLE_CHANNELS_VIEWED: 'multiple_channels_viewed',\r\n    CHANNEL_MEMBER_UPDATED: 'channel_member_updated',\r\n    CHANNEL_SCHEME_UPDATED: 'channel_scheme_updated',\r\n    DIRECT_ADDED: 'direct_added',\r\n    GROUP_ADDED: 'group_added',\r\n    NEW_USER: 'new_user',\r\n    ADDED_TO_TEAM: 'added_to_team',\r\n    JOIN_TEAM: 'join_team',\r\n    LEAVE_TEAM: 'leave_team',\r\n    UPDATE_TEAM: 'update_team',\r\n    DELETE_TEAM: 'delete_team',\r\n    UPDATE_TEAM_SCHEME: 'update_team_scheme',\r\n    USER_ADDED: 'user_added',\r\n    USER_REMOVED: 'user_removed',\r\n    USER_UPDATED: 'user_updated',\r\n    USER_ROLE_UPDATED: 'user_role_updated',\r\n    MEMBERROLE_UPDATED: 'memberrole_updated',\r\n    ROLE_ADDED: 'role_added',\r\n    ROLE_REMOVED: 'role_removed',\r\n    ROLE_UPDATED: 'role_updated',\r\n    TYPING: 'typing',\r\n    PREFERENCE_CHANGED: 'preference_changed',\r\n    PREFERENCES_CHANGED: 'preferences_changed',\r\n    PREFERENCES_DELETED: 'preferences_deleted',\r\n    EPHEMERAL_MESSAGE: 'ephemeral_message',\r\n    STATUS_CHANGED: 'status_change',\r\n    HELLO: 'hello',\r\n    REACTION_ADDED: 'reaction_added',\r\n    REACTION_REMOVED: 'reaction_removed',\r\n    EMOJI_ADDED: 'emoji_added',\r\n    PLUGIN_ENABLED: 'plugin_enabled',\r\n    PLUGIN_DISABLED: 'plugin_disabled',\r\n    LICENSE_CHANGED: 'license_changed',\r\n    CONFIG_CHANGED: 'config_changed',\r\n    PLUGIN_STATUSES_CHANGED: 'plugin_statuses_changed',\r\n    OPEN_DIALOG: 'open_dialog',\r\n    RECEIVED_GROUP: 'received_group',\r\n    GROUP_MEMBER_ADD: 'group_member_add',\r\n    GROUP_MEMBER_DELETED: 'group_member_deleted',\r\n    RECEIVED_GROUP_ASSOCIATED_TO_TEAM: 'received_group_associated_to_team',\r\n    RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM: 'received_group_not_associated_to_team',\r\n    RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL: 'received_group_associated_to_channel',\r\n    RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL: 'received_group_not_associated_to_channel',\r\n    SIDEBAR_CATEGORY_CREATED: 'sidebar_category_created',\r\n    SIDEBAR_CATEGORY_UPDATED: 'sidebar_category_updated',\r\n    SIDEBAR_CATEGORY_DELETED: 'sidebar_category_deleted',\r\n    SIDEBAR_CATEGORY_ORDER_UPDATED: 'sidebar_category_order_updated',\r\n    USER_ACTIVATION_STATUS_CHANGED: 'user_activation_status_change',\r\n    CLOUD_PAYMENT_STATUS_UPDATED: 'cloud_payment_status_updated',\r\n    CLOUD_SUBSCRIPTION_CHANGED: 'cloud_subscription_changed',\r\n    APPS_FRAMEWORK_REFRESH_BINDINGS: 'custom_com.mattermost.apps_refresh_bindings',\r\n    APPS_FRAMEWORK_PLUGIN_ENABLED: 'custom_com.mattermost.apps_plugin_enabled',\r\n    APPS_FRAMEWORK_PLUGIN_DISABLED: 'custom_com.mattermost.apps_plugin_disabled',\r\n    FIRST_ADMIN_VISIT_MARKETPLACE_STATUS_RECEIVED: 'first_admin_visit_marketplace_status_received',\r\n    THREAD_UPDATED: 'thread_updated',\r\n    THREAD_FOLLOW_CHANGED: 'thread_follow_changed',\r\n    THREAD_READ_CHANGED: 'thread_read_changed',\r\n    POST_ACKNOWLEDGEMENT_ADDED: 'post_acknowledgement_added',\r\n    POST_ACKNOWLEDGEMENT_REMOVED: 'post_acknowledgement_removed',\r\n    DRAFT_CREATED: 'draft_created',\r\n    DRAFT_UPDATED: 'draft_updated',\r\n    DRAFT_DELETED: 'draft_deleted',\r\n    SCHEDULED_POST_CREATED: 'scheduled_post_created',\r\n    SCHEDULED_POST_UPDATED: 'scheduled_post_updated',\r\n    SCHEDULED_POST_DELETED: 'scheduled_post_deleted',\r\n    PERSISTENT_NOTIFICATION_TRIGGERED: 'persistent_notification_triggered',\r\n    HOSTED_CUSTOMER_SIGNUP_PROGRESS_UPDATED: 'hosted_customer_signup_progress_updated',\r\n    CPA_FIELD_CREATED: 'custom_profile_attributes_field_created',\r\n    CPA_FIELD_UPDATED: 'custom_profile_attributes_field_updated',\r\n    CPA_FIELD_DELETED: 'custom_profile_attributes_field_deleted',\r\n    CPA_VALUES_UPDATED: 'custom_profile_attributes_values_updated',\r\n};\r\n\r\nexport const TutorialSteps = {\r\n    ADD_FIRST_CHANNEL: -1,\r\n    POST_POPOVER: 0,\r\n    CHANNEL_POPOVER: 1,\r\n    ADD_CHANNEL_POPOVER: 2,\r\n    MENU_POPOVER: 3,\r\n    PRODUCT_SWITCHER: 4,\r\n    SETTINGS: 5,\r\n    START_TRIAL: 6,\r\n    FINISHED: 999,\r\n};\r\n\r\n// note: add steps in same order as the keys in TutorialSteps above\r\nexport const AdminTutorialSteps = ['START_TRIAL'];\r\n\r\nexport const CrtTutorialSteps = {\r\n    WELCOME_POPOVER: 0,\r\n    LIST_POPOVER: 1,\r\n    UNREAD_POPOVER: 2,\r\n    FINISHED: 999,\r\n};\r\n\r\nexport const CrtTutorialTriggerSteps = {\r\n    START: 0,\r\n    STARTED: 1,\r\n    FINISHED: 999,\r\n};\r\n\r\nexport const CrtThreadPaneSteps = {\r\n    THREADS_PANE_POPOVER: 0,\r\n    FINISHED: 999,\r\n};\r\n\r\nexport const TopLevelProducts = {\r\n    BOARDS: 'Boards',\r\n    PLAYBOOKS: 'Playbooks',\r\n};\r\n\r\nexport enum ItemStatus {\r\n    NONE = 'none',\r\n    SUCCESS = 'success',\r\n    INFO = 'info',\r\n    WARNING = 'warning',\r\n    ERROR = 'error',\r\n}\r\n\r\nexport const RecommendedNextStepsLegacy = {\r\n    COMPLETE_PROFILE: 'complete_profile',\r\n    TEAM_SETUP: 'team_setup',\r\n    INVITE_MEMBERS: 'invite_members',\r\n    PREFERENCES_SETUP: 'preferences_setup',\r\n    NOTIFICATION_SETUP: 'notification_setup',\r\n    DOWNLOAD_APPS: 'download_apps',\r\n    CREATE_FIRST_CHANNEL: 'create_first_channel',\r\n    HIDE: 'hide',\r\n    SKIP: 'skip',\r\n};\r\n\r\nexport const Threads = {\r\n    CHANGED_SELECTED_THREAD: 'changed_selected_thread',\r\n    CHANGED_LAST_VIEWED_AT: 'changed_last_viewed_at',\r\n    MANUALLY_UNREAD_THREAD: 'manually_unread_thread',\r\n    CHANGED_LAST_UPDATE_AT: 'changed_last_update_at',\r\n};\r\n\r\nexport const CloudBanners = {\r\n    HIDE: 'hide',\r\n    TRIAL: 'trial',\r\n    UPGRADE_FROM_TRIAL: 'upgrade_from_trial',\r\n    THREE_DAYS_LEFT_TRIAL_MODAL_DISMISSED: 'dismiss_3_days_left_trial_modal',\r\n    NUDGE_TO_CLOUD_YEARLY_PLAN_SNOOZED: 'nudge_to_cloud_yearly_plan_snoozed',\r\n    NUDGE_TO_PAID_PLAN_SNOOZED: 'nudge_to_paid_plan_snoozed',\r\n    ANNUAL_RENEWAL_60_DAY: 'annual_renewal_60_day',\r\n    ANNUAL_RENEWAL_30_DAY: 'annual_renewal_30_day',\r\n};\r\n\r\nexport const ConfigurationBanners = {\r\n    LICENSE_EXPIRED: 'license_expired',\r\n};\r\n\r\nexport const AdvancedTextEditor = {\r\n    COMMENT: 'comment',\r\n    POST: 'post',\r\n    EDIT: 'edit',\r\n};\r\n\r\nexport const AdvancedTextEditorTextboxIds = {\r\n    InCenter: 'post_textbox',\r\n    InRHSComment: 'reply_textbox',\r\n    InModal: 'modal_textbox',\r\n    InEditMode: 'edit_textbox',\r\n    Default: 'textbox',\r\n};\r\n\r\nexport const PostTypes = {\r\n    JOIN_LEAVE: 'system_join_leave',\r\n    JOIN_CHANNEL: 'system_join_channel',\r\n    LEAVE_CHANNEL: 'system_leave_channel',\r\n    ADD_TO_CHANNEL: 'system_add_to_channel',\r\n    REMOVE_FROM_CHANNEL: 'system_remove_from_channel',\r\n    ADD_REMOVE: 'system_add_remove',\r\n    JOIN_TEAM: 'system_join_team',\r\n    LEAVE_TEAM: 'system_leave_team',\r\n    ADD_TO_TEAM: 'system_add_to_team',\r\n    REMOVE_FROM_TEAM: 'system_remove_from_team',\r\n    HEADER_CHANGE: 'system_header_change',\r\n    DISPLAYNAME_CHANGE: 'system_displayname_change',\r\n    CONVERT_CHANNEL: 'system_convert_channel',\r\n    PURPOSE_CHANGE: 'system_purpose_change',\r\n    CHANNEL_DELETED: 'system_channel_deleted',\r\n    CHANNEL_UNARCHIVED: 'system_channel_restored',\r\n    SYSTEM_GENERIC: 'system_generic',\r\n    FAKE_PARENT_DELETED: 'system_fake_parent_deleted',\r\n    EPHEMERAL: 'system_ephemeral',\r\n    EPHEMERAL_ADD_TO_CHANNEL: 'system_ephemeral_add_to_channel',\r\n    REMOVE_LINK_PREVIEW: 'remove_link_preview',\r\n    ME: 'me',\r\n    REMINDER: 'reminder',\r\n    WRANGLER: 'system_wrangler',\r\n    CUSTOM_CALLS: 'custom_calls',\r\n    CUSTOM_CALLS_RECORDING: 'custom_calls_recording',\r\n    CUSTOM_DATA_SPILLAGE_REPORT: 'custom_spillage_report',\r\n};\r\n\r\nexport const StatTypes = keyMirror({\r\n    TOTAL_USERS: null,\r\n    TOTAL_PUBLIC_CHANNELS: null,\r\n    TOTAL_PRIVATE_GROUPS: null,\r\n    TOTAL_POSTS: null,\r\n    TOTAL_TEAMS: null,\r\n    TOTAL_IHOOKS: null,\r\n    TOTAL_OHOOKS: null,\r\n    TOTAL_COMMANDS: null,\r\n    TOTAL_SESSIONS: null,\r\n    POST_PER_DAY: null,\r\n    BOT_POST_PER_DAY: null,\r\n    USERS_WITH_POSTS_PER_DAY: null,\r\n    RECENTLY_ACTIVE_USERS: null,\r\n    NEWLY_CREATED_USERS: null,\r\n    TOTAL_WEBSOCKET_CONNECTIONS: null,\r\n    TOTAL_MASTER_DB_CONNECTIONS: null,\r\n    TOTAL_READ_DB_CONNECTIONS: null,\r\n    DAILY_ACTIVE_USERS: null,\r\n    MONTHLY_ACTIVE_USERS: null,\r\n    TOTAL_FILE_COUNT: null,\r\n    TOTAL_FILE_SIZE: null,\r\n});\r\n\r\nexport const SearchTypes = keyMirror({\r\n    SET_MODAL_SEARCH: null,\r\n    SET_POPOVER_SEARCH: null,\r\n    SET_MODAL_FILTERS: null,\r\n    SET_USER_GRID_SEARCH: null,\r\n    SET_USER_GRID_FILTERS: null,\r\n    SET_TEAM_LIST_SEARCH: null,\r\n    SET_CHANNEL_LIST_SEARCH: null,\r\n    SET_CHANNEL_LIST_FILTERS: null,\r\n    SET_CHANNEL_MEMBERS_RHS_SEARCH: null,\r\n});\r\n\r\nexport const StorageTypes = keyMirror({\r\n    SET_GLOBAL_ITEM: null,\r\n    REMOVE_GLOBAL_ITEM: null,\r\n    ACTION_ON_GLOBAL_ITEMS_WITH_PREFIX: null,\r\n    STORAGE_REHYDRATE: null,\r\n});\r\n\r\nexport const StoragePrefixes = {\r\n    EMBED_VISIBLE: 'isVisible_',\r\n    COMMENT_DRAFT: 'comment_draft_',\r\n    EDIT_DRAFT: 'edit_draft_',\r\n    DRAFT: 'draft_',\r\n    LOGOUT: '__logout__',\r\n    LOGIN: '__login__',\r\n    ANNOUNCEMENT: '__announcement__',\r\n    LANDING_PAGE_SEEN: '__landingPageSeen__',\r\n    LANDING_PREFERENCE: '__landing-preference__',\r\n    CHANNEL_CATEGORY_COLLAPSED: 'channelCategoryCollapsed_',\r\n    INLINE_IMAGE_VISIBLE: 'isInlineImageVisible_',\r\n    DELINQUENCY: 'delinquency_',\r\n    HIDE_JOINED_CHANNELS: 'hideJoinedChannels',\r\n    HIDE_NOTIFICATION_PERMISSION_REQUEST_BANNER: 'hideNotificationPermissionRequestBanner',\r\n};\r\n\r\nexport const LandingPreferenceTypes = {\r\n    MATTERMOSTAPP: 'mattermostapp',\r\n    BROWSER: 'browser',\r\n};\r\n\r\nexport const ErrorPageTypes = {\r\n    LOCAL_STORAGE: 'local_storage',\r\n    OAUTH_ACCESS_DENIED: 'oauth_access_denied',\r\n    OAUTH_MISSING_CODE: 'oauth_missing_code',\r\n    OAUTH_INVALID_PARAM: 'oauth_invalid_param',\r\n    OAUTH_INVALID_REDIRECT_URL: 'oauth_invalid_redirect_url',\r\n    PAGE_NOT_FOUND: 'page_not_found',\r\n    PERMALINK_NOT_FOUND: 'permalink_not_found',\r\n    TEAM_NOT_FOUND: 'team_not_found',\r\n    CHANNEL_NOT_FOUND: 'channel_not_found',\r\n    POST_NOT_FOUND: 'post_not_found',\r\n    CLOUD_ARCHIVED: 'cloud_archived',\r\n};\r\n\r\nexport const JobTypes = {\r\n    DATA_RETENTION: 'data_retention',\r\n    ELASTICSEARCH_POST_INDEXING: 'elasticsearch_post_indexing',\r\n    BLEVE_POST_INDEXING: 'bleve_post_indexing',\r\n    LDAP_SYNC: 'ldap_sync',\r\n    MESSAGE_EXPORT: 'message_export',\r\n    ACCESS_CONTROL_SYNC: 'access_control_sync',\r\n} as const;\r\n\r\nexport const JobStatuses = {\r\n    PENDING: 'pending',\r\n    IN_PROGRESS: 'in_progress',\r\n    SUCCESS: 'success',\r\n    ERROR: 'error',\r\n    CANCEL_REQUESTED: 'cancel_requested',\r\n    CANCELED: 'canceled',\r\n    WARNING: 'warning',\r\n};\r\n\r\nexport const AnnouncementBarTypes = {\r\n    ANNOUNCEMENT: 'announcement',\r\n    CRITICAL: 'critical',\r\n    DEVELOPER: 'developer',\r\n    SUCCESS: 'success',\r\n    ADVISOR: 'advisor',\r\n    ADVISOR_ACK: 'advisor-ack',\r\n    GENERAL: 'general',\r\n    WARNING: 'warning',\r\n};\r\n\r\nexport const AnnouncementBarMessages = {\r\n    EMAIL_VERIFICATION_REQUIRED: 'announcement_bar.error.email_verification_required',\r\n    EMAIL_VERIFIED: 'announcement_bar.notification.email_verified',\r\n    LICENSE_EXPIRED: 'announcement_bar.error.license_expired',\r\n    LICENSE_EXPIRING: 'announcement_bar.error.license_expiring',\r\n    LICENSE_PAST_GRACE: 'announcement_bar.error.past_grace',\r\n    PREVIEW_MODE: 'announcement_bar.error.preview_mode',\r\n    WEBSOCKET_PORT_ERROR: 'channel_loader.socketError',\r\n    TRIAL_LICENSE_EXPIRING: 'announcement_bar.error.trial_license_expiring',\r\n};\r\n\r\n// These messages correspond to AnnouncementBarMessages above\r\ndefineMessages({\r\n    emailVerificationRequired: {\r\n        id: 'announcement_bar.error.email_verification_required',\r\n        defaultMessage: 'Check your email inbox to verify the address.',\r\n    },\r\n    emailVerified: {\r\n        id: 'announcement_bar.notification.email_verified',\r\n        defaultMessage: 'Email verified',\r\n    },\r\n    licenseExpired: {\r\n        id: 'announcement_bar.error.license_expired',\r\n        defaultMessage: '{licenseSku} license is expired and some features may be disabled.',\r\n    },\r\n    licenseExpiring: {\r\n        id: 'announcement_bar.error.license_expiring',\r\n        defaultMessage: '{licenseSku} license expires on {date, date, long}.',\r\n    },\r\n    pastGrace: {\r\n        id: 'announcement_bar.error.past_grace',\r\n        defaultMessage: '{licenseSku} license is expired and some features may be disabled. Please contact your System Administrator for details.',\r\n    },\r\n    previewMode: {\r\n        id: 'announcement_bar.error.preview_mode',\r\n        defaultMessage: 'Preview Mode: Email notifications have not been configured.',\r\n    },\r\n    socketError: {\r\n        id: 'channel_loader.socketError',\r\n        defaultMessage: 'Please check connection, Mattermost unreachable. If issue persists, ask administrator to [check WebSocket port](!https://docs.mattermost.com/install/troubleshooting.html#please-check-connection-mattermost-unreachable-if-issue-persists-ask-administrator-to-check-websocket-port).',\r\n    },\r\n    trialLicenseExpiring: {\r\n        id: 'announcement_bar.error.trial_license_expiring',\r\n        defaultMessage: 'There are {days} days left on your free trial.',\r\n    },\r\n});\r\n\r\nexport const VerifyEmailErrors = {\r\n    FAILED_EMAIL_VERIFICATION: 'failed_email_verification',\r\n    FAILED_USER_STATE_GET: 'failed_get_user_state',\r\n};\r\n\r\nexport const FileTypes = {\r\n    TEXT: 'text',\r\n    IMAGE: 'image',\r\n    AUDIO: 'audio',\r\n    VIDEO: 'video',\r\n    SPREADSHEET: 'spreadsheet',\r\n    CODE: 'code',\r\n    WORD: 'word',\r\n    PRESENTATION: 'presentation',\r\n    PDF: 'pdf',\r\n    PATCH: 'patch',\r\n    SVG: 'svg',\r\n    OTHER: 'other',\r\n    LICENSE_EXTENSION: '.mattermost-license',\r\n};\r\n\r\nexport const NotificationLevels = {\r\n    DEFAULT: 'default',\r\n    ALL: 'all',\r\n    MENTION: 'mention',\r\n    NONE: 'none',\r\n} as const;\r\n\r\nexport const DesktopSound = {\r\n    DEFAULT: 'default',\r\n    ON: 'on',\r\n    OFF: 'off',\r\n} as const;\r\n\r\nexport const IgnoreChannelMentions = {\r\n    ON: 'on',\r\n    OFF: 'off',\r\n    DEFAULT: 'default',\r\n} as const;\r\n\r\nexport const ChannelAutoFollowThreads = {\r\n    ON: 'on',\r\n    OFF: 'off',\r\n} as const;\r\n\r\nexport const UserSettingsNotificationSections = {\r\n    DESKTOP_AND_MOBILE: 'desktopAndMobile',\r\n    DESKTOP_NOTIFICATION_SOUND: 'desktopNotificationSound',\r\n    EMAIL: 'email',\r\n    KEYWORDS_MENTIONS: 'keywordsAndMentions',\r\n    KEYWORDS_HIGHLIGHT: 'keywordsAndHighlight',\r\n    REPLY_NOTIFCATIONS: 'replyNotifications',\r\n    AUTO_RESPONDER: 'autoResponder',\r\n};\r\n\r\nexport const AdvancedSections = {\r\n    CONTROL_SEND: 'advancedCtrlSend',\r\n    FORMATTING: 'formatting',\r\n    JOIN_LEAVE: 'joinLeave',\r\n    PERFORMANCE_DEBUGGING: 'performanceDebugging',\r\n    SYNC_DRAFTS: 'syncDrafts',\r\n};\r\n\r\nexport const RHSStates = {\r\n    MENTION: 'mention',\r\n    SEARCH: 'search',\r\n    FLAG: 'flag',\r\n    PIN: 'pin',\r\n    PLUGIN: 'plugin',\r\n    CHANNEL_FILES: 'channel-files',\r\n    CHANNEL_INFO: 'channel-info',\r\n    CHANNEL_MEMBERS: 'channel-members',\r\n    EDIT_HISTORY: 'edit-history',\r\n};\r\n\r\nexport const UploadStatuses = {\r\n    LOADING: 'loading',\r\n    COMPLETE: 'complete',\r\n    DEFAULT: '',\r\n};\r\n\r\nexport const GroupUnreadChannels = {\r\n    DISABLED: 'disabled',\r\n    DEFAULT_ON: 'default_on',\r\n    DEFAULT_OFF: 'default_off',\r\n};\r\n\r\nexport const SidebarChannelGroups = {\r\n    UNREADS: 'unreads',\r\n    FAVORITE: 'favorite',\r\n};\r\n\r\nexport const DraggingStates = {\r\n    CAPTURE: 'capture',\r\n    BEFORE: 'before',\r\n    DURING: 'during',\r\n};\r\n\r\nexport const DraggingStateTypes = {\r\n    CATEGORY: 'category',\r\n    CHANNEL: 'channel',\r\n    DM: 'DM',\r\n    MIXED_CHANNELS: 'mixed_channels',\r\n};\r\n\r\nexport const AboutLinks = {\r\n    TERMS_OF_SERVICE: 'https://mattermost.com/pl/terms-of-use/',\r\n    PRIVACY_POLICY: 'https://mattermost.com/pl/privacy-policy/',\r\n};\r\n\r\nexport const CloudLinks = {\r\n    BILLING_DOCS: 'https://docs.mattermost.com/pl/cloud-billing',\r\n    PRICING: 'https://mattermost.com/pl/pricing/',\r\n    PRORATED_PAYMENT: 'https://mattermost.com/pl/mattermost-cloud-prorate-documentation',\r\n    DEPLOYMENT_OPTIONS: 'https://mattermost.com/deploy/',\r\n    DOWNLOAD_UPDATE: 'https://mattermost.com/deploy/',\r\n    CLOUD_SIGNUP_PAGE: 'https://mattermost.com/sign-up/',\r\n    SELF_HOSTED_SIGNUP: 'https://customers.mattermost.com/signup',\r\n    DELINQUENCY_DOCS: 'https://docs.mattermost.com/about/cloud-subscriptions.html#failed-or-late-payments',\r\n    SELF_HOSTED_PRICING: 'https://mattermost.com/pl/pricing/#self-hosted',\r\n};\r\n\r\nexport const HostedCustomerLinks = {\r\n    BILLING_DOCS: 'https://mattermost.com/pl/how-self-hosted-billing-works',\r\n    SELF_HOSTED_BILLING: 'https://mattermost.com/pl/self-hosted-billing',\r\n    TERMS_AND_CONDITIONS: 'https://mattermost.com/enterprise-edition-terms/',\r\n    SECURITY_UPDATES: 'https://mattermost.com/security-updates/',\r\n    DOWNLOAD: 'https://mattermost.com/download',\r\n    NEWSLETTER_UNSUBSCRIBE_LINK: 'https://forms.mattermost.com/UnsubscribePage.html',\r\n    PRIVACY: AboutLinks.PRIVACY_POLICY,\r\n};\r\n\r\nexport const DocLinks = {\r\n    ABOUT_TEAMS: 'https://docs.mattermost.com/welcome/about-teams.html#team-url',\r\n    ADVANCED_LOGGING: 'https://mattermost.com/pl/advanced-logging',\r\n    CONFIGURE_DOCUMENT_CONTENT_SEARCH: 'https://mattermost.com/pl/configure-document-content-search',\r\n    CONFIGURE_AD_LDAP_QUERY_TIMEOUT: 'https://mattermost.com/pl/configure-ad-ldap-query-timeout',\r\n    CONFIGURE_OVERRIDE_SAML_BIND_DATA_WITH_LDAP: 'https://mattermost.com/pl/configure-override-saml-bind-data-with-ldap',\r\n    COMPILANCE_EXPORT: 'https://mattermost.com/pl/compliance-export',\r\n    COMPILANCE_MONITORING: 'https://mattermost.com/pl/compliance-monitoring',\r\n    DATA_RETENTION_POLICY: 'https://mattermost.com/pl/data-retention-policy',\r\n    DEFAULT_LDAP_GROUP_SYNC: 'https://mattermost.com/pl/default-ldap-group-sync',\r\n    DESKTOP_MANAGED_RESOURCES: 'https://mattermost.com/pl/desktop-managed-resources',\r\n    ELASTICSEARCH: 'https://mattermost.com/pl/setup-elasticsearch',\r\n    ENABLE_HARDENED_MODE: 'https://mattermost.com/pl/enable-hardened-mode',\r\n    FORMAT_MESSAGES: 'https://mattermost.com/pl/format-messages',\r\n    FILE_STORAGE: 'https://mattermost.com/pl/configure-file-storage',\r\n    GUEST_ACCOUNTS: 'https://docs.mattermost.com/onboard/guest-accounts.html',\r\n    HIGH_AVAILABILITY_CLUSTER: 'https://mattermost.com/pl/high-availability-cluster',\r\n    IN_PRODUCT_NOTICES: 'https://mattermost.com/pl/in-product-notices',\r\n    MULTI_FACTOR_AUTH: 'https://mattermost.com/pl/multi-factor-authentication',\r\n    ONBOARD_ADVANCED_PERMISSIONS: 'https://mattermost.com/pl/advanced-permissions',\r\n    ONBOARD_LDAP: 'https://mattermost.com/pl/setup-ldap',\r\n    SELF_HOSTED_BILLING: HostedCustomerLinks.SELF_HOSTED_BILLING,\r\n    SESSION_LENGTHS: 'https://mattermost.com/pl/configure-session-lengths',\r\n    SETUP_IMAGE_PROXY: 'https://mattermost.com/pl/setup-image-proxy',\r\n    SETUP_LDAP: 'https://mattermost.com/pl/setup-ldap',\r\n    SETUP_PERFORMANCE_MONITORING: 'https://mattermost.com/pl/setup-performance-monitoring',\r\n    SETUP_PUSH_NOTIFICATIONS: 'https://mattermost.com/pl/setup-push-notifications',\r\n    SETUP_SAML: 'https://docs.mattermost.com/pl/setup-saml',\r\n    SHARE_LINKS_TO_MESSAGES: 'https://mattermost.com/pl/share-links-to-messages',\r\n    SITE_URL: 'https://mattermost.com/pl/configure-site-url',\r\n    SSL_CERTIFICATE: 'https://mattermost.com/pl/setup-ssl-client-certificate',\r\n    TRUE_UP_REVIEW: 'https://mattermost.com/pl/true-up-documentation',\r\n    TRUSTED_CONNECTION: 'https://mattermost.com/pl/default-allow-untrusted-internal-connections',\r\n    UPGRADE_SERVER: 'https://mattermost.com/pl/upgrade-mattermost',\r\n};\r\n\r\nexport const DeveloperLinks = {\r\n    CUSTOM_SLASH_COMMANDS: 'https://mattermost.com/pl/custom-slash-commands',\r\n    ENABLE_OAUTH2: 'https://mattermost.com/pl/enable-oauth',\r\n    INCOMING_WEBHOOKS: 'https://mattermost.com/pl/incoming-webhooks',\r\n    OUTGOING_WEBHOOKS: 'https://mattermost.com/pl/outgoing-webhooks',\r\n    INTERACTIVE_MESSAGES: 'https://mattermost.com/pl/interactive-messages',\r\n    INTERACTIVE_DIALOGS: 'https://mattermost.com/pl/interactive-dialogs',\r\n    PERSONAL_ACCESS_TOKENS: 'https://mattermost.com/pl/personal-access-tokens',\r\n    PLUGIN_SIGNING: 'https://mattermost.com/pl/sign-plugins',\r\n    PLUGINS: 'https://mattermost.com/pl/plugins',\r\n    SETUP_CUSTOM_SLASH_COMMANDS: 'https://mattermost.com/pl/setup-custom-slash-commands',\r\n    SETUP_INCOMING_WEBHOOKS: 'https://mattermost.com/pl/setup-incoming-webhooks',\r\n    SETUP_OAUTH2: 'https://mattermost.com/pl/setup-oauth-2.0',\r\n    SETUP_OUTGOING_WEBHOOKS: 'https://mattermost.com/pl/setup-outgoing-webhooks',\r\n};\r\n\r\nexport const LicenseLinks = {\r\n    CONTACT_SALES: 'https://mattermost.com/contact-sales/',\r\n    ENTRY_LIMITS_INFO: 'https://mattermost.com/pl/mattermost-entry-limits',\r\n    TRIAL_INFO_LINK: 'https://mattermost.com/trial',\r\n    EMBARGOED_COUNTRIES: 'https://mattermost.com/pl/limitations-for-embargoed-countries',\r\n    SOFTWARE_SERVICES_LICENSE_AGREEMENT: 'https://mattermost.com/pl/software-and-services-license-agreement',\r\n    SOFTWARE_SERVICES_LICENSE_AGREEMENT_TEXT: 'Software Services and License Agreement',\r\n    UNSUPPORTED: 'https://mattermost.com/pricing/',\r\n    UNSUPPORTED_UPGRADE_LINK: 'https://docs.mattermost.com/administration-guide/upgrade/enterprise-install-upgrade.html#upgrading-to-enterprise-edition-from-mattermost-team-edition',\r\n};\r\n\r\nexport const MattermostLink = 'https://mattermost.com/';\r\n\r\nexport const BillingSchemes = {\r\n    FLAT_FEE: 'flat_fee',\r\n    PER_SEAT: 'per_seat',\r\n    SALES_SERVE: 'sales_serve',\r\n};\r\n\r\nexport const RecurringIntervals = {\r\n    YEAR: 'year',\r\n    MONTH: 'month',\r\n};\r\n\r\nexport const PermissionsScope = {\r\n    [Permissions.INVITE_USER]: 'team_scope',\r\n    [Permissions.INVITE_GUEST]: 'team_scope',\r\n    [Permissions.ADD_USER_TO_TEAM]: 'team_scope',\r\n    [Permissions.MANAGE_SLASH_COMMANDS]: 'team_scope',\r\n    [Permissions.MANAGE_OTHERS_SLASH_COMMANDS]: 'team_scope',\r\n    [Permissions.CREATE_PUBLIC_CHANNEL]: 'team_scope',\r\n    [Permissions.CREATE_PRIVATE_CHANNEL]: 'team_scope',\r\n    [Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS]: 'channel_scope',\r\n    [Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS]: 'channel_scope',\r\n    [Permissions.ASSIGN_SYSTEM_ADMIN_ROLE]: 'system_scope',\r\n    [Permissions.MANAGE_ROLES]: 'system_scope',\r\n    [Permissions.MANAGE_TEAM_ROLES]: 'team_scope',\r\n    [Permissions.MANAGE_CHANNEL_ROLES]: 'chanel_scope',\r\n    [Permissions.MANAGE_SYSTEM]: 'system_scope',\r\n    [Permissions.CREATE_DIRECT_CHANNEL]: 'system_scope',\r\n    [Permissions.CREATE_GROUP_CHANNEL]: 'system_scope',\r\n    [Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]: 'channel_scope',\r\n    [Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES]: 'channel_scope',\r\n    [Permissions.LIST_PUBLIC_TEAMS]: 'system_scope',\r\n    [Permissions.JOIN_PUBLIC_TEAMS]: 'system_scope',\r\n    [Permissions.LIST_PRIVATE_TEAMS]: 'system_scope',\r\n    [Permissions.JOIN_PRIVATE_TEAMS]: 'system_scope',\r\n    [Permissions.LIST_TEAM_CHANNELS]: 'team_scope',\r\n    [Permissions.JOIN_PUBLIC_CHANNELS]: 'team_scope',\r\n    [Permissions.DELETE_PUBLIC_CHANNEL]: 'channel_scope',\r\n    [Permissions.DELETE_PRIVATE_CHANNEL]: 'channel_scope',\r\n    [Permissions.EDIT_OTHER_USERS]: 'system_scope',\r\n    [Permissions.READ_CHANNEL]: 'channel_scope',\r\n    [Permissions.READ_CHANNEL_CONTENT]: 'channel_scope',\r\n    [Permissions.READ_PUBLIC_CHANNEL]: 'team_scope',\r\n    [Permissions.ADD_REACTION]: 'channel_scope',\r\n    [Permissions.REMOVE_REACTION]: 'channel_scope',\r\n    [Permissions.REMOVE_OTHERS_REACTIONS]: 'channel_scope',\r\n    [Permissions.PERMANENT_DELETE_USER]: 'system_scope',\r\n    [Permissions.UPLOAD_FILE]: 'channel_scope',\r\n    [Permissions.GET_PUBLIC_LINK]: 'system_scope',\r\n    [Permissions.MANAGE_INCOMING_WEBHOOKS]: 'team_scope',\r\n    [Permissions.MANAGE_OTHERS_INCOMING_WEBHOOKS]: 'team_scope',\r\n    [Permissions.MANAGE_OUTGOING_WEBHOOKS]: 'team_scope',\r\n    [Permissions.MANAGE_OTHERS_OUTGOING_WEBHOOKS]: 'team_scope',\r\n    [Permissions.MANAGE_OAUTH]: 'system_scope',\r\n    [Permissions.MANAGE_SYSTEM_WIDE_OAUTH]: 'system_scope',\r\n    [Permissions.CREATE_POST]: 'channel_scope',\r\n    [Permissions.CREATE_POST_PUBLIC]: 'channel_scope',\r\n    [Permissions.EDIT_POST]: 'channel_scope',\r\n    [Permissions.EDIT_OTHERS_POSTS]: 'channel_scope',\r\n    [Permissions.DELETE_POST]: 'channel_scope',\r\n    [Permissions.DELETE_OTHERS_POSTS]: 'channel_scope',\r\n    [Permissions.REMOVE_USER_FROM_TEAM]: 'team_scope',\r\n    [Permissions.CREATE_TEAM]: 'system_scope',\r\n    [Permissions.MANAGE_TEAM]: 'team_scope',\r\n    [Permissions.IMPORT_TEAM]: 'team_scope',\r\n    [Permissions.VIEW_TEAM]: 'team_scope',\r\n    [Permissions.LIST_USERS_WITHOUT_TEAM]: 'system_scope',\r\n    [Permissions.CREATE_USER_ACCESS_TOKEN]: 'system_scope',\r\n    [Permissions.READ_USER_ACCESS_TOKEN]: 'system_scope',\r\n    [Permissions.REVOKE_USER_ACCESS_TOKEN]: 'system_scope',\r\n    [Permissions.MANAGE_JOBS]: 'system_scope',\r\n    [Permissions.CREATE_EMOJIS]: 'team_scope',\r\n    [Permissions.DELETE_EMOJIS]: 'team_scope',\r\n    [Permissions.DELETE_OTHERS_EMOJIS]: 'team_scope',\r\n    [Permissions.USE_CHANNEL_MENTIONS]: 'channel_scope',\r\n    [Permissions.USE_GROUP_MENTIONS]: 'channel_scope',\r\n    [Permissions.READ_PUBLIC_CHANNEL_GROUPS]: 'channel_scope',\r\n    [Permissions.READ_PRIVATE_CHANNEL_GROUPS]: 'channel_scope',\r\n    [Permissions.CONVERT_PUBLIC_CHANNEL_TO_PRIVATE]: 'channel_scope',\r\n    [Permissions.CONVERT_PRIVATE_CHANNEL_TO_PUBLIC]: 'channel_scope',\r\n    [Permissions.MANAGE_SHARED_CHANNELS]: 'system_scope',\r\n    [Permissions.MANAGE_SECURE_CONNECTIONS]: 'system_scope',\r\n    [Permissions.PLAYBOOK_PUBLIC_CREATE]: 'team_scope',\r\n    [Permissions.PLAYBOOK_PUBLIC_MANAGE_PROPERTIES]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PUBLIC_MANAGE_MEMBERS]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PUBLIC_VIEW]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PUBLIC_MAKE_PRIVATE]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PRIVATE_CREATE]: 'team_scope',\r\n    [Permissions.PLAYBOOK_PRIVATE_MANAGE_PROPERTIES]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PRIVATE_MANAGE_MEMBERS]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PRIVATE_VIEW]: 'playbook_scope',\r\n    [Permissions.PLAYBOOK_PRIVATE_MAKE_PUBLIC]: 'playbook_scope',\r\n    [Permissions.RUN_CREATE]: 'playbook_scope',\r\n    [Permissions.RUN_MANAGE_MEMBERS]: 'run_scope',\r\n    [Permissions.RUN_MANAGE_PROPERTIES]: 'run_scope',\r\n    [Permissions.RUN_VIEW]: 'run_scope',\r\n    [Permissions.CREATE_CUSTOM_GROUP]: 'system_scope',\r\n    [Permissions.EDIT_CUSTOM_GROUP]: 'system_scope',\r\n    [Permissions.DELETE_CUSTOM_GROUP]: 'system_scope',\r\n    [Permissions.RESTORE_CUSTOM_GROUP]: 'system_scope',\r\n    [Permissions.MANAGE_CUSTOM_GROUP_MEMBERS]: 'system_scope',\r\n    [Permissions.USE_SLASH_COMMANDS]: 'channel_scope',\r\n    [Permissions.ADD_BOOKMARK_PUBLIC_CHANNEL]: 'channel_scope',\r\n    [Permissions.EDIT_BOOKMARK_PUBLIC_CHANNEL]: 'channel_scope',\r\n    [Permissions.DELETE_BOOKMARK_PUBLIC_CHANNEL]: 'channel_scope',\r\n    [Permissions.ORDER_BOOKMARK_PUBLIC_CHANNEL]: 'channel_scope',\r\n    [Permissions.ADD_BOOKMARK_PRIVATE_CHANNEL]: 'channel_scope',\r\n    [Permissions.EDIT_BOOKMARK_PRIVATE_CHANNEL]: 'channel_scope',\r\n    [Permissions.DELETE_BOOKMARK_PRIVATE_CHANNEL]: 'channel_scope',\r\n    [Permissions.ORDER_BOOKMARK_PRIVATE_CHANNEL]: 'channel_scope',\r\n    [Permissions.MANAGE_PUBLIC_CHANNEL_BANNER]: 'channel_scope',\r\n    [Permissions.MANAGE_PRIVATE_CHANNEL_BANNER]: 'channel_scope',\r\n    [Permissions.MANAGE_CHANNEL_ACCESS_RULES]: 'channel_scope',\r\n};\r\n\r\nexport const DefaultRolePermissions = {\r\n    all_users: [\r\n        Permissions.CREATE_DIRECT_CHANNEL,\r\n        Permissions.CREATE_GROUP_CHANNEL,\r\n        Permissions.CREATE_TEAM,\r\n        Permissions.LIST_TEAM_CHANNELS,\r\n        Permissions.JOIN_PUBLIC_CHANNELS,\r\n        Permissions.READ_PUBLIC_CHANNEL,\r\n        Permissions.VIEW_TEAM,\r\n        Permissions.CREATE_PUBLIC_CHANNEL,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES,\r\n        Permissions.DELETE_PUBLIC_CHANNEL,\r\n        Permissions.CREATE_PRIVATE_CHANNEL,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES,\r\n        Permissions.DELETE_PRIVATE_CHANNEL,\r\n        Permissions.INVITE_USER,\r\n        Permissions.ADD_USER_TO_TEAM,\r\n        Permissions.READ_CHANNEL,\r\n        Permissions.READ_CHANNEL_CONTENT,\r\n        Permissions.ADD_REACTION,\r\n        Permissions.REMOVE_REACTION,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n        Permissions.READ_PUBLIC_CHANNEL_GROUPS,\r\n        Permissions.READ_PRIVATE_CHANNEL_GROUPS,\r\n        Permissions.UPLOAD_FILE,\r\n        Permissions.GET_PUBLIC_LINK,\r\n        Permissions.CREATE_POST,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n        Permissions.DELETE_POST,\r\n        Permissions.EDIT_POST,\r\n        Permissions.USE_CHANNEL_MENTIONS,\r\n        Permissions.USE_GROUP_MENTIONS,\r\n        Permissions.CREATE_CUSTOM_GROUP,\r\n        Permissions.EDIT_CUSTOM_GROUP,\r\n        Permissions.DELETE_CUSTOM_GROUP,\r\n        Permissions.MANAGE_CUSTOM_GROUP_MEMBERS,\r\n        Permissions.PLAYBOOK_PUBLIC_CREATE,\r\n        Permissions.PLAYBOOK_PRIVATE_CREATE,\r\n        Permissions.PLAYBOOK_PUBLIC_MANAGE_MEMBERS,\r\n        Permissions.PLAYBOOK_PRIVATE_MANAGE_MEMBERS,\r\n        Permissions.PLAYBOOK_PUBLIC_MANAGE_PROPERTIES,\r\n        Permissions.PLAYBOOK_PRIVATE_MANAGE_PROPERTIES,\r\n        Permissions.RUN_CREATE,\r\n        Permissions.USE_SLASH_COMMANDS,\r\n        Permissions.DELETE_EMOJIS,\r\n        Permissions.INVITE_GUEST,\r\n        Permissions.CREATE_EMOJIS,\r\n        Permissions.RUN_VIEW,\r\n        Permissions.RESTORE_CUSTOM_GROUP,\r\n        Permissions.ADD_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ADD_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PRIVATE_CHANNEL,\r\n    ],\r\n    channel_admin: [\r\n        Permissions.MANAGE_CHANNEL_ROLES,\r\n        Permissions.CREATE_POST,\r\n        Permissions.ADD_REACTION,\r\n        Permissions.REMOVE_REACTION,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n        Permissions.READ_PUBLIC_CHANNEL_GROUPS,\r\n        Permissions.READ_PRIVATE_CHANNEL_GROUPS,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n        Permissions.USE_CHANNEL_MENTIONS,\r\n        Permissions.USE_GROUP_MENTIONS,\r\n        Permissions.ADD_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ADD_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_BANNER,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_BANNER,\r\n        Permissions.MANAGE_CHANNEL_ACCESS_RULES,\r\n    ],\r\n    team_admin: [\r\n        Permissions.EDIT_OTHERS_POSTS,\r\n        Permissions.REMOVE_USER_FROM_TEAM,\r\n        Permissions.MANAGE_TEAM,\r\n        Permissions.IMPORT_TEAM,\r\n        Permissions.MANAGE_TEAM_ROLES,\r\n        Permissions.MANAGE_CHANNEL_ROLES,\r\n        Permissions.MANAGE_SLASH_COMMANDS,\r\n        Permissions.MANAGE_OTHERS_SLASH_COMMANDS,\r\n        Permissions.MANAGE_INCOMING_WEBHOOKS,\r\n        Permissions.MANAGE_OUTGOING_WEBHOOKS,\r\n        Permissions.DELETE_POST,\r\n        Permissions.DELETE_OTHERS_POSTS,\r\n        Permissions.MANAGE_OTHERS_OUTGOING_WEBHOOKS,\r\n        Permissions.ADD_REACTION,\r\n        Permissions.MANAGE_OTHERS_INCOMING_WEBHOOKS,\r\n        Permissions.USE_CHANNEL_MENTIONS,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n        Permissions.CONVERT_PUBLIC_CHANNEL_TO_PRIVATE,\r\n        Permissions.CONVERT_PRIVATE_CHANNEL_TO_PUBLIC,\r\n        Permissions.READ_PUBLIC_CHANNEL_GROUPS,\r\n        Permissions.READ_PRIVATE_CHANNEL_GROUPS,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n        Permissions.CREATE_POST,\r\n        Permissions.REMOVE_REACTION,\r\n        Permissions.USE_GROUP_MENTIONS,\r\n        Permissions.ADD_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PUBLIC_CHANNEL,\r\n        Permissions.ADD_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.EDIT_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.DELETE_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.ORDER_BOOKMARK_PRIVATE_CHANNEL,\r\n        Permissions.MANAGE_PUBLIC_CHANNEL_BANNER,\r\n        Permissions.MANAGE_PRIVATE_CHANNEL_BANNER,\r\n        Permissions.MANAGE_CHANNEL_ACCESS_RULES,\r\n    ],\r\n    guests: [\r\n        Permissions.EDIT_POST,\r\n        Permissions.ADD_REACTION,\r\n        Permissions.REMOVE_REACTION,\r\n        Permissions.USE_CHANNEL_MENTIONS,\r\n        Permissions.READ_CHANNEL,\r\n        Permissions.UPLOAD_FILE,\r\n        Permissions.CREATE_POST,\r\n    ],\r\n};\r\n\r\n// ModeratedPermissions are permissions that can be turned off for members and guests\r\n// on a per channel basis. These permissions are on by default for team/channel admins.\r\nexport const ModeratedPermissions = [\r\n    Permissions.CREATE_POST,\r\n    Permissions.UPLOAD_FILE,\r\n    Permissions.ADD_REACTION,\r\n    Permissions.REMOVE_REACTION,\r\n    Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,\r\n    Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS,\r\n    Permissions.USE_CHANNEL_MENTIONS,\r\n    Permissions.ADD_BOOKMARK_PUBLIC_CHANNEL,\r\n    Permissions.EDIT_BOOKMARK_PUBLIC_CHANNEL,\r\n    Permissions.DELETE_BOOKMARK_PUBLIC_CHANNEL,\r\n    Permissions.ORDER_BOOKMARK_PUBLIC_CHANNEL,\r\n    Permissions.ADD_BOOKMARK_PRIVATE_CHANNEL,\r\n    Permissions.EDIT_BOOKMARK_PRIVATE_CHANNEL,\r\n    Permissions.DELETE_BOOKMARK_PRIVATE_CHANNEL,\r\n    Permissions.ORDER_BOOKMARK_PRIVATE_CHANNEL,\r\n];\r\n\r\nexport const Locations = {\r\n    CENTER: 'CENTER' as const,\r\n    RHS_ROOT: 'RHS_ROOT' as const,\r\n    RHS_COMMENT: 'RHS_COMMENT' as const,\r\n    SEARCH: 'SEARCH' as const,\r\n    NO_WHERE: 'NO_WHERE' as const,\r\n    MODAL: 'MODAL' as const,\r\n};\r\n\r\nexport const PostListRowListIds = {\r\n    DATE_LINE: PostListUtils.DATE_LINE,\r\n    START_OF_NEW_MESSAGES: PostListUtils.START_OF_NEW_MESSAGES,\r\n    CHANNEL_INTRO_MESSAGE: 'CHANNEL_INTRO_MESSAGE',\r\n    OLDER_MESSAGES_LOADER: 'OLDER_MESSAGES_LOADER',\r\n    NEWER_MESSAGES_LOADER: 'NEWER_MESSAGES_LOADER',\r\n    LOAD_OLDER_MESSAGES_TRIGGER: 'LOAD_OLDER_MESSAGES_TRIGGER',\r\n    LOAD_NEWER_MESSAGES_TRIGGER: 'LOAD_NEWER_MESSAGES_TRIGGER',\r\n};\r\n\r\nexport const exportFormats = {\r\n    EXPORT_FORMAT_CSV: 'csv',\r\n    EXPORT_FORMAT_ACTIANCE: 'actiance',\r\n    EXPORT_FORMAT_GLOBALRELAY: 'globalrelay',\r\n};\r\n\r\nexport const CacheTypes = {\r\n    REDIS: 'redis',\r\n    LRU: 'lru',\r\n};\r\n\r\nexport const ZoomSettings = {\r\n    DEFAULT_SCALE: 1.75,\r\n    SCALE_DELTA: 0.25,\r\n    MIN_SCALE: 0.25,\r\n    MAX_SCALE: 3.0,\r\n};\r\n\r\nexport const DataSpillagePropertyNames = {\r\n    Status: 'Status',\r\n    FlaggedBy: 'Flagged by',\r\n    Reason: 'Reason',\r\n    Comment: 'Comment',\r\n    ReportingTime: 'Reporting Time',\r\n    ReviewingUser: 'Reviewing User',\r\n    ActionBy: 'Action By',\r\n    ActionComment: 'Action Comment',\r\n    ActionTime: 'Action Time',\r\n    Message: 'Message',\r\n    PostedIn: 'Posted in',\r\n    Team: 'Team',\r\n    PostedBy: 'Posted by',\r\n    PostedAt: 'Posted at',\r\n};\r\n\r\nexport const Constants = {\r\n    SettingsTypes,\r\n    JobTypes,\r\n    Preferences,\r\n    SocketEvents,\r\n    ActionTypes,\r\n    UserStatuses,\r\n    TutorialSteps,\r\n    AdminTutorialSteps,\r\n    CrtTutorialSteps,\r\n    CrtTutorialTriggerSteps,\r\n    CrtThreadPaneSteps,\r\n    PostTypes,\r\n    ErrorPageTypes,\r\n    AnnouncementBarTypes,\r\n    AnnouncementBarMessages,\r\n    FileTypes,\r\n    Locations,\r\n    PostListRowListIds,\r\n    MAX_POST_VISIBILITY: 1000000,\r\n    REMOTE_USERS_HOUR_LIMIT_END_OF_THE_DAY: 22,\r\n    REMOTE_USERS_HOUR_LIMIT_BEGINNING_OF_THE_DAY: 6,\r\n\r\n    IGNORE_POST_TYPES: [PostTypes.JOIN_LEAVE, PostTypes.JOIN_TEAM, PostTypes.LEAVE_TEAM, PostTypes.JOIN_CHANNEL, PostTypes.LEAVE_CHANNEL, PostTypes.REMOVE_FROM_CHANNEL, PostTypes.ADD_REMOVE],\r\n\r\n    PayloadSources: keyMirror({\r\n        SERVER_ACTION: null,\r\n        VIEW_ACTION: null,\r\n    }),\r\n\r\n    // limit of users to show the lhs invite members button highlighted\r\n    USER_LIMIT: 10,\r\n\r\n    StatTypes,\r\n    STAT_MAX_ACTIVE_USERS: 20,\r\n    STAT_MAX_NEW_USERS: 20,\r\n\r\n    ScrollTypes: {\r\n        FREE: 1,\r\n        BOTTOM: 2,\r\n        SIDEBBAR_OPEN: 3,\r\n        NEW_MESSAGE: 4,\r\n        POST: 5,\r\n    },\r\n\r\n    // This is the same limit set https://github.com/mattermost/mattermost-server/blob/master/model/config.go#L105\r\n    MAXIMUM_LOGIN_ATTEMPTS_DEFAULT: 10,\r\n\r\n    // This is the same limit set https://github.com/mattermost/mattermost-server/blob/master/api4/team.go#L23\r\n    MAX_ADD_MEMBERS_BATCH: 256,\r\n\r\n    SPECIAL_MENTIONS: ['all', 'channel', 'here'],\r\n    PLAN_MENTIONS: /Professional plan|Enterprise plan|Enterprise trial/gi,\r\n    SPECIAL_MENTIONS_REGEX: /(?:\\B|\\b_+)@(channel|all|here)(?!(\\.|-|_)*[^\\W_])/gi,\r\n    SUM_OF_MEMBERS_MENTION_REGEX: /\\d+ members/gi,\r\n    ALL_MENTION_REGEX: /(?:\\B|\\b_+)@(all)(?!(\\.|-|_)*[^\\W_])/gi,\r\n    CHANNEL_MENTION_REGEX: /(?:\\B|\\b_+)@(channel)(?!(\\.|-|_)*[^\\W_])/gi,\r\n    HERE_MENTION_REGEX: /(?:\\B|\\b_+)@(here)(?!(\\.|-|_)*[^\\W_])/gi,\r\n    NOTIFY_ALL_MEMBERS: 5,\r\n    ALL_MEMBERS_MENTIONS_REGEX: /(?:\\B|\\b_+)@(channel|all)(?!(\\.|-|_)*[^\\W_])/gi,\r\n    MENTIONS_REGEX: /(?:\\B|\\b_+)@([a-z0-9.\\-_]+(?::[a-z0-9.\\-_]+)?)/gi,\r\n    DEFAULT_CHARACTER_LIMIT: 4000,\r\n    IMAGE_TYPE_GIF: 'gif',\r\n    TEXT_TYPES: ['txt', 'rtf', 'vtt'],\r\n    IMAGE_TYPES: ['jpg', 'gif', 'bmp', 'png', 'jpeg', 'tiff', 'tif', 'psd', 'webp'],\r\n    AUDIO_TYPES: ['mp3', 'wav', 'wma', 'm4a', 'flac', 'aac', 'ogg', 'm4r'],\r\n    VIDEO_TYPES: ['mp4', 'avi', 'webm', 'mkv', 'wmv', 'mpg', 'mov', 'flv'],\r\n    PRESENTATION_TYPES: ['ppt', 'pptx'],\r\n    SPREADSHEET_TYPES: ['xlsx', 'csv'],\r\n    WORD_TYPES: ['doc', 'docx'],\r\n    CHANNEL_HEADER_HEIGHT: 62,\r\n    CODE_TYPES: ['applescript', 'as', 'atom', 'bas', 'bash', 'boot', 'c', 'c++', 'cake', 'cc', 'cjsx', 'cl2', 'clj', 'cljc', 'cljs', 'cljs.hl', 'cljscm', 'cljx', '_coffee', 'coffee', 'cpp', 'cs', 'csharp', 'cson', 'css', 'd', 'dart', 'delphi', 'dfm', 'di', 'diff', 'django', 'docker', 'dockerfile', 'dpr', 'erl', 'ex', 'exs', 'f90', 'f95', 'freepascal', 'fs', 'fsharp', 'gcode', 'gemspec', 'go', 'groovy', 'gyp', 'h', 'h++', 'handlebars', 'hbs', 'hic', 'hpp', 'hs', 'html', 'html.handlebars', 'html.hbs', 'hx', 'iced', 'irb', 'java', 'jinja', 'jl', 'js', 'json', 'jsp', 'jsx', 'kt', 'ktm', 'kts', 'lazarus', 'less', 'lfm', 'lisp', 'log', 'lpr', 'lua', 'm', 'mak', 'matlab', 'md', 'mk', 'mkd', 'mkdown', 'ml', 'mm', 'nc', 'obj-c', 'objc', 'osascript', 'pas', 'pascal', 'perl', 'php', 'php3', 'php4', 'php5', 'php6', 'pl', 'plist', 'podspec', 'pp', 'ps', 'ps1', 'py', 'r', 'rb', 'rs', 'rss', 'ruby', 'scala', 'scm', 'scpt', 'scss', 'sh', 'sld', 'sql', 'st', 'styl', 'swift', 'tex', 'thor', 'v', 'vb', 'vbnet', 'vbs', 'veo', 'xhtml', 'xml', 'xsl', 'yaml', 'zsh'],\r\n    PDF_TYPES: ['pdf'],\r\n    PATCH_TYPES: ['patch'],\r\n    SVG_TYPES: ['svg'],\r\n    ICON_FROM_TYPE: {\r\n        audio: audioIcon,\r\n        video: videoIcon,\r\n        spreadsheet: excelIcon,\r\n        presentation: pptIcon,\r\n        pdf: pdfIcon,\r\n        code: codeIcon,\r\n        word: wordIcon,\r\n        patch: patchIcon,\r\n        other: genericIcon,\r\n    },\r\n    ICON_NAME_FROM_TYPE: {\r\n        text: 'text',\r\n        audio: 'audio',\r\n        video: 'video',\r\n        spreadsheet: 'excel',\r\n        presentation: 'ppt',\r\n        pdf: 'pdf',\r\n        code: 'code',\r\n        word: 'word',\r\n        patch: 'patch',\r\n        other: 'generic',\r\n        image: 'image',\r\n    },\r\n    MAX_UPLOAD_FILES: 10,\r\n    MAX_FILENAME_LENGTH: 35,\r\n    EXPANDABLE_INLINE_IMAGE_MIN_HEIGHT: 100,\r\n    THUMBNAIL_WIDTH: 128,\r\n    THUMBNAIL_HEIGHT: 100,\r\n    PREVIEWER_HEIGHT: 170,\r\n    WEB_VIDEO_WIDTH: 640,\r\n    WEB_VIDEO_HEIGHT: 480,\r\n    MOBILE_VIDEO_WIDTH: 480,\r\n    MOBILE_VIDEO_HEIGHT: 360,\r\n\r\n    DESKTOP_SCREEN_WIDTH: 1679,\r\n    TABLET_SCREEN_WIDTH: 1020,\r\n    MOBILE_SCREEN_WIDTH: 768,\r\n\r\n    SMALL_SIDEBAR_BREAKPOINT: 900,\r\n    MEDIUM_SIDEBAR_BREAKPOINT: 1200,\r\n    LARGE_SIDEBAR_BREAKPOINT: 1680,\r\n\r\n    POST_MODAL_PADDING: 170,\r\n    SCROLL_DELAY: 2000,\r\n    SCROLL_PAGE_FRACTION: 3,\r\n    DEFAULT_CHANNEL: 'town-square',\r\n    DEFAULT_CHANNEL_UI_NAME: 'Town Square',\r\n    OFFTOPIC_CHANNEL: 'off-topic',\r\n    OFFTOPIC_CHANNEL_UI_NAME: 'Off-Topic',\r\n    GITLAB_SERVICE: 'gitlab',\r\n    GOOGLE_SERVICE: 'google',\r\n    OFFICE365_SERVICE: 'office365',\r\n    OAUTH_SERVICES: ['gitlab', 'google', 'office365', 'openid'],\r\n    OPENID_SERVICE: 'openid',\r\n    OPENID_SERVICE_FEATURE_DISCOVERY: 'openid_feature_discovery',\r\n    OPENID_SCOPES: 'profile openid email',\r\n    EMAIL_SERVICE: 'email',\r\n    LDAP_SERVICE: 'ldap',\r\n    SAML_SERVICE: 'saml',\r\n    USERNAME_SERVICE: 'username',\r\n    SIGNIN_CHANGE: 'signin_change',\r\n    PASSWORD_CHANGE: 'password_change',\r\n    GET_TERMS_ERROR: 'get_terms_error',\r\n    TERMS_REJECTED: 'terms_rejected',\r\n    SIGNIN_VERIFIED: 'verified',\r\n    CREATE_LDAP: 'create_ldap',\r\n    SESSION_EXPIRED: 'expired',\r\n    POST_AREA_HEIGHT: 80,\r\n    POST_CHUNK_SIZE: 60,\r\n    PROFILE_CHUNK_SIZE: 100,\r\n    POST_FOCUS_CONTEXT_RADIUS: 10,\r\n    POST_LOADING: 'loading',\r\n    POST_FAILED: 'failed',\r\n    POST_DELETED: 'deleted',\r\n    POST_UPDATED: 'updated',\r\n    SYSTEM_MESSAGE_PREFIX: 'system_',\r\n    SUGGESTION_LIST_MAXHEIGHT: 292,\r\n    SUGGESTION_LIST_MAXWIDTH: 496,\r\n    SUGGESTION_LIST_SPACE_RHS: 420,\r\n    MOBILE_SUGGESTION_LIST_SPACE_RHS: 220,\r\n    SUGGESTION_LIST_MODAL_WIDTH: 496,\r\n    MENTION_NAME_PADDING_LEFT: 2.4,\r\n    AVATAR_WIDTH: 24,\r\n    AUTO_RESPONDER: 'system_auto_responder',\r\n    RESERVED_TEAM_NAMES: [\r\n        'signup',\r\n        'login',\r\n        'admin',\r\n        'channel',\r\n        'post',\r\n        'api',\r\n        'oauth',\r\n        'error',\r\n        'help',\r\n        'plugins',\r\n        'playbooks',\r\n        'boards',\r\n    ],\r\n    RESERVED_USERNAMES: [\r\n        'valet',\r\n        'all',\r\n        'channel',\r\n        'here',\r\n        'matterbot',\r\n        'system',\r\n    ],\r\n    MONTHS: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n    MAX_DMS: 20,\r\n    MAX_USERS_IN_GM: 8,\r\n    MIN_USERS_IN_GM: 3,\r\n    MAX_CHANNEL_POPOVER_COUNT: 100,\r\n    DM_AND_GM_SHOW_COUNTS: [10, 15, 20, 40],\r\n    HIGHEST_DM_SHOW_COUNT: 10000,\r\n    DM_CHANNEL: 'D',\r\n    GM_CHANNEL: 'G',\r\n    OPEN_CHANNEL: 'O',\r\n    PRIVATE_CHANNEL: 'P',\r\n    ARCHIVED_CHANNEL: 'archive',\r\n    INVITE_TEAM: 'I',\r\n    OPEN_TEAM: 'O',\r\n    THREADS: 'threads',\r\n    MAX_POST_LEN: 4000,\r\n    SIDEBAR_MINIMUM_WIDTH: 640,\r\n    THEME_ELEMENTS: [\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarBg',\r\n            uiName: 'Sidebar BG',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarText',\r\n            uiName: 'Sidebar Text',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarHeaderBg',\r\n            uiName: 'Sidebar Header BG',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarTeamBarBg',\r\n            uiName: 'Team Sidebar BG',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarHeaderTextColor',\r\n            uiName: 'Sidebar Header Text',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarUnreadText',\r\n            uiName: 'Sidebar Unread Text',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarTextHoverBg',\r\n            uiName: 'Sidebar Text Hover BG',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarTextActiveBorder',\r\n            uiName: 'Sidebar Text Active Border',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'sidebarTextActiveColor',\r\n            uiName: 'Sidebar Text Active Color',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'onlineIndicator',\r\n            uiName: 'Online Indicator',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'awayIndicator',\r\n            uiName: 'Away Indicator',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'dndIndicator',\r\n            uiName: 'Away Indicator',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'mentionBg',\r\n            uiName: 'Mention Jewel BG',\r\n        },\r\n        {\r\n            group: 'sidebarElements',\r\n            id: 'mentionColor',\r\n            uiName: 'Mention Jewel Text',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'centerChannelBg',\r\n            uiName: 'Center Channel BG',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'centerChannelColor',\r\n            uiName: 'Center Channel Text',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'newMessageSeparator',\r\n            uiName: 'New Message Separator',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'errorTextColor',\r\n            uiName: 'Error Text Color',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'mentionHighlightBg',\r\n            uiName: 'Mention Highlight BG',\r\n        },\r\n        {\r\n            group: 'linkAndButtonElements',\r\n            id: 'linkColor',\r\n            uiName: 'Link Color',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'mentionHighlightLink',\r\n            uiName: 'Mention Highlight Link',\r\n        },\r\n        {\r\n            group: 'linkAndButtonElements',\r\n            id: 'buttonBg',\r\n            uiName: 'Button BG',\r\n        },\r\n        {\r\n            group: 'linkAndButtonElements',\r\n            id: 'buttonColor',\r\n            uiName: 'Button Text',\r\n        },\r\n        {\r\n            group: 'centerChannelElements',\r\n            id: 'codeTheme',\r\n            uiName: 'Code Theme',\r\n            themes: [\r\n                {\r\n                    id: 'solarized-dark',\r\n                    uiName: 'Solarized Dark',\r\n                    cssURL: solarizedDarkCSS,\r\n                    iconURL: solarizedDarkIcon,\r\n                },\r\n                {\r\n                    id: 'solarized-light',\r\n                    uiName: 'Solarized Light',\r\n                    cssURL: solarizedLightCSS,\r\n                    iconURL: solarizedLightIcon,\r\n                },\r\n                {\r\n                    id: 'github',\r\n                    uiName: 'GitHub',\r\n                    cssURL: githubCSS,\r\n                    iconURL: githubIcon,\r\n                },\r\n                {\r\n                    id: 'monokai',\r\n                    uiName: 'Monokai',\r\n                    cssURL: monokaiCSS,\r\n                    iconURL: monokaiIcon,\r\n                },\r\n            ],\r\n        },\r\n    ],\r\n    DEFAULT_CODE_THEME: 'github',\r\n\r\n    // KeyCodes\r\n    //  key[0]: used for KeyboardEvent.key\r\n    //  key[1]: used for KeyboardEvent.keyCode\r\n    //  key[2]: used for KeyboardEvent.code\r\n\r\n    //  KeyboardEvent.code is used as primary check to support multiple keyborad layouts\r\n    //  support of KeyboardEvent.code is just in chrome and firefox so using key and keyCode for better browser support\r\n\r\n    KeyCodes: ({\r\n        BACKSPACE: ['Backspace', 8],\r\n        TAB: ['Tab', 9],\r\n        ENTER: ['Enter', 13],\r\n        SHIFT: ['Shift', 16],\r\n        CTRL: ['Control', 17],\r\n        ALT: ['Alt', 18],\r\n        CAPS_LOCK: ['CapsLock', 20],\r\n        ESCAPE: ['Escape', 27],\r\n        SPACE: [' ', 32],\r\n        PAGE_UP: ['PageUp', 33],\r\n        PAGE_DOWN: ['PageDown', 34],\r\n        END: ['End', 35],\r\n        HOME: ['Home', 36],\r\n        LEFT: ['ArrowLeft', 37],\r\n        UP: ['ArrowUp', 38],\r\n        RIGHT: ['ArrowRight', 39],\r\n        DOWN: ['ArrowDown', 40],\r\n        INSERT: ['Insert', 45],\r\n        DELETE: ['Delete', 46],\r\n        ZERO: ['0', 48],\r\n        ONE: ['1', 49],\r\n        TWO: ['2', 50],\r\n        THREE: ['3', 51],\r\n        FOUR: ['4', 52],\r\n        FIVE: ['5', 53],\r\n        SIX: ['6', 54],\r\n        SEVEN: ['7', 55],\r\n        EIGHT: ['8', 56],\r\n        NINE: ['9', 57],\r\n        A: ['a', 65],\r\n        B: ['b', 66],\r\n        C: ['c', 67],\r\n        D: ['d', 68],\r\n        E: ['e', 69],\r\n        F: ['f', 70],\r\n        G: ['g', 71],\r\n        H: ['h', 72],\r\n        I: ['i', 73],\r\n        J: ['j', 74],\r\n        K: ['k', 75],\r\n        L: ['l', 76],\r\n        M: ['m', 77],\r\n        N: ['n', 78],\r\n        O: ['o', 79],\r\n        P: ['p', 80],\r\n        Q: ['q', 81],\r\n        R: ['r', 82],\r\n        S: ['s', 83],\r\n        T: ['t', 84],\r\n        U: ['u', 85],\r\n        V: ['v', 86],\r\n        W: ['w', 87],\r\n        X: ['x', 88],\r\n        Y: ['y', 89],\r\n        Z: ['z', 90],\r\n        CMD: ['Meta', 91],\r\n        MENU: ['ContextMenu', 93],\r\n        NUMPAD_0: ['0', 96],\r\n        NUMPAD_1: ['1', 97],\r\n        NUMPAD_2: ['2', 98],\r\n        NUMPAD_3: ['3', 99],\r\n        NUMPAD_4: ['4', 100],\r\n        NUMPAD_5: ['5', 101],\r\n        NUMPAD_6: ['6', 102],\r\n        NUMPAD_7: ['7', 103],\r\n        NUMPAD_8: ['8', 104],\r\n        NUMPAD_9: ['9', 105],\r\n        MULTIPLY: ['*', 106],\r\n        ADD: ['+', 107],\r\n        SUBTRACT: ['-', 109],\r\n        DECIMAL: ['.', 110],\r\n        DIVIDE: ['/', 111],\r\n        F1: ['F1', 112],\r\n        F2: ['F2', 113],\r\n        F3: ['F3', 114],\r\n        F4: ['F4', 115],\r\n        F5: ['F5', 116],\r\n        F6: ['F6', 117],\r\n        F7: ['F7', 118],\r\n        F8: ['F8', 119],\r\n        F9: ['F9', 120],\r\n        F10: ['F10', 121],\r\n        F11: ['F11', 122],\r\n        F12: ['F12', 123],\r\n        NUM_LOCK: ['NumLock', 144],\r\n        SEMICOLON: [';', 186],\r\n        EQUAL: ['=', 187],\r\n        COMMA: [',', 188],\r\n        DASH: ['-', 189],\r\n        PERIOD: ['.', 190],\r\n        FORWARD_SLASH: ['/', 191],\r\n        TILDE: ['~', 192], // coudnt find the key or even get code from browser - no reference in code as of now\r\n        OPEN_BRACKET: ['[', 219],\r\n        BACK_SLASH: ['\\\\', 220],\r\n        CLOSE_BRACKET: [']', 221],\r\n        COMPOSING: ['Composing', 229],\r\n    } as Record<string, [string, number]>),\r\n    CODE_PREVIEW_MAX_FILE_SIZE: 500000, // 500 KB\r\n    HighlightedLanguages: {\r\n        '1c': {name: '1C:Enterprise', extensions: ['bsl', 'os'], aliases: ['bsl']},\r\n        actionscript: {name: 'ActionScript', extensions: ['as'], aliases: ['as', 'as3']},\r\n        applescript: {name: 'AppleScript', extensions: ['applescript', 'osascript', 'scpt'], aliases: ['osascript']},\r\n        bash: {name: 'Bash', extensions: ['sh'], aliases: ['sh', 'zsh']},\r\n        clojure: {name: 'Clojure', extensions: ['clj', 'boot', 'cl2', 'cljc', 'cljs', 'cljs.hl', 'cljscm', 'cljx', 'hic'], aliases: ['clj']},\r\n        coffeescript: {name: 'CoffeeScript', extensions: ['coffee', '_coffee', 'cake', 'cjsx', 'cson', 'iced'], aliases: ['coffee', 'coffee-script']},\r\n        cpp: {name: 'C/C++', extensions: ['cpp', 'c', 'cc', 'h', 'c++', 'h++', 'hpp'], aliases: ['c++', 'c']},\r\n        csharp: {name: 'C#', extensions: ['cs', 'csharp'], aliases: ['c#', 'cs', 'csharp']},\r\n        css: {name: 'CSS', extensions: ['css']},\r\n        d: {name: 'D', extensions: ['d', 'di'], aliases: ['dlang']},\r\n        dart: {name: 'Dart', extensions: ['dart']},\r\n        delphi: {name: 'Delphi', extensions: ['delphi', 'dpr', 'dfm', 'pas', 'pascal', 'freepascal', 'lazarus', 'lpr', 'lfm'], aliases: ['pas', 'pascal']},\r\n        diff: {name: 'Diff', extensions: ['diff', 'patch'], aliases: ['patch', 'udiff']},\r\n        django: {name: 'Django', extensions: ['django', 'jinja'], aliases: ['jinja']},\r\n        dockerfile: {name: 'Dockerfile', extensions: ['dockerfile', 'docker'], aliases: ['docker']},\r\n        elixir: {name: 'Elixir', extensions: ['ex', 'exs'], aliases: ['ex', 'exs']},\r\n        erlang: {name: 'Erlang', extensions: ['erl'], aliases: ['erl']},\r\n        fortran: {name: 'Fortran', extensions: ['f90', 'f95'], aliases: ['f90', 'f95']},\r\n        fsharp: {name: 'F#', extensions: ['fsharp', 'fs'], aliases: ['fs']},\r\n        gcode: {name: 'G-Code', extensions: ['gcode', 'nc']},\r\n        go: {name: 'Go', extensions: ['go'], aliases: ['golang']},\r\n        groovy: {name: 'Groovy', extensions: ['groovy']},\r\n        handlebars: {name: 'Handlebars', extensions: ['handlebars', 'hbs', 'html.hbs', 'html.handlebars'], aliases: ['hbs', 'mustache']},\r\n        haskell: {name: 'Haskell', extensions: ['hs'], aliases: ['hs']},\r\n        haxe: {name: 'Haxe', extensions: ['hx'], aliases: ['hx']},\r\n        java: {name: 'Java', extensions: ['java', 'jsp']},\r\n        javascript: {name: 'JavaScript', extensions: ['js', 'jsx'], aliases: ['js']},\r\n        json: {name: 'JSON', extensions: ['json']},\r\n        julia: {name: 'Julia', extensions: ['jl'], aliases: ['jl']},\r\n        kotlin: {name: 'Kotlin', extensions: ['kt', 'ktm', 'kts'], aliases: ['kt']},\r\n        latex: {name: 'LaTeX', extensions: ['tex'], aliases: ['tex']},\r\n        less: {name: 'Less', extensions: ['less']},\r\n        lisp: {name: 'Lisp', extensions: ['lisp']},\r\n        lua: {name: 'Lua', extensions: ['lua']},\r\n        makefile: {name: 'Makefile', extensions: ['mk', 'mak'], aliases: ['make', 'mf', 'gnumake', 'bsdmake', 'mk']},\r\n        markdown: {name: 'Markdown', extensions: ['md', 'mkdown', 'mkd'], aliases: ['md', 'mkd']},\r\n        matlab: {name: 'Matlab', extensions: ['matlab', 'm'], aliases: ['m']},\r\n        objectivec: {name: 'Objective C', extensions: ['mm', 'objc', 'obj-c'], aliases: ['objective_c', 'objc']},\r\n        ocaml: {name: 'OCaml', extensions: ['ml'], aliases: ['ml']},\r\n        perl: {name: 'Perl', extensions: ['perl', 'pl'], aliases: ['pl']},\r\n        pgsql: {name: 'PostgreSQL', extensions: ['pgsql', 'postgres', 'postgresql'], aliases: ['postgres', 'postgresql']},\r\n        php: {name: 'PHP', extensions: ['php', 'php3', 'php4', 'php5', 'php6'], aliases: ['php3', 'php4', 'php5', 'php6']},\r\n        powershell: {name: 'PowerShell', extensions: ['ps', 'ps1'], aliases: ['posh']},\r\n        puppet: {name: 'Puppet', extensions: ['pp'], aliases: ['pp']},\r\n        python: {name: 'Python', extensions: ['py', 'gyp'], aliases: ['py']},\r\n        r: {name: 'R', extensions: ['r'], aliases: ['r', 's']},\r\n        ruby: {name: 'Ruby', extensions: ['ruby', 'rb', 'gemspec', 'podspec', 'thor', 'irb'], aliases: ['rb']},\r\n        rust: {name: 'Rust', extensions: ['rs'], aliases: ['rs']},\r\n        scala: {name: 'Scala', extensions: ['scala']},\r\n        scheme: {name: 'Scheme', extensions: ['scm', 'sld'], aliases: ['scm']},\r\n        scss: {name: 'SCSS', extensions: ['scss']},\r\n        smalltalk: {name: 'Smalltalk', extensions: ['st'], aliases: ['st', 'squeak']},\r\n        sql: {name: 'SQL', extensions: ['sql']},\r\n        stylus: {name: 'Stylus', extensions: ['styl'], aliases: ['styl']},\r\n        swift: {name: 'Swift', extensions: ['swift']},\r\n        text: {name: 'Text', extensions: ['txt', 'log'], aliases: ['txt']},\r\n        typescript: {name: 'TypeScript', extensions: ['ts', 'tsx'], aliases: ['ts', 'tsx']},\r\n        vbnet: {name: 'VB.Net', extensions: ['vbnet', 'vb', 'bas'], aliases: ['vb', 'visualbasic']},\r\n        vbscript: {name: 'VBScript', extensions: ['vbs'], aliases: ['vbs']},\r\n        verilog: {name: 'Verilog', extensions: ['v', 'veo', 'sv', 'svh']},\r\n        vhdl: {name: 'VHDL', extensions: ['vhd', 'vhdl'], aliases: ['vhd']},\r\n        vtt: {name: 'WebVTT', extensions: ['vtt'], aliases: ['vtt', 'webvtt']},\r\n        xml: {name: 'HTML, XML', extensions: ['xml', 'html', 'xhtml', 'rss', 'atom', 'xsl', 'plist']},\r\n        yaml: {name: 'YAML', extensions: ['yaml'], aliases: ['yml']},\r\n    },\r\n    PostsViewJumpTypes: {\r\n        BOTTOM: 1,\r\n        POST: 2,\r\n        SIDEBAR_OPEN: 3,\r\n    },\r\n    NotificationPrefs: {\r\n        MENTION: 'mention',\r\n    },\r\n    Integrations: {\r\n        COMMAND: 'commands',\r\n        PAGE_SIZE: 10000,\r\n        START_PAGE_NUM: 0,\r\n        INCOMING_WEBHOOK: 'incoming_webhooks',\r\n        OUTGOING_WEBHOOK: 'outgoing_webhooks',\r\n        OAUTH_APP: 'oauth2-apps',\r\n        OUTGOING_OAUTH_CONNECTIONS: 'outgoing-oauth2-connections',\r\n        BOT: 'bots',\r\n        EXECUTE_CURRENT_COMMAND_ITEM_ID: '_execute_current_command',\r\n        OPEN_COMMAND_IN_MODAL_ITEM_ID: '_open_command_in_modal',\r\n        COMMAND_SUGGESTION_ERROR: 'error',\r\n        COMMAND_SUGGESTION_CHANNEL: 'channel',\r\n        COMMAND_SUGGESTION_USER: 'user',\r\n    },\r\n    PERMALINK_FADEOUT: 5000,\r\n    DEFAULT_MAX_USERS_PER_TEAM: 50,\r\n    DEFAULT_MAX_CHANNELS_PER_TEAM: 2000,\r\n    DEFAULT_MAX_NOTIFICATIONS_PER_CHANNEL: 1000,\r\n    MIN_TEAMNAME_LENGTH: 2,\r\n    MAX_TEAMNAME_LENGTH: 64,\r\n    MAX_TEAMDESCRIPTION_LENGTH: 50,\r\n    MIN_CHANNELNAME_LENGTH: 1,\r\n    MAX_CHANNELNAME_LENGTH: 64,\r\n    DEFAULT_CHANNELURL_SHORTEN_LENGTH: 52,\r\n    MAX_CHANNELPURPOSE_LENGTH: 250,\r\n    MAX_CUSTOM_ATTRIBUTE_NAME_LENGTH: 40,\r\n    MAX_CUSTOM_ATTRIBUTES: 20,\r\n    MAX_CUSTOM_ATTRIBUTE_LENGTH: 64,\r\n    MAX_FIRSTNAME_LENGTH: 64,\r\n    MAX_LASTNAME_LENGTH: 64,\r\n    MAX_EMAIL_LENGTH: 128,\r\n    MIN_USERNAME_LENGTH: 3,\r\n    MAX_USERNAME_LENGTH: 22,\r\n    MAX_NICKNAME_LENGTH: 64,\r\n    MIN_PASSWORD_LENGTH: 5,\r\n    MAX_PASSWORD_LENGTH: 72,\r\n    MAX_POSITION_LENGTH: 128,\r\n    MIN_TRIGGER_LENGTH: 1,\r\n    MAX_TRIGGER_LENGTH: 128,\r\n    MAX_SITENAME_LENGTH: 30,\r\n    MAX_CUSTOM_BRAND_TEXT_LENGTH: 500,\r\n    MAX_TERMS_OF_SERVICE_TEXT_LENGTH: 16383,\r\n    DEFAULT_TERMS_OF_SERVICE_RE_ACCEPTANCE_PERIOD: 365,\r\n    EMOJI_PATH: '/static/emoji',\r\n    RECENT_EMOJI_KEY: 'recentEmojis',\r\n    DEFAULT_WEBHOOK_LOGO: logoWebhook,\r\n    MHPNS_US: 'https://push.mattermost.com',\r\n    MHPNS_DE: 'https://hpns-de.mattermost.com',\r\n    MTPNS: 'https://push-test.mattermost.com',\r\n    MAX_PREV_MSGS: 100,\r\n    POST_COLLAPSE_TIMEOUT: 1000 * 60 * 5, // five minutes\r\n    SAVE_DRAFT_TIMEOUT: 500,\r\n    PERMISSIONS_ALL: 'all',\r\n    PERMISSIONS_CHANNEL_ADMIN: 'channel_admin',\r\n    PERMISSIONS_TEAM_ADMIN: 'team_admin',\r\n    PERMISSIONS_SYSTEM_ADMIN: 'system_admin',\r\n    PERMISSIONS_SYSTEM_READ_ONLY_ADMIN: 'system_read_only_admin',\r\n    PERMISSIONS_SYSTEM_USER_MANAGER: 'system_user_manager',\r\n    PERMISSIONS_SYSTEM_MANAGER: 'system_manager',\r\n    PERMISSIONS_DELETE_POST_ALL: 'all',\r\n    PERMISSIONS_DELETE_POST_TEAM_ADMIN: 'team_admin',\r\n    PERMISSIONS_DELETE_POST_SYSTEM_ADMIN: 'system_admin',\r\n    PERMISSIONS_SYSTEM_CUSTOM_GROUP_ADMIN: 'system_custom_group_admin',\r\n    ALLOW_EDIT_POST_ALWAYS: 'always',\r\n    ALLOW_EDIT_POST_NEVER: 'never',\r\n    ALLOW_EDIT_POST_TIME_LIMIT: 'time_limit',\r\n    UNSET_POST_EDIT_TIME_LIMIT: -1,\r\n    MENTION_MORE_CHANNELS: 'mention.morechannels',\r\n    MENTION_UNREAD: 'mention.unread',\r\n    MENTION_PUBLIC_CHANNELS: 'mention.public.channels',\r\n    MENTION_PRIVATE_CHANNELS: 'mention.private.channels',\r\n    MENTION_RECENT_CHANNELS: 'mention.recent.channels',\r\n    MENTION_GROUPS: 'search.group',\r\n    STATUS_INTERVAL: 60000,\r\n    AUTOCOMPLETE_TIMEOUT: 100,\r\n    AUTOCOMPLETE_SPLIT_CHARACTERS: ['.', '-', '_'],\r\n    ANIMATION_TIMEOUT: 1000,\r\n    SEARCH_TIMEOUT_MILLISECONDS: 100,\r\n    TEAMMATE_NAME_DISPLAY: {\r\n        SHOW_USERNAME: 'username',\r\n        SHOW_NICKNAME_FULLNAME: 'nickname_full_name',\r\n        SHOW_FULLNAME: 'full_name',\r\n    },\r\n    SEARCH_POST: 'searchpost',\r\n    CHANNEL_ID_LENGTH: 26,\r\n    TRANSPARENT_PIXEL: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\r\n    REGEX_CODE_BLOCK_OPTIONAL_LANGUAGE_TAG: /^```.*$/gm,\r\n    MAX_ATTACHMENT_FOOTER_LENGTH: 300,\r\n    ACCEPT_STATIC_IMAGE: '.jpeg,.jpg,.png,.bmp',\r\n    ACCEPT_EMOJI_IMAGE: '.jpeg,.jpg,.png,.gif',\r\n    THREADS_LOADING_INDICATOR_ITEM_ID: 'threads_loading_indicator_item_id',\r\n    THREADS_NO_RESULTS_ITEM_ID: 'threads_no_results_item_id',\r\n    TRIAL_MODAL_AUTO_SHOWN: 'trial_modal_auto_shown',\r\n    DEFAULT_SITE_URL: 'http://localhost:8065',\r\n    CHANNEL_HEADER_BUTTON_DISABLE_TIMEOUT: 1000,\r\n    FIRST_ADMIN_ROLE: 'first_admin',\r\n    MAX_PURCHASE_SEATS: 1000000,\r\n    MIN_PURCHASE_SEATS: 10,\r\n};\r\n\r\nexport const ValidationErrors = {\r\n    USERNAME_REQUIRED: 'USERNAME_REQUIRED',\r\n    INVALID_LENGTH: 'INVALID_LENGTH',\r\n    INVALID_CHARACTERS: 'INVALID_CHARACTERS',\r\n    INVALID_FIRST_CHARACTER: 'INVALID_FIRST_CHARACTER',\r\n    RESERVED_NAME: 'RESERVED_NAME',\r\n    INVALID_LAST_CHARACTER: 'INVALID_LAST_CHARACTER',\r\n};\r\n\r\nexport const ConsolePages = {\r\n    AD_LDAP: '/admin_console/authentication/ldap',\r\n    COMPLIANCE_EXPORT: '/admin_console/compliance/export',\r\n    CUSTOM_TERMS: '/admin_console/compliance/custom_terms_of_service',\r\n    DATA_RETENTION: '/admin_console/compliance/data_retention_settings',\r\n    ELASTICSEARCH: '/admin_console/environment/elasticsearch',\r\n    GUEST_ACCOUNTS: '/admin_console/authentication/guest_access',\r\n    LICENSE: '/admin_console/about/license',\r\n    SAML: '/admin_console/authentication/saml',\r\n    FILE_STORAGE: '/admin_console/environment/file_storage',\r\n    SESSION_LENGTHS: '/admin_console/environment/session_lengths',\r\n    WEB_SERVER: '/admin_console/environment/web_server',\r\n    PUSH_NOTIFICATION_CENTER: '/admin_console/environment/push_notification_server',\r\n    SMTP: '/admin_console/environment/smtp',\r\n    PAYMENT_INFO: '/admin_console/billing/payment_info',\r\n    BILLING_HISTORY: '/admin_console/billing/billing_history',\r\n};\r\n\r\nexport const WindowSizes = {\r\n    MOBILE_VIEW: 'mobileView',\r\n    TABLET_VIEW: 'tabletView',\r\n    SMALL_DESKTOP_VIEW: 'smallDesktopView',\r\n    DESKTOP_VIEW: 'desktopView',\r\n};\r\n\r\nexport const AcceptedProfileImageTypes = ['image/jpeg', 'image/png', 'image/bmp'];\r\n\r\nexport const searchHintOptions = [{searchTerm: 'From:', message: defineMessage({id: 'search_list_option.from', defaultMessage: 'Messages from a user'})},\r\n    {searchTerm: 'In:', message: defineMessage({id: 'search_list_option.in', defaultMessage: 'Messages in a channel'})},\r\n    {searchTerm: 'On:', message: defineMessage({id: 'search_list_option.on', defaultMessage: 'Messages on a date'})},\r\n    {searchTerm: 'Before:', message: defineMessage({id: 'search_list_option.before', defaultMessage: 'Messages before a date'})},\r\n    {searchTerm: 'After:', message: defineMessage({id: 'search_list_option.after', defaultMessage: 'Messages after a date'})},\r\n    {searchTerm: '-', message: defineMessage({id: 'search_list_option.exclude', defaultMessage: 'Exclude search terms'}), additionalDisplay: ''},\r\n    {searchTerm: '\"\"', message: defineMessage({id: 'search_list_option.phrases', defaultMessage: 'Messages with phrases'})},\r\n];\r\n\r\nexport const searchFilesHintOptions = [{searchTerm: 'From:', message: defineMessage({id: 'search_files_list_option.from', defaultMessage: 'Files from a user'})},\r\n    {searchTerm: 'In:', message: defineMessage({id: 'search_files_list_option.in', defaultMessage: 'Files in a channel'})},\r\n    {searchTerm: 'On:', message: defineMessage({id: 'search_files_list_option.on', defaultMessage: 'Files on a date'})},\r\n    {searchTerm: 'Before:', message: defineMessage({id: 'search_files_list_option.before', defaultMessage: 'Files before a date'})},\r\n    {searchTerm: 'After:', message: defineMessage({id: 'search_files_list_option.after', defaultMessage: 'Files after a date'})},\r\n    {searchTerm: 'Ext:', message: defineMessage({id: 'search_files_list_option.ext', defaultMessage: 'Files with a extension'})},\r\n    {searchTerm: '-', message: defineMessage({id: 'search_files_list_option.exclude', defaultMessage: 'Exclude search terms'}), additionalDisplay: ''},\r\n    {searchTerm: '\"\"', message: defineMessage({id: 'search_files_list_option.phrases', defaultMessage: 'Files with phrases'})},\r\n];\r\n\r\nconst {\r\n    DONT_CLEAR,\r\n    THIRTY_MINUTES,\r\n    ONE_HOUR,\r\n    FOUR_HOURS,\r\n    TODAY,\r\n    THIS_WEEK,\r\n    DATE_AND_TIME,\r\n    CUSTOM_DATE_TIME,\r\n} = CustomStatusDuration;\r\n\r\nexport const durationValues = defineMessages({\r\n    [DONT_CLEAR]: {\r\n        id: 'custom_status.expiry_dropdown.dont_clear',\r\n        defaultMessage: \"Don't clear\",\r\n    },\r\n    [THIRTY_MINUTES]: {\r\n        id: 'custom_status.expiry_dropdown.thirty_minutes',\r\n        defaultMessage: '30 minutes',\r\n    },\r\n    [ONE_HOUR]: {\r\n        id: 'custom_status.expiry_dropdown.one_hour',\r\n        defaultMessage: '1 hour',\r\n    },\r\n    [FOUR_HOURS]: {\r\n        id: 'custom_status.expiry_dropdown.four_hours',\r\n        defaultMessage: '4 hours',\r\n    },\r\n    [TODAY]: {\r\n        id: 'custom_status.expiry_dropdown.today',\r\n        defaultMessage: 'Today',\r\n    },\r\n    [THIS_WEEK]: {\r\n        id: 'custom_status.expiry_dropdown.this_week',\r\n        defaultMessage: 'This week',\r\n    },\r\n    [DATE_AND_TIME]: {\r\n        id: 'custom_status.expiry_dropdown.date_and_time',\r\n        defaultMessage: 'Custom Date and Time',\r\n    },\r\n    [CUSTOM_DATE_TIME]: {\r\n        id: 'custom_status.expiry_dropdown.date_and_time',\r\n        defaultMessage: 'Custom Date and Time',\r\n    },\r\n});\r\n\r\nexport enum ClaimErrors {\r\n    MFA_VALIDATE_TOKEN_AUTHENTICATE = 'mfa.validate_token.authenticate.app_error',\r\n    ENT_LDAP_LOGIN_USER_NOT_REGISTERED = 'ent.ldap.do_login.user_not_registered.app_error',\r\n    ENT_LDAP_LOGIN_USER_FILTERED = 'ent.ldap.do_login.user_filtered.app_error',\r\n    ENT_LDAP_LOGIN_MATCHED_TOO_MANY_USERS = 'ent.ldap.do_login.matched_to_many_users.app_error',\r\n    ENT_LDAP_LOGIN_INVALID_PASSWORD = 'ent.ldap.do_login.invalid_password.app_error',\r\n    API_USER_INVALID_PASSWORD = 'api.user.check_user_password.invalid.app_error',\r\n}\r\n\r\nexport const DataSearchTypes = {\r\n    FILES_SEARCH_TYPE: 'files',\r\n    MESSAGES_SEARCH_TYPE: 'messages',\r\n} as const;\r\n\r\n// Currently, the overage user limits are set to 0, which means that the overage active users warning\r\n// is immediatly shown when over 100% usage.\r\n// Originally it was set to Min 5% and Max 10% (5% would be a blue warning and 10% would be a red warning).\r\nexport const OverActiveUserLimits = {\r\n    MIN: 0,\r\n    MAX: 0,\r\n} as const;\r\n\r\nexport const PageLoadContext = {\r\n    PAGE_LOAD: 'page_load',\r\n    RECONNECT: 'reconnect',\r\n} as const;\r\n\r\nexport const DRAFT_URL_SUFFIX = 'drafts';\r\nexport const SCHEDULED_POST_URL_SUFFIX = 'scheduled_posts';\r\n\r\nexport const scheduledPosts = {\r\n    RECENTLY_USED_CUSTOM_TIME: 'recently_used_custom_time',\r\n    SCHEDULED_POSTS: 'scheduled_posts',\r\n};\r\n\r\n/**\r\n * This is the ID of the root portal container that is used to render modals and other components\r\n * that need to be rendered outside of the main app container.\r\n */\r\nexport const RootHtmlPortalId = 'root-portal';\r\n\r\nexport const OverlaysTimings = {\r\n    CURSOR_REST_TIME_BEFORE_OPEN: 400, // in ms\r\n    CURSOR_MOUSEOVER_TO_OPEN: 400, // in ms\r\n    CURSOR_MOUSEOUT_TO_CLOSE: 0,\r\n    CURSOR_MOUSEOUT_TO_CLOSE_WITH_DELAY: 200, // in ms\r\n    FADE_IN_DURATION: 250, // in ms\r\n    FADE_OUT_DURATION: 150, // in ms\r\n};\r\n\r\nexport const OverlayTransitionStyles = {\r\n    START: {\r\n        opacity: 0,\r\n    },\r\n};\r\n\r\nexport const OverlayArrow = {\r\n    WIDTH: 10, // in px\r\n    HEIGHT: 6, // in px\r\n    OFFSET: 8, // in px\r\n};\r\n\r\nexport default Constants;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {DraftInfo} from 'types/store/draft';\r\n\r\nimport {StoragePrefixes} from './constants';\r\n\r\nexport function getDraftInfoFromKey(key: string, prefix: string): DraftInfo | null {\r\n    const keyArr = key.split('_');\r\n    if (prefix === StoragePrefixes.DRAFT) {\r\n        return {\r\n            id: keyArr[1],\r\n            type: 'channel',\r\n        };\r\n    }\r\n\r\n    if (prefix === StoragePrefixes.COMMENT_DRAFT) {\r\n        return {\r\n            id: keyArr[2],\r\n            type: 'thread',\r\n        };\r\n    }\r\n\r\n    return null;\r\n}\r\n","var map = {\n\t\"./af\": 99805,\n\t\"./af.js\": 99805,\n\t\"./ar\": 94449,\n\t\"./ar-dz\": 44468,\n\t\"./ar-dz.js\": 44468,\n\t\"./ar-kw\": 63480,\n\t\"./ar-kw.js\": 63480,\n\t\"./ar-ly\": 64197,\n\t\"./ar-ly.js\": 64197,\n\t\"./ar-ma\": 62180,\n\t\"./ar-ma.js\": 62180,\n\t\"./ar-ps\": 29343,\n\t\"./ar-ps.js\": 29343,\n\t\"./ar-sa\": 50230,\n\t\"./ar-sa.js\": 50230,\n\t\"./ar-tn\": 72808,\n\t\"./ar-tn.js\": 72808,\n\t\"./ar.js\": 94449,\n\t\"./az\": 45865,\n\t\"./az.js\": 45865,\n\t\"./be\": 86627,\n\t\"./be.js\": 86627,\n\t\"./bg\": 60901,\n\t\"./bg.js\": 60901,\n\t\"./bm\": 63179,\n\t\"./bm.js\": 63179,\n\t\"./bn\": 61966,\n\t\"./bn-bd\": 90969,\n\t\"./bn-bd.js\": 90969,\n\t\"./bn.js\": 61966,\n\t\"./bo\": 6317,\n\t\"./bo.js\": 6317,\n\t\"./br\": 46474,\n\t\"./br.js\": 46474,\n\t\"./bs\": 35961,\n\t\"./bs.js\": 35961,\n\t\"./ca\": 77270,\n\t\"./ca.js\": 77270,\n\t\"./cs\": 61564,\n\t\"./cs.js\": 61564,\n\t\"./cv\": 43239,\n\t\"./cv.js\": 43239,\n\t\"./cy\": 92366,\n\t\"./cy.js\": 92366,\n\t\"./da\": 82453,\n\t\"./da.js\": 82453,\n\t\"./de\": 76601,\n\t\"./de-at\": 25027,\n\t\"./de-at.js\": 25027,\n\t\"./de-ch\": 8101,\n\t\"./de-ch.js\": 8101,\n\t\"./de.js\": 76601,\n\t\"./dv\": 96080,\n\t\"./dv.js\": 96080,\n\t\"./el\": 12655,\n\t\"./el.js\": 12655,\n\t\"./en-au\": 46836,\n\t\"./en-au.js\": 46836,\n\t\"./en-ca\": 22086,\n\t\"./en-ca.js\": 22086,\n\t\"./en-gb\": 2103,\n\t\"./en-gb.js\": 2103,\n\t\"./en-ie\": 35964,\n\t\"./en-ie.js\": 35964,\n\t\"./en-il\": 74379,\n\t\"./en-il.js\": 74379,\n\t\"./en-in\": 50765,\n\t\"./en-in.js\": 50765,\n\t\"./en-nz\": 71502,\n\t\"./en-nz.js\": 71502,\n\t\"./en-sg\": 1152,\n\t\"./en-sg.js\": 1152,\n\t\"./eo\": 90050,\n\t\"./eo.js\": 90050,\n\t\"./es\": 43350,\n\t\"./es-do\": 49338,\n\t\"./es-do.js\": 49338,\n\t\"./es-mx\": 51326,\n\t\"./es-mx.js\": 51326,\n\t\"./es-us\": 89947,\n\t\"./es-us.js\": 89947,\n\t\"./es.js\": 43350,\n\t\"./et\": 18231,\n\t\"./et.js\": 18231,\n\t\"./eu\": 28512,\n\t\"./eu.js\": 28512,\n\t\"./fa\": 59083,\n\t\"./fa.js\": 59083,\n\t\"./fi\": 25059,\n\t\"./fi.js\": 25059,\n\t\"./fil\": 32607,\n\t\"./fil.js\": 32607,\n\t\"./fo\": 83369,\n\t\"./fo.js\": 83369,\n\t\"./fr\": 27390,\n\t\"./fr-ca\": 66711,\n\t\"./fr-ca.js\": 66711,\n\t\"./fr-ch\": 6152,\n\t\"./fr-ch.js\": 6152,\n\t\"./fr.js\": 27390,\n\t\"./fy\": 62419,\n\t\"./fy.js\": 62419,\n\t\"./ga\": 3002,\n\t\"./ga.js\": 3002,\n\t\"./gd\": 82533,\n\t\"./gd.js\": 82533,\n\t\"./gl\": 16557,\n\t\"./gl.js\": 16557,\n\t\"./gom-deva\": 48944,\n\t\"./gom-deva.js\": 48944,\n\t\"./gom-latn\": 25387,\n\t\"./gom-latn.js\": 25387,\n\t\"./gu\": 17462,\n\t\"./gu.js\": 17462,\n\t\"./he\": 39237,\n\t\"./he.js\": 39237,\n\t\"./hi\": 49617,\n\t\"./hi.js\": 49617,\n\t\"./hr\": 36544,\n\t\"./hr.js\": 36544,\n\t\"./hu\": 60341,\n\t\"./hu.js\": 60341,\n\t\"./hy-am\": 41388,\n\t\"./hy-am.js\": 41388,\n\t\"./id\": 75251,\n\t\"./id.js\": 75251,\n\t\"./is\": 41146,\n\t\"./is.js\": 41146,\n\t\"./it\": 37891,\n\t\"./it-ch\": 80007,\n\t\"./it-ch.js\": 80007,\n\t\"./it.js\": 37891,\n\t\"./ja\": 73727,\n\t\"./ja.js\": 73727,\n\t\"./jv\": 5198,\n\t\"./jv.js\": 5198,\n\t\"./ka\": 28974,\n\t\"./ka.js\": 28974,\n\t\"./kk\": 37308,\n\t\"./kk.js\": 37308,\n\t\"./km\": 57786,\n\t\"./km.js\": 57786,\n\t\"./kn\": 84807,\n\t\"./kn.js\": 84807,\n\t\"./ko\": 61584,\n\t\"./ko.js\": 61584,\n\t\"./ku\": 61906,\n\t\"./ku-kmr\": 75305,\n\t\"./ku-kmr.js\": 75305,\n\t\"./ku.js\": 61906,\n\t\"./ky\": 79190,\n\t\"./ky.js\": 79190,\n\t\"./lb\": 7396,\n\t\"./lb.js\": 7396,\n\t\"./lo\": 38503,\n\t\"./lo.js\": 38503,\n\t\"./lt\": 33010,\n\t\"./lt.js\": 33010,\n\t\"./lv\": 5192,\n\t\"./lv.js\": 5192,\n\t\"./me\": 51944,\n\t\"./me.js\": 51944,\n\t\"./mi\": 56492,\n\t\"./mi.js\": 56492,\n\t\"./mk\": 2934,\n\t\"./mk.js\": 2934,\n\t\"./ml\": 61463,\n\t\"./ml.js\": 61463,\n\t\"./mn\": 8377,\n\t\"./mn.js\": 8377,\n\t\"./mr\": 78733,\n\t\"./mr.js\": 78733,\n\t\"./ms\": 18030,\n\t\"./ms-my\": 39445,\n\t\"./ms-my.js\": 39445,\n\t\"./ms.js\": 18030,\n\t\"./mt\": 55887,\n\t\"./mt.js\": 55887,\n\t\"./my\": 87228,\n\t\"./my.js\": 87228,\n\t\"./nb\": 48294,\n\t\"./nb.js\": 48294,\n\t\"./ne\": 19559,\n\t\"./ne.js\": 19559,\n\t\"./nl\": 20600,\n\t\"./nl-be\": 78796,\n\t\"./nl-be.js\": 78796,\n\t\"./nl.js\": 20600,\n\t\"./nn\": 9570,\n\t\"./nn.js\": 9570,\n\t\"./oc-lnc\": 5662,\n\t\"./oc-lnc.js\": 5662,\n\t\"./pa-in\": 87101,\n\t\"./pa-in.js\": 87101,\n\t\"./pl\": 56118,\n\t\"./pl.js\": 56118,\n\t\"./pt\": 29198,\n\t\"./pt-br\": 7203,\n\t\"./pt-br.js\": 7203,\n\t\"./pt.js\": 29198,\n\t\"./ro\": 45565,\n\t\"./ro.js\": 45565,\n\t\"./ru\": 33315,\n\t\"./ru.js\": 33315,\n\t\"./sd\": 58473,\n\t\"./sd.js\": 58473,\n\t\"./se\": 11258,\n\t\"./se.js\": 11258,\n\t\"./si\": 98798,\n\t\"./si.js\": 98798,\n\t\"./sk\": 26404,\n\t\"./sk.js\": 26404,\n\t\"./sl\": 7057,\n\t\"./sl.js\": 7057,\n\t\"./sq\": 25718,\n\t\"./sq.js\": 25718,\n\t\"./sr\": 45363,\n\t\"./sr-cyrl\": 20478,\n\t\"./sr-cyrl.js\": 20478,\n\t\"./sr.js\": 45363,\n\t\"./ss\": 37260,\n\t\"./ss.js\": 37260,\n\t\"./sv\": 42231,\n\t\"./sv.js\": 42231,\n\t\"./sw\": 27104,\n\t\"./sw.js\": 27104,\n\t\"./ta\": 47493,\n\t\"./ta.js\": 47493,\n\t\"./te\": 57705,\n\t\"./te.js\": 57705,\n\t\"./tet\": 94457,\n\t\"./tet.js\": 94457,\n\t\"./tg\": 22727,\n\t\"./tg.js\": 22727,\n\t\"./th\": 32206,\n\t\"./th.js\": 32206,\n\t\"./tk\": 33419,\n\t\"./tk.js\": 33419,\n\t\"./tl-ph\": 77243,\n\t\"./tl-ph.js\": 77243,\n\t\"./tlh\": 60016,\n\t\"./tlh.js\": 60016,\n\t\"./tr\": 87020,\n\t\"./tr.js\": 87020,\n\t\"./tzl\": 8026,\n\t\"./tzl.js\": 8026,\n\t\"./tzm\": 78537,\n\t\"./tzm-latn\": 87899,\n\t\"./tzm-latn.js\": 87899,\n\t\"./tzm.js\": 78537,\n\t\"./ug-cn\": 40818,\n\t\"./ug-cn.js\": 40818,\n\t\"./uk\": 48478,\n\t\"./uk.js\": 48478,\n\t\"./ur\": 77893,\n\t\"./ur.js\": 77893,\n\t\"./uz\": 89133,\n\t\"./uz-latn\": 20311,\n\t\"./uz-latn.js\": 20311,\n\t\"./uz.js\": 89133,\n\t\"./vi\": 52179,\n\t\"./vi.js\": 52179,\n\t\"./x-pseudo\": 92455,\n\t\"./x-pseudo.js\": 92455,\n\t\"./yo\": 3310,\n\t\"./yo.js\": 3310,\n\t\"./zh-cn\": 27244,\n\t\"./zh-cn.js\": 27244,\n\t\"./zh-hk\": 40076,\n\t\"./zh-hk.js\": 40076,\n\t\"./zh-mo\": 62305,\n\t\"./zh-mo.js\": 62305,\n\t\"./zh-tw\": 88588,\n\t\"./zh-tw.js\": 88588\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 61738;","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CategorySorting = void 0;\nvar CategorySorting;\n(function (CategorySorting) {\n    CategorySorting[\"Alphabetical\"] = \"alpha\";\n    CategorySorting[\"Default\"] = \"\";\n    CategorySorting[\"Recency\"] = \"recent\";\n    CategorySorting[\"Manual\"] = \"manual\";\n})(CategorySorting || (exports.CategorySorting = CategorySorting = {}));\n","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CursorPaginationDirection = exports.ReportDuration = exports.ReportSortDirection = exports.UserReportSortColumns = void 0;\nvar UserReportSortColumns;\n(function (UserReportSortColumns) {\n    UserReportSortColumns[\"username\"] = \"Username\";\n    UserReportSortColumns[\"email\"] = \"Email\";\n    UserReportSortColumns[\"createAt\"] = \"CreateAt\";\n    UserReportSortColumns[\"firstName\"] = \"FirstName\";\n    UserReportSortColumns[\"lastName\"] = \"LastName\";\n    UserReportSortColumns[\"nickname\"] = \"Nickname\";\n})(UserReportSortColumns || (exports.UserReportSortColumns = UserReportSortColumns = {}));\nvar ReportSortDirection;\n(function (ReportSortDirection) {\n    ReportSortDirection[\"ascending\"] = \"asc\";\n    ReportSortDirection[\"descending\"] = \"desc\";\n})(ReportSortDirection || (exports.ReportSortDirection = ReportSortDirection = {}));\nvar ReportDuration;\n(function (ReportDuration) {\n    ReportDuration[\"AllTime\"] = \"all_time\";\n    ReportDuration[\"Last30Days\"] = \"last_30_days\";\n    ReportDuration[\"PreviousMonth\"] = \"previous_month\";\n    ReportDuration[\"Last6Months\"] = \"last_6_months\";\n})(ReportDuration || (exports.ReportDuration = ReportDuration = {}));\nvar CursorPaginationDirection;\n(function (CursorPaginationDirection) {\n    CursorPaginationDirection[\"prev\"] = \"prev\";\n    CursorPaginationDirection[\"next\"] = \"next\";\n})(CursorPaginationDirection || (exports.CursorPaginationDirection = CursorPaginationDirection = {}));\n","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CustomStatusDuration = void 0;\nvar CustomStatusDuration;\n(function (CustomStatusDuration) {\n    CustomStatusDuration[\"DONT_CLEAR\"] = \"\";\n    CustomStatusDuration[\"THIRTY_MINUTES\"] = \"thirty_minutes\";\n    CustomStatusDuration[\"ONE_HOUR\"] = \"one_hour\";\n    CustomStatusDuration[\"FOUR_HOURS\"] = \"four_hours\";\n    CustomStatusDuration[\"TODAY\"] = \"today\";\n    CustomStatusDuration[\"THIS_WEEK\"] = \"this_week\";\n    CustomStatusDuration[\"DATE_AND_TIME\"] = \"date_and_time\";\n    CustomStatusDuration[\"CUSTOM_DATE_TIME\"] = \"custom_date_time\";\n})(CustomStatusDuration || (exports.CustomStatusDuration = CustomStatusDuration = {}));\n","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.idMappedObjectsFromArr = exports.collectionRemoveItem = exports.collectionAddItem = exports.collectionReplaceItem = exports.collectionToArray = exports.collectionFromArray = void 0;\nexports.isArrayOf = isArrayOf;\nexports.isStringArray = isStringArray;\nexports.isRecordOf = isRecordOf;\nfunction isArrayOf(v, check) {\n    if (!Array.isArray(v)) {\n        return false;\n    }\n    return v.every(check);\n}\nfunction isStringArray(v) {\n    return isArrayOf(v, (e) => typeof e === 'string');\n}\nfunction isRecordOf(v, check) {\n    if (typeof v !== 'object' || !v) {\n        return false;\n    }\n    if (!(Object.keys(v).every((k) => typeof k === 'string'))) {\n        return false;\n    }\n    if (!(Object.values(v).every(check))) {\n        return false;\n    }\n    return true;\n}\nconst collectionFromArray = (arr = []) => {\n    return arr.reduce((current, item) => {\n        current.data = Object.assign(Object.assign({}, current.data), { [item.id]: item });\n        current.order.push(item.id);\n        return current;\n    }, { data: {}, order: [] });\n};\nexports.collectionFromArray = collectionFromArray;\nconst collectionToArray = ({ data, order }) => {\n    return order.map((id) => data[id]);\n};\nexports.collectionToArray = collectionToArray;\nconst collectionReplaceItem = (collection, ...items) => {\n    return Object.assign(Object.assign({}, collection), { data: (0, exports.idMappedObjectsFromArr)(items, collection.data) });\n};\nexports.collectionReplaceItem = collectionReplaceItem;\nconst collectionAddItem = (collection, ...items) => {\n    return Object.assign(Object.assign({}, (0, exports.collectionReplaceItem)(collection, ...items)), { order: [...collection.order, ...items.map(({ id }) => id)] });\n};\nexports.collectionAddItem = collectionAddItem;\nconst collectionRemoveItem = (collection, item) => {\n    const data = Object.assign({}, collection.data);\n    Reflect.deleteProperty(data, item.id);\n    const order = collection.order.filter((id) => id !== item.id);\n    return Object.assign(Object.assign({}, collection), { data, order });\n};\nexports.collectionRemoveItem = collectionRemoveItem;\nconst idMappedObjectsFromArr = (items, current) => {\n    return items.reduce((r, item) => (Object.assign(Object.assign({}, r), { [item.id]: item })), Object.assign({}, current));\n};\nexports.idMappedObjectsFromArr = idMappedObjectsFromArr;\n"],"names":["clearUserCookie","document","cookie","concat","window","basename","location","hostname","keyMirror","GET_USER_DRAFTS","CREATE_USER_DRAFT","DELETE_USER_DRAFT","UPDATE_USER_DRAFT","UPSERT_USER_DRAFT","GET_DRAFTS_FAILURE","UPSERT_DRAFT_FAILURE","DELETE_DRAFT_FAILURE","DISMISS_ERROR","LOG_ERROR","CLEAR_ERRORS","RESTORE_ERRORS","PLAYBOOKS_PUBLISH_TEMPLATES","RECEIVED_MARKETPLACE_PLUGINS","GET_MARKETPLACE_PLUGINS_FAILURE","RECEIVED_CHANNEL_REMOTES","RECEIVED_REMOTE_CLUSTER_INFO","AppBindingLocations","POST_MENU_ITEM","CHANNEL_HEADER_ICON","APP_BAR","COMMAND","IN_POST","MARKETPLACE","AppCallResponseTypes","OK","ERROR","FORM","CALL","NAVIGATE","AppFieldTypes","TEXT","STATIC_SELECT","DYNAMIC_SELECT","BOOL","USER","CHANNEL","MARKDOWN","RADIO","CategoryTypes","FAVORITES","CHANNELS","DIRECT_MESSAGES","CUSTOM","NotificationLevel","DEFAULT","ALL","MENTION","NONE","MarkUnread","CONFIG_CHANGED","SERVER_VERSION_CHANGED","PAGE_SIZE_DEFAULT","PAGE_SIZE_MAXIMUM","LOGS_PAGE_SIZE_DEFAULT","AUDITS_CHUNK_SIZE","PROFILE_CHUNK_SIZE","CHANNELS_CHUNK_SIZE","TEAMS_CHUNK_SIZE","JOBS_CHUNK_SIZE","SEARCH_TIMEOUT_MILLISECONDS","AUTOCOMPLETE_SPLIT_CHARACTERS","OUT_OF_OFFICE","OFFLINE","AWAY","ONLINE","DND","PERMISSIONS_ALL","PERMISSIONS_CHANNEL_ADMIN","PERMISSIONS_TEAM_ADMIN","PERMISSIONS_SYSTEM_ADMIN","TEAM_GUEST_ROLE","TEAM_USER_ROLE","TEAM_ADMIN_ROLE","CHANNEL_GUEST_ROLE","CHANNEL_USER_ROLE","CHANNEL_ADMIN_ROLE","SYSTEM_GUEST_ROLE","SYSTEM_USER_ROLE","SYSTEM_ADMIN_ROLE","SYSTEM_USER_MANAGER_ROLE","SYSTEM_READ_ONLY_ADMIN_ROLE","SYSTEM_MANAGER_ROLE","SYSTEM_USER_ACCESS_TOKEN_ROLE","SYSTEM_POST_ALL_ROLE","SYSTEM_POST_ALL_PUBLIC_ROLE","PLAYBOOK_ADMIN_ROLE","PLAYBOOK_MEMBER_ROLE","RUN_ADMIN_ROLE","RUN_MEMBER_ROLE","ALLOW_EDIT_POST_ALWAYS","ALLOW_EDIT_POST_NEVER","ALLOW_EDIT_POST_TIME_LIMIT","DEFAULT_POST_EDIT_TIME_LIMIT","RESTRICT_DIRECT_MESSAGE_ANY","RESTRICT_DIRECT_MESSAGE_TEAM","SWITCH_TO_DEFAULT_CHANNEL","DEFAULT_CHANNEL","DM_CHANNEL","OPEN_CHANNEL","PRIVATE_CHANNEL","GM_CHANNEL","ARCHIVED_CHANNEL","PUSH_NOTIFY_APPLE_REACT_NATIVE","PUSH_NOTIFY_ANDROID_REACT_NATIVE","STORE_REHYDRATION_COMPLETE","TEAMMATE_NAME_DISPLAY","SHOW_USERNAME","SHOW_NICKNAME_FULLNAME","SHOW_FULLNAME","SPECIAL_MENTIONS","MAX_USERS_IN_GM","MIN_USERS_IN_GM","MAX_GROUP_CHANNELS_FOR_PROFILES","DEFAULT_LOCALE","DEFAULT_AUTOLINKED_URL_SCHEMES","DISABLED","DEFAULT_ON","DEFAULT_OFF","ALWAYS_ON","DEFAULT_GROUP","CUSTOM_GROUP_USER_ROLE","MAX_GET_ROLES_BY_NAMES","SKUEnterprise","SKUEnterpriseAdvanced","SORT_BY_NAME","PostTypes","CHANNEL_DELETED","CHANNEL_UNARCHIVED","DISPLAYNAME_CHANGE","CONVERT_CHANNEL","EPHEMERAL","EPHEMERAL_ADD_TO_CHANNEL","HEADER_CHANGE","PURPOSE_CHANGE","JOIN_LEAVE","JOIN_CHANNEL","GUEST_JOIN_CHANNEL","LEAVE_CHANNEL","JOIN_LEAVE_CHANNEL","ADD_REMOVE","ADD_TO_CHANNEL","ADD_GUEST_TO_CHANNEL","REMOVE_FROM_CHANNEL","JOIN_TEAM","LEAVE_TEAM","ADD_TO_TEAM","REMOVE_FROM_TEAM","COMBINED_USER_ACTIVITY","ME","ADD_BOT_TEAMS_CHANNELS","REMINDER","WRANGLER","GM_CONVERTED_TO_CHANNEL","POST_CHUNK_SIZE","POST_DELETED","SYSTEM_MESSAGE_PREFIX","SYSTEM_AUTO_RESPONDER","POST_TYPES","MESSAGE_TYPES","POST","COMMENT","MAX_PREV_MSGS","POST_COLLAPSE_TIMEOUT","IGNORE_POST_TYPES","USER_ACTIVITY_POST_TYPES","NOT_STARTED","STARTED","SUCCESS","FAILURE","CANCELLED","MEMBERS","GUESTS","ADMINS","TOTAL_USERS","TOTAL_INACTIVE_USERS","TOTAL_PUBLIC_CHANNELS","TOTAL_PRIVATE_GROUPS","TOTAL_POSTS","TOTAL_TEAMS","TOTAL_IHOOKS","TOTAL_OHOOKS","TOTAL_COMMANDS","TOTAL_SESSIONS","POST_PER_DAY","BOT_POST_PER_DAY","USERS_WITH_POSTS_PER_DAY","RECENTLY_ACTIVE_USERS","NEWLY_CREATED_USERS","TOTAL_WEBSOCKET_CONNECTIONS","TOTAL_MASTER_DB_CONNECTIONS","TOTAL_READ_DB_CONNECTIONS","DAILY_ACTIVE_USERS","MONTHLY_ACTIVE_USERS","REGISTERED_USERS","TOTAL_FILE_COUNT","TOTAL_FILE_SIZE","TEAM_TYPE_OPEN","TEAM_TYPE_INVITE","SORT_USERNAME_OPTION","POSTED","POST_EDITED","POST_UNREAD","CHANNEL_CONVERTED","CHANNEL_CREATED","CHANNEL_UPDATED","MULTIPLE_CHANNELS_VIEWED","CHANNEL_MEMBER_UPDATED","CHANNEL_SCHEME_UPDATED","DIRECT_ADDED","ADDED_TO_TEAM","UPDATE_TEAM","USER_ADDED","USER_REMOVED","USER_UPDATED","USER_ROLE_UPDATED","ROLE_ADDED","ROLE_REMOVED","ROLE_UPDATED","TYPING","STOP_TYPING","PREFERENCE_CHANGED","PREFERENCES_CHANGED","PREFERENCES_DELETED","EPHEMERAL_MESSAGE","STATUS_CHANGED","HELLO","WEBRTC","REACTION_ADDED","REACTION_REMOVED","EMOJI_ADDED","LICENSE_CHANGED","PLUGIN_STATUSES_CHANGED","OPEN_DIALOG","INCREASE_POST_VISIBILITY_BY_ONE","RECEIVED_GROUP","RECEIVED_GROUP_ASSOCIATED_TO_TEAM","RECEIVED_GROUP_NOT_ASSOCIATED_TO_TEAM","RECEIVED_GROUP_ASSOCIATED_TO_CHANNEL","RECEIVED_GROUP_NOT_ASSOCIATED_TO_CHANNEL","THREAD_UPDATED","THREAD_FOLLOW_CHANGED","THREAD_READ_CHANGED","FIRST_ADMIN_VISIT_MARKETPLACE_STATUS_RECEIVED","GROUP_MEMBER_DELETED","values","INVITE_USER","ADD_USER_TO_TEAM","MANAGE_SLASH_COMMANDS","MANAGE_OTHERS_SLASH_COMMANDS","CREATE_PUBLIC_CHANNEL","CREATE_PRIVATE_CHANNEL","MANAGE_PUBLIC_CHANNEL_MEMBERS","MANAGE_PRIVATE_CHANNEL_MEMBERS","READ_PUBLIC_CHANNEL_GROUPS","READ_PRIVATE_CHANNEL_GROUPS","ASSIGN_SYSTEM_ADMIN_ROLE","MANAGE_ROLES","MANAGE_TEAM_ROLES","MANAGE_CHANNEL_ROLES","MANAGE_SYSTEM","CREATE_DIRECT_CHANNEL","CREATE_GROUP_CHANNEL","MANAGE_PUBLIC_CHANNEL_PROPERTIES","MANAGE_PRIVATE_CHANNEL_PROPERTIES","LIST_PUBLIC_TEAMS","JOIN_PUBLIC_TEAMS","LIST_PRIVATE_TEAMS","JOIN_PRIVATE_TEAMS","LIST_TEAM_CHANNELS","JOIN_PUBLIC_CHANNELS","DELETE_PUBLIC_CHANNEL","CONVERT_PUBLIC_CHANNEL_TO_PRIVATE","CONVERT_PRIVATE_CHANNEL_TO_PUBLIC","MANAGE_PUBLIC_CHANNEL_BANNER","MANAGE_PRIVATE_CHANNEL_BANNER","MANAGE_CHANNEL_ACCESS_RULES","DELETE_PRIVATE_CHANNEL","EDIT_OTHER_USERS","READ_CHANNEL","READ_CHANNEL_CONTENT","READ_PUBLIC_CHANNEL","ADD_REACTION","REMOVE_REACTION","REMOVE_OTHERS_REACTIONS","PERMANENT_DELETE_USER","UPLOAD_FILE","GET_PUBLIC_LINK","MANAGE_WEBHOOKS","MANAGE_OTHERS_WEBHOOKS","MANAGE_INCOMING_WEBHOOKS","MANAGE_OTHERS_INCOMING_WEBHOOKS","MANAGE_OUTGOING_WEBHOOKS","MANAGE_OTHERS_OUTGOING_WEBHOOKS","MANAGE_OAUTH","MANAGE_OUTGOING_OAUTH_CONNECTIONS","MANAGE_SYSTEM_WIDE_OAUTH","CREATE_POST","CREATE_POST_PUBLIC","EDIT_POST","EDIT_OTHERS_POSTS","DELETE_POST","DELETE_OTHERS_POSTS","REMOVE_USER_FROM_TEAM","CREATE_TEAM","MANAGE_TEAM","IMPORT_TEAM","VIEW_TEAM","LIST_USERS_WITHOUT_TEAM","CREATE_USER_ACCESS_TOKEN","READ_USER_ACCESS_TOKEN","REVOKE_USER_ACCESS_TOKEN","MANAGE_JOBS","MANAGE_EMOJIS","MANAGE_OTHERS_EMOJIS","CREATE_EMOJIS","DELETE_EMOJIS","DELETE_OTHERS_EMOJIS","VIEW_MEMBERS","INVITE_GUEST","PROMOTE_GUEST","DEMOTE_TO_GUEST","USE_CHANNEL_MENTIONS","USE_GROUP_MENTIONS","READ_OTHER_USERS_TEAMS","EDIT_BRAND","READ_JOBS","DOWNLOAD_COMPLIANCE_EXPORT_RESULT","CREATE_LDAP_SYNC_JOB","READ_LDAP_SYNC_JOB","TEST_LDAP","GET_SAML_METADATA_FROM_IDP","ADD_SAML_PUBLIC_CERT","ADD_SAML_PRIVATE_CERT","ADD_SAML_IDP_CERT","REMOVE_SAML_PUBLIC_CERT","REMOVE_SAML_PRIVATE_CERT","REMOVE_SAML_IDP_CERT","GET_SAML_CERT_STATUS","ADD_LDAP_PUBLIC_CERT","ADD_LDAP_PRIVATE_CERT","REMOVE_LDAP_PUBLIC_CERT","REMOVE_LDAP_PRIVATE_CERT","INVALIDATE_EMAIL_INVITE","TEST_SITE_URL","TEST_ELASTICSEARCH","TEST_S3","TEST_EMAIL","RELOAD_CONFIG","INVALIDATE_CACHES","PURGE_ELASTICSEARCH_INDEXES","RECYCLE_DATABASE_CONNECTIONS","CREATE_ELASTICSEARCH_POST_INDEXING_JOB","CREATE_ELASTICSEARCH_POST_AGGREGATION_JOB","READ_ELASTICSEARCH_POST_INDEXING_JOB","READ_ELASTICSEARCH_POST_AGGREGATION_JOB","USE_SLASH_COMMANDS","SYSCONSOLE_READ_ABOUT_EDITION_AND_LICENSE","SYSCONSOLE_WRITE_ABOUT_EDITION_AND_LICENSE","SYSCONSOLE_READ_BILLING","SYSCONSOLE_WRITE_BILLING","SYSCONSOLE_READ_REPORTING_SITE_STATISTICS","SYSCONSOLE_WRITE_REPORTING_SITE_STATISTICS","SYSCONSOLE_READ_REPORTING_TEAM_STATISTICS","SYSCONSOLE_WRITE_REPORTING_TEAM_STATISTICS","SYSCONSOLE_READ_REPORTING_SERVER_LOGS","SYSCONSOLE_WRITE_REPORTING_SERVER_LOGS","SYSCONSOLE_READ_USERMANAGEMENT_USERS","SYSCONSOLE_WRITE_USERMANAGEMENT_USERS","SYSCONSOLE_READ_USERMANAGEMENT_GROUPS","SYSCONSOLE_WRITE_USERMANAGEMENT_GROUPS","SYSCONSOLE_READ_USERMANAGEMENT_TEAMS","SYSCONSOLE_WRITE_USERMANAGEMENT_TEAMS","SYSCONSOLE_READ_USERMANAGEMENT_CHANNELS","SYSCONSOLE_WRITE_USERMANAGEMENT_CHANNELS","SYSCONSOLE_READ_USERMANAGEMENT_PERMISSIONS","SYSCONSOLE_WRITE_USERMANAGEMENT_PERMISSIONS","SYSCONSOLE_READ_USERMANAGEMENT_SYSTEM_ROLES","SYSCONSOLE_WRITE_USERMANAGEMENT_SYSTEM_ROLES","SYSCONSOLE_READ_SITE_CUSTOMIZATION","SYSCONSOLE_WRITE_SITE_CUSTOMIZATION","SYSCONSOLE_READ_SITE_LOCALIZATION","SYSCONSOLE_WRITE_SITE_LOCALIZATION","SYSCONSOLE_READ_SITE_USERS_AND_TEAMS","SYSCONSOLE_WRITE_SITE_USERS_AND_TEAMS","SYSCONSOLE_READ_SITE_NOTIFICATIONS","SYSCONSOLE_WRITE_SITE_NOTIFICATIONS","SYSCONSOLE_READ_SITE_ANNOUNCEMENT_BANNER","SYSCONSOLE_WRITE_SITE_ANNOUNCEMENT_BANNER","SYSCONSOLE_READ_SITE_EMOJI","SYSCONSOLE_WRITE_SITE_EMOJI","SYSCONSOLE_READ_SITE_POSTS","SYSCONSOLE_WRITE_SITE_POSTS","SYSCONSOLE_READ_SITE_FILE_SHARING_AND_DOWNLOADS","SYSCONSOLE_WRITE_SITE_FILE_SHARING_AND_DOWNLOADS","SYSCONSOLE_READ_SITE_PUBLIC_LINKS","SYSCONSOLE_WRITE_SITE_PUBLIC_LINKS","SYSCONSOLE_READ_SITE_NOTICES","SYSCONSOLE_WRITE_SITE_NOTICES","SYSCONSOLE_READ_SITE_IP_FILTERS","SYSCONSOLE_WRITE_SITE_IP_FILTERS","SYSCONSOLE_READ_ENVIRONMENT_WEB_SERVER","SYSCONSOLE_WRITE_ENVIRONMENT_WEB_SERVER","SYSCONSOLE_READ_ENVIRONMENT_DATABASE","SYSCONSOLE_WRITE_ENVIRONMENT_DATABASE","SYSCONSOLE_READ_ENVIRONMENT_ELASTICSEARCH","SYSCONSOLE_WRITE_ENVIRONMENT_ELASTICSEARCH","SYSCONSOLE_READ_ENVIRONMENT_FILE_STORAGE","SYSCONSOLE_WRITE_ENVIRONMENT_FILE_STORAGE","SYSCONSOLE_READ_ENVIRONMENT_IMAGE_PROXY","SYSCONSOLE_WRITE_ENVIRONMENT_IMAGE_PROXY","SYSCONSOLE_READ_ENVIRONMENT_SMTP","SYSCONSOLE_WRITE_ENVIRONMENT_SMTP","SYSCONSOLE_READ_ENVIRONMENT_PUSH_NOTIFICATION_SERVER","SYSCONSOLE_WRITE_ENVIRONMENT_PUSH_NOTIFICATION_SERVER","SYSCONSOLE_READ_ENVIRONMENT_HIGH_AVAILABILITY","SYSCONSOLE_WRITE_ENVIRONMENT_HIGH_AVAILABILITY","SYSCONSOLE_READ_ENVIRONMENT_RATE_LIMITING","SYSCONSOLE_WRITE_ENVIRONMENT_RATE_LIMITING","SYSCONSOLE_READ_ENVIRONMENT_LOGGING","SYSCONSOLE_WRITE_ENVIRONMENT_LOGGING","SYSCONSOLE_READ_ENVIRONMENT_SESSION_LENGTHS","SYSCONSOLE_WRITE_ENVIRONMENT_SESSION_LENGTHS","SYSCONSOLE_READ_ENVIRONMENT_PERFORMANCE_MONITORING","SYSCONSOLE_WRITE_ENVIRONMENT_PERFORMANCE_MONITORING","SYSCONSOLE_READ_ENVIRONMENT_DEVELOPER","SYSCONSOLE_WRITE_ENVIRONMENT_DEVELOPER","SYSCONSOLE_READ_ENVIRONMENT_MOBILE_SECURITY","SYSCONSOLE_WRITE_ENVIRONMENT_MOBILE_SECURITY","SYSCONSOLE_READ_AUTHENTICATION_SIGNUP","SYSCONSOLE_WRITE_AUTHENTICATION_SIGNUP","SYSCONSOLE_READ_AUTHENTICATION_EMAIL","SYSCONSOLE_WRITE_AUTHENTICATION_EMAIL","SYSCONSOLE_READ_AUTHENTICATION_PASSWORD","SYSCONSOLE_WRITE_AUTHENTICATION_PASSWORD","SYSCONSOLE_READ_AUTHENTICATION_MFA","SYSCONSOLE_WRITE_AUTHENTICATION_MFA","SYSCONSOLE_READ_AUTHENTICATION_LDAP","SYSCONSOLE_WRITE_AUTHENTICATION_LDAP","SYSCONSOLE_READ_AUTHENTICATION_SAML","SYSCONSOLE_WRITE_AUTHENTICATION_SAML","SYSCONSOLE_READ_AUTHENTICATION_OPENID","SYSCONSOLE_WRITE_AUTHENTICATION_OPENID","SYSCONSOLE_READ_AUTHENTICATION_GUEST_ACCESS","SYSCONSOLE_WRITE_AUTHENTICATION_GUEST_ACCESS","SYSCONSOLE_READ_PLUGINS","SYSCONSOLE_WRITE_PLUGINS","SYSCONSOLE_READ_INTEGRATIONS_INTEGRATION_MANAGEMENT","SYSCONSOLE_WRITE_INTEGRATIONS_INTEGRATION_MANAGEMENT","SYSCONSOLE_READ_INTEGRATIONS_BOT_ACCOUNTS","SYSCONSOLE_WRITE_INTEGRATIONS_BOT_ACCOUNTS","SYSCONSOLE_READ_INTEGRATIONS_GIF","SYSCONSOLE_WRITE_INTEGRATIONS_GIF","SYSCONSOLE_READ_INTEGRATIONS_CORS","SYSCONSOLE_WRITE_INTEGRATIONS_CORS","SYSCONSOLE_READ_COMPLIANCE_DATA_RETENTION_POLICY","SYSCONSOLE_WRITE_COMPLIANCE_DATA_RETENTION_POLICY","SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_EXPORT","SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_EXPORT","SYSCONSOLE_READ_COMPLIANCE_COMPLIANCE_MONITORING","SYSCONSOLE_WRITE_COMPLIANCE_COMPLIANCE_MONITORING","SYSCONSOLE_READ_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE","SYSCONSOLE_WRITE_COMPLIANCE_CUSTOM_TERMS_OF_SERVICE","SYSCONSOLE_READ_EXPERIMENTAL_FEATURES","SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURES","SYSCONSOLE_READ_EXPERIMENTAL_FEATURE_FLAGS","SYSCONSOLE_WRITE_EXPERIMENTAL_FEATURE_FLAGS","SYSCONSOLE_READ_EXPERIMENTAL_BLEVE","SYSCONSOLE_WRITE_EXPERIMENTAL_BLEVE","SYSCONSOLE_READ_PRODUCTS_BOARDS","SYSCONSOLE_WRITE_PRODUCTS_BOARDS","PLAYBOOK_PUBLIC_CREATE","PLAYBOOK_PUBLIC_MANAGE_PROPERTIES","PLAYBOOK_PUBLIC_MANAGE_MEMBERS","PLAYBOOK_PUBLIC_VIEW","PLAYBOOK_PUBLIC_MAKE_PRIVATE","PLAYBOOK_PRIVATE_CREATE","PLAYBOOK_PRIVATE_MANAGE_PROPERTIES","PLAYBOOK_PRIVATE_MANAGE_MEMBERS","PLAYBOOK_PRIVATE_VIEW","PLAYBOOK_PRIVATE_MAKE_PUBLIC","RUN_CREATE","RUN_MANAGE_PROPERTIES","RUN_MANAGE_MEMBERS","RUN_VIEW","CHANNEL_MODERATED_PERMISSIONS","CREATE_REACTIONS","MANAGE_MEMBERS","MANAGE_BOOKMARKS","MANAGE_BOTS","MANAGE_OTHERS_BOTS","SYSCONSOLE_READ_PERMISSIONS","SYSCONSOLE_WRITE_PERMISSIONS","MANAGE_SHARED_CHANNELS","MANAGE_SECURE_CONNECTIONS","CREATE_CUSTOM_GROUP","MANAGE_CUSTOM_GROUP_MEMBERS","EDIT_CUSTOM_GROUP","DELETE_CUSTOM_GROUP","RESTORE_CUSTOM_GROUP","ADD_BOOKMARK_PUBLIC_CHANNEL","EDIT_BOOKMARK_PUBLIC_CHANNEL","DELETE_BOOKMARK_PUBLIC_CHANNEL","ORDER_BOOKMARK_PUBLIC_CHANNEL","ADD_BOOKMARK_PRIVATE_CHANNEL","EDIT_BOOKMARK_PRIVATE_CHANNEL","DELETE_BOOKMARK_PRIVATE_CHANNEL","ORDER_BOOKMARK_PRIVATE_CHANNEL","PLUGIN_STATE_NOT_RUNNING","PLUGIN_STATE_STARTING","PLUGIN_STATE_RUNNING","PLUGIN_STATE_FAILED_TO_START","PLUGIN_STATE_FAILED_TO_STAY_RUNNING","PLUGIN_STATE_STOPPING","THREADS_CHUNK_SIZE","THREADS_PAGE_SIZE","defaultEqualityCheck","a","b","defaultMemoize","func","equalityCheck","arguments","length","undefined","lastArgs","lastResult","prev","next","i","areArgumentsShallowlyEqual","apply","createSelectorCreator","memoize","_len","memoizeOptions","Array","_key","name","_len2","funcs","_key2","resultFunc","pop","dependencies","isArray","every","dep","dependencyTypes","map","join","Error","getDependencies","memoizedResultFunc","selector","params","push","createSelector","getAccessControlSettings","state","adminConfig","entities","admin","config","AccessControlSettings","getConfig","EnableAttributeBasedAccessControl","EnableChannelScopeAccessControl","EnableUserManagedAttributes","getAccessControlPolicy","id","accessControlPolicies","getChannelIdsForAccessControlPolicy","parentId","channelsForAccessControlPolicy","channelIds","makeGetChannelsInAccessControlPolicy","channels","props","policyId","teams","ids","policyChannels","forEach","channelId","channel","team","team_id","_objectSpread","team_display_name","display_name","team_name","team_update_at","update_at","searchChannelsInheritsPolicy","term","filters","channelArray","channelsInPolicy","filterChannelList","filterChannelsMatchingTerm","getPlainLogs","plainLogs","getAllLogs","logs","Object","reduce","acc","log","getAudits","audits","getLdapGroups","ldapGroups","getLdapGroupsCount","ldapGroupsCount","getEnvironmentConfig","environmentConfig","getComplianceReports","complianceReports","getDataRetentionCustomPolicies","dataRetentionCustomPolicies","getDataRetentionCustomPoliciesCount","dataRetentionCustomPoliciesCount","getDataRetentionCustomPolicy","getPluginStatus","_getPluginStatuses","pluginStatuses","getPluginStatuses","getAllCategoriesByIds","channelCategories","byId","getCategory","categoryId","getCategoryInTeamByType","teamId","categoryType","getCategoryWhere","category","type","getCategoryInTeamWithChannel","channel_ids","includes","condition","categoriesByIds","find","getCategoryIdsForTeam","orderByTeam","makeGetCategoriesForTeam","categoryIds","categoriesById","makeCompareChannels","getDisplayName","locale","myMembers","aMuted","isChannelMuted","bMuted","localeCompare","numeric","makeGetChannelIdsForCategory","getChannels","makeGetChannelsForIds","filterAndSortChannelsForCategory","makeFilterAndSortChannelsForCategory","lastChannelIds","filteredChannelIds","shallowEquals","filterArchivedChannels","getCurrentChannelId","currentChannelId","filtered","filter","delete_at","filterAutoclosedDMs","users","profiles","getCurrentUserId","getMyChannelMemberships","getChannelMessageCounts","getVisibleDmGmLimit","getMyPreferences","isCollapsedThreadsEnabled","currentUserId","messageCounts","limitPref","myPreferences","collapsedThreads","getTimestampFromPrefs","pref","getPreferenceKey","parseInt","value","getLastViewedAt","_myMembers$channel$id","Math","max","last_viewed_at","Preferences","CATEGORY_CHANNEL_APPROXIMATE_VIEW_TIME","CATEGORY_CHANNEL_OPEN_TIME","unreadCount","visibleChannels","isUnreadChannel","General","teammateId","getUserIdFromChannelName","teammate","lastViewedAt","sort","channelA","channelB","channelAlastViewed","channelBlastViewed","remaining","slice","visibleChannelsSet","Set","filteredChannels","has","filterManuallyClosedDMs","preference","CATEGORY_DIRECT_CHANNEL_SHOW","CATEGORY_GROUP_CHANNEL_SHOW","sortChannels","sortChannelsByName","getCurrentUserLocale","sortChannelsByNameWithDMs","getTeammateNameDisplaySetting","teammateNameDisplay","cachedNames","displayName","displayUsername","usernames","split","userDisplayNames","username","user","profile","sortChannelsByRecency","_state","crtEnabled","aLastPostAt","last_root_post_at","last_post_at","create_at","originalChannels","sorting","CategorySorting","Recency","Alphabetical","Default","some","makeSortChannels","makeGetChannelsByCategory","getCategoriesForTeam","filterAndSortChannels","lastCategoryIds","lastChannelsByCategory","categories","channelsByCategory","allEquals","members","calculateUnreadCount","showUnread","getCurrentChannelIdInternal","getMyChannelMembershipsInternal","getMyCurrentChannelMembership","getMyCurrentChannelMembershipInternal","getAllChannels","getAllDmChannels","allChannels","allDmChannels","getAllChannelStats","stats","getChannelsMemberCount","channelsMemberCount","getChannelsInTeam","channelsInTeam","getChannelsInPolicy","policy","entries","channelEntry","policy_id","getDirectChannelsSet","getChannelMembersInChannels","membersInChannel","getChannelMember","userId","_getChannelMembersInC","makeGetChannel","profilesInChannel","getChannel","isDirectChannel","getStatusForUserId","teammateStatus","newCompleteDirectChannelInfo","getDirectChannel","completeDirectChannelInfo","getMyChannelMembership","getCurrentChannel","getChannelNameForSearch","dmChannelWithInfo","DISPLAY_PREFER_USERNAME","gmChannelWithInfo","completeDirectGroupInfo","replace","getCurrentChannelNameForSearchShortcut","getChannelNameForSearchShortcut","getMyChannelMember","channelMemberships","getCurrentChannelStats","allChannelStats","isCurrentChannelFavorite","isFavoriteChannel","isCurrentChannelMuted","membership","isCurrentChannelArchived","isCurrentChannelDefault","isDefault","getChannelMessageCount","countCurrentChannelUnreadMessages","messageCount","root","msg_count_root","total","msg_count","makeGetChannelUnreadCount","member","getChannelByName","channelName","getChannelByNameHelper","getChannelByTeamIdAndChannelName","getChannelSetInCurrentTeam","getCurrentTeamId","currentTeamId","getChannelSetForAllTeams","channelSet","sortAndInjectChannels","currentChannels","c","sortChannelsByDisplayName","bind","getChannelsInCurrentTeam","getCurrentUser","currentTeamChannelSet","currentUser","getChannelsInAllTeams","getChannelsNameMapInTeam","channelsInTeams","channelMap","getChannelsNameMapInCurrentTeam","getChannelNameToDisplayNameMap","createIdsSelector","getAllDirectChannels","dmChannels","getAllDirectChannelsNameMapInCurrentTeam","getGroupChannels","gmChannels","getMyChannels","directChannels","hasOwn","getOtherChannels","archived","getMembersInCurrentChannel","basicUnreadMeta","unreadStatus","isUnread","Boolean","unreadMentionCount","getUnreadStatus","getUsers","getThreadCounts","getThreadCountsIncludingDirect","threadCounts","threadCountsIncludingDirect","messages","unreadMessages","mentions","unreadMentions","counts","_ref","_users$getUserIdFromC","mention_count_root","mention_count","totalUnreadMessages","totalUnreadMentions","anyUnreadThreads","keys","currentTeamDirectCounts","total_unread_threads","total_unread_mentions","getTeamsUnreadStatuses","channelMessageCounts","collapsedThreadsEnabled","teamThreadCounts","teamUnreadsSet","teamMentionsMap","Map","teamHasUrgentMap","channelMembership","unreadCountObjectForChannel","add","previousMentionsInTeam","get","set","hasUrgent","threadCountsObjectForTeam","total_unread_urgent_mentions","getUnreadStatusInCurrentTeam","isPostPriorityEnabled","postPriorityEnabled","currentTeamUnreadMessages","currentTeamUnreadMentions","_users$getUserIdFromC2","m","urgentMentions","urgent_mention_count","canManageChannelMembers","haveICurrentChannelPermission","Permissions","managePrivateMembers","managePublicMembers","canManageAnyChannelMembersInCurrentTeam","myChannelMemberships","myChannelsIds","haveIChannelPermission","getAllDirectChannelIds","directIds","from","getChannelIdsInCurrentTeam","getChannelIdsForCurrentTeam","direct","getChannelIdsInAllTeams","getChannelIdsForAllTeams","getUnreadChannelIds","teamChannelIds","lastUnreadChannel","unreadIds","getAllTeamsUnreadChannelIds","allTeamsChannelIds","getUnreadChannels","getUserIdsInChannels","userIdsInChannels","settings","completeDirectChannelDisplayName","getUnsortedAllTeamsUnreadChannels","allTeamsUnreadChannelIds","sortUnreadChannels","isMuted","hasMentions","hadMentions","getSortedAllTeamsUnreadChannels","getDirectAndGroupChannels","key","getChannelsWithUserProfiles","channelUserMap","getProfiles","usersIdsInChannel","getDefaultChannelForTeams","result","getMyFirstChannelForTeams","getMyTeams","myTeams","teamChannels","getRedirectChannelNameForCurrentTeam","getRedirectChannelNameForTeam","defaultChannelForTeam","canIJoinPublicChannelsInTeam","haveITeamPermission","myFirstChannelForTeam","isManuallyUnread","manuallyUnread","getChannelModerations","channelModerations","EMPTY_OBJECT","getChannelMemberCountsByGroup","channelMemberCountsByGroup","channelList","private","public","deleted","team_ids","channelType","teamResult","filterResult","searchChannelsInPolicy","getDirectTeammate","userIds","indexOf","getUser","makeGetGmChannelMemberCount","memberIds","membersCount","groupMemberIds","size","getMyActiveChannelIds","flatMap","chan","getRecentProfilesFromDMs","memberships","recentChannelIds","aMembership","bMembership","channel_id","groupChannels","userProfilesByChannel","otherUserId","userProfile","memberProfiles","trim","sortedUserProfiles","cid","isDeactivatedDirectChannel","getChannelBanner","banner_info","getMembersInChannel","_state$entities$chann","_state$entities$chann2","getMembersInTeam","_state$entities$teams","_state$entities$teams2","membersInTeam","getIsUserStatusesConfigEnabled","general","EnableUserStatuses","contentFlaggingFeatureEnabled","featureFlagEnabled","getFeatureFlagValue","featureEnabled","ContentFlaggingEnabled","contentFlaggingConfig","contentFlagging","_getConfig","getPasswordConfig","minimumLength","PasswordMinimumLength","requireLowercase","PasswordRequireLowercase","requireUppercase","PasswordRequireUppercase","requireNumber","PasswordRequireNumber","requireSymbol","PasswordRequireSymbol","getLicense","license","isCloudLicense","Cloud","isCompatibleWithJoinViewTeamPermissions","version","serverVersion","isMinimumServerVersion","match","EnableFileAttachments","IsLicensed","Compliance","EnableMobileFileUpload","EnableMobileFileDownload","getAutolinkedUrlSchemes","CustomUrlSchemes","getManagedResourcePaths","ManagedResourcePaths","path","getServerVersion","getFirstAdminVisitMarketplaceStatus","firstAdminVisitMarketplaceStatus","getFirstAdminSetupComplete","firstAdminCompleteSetup","isPerformanceDebuggingEnabled","EnableClientPerformanceDebugging","isMarketplaceEnabled","PluginsEnabled","EnableMarketplace","getUsersStatusAndProfileFetchingPollInterval","usersStatusAndProfileFetchingPollInterval","UsersStatusAndProfileFetchingPollIntervalMilliseconds","testingEnabled","EnableTesting","getCustomProfileAttributes","customProfileAttributes","fields","_a$attrs$sort_order","_a$attrs","_b$attrs$sort_order","_b$attrs","attrs","sort_order","getIsCrossTeamSearchEnabled","EnableCrossTeamSearch","getCWSAvailability","cwsAvailability","defaultLocale","getAllPosts","posts","getPost","postId","isPostFlagged","getBool","CATEGORY_FLAGGED_POST","getPostRepliesCount","postsReplies","getPostsInThread","postsInThread","getPostsInThreadOrdered","rootId","postIds","allPosts","v","comparePosts","getReactionsForPosts","reactions","makeGetReactionsForPost","getHasReactions","_getReactionsForPosts","getOpenGraphMetadataForUrl","url","openGraphForPost","openGraph","makeGetPostIdsForThread","getPostsForThread","makeGetPostsForThread","post","makeGetPostsChunkAroundPost","postsInChannel","postsForChannel","postChunk","block","order","isPostInteractable","isPostEphemeral","isSystemMessage","isPostPendingOrFailed","Posts","getLatestInteractablePostId","postsIds","getPostIdsInChannel","getLatestPostToEdit","user_id","getPostsInCurrentChannel","shouldShowJoinLeaveMessages","showJoinLeave","shouldFilterJoinLeavePost","postsForThread","rootPost","thread","makeGetProfilesForThread","getUserStatuses","allUsers","userStatuses","profileIds","status","makeGetCommentCountForPost","root_id","reply_count","count","getSearchResults","search","results","getSearchMatches","matches","makeGetPostsForIds","getMostRecentPostIdInChannel","postIdsInChannel","allowSystemMessages","p","startsWith","getRecentPostsChunkInChannel","recent","recentBlock","getUnreadPostsChunk","timeStamp","recentChunk","oldestPostsChunk","oldest","getOldestPostsChunkInChannel","postsEntity","recentPostInBlock","oldestPostInBlock","getPostsChunkInChannelAroundTime","isPostsChunkIncludingUnreadsPosts","chunk","isPostIdSending","pendingPostIds","sendingPostId","makeIsPostCommentMention","threadRepliedToByCurrentUser","isCommentMention","threadIds","pid","isPostCommentMention","getLimitedViews","limitedViews","PostPriority","isPostAcknowledgementsEnabled","PostAcknowledgements","getPersistentNotificationMaxRecipients","PersistentNotificationMaxRecipients","getPersistentNotificationIntervalMinutes","PersistentNotificationIntervalMinutes","getPostAcknowledgements","acknowledgements","isPersistentNotificationsEnabled","AllowPersistentNotifications","AllowPersistentNotificationsForGuests","forAll","forGuests","isGuest","roles","makeGetPostAcknowledgementsWithProfiles","acknowledgedAt","getTeamIdFromPost","preferences","getUserPreferences","userID","userPreferences","getPreferenceObject","defaultValue","getFromPreferences","String","getInt","makeGetCategory","selectorName","prefix","prefsInCategory","makeGetUserCategory","getDirectShowPreferences","CATEGORY_DISPLAY_SETTINGS","NAME_NAME_FORMAT","teammateNameDisplayPreference","useAdminTeammateNameDisplaySetting","LockTeammateNameDisplay","TeammateNameDisplay","getThemePreferences","CATEGORY_THEME","getThemePreference","themePreference","getDefaultTheme","DefaultTheme","THEMES","theme","denim","getTheme","createShallowSelector","defaultTheme","_themePreference$valu","themeValue","JSON","parse","setThemeDefaults","enableJoinLeaveMessage","EnableJoinLeaveMessageByDefault","CATEGORY_ADVANCED_SETTINGS","ADVANCED_FILTER_JOIN_LEAVE","shouldShowUnreadsCategory","CATEGORY_SIDEBAR_SETTINGS","SHOW_UNREAD_SECTION","ExperimentalGroupUnreadChannels","userPreference","oldUserPreference","serverDefault","unreads_at_top","getUnreadScrollPositionPreference","UNREAD_SCROLL_POSITION","UNREAD_SCROLL_POSITION_START_FROM_LEFT","getCollapsedThreadsPreference","configValue","CollapsedThreads","preferenceDefault","COLLAPSED_REPLY_THREADS_OFF","COLLAPSED_REPLY_THREADS_ON","COLLAPSED_REPLY_THREADS","isCollapsedThreadsAllowed","isAllowed","isCollapsedThreadsEnabledForUser","_getConfig2","getCollapsedThreadsPreferenceFromPreferences","isGroupChannelManuallyVisible","isCustomGroupsEnabled","EnableCustomGroups","getIsOnboardingFlowEnabled","EnableOnboardingFlow","syncedDraftsAreAllowed","AllowSyncedDrafts","syncedDraftsAreAllowedAndEnabled","isConfiguredForFeature","isConfiguredForUser","ADVANCED_SYNC_DRAFTS","LIMIT_VISIBLE_DMS_GMS","onboardingTourTipsEnabled","moveThreadsEnabled","streamlinedMarketplaceEnabled","getOverageBannerPreferences","CATEGORY_OVERAGE_USERS_BANNER","getPostHistoryLimitBannerPreferences","CATEGORY_POST_HISTORY_LIMIT_BANNER","getMySystemPermissions","getMySystemPermissionsInternal","getRoles","getRolesInternal","haveISystemPermission","haveISystemPermissionInternal","getGroupMemberships","groups","myGroups","myGroupIDs","currentUserID","groupMemberships","groupID","getMyGroupRoles","getGroupListPermissions","myGroupRoles","systemPermissions","allGroups","entry","allow_reference","permissions","group","roleNames","roleName","permission","groupPermissionsMap","g","can_delete","isSyncableSource","source","can_manage_members","can_restore","getMyTeamRoles","getTeamMemberships","teamsMemberships","getRolesById","rolesByName","rolesById","role","getMyPermissionsByTeam","myTeamRoles","allRoles","permissionsByTeam","getPermissionsForRoles","getMyPermissionsByGroup","permissionsByGroup","groupId","getMyPermissionsByChannel","myChannelRoles","permissionsByChannel","_getMyPermissionsByTe","haveIGroupPermission","permissionGroups","_getMyPermissionsByTe2","_getMyPermissionsByCh","haveICurrentTeamPermission","getMySystemRoles","mySystemRoles","options","roleSet","getTeamByName","getTeams","getTeamsInPolicy","allTeams","policyTeams","item","getTeamStats","getMembersInTeams","getTeamsList","getActiveTeamsList","getCurrentTeam","getTeam","getCurrentTeamMembership","teamMemberships","getCurrentTeamUrl","isTeamAdmin","SiteURL","currentTeam","siteURL","getCurrentRelativeTeamUrl","getRelativeTeamUrl","getCurrentTeamStats","teamStats","t","getMyTeamMember","getMembersInCurrentTeam","teamMembers","getTeamMember","_getMembersInTeams$te","getListableTeamIds","canListPublicTeams","canListPrivateTeams","compatibleWithJoinViewTeamPermissions","canList","allow_open_invite","getSortedListableTeams","listableTeamIds","listableTeams","sortTeamsWithLocale","getJoinableTeamIds","canJoinPublicTeams","canJoinPrivateTeams","canJoin","getMyTeamsCount","joinableTeamIds","joinableTeams","collapsed","mentionCount","badgeCount","isTeamSameWithCurrentTeam","teamName","targetTeam","searchTeamsInPolicy","filterTeamsStartingWithTerm","getTeamIdByChannelId","contentFlaggingEnabledInTeam","contentFlaggingStatus","getCurrentUserInternal","getCurrentUserIdInternal","getUsersInternal","getUserIdsNotInChannels","profilesNotInChannel","getUserIdsInTeams","profilesInTeam","getUserIdsNotInTeams","profilesNotInTeam","getUserIdsInGroups","profilesInGroup","statuses","getUserSessions","mySessions","getUserAudits","myAudits","getUsersByIDs","getUsersByUsername","usersByUsername","getUserByUsername","getUsersByEmail","usersByEmail","email","getUserByEmail","isCurrentUserSystemAdmin","isSystemAdmin","isCurrentUserGuestUser","currentUserHasAnAdminRole","includesAnAdminRole","getCurrentUserRoles","currentChannelMembership","currentTeamMembership","getCurrentUserMentionKeys","notify_props","mention_keys","first_name","caseSensitive","usernameKey","findIndex","getHighlightWithoutNotificationKeys","_user$notify_props","_user$notify_props$hi","highlightKeys","highlight_keys","getProfileSetInCurrentChannel","currentChannel","channelProfiles","getProfileSetNotInCurrentChannel","getProfileSetInCurrentTeam","teamProfiles","getProfileSetNotInCurrentTeam","PROFILE_SET_ALL","sortAndInjectProfiles","profileSet","injectProfiles","sortByUsername","currentProfiles","filterProfiles","filterRoles","team_roles","channel_roles","excludeRoles","exclude_roles","applyRolesFilters","exclude_bots","is_bot","inactive","active","exclude_remote","remote_id","getIsManualStatusForUserId","isManualStatus","getProfilesInCurrentChannel","currentChannelProfileSet","getActiveProfilesInCurrentChannelWithoutSorting","getProfilesNotInCurrentChannel","notInCurrentChannelProfileSet","getProfilesInCurrentTeam","currentTeamProfileSet","getProfilesInTeam","usersInTeams","getProfilesNotInTeam","usersNotInTeams","getProfilesNotInCurrentTeam","notInCurrentTeamProfileSet","getDndEndTimeForUserId","dndEndTimes","getTotalUsersStats","getFilteredUsersStats","filteredStats","filterFromProfiles","skipCurrent","filteredProfilesMap","profileListToMap","filteredProfiles","removeCurrentUserFromList","makeSearchProfilesStartingWithTerm","stateGlobalState","filterProfilesMatchingWithTerm","makeSearchProfilesMatchingWithTerm","makeSearchProfilesInChannel","doGetProfilesInChannel","makeGetProfilesInChannel","filterProfilesStartingWithTerm","searchProfilesInCurrentChannel","searchActiveProfilesInCurrentChannel","searchProfilesInCurrentTeam","searchProfilesInTeam","index","splice","profilesWithoutTeam","withoutTeamProfileSet","shouldShowTermsOfService","acceptedTermsId","terms_of_service_id","acceptedAt","terms_of_service_create_at","EnableCustomTermsOfService","reacceptanceTime","CustomTermsOfServiceReAcceptancePeriod","timeElapsed","Date","getTime","CustomTermsOfServiceId","makeGetProfilesForReactions","r","userIdsInChannel","makeGetProfilesNotInChannel","makeGetProfilesByIdsAndUsernames","allUserIds","allUsernames","allProfilesById","allProfilesByUsername","userProfiles","profilesById","secureGetFromRecord","profilesByUsername","makeGetDisplayName","teammateNameDisplaySetting","useFallbackUsername","makeDisplayNameGetter","_","dmUsers","getProfilesInGroup","usersInGroups","getProfilesInGroupWithoutSorting","getProfilesNotInCurrentGroup","profilesNotInGroup","usersNotInGroups","searchProfilesInGroup","searchProfilesInGroupWithoutSorting","getLastActivityForUserId","lastActivity","getUserLastActivities","checkIsFirstAdmin","isFirstAdmin","displayLastActiveLabel","userStatus","timestamp","_user$props","currentTime","valueOf","show_last_active","EnableLastActiveTime","getLastActiveTimestampUnits","timestampUnits","createReducer","reducerSets","reducer","combineReducers","fullSet","reducerSet","enableBatching","removeUnneededMetadata","metadata","changed","emojis","Reflect","deleteProperty","files","embeds","embedsChanged","newEmbeds","embed","newEmbed","permalinkEmbed","data","nextPostsReplies","action","RECEIVED_POST","RECEIVED_NEW_POST","newState","RECEIVED_POSTS","nextState","UserTypes","LOGOUT_SUCCESS","handlePostReceived","nestedPermalinkLevel","currentState","shouldUpdatePost","isPermalink","is_following","file_ids","has_reactions","pending_post_id","participants","nextRootPost","handlePendingPosts","POST_REMOVED","removeNonRecentEmptyPostBlocks","blocks","mergePostBlocks","nextBlocks","aStartsAt","aEndsAt","mergePostOrder","left","right","seen","prevPosts","nextPostsForThread","RECEIVED_POSTS_AFTER","RECEIVED_POSTS_BEFORE","RECEIVED_POSTS_IN_CHANNEL","RECEIVED_POSTS_SINCE","newPosts","RECEIVED_POSTS_IN_THREAD","ChannelTypes","postDeleted","postEditHistory","RECEIVED_POST_HISTORY","currentFocusedPostId","RECEIVED_FOCUSED_POST","RECEIVED_REACTION","reaction","nextReactions","post_id","emoji_name","REACTION_DELETED","storeReactionsForPost","CREATE_ACK_POST_SUCCESS","ack","oldState","acknowledged_at","DELETE_ACK_POST_SUCCESS","storeAcknowledgementsForPost","reactionsForPost","_post$metadata","acknowledgementsForPost","storeOpenGraphForPost","previewPost","postIdState","messagesHistory","comment","ADD_MESSAGE_INTO_HISTORY","nextIndex","nextMessages","RESET_HISTORY_INDEX","MOVE_HISTORY_INDEX_BACK","MOVE_HISTORY_INDEX_FORWARD","zeroStateLimitedViews","threads","first_inaccessible_post_time","CloudTypes","RECEIVED_CLOUD_LIMITS","_limits$messages","_limits$messages2","limits","history","LimitsTypes","RECEIVED_APP_LIMITS","serverLimits","postHistoryLimit","myUserAccessTokens","activeUserCount","maxUsersLimit","groupsAssociatedToTeam","totalCount","groupsAssociatedToChannel","channelBookmarks","byChannelId","threadsInTeam","unreadThreadsInTeam","countsIncludingDirect","bots","accounts","userAccessTokens","clusterInfo","analytics","teamAnalytics","prevTrialLicense","jobs","jobsByTypeList","integrations","incomingHooks","incomingHooksTotalCount","outgoingHooks","oauthApps","systemCommands","commands","appsBotIDs","appsOAuthAppIDs","dialogTriggerId","outgoingOAuthConnections","filesFromSearch","fileIdsByPostId","customEmoji","nonExistentEmoji","fileResults","current","flagged","pinned","isSearchingTerm","isSearchGettingMore","isLimitedResults","typing","pending","schemes","syncables","apps","main","bindings","forms","rhs","pluginEnabled","cloud","limitsLoaded","errors","hostedCustomer","products","productsLoaded","usage","totalStorage","totalStorageLoaded","historyLoaded","cloudArchived","teamsLoaded","scheduledPosts","byTeamId","errorsByTeamId","byChannelOrThreadId","requests","error","myChannels","createChannel","websocket","createPost","editPost","getPostThread","login","logout","autocompleteUsers","updateMe","createCompliance","uploadFiles","getRolesByNames","getRoleByName","getRole","editRole","connected","lastConnectAt","lastDisconnectAt","connectionId","serverHostname","convertAnalyticsRowsToStats","clonedData","reverse","Stats","row","AdminTypes","RECEIVED_LOGS","RECEIVED_PLAIN_LOGS","RECEIVED_AUDITS","audit","RECEIVED_CONFIG","ENABLED_PLUGIN","nextPluginSettings","PluginSettings","nextPluginStates","PluginStates","Enable","DISABLED_PLUGIN","RECEIVED_ENVIRONMENT_CONFIG","RECEIVED_COMPLIANCE_REPORT","RECEIVED_COMPLIANCE_REPORTS","report","RECEIVED_CLUSTER_STATUS","samlCertStatus","RECEIVED_SAML_CERT_STATUS","RECEIVED_SYSTEM_ANALYTICS","RECEIVED_TEAM_ANALYTICS","analyticsForTeam","userAccessTokensByUser","RECEIVED_USER_ACCESS_TOKEN","nextUserState","RECEIVED_USER_ACCESS_TOKENS_FOR_USER","uat","REVOKED_USER_ACCESS_TOKEN","ENABLED_USER_ACCESS_TOKEN","token","is_active","DISABLED_USER_ACCESS_TOKEN","plugins","RECEIVED_PLUGINS","activePlugins","plugin","inactivePlugins","REMOVED_PLUGIN","RECEIVED_PLUGIN_STATUSES","plugin_id","pluginState","instances","cluster_id","description","ENABLE_PLUGIN_REQUEST","pluginId","PluginState","ENABLE_PLUGIN_FAILURE","DISABLE_PLUGIN_REQUEST","RECEIVED_LDAP_GROUPS","primary_key","LINKED_LDAP_GROUP","UNLINKED_LDAP_GROUP","mattermost_group_id","has_syncables","failed","LINK_LDAP_GROUP_FAILURE","UNLINK_LDAP_GROUP_FAILURE","samlMetadataResponse","RECEIVED_SAML_METADATA_RESPONSE","CREATE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS","RECEIVED_DATA_RETENTION_CUSTOM_POLICY","UPDATE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS","RECEIVED_DATA_RETENTION_CUSTOM_POLICIES","policies","dataRetention","DELETE_DATA_RETENTION_CUSTOM_POLICY_SUCCESS","total_count","PREV_TRIAL_LICENSE_SUCCESS","CREATE_ACCESS_CONTROL_POLICY_SUCCESS","RECEIVED_ACCESS_CONTROL_POLICY","RECEIVED_ACCESS_CONTROL_POLICIES","DELETE_ACCESS_CONTROL_POLICY_SUCCESS","RECEIVED_ACCESS_CONTROL_POLICIES_SEARCH","RECEIVED_ACCESS_CONTROL_CHILD_POLICIES","ASSIGN_CHANNELS_TO_ACCESS_CONTROL_POLICY_SUCCESS","UNASSIGN_CHANNELS_FROM_ACCESS_CONTROL_POLICY_SUCCESS","AppsTypes","FAILED_TO_FETCH_APP_BINDINGS","RECEIVED_APP_BINDINGS","validateBindings","APPS_PLUGIN_DISABLED","RECEIVED_APP_COMMAND_FORM","form","RECEIVED_APP_RHS_BINDINGS","RECEIVED_APP_RHS_COMMAND_FORM","APPS_PLUGIN_ENABLED","BotTypes","RECEIVED_BOT_ACCOUNTS","newBots","bot","RECEIVED_BOT_ACCOUNT","ChannelBookmarkTypes","RECEIVED_BOOKMARKS","bookmarks","arr","x","RECEIVED_BOOKMARK","bookmark","BOOKMARK_DELETED","channelNextState","toNewObj","ChannelCategoryTypes","RECEIVED_CATEGORIES","isWebSocket","RECEIVED_CATEGORY","CATEGORY_DELETED","nextChannelIds","TeamTypes","receivedChannel","categoryID","channelID","RECEIVED_CATEGORY_ORDER","removeItem","updateMessageCount","existing","total_msg_count_root","total_msg_count","toClientChannel","serverChannel","receiveChannelMember","received","existingChannelMember","updatedChannelMember","isEqual","last_update_at","min","updateChannelMemberSchemeRoles","isSchemeUser","isSchemeAdmin","scheme_user","scheme_admin","SELECT_CHANNEL","RECEIVED_CHANNEL","RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS","channelListToMap","RECEIVED_DATA_RETENTION_CUSTOM_POLICY_CHANNELS_SEARCH","RECEIVED_CHANNELS","RECEIVED_ALL_CHANNELS","SchemeTypes","RECEIVED_SCHEME_CHANNELS","RECEIVED_CHANNEL_DELETED","deleteAt","RECEIVED_CHANNEL_UNARCHIVED","_action$features","createAt","isCrtReply","features","lastRootPostAt","UPDATED_CHANNEL_SCHEME","schemeId","scheme_id","REMOVE_DATA_RETENTION_CUSTOM_POLICY_CHANNELS_SUCCESS","nextSet","channelListToSet","delete","removeChannelFromSet","RECEIVED_MY_CHANNEL_MEMBER","RECEIVED_MY_CHANNEL_MEMBERS","remove","RECEIVED_CHANNEL_PROPS","notifyProps","SET_CHANNEL_MUTED","muted","mark_unread","INCREMENT_UNREAD_MSG_COUNT","amount","amountRoot","onlyMentions","fetchedChannelMember","DECREMENT_UNREAD_MSG_COUNT","INCREMENT_UNREAD_MENTION_COUNT","amountUrgent","DECREMENT_UNREAD_MENTION_COUNT","RECEIVED_LAST_VIEWED_AT","UPDATED_CHANNEL_MEMBER_SCHEME_ROLES","POST_UNREAD_SUCCESS","channelState","msgCount","msgCountRoot","mentionCountRoot","urgentMentionCount","channelMember","oldRoles","newRoles","splitRoles","stateChanged","cm","RECEIVED_CHANNEL_MEMBER","_members$member$user_","_members$member$user_2","RECEIVED_CHANNEL_MEMBERS","PROFILE_NO_LONGER_VISIBLE","removeMemberFromChannels","REMOVE_MEMBER_FROM_CHANNEL","RECEIVED_PROFILE_NOT_IN_CHANNEL","RECEIVED_CHANNEL_STATS","stat","ADD_CHANNEL_MEMBER_SUCCESS","receivedCount","nextStat","member_count","REMOVE_CHANNEL_MEMBER_SUCCESS","INCREMENT_PINNED_POST_COUNT","pinnedpost_count","DECREMENT_PINNED_POST_COUNT","INCREMENT_FILE_COUNT","files_count","GroupTypes","RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNELS_IN_TEAM","groupsByChannelId","associatedGroupIDs","RECEIVED_GROUPS_ASSOCIATED_TO_CHANNEL","totalGroupCount","RECEIVED_ALL_GROUPS_ASSOCIATED_TO_CHANNEL","RECEIVED_GROUPS_NOT_ASSOCIATED_TO_CHANNEL","RECEIVED_TOTAL_CHANNEL_COUNT","REMOVE_MANUALLY_UNREAD","ADD_MANUALLY_UNREAD","RECEIVED_CHANNEL_MODERATIONS","moderations","RECEIVED_CHANNEL_MEMBER_COUNTS_BY_GROUP","memberCounts","memberCountsByGroup","channelMemberCount","group_id","RECEIVED_CHANNEL_MEMBER_COUNTS_FROM_GROUPS_LIST","channel_member_count","channel_member_timezones_count","INCREMENT_TOTAL_MSG_COUNT","RECEIVED_CHANNELS_MEMBER_COUNT","memberCount","emptyLimits","emptyErrors","customer","RECEIVED_CLOUD_CUSTOMER","subscription","RECEIVED_CLOUD_SUBSCRIPTION","RECEIVED_CLOUD_PRODUCTS","productDict","obj","invoices","RECEIVED_CLOUD_INVOICES","invoiceDict","CLOUD_SUBSCRIPTION_FAILED","CLOUD_PRODUCTS_FAILED","CLOUD_CUSTOMER_FAILED","CLOUD_INVOICES_FAILED","CLOUD_LIMITS_FAILED","assign","CLOUD_SUBSCRIPTION_REQUEST","CLOUD_PRODUCTS_REQUEST","CLOUD_CUSTOMER_REQUEST","CLOUD_INVOICES_REQUEST","CLOUD_LIMITS_REQUEST","ContentFlaggingTypes","RECEIVED_CONTENT_FLAGGING_CONFIG","storeEmoji","emoji","storeEmojisForPost","EmojiTypes","RECEIVED_CUSTOM_EMOJI","RECEIVED_CUSTOM_EMOJIS","DELETED_CUSTOM_EMOJI","CLEAR_CUSTOM_EMOJIS","CUSTOM_EMOJI_DOES_NOT_EXIST","storeAllFilesForPost","storeFilesCallback","storeFilesForPost","file","storeFilesIdsForPost","FileTypes","RECEIVED_UPLOAD_FILES","RECEIVED_FILES_FOR_POST","filesById","filesMap","REMOVED_FILE","fileIds","RECEIVED_FILES_FOR_SEARCH","filesIdsForPost","filePublicLink","link","RECEIVED_FILE_PUBLIC_LINK","GeneralTypes","CLIENT_CONFIG_RECEIVED","LOGIN","SET_CONFIG_AND_LICENSE","CLIENT_CONFIG_RESET","CLIENT_LICENSE_RECEIVED","CLIENT_LICENSE_RESET","CUSTOM_PROFILE_ATTRIBUTE_FIELDS_RECEIVED","field","CUSTOM_PROFILE_ATTRIBUTE_FIELD_DELETED","fieldId","CUSTOM_PROFILE_ATTRIBUTE_FIELD_CREATED","CUSTOM_PROFILE_ATTRIBUTE_FIELD_PATCHED","RECEIVED_SERVER_VERSION","FIRST_ADMIN_COMPLETE_SETUP_RECEIVED","CWS_AVAILABILITY_CHECK_REQUEST","CWS_AVAILABILITY_CHECK_SUCCESS","CWS_AVAILABILITY_CHECK_FAILURE","RECEIVED_GROUP_TEAMS","RECEIVED_GROUP_CHANNELS","PATCHED_GROUP_TEAM","LINKED_GROUP_TEAM","nextGroupTeams","len","PATCHED_GROUP_CHANNEL","LINKED_GROUP_CHANNEL","nextGroupChannels","UNLINKED_GROUP_TEAM","_state$action$data$gr","_state$action$data$gr2","nextTeams","nextChannels","groupTeam","syncable_id","groupChannel","UNLINKED_GROUP_CHANNEL","CREATE_GROUP_SUCCESS","PATCHED_GROUP","RESTORED_GROUP","ARCHIVED_GROUP","RECEIVED_MY_GROUPS","RECEIVED_GROUPS","RECEIVED_GROUPS_ASSOCIATED_TO_TEAM","RECEIVED_ALL_GROUPS_ASSOCIATED_TO_TEAM","RECEIVED_MEMBER_TO_REMOVE_FROM_GROUP","dataInfo","member_ids","newMemberIds","newGroup","RECEIVED_MEMBER_TO_ADD_TO_GROUP","RECEIVED_GROUP_STATS","ADD_MY_GROUP","REMOVE_MY_GROUP","initialProducts","HostedCustomerTypes","RECEIVED_SELF_HOSTED_PRODUCTS","SELF_HOSTED_PRODUCTS_FAILED","SELF_HOSTED_PRODUCTS_REQUEST","IntegrationTypes","RECEIVED_INCOMING_HOOK","RECEIVED_INCOMING_HOOKS","hook","DELETED_INCOMING_HOOK","RECEIVED_INCOMING_HOOKS_TOTAL_COUNT","RECEIVED_OUTGOING_HOOK","RECEIVED_OUTGOING_HOOKS","DELETED_OUTGOING_HOOK","RECEIVED_COMMANDS","RECEIVED_CUSTOM_TEAM_COMMANDS","command","RECEIVED_COMMAND","RECEIVED_COMMAND_TOKEN","DELETED_COMMAND","RECEIVED_OAUTH_APPS","app","RECEIVED_OAUTH_APP","DELETED_OAUTH_APP","RECEIVED_APPS_OAUTH_APP_IDS","orderedState","orderedData","RECEIVED_APPS_BOT_IDS","RECEIVED_OUTGOING_OAUTH_CONNECTIONS","connection","RECEIVED_OUTGOING_OAUTH_CONNECTION","DELETED_OUTGOING_OAUTH_CONNECTION","nextCommands","trigger","dialogArguments","RECEIVED_DIALOG_ARGUMENTS","RECEIVED_DIALOG_TRIGGER_ID","dialog","RECEIVED_DIALOG","JobTypes","RECEIVED_JOB","RECEIVED_JOBS","job","RECEIVED_JOBS_BY_TYPE","getKey","setAllPreferences","PreferenceTypes","RECEIVED_ALL_PREFERENCES","RECEIVED_PREFERENCES","DELETED_PREFERENCES","RECEIVED_USER_ALL_PREFERENCES","setAllUserPreferences","RECEIVED_USER_PREFERENCES","RoleTypes","RECEIVED_ROLES","ROLE_DELETED","RECEIVED_ROLE","SET_PENDING_ROLES","ScheduledPostTypes","SCHEDULED_POSTS_RECEIVED","scheduledPostsByTeamId","scheduledPost","SINGLE_SCHEDULED_POST_RECEIVED","SCHEDULED_POST_UPDATED","SCHEDULED_POST_DELETED","existingIndex","existingScheduledPostId","modified","prune","scheduledPostId","teamScheduledPosts","error_code","CREATED_SCHEME","PATCHED_SCHEME","RECEIVED_SCHEME","RECEIVED_SCHEMES","scheme","DELETED_SCHEME","removePinnedPost","pinnedPosts","SearchTypes","RECEIVED_SEARCH_FLAGGED_POSTS","hasNewFlaggedPosts","unshift","flaggedPostsRemoved","REMOVE_SEARCH_POSTS","RECEIVED_SEARCH_PINNED_POSTS","is_pinned","RECEIVED_SEARCH_POSTS","isGettingMore","RECEIVED_SEARCH_FILES","REMOVE_SEARCH_FILES","RECEIVED_SEARCH_TERM","isEnd","isFilesEnd","SEARCH_POSTS_REQUEST","SEARCH_POSTS_SUCCESS","_action$data","truncationInfo","RECEIVED_SEARCH_TRUNCATION_INFO","firstInaccessiblePostTime","searchType","remotes","SharedChannelTypes","remotesByRemoteId","remoteId","remoteInfo","SELECT_TEAM","RECEIVED_TEAMS_LIST","RECEIVED_SCHEME_TEAMS","RECEIVED_DATA_RETENTION_CUSTOM_POLICY_TEAMS_SEARCH","teamListToMap","RECEIVED_DATA_RETENTION_CUSTOM_POLICY_TEAMS","RECEIVED_TEAMS","CREATED_TEAM","UPDATED_TEAM","PATCHED_TEAM","REGENERATED_TEAM_INVITE_ID","RECEIVED_TEAM","RECEIVED_TEAM_DELETED","RECEIVED_TEAM_UNARCHIVED","UPDATED_TEAM_SCHEME","REMOVE_DATA_RETENTION_CUSTOM_POLICY_TEAMS_SUCCESS","updateState","receivedTeams","RECEIVED_MY_TEAM_MEMBER","RECEIVED_MY_TEAM_MEMBERS","prevMember","RECEIVED_MY_TEAM_UNREADS","unreads","u","abs","UPDATED_TEAM_MEMBER_SCHEME_ROLES","updateMyTeamMemberSchemeRoles","deltaMsgs","teamState","newTeamState","teamUnreads","unread","RECEIVED_MEMBER_IN_TEAM","RECEIVED_TEAM_MEMBERS","RECEIVED_MEMBERS_IN_TEAM","REMOVE_MEMBER_FROM_TEAM","updateTeamMemberSchemeRoles","RECEIVED_TEAM_STATS","teamID","RECEIVED_GROUPS_NOT_ASSOCIATED_TO_TEAM","RECEIVED_TOTAL_TEAM_COUNT","RECEIVED_CONTENT_FLAGGING_STATUS","isDmGmChannel","handleAllTeamThreadsRead","_state$action$data$te","handleReadChangedThread","isUrgent","prevUnreadMentions","newUnreadMentions","prevUnreadReplies","newUnreadReplies","unreadMentionDiff","handleLeaveTeam","handleLeaveChannel","extra","threadsToDelete","unreadThreads","unreadUrgentMentions","curr","unread_mentions","unread_replies","is_urgent","totalUnreadThreads","totalUnreadUrgentMentions","handleDecrementThreadCounts","replies","countsIncludingDirectReducer","ThreadTypes","ALL_TEAM_THREADS_READ","READ_CHANGED_THREAD","teamIds","FOLLOW_CHANGED_THREAD","following","RECEIVED_THREAD_COUNTS","_state$action$data$te2","DECREMENT_THREAD_COUNTS","countsReducer","thread_count","thread_mention_count","thread_urgent_mention_count","shouldAddThreadId","last_reply_at","handlePostRemoved","handleSingleTeamReceivedThread","handleReceivedThread","handleAllTeamsReceivedThread","handleReceiveThreads","threadDeleted","handleSingleTeamThreadRead","threadsInTeamReducer","RECEIVED_THREAD","RECEIVED_THREADS","unreadThreadsInTeamReducer","RECEIVED_UNREAD_THREADS","handleFollowChanged","threadsReducer","nextThread","initialState","emptyUsage","boards","cards","cardsLoaded","profilesToSet","addProfileToSet","profileListToSet","removeProfileListFromSet","removeProfileFromSets","removed","removeProfileFromSet","receiveUserProfile","merged","last_name","last_password_update","auth_service","RECEIVED_ME","RECEIVED_SESSIONS","RECEIVED_REVOKED_SESSION","sessionId","REVOKE_ALL_USER_SESSIONS_SUCCESS","isCurrentUser","REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS","RECEIVED_MY_USER_ACCESS_TOKEN","RECEIVED_MY_USER_ACCESS_TOKENS","CLEAR_MY_USER_ACCESS_TOKENS","RECEIVED_PROFILE","RECEIVED_CPA_VALUES","customAttributeValues","existingProfile","profileAttributes","custom_profile_attributes","CLEAR_CPA_VALUES","newAttributes","RECEIVED_PROFILES_LIST","RECEIVED_PROFILES","RECEIVED_TERMS_OF_SERVICE_STATUS","RECEIVED_PROFILE_IN_TEAM","RECEIVED_PROFILES_LIST_IN_TEAM","RECEIVED_PROFILES_IN_TEAM","RECEIVED_PROFILE_NOT_IN_TEAM","RECEIVED_PROFILES_LIST_NOT_IN_TEAM","RECEIVED_PROFILES_LIST_NOT_IN_TEAM_AND_REPLACE","RECEIVED_PROFILE_WITHOUT_TEAM","RECEIVED_PROFILES_LIST_WITHOUT_TEAM","RECEIVED_PROFILE_IN_CHANNEL","RECEIVED_PROFILES_LIST_IN_CHANNEL","RECEIVED_PROFILES_IN_CHANNEL","CHANNEL_MEMBER_REMOVED","RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL","RECEIVED_PROFILES_LIST_NOT_IN_CHANNEL_AND_REPLACE","RECEIVED_PROFILES_NOT_IN_CHANNEL","removeProfilesFromSet","CHANNEL_MEMBER_ADDED","RECEIVED_PROFILES_LIST_IN_GROUP","RECEIVED_PROFILES_FOR_GROUP","RECEIVED_PROFILES_LIST_TO_REMOVE_FROM_GROUP","RECEIVED_PROFILES_LIST_NOT_IN_GROUP","RECEIVED_DND_END_TIMES","RECEIVED_STATUSES","RECEIVED_STATUSES_IS_MANUAL","RECEIVED_USER_STATS","RECEIVED_FILTERED_USER_STATS","RECEIVED_LAST_ACTIVITIES","nextPosts","message","otherPost","POST_PINNED_CHANGED","isPinned","updateAt","handlePosts","nextPostsInChannel","RESET_POSTS_IN_CHANNEL","recentBlockIndex","nextRecentBlock","nextPostsForChannel","_action$features2","afterPostId","beforePostId","mostOldestCreateAt","nextOrder","WebsocketEvents","now","channelThreads","getThreadsOfChannel","RECEIVED_MESSAGES_USAGE","RECEIVED_FILES_USAGE","RECEIVED_BOARDS_USAGE","RECEIVED_TEAMS_USAGE","sharedChannels","initialRequestState","RequestStatus","handleRequest","REQUEST","CREATE_COMPLIANCE_REQUEST","CREATE_COMPLIANCE_SUCCESS","CREATE_COMPLIANCE_FAILURE","GET_CHANNELS_REQUEST","GET_CHANNELS_SUCCESS","GET_CHANNELS_FAILURE","GET_ALL_CHANNELS_REQUEST","GET_ALL_CHANNELS_SUCCESS","GET_ALL_CHANNELS_FAILURE","CHANNELS_REQUEST","CHANNELS_SUCCESS","CHANNELS_FAILURE","CREATE_CHANNEL_REQUEST","CREATE_CHANNEL_SUCCESS","CREATE_CHANNEL_FAILURE","CANCEL","toString","handleUploadFilesRequest","UPLOAD_FILES_REQUEST","UPLOAD_FILES_SUCCESS","UPLOAD_FILES_FAILURE","UPLOAD_FILES_CANCEL","WEBSOCKET_CLOSED","WEBSOCKET_REQUEST","WEBSOCKET_SUCCESS","WEBSOCKET_FAILURE","CREATE_POST_RESET_REQUEST","CREATE_POST_REQUEST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","EDIT_POST_REQUEST","EDIT_POST_SUCCESS","EDIT_POST_FAILURE","GET_POST_THREAD_REQUEST","GET_POST_THREAD_SUCCESS","GET_POST_THREAD_FAILURE","ROLES_BY_NAMES_REQUEST","ROLES_BY_NAMES_SUCCESS","ROLES_BY_NAMES_FAILURE","ROLE_BY_NAME_REQUEST","ROLE_BY_NAME_SUCCESS","ROLE_BY_NAME_FAILURE","ROLE_BY_ID_REQUEST","ROLE_BY_ID_SUCCESS","ROLE_BY_ID_FAILURE","EDIT_ROLE_REQUEST","EDIT_ROLE_SUCCESS","EDIT_ROLE_FAILURE","flaggedPosts","SEARCH_FLAGGED_POSTS_REQUEST","SEARCH_FLAGGED_POSTS_SUCCESS","SEARCH_FLAGGED_POSTS_FAILURE","SEARCH_PINNED_POSTS_REQUEST","SEARCH_PINNED_POSTS_SUCCESS","SEARCH_PINNED_POSTS_FAILURE","GET_TEAMS_REQUEST","GET_TEAMS_SUCCESS","GET_TEAMS_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_REQUEST","LOGOUT_FAILURE","RESET_LOGOUT_STATE","AUTOCOMPLETE_USERS_REQUEST","AUTOCOMPLETE_USERS_SUCCESS","AUTOCOMPLETE_USERS_FAILURE","UPDATE_ME_REQUEST","UPDATE_ME_SUCCESS","UPDATE_ME_FAILURE","ErrorTypes","displayable","date","toUTCString","SET_CONNECTION_ID","payload","SET_SERVER_HOSTNAME","configureStore","appReducers","getAppReducers","preloadedState","baseState","enhancers","composeWithDevTools","shouldHotReload","trace","traceLimit","autoPause","composeEnhancers","applyMiddleware","thunk","withExtraArgument","loaders","baseReducer","serviceReducers","store","legacy_createStore","reducerRegistry","setChangeListener","reducers","replaceReducer","constructor","_defineProperty","this","emitChange","getReducers","listener","cleanBinding","binding","topLocation","cleanBindingRec","depth","_binding$bindings","toRemove","usedLabels","_b$bindings","app_id","label","icon","hasBindings","hasForm","hasSubmit","submit","_b$bindings2","_b$form","_b$form2","cleanForm","_binding$bindings2","filterAndCleanBindings","filteredBindings","_b$bindings3","channelHeaderBindings","postMenuBindings","commandBindings","_form$fields","_field$options","_field$options2","usedValues","option","_field$options3","cleanStaticSelect","lookup","insertWithoutDuplicates","array","newIndex","newArray","insertMultipleWithoutDuplicates","items","channelTypeOrder","usersState","teammate_id","isGroupChannel","profilesIds","gm","getGroupDisplayNameFromUserIds","newCompleteDirectGroupInfo","dmChannelClone","getDirectChannelName","otherId","handle","omitCurrentUser","names","getUserLocale","isPrivateChannel","sortChannelsByTypeListAndDisplayName","typeList","idxA","idxB","aDisplayName","filterName","bDisplayName","toLowerCase","sortChannelsByTypeAndDisplayName","lowercasedTerm","deepFreezeAndThrowOnMutation","object","isFrozen","isSealed","__defineGetter__","identity","__defineSetter__","throwOnImmutableMutation","freeze","seal","stringify","GroupSource","Ldap","PluginGroupSourcePrefix","Plugin","filterGroupsMatchingTerm","trimmedTerm","groupSuggestions","groupnameSuggestions","getSuggestionsSplitByMultiple","suggestions","getSuggestionsSplitBy","suggestion","sortGroups","memoizeResult","measure","shallowEqual","currentVersion","minMajorVersion","minMinorVersion","minDotVersion","major","minor","dot","generateId","floor","random","isEmail","test","localizeFunction","setLocalizeFunction","localizeMessage","descriptor","_descriptor$defaultMe","defaultMessage","ret","CREATE_COMMENT","DATE_LINE","START_OF_NEW_MESSAGES","MAX_COMBINED_SYSTEM_POSTS","makePreparePostIdsForPostList","filterPostsAndAddSeparators","getPostsForIds","_ref2","_ref3","indicateNewMessages","selectedPostId","out","lastDate","addedNewMessagesIndicator","pushPostDateIfNeeded","isFromWebhook","makeFilterPostsAndAddSeparators","combineUserActivityPosts","makeCombineUserActivityPosts","postDate","currentOffset","getTimezoneOffset","timezone","getUserCurrentTimezone","zone","moment","timezoneOffset","utcOffset","setTime","toDateString","makeAddDateSeparatorsForSearchResults","lastPostIsUserActivity","combinedCount","isStartOfNewMessages","isDateLine","isCreateComment","postIsUserActivity","isUserActivityPost","getTimestampForStartOfNewMessages","substring","getNewMessagesIndex","postListIds","getDateForDateLine","isCombinedUserActivityPost","getPostIdsForCombinedUserActivityPost","makeGenerateCombinedPost","getPostIds","combinedId","edit_at","parent_id","original_id","user_activity","combineUserActivitySystemPost","hashtags","images","system_post_ids","user_activity_posts","isUsersRelatedPost","postType","mergeLastSimilarPosts","userActivities","prevPost","prePrevPost","actorId","systemPosts","_post$props","_post$props2","_post$props3","_post$props4","isRemovedPost","addedUserId","ensureString","removedUserId","addedUsername","removedUsername","isSamePostType","isSameActor","isJoinedPrevPost","isLeftCurrentPost","isJoinedPrePrevPost","isLeftPrevPost","isSameActors","prevActivity","curActivity","prevPostActorsSet","currentPostActorsSet","hasAllActors","actor","isSameActorsInUserActivities","messageData","reduceUsers","activity","extractUserActivityData","isMessageData","isStringArray","isUserActivityProp","isArrayOf","isMeMessage","from_webhook","isUserAddedInChannel","postTypeCheck","userIdCheck","shouldIgnorePost","canEditPost","isOwner","isPostOwner","canEdit","PostEditTimeLimit","joinLeavePostTypes","currentUsername","isJoinLeavePostForUsername","childPost","aIsPendingOrFailed","bIsPendingOrFailed","commentsNotifyLevel","COMMENTS_NEVER","threadCreatedByCurrentUser","comments","COMMENTS_ANY","COMMENTS_ROOT","getEmbedFromMetadata","receivedPost","storedPost","_storedPost$participa","_receivedPost$partici","ensureNumber","teamList","_team$name","_team$display_name","userTimezone","useAutomaticTimezone","automaticTimezone","manualTimezone","useAutomatic","getTimezoneLabel","timezones","j","utc","text","getDateForTimezone","tzString","toLocaleString","timeZone","getFullName","DISPLAY_PREFER_NICKNAME","nickname","DISPLAY_PREFER_FULL_NAME","RemoteUsername","spaceSeparatedStringIncludes","spaceSeparated","isAdmin","rolesArray","el","isChannelAdmin","hasUserAccessTokenRole","hasPostAllRole","hasPostAllPublicRole","profileList","splitStr","splitTerm","initialSuggestions","st","val","splitStrs","nameSuggestionsForUser","includeFullEmail","profileSuggestions","usernameSuggestions","first","last","full","positionSuggestions","position","emailPrefix","substr","nameA","nameB","checkUserHasRole","userIsNotAdminOrGuest","isSystemRole","extractPluginConfigurationSection","section","title","component","Component","React","_unused","onSubmit","disabled","setting","validSetting","extractPluginConfigurationSetting","console","warn","helpText","default","res","base","isValid","extractValidRadioOption","extractPluginConfigurationRadioSetting","_unused2","extractPluginConfigurationCustomSetting","hasMenuId","menu","menuId","subMenu","buildMenu","rootMenu","_rootMenu$subMenu","parentMenuId","sortComponents","removePostPluginComponents","k","removePostPluginComponent","initialComponents","AppBar","CallButton","FilePreview","LinkTooltip","MainMenu","ChannelHeaderButton","MobileChannelHeaderButton","PostDropdownMenu","PostAction","PostEditorAction","CodeBlockAction","NewMessagesSeparatorAction","Product","RightHandSidebarComponent","FilesWillUploadHook","NeedsTeamComponent","CreateBoardFromTemplate","DesktopNotificationHooks","BottomTeamSidebar","ChannelHeader","ChannelIntroButton","CustomRouteComponent","FilesDropdown","FileUploadMethod","LeftSidebarHeader","MessageWillFormat","PopoverUserActions","PopoverUserAttributes","PostDropdownMenuItem","PostMessageAttachment","PostWillRenderEmbedComponent","Root","SearchButtons","SearchHints","SearchSuggestions","UserGuideDropdown","ChannelToast","Global","SidebarChannelLinkLabel","MessageWillBePosted","MessageWillBeUpdated","SlashCommandWillBePosted","SystemConsoleGroupTable","ActionTypes","RECEIVED_WEBAPP_PLUGINS","RECEIVED_WEBAPP_PLUGIN","REMOVED_WEBAPP_PLUGIN","components","RECEIVED_PLUGIN_COMPONENT","pluggableType","nextArray","actionData","REMOVED_PLUGIN_COMPONENT","types","componentType","componentList","removePluginComponent","removePluginComponents","postTypes","RECEIVED_PLUGIN_POST_COMPONENT","currentPost","REMOVED_PLUGIN_POST_COMPONENT","postCardTypes","RECEIVED_PLUGIN_POST_CARD_COMPONENT","REMOVED_PLUGIN_POST_CARD_COMPONENT","adminConsoleReducers","RECEIVED_ADMIN_CONSOLE_REDUCER","REMOVED_ADMIN_CONSOLE_REDUCER","adminConsoleCustomComponents","RECEIVED_ADMIN_CONSOLE_CUSTOM_COMPONENT","adminConsoleCustomSections","RECEIVED_ADMIN_CONSOLE_CUSTOM_SECTION","nextObject","siteStatsHandlers","RECEIVED_PLUGIN_STATS_HANDLER","handler","userSettings","RECEIVED_PLUGIN_USER_SETTINGS","extractedConfiguration","pluginConfiguration","uiName","sections","buttonText","onClick","extractPluginConfigurationAction","validSections","extractPluginConfiguration","migrations","drafts","storageKey","_storageDraft$value","_storageDraft$value2","_storageDraft$value3","_storageDraft$value4","_storageDraft$value5","storageDraft","info","getDraftInfoFromKey","StoragePrefixes","DRAFT","fileInfos","uploadsInProgress","migratedDraft","show","migrateDrafts","storage","localForage","migrate","createMigrate","debug","persistReducer","REHYDRATE","nextValue","StorageTypes","SET_GLOBAL_ITEM","REMOVE_GLOBAL_ITEM","ACTION_ON_GLOBAL_ITEMS_WITH_PREFIX","STORAGE_REHYDRATE","initialized","complete","isOpen","ADD_CHANNEL_CTA_DROPDOWN_TOGGLE","open","announcementBarState","announcementBarCount","TRACK_ANNOUNCEMENT_BAR","DISMISS_ANNOUNCEMENT_BAR","focused","BROWSER_CHANGE_FOCUS","focus","windowSize","WindowSizes","DESKTOP_VIEW","BROWSER_WINDOW_RESIZED","postVisibility","Constants","INCREASE_POST_VISIBILITY","lastChannelViewTime","SELECT_CHANNEL_WITH_MEMBER","UPDATE_CHANNEL_LAST_VIEWED_AT","loadingPosts","LOADING_POSTS","focusedPostId","mobileView","UPDATE_MOBILE_VIEW","SET_LAST_UNREAD_CHANNEL","hadUnreads","lastGetPosts","RECEIVED_POSTS_FOR_CHANNEL_AT_TIME","time","toastStatus","UPDATE_TOAST_STATUS","channelPrefetchStatus","PREFETCH_POSTS_FOR_CHANNEL","unreadFilterEnabled","SET_UNREAD_FILTER_ENABLED","enabled","draggingState","SIDEBAR_DRAGGING_SET_STATE","SIDEBAR_DRAGGING_STOP","newCategoryIds","ADD_NEW_CATEGORY_ID","multiSelectedChannelIds","MULTISELECT_CHANNEL","MULTISELECT_CHANNEL_ADD","MULTISELECT_CHANNEL_TO","MULTISELECT_CHANNEL_CLEAR","lastSelectedChannel","SET_DRAFT_SOURCE","isRemote","emojiPickerCustomPage","INCREMENT_EMOJI_PICKER_PAGE","shortcutReactToLastPostEmittedFrom","EMITTED_SHORTCUT_REACT_TO_LAST_POST","Locations","CENTER","RHS_ROOT","translations","RECEIVED_TRANSLATIONS","TOGGLE_LHS","OPEN_LHS","CLOSE_LHS","TOGGLE_RHS_MENU","OPEN_RHS_MENU","SidebarSize","MEDIUM","SET_LHS_SIZE","currentStaticPageId","SELECT_STATIC_PAGE","MODAL_CLOSE","modalId","ModalIdentifiers","PLUGIN_MARKETPLACE","RECEIVED_MARKETPLACE_APPS","installing","INSTALLING_MARKETPLACE_ITEM","INSTALLING_MARKETPLACE_ITEM_SUCCEEDED","INSTALLING_MARKETPLACE_ITEM_FAILED","FILTER_MARKETPLACE_LISTING","modalState","MODAL_OPEN","dialogProps","dialogType","showLaunchingWorkspace","SHOW_LAUNCHING_WORKSPACE","hasBeenDismissed","DISMISS_NOTICE","SHOW_NOTICE","isShowOnboardingTaskCompletion","SHOW_ONBOARDING_TASK_COMPLETION","isShowOnboardingCompleteProfileTour","SHOW_ONBOARDING_COMPLETE_PROFILE_TOUR","isShowOnboardingVisitConsoleTour","SHOW_ONBOARDING_VISIT_CONSOLE_TOUR","editingPostDefaultState","refocusId","isRHS","editingPost","TOGGLE_EDITING_POST","menuActions","SELECT_ATTACHMENT_MENU_ACTION","actions","switcherOpen","SET_PRODUCT_SWITCHER_OPEN","_action$postId","SELECT_POST","SELECT_POST_CARD","UPDATE_RHS_STATE","RHS_GO_BACK","selectedPostFocussedAt","_action$timestamp","selectedPostCardId","selectedChannelId","RHSStates","PIN","CHANNEL_FILES","CHANNEL_INFO","CHANNEL_MEMBERS","EDIT_HISTORY","highlightedPostId","HIGHLIGHT_REPLY","CLEAR_HIGHLIGHT_REPLY","previousRhsStates","previousRhsState","filesSearchExtFilter","SET_FILES_FILTER_BY_EXT","rhsState","searchTerms","UPDATE_RHS_SEARCH_TERMS","terms","SEARCH","searchTeam","UPDATE_RHS_SEARCH_TEAM","UPDATE_RHS_SEARCH_TYPE","searchResultsTerms","UPDATE_RHS_SEARCH_RESULTS_TERMS","searchResultsType","UPDATE_RHS_SEARCH_RESULTS_TYPE","SET_RHS_SIZE","pluggableId","PLUGIN","isSearchingFlaggedPost","isSearchingPinnedPost","isSidebarOpen","isSidebarExpanded","SET_RHS_EXPANDED","expanded","TOGGLE_RHS_EXPANDED","SUPPRESS_RHS","isMenuOpen","CLOSE_RHS_MENU","editChannelMembers","SET_EDIT_CHANNEL_MEMBERS","shouldFocusRHS","Threads","CHANGED_SELECTED_THREAD","thread_id","RHS_FOCUSED","modalSearch","SET_MODAL_SEARCH","popoverSearch","SET_POPOVER_SEARCH","channelMembersRhsSearch","SET_CHANNEL_MEMBERS_RHS_SEARCH","modalFilters","SET_MODAL_FILTERS","userGridSearch","SET_USER_GRID_SEARCH","SET_USER_GRID_FILTERS","teamListSearch","SET_TEAM_LIST_SEARCH","channelListSearch","SET_CHANNEL_LIST_SEARCH","SET_CHANNEL_LIST_FILTERS","websocketConnectionErrorCount","INCREMENT_WS_ERROR_COUNT","RESET_WS_ERROR_COUNT","shouldShowPreviewOnCreateComment","SET_SHOW_PREVIEW_ON_CREATE_COMMENT","showPreview","shouldShowPreviewOnCreatePost","SET_SHOW_PREVIEW_ON_CREATE_POST","shouldShowPreviewOnEditChannelHeaderModal","SET_SHOW_PREVIEW_ON_EDIT_CHANNEL_HEADER_MODAL","shouldShowPreviewOnChannelSettingsHeaderModal","SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_HEADER_MODAL","shouldShowPreviewOnChannelSettingsPurposeModal","SET_SHOW_PREVIEW_ON_CHANNEL_SETTINGS_PURPOSE_MODAL","selectedThreadIdInTeam","findKey","CHANGED_LAST_VIEWED_AT","threadId","MANUALLY_UNREAD_THREAD","UPDATE_THREAD_TOAST_STATUS","lastUpdateAt","CHANGED_LAST_UPDATE_AT","views","announcementBar","browser","rhsSuppressed","UNSUPPRESS_RHS","modals","i18n","lhs","notice","system","channelSelectorModal","activeSection","previousActiveSection","UPDATE_ACTIVE_SECTION","marketplace","textbox","channelSidebar","addChannelCtaDropdown","onboardingTasks","productMenu","readout","SET_READOUT","CLEAR_READOUT","navigationBlockInitialState","blocked","onNavigationConfirmed","showNavigationPrompt","adminConsoleUserManagementTablePropertiesInitialState","sortColumn","sortIsDescending","pageSize","pageIndex","cursorDirection","CursorPaginationDirection","cursorUserId","cursorColumnValue","columnVisibility","searchTerm","filterTeam","filterTeamLabel","filterStatus","filterRole","navigationBlock","SET_NAVIGATION_BLOCKED","DEFER_NAVIGATION","CANCEL_NAVIGATION","CONFIRM_NAVIGATION","needsLoggedInLimitReachedCheck","NEEDS_LOGGED_IN_LIMIT_REACHED_CHECK","adminConsoleUserManagementTableProperties","SET_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES","CLEAR_ADMIN_CONSOLE_USER_MANAGEMENT_TABLE_PROPERTIES","getBasePath","URL","pathname","getConnectionId","isDevModeEnabled","EnableDeveloper","isChannelAccessControlEnabled","accessControlSettings","require","Observable","extendPrototype","baseLocalForage","additionalReducers","configureServiceStore","ready","then","persistor","persistStore","dispatch","oldKeyPrefix","restoredState","iterate","async","pause","persistedState","persist","migratePersistedState","configObservables","crossTabNotification","newObservable","changeDetection","subscribe","keyPrefix","newValue","reducerKey","purging","getState","basePath","purge","cleanLocalStorage","href","setTimeout","catch","e","SettingsTypes","TYPE_TEXT","TYPE_LONG_TEXT","TYPE_NUMBER","TYPE_COLOR","TYPE_BOOL","TYPE_PERMISSION","TYPE_RADIO","TYPE_BANNER","TYPE_DROPDOWN","TYPE_GENERATED","TYPE_USERNAME","TYPE_BUTTON","TYPE_LANGUAGE","TYPE_JOBSTABLE","TYPE_FILE_UPLOAD","TYPE_CUSTOM","TYPE_ROLES","TYPE_EXPANDABLE_SETTING","PreviousViewedTypes","THREADS","ReduxPreferences","TUTORIAL_STEP","TUTORIAL_STEP_AUTO_TOUR_STATUS","CRT_TUTORIAL_TRIGGERED","CRT_TUTORIAL_AUTO_TOUR_STATUS","CRT_TUTORIAL_STEP","EXPLORE_OTHER_TOOLS_TUTORIAL_STEP","CRT_THREAD_PANE_STEP","CHANNEL_DISPLAY_MODE","CHANNEL_DISPLAY_MODE_CENTERED","CHANNEL_DISPLAY_MODE_FULL_SCREEN","CHANNEL_DISPLAY_MODE_DEFAULT","MESSAGE_DISPLAY","MESSAGE_DISPLAY_CLEAN","MESSAGE_DISPLAY_COMPACT","MESSAGE_DISPLAY_DEFAULT","COLORIZE_USERNAMES","COLORIZE_USERNAMES_DEFAULT","CLICK_TO_REPLY","CLICK_TO_REPLY_DEFAULT","COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT","RENDER_EMOTICONS_AS_EMOJI","RENDER_EMOTICONS_AS_EMOJI_DEFAULT","LINK_PREVIEW_DISPLAY","LINK_PREVIEW_DISPLAY_DEFAULT","COLLAPSE_DISPLAY","COLLAPSE_DISPLAY_DEFAULT","AVAILABILITY_STATUS_ON_POSTS","AVAILABILITY_STATUS_ON_POSTS_DEFAULT","USE_MILITARY_TIME","USE_MILITARY_TIME_DEFAULT","UNREAD_SCROLL_POSITION_START_FROM_NEWEST","CATEGORY_NOTIFICATIONS","EMAIL_INTERVAL","INTERVAL_IMMEDIATE","INTERVAL_FIFTEEN_MINUTES","INTERVAL_HOUR","INTERVAL_NEVER","CATEGORY_SYSTEM_NOTICE","RECOMMENDED_NEXT_STEPS","TEAMS_ORDER","CLOUD_UPGRADE_BANNER","CLOUD_TRIAL_BANNER","START_TRIAL_MODAL","ADMIN_CLOUD_UPGRADE_PANEL","CATEGORY_EMOJI","EMOJI_SKINTONE","ONE_CLICK_REACTIONS_ENABLED","ONE_CLICK_REACTIONS_ENABLED_DEFAULT","CLOUD_TRIAL_END_BANNER","CLOUD_USER_EPHEMERAL_INFO","CATEGORY_CLOUD_LIMITS","THREE_DAYS_LEFT_TRIAL_MODAL","TOUCHED","UNIQUE","AB_TEST_PREFERENCE_VALUE","RECENT_EMOJIS","ONBOARDING","ADVANCED_TEXT_EDITOR","FORWARD_POST_VIEWED","HIDE_POST_FILE_UPGRADE_WARNING","SHOWN_LIMITS_REACHED_ON_LOGIN","USE_CASE","DELINQUENCY_MODAL_CONFIRMED","CONFIGURATION_BANNERS","NOTIFY_ADMIN_REVOKE_DOWNGRADED_WORKSPACE","OVERAGE_USERS_BANNER","POST_HISTORY_LIMIT_BANNER","USERS_LIMITS_BANNER","TO_CLOUD_YEARLY_PLAN_NUDGE","TO_PAID_PLAN_NUDGE","CLOUD_ANNUAL_RENEWAL_BANNER","Touched","ADD_CHANNELS_CTA","Unique","HAS_CLOUD_PURCHASE","REQUEST_TRIAL_AFTER_SERVER_UPGRADE","CLICKED_UPGRADE_AND_TRIAL_BTN","TrialPeriodDays","TRIAL_30_DAYS","TRIAL_14_DAYS","TRIAL_WARNING_THRESHOLD","TRIAL_2_DAYS","TRIAL_1_DAY","TRIAL_0_DAYS","suitePluginIds","playbooks","focalboard","calls","nps","channelExport","TOGGLE_IMPORT_THEME_MODAL","TOGGLE_DELETE_POST_MODAL","SET_RECENT_SKIN","CHANNEL_POSTS_STATUS","CHANNEL_SYNC_STATUS","ALL_CHANNEL_SYNC_STATUS","PostRequestTypes","BEFORE_ID","AFTER_ID","ABOUT","TEAM_SETTINGS","DELETE_CHANNEL","UNARCHIVE_CHANNEL","CHANNEL_NOTIFICATIONS","CHANNEL_INVITE","CHANNEL_SETTINGS","TEAM_MEMBERS","TEST_RESULTS","ADD_USER_TO_CHANNEL","ADD_USER_TO_ROLE","CREATE_DM_CHANNEL","EDIT_CHANNEL_HEADER","EDIT_CHANNEL_PURPOSE","NOTIFICATIONS","RESET_STATUS","RENAME_CHANNEL","USER_SETTINGS","QUICK_SWITCH","REMOVED_FROM_CHANNEL","EMAIL_INVITE","INTERACTIVE_DIALOG","APPS_MODAL","ADD_TEAMS_TO_SCHEME","INVITATION","ADD_GROUPS_TO_TEAM","ADD_GROUPS_TO_CHANNEL","MANAGE_TEAM_GROUPS","MANAGE_CHANNEL_GROUPS","GROUP_MEMBERS","MOBILE_SUBMENU","EDIT_CATEGORY","DELETE_CATEGORY","SIDEBAR_WHATS_NEW_MODAL","UPGRADE_CLOUD_ACCOUNT","TRIAL_BENEFITS_MODAL","PRICING_MODAL","LEARN_MORE_TRIAL_MODAL","ENTERPRISE_EDITION_LICENSE","CONFIRM_NOTIFY_ADMIN","REMOVE_NEXT_STEPS_MODAL","MORE_CHANNELS","NEW_CHANNEL_MODAL","CLOUD_PURCHASE","SELF_HOSTED_PURCHASE","CLOUD_DOWNGRADE_CHOOSE_TEAM","SUCCESS_MODAL","ERROR_MODAL","DND_CUSTOM_TIME_PICKER","POST_REMINDER_CUSTOM_TIME_PICKER","CUSTOM_STATUS","COMMERCIAL_SUPPORT","NO_INTERNET_CONNECTION","JOIN_CHANNEL_PROMPT","COLLAPSED_REPLY_THREADS_MODAL","NOTIFY_CONFIRM_MODAL","CONFIRM_LICENSE_REMOVAL","CONFIRM","USER_GROUPS","USER_GROUPS_CREATE","VIEW_USER_GROUP","ADD_USERS_TO_GROUP","EDIT_GROUP_MODAL","POST_DELETED_MODAL","FILE_PREVIEW_MODAL","LEAVE_PRIVATE_CHANNEL_MODAL","GET_PUBLIC_LINK_MODAL","KEYBOARD_SHORTCUTS_MODAL","USERS_TO_BE_REMOVED","DELETE_DRAFT","SEND_DRAFT","UPLOAD_LICENSE","CLOUD_LIMITS","REQUEST_BUSINESS_EMAIL_MODAL","FEATURE_RESTRICTED_MODAL","FORWARD_POST_MODAL","JOIN_PUBLIC_CHANNEL_MODAL","CLOUD_INVOICE_PREVIEW","BILLING_HISTORY","SUM_OF_MEMBERS_MODAL","RESTORE_POST_MODAL","INFO_TOAST","MARK_ALL_THREADS_AS_READ","DELINQUENCY_MODAL_DOWNGRADE","CLOUD_LIMITS_DOWNGRADE","PERSIST_NOTIFICATION_CONFIRM_MODAL","AIR_GAPPED_SELF_HOSTED_PURCHASE","DOWNGRADE_MODAL","PURCHASE_IN_PROGRESS","DELETE_WORKSPACE","FEEDBACK","DELETE_WORKSPACE_PROGRESS","DELETE_WORKSPACE_RESULT","SCREENING_IN_PROGRESS","CONFIRM_SWITCH_TO_YEARLY","EXPANSION_IN_PROGRESS","SELF_HOSTED_EXPANSION","START_TRIAL_FORM_MODAL","START_TRIAL_FORM_MODAL_RESULT","MOVE_THREAD_MODAL","CONVERT_GM_TO_CHANNEL","IP_FILTERING_ADD_EDIT_MODAL","IP_FILTERING_DELETE_CONFIRMATION_MODAL","IP_FILTERING_SAVE_CONFIRMATION_MODAL","REACTION_LIMIT_REACHED","AIR_GAPPED_CONTACT_SALES","MANAGE_ROLES_MODAL","MANAGE_TEAMS_MODAL","MANAGE_TOKENS_MODAL","RESET_PASSWORD_MODAL","RESET_EMAIL_MODAL","DEACTIVATE_MEMBER_MODAL","PROMOTE_TO_MEMBER_MODAL","DEMOTE_TO_GUEST_MODAL","REVOKE_SESSIONS_MODAL","CREATE_GROUP_SYNCABLES_MEMBERSHIP_MODAL","EXPORT_USER_DATA_MODAL","UPGRADE_EXPORT_DATA_MODAL","EXPORT_ERROR_MODAL","CHANNEL_BOOKMARK_DELETE","CHANNEL_BOOKMARK_CREATE","CONFIRM_MANAGE_USER_SETTINGS_MODAL","SCHEDULED_POST_CUSTOM_TIME_MODAL","SECURE_CONNECTION_DELETE","SECURE_CONNECTION_CREATE_INVITE","SECURE_CONNECTION_ACCEPT_INVITE","SHARED_CHANNEL_REMOTE_INVITE","SHARED_CHANNEL_REMOTE_UNINVITE","CONFIRM_RESET_FAILED_ATTEMPTS_MODAL","USER_PROPERTY_FIELD_DELETE","ATTRIBUTE_MODAL_LDAP","ATTRIBUTE_MODAL_SAML","FLAG_POST","UserStatuses","EventTypes","KEY_DOWN","KEY_UP","CLICK","FOCUS","BLUR","SHORTCUT","MOUSE_DOWN","MOUSE_UP","POST_LIST_SCROLL_TO_BOTTOM","CloudProducts","STARTER","PROFESSIONAL","ENTERPRISE","LEGACY","ADVANCED","SelfHostedProducts","MattermostFeatures","GUEST_ACCOUNTS","CUSTOM_USER_GROUPS","CREATE_MULTIPLE_TEAMS","START_CALL","PLAYBOOKS_RETRO","UNLIMITED_MESSAGES","UNLIMITED_FILE_STORAGE","ALL_PROFESSIONAL_FEATURES","ALL_ENTERPRISE_FEATURES","UPGRADE_DOWNGRADED_WORKSPACE","PLUGIN_FEATURE","HIGHLIGHT_WITHOUT_NOTIFICATION","LicenseSkus","getLicenseTier","licenseSku","Professional","Enterprise","Entry","EnterpriseAdvanced","A11yClassNames","REGION","SECTION","ACTIVE","FOCUSED","MODAL","POPUP","A11yAttributeNames","SORT_ORDER","ORDER_REVERSE","FOCUS_CHILD","LOOP_NAVIGATION","DISABLE_NAVIGATION","A11yCustomEventTypes","ACTIVATE","DEACTIVATE","UPDATE","isA11yFocusEventDetail","o","AppEvents","FOCUS_EDIT_TEXTBOX","SocketEvents","POST_UPDATED","CHANNEL_BOOKMARK_CREATED","CHANNEL_BOOKMARK_DELETED","CHANNEL_BOOKMARK_UPDATED","CHANNEL_BOOKMARK_SORTED","GROUP_ADDED","NEW_USER","DELETE_TEAM","UPDATE_TEAM_SCHEME","MEMBERROLE_UPDATED","PLUGIN_ENABLED","PLUGIN_DISABLED","GROUP_MEMBER_ADD","SIDEBAR_CATEGORY_CREATED","SIDEBAR_CATEGORY_UPDATED","SIDEBAR_CATEGORY_DELETED","SIDEBAR_CATEGORY_ORDER_UPDATED","USER_ACTIVATION_STATUS_CHANGED","CLOUD_PAYMENT_STATUS_UPDATED","CLOUD_SUBSCRIPTION_CHANGED","APPS_FRAMEWORK_REFRESH_BINDINGS","APPS_FRAMEWORK_PLUGIN_ENABLED","APPS_FRAMEWORK_PLUGIN_DISABLED","POST_ACKNOWLEDGEMENT_ADDED","POST_ACKNOWLEDGEMENT_REMOVED","DRAFT_CREATED","DRAFT_UPDATED","DRAFT_DELETED","SCHEDULED_POST_CREATED","PERSISTENT_NOTIFICATION_TRIGGERED","HOSTED_CUSTOMER_SIGNUP_PROGRESS_UPDATED","CPA_FIELD_CREATED","CPA_FIELD_UPDATED","CPA_FIELD_DELETED","CPA_VALUES_UPDATED","CrtTutorialSteps","WELCOME_POPOVER","LIST_POPOVER","UNREAD_POPOVER","FINISHED","CrtTutorialTriggerSteps","START","CrtThreadPaneSteps","THREADS_PANE_POPOVER","ItemStatus","RecommendedNextStepsLegacy","COMPLETE_PROFILE","TEAM_SETUP","INVITE_MEMBERS","PREFERENCES_SETUP","NOTIFICATION_SETUP","DOWNLOAD_APPS","CREATE_FIRST_CHANNEL","HIDE","SKIP","CloudBanners","TRIAL","UPGRADE_FROM_TRIAL","THREE_DAYS_LEFT_TRIAL_MODAL_DISMISSED","NUDGE_TO_CLOUD_YEARLY_PLAN_SNOOZED","NUDGE_TO_PAID_PLAN_SNOOZED","ANNUAL_RENEWAL_60_DAY","ANNUAL_RENEWAL_30_DAY","ConfigurationBanners","LICENSE_EXPIRED","AdvancedTextEditor","EDIT","AdvancedTextEditorTextboxIds","InCenter","InRHSComment","InModal","InEditMode","SYSTEM_GENERIC","FAKE_PARENT_DELETED","REMOVE_LINK_PREVIEW","CUSTOM_CALLS","CUSTOM_CALLS_RECORDING","CUSTOM_DATA_SPILLAGE_REPORT","StatTypes","EMBED_VISIBLE","COMMENT_DRAFT","EDIT_DRAFT","LOGOUT","ANNOUNCEMENT","LANDING_PAGE_SEEN","LANDING_PREFERENCE","CHANNEL_CATEGORY_COLLAPSED","INLINE_IMAGE_VISIBLE","DELINQUENCY","HIDE_JOINED_CHANNELS","HIDE_NOTIFICATION_PERMISSION_REQUEST_BANNER","LandingPreferenceTypes","MATTERMOSTAPP","BROWSER","ErrorPageTypes","LOCAL_STORAGE","OAUTH_ACCESS_DENIED","OAUTH_MISSING_CODE","OAUTH_INVALID_PARAM","OAUTH_INVALID_REDIRECT_URL","PAGE_NOT_FOUND","PERMALINK_NOT_FOUND","TEAM_NOT_FOUND","CHANNEL_NOT_FOUND","POST_NOT_FOUND","CLOUD_ARCHIVED","DATA_RETENTION","ELASTICSEARCH_POST_INDEXING","BLEVE_POST_INDEXING","LDAP_SYNC","MESSAGE_EXPORT","ACCESS_CONTROL_SYNC","JobStatuses","PENDING","IN_PROGRESS","CANCEL_REQUESTED","CANCELED","WARNING","AnnouncementBarTypes","CRITICAL","DEVELOPER","ADVISOR","ADVISOR_ACK","GENERAL","AnnouncementBarMessages","EMAIL_VERIFICATION_REQUIRED","EMAIL_VERIFIED","LICENSE_EXPIRING","LICENSE_PAST_GRACE","PREVIEW_MODE","WEBSOCKET_PORT_ERROR","TRIAL_LICENSE_EXPIRING","defineMessages","emailVerificationRequired","emailVerified","licenseExpired","licenseExpiring","pastGrace","previewMode","socketError","trialLicenseExpiring","IMAGE","AUDIO","VIDEO","SPREADSHEET","CODE","WORD","PRESENTATION","PDF","PATCH","SVG","OTHER","LICENSE_EXTENSION","NotificationLevels","DesktopSound","ON","OFF","IgnoreChannelMentions","UserSettingsNotificationSections","DESKTOP_AND_MOBILE","DESKTOP_NOTIFICATION_SOUND","EMAIL","KEYWORDS_MENTIONS","KEYWORDS_HIGHLIGHT","REPLY_NOTIFCATIONS","AUTO_RESPONDER","AdvancedSections","CONTROL_SEND","FORMATTING","PERFORMANCE_DEBUGGING","SYNC_DRAFTS","FLAG","DraggingStates","CAPTURE","BEFORE","DURING","DraggingStateTypes","CATEGORY","DM","MIXED_CHANNELS","AboutLinks","TERMS_OF_SERVICE","PRIVACY_POLICY","CloudLinks","BILLING_DOCS","PRICING","PRORATED_PAYMENT","DEPLOYMENT_OPTIONS","DOWNLOAD_UPDATE","CLOUD_SIGNUP_PAGE","SELF_HOSTED_SIGNUP","DELINQUENCY_DOCS","SELF_HOSTED_PRICING","HostedCustomerLinks","SELF_HOSTED_BILLING","TERMS_AND_CONDITIONS","SECURITY_UPDATES","DOWNLOAD","NEWSLETTER_UNSUBSCRIBE_LINK","PRIVACY","DocLinks","ABOUT_TEAMS","ADVANCED_LOGGING","CONFIGURE_DOCUMENT_CONTENT_SEARCH","CONFIGURE_AD_LDAP_QUERY_TIMEOUT","CONFIGURE_OVERRIDE_SAML_BIND_DATA_WITH_LDAP","COMPILANCE_EXPORT","COMPILANCE_MONITORING","DATA_RETENTION_POLICY","DEFAULT_LDAP_GROUP_SYNC","DESKTOP_MANAGED_RESOURCES","ELASTICSEARCH","ENABLE_HARDENED_MODE","FORMAT_MESSAGES","FILE_STORAGE","HIGH_AVAILABILITY_CLUSTER","IN_PRODUCT_NOTICES","MULTI_FACTOR_AUTH","ONBOARD_ADVANCED_PERMISSIONS","ONBOARD_LDAP","SESSION_LENGTHS","SETUP_IMAGE_PROXY","SETUP_LDAP","SETUP_PERFORMANCE_MONITORING","SETUP_PUSH_NOTIFICATIONS","SETUP_SAML","SHARE_LINKS_TO_MESSAGES","SITE_URL","SSL_CERTIFICATE","TRUE_UP_REVIEW","TRUSTED_CONNECTION","UPGRADE_SERVER","DeveloperLinks","CUSTOM_SLASH_COMMANDS","ENABLE_OAUTH2","INCOMING_WEBHOOKS","OUTGOING_WEBHOOKS","INTERACTIVE_MESSAGES","INTERACTIVE_DIALOGS","PERSONAL_ACCESS_TOKENS","PLUGIN_SIGNING","PLUGINS","SETUP_CUSTOM_SLASH_COMMANDS","SETUP_INCOMING_WEBHOOKS","SETUP_OAUTH2","SETUP_OUTGOING_WEBHOOKS","LicenseLinks","CONTACT_SALES","ENTRY_LIMITS_INFO","TRIAL_INFO_LINK","EMBARGOED_COUNTRIES","SOFTWARE_SERVICES_LICENSE_AGREEMENT","SOFTWARE_SERVICES_LICENSE_AGREEMENT_TEXT","UNSUPPORTED","UNSUPPORTED_UPGRADE_LINK","BillingSchemes","FLAT_FEE","PER_SEAT","SALES_SERVE","PermissionsScope","DefaultRolePermissions","all_users","channel_admin","team_admin","guests","ModeratedPermissions","RHS_COMMENT","NO_WHERE","PostListRowListIds","PostListUtils","CHANNEL_INTRO_MESSAGE","OLDER_MESSAGES_LOADER","NEWER_MESSAGES_LOADER","LOAD_OLDER_MESSAGES_TRIGGER","LOAD_NEWER_MESSAGES_TRIGGER","exportFormats","EXPORT_FORMAT_CSV","EXPORT_FORMAT_ACTIANCE","EXPORT_FORMAT_GLOBALRELAY","CacheTypes","REDIS","LRU","ZoomSettings","DEFAULT_SCALE","SCALE_DELTA","MIN_SCALE","MAX_SCALE","DataSpillagePropertyNames","Status","FlaggedBy","Reason","Comment","ReportingTime","ReviewingUser","ActionBy","ActionComment","ActionTime","Message","PostedIn","Team","PostedBy","PostedAt","TutorialSteps","ADD_FIRST_CHANNEL","POST_POPOVER","CHANNEL_POPOVER","ADD_CHANNEL_POPOVER","MENU_POPOVER","PRODUCT_SWITCHER","SETTINGS","START_TRIAL","AdminTutorialSteps","MAX_POST_VISIBILITY","REMOTE_USERS_HOUR_LIMIT_END_OF_THE_DAY","REMOTE_USERS_HOUR_LIMIT_BEGINNING_OF_THE_DAY","PayloadSources","SERVER_ACTION","VIEW_ACTION","USER_LIMIT","STAT_MAX_ACTIVE_USERS","STAT_MAX_NEW_USERS","ScrollTypes","FREE","BOTTOM","SIDEBBAR_OPEN","NEW_MESSAGE","MAXIMUM_LOGIN_ATTEMPTS_DEFAULT","MAX_ADD_MEMBERS_BATCH","PLAN_MENTIONS","SPECIAL_MENTIONS_REGEX","SUM_OF_MEMBERS_MENTION_REGEX","ALL_MENTION_REGEX","CHANNEL_MENTION_REGEX","HERE_MENTION_REGEX","NOTIFY_ALL_MEMBERS","ALL_MEMBERS_MENTIONS_REGEX","MENTIONS_REGEX","DEFAULT_CHARACTER_LIMIT","IMAGE_TYPE_GIF","TEXT_TYPES","IMAGE_TYPES","AUDIO_TYPES","VIDEO_TYPES","PRESENTATION_TYPES","SPREADSHEET_TYPES","WORD_TYPES","CHANNEL_HEADER_HEIGHT","CODE_TYPES","PDF_TYPES","PATCH_TYPES","SVG_TYPES","ICON_FROM_TYPE","audio","audioIcon","video","videoIcon","spreadsheet","excelIcon","presentation","pptIcon","pdf","pdfIcon","code","codeIcon","word","wordIcon","patch","patchIcon","other","genericIcon","ICON_NAME_FROM_TYPE","image","MAX_UPLOAD_FILES","MAX_FILENAME_LENGTH","EXPANDABLE_INLINE_IMAGE_MIN_HEIGHT","THUMBNAIL_WIDTH","THUMBNAIL_HEIGHT","PREVIEWER_HEIGHT","WEB_VIDEO_WIDTH","WEB_VIDEO_HEIGHT","MOBILE_VIDEO_WIDTH","MOBILE_VIDEO_HEIGHT","DESKTOP_SCREEN_WIDTH","TABLET_SCREEN_WIDTH","MOBILE_SCREEN_WIDTH","SMALL_SIDEBAR_BREAKPOINT","MEDIUM_SIDEBAR_BREAKPOINT","LARGE_SIDEBAR_BREAKPOINT","POST_MODAL_PADDING","SCROLL_DELAY","SCROLL_PAGE_FRACTION","DEFAULT_CHANNEL_UI_NAME","OFFTOPIC_CHANNEL","OFFTOPIC_CHANNEL_UI_NAME","GITLAB_SERVICE","GOOGLE_SERVICE","OFFICE365_SERVICE","OAUTH_SERVICES","OPENID_SERVICE","OPENID_SERVICE_FEATURE_DISCOVERY","OPENID_SCOPES","EMAIL_SERVICE","LDAP_SERVICE","SAML_SERVICE","USERNAME_SERVICE","SIGNIN_CHANGE","PASSWORD_CHANGE","GET_TERMS_ERROR","TERMS_REJECTED","SIGNIN_VERIFIED","CREATE_LDAP","SESSION_EXPIRED","POST_AREA_HEIGHT","POST_FOCUS_CONTEXT_RADIUS","POST_LOADING","POST_FAILED","SUGGESTION_LIST_MAXHEIGHT","SUGGESTION_LIST_MAXWIDTH","SUGGESTION_LIST_SPACE_RHS","MOBILE_SUGGESTION_LIST_SPACE_RHS","SUGGESTION_LIST_MODAL_WIDTH","MENTION_NAME_PADDING_LEFT","AVATAR_WIDTH","RESERVED_TEAM_NAMES","RESERVED_USERNAMES","MONTHS","MAX_DMS","MAX_CHANNEL_POPOVER_COUNT","DM_AND_GM_SHOW_COUNTS","HIGHEST_DM_SHOW_COUNT","INVITE_TEAM","OPEN_TEAM","MAX_POST_LEN","SIDEBAR_MINIMUM_WIDTH","THEME_ELEMENTS","themes","cssURL","solarizedDarkCSS","iconURL","solarizedDarkIcon","solarizedLightCSS","solarizedLightIcon","githubCSS","githubIcon","monokaiCSS","monokaiIcon","DEFAULT_CODE_THEME","KeyCodes","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","CAPS_LOCK","ESCAPE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","INSERT","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CMD","MENU","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","MULTIPLY","ADD","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUM_LOCK","SEMICOLON","EQUAL","COMMA","DASH","PERIOD","FORWARD_SLASH","TILDE","OPEN_BRACKET","BACK_SLASH","CLOSE_BRACKET","COMPOSING","CODE_PREVIEW_MAX_FILE_SIZE","HighlightedLanguages","extensions","aliases","actionscript","applescript","bash","clojure","coffeescript","cpp","csharp","css","d","dart","delphi","diff","django","dockerfile","elixir","erlang","fortran","fsharp","gcode","go","groovy","handlebars","haskell","haxe","java","javascript","json","julia","kotlin","latex","less","lisp","lua","makefile","markdown","matlab","objectivec","ocaml","perl","pgsql","php","powershell","puppet","python","ruby","rust","scala","scss","smalltalk","sql","stylus","swift","typescript","vbnet","vbscript","verilog","vhdl","vtt","xml","yaml","PostsViewJumpTypes","SIDEBAR_OPEN","NotificationPrefs","Integrations","PAGE_SIZE","START_PAGE_NUM","INCOMING_WEBHOOK","OUTGOING_WEBHOOK","OAUTH_APP","OUTGOING_OAUTH_CONNECTIONS","BOT","EXECUTE_CURRENT_COMMAND_ITEM_ID","OPEN_COMMAND_IN_MODAL_ITEM_ID","COMMAND_SUGGESTION_ERROR","COMMAND_SUGGESTION_CHANNEL","COMMAND_SUGGESTION_USER","PERMALINK_FADEOUT","DEFAULT_MAX_USERS_PER_TEAM","DEFAULT_MAX_CHANNELS_PER_TEAM","DEFAULT_MAX_NOTIFICATIONS_PER_CHANNEL","MIN_TEAMNAME_LENGTH","MAX_TEAMNAME_LENGTH","MAX_TEAMDESCRIPTION_LENGTH","MIN_CHANNELNAME_LENGTH","MAX_CHANNELNAME_LENGTH","DEFAULT_CHANNELURL_SHORTEN_LENGTH","MAX_CHANNELPURPOSE_LENGTH","MAX_CUSTOM_ATTRIBUTE_NAME_LENGTH","MAX_CUSTOM_ATTRIBUTES","MAX_CUSTOM_ATTRIBUTE_LENGTH","MAX_FIRSTNAME_LENGTH","MAX_LASTNAME_LENGTH","MAX_EMAIL_LENGTH","MIN_USERNAME_LENGTH","MAX_USERNAME_LENGTH","MAX_NICKNAME_LENGTH","MIN_PASSWORD_LENGTH","MAX_PASSWORD_LENGTH","MAX_POSITION_LENGTH","MIN_TRIGGER_LENGTH","MAX_TRIGGER_LENGTH","MAX_SITENAME_LENGTH","MAX_CUSTOM_BRAND_TEXT_LENGTH","MAX_TERMS_OF_SERVICE_TEXT_LENGTH","DEFAULT_TERMS_OF_SERVICE_RE_ACCEPTANCE_PERIOD","EMOJI_PATH","RECENT_EMOJI_KEY","DEFAULT_WEBHOOK_LOGO","logoWebhook","MHPNS_US","MHPNS_DE","MTPNS","SAVE_DRAFT_TIMEOUT","PERMISSIONS_SYSTEM_READ_ONLY_ADMIN","PERMISSIONS_SYSTEM_USER_MANAGER","PERMISSIONS_SYSTEM_MANAGER","PERMISSIONS_DELETE_POST_ALL","PERMISSIONS_DELETE_POST_TEAM_ADMIN","PERMISSIONS_DELETE_POST_SYSTEM_ADMIN","PERMISSIONS_SYSTEM_CUSTOM_GROUP_ADMIN","UNSET_POST_EDIT_TIME_LIMIT","MENTION_MORE_CHANNELS","MENTION_UNREAD","MENTION_PUBLIC_CHANNELS","MENTION_PRIVATE_CHANNELS","MENTION_RECENT_CHANNELS","MENTION_GROUPS","STATUS_INTERVAL","AUTOCOMPLETE_TIMEOUT","ANIMATION_TIMEOUT","SEARCH_POST","CHANNEL_ID_LENGTH","TRANSPARENT_PIXEL","REGEX_CODE_BLOCK_OPTIONAL_LANGUAGE_TAG","MAX_ATTACHMENT_FOOTER_LENGTH","ACCEPT_STATIC_IMAGE","ACCEPT_EMOJI_IMAGE","THREADS_LOADING_INDICATOR_ITEM_ID","THREADS_NO_RESULTS_ITEM_ID","TRIAL_MODAL_AUTO_SHOWN","DEFAULT_SITE_URL","CHANNEL_HEADER_BUTTON_DISABLE_TIMEOUT","FIRST_ADMIN_ROLE","MAX_PURCHASE_SEATS","MIN_PURCHASE_SEATS","ValidationErrors","USERNAME_REQUIRED","INVALID_LENGTH","INVALID_CHARACTERS","INVALID_FIRST_CHARACTER","RESERVED_NAME","INVALID_LAST_CHARACTER","ConsolePages","AD_LDAP","COMPLIANCE_EXPORT","CUSTOM_TERMS","LICENSE","SAML","WEB_SERVER","PUSH_NOTIFICATION_CENTER","SMTP","PAYMENT_INFO","MOBILE_VIEW","TABLET_VIEW","SMALL_DESKTOP_VIEW","AcceptedProfileImageTypes","searchHintOptions","defineMessage","additionalDisplay","searchFilesHintOptions","DONT_CLEAR","THIRTY_MINUTES","ONE_HOUR","FOUR_HOURS","TODAY","THIS_WEEK","DATE_AND_TIME","CUSTOM_DATE_TIME","CustomStatusDuration","durationValues","ClaimErrors","DataSearchTypes","FILES_SEARCH_TYPE","MESSAGES_SEARCH_TYPE","OverActiveUserLimits","MIN","MAX","PageLoadContext","PAGE_LOAD","RECONNECT","DRAFT_URL_SUFFIX","SCHEDULED_POST_URL_SUFFIX","RECENTLY_USED_CUSTOM_TIME","SCHEDULED_POSTS","RootHtmlPortalId","OverlaysTimings","CURSOR_REST_TIME_BEFORE_OPEN","CURSOR_MOUSEOVER_TO_OPEN","CURSOR_MOUSEOUT_TO_CLOSE","CURSOR_MOUSEOUT_TO_CLOSE_WITH_DELAY","FADE_IN_DURATION","FADE_OUT_DURATION","OverlayTransitionStyles","opacity","OverlayArrow","WIDTH","HEIGHT","OFFSET","keyArr","webpackContext","req","webpackContextResolve","__webpack_require__","resolve","module","exports","UserReportSortColumns","ReportSortDirection","ReportDuration","check","defineProperty","idMappedObjectsFromArr","collectionRemoveItem","collectionAddItem","collectionReplaceItem","collectionToArray","collectionFromArray","isRecordOf","collection"],"sourceRoot":""}