{"version":3,"file":"4548.a595187a17e0f1e9710f.js","mappings":"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","sources":["webpack://mattermost-webapp/./node_modules/react-select/creatable/dist/react-select-creatable.esm.js","webpack://mattermost-webapp/./node_modules/react-select/dist/useCreatable-84008237.esm.js","webpack://mattermost-webapp/./src/actions/views/mfa.js","webpack://mattermost-webapp/./src/components/color_input.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/settings_sidebar/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/join_leave_section/join_leave_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/join_leave_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/performance_debugging_section/performance_debugging_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/performance_debugging_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/advanced/user_settings_advanced.tsx","webpack://mattermost-webapp/./src/components/user_settings/advanced/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/color_chooser/color_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/custom_theme_chooser/custom_theme_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/theme_thumbnail.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/premade_theme_chooser/premade_theme_chooser.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/premade_theme_chooser/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/user_settings_theme.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_theme/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/manage_languages/manage_languages.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/manage_languages/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/manage_timezones/manage_timezones.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/manage_timezones/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/render_emoticons_as_emoji/render_emoticons_as_emoji.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/render_emoticons_as_emoji/index.ts","webpack://mattermost-webapp/./src/components/user_settings/display/user_settings_display.tsx","webpack://mattermost-webapp/./src/components/user_settings/display/index.ts","webpack://mattermost-webapp/./src/components/setting_picture.tsx","webpack://mattermost-webapp/./src/components/user_settings/general/user_settings_general.tsx","webpack://mattermost-webapp/./src/components/user_settings/general/index.ts","webpack://mattermost-webapp/./src/components/user_settings/notifications/index.ts","webpack://mattermost-webapp/./src/components/user_settings/plugin/plugin_action.tsx","webpack://mattermost-webapp/./src/utils/plugins/preferences.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/radio_option.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/radio.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/plugin_setting.tsx","webpack://mattermost-webapp/./src/components/user_settings/plugin/index.tsx","webpack://mattermost-webapp/./src/components/access_history_modal/access_history_modal.tsx","webpack://mattermost-webapp/./src/components/access_history_modal/index.ts","webpack://mattermost-webapp/./src/components/activity_log_modal/components/device_icon.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/components/more_info.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/components/activity_log.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/activity_log_modal.tsx","webpack://mattermost-webapp/./src/components/activity_log_modal/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/mfa_section/mfa_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/mfa_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/user_access_token_section/user_access_token_section.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/user_access_token_section/index.ts","webpack://mattermost-webapp/./src/components/user_settings/security/user_settings_security.tsx","webpack://mattermost-webapp/./src/components/user_settings/security/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/limit_visible_gms_dms/limit_visible_gms_dms.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/limit_visible_gms_dms/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/show_unreads_category/show_unreads_category.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/show_unreads_category/index.ts","webpack://mattermost-webapp/./src/components/user_settings/sidebar/user_settings_sidebar.tsx","webpack://mattermost-webapp/./src/components/user_settings/sidebar/index.ts","webpack://mattermost-webapp/./src/components/user_settings/index.tsx","webpack://mattermost-webapp/./src/components/widgets/smart_loader/index.tsx","webpack://mattermost-webapp/./src/components/user_settings/modal/user_settings_modal.tsx"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-aab027f3.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-84008237.esm.js';\nexport { u as useCreatable } from '../../dist/useCreatable-84008237.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-641ee5b8.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar CreatableSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var creatableProps = useStateManager(props);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\nvar CreatableSelect$1 = CreatableSelect;\n\nexport { CreatableSelect$1 as default };\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useMemo, useCallback } from 'react';\nimport { H as cleanValue, D as valueTernary } from './index-641ee5b8.esm.js';\nimport { g as getOptionValue, b as getOptionLabel } from './Select-aab027f3.esm.js';\n\nvar _excluded = [\"allowCreateWhileLoading\", \"createOptionPosition\", \"formatCreateLabel\", \"isValidNewOption\", \"getNewOptionData\", \"onCreateOption\", \"options\", \"onChange\"];\nvar compareOption = function compareOption() {\n  var inputValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var option = arguments.length > 1 ? arguments[1] : undefined;\n  var accessors = arguments.length > 2 ? arguments[2] : undefined;\n  var candidate = String(inputValue).toLowerCase();\n  var optionValue = String(accessors.getOptionValue(option)).toLowerCase();\n  var optionLabel = String(accessors.getOptionLabel(option)).toLowerCase();\n  return optionValue === candidate || optionLabel === candidate;\n};\nvar builtins = {\n  formatCreateLabel: function formatCreateLabel(inputValue) {\n    return \"Create \\\"\".concat(inputValue, \"\\\"\");\n  },\n  isValidNewOption: function isValidNewOption(inputValue, selectValue, selectOptions, accessors) {\n    return !(!inputValue || selectValue.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }) || selectOptions.some(function (option) {\n      return compareOption(inputValue, option, accessors);\n    }));\n  },\n  getNewOptionData: function getNewOptionData(inputValue, optionLabel) {\n    return {\n      label: optionLabel,\n      value: inputValue,\n      __isNew__: true\n    };\n  }\n};\nfunction useCreatable(_ref) {\n  var _ref$allowCreateWhile = _ref.allowCreateWhileLoading,\n    allowCreateWhileLoading = _ref$allowCreateWhile === void 0 ? false : _ref$allowCreateWhile,\n    _ref$createOptionPosi = _ref.createOptionPosition,\n    createOptionPosition = _ref$createOptionPosi === void 0 ? 'last' : _ref$createOptionPosi,\n    _ref$formatCreateLabe = _ref.formatCreateLabel,\n    formatCreateLabel = _ref$formatCreateLabe === void 0 ? builtins.formatCreateLabel : _ref$formatCreateLabe,\n    _ref$isValidNewOption = _ref.isValidNewOption,\n    isValidNewOption = _ref$isValidNewOption === void 0 ? builtins.isValidNewOption : _ref$isValidNewOption,\n    _ref$getNewOptionData = _ref.getNewOptionData,\n    getNewOptionData = _ref$getNewOptionData === void 0 ? builtins.getNewOptionData : _ref$getNewOptionData,\n    onCreateOption = _ref.onCreateOption,\n    _ref$options = _ref.options,\n    propsOptions = _ref$options === void 0 ? [] : _ref$options,\n    propsOnChange = _ref.onChange,\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\n  var _restSelectProps$getO = restSelectProps.getOptionValue,\n    getOptionValue$1 = _restSelectProps$getO === void 0 ? getOptionValue : _restSelectProps$getO,\n    _restSelectProps$getO2 = restSelectProps.getOptionLabel,\n    getOptionLabel$1 = _restSelectProps$getO2 === void 0 ? getOptionLabel : _restSelectProps$getO2,\n    inputValue = restSelectProps.inputValue,\n    isLoading = restSelectProps.isLoading,\n    isMulti = restSelectProps.isMulti,\n    value = restSelectProps.value,\n    name = restSelectProps.name;\n  var newOption = useMemo(function () {\n    return isValidNewOption(inputValue, cleanValue(value), propsOptions, {\n      getOptionValue: getOptionValue$1,\n      getOptionLabel: getOptionLabel$1\n    }) ? getNewOptionData(inputValue, formatCreateLabel(inputValue)) : undefined;\n  }, [formatCreateLabel, getNewOptionData, getOptionLabel$1, getOptionValue$1, inputValue, isValidNewOption, propsOptions, value]);\n  var options = useMemo(function () {\n    return (allowCreateWhileLoading || !isLoading) && newOption ? createOptionPosition === 'first' ? [newOption].concat(_toConsumableArray(propsOptions)) : [].concat(_toConsumableArray(propsOptions), [newOption]) : propsOptions;\n  }, [allowCreateWhileLoading, createOptionPosition, isLoading, newOption, propsOptions]);\n  var onChange = useCallback(function (newValue, actionMeta) {\n    if (actionMeta.action !== 'select-option') {\n      return propsOnChange(newValue, actionMeta);\n    }\n    var valueArray = Array.isArray(newValue) ? newValue : [newValue];\n    if (valueArray[valueArray.length - 1] === newOption) {\n      if (onCreateOption) onCreateOption(inputValue);else {\n        var newOptionData = getNewOptionData(inputValue, inputValue);\n        var newActionMeta = {\n          action: 'create-option',\n          name: name,\n          option: newOptionData\n        };\n        propsOnChange(valueTernary(isMulti, [].concat(_toConsumableArray(cleanValue(value)), [newOptionData]), newOptionData), newActionMeta);\n      }\n      return;\n    }\n    propsOnChange(newValue, actionMeta);\n  }, [getNewOptionData, inputValue, isMulti, name, newOption, onCreateOption, propsOnChange, value]);\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\n    options: options,\n    onChange: onChange\n  });\n}\n\nexport { useCreatable as u };\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport * as UserActions from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nexport function activateMfa(code) {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.updateUserMfa(currentUserId, true, code));\r\n    };\r\n}\r\n\r\nexport function deactivateMfa() {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.updateUserMfa(currentUserId, false));\r\n    };\r\n}\r\n\r\nexport function generateMfaSecret() {\r\n    return (dispatch, getState) => {\r\n        const currentUserId = getCurrentUserId(getState());\r\n\r\n        return dispatch(UserActions.generateMfaSecret(currentUserId));\r\n    };\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {ChromePicker} from 'react-color';\r\nimport type {ColorResult} from 'react-color';\r\nimport tinycolor from 'tinycolor2';\r\n\r\ntype Props = {\r\n    id: string;\r\n    onChange: (color: string) => void;\r\n    value: string;\r\n    isDisabled?: boolean;\r\n}\r\n\r\ntype State = {\r\n    focused: boolean;\r\n    isOpened: boolean;\r\n    value: string;\r\n}\r\n\r\nexport default class ColorInput extends React.PureComponent<Props, State> {\r\n    private colorPicker: React.RefObject<HTMLDivElement>;\r\n    private colorInput: React.RefObject<HTMLInputElement>;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.colorPicker = React.createRef();\r\n        this.colorInput = React.createRef();\r\n\r\n        this.state = {\r\n            focused: false,\r\n            isOpened: false,\r\n            value: props.value,\r\n        };\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (!state.focused && props.value !== state.value) {\r\n            return {\r\n                value: props.value,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public componentDidUpdate(prevProps: Props, prevState: State) {\r\n        const {isOpened: prevIsOpened} = prevState;\r\n        const {isOpened} = this.state;\r\n\r\n        if (isOpened !== prevIsOpened) {\r\n            if (isOpened) {\r\n                document.addEventListener('click', this.checkClick, {capture: true});\r\n            } else {\r\n                document.removeEventListener('click', this.checkClick);\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkClick = (e: MouseEvent): void => {\r\n        if (!this.colorPicker.current || !this.colorPicker.current.contains(e.target as Element)) {\r\n            this.setState({isOpened: false});\r\n        }\r\n    };\r\n\r\n    private togglePicker = () => {\r\n        if (!this.state.isOpened && this.colorInput.current) {\r\n            this.colorInput.current.focus();\r\n        }\r\n        this.setState({isOpened: !this.state.isOpened});\r\n    };\r\n\r\n    public handleColorChange = (newColorData: ColorResult) => {\r\n        this.setState({focused: false});\r\n        this.props.onChange(newColorData.hex);\r\n    };\r\n\r\n    private onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n        }\r\n\r\n        this.setState({value});\r\n    };\r\n\r\n    private onFocus = (event: React.FocusEvent<HTMLInputElement>): void => {\r\n        this.setState({\r\n            focused: true,\r\n        });\r\n\r\n        if (event.target) {\r\n            event.target.setSelectionRange(1, event.target.value.length);\r\n        }\r\n    };\r\n\r\n    private onBlur = () => {\r\n        const value = this.state.value;\r\n\r\n        const color = tinycolor(value);\r\n        const normalizedColor = '#' + color.toHex();\r\n\r\n        if (color.isValid()) {\r\n            this.props.onChange(normalizedColor);\r\n\r\n            this.setState({\r\n                value: normalizedColor,\r\n            });\r\n        } else {\r\n            this.setState({\r\n                value: this.props.value,\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            focused: false,\r\n        });\r\n    };\r\n\r\n    private onKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        // open picker on enter or space\r\n        if (event.key === 'Enter' || event.key === ' ') {\r\n            this.togglePicker();\r\n        }\r\n    };\r\n\r\n    public render() {\r\n        const {id} = this.props;\r\n        const {isOpened, value} = this.state;\r\n\r\n        return (\r\n            <div className='color-input input-group'>\r\n                <input\r\n                    id={`${id}-inputColorValue`}\r\n                    ref={this.colorInput}\r\n                    className='form-control'\r\n                    type='text'\r\n                    value={value}\r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                    onFocus={this.onFocus}\r\n                    onKeyDown={this.onKeyDown}\r\n                    maxLength={7}\r\n                    disabled={this.props.isDisabled}\r\n                    data-testid='color-inputColorValue'\r\n\r\n                />\r\n                {!this.props.isDisabled &&\r\n                    <span\r\n                        id={`${id}-squareColorIcon`}\r\n                        className='input-group-addon color-pad'\r\n                        onClick={this.togglePicker}\r\n                    >\r\n                        <i\r\n                            id={`${id}-squareColorIconValue`}\r\n                            className='color-icon'\r\n                            style={{\r\n                                backgroundColor: value,\r\n                            }}\r\n                        />\r\n                    </span>\r\n                }\r\n                {isOpened && (\r\n                    <div\r\n                        ref={this.colorPicker}\r\n                        className='color-popover'\r\n                        id={`${id}-ChromePickerModal`}\r\n                    >\r\n                        <ChromePicker\r\n                            color={value}\r\n                            onChange={this.handleColorChange}\r\n                            disableAlpha={true}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\nexport type Tab = {\r\n    icon: string | {url: string};\r\n    iconTitle: string;\r\n    name: string;\r\n    uiName: string;\r\n    newGroup?: boolean;\r\n    display?: boolean; // Controls whether the tab is displayed, defaults to true\r\n}\r\n\r\nexport type Props = {\r\n    activeTab?: string;\r\n    tabs: Tab[];\r\n    pluginTabs?: Tab[];\r\n    updateTab: (name: string) => void;\r\n    isMobileView: boolean;\r\n};\r\n\r\nexport default class SettingsSidebar extends React.PureComponent<Props> {\r\n    buttonRefs: Map<string, HTMLButtonElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.buttonRefs = new Map();\r\n    }\r\n\r\n    // Get all visible tabs in the correct order\r\n    private getVisibleTabs(): Tab[] {\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n        const visiblePluginTabs = this.props.pluginTabs?.filter((tab) => tab.display !== false) || [];\r\n        return [...visibleTabs, ...visiblePluginTabs];\r\n    }\r\n\r\n    public handleClick = (tab: Tab, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        this.props.updateTab(tab.name);\r\n        (e.target as Element).closest('.settings-modal')?.classList.add('display--content');\r\n    };\r\n\r\n    public handleKeyDown = (tab: Tab, e: React.KeyboardEvent) => {\r\n        // Only handle UP and DOWN arrow keys\r\n        if (!isKeyPressed(e, Constants.KeyCodes.UP) && !isKeyPressed(e, Constants.KeyCodes.DOWN)) {\r\n            return;\r\n        }\r\n\r\n        // Prevent scrolling\r\n        e.preventDefault();\r\n\r\n        // Get all visible tabs\r\n        const visibleTabs = this.getVisibleTabs();\r\n\r\n        // If no tabs are visible, do nothing\r\n        if (visibleTabs.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Find the current tab's position in the visible tabs\r\n        const currentIndex = visibleTabs.findIndex((t) => t.name === tab.name);\r\n\r\n        // If tab not found in visible tabs, do nothing\r\n        if (currentIndex === -1) {\r\n            return;\r\n        }\r\n\r\n        let nextIndex: number;\r\n\r\n        // Determine which tab to focus based on the key pressed\r\n        if (isKeyPressed(e, Constants.KeyCodes.UP)) {\r\n            // UP arrow key - move to previous tab or wrap to last\r\n            nextIndex = currentIndex > 0 ? currentIndex - 1 : visibleTabs.length - 1;\r\n        } else {\r\n            // DOWN arrow key - move to next tab or wrap to first\r\n            nextIndex = currentIndex < visibleTabs.length - 1 ? currentIndex + 1 : 0;\r\n        }\r\n\r\n        // Get the target tab\r\n        const targetTab = visibleTabs[nextIndex];\r\n\r\n        // Update the active tab\r\n        this.props.updateTab(targetTab.name);\r\n\r\n        // Focus the target tab button directly\r\n        const targetButton = this.buttonRefs.get(targetTab.name);\r\n        if (targetButton) {\r\n            // Use direct focus instead of a11yFocus to ensure Cypress tests can detect the focus change\r\n            targetButton.focus();\r\n        }\r\n    };\r\n\r\n    private renderTab(tab: Tab) {\r\n        const key = `${tab.name}_li`;\r\n        const isActive = this.props.activeTab === tab.name;\r\n\r\n        let icon;\r\n        if (typeof tab.icon === 'string') {\r\n            icon = (\r\n                <i\r\n                    className={tab.icon}\r\n                    title={tab.iconTitle}\r\n                />\r\n            );\r\n        } else {\r\n            icon = (\r\n                <img\r\n                    src={tab.icon.url}\r\n                    alt={tab.iconTitle}\r\n                    className='icon'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <React.Fragment key={key}>\r\n                {tab.newGroup && <hr/>}\r\n                <button\r\n                    data-testid={`${tab.name}-tab-button`}\r\n                    ref={(element: HTMLButtonElement) => {\r\n                        if (element) {\r\n                            this.buttonRefs.set(tab.name, element);\r\n                        } else {\r\n                            this.buttonRefs.delete(tab.name);\r\n                        }\r\n                    }}\r\n                    id={`${tab.name}Button`}\r\n                    className={classNames('cursor--pointer style--none nav-pills__tab', {active: isActive})}\r\n                    onClick={this.handleClick.bind(null, tab)}\r\n                    onKeyDown={this.handleKeyDown.bind(null, tab)}\r\n                    aria-label={tab.uiName.toLowerCase()}\r\n                    role='tab'\r\n                    aria-selected={isActive}\r\n                    tabIndex={!isActive && !this.props.isMobileView ? -1 : 0}\r\n                    aria-controls={`${tab.name}Settings`}\r\n                >\r\n                    {icon}\r\n                    {tab.uiName}\r\n                </button>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    public render() {\r\n        // Filter regular tabs and plugin tabs separately for rendering\r\n        const visibleTabs = this.props.tabs.filter((tab) => tab.display !== false);\r\n\r\n        // Map regular tabs\r\n        const tabList = visibleTabs.map((tab) => this.renderTab(tab));\r\n\r\n        let pluginTabList: React.ReactNode;\r\n        if (this.props.pluginTabs?.length) {\r\n            const visiblePluginTabs = this.props.pluginTabs.filter((tab) => tab.display !== false);\r\n            if (visiblePluginTabs.length) {\r\n                pluginTabList = (\r\n                    <>\r\n                        <hr/>\r\n                        <div\r\n                            role='group'\r\n                            aria-labelledby='userSettingsModal.pluginPreferences.header'\r\n                        >\r\n                            <div\r\n                                key={'plugin preferences heading'}\r\n                                role='heading'\r\n                                className={'header'}\r\n                                aria-level={3}\r\n                                id='userSettingsModal_pluginPreferences_header'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id={'userSettingsModal.pluginPreferences.header'}\r\n                                    defaultMessage={'PLUGIN PREFERENCES'}\r\n                                />\r\n                            </div>\r\n                            {visiblePluginTabs.map((tab) => this.renderTab(tab))}\r\n                        </div>\r\n                    </>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='tabList'\r\n                className='nav nav-pills nav-stacked'\r\n                role='tablist'\r\n                aria-orientation='vertical'\r\n            >\r\n                <div role='group'>\r\n                    {tabList}\r\n                </div>\r\n                {pluginTabList}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport SettingsSidebar from './settings_sidebar';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SettingsSidebar);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {ReactNode, RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {AdvancedSections} from 'utils/constants';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    joinLeave: string;\r\n    onUpdateSection: (section?: string) => void;\r\n    renderOnOffLabel: (label: string) => ReactNode;\r\n    actions: {\r\n        savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    joinLeaveState: string;\r\n    isSaving?: boolean;\r\n    serverError?: string;\r\n}\r\n\r\nexport default class JoinLeaveSection extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            joinLeaveState: props.joinLeave,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    public handleOnChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        const value = e.currentTarget.value;\r\n\r\n        this.setState({joinLeaveState: value});\r\n        a11yFocus(e.currentTarget);\r\n    };\r\n\r\n    public handleUpdateSection = (section?: string): void => {\r\n        if (!section) {\r\n            this.setState({joinLeaveState: this.props.joinLeave});\r\n        }\r\n\r\n        this.props.onUpdateSection(section);\r\n    };\r\n\r\n    public handleSubmit = (): void => {\r\n        const {actions, userId, onUpdateSection} = this.props;\r\n        const joinLeavePreference = {category: Preferences.CATEGORY_ADVANCED_SETTINGS, user_id: userId, name: Preferences.ADVANCED_FILTER_JOIN_LEAVE, value: this.state.joinLeaveState};\r\n        actions.savePreferences(userId, [joinLeavePreference]);\r\n\r\n        onUpdateSection();\r\n    };\r\n\r\n    public render(): React.ReactNode {\r\n        const {joinLeaveState} = this.state;\r\n        if (this.props.active) {\r\n            return (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.joinLeaveTitle'\r\n                            defaultMessage='Enable Join/Leave Messages'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='joinLeaveSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.joinLeaveTitle'\r\n                                    defaultMessage='Enable Join/Leave Messages'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='joinLeaveOn'\r\n                                        type='radio'\r\n                                        value={'true'}\r\n                                        name={AdvancedSections.JOIN_LEAVE}\r\n                                        checked={joinLeaveState === 'true'}\r\n                                        onChange={this.handleOnChange}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='joinLeaveOff'\r\n                                        type='radio'\r\n                                        value={'false'}\r\n                                        name={AdvancedSections.JOIN_LEAVE}\r\n                                        checked={joinLeaveState === 'false'}\r\n                                        onChange={this.handleOnChange}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.joinLeaveDesc'\r\n                                    defaultMessage='When \"On\", System Messages saying a user has joined or left a channel will be visible. When \"Off\", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    setting={AdvancedSections.JOIN_LEAVE}\r\n                    submit={this.handleSubmit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMin\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.joinLeaveTitle'\r\n                        defaultMessage='Enable Join/Leave Messages'\r\n                    />\r\n                }\r\n                describe={this.props.renderOnOffLabel(joinLeaveState!)}\r\n                section={AdvancedSections.JOIN_LEAVE}\r\n                updateSection={this.handleUpdateSection}\r\n                ref={this.minRef}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {get} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './join_leave_section';\r\nimport JoinLeaveSection from './join_leave_section';\r\n\r\nexport function mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const config = getConfig(state);\r\n    const enableJoinLeaveMessage = config.EnableJoinLeaveMessageByDefault === 'true';\r\n    const userPreference = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        joinLeave: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, Preferences.ADVANCED_FILTER_JOIN_LEAVE, enableJoinLeaveMessage.toString(), userPreference),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinLeaveSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState, useRef, useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {AdvancedSections} from 'utils/constants';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n}\r\n\r\ntype Props = PropsFromRedux & OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    onUpdateSection: (section?: string) => void;\r\n};\r\n\r\nexport default function PerformanceDebuggingSection(props: Props) {\r\n    const minRef = useRef<SettingItemMinComponent>(null);\r\n    const prevActiveRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (prevActiveRef.current && !props.active && props.areAllSectionsInactive) {\r\n            minRef.current?.focus();\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        prevActiveRef.current = props.active;\r\n    }, [props.active]);\r\n\r\n    if (!props.performanceDebuggingEnabled) {\r\n        return null;\r\n    }\r\n\r\n    let settings;\r\n    if (props.active) {\r\n        settings = <PerformanceDebuggingSectionExpanded {...props}/>;\r\n    } else {\r\n        settings = (\r\n            <PerformanceDebuggingSectionCollapsed\r\n                {...props}\r\n                ref={minRef}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {settings}\r\n            <div className='divider-light'/>\r\n        </>\r\n    );\r\n}\r\n\r\nconst PerformanceDebuggingSectionCollapsed = React.forwardRef<SettingItemMinComponent, Props>((props, ref) => {\r\n    let settingsEnabled = 0;\r\n\r\n    if (props.disableClientPlugins) {\r\n        settingsEnabled += 1;\r\n    }\r\n    if (props.disableTypingMessages) {\r\n        settingsEnabled += 1;\r\n    }\r\n\r\n    let description;\r\n    if (settingsEnabled === 0) {\r\n        description = (\r\n            <FormattedMessage\r\n                id='user.settings.advance.performance.noneEnabled'\r\n                defaultMessage='No settings enabled'\r\n            />\r\n        );\r\n    } else {\r\n        description = (\r\n            <FormattedMessage\r\n                id='user.settings.advance.performance.settingsEnabled'\r\n                defaultMessage='{count, number} {count, plural, one {setting} other {settings}} enabled'\r\n                values={{count: settingsEnabled}}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.advance.performance.title'\r\n                    defaultMessage='Performance Debugging'\r\n                />\r\n            }\r\n            describe={description}\r\n            section={AdvancedSections.PERFORMANCE_DEBUGGING}\r\n            updateSection={props.onUpdateSection}\r\n            ref={ref}\r\n        />\r\n    );\r\n});\r\n\r\nfunction PerformanceDebuggingSectionExpanded(props: Props) {\r\n    const [disableClientPlugins, setDisableClientPlugins] = useState(props.disableClientPlugins);\r\n    const [disableTypingMessages, setDisableTypingMessages] = useState(props.disableTypingMessages);\r\n\r\n    const handleSubmit = useCallback(() => {\r\n        if (!props.userId) {\r\n            return;\r\n        }\r\n\r\n        const preferences = [];\r\n\r\n        if (disableClientPlugins !== props.disableClientPlugins) {\r\n            preferences.push({\r\n                user_id: props.userId,\r\n                category: Preferences.CATEGORY_PERFORMANCE_DEBUGGING,\r\n                name: Preferences.NAME_DISABLE_CLIENT_PLUGINS,\r\n                value: disableClientPlugins.toString(),\r\n            });\r\n        }\r\n        if (disableTypingMessages !== props.disableTypingMessages) {\r\n            preferences.push({\r\n                user_id: props.userId,\r\n                category: Preferences.CATEGORY_PERFORMANCE_DEBUGGING,\r\n                name: Preferences.NAME_DISABLE_TYPING_MESSAGES,\r\n                value: disableTypingMessages.toString(),\r\n            });\r\n        }\r\n\r\n        if (preferences.length !== 0 && props.userId) {\r\n            props.savePreferences(props.userId, preferences);\r\n        }\r\n\r\n        props.onUpdateSection('');\r\n    }, [\r\n        props.userId,\r\n        props.onUpdateSection,\r\n        props.savePreferences,\r\n        disableClientPlugins,\r\n        disableTypingMessages,\r\n    ]);\r\n\r\n    return (\r\n        <SettingItemMax\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.advance.performance.title'\r\n                    defaultMessage='Performance Debugging'\r\n                />\r\n            }\r\n            inputs={[\r\n                <fieldset key='settings'>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={disableClientPlugins}\r\n                                onChange={(e) => {\r\n                                    setDisableClientPlugins(e.target.checked);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.performance.disableClientPlugins'\r\n                                defaultMessage='Disable Client-side Plugins'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='checkbox'>\r\n                        <label>\r\n                            <input\r\n                                type='checkbox'\r\n                                checked={disableTypingMessages}\r\n                                onChange={(e) => {\r\n                                    setDisableTypingMessages(e.target.checked);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.performance.disableTypingMessages'\r\n                                defaultMessage='Disable \"User is typing...\" messages'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                    <div className='mt-5'>\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.performance.info1'\r\n                            defaultMessage=\"You may enable these settings temporarily to help isolate performance issues while debugging. We don't recommend leaving these settings enabled for an extended period of time as they can negatively impact your user experience.\"\r\n                        />\r\n                        <br/>\r\n                        <br/>\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.performance.info2'\r\n                            defaultMessage='You may need to refresh the page before these settings take effect.'\r\n                        />\r\n                    </div>\r\n                </fieldset>,\r\n            ]}\r\n            submit={handleSubmit}\r\n            updateSection={props.onUpdateSection}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport type {ConnectedProps} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport {isPerformanceDebuggingEnabled} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool, getUserPreferences} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './performance_debugging_section';\r\nimport PerformanceDebuggingSection from './performance_debugging_section';\r\n\r\nfunction mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const userPreferences = props.adminMode && props.userId ? getUserPreferences(state, props.userId) : undefined;\r\n\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        disableClientPlugins: getBool(state, Preferences.CATEGORY_PERFORMANCE_DEBUGGING, Preferences.NAME_DISABLE_CLIENT_PLUGINS, undefined, userPreferences),\r\n        disableTypingMessages: getBool(state, Preferences.CATEGORY_PERFORMANCE_DEBUGGING, Preferences.NAME_DISABLE_TYPING_MESSAGES, undefined, userPreferences),\r\n        performanceDebuggingEnabled: isPerformanceDebuggingEnabled(state),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(PerformanceDebuggingSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React from 'react';\r\nimport type {ReactNode} from 'react';\r\nimport {FormattedMessage, defineMessages} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {emitUserLoggedOutEvent} from 'actions/global_actions';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport Constants, {AdvancedSections, Preferences} from 'utils/constants';\r\nimport {isMac} from 'utils/user_agent';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nimport JoinLeaveSection from './join_leave_section';\r\nimport PerformanceDebuggingSection from './performance_debugging_section';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nimport type {PropsFromRedux} from './index';\r\n\r\ntype Settings = {\r\n    [key: string]: string | undefined;\r\n    send_on_ctrl_enter: Props['sendOnCtrlEnter'];\r\n    code_block_ctrl_enter: Props['codeBlockOnCtrlEnter'];\r\n    formatting: Props['formatting'];\r\n    join_leave: Props['joinLeave'];\r\n    sync_drafts: Props['syncDrafts'];\r\n};\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    user: UserProfile;\r\n    userPreferences?: PreferencesType;\r\n    updateSection: (section?: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n}\r\n\r\nexport type Props = OwnProps & PropsFromRedux;\r\n\r\ntype State = {\r\n    settings: Settings;\r\n    isSaving: boolean;\r\n    showDeactivateAccountModal: boolean;\r\n    serverError: string;\r\n}\r\n\r\nexport default class AdvancedSettingsDisplay extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = this.getStateFromProps();\r\n    }\r\n\r\n    getStateFromProps = (): State => {\r\n        const settings: Settings = {\r\n            send_on_ctrl_enter: this.props.sendOnCtrlEnter,\r\n            code_block_ctrl_enter: this.props.codeBlockOnCtrlEnter,\r\n            formatting: this.props.formatting,\r\n            join_leave: this.props.joinLeave,\r\n            sync_drafts: this.props.syncDrafts,\r\n            [Preferences.UNREAD_SCROLL_POSITION]: this.props.unreadScrollPosition,\r\n        };\r\n\r\n        const isSaving = false;\r\n\r\n        const showDeactivateAccountModal = false;\r\n\r\n        return {\r\n            settings,\r\n            isSaving,\r\n            showDeactivateAccountModal,\r\n            serverError: '',\r\n        };\r\n    };\r\n\r\n    updateSetting = (setting: string, value: string, e?: React.ChangeEvent): void => {\r\n        const settings = this.state.settings;\r\n        settings[setting] = value;\r\n\r\n        this.setState((prevState) => ({...prevState, ...settings}));\r\n        a11yFocus(e?.currentTarget as HTMLElement);\r\n    };\r\n\r\n    handleSubmit = async (settings: string[]): Promise<void> => {\r\n        if (!this.props.user) {\r\n            return;\r\n        }\r\n\r\n        const preferences: PreferenceType[] = [];\r\n        const {actions, user} = this.props;\r\n        const userId = user.id;\r\n\r\n        // this should be refactored so we can actually be certain about what type everything is\r\n        (Array.isArray(settings) ? settings : [settings]).forEach((setting) => {\r\n            preferences.push({\r\n                user_id: userId,\r\n                category: Constants.Preferences.CATEGORY_ADVANCED_SETTINGS,\r\n                name: setting,\r\n                value: this.state.settings[setting]!,\r\n            });\r\n        });\r\n\r\n        this.setState({isSaving: true});\r\n        await actions.savePreferences(userId, preferences);\r\n\r\n        this.handleUpdateSection('');\r\n    };\r\n\r\n    handleDeactivateAccountSubmit = async (): Promise<void> => {\r\n        const userId = this.props.user.id;\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        this.props.actions.updateUserActive(userId, false).\r\n            then(({error}) => {\r\n                if (error) {\r\n                    this.setState({serverError: error.message});\r\n                }\r\n            });\r\n\r\n        const {data, error} = await this.props.actions.revokeAllSessionsForUser(userId);\r\n        if (data) {\r\n            emitUserLoggedOutEvent();\r\n        } else if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    handleShowDeactivateAccountModal = (): void => {\r\n        this.setState({\r\n            showDeactivateAccountModal: true,\r\n        });\r\n    };\r\n\r\n    handleHideDeactivateAccountModal = (): void => {\r\n        this.setState({\r\n            showDeactivateAccountModal: false,\r\n        });\r\n    };\r\n\r\n    handleUpdateSection = (section?: string): void => {\r\n        if (!section) {\r\n            this.setState(this.getStateFromProps());\r\n        }\r\n        this.setState({isSaving: false});\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    // This function changes ctrl to cmd when OS is mac\r\n    getCtrlSendText = () => {\r\n        const description = defineMessages({\r\n            default: {\r\n                id: 'user.settings.advance.sendDesc',\r\n                defaultMessage: 'When enabled, CTRL + ENTER will send the message and ENTER inserts a new line.',\r\n            },\r\n            mac: {\r\n                id: 'user.settings.advance.sendDesc.mac',\r\n                defaultMessage: 'When enabled,  + ENTER will send the message and ENTER inserts a new line.',\r\n            },\r\n        });\r\n        const title = defineMessages({\r\n            default: {\r\n                id: 'user.settings.advance.sendTitle',\r\n                defaultMessage: 'Send Messages on CTRL+ENTER',\r\n            },\r\n            mac: {\r\n                id: 'user.settings.advance.sendTitle.mac',\r\n                defaultMessage: 'Send Messages on +ENTER',\r\n            },\r\n        });\r\n        if (isMac()) {\r\n            return {\r\n                ctrlSendTitle: title.mac,\r\n                ctrlSendDesc: description.mac,\r\n            };\r\n        }\r\n        return {\r\n            ctrlSendTitle: title.default,\r\n            ctrlSendDesc: description.default,\r\n        };\r\n    };\r\n\r\n    renderOnOffLabel(enabled: string): JSX.Element {\r\n        if (enabled === 'false') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.off'\r\n                    defaultMessage='Off'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.on'\r\n                defaultMessage='On'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderUnreadScrollPositionLabel(option?: string): JSX.Element {\r\n        if (option === Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.startFromLeftOff'\r\n                    defaultMessage='Start me where I left off'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.startFromNewest'\r\n                defaultMessage='Start me at the newest message'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderCtrlEnterLabel(): JSX.Element {\r\n        const ctrlEnter = this.state.settings.send_on_ctrl_enter;\r\n        const codeBlockCtrlEnter = this.state.settings.code_block_ctrl_enter;\r\n        if (ctrlEnter === 'false' && codeBlockCtrlEnter === 'false') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.off'\r\n                    defaultMessage='Off'\r\n                />\r\n            );\r\n        } else if (ctrlEnter === 'true' && codeBlockCtrlEnter === 'true') {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.onForAllMessages'\r\n                    defaultMessage='On for all messages'\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.advance.onForCode'\r\n                defaultMessage='On only for code blocks starting with ```'\r\n            />\r\n        );\r\n    }\r\n\r\n    renderFormattingSection = () => {\r\n        const active = this.props.activeSection === 'formatting';\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.formattingTitle'\r\n                            defaultMessage='Enable Post Formatting'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='formattingSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.formattingTitle'\r\n                                    defaultMessage='Enable Post Formatting'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='postFormattingOn'\r\n                                        type='radio'\r\n                                        name='formatting'\r\n                                        checked={this.state.settings.formatting !== 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'formatting', 'true')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='postFormattingOff'\r\n                                        type='radio'\r\n                                        name='formatting'\r\n                                        checked={this.state.settings.formatting === 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'formatting', 'false')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.formattingDesc'\r\n                                    defaultMessage='If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    submit={this.handleSubmit.bind(this, ['formatting'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.formattingTitle'\r\n                        defaultMessage='Enable Post Formatting'\r\n                    />\r\n                }\r\n                describe={this.renderOnOffLabel(this.state.settings.formatting)}\r\n                section={'formatting'}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderUnreadScrollPositionSection = () => {\r\n        const active = this.props.activeSection === Preferences.UNREAD_SCROLL_POSITION;\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.unreadScrollPositionTitle'\r\n                            defaultMessage='Scroll position when viewing an unread channel'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='unreadScrollPositionSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.unreadScrollPositionTitle'\r\n                                    defaultMessage='Scroll position when viewing an unread channel'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='unreadPositionStartFromLeftOff'\r\n                                        type='radio'\r\n                                        name='unreadScrollPosition'\r\n                                        checked={this.state.settings.unread_scroll_position === Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT}\r\n                                        onChange={this.updateSetting.bind(this, Preferences.UNREAD_SCROLL_POSITION, Preferences.UNREAD_SCROLL_POSITION_START_FROM_LEFT)}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.startFromLeftOff'\r\n                                        defaultMessage='Start me where I left off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='unreadPositionStartFromNewest'\r\n                                        type='radio'\r\n                                        name='unreadScrollPosition'\r\n                                        checked={this.state.settings.unread_scroll_position === Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST}\r\n                                        onChange={this.updateSetting.bind(this, Preferences.UNREAD_SCROLL_POSITION, Preferences.UNREAD_SCROLL_POSITION_START_FROM_NEWEST)}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.startFromNewest'\r\n                                        defaultMessage='Start me at the newest message'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.unreadScrollPositionDesc'\r\n                                    defaultMessage='Choose your scroll position when you view an unread channel. Channels will always be marked as read when viewed.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    submit={this.handleSubmit.bind(this, [Preferences.UNREAD_SCROLL_POSITION])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.unreadScrollPositionTitle'\r\n                        defaultMessage='Scroll position when viewing an unread channel'\r\n                    />\r\n                }\r\n                describe={this.renderUnreadScrollPositionLabel(this.state.settings[Preferences.UNREAD_SCROLL_POSITION])}\r\n                section={Preferences.UNREAD_SCROLL_POSITION}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderSyncDraftsSection = () => {\r\n        const active = this.props.activeSection === AdvancedSections.SYNC_DRAFTS;\r\n        let max = null;\r\n        if (active) {\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.syncDrafts.Title'\r\n                            defaultMessage='Allow message drafts to sync with the server'\r\n                        />\r\n                    }\r\n                    inputs={[\r\n                        <fieldset key='syncDraftsSetting'>\r\n                            <legend className='form-legend hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.syncDrafts.Title'\r\n                                    defaultMessage='Allow message drafts to sync with the server'\r\n                                />\r\n                            </legend>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='syncDraftsOn'\r\n                                        type='radio'\r\n                                        name='syncDrafts'\r\n                                        checked={this.state.settings.sync_drafts !== 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'sync_drafts', 'true')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.on'\r\n                                        defaultMessage='On'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='radio'>\r\n                                <label>\r\n                                    <input\r\n                                        id='syncDraftsOff'\r\n                                        type='radio'\r\n                                        name='syncDrafts'\r\n                                        checked={this.state.settings.sync_drafts === 'false'}\r\n                                        onChange={this.updateSetting.bind(this, 'sync_drafts', 'false')}\r\n                                    />\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.off'\r\n                                        defaultMessage='Off'\r\n                                    />\r\n                                </label>\r\n                                <br/>\r\n                            </div>\r\n                            <div className='mt-5'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.advance.syncDrafts.Desc'\r\n                                    defaultMessage='When enabled, message drafts are synced with the server so they can be accessed from any device. When disabled, message drafts are only saved locally on the device where they are composed.'\r\n                                />\r\n                            </div>\r\n                        </fieldset>,\r\n                    ]}\r\n                    setting={AdvancedSections.SYNC_DRAFTS}\r\n                    submit={this.handleSubmit.bind(this, ['sync_drafts'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.advance.syncDrafts.Title'\r\n                        defaultMessage='Allow message drafts to sync with the server'\r\n                    />\r\n                }\r\n                describe={this.renderOnOffLabel(this.state.settings.sync_drafts)}\r\n                section={AdvancedSections.SYNC_DRAFTS}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    renderCtrlSendSection = () => {\r\n        const active = this.props.activeSection === 'advancedCtrlSend';\r\n        const serverError = this.state.serverError || null;\r\n        const {ctrlSendTitle, ctrlSendDesc} = this.getCtrlSendText();\r\n        let max = null;\r\n        if (active) {\r\n            const ctrlSendActive = [\r\n                this.state.settings.send_on_ctrl_enter === 'true',\r\n                this.state.settings.send_on_ctrl_enter === 'false' && this.state.settings.code_block_ctrl_enter === 'true',\r\n                this.state.settings.send_on_ctrl_enter === 'false' && this.state.settings.code_block_ctrl_enter === 'false',\r\n            ];\r\n\r\n            const inputs = [\r\n                <fieldset key='ctrlSendSetting'>\r\n                    <legend className='form-legend hidden-label'>\r\n                        <FormattedMessage {...ctrlSendTitle}/>\r\n                    </legend>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOn'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[0]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'true');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'true');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.onForAllMessages'\r\n                                defaultMessage='On for all messages'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOnForCode'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[1]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'false');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'true');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.onForCode'\r\n                                defaultMessage='On only for code blocks starting with ```'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id='ctrlSendOff'\r\n                                type='radio'\r\n                                name='sendOnCtrlEnter'\r\n                                checked={ctrlSendActive[2]}\r\n                                onChange={(e) => {\r\n                                    this.updateSetting('send_on_ctrl_enter', 'false');\r\n                                    this.updateSetting('code_block_ctrl_enter', 'false');\r\n                                    a11yFocus(e.currentTarget);\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.off'\r\n                                defaultMessage='Off'\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div>\r\n                        <br/>\r\n                        <FormattedMessage {...ctrlSendDesc}/>\r\n                    </div>\r\n                </fieldset>,\r\n            ];\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage {...ctrlSendTitle}/>\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={this.handleSubmit.bind(this, ['send_on_ctrl_enter', 'code_block_ctrl_enter'])}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage {...ctrlSendTitle}/>\r\n                }\r\n                describe={this.renderCtrlEnterLabel()}\r\n                section={'advancedCtrlSend'}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const ctrlSendSection = this.renderCtrlSendSection();\r\n\r\n        const formattingSection = this.renderFormattingSection();\r\n        let formattingSectionDivider = null;\r\n        if (formattingSection) {\r\n            formattingSectionDivider = <div className='divider-light'/>;\r\n        }\r\n\r\n        let deactivateAccountSection: ReactNode = '';\r\n        let makeConfirmationModal: ReactNode = '';\r\n\r\n        if (this.props.user.auth_service === '' && this.props.enableUserDeactivation && !this.props.adminMode) {\r\n            const active = this.props.activeSection === 'deactivateAccount';\r\n            let max = null;\r\n            if (active) {\r\n                max = (\r\n                    <SettingItemMax\r\n                        title={\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.deactivateAccountTitle'\r\n                                defaultMessage='Deactivate Account'\r\n                            />\r\n                        }\r\n                        inputs={[\r\n                            <div key='formattingSetting'>\r\n                                <div>\r\n                                    <br/>\r\n                                    <FormattedMessage\r\n                                        id='user.settings.advance.deactivateDesc'\r\n                                        defaultMessage='Deactivating your account removes your ability to log in to this server and disables all email and mobile notifications. To reactivate your account, contact your System Administrator.'\r\n                                    />\r\n                                </div>\r\n                            </div>,\r\n                        ]}\r\n                        saveButtonText={'Deactivate'}\r\n                        saveButtonClassName={'btn-danger'}\r\n                        setting={'deactivateAccount'}\r\n                        submit={this.handleShowDeactivateAccountModal}\r\n                        saving={this.state.isSaving}\r\n                        serverError={this.state.serverError}\r\n                        updateSection={this.handleUpdateSection}\r\n                    />\r\n                );\r\n            }\r\n            deactivateAccountSection = (\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.deactivateAccountTitle'\r\n                            defaultMessage='Deactivate Account'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.deactivateDescShort'\r\n                            defaultMessage=\"Click 'Edit' to deactivate your account\"\r\n                        />\r\n                    }\r\n                    section={'deactivateAccount'}\r\n                    updateSection={this.handleUpdateSection}\r\n                    max={max}\r\n                />\r\n            );\r\n\r\n            const confirmButtonClass = 'btn btn-danger';\r\n            const deactivateMemberButton = (\r\n                <FormattedMessage\r\n                    id='user.settings.advance.deactivate_member_modal.deactivateButton'\r\n                    defaultMessage='Yes, deactivate my account'\r\n                />\r\n            );\r\n\r\n            makeConfirmationModal = (\r\n                <ConfirmModal\r\n                    show={this.state.showDeactivateAccountModal}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.confirmDeactivateAccountTitle'\r\n                            defaultMessage='Confirm Deactivation'\r\n                        />\r\n                    }\r\n                    message={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.confirmDeactivateDesc'\r\n                            defaultMessage='Are you sure you want to deactivate your account? This can only be reversed by your System Administrator.'\r\n                        />\r\n                    }\r\n                    confirmButtonClass={confirmButtonClass}\r\n                    confirmButtonText={deactivateMemberButton}\r\n                    onConfirm={this.handleDeactivateAccountSubmit}\r\n                    onCancel={this.handleHideDeactivateAccountModal}\r\n                />\r\n            );\r\n        }\r\n\r\n        const unreadScrollPositionSection = this.renderUnreadScrollPositionSection();\r\n        let unreadScrollPositionSectionDivider = null;\r\n        if (unreadScrollPositionSection) {\r\n            unreadScrollPositionSectionDivider = <div className='divider-light'/>;\r\n        }\r\n\r\n        let syncDraftsSection = null;\r\n        let syncDraftsSectionDivider = null;\r\n        if (this.props.syncedDraftsAreAllowed) {\r\n            syncDraftsSection = this.renderSyncDraftsSection();\r\n            if (syncDraftsSection) {\r\n                syncDraftsSectionDivider = <div className='divider-light'/>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='advancedSettings'\r\n                aria-labelledby='advancedButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.advance.title'\r\n                            defaultMessage='Advanced Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.title'\r\n                                defaultMessage='Advanced Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {ctrlSendSection}\r\n                    {formattingSectionDivider}\r\n                    {formattingSection}\r\n                    <div className='divider-light'/>\r\n                    <JoinLeaveSection\r\n                        active={this.props.activeSection === AdvancedSections.JOIN_LEAVE}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        onUpdateSection={this.handleUpdateSection}\r\n                        renderOnOffLabel={this.renderOnOffLabel}\r\n                        adminMode={this.props.adminMode}\r\n                        userPreferences={this.props.userPreferences}\r\n                        userId={this.props.user.id}\r\n                    />\r\n                    <PerformanceDebuggingSection\r\n                        active={this.props.activeSection === AdvancedSections.PERFORMANCE_DEBUGGING}\r\n                        onUpdateSection={this.handleUpdateSection}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        adminMode={this.props.adminMode}\r\n                        userId={this.props.user.id}\r\n                    />\r\n                    {unreadScrollPositionSectionDivider}\r\n                    {unreadScrollPositionSection}\r\n                    {syncDraftsSectionDivider}\r\n                    {syncDraftsSection}\r\n                    {formattingSectionDivider}\r\n                    {deactivateAccountSection}\r\n                    <div className='divider-dark'/>\r\n                    {makeConfirmationModal}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ConnectedProps} from 'react-redux';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {updateUserActive, revokeAllSessionsForUser} from 'mattermost-redux/actions/users';\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    get,\r\n    getUnreadScrollPositionPreference,\r\n    makeGetCategory, makeGetUserCategory,\r\n    syncedDraftsAreAllowed,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AdvancedSettingsDisplay from './user_settings_advanced';\r\nimport type {OwnProps} from './user_settings_advanced';\r\n\r\nconst getAdvancedSettingsCategory = makeGetCategory('getAdvancedSettingsCategory', Preferences.CATEGORY_ADVANCED_SETTINGS);\r\n\r\nfunction makeMapStateToProps() {\r\n    const getUserAdvancedSettingsCategory = makeGetUserCategory('getAdvancedSettingsCategory', Preferences.CATEGORY_ADVANCED_SETTINGS);\r\n\r\n    return (state: GlobalState, props: OwnProps) => {\r\n        const config = getConfig(state);\r\n\r\n        const enableUserDeactivation = config.EnableUserDeactivation === 'true';\r\n        const enableJoinLeaveMessage = config.EnableJoinLeaveMessageByDefault === 'true';\r\n\r\n        const userPreferences = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n        const advancedSettingsCategory = userPreferences ? getUserAdvancedSettingsCategory(state, props.user.id) : getAdvancedSettingsCategory(state);\r\n\r\n        return {\r\n            advancedSettingsCategory,\r\n            sendOnCtrlEnter: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter', 'false', userPreferences),\r\n            codeBlockOnCtrlEnter: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'code_block_ctrl_enter', 'true', userPreferences),\r\n            formatting: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'formatting', 'true', userPreferences),\r\n            joinLeave: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'join_leave', enableJoinLeaveMessage.toString(), userPreferences),\r\n            syncDrafts: get(state, Preferences.CATEGORY_ADVANCED_SETTINGS, 'sync_drafts', 'true', userPreferences),\r\n            user: props.adminMode && props.user ? props.user : getCurrentUser(state),\r\n            unreadScrollPosition: getUnreadScrollPositionPreference(state, userPreferences),\r\n            enableUserDeactivation,\r\n            syncedDraftsAreAllowed: syncedDraftsAreAllowed(state),\r\n        };\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n            updateUserActive,\r\n            revokeAllSessionsForUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nconst connector = connect(makeMapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(AdvancedSettingsDisplay);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport ColorInput from 'components/color_input';\r\n\r\ntype Props = {\r\n    id: string;\r\n    label: React.ReactNode;\r\n    value: string;\r\n    onChange?: (id: string, newColor: string) => void;\r\n}\r\n\r\nexport default function ColorChooser(props: Props) {\r\n    const handleChange = (newColor: string) => {\r\n        props.onChange?.(props.id, newColor);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <label\r\n                className='custom-label'\r\n                htmlFor={`${props.id}-inputColorValue`}\r\n            >\r\n                {props.label}\r\n            </label>\r\n            <ColorInput\r\n                id={props.id}\r\n                value={props.value}\r\n                onChange={handleChange}\r\n            />\r\n        </>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {createRef} from 'react';\r\nimport type {ChangeEvent, ClipboardEvent, MouseEvent, RefObject} from 'react';\r\nimport {defineMessages, FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape, MessageDescriptor} from 'react-intl';\r\n\r\nimport type {Theme} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {setThemeDefaults} from 'mattermost-redux/utils/theme_utils';\r\n\r\nimport WithTooltip from 'components/with_tooltip';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport ColorChooser from '../color_chooser/color_chooser';\r\n\r\nconst COPY_SUCCESS_INTERVAL = 3000;\r\n\r\nconst messages: Record<string, MessageDescriptor> = defineMessages({\r\n    sidebarBg: {\r\n        id: 'user.settings.custom_theme.sidebarBg',\r\n        defaultMessage: 'Sidebar BG',\r\n    },\r\n    sidebarText: {\r\n        id: 'user.settings.custom_theme.sidebarText',\r\n        defaultMessage: 'Sidebar Text',\r\n    },\r\n    sidebarHeaderBg: {\r\n        id: 'user.settings.custom_theme.sidebarHeaderBg',\r\n        defaultMessage: 'Sidebar Header BG',\r\n    },\r\n    sidebarTeamBarBg: {\r\n        id: 'user.settings.custom_theme.sidebarTeamBarBg',\r\n        defaultMessage: 'Team Sidebar BG',\r\n    },\r\n    sidebarHeaderTextColor: {\r\n        id: 'user.settings.custom_theme.sidebarHeaderTextColor',\r\n        defaultMessage: 'Sidebar Header Text',\r\n    },\r\n    sidebarUnreadText: {\r\n        id: 'user.settings.custom_theme.sidebarUnreadText',\r\n        defaultMessage: 'Sidebar Unread Text',\r\n    },\r\n    sidebarTextHoverBg: {\r\n        id: 'user.settings.custom_theme.sidebarTextHoverBg',\r\n        defaultMessage: 'Sidebar Text Hover BG',\r\n    },\r\n    sidebarTextActiveBorder: {\r\n        id: 'user.settings.custom_theme.sidebarTextActiveBorder',\r\n        defaultMessage: 'Sidebar Text Active Border',\r\n    },\r\n    sidebarTextActiveColor: {\r\n        id: 'user.settings.custom_theme.sidebarTextActiveColor',\r\n        defaultMessage: 'Sidebar Text Active Color',\r\n    },\r\n    onlineIndicator: {\r\n        id: 'user.settings.custom_theme.onlineIndicator',\r\n        defaultMessage: 'Online Indicator',\r\n    },\r\n    awayIndicator: {\r\n        id: 'user.settings.custom_theme.awayIndicator',\r\n        defaultMessage: 'Away Indicator',\r\n    },\r\n    dndIndicator: {\r\n        id: 'user.settings.custom_theme.dndIndicator',\r\n        defaultMessage: 'Do Not Disturb Indicator',\r\n    },\r\n    mentionBg: {\r\n        id: 'user.settings.custom_theme.mentionBg',\r\n        defaultMessage: 'Mention Jewel BG',\r\n    },\r\n    mentionColor: {\r\n        id: 'user.settings.custom_theme.mentionColor',\r\n        defaultMessage: 'Mention Jewel Text',\r\n    },\r\n    centerChannelBg: {\r\n        id: 'user.settings.custom_theme.centerChannelBg',\r\n        defaultMessage: 'Center Channel BG',\r\n    },\r\n    centerChannelColor: {\r\n        id: 'user.settings.custom_theme.centerChannelColor',\r\n        defaultMessage: 'Center Channel Text',\r\n    },\r\n    newMessageSeparator: {\r\n        id: 'user.settings.custom_theme.newMessageSeparator',\r\n        defaultMessage: 'New Message Separator',\r\n    },\r\n    linkColor: {\r\n        id: 'user.settings.custom_theme.linkColor',\r\n        defaultMessage: 'Link Color',\r\n    },\r\n    buttonBg: {\r\n        id: 'user.settings.custom_theme.buttonBg',\r\n        defaultMessage: 'Button BG',\r\n    },\r\n    buttonColor: {\r\n        id: 'user.settings.custom_theme.buttonColor',\r\n        defaultMessage: 'Button Text',\r\n    },\r\n    errorTextColor: {\r\n        id: 'user.settings.custom_theme.errorTextColor',\r\n        defaultMessage: 'Error Text Color',\r\n    },\r\n    mentionHighlightBg: {\r\n        id: 'user.settings.custom_theme.mentionHighlightBg',\r\n        defaultMessage: 'Mention Highlight BG',\r\n    },\r\n    mentionHighlightLink: {\r\n        id: 'user.settings.custom_theme.mentionHighlightLink',\r\n        defaultMessage: 'Mention Highlight Link',\r\n    },\r\n    codeTheme: {\r\n        id: 'user.settings.custom_theme.codeTheme',\r\n        defaultMessage: 'Code Theme',\r\n    },\r\n});\r\n\r\ntype Props = {\r\n    theme: Theme;\r\n    updateTheme: (theme: Theme) => void;\r\n    intl: IntlShape;\r\n};\r\n\r\ntype State = {\r\n    copyTheme: string;\r\n};\r\n\r\nexport class CustomThemeChooser extends React.PureComponent<Props, State> {\r\n    textareaRef: RefObject<HTMLTextAreaElement>;\r\n    sidebarStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    centerChannelStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    linkAndButtonStylesHeaderRef: RefObject<HTMLButtonElement>;\r\n    sidebarStylesRef: RefObject<HTMLDivElement>;\r\n    centerChannelStylesRef: RefObject<HTMLDivElement>;\r\n    linkAndButtonStylesRef: RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.textareaRef = createRef();\r\n        this.sidebarStylesHeaderRef = createRef();\r\n        this.centerChannelStylesHeaderRef = createRef();\r\n        this.linkAndButtonStylesHeaderRef = createRef();\r\n        this.sidebarStylesRef = createRef();\r\n        this.centerChannelStylesRef = createRef();\r\n        this.linkAndButtonStylesRef = createRef();\r\n\r\n        const copyTheme = this.setCopyTheme(this.props.theme);\r\n\r\n        this.state = {\r\n            copyTheme,\r\n        };\r\n    }\r\n    handleColorChange = (settingId: string, color: string) => {\r\n        const {updateTheme, theme} = this.props;\r\n        if (theme[settingId] !== color) {\r\n            const newTheme: Theme = {\r\n                ...theme,\r\n                type: 'custom',\r\n                [settingId]: color,\r\n            };\r\n\r\n            // For backwards compatibility\r\n            if (settingId === 'mentionBg') {\r\n                newTheme.mentionBj = color;\r\n            }\r\n\r\n            updateTheme(newTheme);\r\n\r\n            const copyTheme = this.setCopyTheme(newTheme);\r\n\r\n            this.setState({\r\n                copyTheme,\r\n            });\r\n        }\r\n    };\r\n\r\n    setCopyTheme(theme: Theme) {\r\n        const copyTheme = Object.assign({}, theme);\r\n        delete copyTheme.type;\r\n        delete copyTheme.image;\r\n\r\n        return JSON.stringify(copyTheme);\r\n    }\r\n\r\n    pasteBoxChange = (e: ClipboardEvent<HTMLTextAreaElement>) => {\r\n        let text = '';\r\n\r\n        if ((window as any).clipboardData && (window as any).clipboardData.getData) { // IE\r\n            text = (window as any).clipboardData.getData('Text');\r\n        } else {\r\n            text = e.clipboardData.getData('Text');//e.clipboardData.getData('text/plain');\r\n        }\r\n\r\n        if (text.length === 0) {\r\n            return;\r\n        }\r\n\r\n        let theme;\r\n        try {\r\n            theme = JSON.parse(text);\r\n        } catch (err) {\r\n            return;\r\n        }\r\n\r\n        theme = setThemeDefaults(theme);\r\n\r\n        this.setState({\r\n            copyTheme: JSON.stringify(theme),\r\n        });\r\n\r\n        theme.type = 'custom';\r\n        this.props.updateTheme(theme);\r\n    };\r\n\r\n    onChangeHandle = (e: ChangeEvent<HTMLTextAreaElement>) => e.stopPropagation();\r\n\r\n    selectTheme = () => {\r\n        this.textareaRef.current?.focus();\r\n        this.textareaRef.current?.setSelectionRange(0, this.state.copyTheme.length);\r\n    };\r\n\r\n    toggleSidebarStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.sidebarStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.sidebarStylesHeaderRef.current?.classList.contains('open');\r\n        this.sidebarStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.sidebarStylesRef.current);\r\n    };\r\n\r\n    toggleCenterChannelStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.centerChannelStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.centerChannelStylesHeaderRef.current?.classList.contains('open');\r\n        this.centerChannelStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.centerChannelStylesRef.current);\r\n    };\r\n\r\n    toggleLinkAndButtonStyles = (e: MouseEvent<HTMLButtonElement>) => {\r\n        e.preventDefault();\r\n\r\n        this.linkAndButtonStylesHeaderRef.current?.classList.toggle('open');\r\n\r\n        const isAccordionOpen = this.linkAndButtonStylesHeaderRef.current?.classList.contains('open');\r\n        this.linkAndButtonStylesHeaderRef.current?.setAttribute('aria-expanded', `${isAccordionOpen}`);\r\n        this.toggleSection(this.linkAndButtonStylesRef.current);\r\n    };\r\n\r\n    toggleSection(node: HTMLElement | null) {\r\n        if (!node) {\r\n            return;\r\n        }\r\n        node.classList.toggle('open');\r\n\r\n        // set overflow after animation, so the colorchooser is fully shown\r\n        node.ontransitionend = () => {\r\n            if (node.classList.contains('open')) {\r\n                node.style.overflowY = 'inherit';\r\n            } else {\r\n                node.style.overflowY = 'hidden';\r\n            }\r\n        };\r\n    }\r\n\r\n    onCodeThemeChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        const theme: Theme = {\r\n            ...this.props.theme,\r\n            type: 'custom',\r\n            codeTheme: e.target.value,\r\n        };\r\n\r\n        this.props.updateTheme(theme);\r\n    };\r\n\r\n    copyTheme = () => {\r\n        this.selectTheme();\r\n        document.execCommand('copy');\r\n        this.showCopySuccess();\r\n    };\r\n\r\n    showCopySuccess = () => {\r\n        const copySuccess: HTMLElement | null = document.querySelector('.copy-theme-success');\r\n        if (copySuccess) {\r\n            copySuccess.style.display = 'inline-block';\r\n            setTimeout(() => {\r\n                copySuccess.style.display = 'none';\r\n            }, COPY_SUCCESS_INTERVAL);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {intl, theme} = this.props;\r\n        const sidebarElements: JSX.Element[] = [];\r\n        const centerChannelElements: JSX.Element[] = [];\r\n        const linkAndButtonElements: JSX.Element[] = [];\r\n        Constants.THEME_ELEMENTS.forEach((element, index) => {\r\n            if (element.id === 'codeTheme') {\r\n                const codeThemeOptions: JSX.Element[] = [];\r\n                let codeThemeURL = '';\r\n\r\n                element.themes?.forEach((codeTheme, codeThemeIndex) => {\r\n                    if (codeTheme.id === theme[element.id]) {\r\n                        codeThemeURL = codeTheme.iconURL;\r\n                    }\r\n                    codeThemeOptions.push(\r\n                        <option\r\n                            key={'code-theme-key' + codeThemeIndex}\r\n                            value={codeTheme.id}\r\n                        >\r\n                            {codeTheme.uiName}\r\n                        </option>,\r\n                    );\r\n                });\r\n\r\n                centerChannelElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <label\r\n                            className='custom-label'\r\n                            htmlFor='codeThemeSelect'\r\n                        >\r\n                            <FormattedMessage {...messages[element.id]}/>\r\n                        </label>\r\n                        <div\r\n                            className='input-group theme-group group--code dropdown'\r\n                            id={element.id}\r\n                        >\r\n                            <select\r\n                                id='codeThemeSelect'\r\n                                className='form-control'\r\n                                defaultValue={theme[element.id]}\r\n                                onChange={this.onCodeThemeChange}\r\n                            >\r\n                                {codeThemeOptions}\r\n                            </select>\r\n                            <WithTooltip\r\n                                title={\r\n                                    <div className='code-popover'>\r\n                                        <img\r\n                                            width='200'\r\n                                            alt={'code theme image'}\r\n                                            src={codeThemeURL}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                            >\r\n                                <span className='input-group-addon'>\r\n                                    <img\r\n                                        alt={'code theme image'}\r\n                                        src={codeThemeURL}\r\n                                    />\r\n                                </span>\r\n                            </WithTooltip>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (element.group === 'centerChannelElements') {\r\n                centerChannelElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={theme[element.id] || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            } else if (element.group === 'sidebarElements') {\r\n                // Need to support old typo mentionBj element for mentionBg\r\n                let color = theme[element.id];\r\n                if (!color && element.id === 'mentionBg') {\r\n                    color = theme.mentionBj;\r\n                }\r\n\r\n                sidebarElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={color || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            } else {\r\n                linkAndButtonElements.push(\r\n                    <div\r\n                        className='col-sm-6 form-group element'\r\n                        key={'custom-theme-key' + index}\r\n                    >\r\n                        <ColorChooser\r\n                            id={element.id}\r\n                            label={<FormattedMessage {...messages[element.id]}/>}\r\n                            value={theme[element.id] || ''}\r\n                            onChange={this.handleColorChange}\r\n                        />\r\n                    </div>,\r\n                );\r\n            }\r\n        });\r\n\r\n        const pasteBox = (\r\n            <div className='col-sm-12'>\r\n                <label\r\n                    className='custom-label'\r\n                    htmlFor='pasteBox'\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.custom_theme.copyPaste'\r\n                        defaultMessage='Copy to share or paste theme colors here:'\r\n                    />\r\n                </label>\r\n                <textarea\r\n                    ref={this.textareaRef}\r\n                    className='form-control'\r\n                    id='pasteBox'\r\n                    value={this.state.copyTheme}\r\n                    onCopy={this.showCopySuccess}\r\n                    onPaste={this.pasteBoxChange}\r\n                    onChange={this.onChangeHandle}\r\n                    onClick={this.selectTheme}\r\n                />\r\n                <div className='mt-3'>\r\n                    <button\r\n                        className='btn btn-tertiary'\r\n                        onClick={this.copyTheme}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.custom_theme.copyThemeColors'\r\n                            defaultMessage='Copy Theme Colors'\r\n                        />\r\n                    </button>\r\n                    <span\r\n                        className='alert alert-success copy-theme-success'\r\n                        role='alert'\r\n                        style={{display: 'none'}}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.custom_theme.copied'\r\n                            defaultMessage=' Copied'\r\n                        />\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div\r\n                id='customThemesSection'\r\n                className='appearance-section pt-2'\r\n                aria-labelledby='customThemes'\r\n            >\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.sidebarStylesHeaderRef}\r\n                            id='sidebarStylesAccordion'\r\n                            onClick={this.toggleSidebarStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='sidebarStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.sidebarTitle'\r\n                                defaultMessage='Sidebar Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        ref={this.sidebarStylesRef}\r\n                        id='sidebarStylesSection'\r\n                        aria-labelledby='sidebarStylesAccordion'\r\n                        className='theme-elements__body'\r\n                    >\r\n                        {sidebarElements}\r\n                    </div>\r\n                </div>\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.centerChannelStylesHeaderRef}\r\n                            id='centerChannelStylesAccordion'\r\n                            onClick={this.toggleCenterChannelStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='centerChannelStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.centerChannelTitle'\r\n                                defaultMessage='Center Channel Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        ref={this.centerChannelStylesRef}\r\n                        id='centerChannelStylesSection'\r\n                        className='theme-elements__body'\r\n                        aria-labelledby='centerChannelStylesAccordion'\r\n                    >\r\n                        {centerChannelElements}\r\n                    </div>\r\n                </div>\r\n                <div className='theme-elements row'>\r\n                    <h4 className='theme-elements__header'>\r\n                        <button\r\n                            ref={this.linkAndButtonStylesHeaderRef}\r\n                            id='linkAndButtonsStylesAccordion'\r\n                            onClick={this.toggleLinkAndButtonStyles}\r\n                            aria-expanded={false}\r\n                            aria-controls='linkAndButtonsStylesSection'\r\n                            className='theme-elements__header'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.custom_theme.linkButtonTitle'\r\n                                defaultMessage='Link and Button Styles'\r\n                            />\r\n                            <div className='header__icon'>\r\n                                <i\r\n                                    className='fa fa-plus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.expand', defaultMessage: 'Expand Icon'})}\r\n                                />\r\n                                <i\r\n                                    className='fa fa-minus'\r\n                                    aria-hidden={true}\r\n                                    title={intl.formatMessage({id: 'generic_icons.collapse', defaultMessage: 'Collapse Icon'})}\r\n                                />\r\n                            </div>\r\n                        </button>\r\n                    </h4>\r\n                    <div\r\n                        id='linkAndButtonsStylesSection'\r\n                        ref={this.linkAndButtonStylesRef}\r\n                        className='theme-elements__body'\r\n                        aria-labelledby='linkAndButtonsStylesAccordion'\r\n                    >\r\n                        {linkAndButtonElements}\r\n                    </div>\r\n                </div>\r\n                <div className='row mt-3'>\r\n                    {pasteBox}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(CustomThemeChooser);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable react/jsx-max-props-per-line */\r\n\r\nimport React from 'react';\r\n\r\ntype ThemeThumbnailProps = {\r\n    themeName?: string;\r\n    themeKey: string;\r\n    sidebarBg: string;\r\n    sidebarText: string;\r\n    sidebarUnreadText: string;\r\n    onlineIndicator: string;\r\n    awayIndicator: string;\r\n    dndIndicator: string;\r\n    centerChannelColor: string;\r\n    centerChannelBg: string;\r\n    newMessageSeparator: string;\r\n    buttonBg: string;\r\n}\r\n\r\nfunction ThemeThumbnail({\r\n    themeName,\r\n    themeKey,\r\n    sidebarBg = '#174AB5',\r\n    sidebarText = '#86A1D9',\r\n    sidebarUnreadText = 'white',\r\n    onlineIndicator = '#3DB887',\r\n    awayIndicator = '#FFBC1F',\r\n    dndIndicator = '#D24B4E',\r\n    centerChannelColor = '#E0E1E3',\r\n    centerChannelBg = 'white',\r\n    newMessageSeparator = '#1C58D9',\r\n    buttonBg = '#15B7B7',\r\n}: ThemeThumbnailProps): JSX.Element {\r\n    return (\r\n        <svg width='112' height='86' viewBox='0 0 112 86' fill='none' xmlns='http://www.w3.org/2000/svg' aria-labelledby={`${themeKey}-theme-icon`} role='img'>\r\n            <title id={`${themeKey}-theme-icon`}>{`${themeName} theme icon`}</title>\r\n            <rect style={{fill: centerChannelBg}} x='0' y='0' width='112' height='86'/>\r\n            <g>\r\n                <rect style={{fill: centerChannelBg}} x='50' y='-1' width='63' height='88'/>\r\n                <g>\r\n                    <rect style={{fill: centerChannelColor}} x='55' y='75' width='52' height='6' rx='3'/>\r\n                    <rect style={{fill: centerChannelBg}} x='56' y='76' width='50' height='4' rx='2'/>\r\n                </g>\r\n                <rect style={{fill: buttonBg}} x='71' y='65' width='22' height='5' rx='2.5'/>\r\n                <rect style={{fill: newMessageSeparator}} x='50' y='32' width='62' height='1'/>\r\n                <g style={{fill: centerChannelColor}}>\r\n                    <rect x='55' y='5' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='14' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='23' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='38' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='47' width='52' height='4' rx='2'/>\r\n                    <rect x='55' y='56' width='52' height='4' rx='2'/>\r\n                </g>\r\n            </g>\r\n            <g>\r\n                <rect style={{fill: sidebarBg}} x='-1' y='-1' width='51' height='88'/>\r\n                <g style={{fill: sidebarText}}>\r\n                    <circle cx='7' cy='61' r='2'/>\r\n                    <circle cx='7' cy='70' r='2'/>\r\n                    <circle cx='7' cy='43' r='2'/>\r\n                    <circle cx='7' cy='34' r='2'/>\r\n                    <circle cx='7' cy='16' r='2'/>\r\n                    <circle cx='7' cy='7' r='2'/>\r\n                    <rect x='11' y='5' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='14' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='32' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='41' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='50' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='59' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='68' width='28' height='4' rx='2'/>\r\n                    <rect x='11' y='77' width='28' height='4' rx='2'/>\r\n                </g>\r\n                <circle style={{fill: dndIndicator}} cx='7' cy='79' r='2'/>\r\n                <circle style={{fill: awayIndicator}} cx='7' cy='52' r='2'/>\r\n                <circle style={{fill: onlineIndicator}} cx='7' cy='25' r='2'/>\r\n                <g style={{fill: sidebarUnreadText}}>\r\n                    <circle cx='43' cy='25' r='2'/>\r\n                    <rect x='11' y='23' width='28' height='4' rx='2'/>\r\n                </g>\r\n            </g>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default ThemeThumbnail;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {Theme, ThemeKey} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {changeOpacity} from 'mattermost-redux/utils/theme_utils';\r\n\r\nimport {toTitleCase} from 'utils/utils';\r\n\r\nimport ThemeThumbnail from '../theme_thumbnail';\r\n\r\ntype Props = {\r\n    theme: Theme;\r\n    updateTheme: (theme: Theme) => void;\r\n    allowedThemes: string[];\r\n}\r\n\r\nconst PremadeThemeChooser = ({theme, updateTheme, allowedThemes = []}: Props) => {\r\n    const premadeThemes = [];\r\n    const hasAllowedThemes = allowedThemes.length > 1 || (allowedThemes[0] && allowedThemes[0].trim().length > 0);\r\n\r\n    for (const k in Preferences.THEMES) {\r\n        if (Object.hasOwn(Preferences.THEMES, k)) {\r\n            if (hasAllowedThemes && allowedThemes.indexOf(k) < 0) {\r\n                continue;\r\n            }\r\n\r\n            const premadeTheme: Theme = Object.assign({}, Preferences.THEMES[k as ThemeKey]);\r\n\r\n            let activeClass = '';\r\n            if (premadeTheme.type === theme.type) {\r\n                activeClass = 'active';\r\n            }\r\n\r\n            premadeThemes.push(\r\n                <div\r\n                    className='col-xs-6 col-sm-3 premade-themes'\r\n                    key={'premade-theme-key' + k}\r\n                >\r\n                    <button\r\n                        id={`premadeTheme${premadeTheme.type?.replace(' ', '')}`}\r\n                        className={`premadeThemeButton ${activeClass}`}\r\n                        onClick={() => updateTheme(premadeTheme)}\r\n                    >\r\n                        <label>\r\n                            <ThemeThumbnail\r\n                                themeKey={k}\r\n                                themeName={premadeTheme.type}\r\n                                sidebarBg={premadeTheme.sidebarBg}\r\n                                sidebarText={changeOpacity(premadeTheme.sidebarText, 0.48)}\r\n                                sidebarUnreadText={premadeTheme.sidebarUnreadText}\r\n                                onlineIndicator={premadeTheme.onlineIndicator}\r\n                                awayIndicator={premadeTheme.awayIndicator}\r\n                                dndIndicator={premadeTheme.dndIndicator}\r\n                                centerChannelColor={changeOpacity(premadeTheme.centerChannelColor, 0.16)}\r\n                                centerChannelBg={premadeTheme.centerChannelBg}\r\n                                newMessageSeparator={premadeTheme.newMessageSeparator}\r\n                                buttonBg={premadeTheme.buttonBg}\r\n                            />\r\n                            <div className='theme-label'>{toTitleCase(premadeTheme.type || '')}</div>\r\n                        </label>\r\n                    </button>\r\n                </div>,\r\n            );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id='premadeThemesSection'\r\n            className='row appearance-section'\r\n            aria-labelledby='standardThemes'\r\n        >\r\n            <div className='clearfix'>\r\n                {premadeThemes}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PremadeThemeChooser;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport PremadeThemeChooser from './premade_theme_chooser';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config = getConfig(state);\r\n\r\n    const allowedThemes = (config.AllowedThemes && config.AllowedThemes.split(',')) || [];\r\n\r\n    return {\r\n        allowedThemes,\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(PremadeThemeChooser);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {Theme} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {Constants} from 'utils/constants';\r\nimport {applyTheme} from 'utils/utils';\r\n\r\nimport type {ModalData} from 'types/actions';\r\n\r\nimport CustomThemeChooser from './custom_theme_chooser/custom_theme_chooser';\r\nimport PremadeThemeChooser from './premade_theme_chooser';\r\n\r\ntype Props = {\r\n    currentTeamId: string;\r\n    theme: Theme;\r\n    selected: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    updateSection: (section: string) => void;\r\n    setRequireConfirm?: (requireConfirm: boolean) => void;\r\n    allowCustomThemes: boolean;\r\n    showAllTeamsCheckbox: boolean;\r\n    applyToAllTeams: boolean;\r\n    actions: {\r\n        saveTheme: (teamId: string, theme: Theme) => void;\r\n        deleteTeamSpecificThemes: () => void;\r\n        openModal: <P>(modalData: ModalData<P>) => void;\r\n    };\r\n};\r\n\r\ntype State = {\r\n    isSaving: boolean;\r\n    type: string;\r\n    showAllTeamsCheckbox: boolean;\r\n    applyToAllTeams: boolean;\r\n    serverError: string;\r\n    theme: Theme;\r\n};\r\n\r\nexport default class ThemeSetting extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n    originalTheme: Theme;\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...this.getStateFromProps(props),\r\n            isSaving: false,\r\n            serverError: '',\r\n        };\r\n\r\n        this.originalTheme = Object.assign({}, this.state.theme);\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.selected && !this.props.selected) {\r\n            this.resetFields();\r\n        }\r\n        if (prevProps.selected && !this.props.selected && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.props.selected) {\r\n            applyTheme(this.props.theme);\r\n        }\r\n    }\r\n\r\n    getStateFromProps(props = this.props): State {\r\n        const theme = {...props.theme};\r\n        if (!theme.codeTheme) {\r\n            theme.codeTheme = Constants.DEFAULT_CODE_THEME;\r\n        }\r\n\r\n        return {\r\n            theme,\r\n            type: theme.type || 'premade',\r\n            showAllTeamsCheckbox: props.showAllTeamsCheckbox,\r\n            applyToAllTeams: props.applyToAllTeams,\r\n            serverError: '',\r\n            isSaving: false,\r\n        };\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    submitTheme = async (): Promise<void> => {\r\n        const teamId = this.state.applyToAllTeams ? '' : this.props.currentTeamId;\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.actions.saveTheme(teamId, this.state.theme);\r\n\r\n        if (this.state.applyToAllTeams) {\r\n            await this.props.actions.deleteTeamSpecificThemes();\r\n        }\r\n\r\n        this.props.setRequireConfirm?.(false);\r\n        this.originalTheme = Object.assign({}, this.state.theme);\r\n        this.props.updateSection('');\r\n        this.setState({isSaving: false});\r\n    };\r\n\r\n    updateTheme = (theme: Theme): void => {\r\n        let themeChanged = this.state.theme.length === theme.length;\r\n        if (!themeChanged) {\r\n            for (const field in theme) {\r\n                if (Object.hasOwn(theme, field)) {\r\n                    if (this.state.theme[field] !== theme[field]) {\r\n                        themeChanged = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.props.setRequireConfirm?.(themeChanged);\r\n\r\n        this.setState({theme});\r\n        applyTheme(theme);\r\n    };\r\n\r\n    updateType = (type: string): void => this.setState({type});\r\n\r\n    resetFields = (): void => {\r\n        const state = this.getStateFromProps();\r\n        state.serverError = '';\r\n        this.setState(state);\r\n\r\n        applyTheme(state.theme);\r\n\r\n        this.props.setRequireConfirm?.(false);\r\n    };\r\n\r\n    handleUpdateSection = (section: string): void => this.props.updateSection(section);\r\n\r\n    render() {\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = this.state.serverError;\r\n        }\r\n\r\n        const displayCustom = this.state.type === 'custom';\r\n\r\n        let custom;\r\n        let premade;\r\n        if (displayCustom && this.props.allowCustomThemes) {\r\n            custom = (\r\n                <div key='customThemeChooser'>\r\n                    <CustomThemeChooser\r\n                        theme={this.state.theme}\r\n                        updateTheme={this.updateTheme}\r\n                    />\r\n                </div>\r\n            );\r\n        } else {\r\n            premade = (\r\n                <div key='premadeThemeChooser'>\r\n                    <br/>\r\n                    <PremadeThemeChooser\r\n                        theme={this.state.theme}\r\n                        updateTheme={this.updateTheme}\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let themeUI;\r\n        if (this.props.selected) {\r\n            const inputs = [];\r\n\r\n            if (this.props.allowCustomThemes) {\r\n                inputs.push(\r\n                    <div\r\n                        key='premadeCustom'\r\n                        className='user-settings__radio-group-inline'\r\n                    >\r\n                        <div className='radio radio-inline'>\r\n                            <label>\r\n                                <input\r\n                                    id='standardThemes'\r\n                                    type='radio'\r\n                                    name='theme'\r\n                                    checked={!displayCustom}\r\n                                    onChange={this.updateType.bind(this, 'premade')}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.premadeThemes'\r\n                                    defaultMessage='Premade Themes'\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                        <div className='radio radio-inline'>\r\n                            <label>\r\n                                <input\r\n                                    id='customThemes'\r\n                                    type='radio'\r\n                                    name='theme'\r\n                                    checked={displayCustom}\r\n                                    onChange={this.updateType.bind(this, 'custom')}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.customTheme'\r\n                                    defaultMessage='Custom Theme'\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(premade, custom);\r\n\r\n                inputs.push(\r\n                    <div key='otherThemes'>\r\n                        <br/>\r\n                        <ExternalLink\r\n                            id='otherThemes'\r\n                            href='http://docs.mattermost.com/help/settings/theme-colors.html#custom-theme-examples'\r\n                            location='user_settings_theme'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.display.theme.otherThemes'\r\n                                defaultMessage='See other themes'\r\n                            />\r\n                        </ExternalLink>\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            let allTeamsCheckbox = null;\r\n            if (this.state.showAllTeamsCheckbox) {\r\n                allTeamsCheckbox = (\r\n                    <div className='checkbox user-settings__submit-checkbox'>\r\n                        <label>\r\n                            <input\r\n                                id='applyThemeToAllTeams'\r\n                                type='checkbox'\r\n                                checked={this.state.applyToAllTeams}\r\n                                onChange={(e) => this.setState({applyToAllTeams: e.target.checked})}\r\n                            />\r\n                            <FormattedMessage\r\n                                id='user.settings.display.theme.applyToAllTeams'\r\n                                defaultMessage='Apply new theme to all my teams'\r\n                            />\r\n                        </label>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            themeUI = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.title'\r\n                            defaultMessage='Theme'\r\n                        />\r\n                    }\r\n                    inputs={\r\n                        <fieldset>\r\n                            <legend className='hidden-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.display.theme.title'\r\n                                    defaultMessage='Theme'\r\n                                />\r\n                            </legend>\r\n                            <div>\r\n                                {inputs}\r\n                            </div>\r\n                        </fieldset>\r\n                    }\r\n                    submitExtra={allTeamsCheckbox}\r\n                    submit={this.submitTheme}\r\n                    disableEnterSubmit={true}\r\n                    saving={this.state.isSaving}\r\n                    serverError={serverError}\r\n                    isFullWidth={true}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        } else {\r\n            themeUI = (\r\n                <SettingItemMin\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.title'\r\n                            defaultMessage='Theme'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.theme.describe'\r\n                            defaultMessage='Open to manage your theme'\r\n                        />\r\n                    }\r\n                    section={'theme'}\r\n                    updateSection={this.handleUpdateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return themeUI;\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {saveTheme, deleteTeamSpecificThemes} from 'mattermost-redux/actions/preferences';\r\nimport {getTheme, getThemePreferences} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentTeamId, getMyTeamsCount} from 'mattermost-redux/selectors/entities/teams';\r\n\r\nimport {openModal} from 'actions/views/modals';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport UserSettingsTheme from './user_settings_theme';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentTeamId: getCurrentTeamId(state),\r\n        theme: getTheme(state),\r\n        applyToAllTeams: getThemePreferences(state).length <= 1,\r\n        showAllTeamsCheckbox: getMyTeamsCount(state) > 1,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            saveTheme,\r\n            deleteTeamSpecificThemes,\r\n            openModal,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserSettingsTheme);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {StylesConfig, OnChangeValue, AriaOnFocus, AriaOnChange} from 'react-select';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport type {Language} from 'i18n/i18n';\r\nimport Constants from 'utils/constants';\r\nimport {isKeyPressed} from 'utils/keyboard';\r\n\r\ntype Actions = {\r\n    updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n    patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n};\r\n\r\ntype Props = {\r\n    intl: IntlShape;\r\n    user: UserProfile;\r\n    locale: string;\r\n    locales: Record<string, Language>;\r\n    updateSection: (section: string) => void;\r\n    actions: Actions;\r\n    adminMode?: boolean;\r\n};\r\n\r\ntype SelectedOption = {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ntype State = {\r\n    isSaving: boolean;\r\n    openMenu: boolean;\r\n    locale: string;\r\n    serverError?: string;\r\n    selectedOption: SelectedOption;\r\n};\r\n\r\nexport class ManageLanguage extends React.PureComponent<Props, State> {\r\n    reactSelectContainer: React.RefObject<HTMLDivElement>;\r\n    constructor(props: Props) {\r\n        super(props);\r\n        const userLocale = props.locale;\r\n        const selectedOption = {\r\n            value: props.locales[userLocale].value,\r\n            label: props.locales[userLocale].name,\r\n        };\r\n        this.reactSelectContainer = React.createRef();\r\n\r\n        this.state = {\r\n            locale: props.locale,\r\n            selectedOption,\r\n            isSaving: false,\r\n            openMenu: false,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const reactSelectContainer = this.reactSelectContainer.current;\r\n        if (reactSelectContainer) {\r\n            reactSelectContainer.addEventListener(\r\n                'keydown',\r\n                this.handleContainerKeyDown,\r\n            );\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.reactSelectContainer.current) {\r\n            this.reactSelectContainer.current.removeEventListener(\r\n                'keydown',\r\n                this.handleContainerKeyDown,\r\n            );\r\n        }\r\n    }\r\n\r\n    handleContainerKeyDown = (e: KeyboardEvent) => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (isKeyPressed(e, Constants.KeyCodes.ESCAPE) && this.state.openMenu) {\r\n            modalBody?.classList.remove('no-scroll');\r\n            this.setState({openMenu: false});\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (e: React.KeyboardEvent) => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (isKeyPressed(e, Constants.KeyCodes.ENTER)) {\r\n            modalBody?.classList.add('no-scroll');\r\n            this.setState({openMenu: true});\r\n        }\r\n    };\r\n\r\n    setLanguage = (selectedOption: OnChangeValue<SelectedOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            this.setState({\r\n                locale: selectedOption.value,\r\n                selectedOption,\r\n            });\r\n        }\r\n    };\r\n\r\n    changeLanguage = () => {\r\n        if (this.props.user.locale === this.state.locale) {\r\n            this.props.updateSection('');\r\n        } else {\r\n            this.submitUser({\r\n                ...this.props.user,\r\n                locale: this.state.locale,\r\n            });\r\n        }\r\n    };\r\n\r\n    submitUser = (user: UserProfile) => {\r\n        this.setState({isSaving: true});\r\n\r\n        const action = this.props.adminMode ? this.props.actions.patchUser : this.props.actions.updateMe;\r\n        action(user).then((res) => {\r\n            if ('data' in res) {\r\n                this.setState({isSaving: false});\r\n            } else if ('error' in res) {\r\n                let serverError;\r\n                const {error} = res;\r\n                if (error instanceof Error) {\r\n                    serverError = error.message;\r\n                } else {\r\n                    serverError = error;\r\n                }\r\n                this.setState({serverError, isSaving: false});\r\n            }\r\n        });\r\n    };\r\n\r\n    handleMenuClose = () => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (modalBody) {\r\n            modalBody.classList.remove('no-scroll');\r\n        }\r\n        this.setState({openMenu: false});\r\n    };\r\n\r\n    handleMenuOpen = () => {\r\n        const modalBody = document.querySelector('.modal-body');\r\n        if (modalBody) {\r\n            modalBody.classList.add('no-scroll');\r\n        }\r\n        this.setState({openMenu: true});\r\n    };\r\n\r\n    render() {\r\n        const {intl, locales} = this.props;\r\n\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = (\r\n                <label className='has-error'>{this.state.serverError}</label>\r\n            );\r\n        }\r\n\r\n        const options: SelectedOption[] = [];\r\n\r\n        const languages = Object.keys(locales).\r\n            map((l) => {\r\n                return {\r\n                    value: locales[l].value as string,\r\n                    name: locales[l].name,\r\n                    order: locales[l].order,\r\n                };\r\n            }).\r\n            sort((a, b) => a.order - b.order);\r\n\r\n        languages.forEach((lang) => {\r\n            options.push({value: lang.value, label: lang.name});\r\n        });\r\n\r\n        const reactStyles = {\r\n            menuPortal: (provided) => ({\r\n                ...provided,\r\n                zIndex: 9999,\r\n            }),\r\n        } satisfies StylesConfig<SelectedOption, boolean>;\r\n\r\n        const onFocusMessage: AriaOnFocus<SelectedOption> = ({focused}) => {\r\n            return `option ${focused.label} focused`;\r\n        };\r\n\r\n        const onChangeMessage: AriaOnChange<SelectedOption, boolean> = (option) => {\r\n            return `option ${option.label} selected`;\r\n        };\r\n\r\n        const interfaceLanguageLabelAria = intl.formatMessage({id: 'user.settings.languages.dropdown.arialabel', defaultMessage: 'Dropdown selector to change the interface language'});\r\n\r\n        const input = (\r\n            <div key='changeLanguage'>\r\n                <br/>\r\n                <label\r\n                    aria-label={interfaceLanguageLabelAria}\r\n                    className='control-label'\r\n                    id='changeInterfaceLanguageLabel'\r\n                    htmlFor='displayLanguage'\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.change'\r\n                        defaultMessage='Change interface language'\r\n                    />\r\n                </label>\r\n                <div\r\n                    ref={this.reactSelectContainer}\r\n                    className='pt-2'\r\n                >\r\n                    <ReactSelect\r\n                        className='react-select react-select-top'\r\n                        classNamePrefix='react-select'\r\n                        ariaLiveMessages={{\r\n                            onFocus: onFocusMessage,\r\n                            onChange: onChangeMessage,\r\n                        }}\r\n                        id='displayLanguage'\r\n                        menuIsOpen={this.state.openMenu}\r\n                        menuPortalTarget={document.body}\r\n                        styles={reactStyles}\r\n                        options={options}\r\n                        isClearable={false}\r\n                        onChange={this.setLanguage}\r\n                        onKeyDown={this.handleKeyDown}\r\n                        value={this.state.selectedOption}\r\n                        onMenuClose={this.handleMenuClose}\r\n                        onMenuOpen={this.handleMenuOpen}\r\n                        aria-labelledby='changeInterfaceLanguageLabel'\r\n                        aria-live='assertive'\r\n                    />\r\n                    {serverError}\r\n                </div>\r\n                <div>\r\n                    <br/>\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.promote1'\r\n                        defaultMessage='Select which language Mattermost displays in the user interface.'\r\n                    />\r\n                    <p/>\r\n                    <FormattedMessage\r\n                        id='user.settings.languages.promote2'\r\n                        defaultMessage='Would you like to help with translations? Join the <link>Mattermost Translation Server</link> to contribute.'\r\n                        values={{\r\n                            link: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='http://translate.mattermost.com'\r\n                                    location='manage_languages'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.display.language'\r\n                        defaultMessage='Language'\r\n                    />\r\n                }\r\n                submit={this.changeLanguage}\r\n                saving={this.state.isSaving}\r\n                inputs={[input]}\r\n                updateSection={this.props.updateSection}\r\n                disableEnterSubmit={true}\r\n            />\r\n        );\r\n    }\r\n}\r\nexport default injectIntl(ManageLanguage);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\n\r\nimport {getLanguages} from 'i18n/i18n';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ManageLanguages from './manage_languages';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        locales: getLanguages(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageLanguages);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, StylesConfig} from 'react-select';\r\nimport type {Timezone} from 'timezones.json';\r\n\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {getTimezoneLabel} from 'mattermost-redux/utils/timezone_utils';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nimport {getBrowserTimezone} from 'utils/timezone';\r\n\r\ntype Actions = {\r\n    updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n    patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n}\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    useAutomaticTimezone: boolean;\r\n    automaticTimezone: string;\r\n    manualTimezone: string;\r\n    timezones: Timezone[];\r\n    timezoneLabel: string;\r\n    actions: Actions;\r\n    adminMode?: boolean;\r\n}\r\ntype SelectedOption = {\r\n    value: string;\r\n    label: string;\r\n}\r\n\r\ntype State = {\r\n    useAutomaticTimezone: boolean;\r\n    automaticTimezone: string;\r\n    manualTimezone: string;\r\n    isSaving: boolean;\r\n    serverError?: string;\r\n    openMenu: boolean;\r\n    selectedOption: SelectedOption;\r\n}\r\n\r\nexport default class ManageTimezones extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            useAutomaticTimezone: props.useAutomaticTimezone,\r\n            automaticTimezone: props.automaticTimezone,\r\n            manualTimezone: props.manualTimezone,\r\n            isSaving: false,\r\n            openMenu: false,\r\n            selectedOption: {label: props.timezoneLabel, value: props.useAutomaticTimezone ? props.automaticTimezone : props.manualTimezone},\r\n        };\r\n    }\r\n\r\n    onChange = (selectedOption: OnChangeValue<SelectedOption, boolean>) => {\r\n        if (selectedOption && 'value' in selectedOption) {\r\n            this.setState({\r\n                manualTimezone: selectedOption.value,\r\n                selectedOption,\r\n            });\r\n        }\r\n    };\r\n\r\n    timezoneNotChanged = () => {\r\n        const {\r\n            useAutomaticTimezone,\r\n            automaticTimezone,\r\n            manualTimezone,\r\n        } = this.state;\r\n\r\n        const {\r\n            useAutomaticTimezone: oldUseAutomaticTimezone,\r\n            automaticTimezone: oldAutomaticTimezone,\r\n            manualTimezone: oldManualTimezone,\r\n        } = this.props;\r\n\r\n        return (\r\n            useAutomaticTimezone === oldUseAutomaticTimezone &&\r\n            automaticTimezone === oldAutomaticTimezone &&\r\n            manualTimezone === oldManualTimezone\r\n        );\r\n    };\r\n\r\n    changeTimezone = () => {\r\n        if (this.timezoneNotChanged()) {\r\n            this.props.updateSection('');\r\n            return;\r\n        }\r\n\r\n        this.submitUser();\r\n    };\r\n\r\n    submitUser = () => {\r\n        const {user} = this.props;\r\n        const {useAutomaticTimezone, automaticTimezone, manualTimezone} = this.state;\r\n\r\n        const timezone = {\r\n            useAutomaticTimezone: useAutomaticTimezone.toString(),\r\n            automaticTimezone,\r\n            manualTimezone,\r\n        };\r\n\r\n        const updatedUser = {\r\n            ...user,\r\n            timezone,\r\n        };\r\n\r\n        const action = this.props.adminMode ? this.props.actions.patchUser : this.props.actions.updateMe;\r\n        action(updatedUser).\r\n            then((res) => {\r\n                if ('data' in res) {\r\n                    this.props.updateSection('');\r\n                } else if ('error' in res) {\r\n                    const {error} = res;\r\n                    let serverError;\r\n                    if (error instanceof Error) {\r\n                        serverError = error.message;\r\n                    } else {\r\n                        serverError = error as string;\r\n                    }\r\n                    this.setState({serverError, isSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    handleAutomaticTimezone = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const useAutomaticTimezone = e.target.checked;\r\n        let automaticTimezone = '';\r\n        let timezoneLabel: string;\r\n        let selectedOptionValue: string;\r\n\r\n        if (useAutomaticTimezone) {\r\n            automaticTimezone = getBrowserTimezone();\r\n            timezoneLabel = getTimezoneLabel(this.props.timezones, automaticTimezone);\r\n            selectedOptionValue = automaticTimezone;\r\n        } else {\r\n            timezoneLabel = getTimezoneLabel(this.props.timezones, getBrowserTimezone());\r\n            selectedOptionValue = getBrowserTimezone();\r\n            this.setState({\r\n                manualTimezone: getBrowserTimezone(),\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            useAutomaticTimezone,\r\n            automaticTimezone,\r\n            selectedOption: {label: timezoneLabel, value: selectedOptionValue},\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {timezones} = this.props;\r\n        const {useAutomaticTimezone} = this.state;\r\n\r\n        let index = 0;\r\n        let previousTimezone: Timezone;\r\n\r\n        const timeOptions = this.props.timezones.map((timeObject) => {\r\n            if (timeObject.utc[index] === previousTimezone?.utc[index]) {\r\n                index++;\r\n            } else {\r\n                // It's safe to use the first item since consecutive timezones\r\n                // don't have the same 'utc' array.\r\n                index = index === 0 ? index : 0;\r\n            }\r\n\r\n            previousTimezone = timeObject;\r\n\r\n            // Some more context on why different 'utc' items are used can be found here.\r\n            // https://github.com/mattermost/mattermost/pull/29290#issuecomment-2478492626\r\n            return {\r\n                value: timeObject.utc[index],\r\n                label: timeObject.text,\r\n            };\r\n        });\r\n\r\n        let serverError;\r\n        if (this.state.serverError) {\r\n            serverError = <label className='has-error'>{this.state.serverError}</label>;\r\n        }\r\n\r\n        const inputs = [];\r\n\r\n        // These are passed to the 'key' prop and should all be unique.\r\n        const inputId = {\r\n            automaticTimezoneInput: 1,\r\n            manualTimezoneInput: 2,\r\n            message: 3,\r\n        };\r\n\r\n        const reactStyles = {\r\n\r\n            menuPortal: (provided) => ({\r\n                ...provided,\r\n                zIndex: 9999,\r\n            }),\r\n\r\n        } satisfies StylesConfig<SelectedOption, boolean>;\r\n\r\n        const noTimezonesFromServer = timezones.length === 0;\r\n        const automaticTimezoneInput = (\r\n            <div\r\n                className='checkbox'\r\n                key={inputId.automaticTimezoneInput}\r\n            >\r\n                <label>\r\n                    <input\r\n                        id='automaticTimezoneInput'\r\n                        type='checkbox'\r\n                        checked={useAutomaticTimezone}\r\n                        onChange={this.handleAutomaticTimezone}\r\n                        disabled={noTimezonesFromServer}\r\n                    />\r\n                    <FormattedMessage\r\n                        id='user.settings.timezones.automatic'\r\n                        defaultMessage='Automatic'\r\n                    />\r\n\r\n                </label>\r\n            </div>\r\n        );\r\n\r\n        const manualTimezoneInput = (\r\n            <div\r\n                className='pt-2'\r\n                key={inputId.manualTimezoneInput}\r\n            >\r\n                <ReactSelect\r\n                    className='react-select react-select-top'\r\n                    classNamePrefix='react-select'\r\n                    id='displayTimezone'\r\n                    menuPortalTarget={document.body}\r\n                    styles={reactStyles}\r\n                    options={timeOptions}\r\n                    isClearable={false}\r\n                    onChange={this.onChange}\r\n                    value={this.state.selectedOption}\r\n                    aria-labelledby='changeInterfaceTimezoneLabel'\r\n                    isDisabled={useAutomaticTimezone}\r\n                />\r\n                {serverError}\r\n            </div>\r\n        );\r\n\r\n        inputs.push(automaticTimezoneInput);\r\n\r\n        inputs.push(manualTimezoneInput);\r\n\r\n        inputs.push(\r\n            <div key={inputId.message}>\r\n                <br/>\r\n                <FormattedMessage\r\n                    id='user.settings.timezones.promote'\r\n                    defaultMessage='Select the time zone used for timestamps in the user interface and email notifications.'\r\n                />\r\n            </div>,\r\n        );\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.display.timezone'\r\n                        defaultMessage='Timezone'\r\n                    />\r\n                }\r\n                containerStyle='timezone-container'\r\n                submit={this.changeTimezone}\r\n                saving={this.state.isSaving}\r\n                inputs={inputs}\r\n                updateSection={this.props.updateSection}\r\n                disableEnterSubmit={true}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\nimport timezones from 'timezones.json';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getCurrentTimezoneLabel} from 'mattermost-redux/selectors/entities/timezone';\r\n\r\nimport ManageTimezones from './manage_timezones';\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const timezoneLabel = getCurrentTimezoneLabel(state);\r\n    return {\r\n        timezones,\r\n        timezoneLabel,\r\n    };\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageTimezones);\r\n\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\n\r\nexport type Actions = {\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n};\r\n\r\nexport type OwnProps = {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    adminMode?: boolean;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    renderEmoticonsAsEmoji: string;\r\n    actions: Actions;\r\n}\r\n\r\nconst RenderEmoticonsAsEmoji: React.FC<Props> = ({user, renderEmoticonsAsEmoji, updateSection, actions}) => {\r\n    const [value, setValue] = useState<string>(renderEmoticonsAsEmoji);\r\n    const [isSaving, setIsSaving] = useState<boolean>(false);\r\n\r\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setValue(e.currentTarget.value);\r\n    }, []);\r\n\r\n    const submitPreference = useCallback(() => {\r\n        setIsSaving(true);\r\n        const pref: PreferenceType = {\r\n            user_id: user.id,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.RENDER_EMOTICONS_AS_EMOJI,\r\n            value,\r\n        };\r\n        actions.savePreferences(user.id, [pref]);\r\n        setIsSaving(false);\r\n        updateSection('');\r\n    }, [user.id, updateSection, actions, value]);\r\n\r\n    const changePreference = useCallback(() => {\r\n        if (value === renderEmoticonsAsEmoji) {\r\n            updateSection('');\r\n            return;\r\n        }\r\n\r\n        submitPreference();\r\n    }, [renderEmoticonsAsEmoji, updateSection, value, submitPreference]);\r\n\r\n    const options = [\r\n        {\r\n            option: 'true',\r\n            inputId: 'renderEmoticonsAsEmojiOn',\r\n            messageId: 'user.settings.advance.on',\r\n            defaultMessage: 'On',\r\n        },\r\n        {\r\n            option: 'false',\r\n            inputId: 'renderEmoticonsAsEmojiOff',\r\n            messageId: 'user.settings.advance.off',\r\n            defaultMessage: 'Off',\r\n        },\r\n    ];\r\n\r\n    const input = (\r\n        <fieldset key='renderEmoticonsAsEmojiSetting'>\r\n            <legend className='form-legend hidden-label'>\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                    defaultMessage='Render emoticons as emojis'\r\n                />\r\n            </legend>\r\n            {options.map(({option, inputId, messageId, defaultMessage}) => {\r\n                return (\r\n                    <div\r\n                        className='radio'\r\n                        key={option}\r\n                    >\r\n                        <label>\r\n                            <input\r\n                                id={inputId}\r\n                                type='radio'\r\n                                name='renderEmoticonsAsEmoji'\r\n                                value={option}\r\n                                checked={value === option}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <FormattedMessage\r\n                                id={messageId}\r\n                                defaultMessage={defaultMessage}\r\n                            />\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            })}\r\n            <div className='mt-5'>\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiDesc'\r\n                    defaultMessage='When enabled, text emoticons in messages will be rendered as emojis (For example :D as )'\r\n                />\r\n            </div>\r\n        </fieldset>\r\n    );\r\n\r\n    return (\r\n        <SettingItemMax\r\n            title={\r\n                <FormattedMessage\r\n                    id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                    defaultMessage='Render emoticons as emojis'\r\n                />\r\n            }\r\n            inputs={[input]}\r\n            submit={changePreference}\r\n            saving={isSaving}\r\n            updateSection={updateSection}\r\n            disableEnterSubmit={true}\r\n        />\r\n    );\r\n};\r\n\r\nexport default RenderEmoticonsAsEmoji;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\n\r\nimport RenderEmoticonsAsEmoji from './render_emoticons_as_emoji';\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(null, mapDispatchToProps)(RenderEmoticonsAsEmoji);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport deepEqual from 'fast-deep-equal';\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {FormattedMessage, defineMessage} from 'react-intl';\r\nimport type {Timezone} from 'timezones.json';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\nimport type {UserProfile, UserTimezone} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport ThemeSetting from 'components/user_settings/display/user_settings_theme';\r\n\r\nimport {getLanguageInfo} from 'i18n/i18n';\r\nimport type {Language} from 'i18n/i18n';\r\nimport Constants from 'utils/constants';\r\nimport {getBrowserTimezone} from 'utils/timezone';\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nimport ManageLanguages from './manage_languages';\r\nimport ManageTimezones from './manage_timezones';\r\nimport RenderEmoticonsAsEmoji from './render_emoticons_as_emoji';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst Preferences = Constants.Preferences;\r\n\r\nfunction getDisplayStateFromProps(props: Props) {\r\n    return {\r\n        militaryTime: props.militaryTime,\r\n        teammateNameDisplay: props.teammateNameDisplay,\r\n        availabilityStatusOnPosts: props.availabilityStatusOnPosts,\r\n        channelDisplayMode: props.channelDisplayMode,\r\n        messageDisplay: props.messageDisplay,\r\n        colorizeUsernames: props.colorizeUsernames,\r\n        collapseDisplay: props.collapseDisplay,\r\n        collapsedReplyThreads: props.collapsedReplyThreads,\r\n        linkPreviewDisplay: props.linkPreviewDisplay,\r\n        lastActiveDisplay: props.lastActiveDisplay.toString(),\r\n        oneClickReactionsOnPosts: props.oneClickReactionsOnPosts,\r\n        clickToReply: props.clickToReply,\r\n    };\r\n}\r\n\r\ntype ChildOption = {\r\n    label: MessageDescriptor;\r\n    value: string;\r\n    display: string;\r\n    more: MessageDescriptor;\r\n};\r\n\r\ntype Option = {\r\n    value: string;\r\n    radionButtonText: {\r\n        label: MessageDescriptor;\r\n        more?: MessageDescriptor;\r\n    };\r\n    childOption?: ChildOption;\r\n}\r\n\r\ntype SectionProps ={\r\n    section: string;\r\n    display: string;\r\n    defaultDisplay: string;\r\n    value: string;\r\n    title: MessageDescriptor;\r\n    firstOption: Option;\r\n    secondOption: Option;\r\n    thirdOption?: Option;\r\n    description: MessageDescriptor;\r\n    disabled?: boolean;\r\n    onSubmit?: () => void;\r\n}\r\n\r\nexport type OwnProps = {\r\n    user: UserProfile;\r\n    adminMode?: boolean;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    activeSection?: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm?: () => void;\r\n    timezones: Timezone[];\r\n    userTimezone: UserTimezone;\r\n    allowCustomThemes: boolean;\r\n    enableLinkPreviews: boolean;\r\n    locales: Record<string, Language>;\r\n    userLocale: string;\r\n    enableThemeSelection: boolean;\r\n    configTeammateNameDisplay: string;\r\n    shouldAutoUpdateTimezone: boolean | string;\r\n    lockTeammateNameDisplay: boolean;\r\n    militaryTime: string;\r\n    teammateNameDisplay: string;\r\n    availabilityStatusOnPosts: string;\r\n    channelDisplayMode: string;\r\n    messageDisplay: string;\r\n    colorizeUsernames: string;\r\n    collapseDisplay: string;\r\n    collapsedReplyThreads: string;\r\n    collapsedReplyThreadsAllowUserPreference: boolean;\r\n    clickToReply: string;\r\n    linkPreviewDisplay: string;\r\n    oneClickReactionsOnPosts: string;\r\n    emojiPickerEnabled: boolean;\r\n    timezoneLabel: string;\r\n    lastActiveDisplay: boolean;\r\n    lastActiveTimeEnabled: boolean;\r\n    renderEmoticonsAsEmoji: string;\r\n    actions: {\r\n        savePreferences: (userId: string, preferences: PreferenceType[]) => void;\r\n        autoUpdateTimezone: (deviceTimezone: string) => void;\r\n        updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n        patchUser: (user: UserProfile) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    [key: string]: any;\r\n    isSaving: boolean;\r\n    militaryTime: string;\r\n    teammateNameDisplay: string;\r\n    availabilityStatusOnPosts: string;\r\n    channelDisplayMode: string;\r\n    messageDisplay: string;\r\n    colorizeUsernames: string;\r\n    collapseDisplay: string;\r\n    collapsedReplyThreads: string;\r\n    linkPreviewDisplay: string;\r\n    lastActiveDisplay: string;\r\n    oneClickReactionsOnPosts: string;\r\n    clickToReply: string;\r\n    handleSubmit?: () => void;\r\n    serverError?: string;\r\n}\r\n\r\nexport default class UserSettingsDisplay extends React.PureComponent<Props, State> {\r\n    public prevSections: {\r\n        theme: string;\r\n\r\n        clock: string;\r\n        linkpreview: string;\r\n        message_display: string;\r\n        channel_display_mode: string;\r\n        languages: string;\r\n    };\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...getDisplayStateFromProps(props),\r\n            isSaving: false,\r\n        };\r\n\r\n        this.prevSections = {\r\n            theme: 'dummySectionName', // dummy value that should never match any section name\r\n            clock: 'theme',\r\n            linkpreview: 'clock',\r\n            message_display: 'linkpreview',\r\n            channel_display_mode: 'message_display',\r\n            languages: 'channel_display_mode',\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {actions, shouldAutoUpdateTimezone} = this.props;\r\n\r\n        if (shouldAutoUpdateTimezone) {\r\n            actions.autoUpdateTimezone(getBrowserTimezone());\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (this.props.teammateNameDisplay !== prevProps.teammateNameDisplay) {\r\n            this.updateState();\r\n        }\r\n    }\r\n\r\n    submitLastActive = () => {\r\n        const {user, actions} = this.props;\r\n        const {lastActiveDisplay} = this.state;\r\n\r\n        const updatedUser = {\r\n            ...user,\r\n            props: {\r\n                ...user.props,\r\n                show_last_active: lastActiveDisplay,\r\n            },\r\n        };\r\n\r\n        const action = this.props.adminMode ? actions.patchUser : actions.updateMe;\r\n        action(updatedUser).\r\n            then((res) => {\r\n                if ('data' in res) {\r\n                    this.props.updateSection('');\r\n                } else if ('error' in res) {\r\n                    const {error} = res;\r\n                    let serverError;\r\n                    if (error instanceof Error) {\r\n                        serverError = error.message;\r\n                    } else {\r\n                        serverError = error as string;\r\n                    }\r\n                    this.setState({serverError, isSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        const userId = this.props.user.id;\r\n\r\n        const timePreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.USE_MILITARY_TIME,\r\n            value: this.state.militaryTime,\r\n        };\r\n        const availabilityStatusOnPostsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.AVAILABILITY_STATUS_ON_POSTS,\r\n            value: this.state.availabilityStatusOnPosts,\r\n        };\r\n        const teammateNameDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.NAME_NAME_FORMAT,\r\n            value: this.state.teammateNameDisplay,\r\n        };\r\n        const channelDisplayModePreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.CHANNEL_DISPLAY_MODE,\r\n            value: this.state.channelDisplayMode,\r\n        };\r\n        const messageDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.MESSAGE_DISPLAY,\r\n            value: this.state.messageDisplay,\r\n        };\r\n        const colorizeUsernamesPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLORIZE_USERNAMES,\r\n            value: this.state.colorizeUsernames,\r\n        };\r\n        const collapseDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLLAPSE_DISPLAY,\r\n            value: this.state.collapseDisplay,\r\n        };\r\n        const collapsedReplyThreadsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.COLLAPSED_REPLY_THREADS,\r\n            value: this.state.collapsedReplyThreads,\r\n        };\r\n        const linkPreviewDisplayPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.LINK_PREVIEW_DISPLAY,\r\n            value: this.state.linkPreviewDisplay,\r\n        };\r\n        const oneClickReactionsOnPostsPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.ONE_CLICK_REACTIONS_ENABLED,\r\n            value: this.state.oneClickReactionsOnPosts,\r\n        };\r\n        const clickToReplyPreference = {\r\n            user_id: userId,\r\n            category: Preferences.CATEGORY_DISPLAY_SETTINGS,\r\n            name: Preferences.CLICK_TO_REPLY,\r\n            value: this.state.clickToReply,\r\n        };\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        const preferences = [\r\n            timePreference,\r\n            channelDisplayModePreference,\r\n            messageDisplayPreference,\r\n            collapsedReplyThreadsPreference,\r\n            clickToReplyPreference,\r\n            collapseDisplayPreference,\r\n            linkPreviewDisplayPreference,\r\n            teammateNameDisplayPreference,\r\n            availabilityStatusOnPostsPreference,\r\n            oneClickReactionsOnPostsPreference,\r\n            colorizeUsernamesPreference,\r\n        ];\r\n\r\n        await this.props.actions.savePreferences(userId, preferences);\r\n\r\n        this.updateSection('');\r\n    };\r\n\r\n    handleClockRadio = (militaryTime: string) => {\r\n        this.setState({militaryTime});\r\n    };\r\n\r\n    handleTeammateNameDisplayRadio = (teammateNameDisplay: string) => {\r\n        this.setState({teammateNameDisplay});\r\n    };\r\n\r\n    handleAvailabilityStatusRadio = (availabilityStatusOnPosts: string) => {\r\n        this.setState({availabilityStatusOnPosts});\r\n    };\r\n\r\n    handleChannelDisplayModeRadio(channelDisplayMode: string) {\r\n        this.setState({channelDisplayMode});\r\n    }\r\n\r\n    handlemessageDisplayRadio(messageDisplay: string) {\r\n        this.setState({messageDisplay});\r\n    }\r\n\r\n    handleCollapseRadio(collapseDisplay: string) {\r\n        this.setState({collapseDisplay});\r\n    }\r\n\r\n    handleCollapseReplyThreadsRadio(collapsedReplyThreads: string) {\r\n        this.setState({collapsedReplyThreads});\r\n    }\r\n\r\n    handleLastActiveRadio(lastActiveDisplay: string) {\r\n        this.setState({lastActiveDisplay});\r\n    }\r\n\r\n    handleLinkPreviewRadio(linkPreviewDisplay: string) {\r\n        this.setState({linkPreviewDisplay});\r\n    }\r\n\r\n    handleOneClickReactionsRadio = (oneClickReactionsOnPosts: string) => {\r\n        this.setState({oneClickReactionsOnPosts});\r\n    };\r\n\r\n    handleClickToReplyRadio = (clickToReply: string) => {\r\n        this.setState({clickToReply});\r\n    };\r\n\r\n    handleOnChange(e: React.ChangeEvent, display: {[key: string]: any}) {\r\n        this.setState({...display});\r\n        a11yFocus(e.currentTarget as HTMLElement);\r\n    }\r\n\r\n    updateSection = (section: string) => {\r\n        this.updateState();\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    updateState = () => {\r\n        const newState = getDisplayStateFromProps(this.props);\r\n        if (!deepEqual(newState, this.state)) {\r\n            this.setState(newState);\r\n        }\r\n\r\n        this.setState({isSaving: false});\r\n    };\r\n\r\n    createSection(props: SectionProps) {\r\n        const {\r\n            section,\r\n            display,\r\n            value,\r\n            title,\r\n            firstOption,\r\n            secondOption,\r\n            thirdOption,\r\n            description,\r\n            disabled,\r\n            onSubmit,\r\n        } = props;\r\n        let extraInfo = null;\r\n        let submit: (() => Promise<void>) | (() => void) | null = onSubmit || this.handleSubmit;\r\n\r\n        const firstMessage = (\r\n            <FormattedMessage\r\n                id={firstOption.radionButtonText.label.id}\r\n                defaultMessage={firstOption.radionButtonText.label.defaultMessage}\r\n            />\r\n        );\r\n\r\n        let moreColon;\r\n        let firstMessageMore;\r\n        if (firstOption.radionButtonText.more?.id) {\r\n            moreColon = ': ';\r\n            firstMessageMore = (\r\n                <span className='font-weight--normal'>\r\n                    <FormattedMessage\r\n                        id={firstOption.radionButtonText.more.id}\r\n                        defaultMessage={firstOption.radionButtonText.more.defaultMessage}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        const secondMessage = (\r\n            <FormattedMessage\r\n                id={secondOption.radionButtonText.label.id}\r\n                defaultMessage={secondOption.radionButtonText.label.defaultMessage}\r\n            />\r\n        );\r\n\r\n        let secondMessageMore;\r\n        if (secondOption.radionButtonText.more?.id) {\r\n            secondMessageMore = (\r\n                <span className='font-weight--normal'>\r\n                    <FormattedMessage\r\n                        id={secondOption.radionButtonText.more.id}\r\n                        defaultMessage={secondOption.radionButtonText.more.defaultMessage}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let thirdMessage;\r\n        if (thirdOption) {\r\n            thirdMessage = (\r\n                <FormattedMessage\r\n                    id={thirdOption.radionButtonText.label.id}\r\n                    defaultMessage={thirdOption.radionButtonText.label.defaultMessage}\r\n                />\r\n            );\r\n        }\r\n\r\n        const messageTitle = (\r\n            <FormattedMessage\r\n                id={title.id}\r\n                defaultMessage={title.defaultMessage}\r\n            />\r\n        );\r\n\r\n        const messageDesc = (\r\n            <FormattedMessage\r\n                id={description.id}\r\n                defaultMessage={description.defaultMessage}\r\n            />\r\n        );\r\n\r\n        const active = this.props.activeSection === section;\r\n        let max = null;\r\n        if (active) {\r\n            const format = [false, false, false];\r\n            let childOptionToShow: ChildOption | undefined;\r\n            if (value === firstOption.value) {\r\n                format[0] = true;\r\n                childOptionToShow = firstOption.childOption;\r\n            } else if (value === secondOption.value) {\r\n                format[1] = true;\r\n                childOptionToShow = secondOption.childOption;\r\n            } else {\r\n                format[2] = true;\r\n                if (thirdOption) {\r\n                    childOptionToShow = thirdOption.childOption;\r\n                }\r\n            }\r\n\r\n            const name = section + 'Format';\r\n            const key = section + 'UserDisplay';\r\n\r\n            const firstDisplay = {\r\n                [display]: firstOption.value,\r\n            };\r\n\r\n            const secondDisplay = {\r\n                [display]: secondOption.value,\r\n            };\r\n\r\n            let thirdSection;\r\n            if (thirdOption && thirdMessage) {\r\n                const thirdDisplay = {\r\n                    [display]: thirdOption.value,\r\n                };\r\n\r\n                thirdSection = (\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'C'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[2]}\r\n                                onChange={(e) => this.handleOnChange(e, thirdDisplay)}\r\n                            />\r\n                            {thirdMessage}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            let childOptionSection;\r\n            if (childOptionToShow) {\r\n                const childDisplay = childOptionToShow.display;\r\n                childOptionSection = (\r\n                    <div className='checkbox'>\r\n                        <hr/>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'childOption'}\r\n                                type='checkbox'\r\n                                name={childOptionToShow.label.id}\r\n                                checked={childOptionToShow.value === 'true'}\r\n                                onChange={(e) => {\r\n                                    this.handleOnChange(e, {[childDisplay]: e.target.checked ? 'true' : 'false'});\r\n                                }}\r\n                            />\r\n                            <FormattedMessage\r\n                                id={childOptionToShow.label.id}\r\n                                defaultMessage={childOptionToShow.label.defaultMessage}\r\n                            />\r\n                            {moreColon}\r\n                            <span className='font-weight--normal'>\r\n                                <FormattedMessage\r\n                                    id={childOptionToShow.more.id}\r\n                                    defaultMessage={childOptionToShow.more.defaultMessage}\r\n                                />\r\n                            </span>\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            let inputs = [\r\n                <fieldset key={key}>\r\n                    <legend className='form-legend hidden-label'>\r\n                        {messageTitle}\r\n                    </legend>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'A'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[0]}\r\n                                onChange={(e) => this.handleOnChange(e, firstDisplay)}\r\n                            />\r\n                            {firstMessage}\r\n                            {moreColon}\r\n                            {firstMessageMore}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    <div className='radio'>\r\n                        <label>\r\n                            <input\r\n                                id={name + 'B'}\r\n                                type='radio'\r\n                                name={name}\r\n                                checked={format[1]}\r\n                                onChange={(e) => this.handleOnChange(e, secondDisplay)}\r\n                            />\r\n                            {secondMessage}\r\n                            {moreColon}\r\n                            {secondMessageMore}\r\n                        </label>\r\n                        <br/>\r\n                    </div>\r\n                    {thirdSection}\r\n                    <div>\r\n                        <br/>\r\n                        {messageDesc}\r\n                    </div>\r\n                    {childOptionSection}\r\n                </fieldset>,\r\n            ];\r\n\r\n            if (display === 'teammateNameDisplay' && disabled) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.display.teammateNameDisplay'\r\n                            defaultMessage='This field is handled through your System Administrator. If you want to change it, you need to do so through your System Administrator.'\r\n                        />\r\n                    </span>\r\n                );\r\n                submit = null;\r\n                inputs = [];\r\n            }\r\n            max = (\r\n                <SettingItemMax\r\n                    title={messageTitle}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.isSaving}\r\n                    serverError={this.state.serverError}\r\n                    extraInfo={extraInfo}\r\n                    updateSection={this.updateSection}\r\n                />);\r\n        }\r\n\r\n        let describe;\r\n        if (value === firstOption.value) {\r\n            describe = firstMessage;\r\n        } else if (value === secondOption.value) {\r\n            describe = secondMessage;\r\n        } else {\r\n            describe = thirdMessage;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={messageTitle}\r\n                    describe={describe}\r\n                    section={section}\r\n                    updateSection={this.updateSection}\r\n                    max={max}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const collapseSection = this.createSection({\r\n            section: 'collapse',\r\n            display: 'collapseDisplay',\r\n            value: this.state.collapseDisplay,\r\n            defaultDisplay: 'false',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.collapseDisplay',\r\n                defaultMessage: 'Default Appearance of Image Previews',\r\n            }),\r\n            firstOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.collapseOn',\r\n                        defaultMessage: 'Expanded',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.collapseOff',\r\n                        defaultMessage: 'Collapsed',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.collapseDesc',\r\n                defaultMessage: 'Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.',\r\n            }),\r\n        });\r\n\r\n        let linkPreviewSection = null;\r\n\r\n        if (this.props.enableLinkPreviews) {\r\n            linkPreviewSection = this.createSection({\r\n                section: 'linkpreview',\r\n                display: 'linkPreviewDisplay',\r\n                value: this.state.linkPreviewDisplay,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.linkPreviewDisplay',\r\n                    defaultMessage: 'Website Link Previews',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.linkPreviewOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.linkPreviewOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.linkPreviewDesc',\r\n                    defaultMessage: 'When available, the first web link in a message will show a preview of the website content below the message.',\r\n                }),\r\n            });\r\n            this.prevSections.message_display = 'linkpreview';\r\n        } else {\r\n            this.prevSections.message_display = this.prevSections.linkpreview;\r\n        }\r\n\r\n        let lastActiveSection = null;\r\n\r\n        if (this.props.lastActiveTimeEnabled) {\r\n            lastActiveSection = this.createSection({\r\n                section: 'lastactive',\r\n                display: 'lastActiveDisplay',\r\n                value: this.state.lastActiveDisplay,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.lastActiveDisplay',\r\n                    defaultMessage: 'Share last active time',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.lastActiveOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.lastActiveOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.lastActiveDesc',\r\n                    defaultMessage: 'When enabled, other users will see when you were last active.',\r\n                }),\r\n                onSubmit: this.submitLastActive,\r\n            });\r\n        }\r\n\r\n        const clockSection = this.createSection({\r\n            section: 'clock',\r\n            display: 'militaryTime',\r\n            value: this.state.militaryTime,\r\n            defaultDisplay: 'false',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.clockDisplay',\r\n                defaultMessage: 'Clock Display',\r\n            }),\r\n            firstOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.normalClock',\r\n                        defaultMessage: '12-hour clock (example: 4:00 PM)',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.militaryClock',\r\n                        defaultMessage: '24-hour clock (example: 16:00)',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.preferTime',\r\n                defaultMessage: 'Select how you prefer time displayed.',\r\n            }),\r\n        });\r\n\r\n        const teammateNameDisplaySection = this.createSection({\r\n            section: Preferences.NAME_NAME_FORMAT,\r\n            display: 'teammateNameDisplay',\r\n            value: this.props.lockTeammateNameDisplay ? this.props.configTeammateNameDisplay : this.state.teammateNameDisplay,\r\n            defaultDisplay: this.props.configTeammateNameDisplay,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.teammateNameDisplayTitle',\r\n                defaultMessage: 'Teammate Name Display',\r\n            }),\r\n            firstOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayUsername',\r\n                        defaultMessage: 'Show username',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayNicknameFullname',\r\n                        defaultMessage: 'Show nickname if one exists, otherwise show first and last name',\r\n                    }),\r\n                },\r\n            },\r\n            thirdOption: {\r\n                value: Constants.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.teammateNameDisplayFullname',\r\n                        defaultMessage: 'Show first and last name',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.teammateNameDisplayDescription',\r\n                defaultMessage: 'Set how to display other user\\'s names in posts and the Direct Messages list.',\r\n            }),\r\n            disabled: this.props.lockTeammateNameDisplay,\r\n        });\r\n\r\n        const availabilityStatusOnPostsSection = this.createSection({\r\n            section: 'availabilityStatus',\r\n            display: 'availabilityStatusOnPosts',\r\n            value: this.state.availabilityStatusOnPosts,\r\n            defaultDisplay: 'true',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.availabilityStatusOnPostsTitle',\r\n                defaultMessage: 'Show user availability on posts',\r\n            }),\r\n            firstOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.on',\r\n                        defaultMessage: 'On',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.off',\r\n                        defaultMessage: 'Off',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.availabilityStatusOnPostsDescription',\r\n                defaultMessage: 'When enabled, online availability is displayed on profile images in the message list.',\r\n            }),\r\n        });\r\n\r\n        let timezoneSelection;\r\n        if (!this.props.shouldAutoUpdateTimezone) {\r\n            const userTimezone = this.props.userTimezone;\r\n            const active = this.props.activeSection === 'timezone';\r\n            let max = null;\r\n            if (active) {\r\n                max = (\r\n                    <ManageTimezones\r\n                        user={this.props.user}\r\n                        useAutomaticTimezone={Boolean(userTimezone.useAutomaticTimezone)}\r\n                        automaticTimezone={userTimezone.automaticTimezone}\r\n                        manualTimezone={userTimezone.manualTimezone}\r\n                        updateSection={this.updateSection}\r\n                        adminMode={this.props.adminMode}\r\n                    />\r\n                );\r\n            }\r\n            timezoneSelection = (\r\n                <div>\r\n                    <SettingItem\r\n                        active={active}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        title={\r\n                            <FormattedMessage\r\n                                id='user.settings.display.timezone'\r\n                                defaultMessage='Timezone'\r\n                            />\r\n                        }\r\n                        describe={this.props.timezoneLabel}\r\n                        section={'timezone'}\r\n                        updateSection={this.updateSection}\r\n                        max={max}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const messageDisplaySection = this.createSection({\r\n            section: Preferences.MESSAGE_DISPLAY,\r\n            display: 'messageDisplay',\r\n            value: this.state.messageDisplay,\r\n            defaultDisplay: Preferences.MESSAGE_DISPLAY_CLEAN,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.messageDisplayTitle',\r\n                defaultMessage: 'Message Display',\r\n            }),\r\n            firstOption: {\r\n                value: Preferences.MESSAGE_DISPLAY_CLEAN,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayClean',\r\n                        defaultMessage: 'Standard',\r\n                    }),\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCleanDes',\r\n                        defaultMessage: 'Easy to scan and read.',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Preferences.MESSAGE_DISPLAY_COMPACT,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCompact',\r\n                        defaultMessage: 'Compact',\r\n                    }),\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.messageDisplayCompactDes',\r\n                        defaultMessage: 'Fit as many messages on the screen as we can.',\r\n                    }),\r\n                },\r\n                childOption: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.colorize',\r\n                        defaultMessage: 'Colorize usernames',\r\n                    }),\r\n                    value: this.state.colorizeUsernames,\r\n                    display: 'colorizeUsernames',\r\n                    more: defineMessage({\r\n                        id: 'user.settings.display.colorizeDes',\r\n                        defaultMessage: 'Use colors to distinguish users in compact mode',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.messageDisplayDescription',\r\n                defaultMessage: 'Select how messages in a channel should be displayed.',\r\n            }),\r\n        });\r\n\r\n        let collapsedReplyThreads;\r\n\r\n        if (this.props.collapsedReplyThreadsAllowUserPreference) {\r\n            collapsedReplyThreads = this.createSection({\r\n                section: Preferences.COLLAPSED_REPLY_THREADS,\r\n                display: 'collapsedReplyThreads',\r\n                value: this.state.collapsedReplyThreads,\r\n                defaultDisplay: Preferences.COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT,\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.collapsedReplyThreadsTitle',\r\n                    defaultMessage: 'Threaded Discussions',\r\n                }),\r\n                firstOption: {\r\n                    value: Preferences.COLLAPSED_REPLY_THREADS_ON,\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.collapsedReplyThreadsOn',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: Preferences.COLLAPSED_REPLY_THREADS_OFF,\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.display.collapsedReplyThreadsOff',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.collapsedReplyThreadsDescription',\r\n                    defaultMessage: 'When enabled, reply messages are not shown in the channel and you\\'ll be notified about threads you\\'re following in the \"Threads\" view.',\r\n                }),\r\n            });\r\n        }\r\n\r\n        const clickToReply = this.createSection({\r\n            section: Preferences.CLICK_TO_REPLY,\r\n            display: 'clickToReply',\r\n            value: this.state.clickToReply,\r\n            defaultDisplay: 'true',\r\n            title: defineMessage({\r\n                id: 'user.settings.display.clickToReply',\r\n                defaultMessage: 'Click to open threads',\r\n            }),\r\n            firstOption: {\r\n                value: 'true',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.on',\r\n                        defaultMessage: 'On',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: 'false',\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.sidebar.off',\r\n                        defaultMessage: 'Off',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.clickToReplyDescription',\r\n                defaultMessage: 'When enabled, click anywhere on a message to open the reply thread.',\r\n            }),\r\n        });\r\n\r\n        const channelDisplayModeSection = this.createSection({\r\n            section: Preferences.CHANNEL_DISPLAY_MODE,\r\n            display: 'channelDisplayMode',\r\n            value: this.state.channelDisplayMode,\r\n            defaultDisplay: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\r\n            title: defineMessage({\r\n                id: 'user.settings.display.channelDisplayTitle',\r\n                defaultMessage: 'Channel Display',\r\n            }),\r\n            firstOption: {\r\n                value: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.fullScreen',\r\n                        defaultMessage: 'Full width',\r\n                    }),\r\n                },\r\n            },\r\n            secondOption: {\r\n                value: Preferences.CHANNEL_DISPLAY_MODE_CENTERED,\r\n                radionButtonText: {\r\n                    label: defineMessage({\r\n                        id: 'user.settings.display.fixedWidthCentered',\r\n                        defaultMessage: 'Fixed width, centered',\r\n                    }),\r\n                },\r\n            },\r\n            description: defineMessage({\r\n                id: 'user.settings.display.channeldisplaymode',\r\n                defaultMessage: 'Select the width of the center channel.',\r\n            }),\r\n        });\r\n\r\n        let languagesSection;\r\n        const userLocale = this.props.userLocale;\r\n        const localeName = getLanguageInfo(userLocale).name;\r\n\r\n        languagesSection = (\r\n            <div>\r\n                <SettingItem\r\n                    active={this.props.activeSection === 'languages'}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.language'\r\n                            defaultMessage='Language'\r\n                        />\r\n                    }\r\n                    describe={localeName}\r\n                    section={'languages'}\r\n                    updateSection={this.updateSection}\r\n                    max={(\r\n                        <ManageLanguages\r\n                            user={this.props.user}\r\n                            locale={userLocale}\r\n                            updateSection={this.updateSection}\r\n                            adminMode={this.props.adminMode}\r\n                        />\r\n                    )}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n\r\n        if (Object.keys(this.props.locales).length === 1) {\r\n            languagesSection = null;\r\n        }\r\n\r\n        let themeSection;\r\n        if (this.props.enableThemeSelection && !this.props.adminMode) {\r\n            themeSection = (\r\n                <div>\r\n                    <ThemeSetting\r\n                        selected={this.props.activeSection === 'theme'}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        updateSection={this.updateSection}\r\n                        setRequireConfirm={this.props.setRequireConfirm}\r\n                        allowCustomThemes={this.props.allowCustomThemes}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        let oneClickReactionsOnPostsSection;\r\n        if (this.props.emojiPickerEnabled) {\r\n            oneClickReactionsOnPostsSection = this.createSection({\r\n                section: Preferences.ONE_CLICK_REACTIONS_ENABLED,\r\n                display: 'oneClickReactionsOnPosts',\r\n                value: this.state.oneClickReactionsOnPosts,\r\n                defaultDisplay: 'true',\r\n                title: defineMessage({\r\n                    id: 'user.settings.display.oneClickReactionsOnPostsTitle',\r\n                    defaultMessage: 'Quick reactions on messages',\r\n                }),\r\n                firstOption: {\r\n                    value: 'true',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.sidebar.on',\r\n                            defaultMessage: 'On',\r\n                        }),\r\n                    },\r\n                },\r\n                secondOption: {\r\n                    value: 'false',\r\n                    radionButtonText: {\r\n                        label: defineMessage({\r\n                            id: 'user.settings.sidebar.off',\r\n                            defaultMessage: 'Off',\r\n                        }),\r\n                    },\r\n                },\r\n                description: defineMessage({\r\n                    id: 'user.settings.display.oneClickReactionsOnPostsDescription',\r\n                    defaultMessage: 'When enabled, you can react in one-click with recently used reactions when hovering over a message.',\r\n                }),\r\n            });\r\n        }\r\n\r\n        const renderEmoticonsAsEmojiSection = (\r\n            <div>\r\n                <SettingItem\r\n                    active={this.props.activeSection === 'renderEmoticonsAsEmoji'}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.renderEmoticonsAsEmojiTitle'\r\n                            defaultMessage='Render emoticons as emojis'\r\n                        />\r\n                    }\r\n                    describe={\r\n                        this.props.renderEmoticonsAsEmoji === 'true' ? (\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.on'\r\n                                defaultMessage='On'\r\n                            />\r\n                        ) : (\r\n                            <FormattedMessage\r\n                                id='user.settings.advance.off'\r\n                                defaultMessage='Off'\r\n                            />\r\n                        )\r\n                    }\r\n                    section='renderEmoticonsAsEmoji'\r\n                    updateSection={this.updateSection}\r\n                    max={(\r\n                        <RenderEmoticonsAsEmoji\r\n                            renderEmoticonsAsEmoji={this.props.renderEmoticonsAsEmoji}\r\n                            user={this.props.user}\r\n                            updateSection={this.updateSection}\r\n                            adminMode={this.props.adminMode}\r\n                            userPreferences={this.props.userPreferences}\r\n                        />\r\n                    )}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div\r\n                id='displaySettings'\r\n                aria-labelledby='displayButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.display.title'\r\n                            defaultMessage='Display Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        id='displaySettingsTitle'\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.display.title'\r\n                                defaultMessage='Display Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {themeSection}\r\n                    {collapsedReplyThreads}\r\n                    {clockSection}\r\n                    {teammateNameDisplaySection}\r\n                    {availabilityStatusOnPostsSection}\r\n                    {lastActiveSection}\r\n                    {timezoneSelection}\r\n                    {linkPreviewSection}\r\n                    {collapseSection}\r\n                    {messageDisplaySection}\r\n                    {clickToReply}\r\n                    {channelDisplayModeSection}\r\n                    {oneClickReactionsOnPostsSection}\r\n                    {renderEmoticonsAsEmojiSection}\r\n                    {languagesSection}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\nimport timezones from 'timezones.json';\r\n\r\nimport {CollapsedThreads} from '@mattermost/types/config';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {autoUpdateTimezone} from 'mattermost-redux/actions/timezone';\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    get,\r\n    isCollapsedThreadsAllowed,\r\n    getCollapsedThreadsPreference,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {\r\n    generateCurrentTimezoneLabel,\r\n    getCurrentTimezoneFull,\r\n    getCurrentTimezoneLabel,\r\n    getTimezoneForUserProfile,\r\n} from 'mattermost-redux/selectors/entities/timezone';\r\nimport {getCurrentUserId, getUser} from 'mattermost-redux/selectors/entities/users';\r\nimport {getUserCurrentTimezone} from 'mattermost-redux/utils/timezone_utils';\r\n\r\nimport {getLanguages, isLanguageAvailable} from 'i18n/i18n';\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './user_settings_display';\r\nimport UserSettingsDisplay from './user_settings_display';\r\n\r\nexport function makeMapStateToProps() {\r\n    return (state: GlobalState, props: OwnProps) => {\r\n        const config = getConfig(state);\r\n        const currentUserId = getCurrentUserId(state);\r\n        const userTimezone = props.adminMode ? getTimezoneForUserProfile(props.user) : getCurrentTimezoneFull(state);\r\n        const automaticTimezoneNotSet = userTimezone && userTimezone.useAutomaticTimezone && !userTimezone.automaticTimezone;\r\n        const shouldAutoUpdateTimezone = !userTimezone || automaticTimezoneNotSet;\r\n        const timezoneLabel = props.adminMode ? generateCurrentTimezoneLabel(getUserCurrentTimezone(userTimezone)) : getCurrentTimezoneLabel(state);\r\n        const allowCustomThemes = config.AllowCustomThemes === 'true';\r\n        const enableLinkPreviews = config.EnableLinkPreviews === 'true';\r\n        const enableThemeSelection = config.EnableThemeSelection === 'true';\r\n        const lockTeammateNameDisplay = getLicense(state).LockTeammateNameDisplay === 'true' && config.LockTeammateNameDisplay === 'true';\r\n        const configTeammateNameDisplay = config.TeammateNameDisplay as string;\r\n        const emojiPickerEnabled = config.EnableEmojiPicker === 'true';\r\n        const lastActiveTimeEnabled = config.EnableLastActiveTime === 'true';\r\n        const userPreference = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n\r\n        let lastActiveDisplay = true;\r\n        const user = props.adminMode ? props.user : getUser(state, currentUserId);\r\n        if (user.props?.show_last_active === 'false') {\r\n            lastActiveDisplay = false;\r\n        }\r\n\r\n        let userLocale = props.user.locale;\r\n        if (!isLanguageAvailable(state, userLocale)) {\r\n            userLocale = config.DefaultClientLocale as string;\r\n        }\r\n\r\n        return {\r\n            lockTeammateNameDisplay,\r\n            allowCustomThemes,\r\n            configTeammateNameDisplay,\r\n            enableLinkPreviews,\r\n            locales: getLanguages(state),\r\n            userLocale,\r\n            enableThemeSelection,\r\n            timezones,\r\n            timezoneLabel,\r\n            userTimezone,\r\n            shouldAutoUpdateTimezone,\r\n            availabilityStatusOnPosts: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.AVAILABILITY_STATUS_ON_POSTS, Preferences.AVAILABILITY_STATUS_ON_POSTS_DEFAULT, userPreference),\r\n            militaryTime: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.USE_MILITARY_TIME, Preferences.USE_MILITARY_TIME_DEFAULT, userPreference),\r\n            teammateNameDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.NAME_NAME_FORMAT, configTeammateNameDisplay, userPreference),\r\n            channelDisplayMode: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.CHANNEL_DISPLAY_MODE, Preferences.CHANNEL_DISPLAY_MODE_DEFAULT, userPreference),\r\n            messageDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT, userPreference),\r\n            colorizeUsernames: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLORIZE_USERNAMES, Preferences.COLORIZE_USERNAMES_DEFAULT, userPreference),\r\n            collapseDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLLAPSE_DISPLAY, Preferences.COLLAPSE_DISPLAY_DEFAULT, userPreference),\r\n            collapsedReplyThreadsAllowUserPreference: isCollapsedThreadsAllowed(state) && getConfig(state).CollapsedThreads !== CollapsedThreads.ALWAYS_ON,\r\n            collapsedReplyThreads: getCollapsedThreadsPreference(state),\r\n            clickToReply: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.CLICK_TO_REPLY, Preferences.CLICK_TO_REPLY_DEFAULT, userPreference),\r\n            linkPreviewDisplay: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.LINK_PREVIEW_DISPLAY, Preferences.LINK_PREVIEW_DISPLAY_DEFAULT, userPreference),\r\n            oneClickReactionsOnPosts: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.ONE_CLICK_REACTIONS_ENABLED, Preferences.ONE_CLICK_REACTIONS_ENABLED_DEFAULT, userPreference),\r\n            renderEmoticonsAsEmoji: get(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.RENDER_EMOTICONS_AS_EMOJI, Preferences.RENDER_EMOTICONS_AS_EMOJI_DEFAULT, userPreference),\r\n            emojiPickerEnabled,\r\n            lastActiveDisplay,\r\n            lastActiveTimeEnabled,\r\n        };\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            autoUpdateTimezone,\r\n            savePreferences,\r\n            updateMe,\r\n            patchUser,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(makeMapStateToProps, mapDispatchToProps)(UserSettingsDisplay);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {Component, createRef} from 'react';\r\nimport type {ChangeEvent, CSSProperties, MouseEvent, ReactNode, RefObject} from 'react';\r\nimport {defineMessage, FormattedMessage} from 'react-intl';\r\n\r\nimport FormError from 'components/form_error';\r\nimport LoadingWrapper from 'components/widgets/loading/loading_wrapper';\r\n\r\nimport {Constants} from 'utils/constants';\r\nimport * as FileUtils from 'utils/file_utils';\r\nimport {localizeMessage} from 'utils/utils';\r\n\r\nimport WithTooltip from './with_tooltip';\r\n\r\ntype Props = {\r\n    clientError?: ReactNode;\r\n    serverError?: ReactNode;\r\n    src?: string | null;\r\n    defaultImageSrc?: string;\r\n    file?: File | null;\r\n    loadingPicture?: boolean;\r\n    submitActive?: boolean;\r\n    onRemove?: () => void;\r\n    onSetDefault?: (() => Promise<void>) | null;\r\n    onSubmit?: (() => void) | null;\r\n    title?: string;\r\n    onFileChange?: (e: ChangeEvent<HTMLInputElement>) => void;\r\n    updateSection?: (e: MouseEvent<HTMLButtonElement>) => void;\r\n    imageContext?: string;\r\n    maxFileSize?: number;\r\n    helpText?: ReactNode;\r\n}\r\n\r\ntype State = {\r\n    image: string | null;\r\n    removeSrc: boolean;\r\n    setDefaultSrc: boolean;\r\n    orientationStyles?: CSSProperties;\r\n}\r\n\r\nexport default class SettingPicture extends Component<Props, State> {\r\n    static defaultProps = {\r\n        imageContext: 'profile',\r\n    };\r\n    private readonly settingList: RefObject<HTMLDivElement>;\r\n    private readonly selectInput: RefObject<HTMLInputElement>;\r\n    private readonly confirmButton: RefObject<HTMLButtonElement>;\r\n    private previewBlob: string | null;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.settingList = createRef();\r\n        this.selectInput = createRef();\r\n        this.confirmButton = createRef();\r\n        this.previewBlob = null;\r\n\r\n        this.state = {\r\n            image: null,\r\n            removeSrc: false,\r\n            setDefaultSrc: false,\r\n        };\r\n    }\r\n\r\n    focusFirstElement() {\r\n        this.settingList.current?.focus();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.focusFirstElement();\r\n\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.addEventListener('input', this.handleFileSelected);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (this.props.file && prevProps.file !== this.props.file) {\r\n            this.setPicture(this.props.file);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.previewBlob) {\r\n            URL.revokeObjectURL(this.previewBlob);\r\n        }\r\n\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.removeEventListener('input', this.handleFileSelected);\r\n        }\r\n    }\r\n\r\n    handleCancel = (e: MouseEvent<HTMLButtonElement>) => {\r\n        this.setState({removeSrc: false, setDefaultSrc: false});\r\n        this.props.updateSection?.(e);\r\n    };\r\n\r\n    handleFileSelected = () => {\r\n        if (this.confirmButton.current) {\r\n            this.confirmButton.current.focus();\r\n        }\r\n    };\r\n\r\n    handleSave = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        if (this.props.loadingPicture) {\r\n            return;\r\n        }\r\n        if (this.state.removeSrc) {\r\n            this.props.onRemove?.();\r\n        } else if (this.state.setDefaultSrc) {\r\n            this.props.onSetDefault?.();\r\n        } else {\r\n            this.props.onSubmit?.();\r\n        }\r\n    };\r\n\r\n    handleRemoveSrc = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        this.setState({removeSrc: true});\r\n        this.focusFirstElement();\r\n    };\r\n\r\n    handleSetDefaultSrc = (e: MouseEvent) => {\r\n        e.preventDefault();\r\n        this.setState({setDefaultSrc: true});\r\n        this.focusFirstElement();\r\n    };\r\n\r\n    handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({removeSrc: false, setDefaultSrc: false});\r\n        this.props.onFileChange?.(e);\r\n    };\r\n\r\n    handleInputFile = () => {\r\n        if (this.selectInput.current) {\r\n            this.selectInput.current.value = '';\r\n            this.selectInput.current.click();\r\n        }\r\n    };\r\n\r\n    setPicture = (file: File) => {\r\n        if (file) {\r\n            this.previewBlob = URL.createObjectURL(file);\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                const orientation = FileUtils.getExifOrientation(e.target!.result! as ArrayBuffer);\r\n                const orientationStyles = FileUtils.getOrientationStyles(orientation);\r\n\r\n                this.setState({\r\n                    image: this.previewBlob,\r\n                    orientationStyles,\r\n                });\r\n            };\r\n            reader.readAsArrayBuffer(file);\r\n        }\r\n    };\r\n\r\n    renderImg = () => {\r\n        const imageContext = this.props.imageContext;\r\n\r\n        if (this.props.file) {\r\n            const imageStyles = {\r\n                backgroundImage: 'url(' + this.state.image + ')',\r\n                ...this.state.orientationStyles,\r\n            };\r\n\r\n            return (\r\n                <div className={`${imageContext}-img-preview`}>\r\n                    <div className='img-preview__image'>\r\n                        <div\r\n                            style={imageStyles}\r\n                            className={`${imageContext}-img-preview`}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (this.state.setDefaultSrc) {\r\n            return (\r\n                <img\r\n                    className={`${imageContext}-img`}\r\n                    alt={`${imageContext} image`}\r\n                    src={this.props.defaultImageSrc}\r\n                />\r\n            );\r\n        }\r\n\r\n        if (this.props.src && !this.state.removeSrc) {\r\n            const imageElement = (\r\n                <img\r\n                    className={`${imageContext}-img`}\r\n                    alt={`${imageContext} image`}\r\n                    src={this.props.src}\r\n                />\r\n            );\r\n            if (!this.props.onRemove && !this.props.onSetDefault) {\r\n                return imageElement;\r\n            }\r\n\r\n            let title;\r\n            let handler;\r\n            if (this.props.onRemove) {\r\n                title = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.remove'\r\n                        defaultMessage='Remove This Icon'\r\n                    />\r\n                );\r\n                handler = this.handleRemoveSrc;\r\n            } else if (this.props.onSetDefault) {\r\n                title = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.remove_profile_picture'\r\n                        defaultMessage='Remove Profile Picture'\r\n                    />\r\n                );\r\n                handler = this.handleSetDefaultSrc;\r\n            }\r\n\r\n            return (\r\n                <div className={`${imageContext}-img__container`}>\r\n                    <div\r\n                        className='img-preview__image'\r\n                        aria-hidden={true}\r\n                    >\r\n                        {imageElement}\r\n                    </div>\r\n                    <WithTooltip\r\n                        title={title ?? ''}\r\n                        disabled={!title}\r\n                    >\r\n                        <button\r\n                            data-testid='removeSettingPicture'\r\n                            className={`${imageContext}-img__remove`}\r\n                            onClick={handler}\r\n                        >\r\n                            <span aria-hidden={true}>{''}</span>\r\n                            <span className='sr-only'>{title}</span>\r\n                        </button>\r\n                    </WithTooltip>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    render() {\r\n        const img = this.renderImg();\r\n\r\n        let confirmButtonClass = 'btn';\r\n        let disableSaveButtonFocus = false;\r\n        if (this.props.submitActive || this.state.removeSrc || this.state.setDefaultSrc) {\r\n            confirmButtonClass += ' btn-primary';\r\n        } else {\r\n            confirmButtonClass += ' btn-inactive disabled';\r\n            disableSaveButtonFocus = true;\r\n        }\r\n\r\n        let imgRender;\r\n        if (img) {\r\n            imgRender = (\r\n                <li\r\n                    className='setting-list-item'\r\n                    role='presentation'\r\n                >\r\n                    {img}\r\n                </li>\r\n            );\r\n        }\r\n\r\n        let buttonRender;\r\n        if (this.props.onSubmit) {\r\n            buttonRender = (\r\n                <span>\r\n                    <input\r\n                        data-testid='uploadPicture'\r\n                        ref={this.selectInput}\r\n                        className='hidden'\r\n                        accept={Constants.ACCEPT_STATIC_IMAGE}\r\n                        type='file'\r\n                        onChange={this.handleFileChange}\r\n                        disabled={this.props.loadingPicture}\r\n                        aria-hidden={true}\r\n                        tabIndex={-1}\r\n                    />\r\n                    <button\r\n                        data-testid='inputSettingPictureButton'\r\n                        className='btn btn-primary btn-file'\r\n                        disabled={this.props.loadingPicture}\r\n                        onClick={this.handleInputFile}\r\n                        aria-label={localizeMessage({id: 'setting_picture.select', defaultMessage: 'Select'})}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='setting_picture.select'\r\n                            defaultMessage='Select'\r\n                        />\r\n                    </button>\r\n                    <button\r\n                        tabIndex={disableSaveButtonFocus ? -1 : 0}\r\n                        data-testid='saveSettingPicture'\r\n                        disabled={disableSaveButtonFocus}\r\n                        ref={this.confirmButton}\r\n                        className={confirmButtonClass}\r\n                        onClick={this.handleSave}\r\n                        aria-label={this.props.loadingPicture ? localizeMessage({id: 'setting_picture.uploading', defaultMessage: 'Uploading...'}) : localizeMessage({id: 'setting_picture.save', defaultMessage: 'Save'})}\r\n                    >\r\n                        <LoadingWrapper\r\n                            loading={this.props.loadingPicture}\r\n                            text={defineMessage({id: 'setting_picture.uploading', defaultMessage: 'Uploading...'})}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='setting_picture.save'\r\n                                defaultMessage='Save'\r\n                            />\r\n                        </LoadingWrapper>\r\n                    </button>\r\n                </span>\r\n            );\r\n        }\r\n        return (\r\n            <section className='section-max form-horizontal'>\r\n                <h4 className='col-xs-12 section-title'>\r\n                    {this.props.title}\r\n                </h4>\r\n                <div className='col-sm-10 col-sm-offset-2'>\r\n                    <div\r\n                        className='setting-list'\r\n                        ref={this.settingList}\r\n                        tabIndex={-1}\r\n                        aria-label={this.props.title}\r\n                        aria-describedby='setting-picture__helptext'\r\n                    >\r\n                        {imgRender}\r\n                        <div\r\n                            id='setting-picture__helptext'\r\n                            className='setting-list-item pt-3'\r\n                        >\r\n                            {this.props.helpText}\r\n                        </div>\r\n                        <div\r\n                            className='setting-list-item'\r\n                        >\r\n                            <hr/>\r\n                            <FormError\r\n                                errors={[this.props.clientError, this.props.serverError]}\r\n                                type={'modal'}\r\n                            />\r\n                            {buttonRender}\r\n                            <button\r\n                                data-testid='cancelSettingPicture'\r\n                                className='btn btn-tertiary theme ml-2'\r\n                                onClick={this.handleCancel}\r\n                                aria-label={localizeMessage({id: 'setting_picture.cancel', defaultMessage: 'Cancel'})}\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='setting_picture.cancel'\r\n                                    defaultMessage='Cancel'\r\n                                />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React, {PureComponent} from 'react';\r\nimport {defineMessage, defineMessages, FormattedDate, FormattedMessage, FormattedList, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, ActionMeta, StylesConfig} from 'react-select';\r\n\r\nimport type {UserPropertyField, PropertyFieldOption} from '@mattermost/types/properties';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {LogErrorOptions} from 'mattermost-redux/actions/errors';\r\nimport {LogErrorBarMode} from 'mattermost-redux/actions/errors';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport {isEmail} from 'mattermost-redux/utils/helpers';\r\n\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingPicture from 'components/setting_picture';\r\nimport Input from 'components/widgets/inputs/input/input';\r\nimport LoadingWrapper from 'components/widgets/loading/loading_wrapper';\r\n\r\nimport {AnnouncementBarMessages, AnnouncementBarTypes, AcceptedProfileImageTypes, Constants, ValidationErrors} from 'utils/constants';\r\nimport {validHttpUrl} from 'utils/url';\r\nimport * as Utils from 'utils/utils';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst holders = defineMessages({\r\n    usernameReserved: {\r\n        id: 'user.settings.general.usernameReserved',\r\n        defaultMessage: 'This username is reserved, please choose a new one.',\r\n    },\r\n    usernameGroupNameUniqueness: {\r\n        id: 'user.settings.general.usernameGroupNameUniqueness',\r\n        defaultMessage: 'This username conflicts with an existing group name.',\r\n    },\r\n    usernameRestrictions: {\r\n        id: 'user.settings.general.usernameRestrictions',\r\n        defaultMessage: \"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-', and '_'.\",\r\n    },\r\n    validEmail: {\r\n        id: 'user.settings.general.validEmail',\r\n        defaultMessage: 'Please enter a valid email address.',\r\n    },\r\n    validUrl: {\r\n        id: 'user.settings.general.validUrl',\r\n        defaultMessage: 'Please enter a valid url.',\r\n    },\r\n    emailMatch: {\r\n        id: 'user.settings.general.emailMatch',\r\n        defaultMessage: 'The new emails you entered do not match.',\r\n    },\r\n    incorrectPassword: {\r\n        id: 'user.settings.general.incorrectPassword',\r\n        defaultMessage: 'Your password is incorrect.',\r\n    },\r\n    emptyPassword: {\r\n        id: 'user.settings.general.emptyPassword',\r\n        defaultMessage: 'Please enter your current password.',\r\n    },\r\n    validImage: {\r\n        id: 'user.settings.general.validImage',\r\n        defaultMessage: 'Only BMP, JPG, JPEG, or PNG images may be used for profile pictures',\r\n    },\r\n    imageTooLarge: {\r\n        id: 'user.settings.general.imageTooLarge',\r\n        defaultMessage: 'Unable to upload profile image. File is too large.',\r\n    },\r\n    uploadImage: {\r\n        id: 'user.settings.general.uploadImage',\r\n        defaultMessage: \"Click 'Edit' to upload an image.\",\r\n    },\r\n    uploadImageMobile: {\r\n        id: 'user.settings.general.mobile.uploadImage',\r\n        defaultMessage: 'Click to upload an image',\r\n    },\r\n    fullName: {\r\n        id: 'user.settings.general.fullName',\r\n        defaultMessage: 'Full Name',\r\n    },\r\n    nickname: {\r\n        id: 'user.settings.general.nickname',\r\n        defaultMessage: 'Nickname',\r\n    },\r\n    username: {\r\n        id: 'user.settings.general.username',\r\n        defaultMessage: 'Username',\r\n    },\r\n    profilePicture: {\r\n        id: 'user.settings.general.profilePicture',\r\n        defaultMessage: 'Profile Picture',\r\n    },\r\n    close: {\r\n        id: 'user.settings.general.close',\r\n        defaultMessage: 'Close',\r\n    },\r\n    position: {\r\n        id: 'user.settings.general.position',\r\n        defaultMessage: 'Position',\r\n    },\r\n});\r\n\r\nexport type SelectOption = {\r\n    value: string;\r\n    label: string;\r\n};\r\n\r\nconst selectStyles: StylesConfig<SelectOption, true> = {\r\n    valueContainer: (baseStyles) => ({\r\n        ...baseStyles,\r\n        height: 'auto',\r\n        minHeight: '38px',\r\n        flexWrap: 'wrap',\r\n        whiteSpace: 'normal',\r\n    }),\r\n    multiValue: (baseStyles) => ({\r\n        ...baseStyles,\r\n        margin: '2px',\r\n    }),\r\n    control: (baseStyles) => ({\r\n        ...baseStyles,\r\n        height: 'auto',\r\n        minHeight: '38px',\r\n    }),\r\n    multiValueLabel: (baseStyles) => ({\r\n        ...baseStyles,\r\n        padding: '2px 6px',\r\n    }),\r\n};\r\n\r\nexport type Props = {\r\n    intl: IntlShape;\r\n    user: UserProfile;\r\n    updateSection: (section: string) => void;\r\n    updateTab: (notifications: string) => void;\r\n    activeSection?: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    isMobileView: boolean;\r\n    maxFileSize: number;\r\n    customProfileAttributeFields: UserPropertyField[];\r\n    actions: {\r\n        logError: ({message, type}: {message: any; type: string}, options?: LogErrorOptions) => void;\r\n        clearErrors: () => void;\r\n        updateMe: (user: UserProfile) => Promise<ActionResult>;\r\n        sendVerificationEmail: (email: string) => Promise<ActionResult>;\r\n        setDefaultProfileImage: (id: string) => void;\r\n        uploadProfileImage: (id: string, file: File) => Promise<ActionResult>;\r\n        getCustomProfileAttributeValues: (userID: string) => Promise<ActionResult<Record<string, string | string[]>>>;\r\n        saveCustomProfileAttribute: (userID: string, attributeID: string, attributeValue: string | string[]) => Promise<ActionResult<Record<string, string | string[]>>>;\r\n    };\r\n    requireEmailVerification?: boolean;\r\n    ldapFirstNameAttributeSet?: boolean;\r\n    ldapLastNameAttributeSet?: boolean;\r\n    samlFirstNameAttributeSet?: boolean;\r\n    samlLastNameAttributeSet?: boolean;\r\n    ldapNicknameAttributeSet?: boolean;\r\n    samlNicknameAttributeSet?: boolean;\r\n    ldapPositionAttributeSet?: boolean;\r\n    samlPositionAttributeSet?: boolean;\r\n    ldapPictureAttributeSet?: boolean;\r\n    enableCustomProfileAttributes: boolean;\r\n}\r\n\r\ntype State = {\r\n    username: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    nickname: string;\r\n    position: string;\r\n    originalEmail: string;\r\n    email: string;\r\n    confirmEmail: string;\r\n    currentPassword: string;\r\n    pictureFile: File | null;\r\n    loadingPicture: boolean;\r\n    sectionIsSaving: boolean;\r\n    showSpinner: boolean;\r\n    resendStatus?: string;\r\n    pictureError?: string | null;\r\n    serverError?: string | {server_error_id: string; message: string};\r\n    emailError?: string;\r\n    customAttributeValues: Record<string, string | string[]>;\r\n}\r\n\r\nexport class UserSettingsGeneralTab extends PureComponent<Props, State> {\r\n    public submitActive = false;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = this.setupInitialState(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.enableCustomProfileAttributes && !this.props.user.custom_profile_attributes) {\r\n            this.props.actions.getCustomProfileAttributeValues(this.props.user.id);\r\n        }\r\n    }\r\n\r\n    handleEmailResend = (email: string) => {\r\n        this.setState({resendStatus: 'sending', showSpinner: true});\r\n        this.props.actions.sendVerificationEmail(email).then(({data, error: err}) => {\r\n            if (data) {\r\n                this.setState({resendStatus: 'success'});\r\n            } else if (err) {\r\n                this.setState({resendStatus: 'failure'});\r\n            }\r\n        });\r\n    };\r\n\r\n    createEmailResendLink = (email: string) => {\r\n        return (\r\n            <span className='resend-verification-wrapper'>\r\n                <LoadingWrapper\r\n                    loading={this.state.showSpinner}\r\n                    text={defineMessage({id: 'user.settings.general.sending', defaultMessage: 'Sending'})}\r\n                >\r\n                    <a\r\n                        onClick={() => {\r\n                            this.handleEmailResend(email);\r\n                            setTimeout(() => {\r\n                                this.setState({\r\n                                    showSpinner: false,\r\n                                });\r\n                            }, 500);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.general.sendAgain'\r\n                            defaultMessage='Send again'\r\n                        />\r\n                    </a>\r\n                </LoadingWrapper>\r\n            </span>\r\n        );\r\n    };\r\n\r\n    submitUsername = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const username = this.state.username.trim().toLowerCase();\r\n\r\n        if (user.username === username) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.username = username;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitNickname = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const nickname = this.state.nickname.trim();\r\n\r\n        if (user.nickname === nickname) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.nickname = nickname;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitName = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const firstName = this.state.firstName.trim();\r\n        const lastName = this.state.lastName.trim();\r\n\r\n        if (user.first_name === firstName && user.last_name === lastName) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.first_name = firstName;\r\n        user.last_name = lastName;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitEmail = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const confirmEmail = this.state.confirmEmail.trim().toLowerCase();\r\n        const currentPassword = this.state.currentPassword;\r\n\r\n        if (email === user.email && (confirmEmail === '' || confirmEmail === user.email)) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.email = email;\r\n        user.password = currentPassword;\r\n        this.submitUser(user, true);\r\n    };\r\n\r\n    isEmailValid = () => {\r\n        const email = this.state.email.trim().toLowerCase();\r\n        const confirmEmail = this.state.confirmEmail.trim().toLowerCase();\r\n        const currentPassword = this.state.currentPassword;\r\n\r\n        if (email === '' || !isEmail(email)) {\r\n            return false;\r\n        }\r\n\r\n        if (email !== confirmEmail) {\r\n            return false;\r\n        }\r\n\r\n        if (currentPassword === '') {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    submitUser = (user: UserProfile, emailUpdated: boolean) => {\r\n        const {formatMessage} = this.props.intl;\r\n        this.setState({sectionIsSaving: true});\r\n\r\n        this.props.actions.updateMe(user).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n\r\n                    const verificationEnabled = this.props.requireEmailVerification && emailUpdated;\r\n                    if (verificationEnabled) {\r\n                        this.props.actions.clearErrors();\r\n                        this.props.actions.logError({\r\n                            message: AnnouncementBarMessages.EMAIL_VERIFICATION_REQUIRED,\r\n                            type: AnnouncementBarTypes.SUCCESS,\r\n                        }, {errorBarMode: LogErrorBarMode.Always});\r\n                    }\r\n                } else if (err) {\r\n                    let serverError;\r\n                    if (err.server_error_id &&\r\n                        err.server_error_id === 'api.user.check_user_password.invalid.app_error') {\r\n                        serverError = formatMessage(holders.incorrectPassword);\r\n                    } else if (err.server_error_id === 'app.user.group_name_conflict') {\r\n                        serverError = formatMessage(holders.usernameGroupNameUniqueness);\r\n                    } else if (err.message) {\r\n                        serverError = err.message;\r\n                    } else {\r\n                        serverError = err;\r\n                    }\r\n                    this.setState({serverError, emailError: '', sectionIsSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    setDefaultProfilePicture = async () => {\r\n        try {\r\n            await this.props.actions.setDefaultProfileImage(this.props.user.id);\r\n            this.updateSection('');\r\n            this.submitActive = false;\r\n        } catch (err) {\r\n            let serverError;\r\n            if (err.message) {\r\n                serverError = err.message;\r\n            } else {\r\n                serverError = err;\r\n            }\r\n            this.setState({serverError, emailError: '', pictureError: '', sectionIsSaving: false});\r\n        }\r\n    };\r\n\r\n    submitPicture = () => {\r\n        if (!this.state.pictureFile) {\r\n            return;\r\n        }\r\n\r\n        if (!this.submitActive) {\r\n            return;\r\n        }\r\n\r\n        const {formatMessage} = this.props.intl;\r\n        const file = this.state.pictureFile;\r\n\r\n        if (!AcceptedProfileImageTypes.includes(file.type)) {\r\n            this.setState({pictureError: formatMessage(holders.validImage), serverError: ''});\r\n            return;\r\n        } else if (file.size > this.props.maxFileSize) {\r\n            this.setState({pictureError: formatMessage(holders.imageTooLarge), serverError: ''});\r\n            return;\r\n        }\r\n\r\n        this.setState({loadingPicture: true});\r\n\r\n        this.props.actions.uploadProfileImage(this.props.user.id, file).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n                    this.submitActive = false;\r\n                } else if (err) {\r\n                    const state = this.setupInitialState(this.props);\r\n                    state.serverError = err.message;\r\n                    this.setState(state);\r\n                }\r\n            });\r\n    };\r\n\r\n    submitPosition = () => {\r\n        const user = Object.assign({}, this.props.user);\r\n        const position = this.state.position.trim();\r\n\r\n        if (user.position === position) {\r\n            this.updateSection('');\r\n            return;\r\n        }\r\n\r\n        user.position = position;\r\n\r\n        this.submitUser(user, false);\r\n    };\r\n\r\n    submitAttribute = async (settings: string[]) => {\r\n        const attributeID = settings[0];\r\n        const attributeField = this.props.customProfileAttributeFields.find((field) => field.id === attributeID);\r\n        if (attributeField === undefined) {\r\n            return;\r\n        }\r\n        let attributeValue: string | string[] = this.state.customAttributeValues?.[attributeID];\r\n\r\n        if (typeof attributeValue === 'string' && attributeField.attrs && attributeField.attrs.value_type) {\r\n            if (attributeField.attrs.value_type === 'email') {\r\n                if (attributeValue !== '' && !isEmail(attributeValue)) {\r\n                    this.setState({emailError: '', serverError: ''});\r\n                    return;\r\n                }\r\n            }\r\n            if (attributeField.attrs.value_type === 'url') {\r\n                if (attributeValue !== '') {\r\n                    const validURL = validHttpUrl(attributeValue);\r\n                    if (!validURL) {\r\n                        this.setState({emailError: '', serverError: ''});\r\n                        return;\r\n                    }\r\n                    let validLink = validURL.toString();\r\n                    if (validLink.endsWith('/')) {\r\n                        validLink = validLink.slice(0, -1);\r\n                    }\r\n                    attributeValue = validLink;\r\n                }\r\n            }\r\n        }\r\n        if (attributeField.type === 'multiselect' && !attributeValue) {\r\n            attributeValue = [];\r\n        }\r\n\r\n        this.setState({sectionIsSaving: true});\r\n\r\n        this.props.actions.saveCustomProfileAttribute(this.props.user.id, attributeID, attributeValue as string).\r\n            then(({data, error: err}) => {\r\n                if (data) {\r\n                    this.updateSection('');\r\n                    this.setState({customAttributeValues: {...this.state.customAttributeValues, ...data}});\r\n                } else if (err) {\r\n                    const serverError = err.message;\r\n                    this.setState({serverError, emailError: '', sectionIsSaving: false});\r\n                }\r\n            });\r\n    };\r\n\r\n    updateUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({username: e.target.value});\r\n    };\r\n\r\n    updateFirstName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({firstName: e.target.value});\r\n    };\r\n\r\n    updateLastName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({lastName: e.target.value});\r\n    };\r\n\r\n    updateNickname = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({nickname: e.target.value});\r\n    };\r\n\r\n    updatePosition = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({position: e.target.value});\r\n    };\r\n\r\n    updateEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({email: e.target.value});\r\n    };\r\n\r\n    updateConfirmEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({confirmEmail: e.target.value});\r\n    };\r\n\r\n    updateCurrentPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({currentPassword: e.target.value});\r\n    };\r\n\r\n    updatePicture = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            this.setState({pictureFile: e.target.files[0]});\r\n\r\n            this.submitActive = true;\r\n            this.setState({pictureError: null});\r\n        } else {\r\n            this.setState({pictureFile: null});\r\n        }\r\n    };\r\n\r\n    updateSelectAttribute = (selectedOption: OnChangeValue<SelectOption, boolean>, action: ActionMeta<SelectOption>, fieldID: string) => {\r\n        const attributeValues = {...this.state.customAttributeValues};\r\n\r\n        if (!selectedOption) {\r\n            attributeValues[fieldID] = '';\r\n        } else if (Array.isArray(selectedOption)) {\r\n            // Handle multi-select\r\n            attributeValues[fieldID] = selectedOption.\r\n                filter((option): option is SelectOption =>\r\n                    Boolean(option && Object.hasOwn(option, 'value'))).\r\n                map((option) => option.value);\r\n        } else if ('value' in selectedOption) {\r\n            // Handle single select\r\n            attributeValues[fieldID] = selectedOption.value || '';\r\n        } else {\r\n            attributeValues[fieldID] = '';\r\n        }\r\n\r\n        this.setState({customAttributeValues: attributeValues});\r\n    };\r\n\r\n    updateAttribute = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const attributeValues = Object.assign({}, this.state.customAttributeValues);\r\n        const id = e.target.id.substring(e.target.id.indexOf('_') + 1);\r\n        attributeValues[id] = e.target.value;\r\n        this.setState({customAttributeValues: attributeValues});\r\n    };\r\n\r\n    updateSection = (section: string) => {\r\n        this.setState(Object.assign({}, this.setupInitialState(this.props), {pictureError: '', serverError: '', emailError: '', sectionIsSaving: false}));\r\n        this.submitActive = false;\r\n        this.props.updateSection(section);\r\n    };\r\n\r\n    setupInitialState(props: Props) {\r\n        const user = props.user;\r\n        return {\r\n            username: user.username,\r\n            firstName: user.first_name,\r\n            lastName: user.last_name,\r\n            nickname: user.nickname,\r\n            position: user.position,\r\n            originalEmail: user.email,\r\n            email: '',\r\n            confirmEmail: '',\r\n            currentPassword: '',\r\n            pictureFile: null,\r\n            loadingPicture: false,\r\n            sectionIsSaving: false,\r\n            showSpinner: false,\r\n            serverError: '',\r\n            customAttributeValues: user.custom_profile_attributes || {},\r\n        };\r\n    }\r\n\r\n    createEmailSection() {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'email';\r\n        let max = null;\r\n        if (active) {\r\n            const emailVerificationEnabled = this.props.requireEmailVerification;\r\n            const inputs = [];\r\n\r\n            let helpText = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emailHelp1'\r\n                    defaultMessage='Email is used for sign-in, notifications, and password reset. Email requires verification if changed.'\r\n                />\r\n            );\r\n\r\n            if (!emailVerificationEnabled) {\r\n                helpText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.emailHelp3'\r\n                        defaultMessage='Email is used for sign-in, notifications, and password reset.'\r\n                    />\r\n                );\r\n            }\r\n\r\n            let submit = null;\r\n\r\n            if (this.props.user.auth_service === '') {\r\n                inputs.push(\r\n                    <div key='currentEmailSetting'>\r\n                        <div className='form-group'>\r\n                            <span className='as-bs-label col-sm-5 control-label'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.currentEmail'\r\n                                    defaultMessage='Current Email'\r\n                                />\r\n                            </span>\r\n                            <div className='col-sm-7'>\r\n                                <span className='as-bs-label control-label word-break--all text-left'>{this.state.originalEmail}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='emailSetting'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='primaryEmail'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.newEmail'\r\n                                    defaultMessage='New Email'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    autoFocus={true}\r\n                                    id='primaryEmail'\r\n                                    name='primaryEmail'\r\n                                    type='email'\r\n                                    onChange={this.updateEmail}\r\n                                    maxLength={Constants.MAX_EMAIL_LENGTH}\r\n                                    value={this.state.email}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.newEmail', defaultMessage: 'New Email'})}\r\n                                    validate={(value) => {\r\n                                        if (value === '' || !isEmail(value as string)) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.validEmail),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='confirmEmailSetting'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='confirmEmail'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.confirmEmail'\r\n                                    defaultMessage='Confirm Email'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    id='confirmEmail'\r\n                                    name='confirmEmail'\r\n                                    type='email'\r\n                                    onChange={this.updateConfirmEmail}\r\n                                    maxLength={Constants.MAX_EMAIL_LENGTH}\r\n                                    value={this.state.confirmEmail}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.confirmEmail', defaultMessage: 'Confirm Email'})}\r\n                                    validate={(value) => {\r\n                                        if (this.state.email !== value) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.emailMatch),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div key='currentPassword'>\r\n                        <div className='form-group'>\r\n                            <label\r\n                                className='col-sm-5 control-label'\r\n                                htmlFor='currentPassword'\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.general.currentPassword'\r\n                                    defaultMessage='Current Password'\r\n                                />\r\n                            </label>\r\n                            <div className='col-sm-7'>\r\n                                <Input\r\n                                    id='currentPassword'\r\n                                    name='currentPassword'\r\n                                    type='password'\r\n                                    onChange={this.updateCurrentPassword}\r\n                                    value={this.state.currentPassword}\r\n                                    aria-label={formatMessage({id: 'user.settings.general.currentPassword', defaultMessage: 'Current Password'})}\r\n                                    validate={(value) => {\r\n                                        if (value === '') {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.emptyPassword),\r\n                                            };\r\n                                        }\r\n                                        return undefined;\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n\r\n                submit = this.submitEmail;\r\n            } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailGitlabCantUpdate'\r\n                                defaultMessage='Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailGoogleCantUpdate'\r\n                                defaultMessage='Login occurs through Google Apps. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.OFFICE365_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailOffice365CantUpdate'\r\n                                defaultMessage='Login occurs through Entra ID. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.OPENID_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailOpenIdCantUpdate'\r\n                                defaultMessage='Login occurs through OpenID Connect. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='pb-2'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailLdapCantUpdate'\r\n                                defaultMessage='Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='pb-2'\r\n                    >\r\n                        <div className='setting-list__hint pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.emailSamlCantUpdate'\r\n                                defaultMessage='Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.'\r\n                                values={{\r\n                                    email: this.state.originalEmail,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        {helpText}\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.general.email'\r\n                            defaultMessage='Email'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    isValid={this.isEmailValid()}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (this.props.user.auth_service === '') {\r\n            describe = this.props.user.email;\r\n        } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginGitlab'\r\n                    defaultMessage='Login done through GitLab ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginGoogle'\r\n                    defaultMessage='Login done through Google Apps ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.OFFICE365_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginOffice365'\r\n                    defaultMessage='Login done through Entra ID ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginLdap'\r\n                    defaultMessage='Login done through AD/LDAP ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.loginSaml'\r\n                    defaultMessage='Login done through SAML ({email})'\r\n                    values={{\r\n                        email: this.state.originalEmail,\r\n                    }}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.general.email'\r\n                        defaultMessage='Email'\r\n                    />\r\n                }\r\n                describe={describe}\r\n                section={'email'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    }\r\n\r\n    createNameSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'name';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if (\r\n                (this.props.user.auth_service === Constants.LDAP_SERVICE &&\r\n                    (this.props.ldapFirstNameAttributeSet || this.props.ldapLastNameAttributeSet)) ||\r\n                (this.props.user.auth_service === Constants.SAML_SERVICE &&\r\n                    (this.props.samlFirstNameAttributeSet || this.props.samlLastNameAttributeSet)) ||\r\n                (Constants.OAUTH_SERVICES.includes(this.props.user.auth_service))\r\n            ) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                inputs.push(\r\n                    <div\r\n                        key='firstNameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='firstName'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.general.firstName'\r\n                                defaultMessage='First Name'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='firstName'\r\n                                name='firstName'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updateFirstName}\r\n                                maxLength={Constants.MAX_FIRSTNAME_LENGTH}\r\n                                value={this.state.firstName}\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.firstName', defaultMessage: 'First Name'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='lastNameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='lastName'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.general.lastName'\r\n                                defaultMessage='Last Name'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='lastName'\r\n                                name='lastName'\r\n                                type='text'\r\n                                onChange={this.updateLastName}\r\n                                maxLength={Constants.MAX_LASTNAME_LENGTH}\r\n                                value={this.state.lastName}\r\n                                aria-label={formatMessage({id: 'user.settings.general.lastName', defaultMessage: 'Last Name'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                const notifClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\r\n                    e.preventDefault();\r\n                    this.updateSection('');\r\n                    this.props.updateTab('notifications');\r\n                };\r\n\r\n                const notifLink = (\r\n                    <a\r\n                        href='#'\r\n                        onClick={notifClick.bind(this)}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.general.notificationsLink'\r\n                            defaultMessage='Notifications'\r\n                        />\r\n                    </a>\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.notificationsExtra'\r\n                            defaultMessage='By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.'\r\n                            values={{\r\n                                notify: (notifLink),\r\n                            }}\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitName;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.fullName)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n\r\n        if (user.first_name && user.last_name) {\r\n            describe = user.first_name + ' ' + user.last_name;\r\n        } else if (user.first_name) {\r\n            describe = user.first_name;\r\n        } else if (user.last_name) {\r\n            describe = user.last_name;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyName'\r\n                    defaultMessage=\"Click 'Edit' to add your full name\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyName'\r\n                        defaultMessage='Click to add your full name'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.fullName)}\r\n                describe={describe}\r\n                section={'name'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createNicknameSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'nickname';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if ((this.props.user.auth_service === 'ldap' && this.props.ldapNicknameAttributeSet) || (this.props.user.auth_service === Constants.SAML_SERVICE && this.props.samlNicknameAttributeSet)) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                let nicknameLabel: JSX.Element|string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.nickname'\r\n                        defaultMessage='Nickname'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    nicknameLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='nicknameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{nicknameLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='nickname'\r\n                                name='nickname'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updateNickname}\r\n                                value={this.state.nickname}\r\n                                maxLength={Constants.MAX_NICKNAME_LENGTH}\r\n                                autoCapitalize='off'\r\n                                aria-label={formatMessage({id: 'user.settings.general.nickname', defaultMessage: 'Nickname'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.nicknameExtra'\r\n                            defaultMessage='Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitNickname;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.nickname)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (user.nickname) {\r\n            describe = user.nickname;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyNickname'\r\n                    defaultMessage=\"Click 'Edit' to add a nickname\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyNickname'\r\n                        defaultMessage='Click to add a nickname'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.nickname)}\r\n                describe={describe}\r\n                section={'nickname'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createUsernameSection = () => {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'username';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo;\r\n            let submit = null;\r\n            if (this.props.user.auth_service === '') {\r\n                let usernameLabel: JSX.Element | string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.username'\r\n                        defaultMessage='Username'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    usernameLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='usernameSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{usernameLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='username'\r\n                                name='username'\r\n                                autoFocus={true}\r\n                                maxLength={Constants.MAX_USERNAME_LENGTH}\r\n                                type='text'\r\n                                onChange={this.updateUsername}\r\n                                value={this.state.username}\r\n                                autoCapitalize='off'\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.username', defaultMessage: 'Username'})}\r\n                                validate={(value) => {\r\n                                    const usernameError = Utils.isValidUsername(value as string);\r\n                                    if (usernameError) {\r\n                                        if (usernameError.id === ValidationErrors.RESERVED_NAME) {\r\n                                            return {\r\n                                                type: 'error',\r\n                                                value: formatMessage(holders.usernameReserved),\r\n                                            };\r\n                                        }\r\n                                        return {\r\n                                            type: 'error',\r\n                                            value: formatMessage(holders.usernameRestrictions, {min: Constants.MIN_USERNAME_LENGTH, max: Constants.MAX_USERNAME_LENGTH}),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.usernameInfo'\r\n                            defaultMessage='Pick something easy for teammates to recognize and recall.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitUsername;\r\n            } else {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.username)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                    isValid={Utils.isValidUsername(this.state.username) === undefined}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.username)}\r\n                describe={this.props.user.username}\r\n                section={'username'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createPositionSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'position';\r\n        let max = null;\r\n        if (active) {\r\n            const inputs = [];\r\n\r\n            let extraInfo: JSX.Element|string;\r\n            let submit = null;\r\n            if ((this.props.user.auth_service === Constants.LDAP_SERVICE && this.props.ldapPositionAttributeSet) || (this.props.user.auth_service === Constants.SAML_SERVICE && this.props.samlPositionAttributeSet)) {\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                let positionLabel: JSX.Element | string = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.position'\r\n                        defaultMessage='Position'\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    positionLabel = '';\r\n                }\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='positionSetting'\r\n                        className='form-group'\r\n                    >\r\n                        <label className='col-sm-5 control-label'>{positionLabel}</label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='position'\r\n                                name='position'\r\n                                autoFocus={true}\r\n                                type='text'\r\n                                onChange={this.updatePosition}\r\n                                value={this.state.position}\r\n                                maxLength={Constants.MAX_POSITION_LENGTH}\r\n                                autoCapitalize='off'\r\n                                onFocus={Utils.moveCursorToEnd}\r\n                                aria-label={formatMessage({id: 'user.settings.general.position', defaultMessage: 'Position'})}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n\r\n                extraInfo = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.positionExtra'\r\n                            defaultMessage='Use Position for your role or job title. This will be shown in your profile popover.'\r\n                        />\r\n                    </span>\r\n                );\r\n\r\n                submit = this.submitPosition;\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={formatMessage(holders.position)}\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.sectionIsSaving}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.updateSection}\r\n                    extraInfo={extraInfo}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe: JSX.Element|string = '';\r\n        if (user.position) {\r\n            describe = user.position;\r\n        } else {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.emptyPosition'\r\n                    defaultMessage=\"Click 'Edit' to add your job title / position\"\r\n                />\r\n            );\r\n            if (this.props.isMobileView) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.mobile.emptyPosition'\r\n                        defaultMessage='Click to add your job title / position'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={formatMessage(holders.position)}\r\n                describe={describe}\r\n                section={'position'}\r\n                updateSection={this.updateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createCustomAttributeSection = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        if (this.props.customProfileAttributeFields == null) {\r\n            return <></>;\r\n        }\r\n\r\n        const attributeSections = this.props.customProfileAttributeFields.map((attribute) => {\r\n            const sectionName = 'customAttribute_' + attribute.id;\r\n            const active = this.props.activeSection === sectionName;\r\n            let max = null;\r\n\r\n            const getDisplayValue = (attributeValue: string | string[]) => {\r\n                if (!attributeValue || (!Array.isArray(attributeValue) && !attributeValue.length)) {\r\n                    return '';\r\n                }\r\n\r\n                if (attribute.type === 'select' || attribute.type === 'multiselect') {\r\n                    const attribOptions = attribute.attrs.options;\r\n                    if (!attribOptions) {\r\n                        return '';\r\n                    }\r\n                    if (Array.isArray(attributeValue)) {\r\n                        return attributeValue.map((value) => {\r\n                            const option = attribOptions.find((o) => o.id === value);\r\n                            if (option) {\r\n                                return {label: option?.name, value: option?.id};\r\n                            }\r\n                            return null;\r\n                        }).filter((value) => value != null);\r\n                    }\r\n\r\n                    // Handle single select\r\n                    const option = attribOptions.find((o) => o.id === attributeValue);\r\n                    if (option) {\r\n                        return {label: option?.name, value: option?.id};\r\n                    }\r\n                    return '';\r\n                }\r\n\r\n                return attributeValue as string;\r\n            };\r\n\r\n            if (active) {\r\n                const inputs = [];\r\n                let extraInfo: JSX.Element|string;\r\n                let submit = null;\r\n\r\n                const validate = () => {\r\n                    if (attribute.attrs?.value_type === 'email') {\r\n                        const value = this.state.customAttributeValues[attribute.id] as string;\r\n                        if (value && !isEmail(value)) {\r\n                            return {\r\n                                type: 'error' as const,\r\n                                value: formatMessage(holders.validEmail),\r\n                            };\r\n                        }\r\n                    }\r\n                    if (attribute.attrs?.value_type === 'url') {\r\n                        const value = this.state.customAttributeValues[attribute.id] as string;\r\n                        if (value) {\r\n                            const validURL = validHttpUrl(value);\r\n                            if (!validURL) {\r\n                                return {\r\n                                    type: 'error' as const,\r\n                                    value: formatMessage(holders.validUrl),\r\n                                };\r\n                            }\r\n                        }\r\n                    }\r\n                    return undefined;\r\n                };\r\n\r\n                if ((this.props.user.auth_service === Constants.LDAP_SERVICE && attribute.attrs?.ldap) ||\r\n                    (this.props.user.auth_service === Constants.SAML_SERVICE && attribute.attrs?.saml)) {\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.field_handled_externally'\r\n                                defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                            />\r\n                        </span>\r\n                    );\r\n                } else if (attribute.attrs?.managed === 'admin') {\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.field_managed_by_admin'\r\n                                defaultMessage='This field can only be changed by an administrator.'\r\n                            />\r\n                        </span>\r\n                    );\r\n                } else {\r\n                    let attributeLabel: JSX.Element | string = (\r\n                        attribute.name\r\n                    );\r\n                    if (this.props.isMobileView) {\r\n                        attributeLabel = '';\r\n                    }\r\n\r\n                    if (attribute.type === 'select' || attribute.type === 'multiselect') {\r\n                        const attribOptions: PropertyFieldOption[] = attribute.attrs!.options as PropertyFieldOption[];\r\n                        const opts = attribOptions.map((o) => {\r\n                            return {label: o.name, value: o.id} as SelectOption;\r\n                        });\r\n                        inputs.push(\r\n                            <ReactSelect\r\n                                isMulti={attribute.type === 'multiselect' ? true : undefined}\r\n                                key={sectionName}\r\n                                id={'customProfileAttribute_' + attribute.id}\r\n                                inputId={'customProfileAttribute_' + attribute.id + '_input'}\r\n                                className='react-select inlineSelect'\r\n                                classNamePrefix='react-select'\r\n                                options={opts}\r\n                                isClearable={true}\r\n                                isSearchable={false}\r\n                                isDisabled={false}\r\n                                placeholder={formatMessage({\r\n                                    id: 'user.settings.general.select',\r\n                                    defaultMessage: 'Select',\r\n                                })}\r\n                                components={{IndicatorSeparator: null}}\r\n                                styles={selectStyles}\r\n                                value={getDisplayValue(this.state.customAttributeValues[attribute.id]) as SelectOption}\r\n                                onChange={(v, a) => this.updateSelectAttribute(v, a, attribute.id)}\r\n                            />,\r\n                        );\r\n                    } else {\r\n                        const inputType = attribute.type as string;\r\n                        inputs.push(\r\n                            <div\r\n                                key={sectionName}\r\n                                className='form-group'\r\n                            >\r\n                                <label className='col-sm-5 control-label'>{attributeLabel}</label>\r\n                                <div className='col-sm-7'>\r\n                                    <Input\r\n                                        id={sectionName}\r\n                                        name={sectionName}\r\n                                        autoFocus={true}\r\n                                        type={inputType}\r\n                                        onChange={this.updateAttribute}\r\n                                        value={getDisplayValue(this.state.customAttributeValues[attribute.id]) as string}\r\n                                        maxLength={Constants.MAX_CUSTOM_ATTRIBUTE_LENGTH}\r\n                                        autoCapitalize='off'\r\n                                        onFocus={Utils.moveCursorToEnd}\r\n                                        aria-label={attribute.name}\r\n                                        validate={validate}\r\n                                    />\r\n                                </div>\r\n                            </div>,\r\n                        );\r\n                    }\r\n                    extraInfo = (\r\n                        <span>\r\n                            <FormattedMessage\r\n                                id='user.settings.general.attributeExtra'\r\n                                defaultMessage='This will be shown in your profile popover.'\r\n                            />\r\n                        </span>\r\n                    );\r\n\r\n                    submit = this.submitAttribute.bind(this, [attribute.id]);\r\n                }\r\n\r\n                max = (\r\n                    <SettingItemMax\r\n                        key={'settingItemMax_' + attribute.id}\r\n                        title={attribute.name}\r\n                        inputs={inputs}\r\n                        submit={submit}\r\n                        saving={this.state.sectionIsSaving}\r\n                        serverError={this.state.serverError}\r\n                        updateSection={this.updateSection}\r\n                        extraInfo={extraInfo}\r\n                        isValid={validate() === undefined}\r\n                    />\r\n                );\r\n            }\r\n            let describe: JSX.Element|string = '';\r\n            if (this.props.user.custom_profile_attributes?.[attribute.id]) {\r\n                const attributeValue = getDisplayValue(this.props.user.custom_profile_attributes?.[attribute.id]);\r\n                if (attributeValue) {\r\n                    if (typeof attributeValue === 'string') {\r\n                        describe = attributeValue;\r\n                    } else if (Array.isArray(attributeValue) && attributeValue.length > 0) {\r\n                        describe = <FormattedList value={attributeValue.map((attrib) => attrib?.label || null)}/>;\r\n                    } else if (!Array.isArray(attributeValue) && Object.hasOwn(attributeValue, 'label')) {\r\n                        describe = attributeValue.label || '';\r\n                    }\r\n                }\r\n            }\r\n            if (!describe) {\r\n                describe = (\r\n                    <FormattedMessage\r\n                        id='user.settings.general.emptyAttribute'\r\n                        defaultMessage=\"Click 'Edit' to add your custom attribute\"\r\n                    />\r\n                );\r\n                if (this.props.isMobileView) {\r\n                    describe = (\r\n                        <FormattedMessage\r\n                            id='user.settings.general.mobile.emptyAttribute'\r\n                            defaultMessage='Click to add your custom attribute'\r\n                        />\r\n                    );\r\n                }\r\n            }\r\n\r\n            return (\r\n                <div key={sectionName}>\r\n                    <SettingItem\r\n                        key={'settingItem_' + attribute.id}\r\n                        active={active}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        title={attribute.name}\r\n                        describe={describe}\r\n                        section={sectionName}\r\n                        updateSection={this.updateSection}\r\n                        max={max}\r\n                    />\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            );\r\n        });\r\n        return <>{attributeSections}</>;\r\n    };\r\n\r\n    createPictureSection = () => {\r\n        const user = this.props.user;\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        const active = this.props.activeSection === 'picture';\r\n        let max = null;\r\n\r\n        if (active) {\r\n            let submit = null;\r\n            let setDefault = null;\r\n            let helpText = null;\r\n            let imgSrc = null;\r\n\r\n            if ((this.props.user.auth_service === Constants.LDAP_SERVICE || this.props.user.auth_service === Constants.SAML_SERVICE) && this.props.ldapPictureAttributeSet) {\r\n                helpText = (\r\n                    <span>\r\n                        <FormattedMessage\r\n                            id='user.settings.general.field_handled_externally'\r\n                            defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                        />\r\n                    </span>\r\n                );\r\n            } else {\r\n                submit = this.submitPicture;\r\n                setDefault = user.last_picture_update > 0 ? this.setDefaultProfilePicture : null;\r\n                imgSrc = Utils.imageURLForUser(user.id, user.last_picture_update);\r\n                helpText = (\r\n                    <FormattedMessage\r\n                        id='setting_picture.help.profile'\r\n                        defaultMessage='Upload a picture in BMP, JPG, JPEG, or PNG format. Maximum file size: {max}'\r\n                        values={{max: Utils.fileSizeToString(this.props.maxFileSize)}}\r\n                    />\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingPicture\r\n                    title={formatMessage(holders.profilePicture)}\r\n                    onSubmit={submit}\r\n                    onSetDefault={setDefault}\r\n                    src={imgSrc}\r\n                    defaultImageSrc={Utils.defaultImageURLForUser(user.id)}\r\n                    serverError={this.state.serverError}\r\n                    clientError={this.state.pictureError}\r\n                    updateSection={(e: React.MouseEvent) => {\r\n                        this.updateSection('');\r\n                        e.preventDefault();\r\n                    }}\r\n                    file={this.state.pictureFile}\r\n                    onFileChange={this.updatePicture}\r\n                    submitActive={this.submitActive}\r\n                    loadingPicture={this.state.loadingPicture}\r\n                    maxFileSize={this.props.maxFileSize}\r\n                    helpText={helpText}\r\n                />\r\n            );\r\n        }\r\n\r\n        let minMessage: JSX.Element|string = formatMessage(holders.uploadImage);\r\n        if (this.props.isMobileView) {\r\n            minMessage = formatMessage(holders.uploadImageMobile);\r\n        }\r\n        if (user.last_picture_update > 0) {\r\n            minMessage = (\r\n                <FormattedMessage\r\n                    id='user.settings.general.imageUpdated'\r\n                    defaultMessage='Image last updated {date}'\r\n                    values={{\r\n                        date: (\r\n                            <FormattedDate\r\n                                value={new Date(user.last_picture_update)}\r\n                                day='2-digit'\r\n                                month='short'\r\n                                year='numeric'\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                <SettingItem\r\n                    active={active}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    title={formatMessage(holders.profilePicture)}\r\n                    describe={minMessage}\r\n                    section={'picture'}\r\n                    updateSection={this.updateSection}\r\n                    max={max}\r\n                />\r\n                <div\r\n                    className='sr-only'\r\n                    aria-live='polite'\r\n                    aria-atomic='true'\r\n                >\r\n                    {this.renderPictureStatus()}\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    renderPictureStatus = () => {\r\n        if (this.state.loadingPicture) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.uploading'\r\n                    defaultMessage='Uploading...'\r\n                />\r\n            );\r\n        } else if (this.state.pictureFile) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.selected'\r\n                    defaultMessage='Picture selected, ready to save'\r\n                />\r\n            );\r\n        } else if (this.submitActive) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.general.picture.uploaded'\r\n                    defaultMessage='Picture uploaded'\r\n                />\r\n            );\r\n        }\r\n        return null;\r\n    };\r\n\r\n    render() {\r\n        const nameSection = this.createNameSection();\r\n        const nicknameSection = this.createNicknameSection();\r\n        const usernameSection = this.createUsernameSection();\r\n        const positionSection = this.createPositionSection();\r\n        const emailSection = this.createEmailSection();\r\n        const customAttributeSection = this.createCustomAttributeSection();\r\n        const pictureSection = this.createPictureSection();\r\n\r\n        return (\r\n            <div\r\n                id='profileSettings'\r\n                aria-labelledby='profileButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.modal.profile'\r\n                            defaultMessage='Profile'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        id='generalSettingsTitle'\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.modal.profile'\r\n                                defaultMessage='Profile'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {nameSection}\r\n                    <div className='divider-light'/>\r\n                    {usernameSection}\r\n                    <div className='divider-light'/>\r\n                    {nicknameSection}\r\n                    <div className='divider-light'/>\r\n                    {positionSection}\r\n                    <div className='divider-light'/>\r\n                    {emailSection}\r\n                    <div className='divider-light'/>\r\n                    {customAttributeSection}\r\n                    {pictureSection}\r\n                    <div className='divider-dark'/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(UserSettingsGeneralTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {clearErrors, logError} from 'mattermost-redux/actions/errors';\r\nimport {\r\n    updateMe,\r\n    sendVerificationEmail,\r\n    setDefaultProfileImage,\r\n    uploadProfileImage,\r\n    saveCustomProfileAttribute,\r\n    getCustomProfileAttributeValues,\r\n} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getCustomProfileAttributes, getFeatureFlagValue, getLicense} from 'mattermost-redux/selectors/entities/general';\r\n\r\nimport {getIsMobileView} from 'selectors/views/browser';\r\n\r\nimport {isEnterpriseLicense} from 'utils/license_utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport UserSettingsGeneralTab from './user_settings_general';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const config = getConfig(state);\r\n    const customProfileAttributeFields = getCustomProfileAttributes(state);\r\n\r\n    const requireEmailVerification = config.RequireEmailVerification === 'true';\r\n    const maxFileSize = parseInt(config.MaxFileSize!, 10);\r\n    const ldapFirstNameAttributeSet = config.LdapFirstNameAttributeSet === 'true';\r\n    const ldapLastNameAttributeSet = config.LdapLastNameAttributeSet === 'true';\r\n    const samlFirstNameAttributeSet = config.SamlFirstNameAttributeSet === 'true';\r\n    const samlLastNameAttributeSet = config.SamlLastNameAttributeSet === 'true';\r\n    const ldapNicknameAttributeSet = config.LdapNicknameAttributeSet === 'true';\r\n    const samlNicknameAttributeSet = config.SamlNicknameAttributeSet === 'true';\r\n    const samlPositionAttributeSet = config.SamlPositionAttributeSet === 'true';\r\n    const ldapPositionAttributeSet = config.LdapPositionAttributeSet === 'true';\r\n    const ldapPictureAttributeSet = config.LdapPictureAttributeSet === 'true';\r\n\r\n    const license = getLicense(state);\r\n    const isEnterprise = isEnterpriseLicense(license);\r\n    const enableCustomProfileAttributes = isEnterprise && getFeatureFlagValue(state, 'CustomProfileAttributes') === 'true';\r\n\r\n    return {\r\n        isMobileView: getIsMobileView(state),\r\n        requireEmailVerification,\r\n        maxFileSize,\r\n        customProfileAttributeFields,\r\n        ldapFirstNameAttributeSet,\r\n        ldapLastNameAttributeSet,\r\n        samlFirstNameAttributeSet,\r\n        samlLastNameAttributeSet,\r\n        ldapNicknameAttributeSet,\r\n        samlNicknameAttributeSet,\r\n        samlPositionAttributeSet,\r\n        ldapPositionAttributeSet,\r\n        ldapPictureAttributeSet,\r\n        enableCustomProfileAttributes,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            logError,\r\n            clearErrors,\r\n            updateMe,\r\n            sendVerificationEmail,\r\n            setDefaultProfileImage,\r\n            uploadProfileImage,\r\n            saveCustomProfileAttribute,\r\n            getCustomProfileAttributeValues,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserSettingsGeneralTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect, type ConnectedProps} from 'react-redux';\r\n\r\nimport {patchUser, updateMe} from 'mattermost-redux/actions/users';\r\nimport {getSubscriptionProduct} from 'mattermost-redux/selectors/entities/cloud';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {\r\n    isCollapsedThreadsEnabled,\r\n    isCollapsedThreadsEnabledForUser,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport {isCallsEnabled, isCallsRingingEnabledOnServer} from 'selectors/calls';\r\n\r\nimport {isEnterpriseOrCloudOrSKUStarterFree} from 'utils/license_utils';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './user_settings_notifications';\r\nimport UserSettingsNotifications from './user_settings_notifications';\r\n\r\nconst mapStateToProps = (state: GlobalState, props: OwnProps) => {\r\n    // server config, related to server configuration, not the user\r\n    const config = getConfig(state);\r\n\r\n    const sendPushNotifications = config.SendPushNotifications === 'true';\r\n    const enableAutoResponder = config.ExperimentalEnableAutomaticReplies === 'true';\r\n\r\n    const license = getLicense(state);\r\n    const subscriptionProduct = getSubscriptionProduct(state);\r\n\r\n    const isEnterpriseReady = config.BuildEnterpriseReady === 'true';\r\n\r\n    return {\r\n        sendPushNotifications,\r\n        enableAutoResponder,\r\n        isCollapsedThreadsEnabled: props.adminMode && props.userPreferences ? isCollapsedThreadsEnabledForUser(state, props.userPreferences) : isCollapsedThreadsEnabled(state),\r\n        isCallsRingingEnabled: isCallsEnabled(state, '0.17.0') && isCallsRingingEnabledOnServer(state),\r\n        isEnterpriseOrCloudOrSKUStarterFree: isEnterpriseOrCloudOrSKUStarterFree(license, subscriptionProduct, isEnterpriseReady),\r\n        isEnterpriseReady,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    updateMe,\r\n    patchUser,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport type PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(UserSettingsNotifications);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport type {ComponentProps} from 'react';\r\nimport React, {useMemo} from 'react';\r\n\r\nimport SectionNotice from 'components/section_notice';\r\n\r\nimport type {PluginConfigurationAction} from 'types/plugins/user_settings';\r\n\r\nimport './plugin_action.scss';\r\n\r\ntype Props = {\r\n    action?: PluginConfigurationAction;\r\n};\r\n\r\nconst PluginAction = ({\r\n    action,\r\n}: Props) => {\r\n    const props = useMemo<ComponentProps<typeof SectionNotice>>(() => {\r\n        return action ? {\r\n            text: action.text,\r\n            title: action.title,\r\n            primaryButton: {\r\n                onClick: action?.onClick,\r\n                text: action?.buttonText,\r\n            },\r\n        } : {\r\n            text: '',\r\n            title: '',\r\n        };\r\n    }, [action]);\r\n\r\n    if (!action) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={'pluginActionContainer'}>\r\n            <SectionNotice {...props}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PluginAction;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nexport function getPluginPreferenceKey(pluginId: string) {\r\n    return `pp_${pluginId}`.slice(0, 32);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback} from 'react';\r\n\r\nimport Markdown from 'components/markdown';\r\n\r\nimport type {PluginConfigurationRadioSettingOption} from 'types/plugins/user_settings';\r\n\r\ntype Props = {\r\n    selectedValue: string;\r\n    name: string;\r\n    option: PluginConfigurationRadioSettingOption;\r\n    onSelected: (v: string) => void;\r\n}\r\n\r\nconst markdownOptions = {mentionHighlight: false};\r\n\r\nconst RadioOption = ({\r\n    selectedValue,\r\n    name,\r\n    option,\r\n    onSelected,\r\n}: Props) => {\r\n    const onChange = useCallback(() => onSelected(option.value), [option.value]);\r\n    return (\r\n        <div className={'radio'}>\r\n            <label >\r\n                <input\r\n                    type='radio'\r\n                    name={name}\r\n                    checked={selectedValue === option.value}\r\n                    onChange={onChange}\r\n                />\r\n                {option.text}\r\n            </label>\r\n            <br/>\r\n            {option.helpText && (\r\n                <Markdown\r\n                    message={option.helpText}\r\n                    options={markdownOptions}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RadioOption;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useState} from 'react';\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport {get as getPreference} from 'mattermost-redux/selectors/entities/preferences';\r\n\r\nimport Markdown from 'components/markdown';\r\n\r\nimport {getPluginPreferenceKey} from 'utils/plugins/preferences';\r\n\r\nimport type {PluginConfigurationRadioSetting} from 'types/plugins/user_settings';\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RadioOption from './radio_option';\r\n\r\ntype Props = {\r\n    setting: PluginConfigurationRadioSetting;\r\n    pluginId: string;\r\n    informChange: (name: string, value: string) => void;\r\n}\r\n\r\nconst RadioInput = ({\r\n    setting,\r\n    pluginId,\r\n    informChange,\r\n}: Props) => {\r\n    const preference = useSelector<GlobalState, string>((state: GlobalState) => getPreference(state, getPluginPreferenceKey(pluginId), setting.name, setting.default));\r\n    const [selectedValue, setSelectedValue] = useState(preference);\r\n\r\n    const onSelected = useCallback((value: string) => {\r\n        setSelectedValue(value);\r\n        informChange(setting.name, value);\r\n    }, [setting.name]);\r\n\r\n    return (\r\n        <fieldset key={setting.name}>\r\n            <legend className='form-legend hidden-label'>\r\n                {setting.title || setting.name}\r\n            </legend>\r\n            {setting.options.map((option) => (\r\n                <RadioOption\r\n                    key={option.value}\r\n                    name={setting.name}\r\n                    option={option}\r\n                    selectedValue={selectedValue}\r\n                    onSelected={onSelected}\r\n                />\r\n            ))}\r\n            {setting.helpText && (\r\n                <div className='mt-5'>\r\n                    <Markdown\r\n                        message={setting.helpText}\r\n                        options={{mentionHighlight: false}}\r\n                    />\r\n                </div>\r\n            )}\r\n        </fieldset>\r\n    );\r\n};\r\n\r\nexport default RadioInput;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect, useMemo, useRef} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {get as getPreference} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\n\r\nimport PluggableErrorBoundary from 'plugins/pluggable/error_boundary';\r\nimport {getPluginPreferenceKey} from 'utils/plugins/preferences';\r\n\r\nimport type {PluginConfigurationSection} from 'types/plugins/user_settings';\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport RadioInput from './radio';\r\n\r\ntype Props = {\r\n    pluginId: string;\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    section: PluginConfigurationSection;\r\n}\r\n\r\nconst PluginSetting = ({\r\n    pluginId,\r\n    section,\r\n    activeSection,\r\n    updateSection,\r\n}: Props) => {\r\n    const dispatch = useDispatch();\r\n    const userId = useSelector(getCurrentUserId);\r\n    const preferenceMin = useSelector<GlobalState, string>((state: GlobalState) => getPreference(state, getPluginPreferenceKey(pluginId), section.settings[0].name, section.settings[0].default));\r\n    const toUpdate = useRef<{[name: string]: string}>({});\r\n\r\n    const minDescribe = useMemo(() => {\r\n        const setting = section.settings[0];\r\n        if (setting.type === 'radio') {\r\n            return setting.options.find((v) => v.value === preferenceMin)?.text;\r\n        }\r\n\r\n        return undefined;\r\n    }, [section, preferenceMin]);\r\n\r\n    const onSettingChanged = useCallback((name: string, value: string) => {\r\n        toUpdate.current[name] = value;\r\n    }, []);\r\n\r\n    const updateSetting = useCallback(async () => {\r\n        const preferences = [];\r\n        for (const key of Object.keys(toUpdate.current)) {\r\n            preferences.push({\r\n                user_id: userId,\r\n                category: getPluginPreferenceKey(pluginId),\r\n                name: key,\r\n                value: toUpdate.current[key],\r\n            });\r\n        }\r\n\r\n        if (preferences.length) {\r\n            // Save preferences does not offer any await strategy or error handling\r\n            // so I am leaving this as is for now. We probably should update save\r\n            // preferences and handle any kind of error or network delay here.\r\n            dispatch(savePreferences(userId, preferences));\r\n            section.onSubmit?.(toUpdate.current);\r\n        }\r\n\r\n        updateSection('');\r\n    }, [pluginId, dispatch, section.onSubmit]);\r\n\r\n    useEffect(() => {\r\n        if (activeSection !== section.title) {\r\n            toUpdate.current = {};\r\n        }\r\n    }, [activeSection, section.title]);\r\n\r\n    const inputs = [];\r\n    for (const setting of section.settings) {\r\n        if (setting.type === 'radio') {\r\n            inputs.push(\r\n                <RadioInput\r\n                    key={setting.name}\r\n                    setting={setting}\r\n                    informChange={onSettingChanged}\r\n                    pluginId={pluginId}\r\n                />);\r\n        } else if (setting.type === 'custom') {\r\n            const CustomComponent = setting.component;\r\n            const inputEl = (\r\n                <PluggableErrorBoundary\r\n                    key={setting.name}\r\n                    pluginId={pluginId}\r\n                >\r\n                    <CustomComponent informChange={onSettingChanged}/>\r\n                </PluggableErrorBoundary>\r\n            );\r\n            inputs.push(inputEl);\r\n        }\r\n    }\r\n\r\n    if (!inputs.length) {\r\n        return null;\r\n    }\r\n\r\n    if (section.title === activeSection) {\r\n        return (\r\n            <SettingItemMax\r\n                title={section.title}\r\n                inputs={inputs}\r\n                submit={updateSetting}\r\n                updateSection={updateSection}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <SettingItemMin\r\n            section={section.title}\r\n            title={section.title}\r\n            updateSection={updateSection}\r\n            describe={minDescribe}\r\n            isDisabled={section.disabled}\r\n        />\r\n    );\r\n};\r\n\r\nexport default PluginSetting;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport PluggableErrorBoundary from 'plugins/pluggable/error_boundary';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport PluginAction from './plugin_action';\r\nimport PluginSetting from './plugin_setting';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\ntype Props = {\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    settings: PluginConfiguration;\r\n}\r\n\r\nconst PluginTab = ({\r\n    activeSection,\r\n    closeModal,\r\n    collapseModal,\r\n    settings,\r\n    updateSection,\r\n}: Props) => {\r\n    const intl = useIntl();\r\n\r\n    const headerText = intl.formatMessage(\r\n        {id: 'user.settings.plugins.title', defaultMessage: '{pluginName} Settings'},\r\n        {pluginName: settings.uiName},\r\n    );\r\n\r\n    return (\r\n        <div\r\n            id={`${settings.id}Settings`}\r\n            aria-labelledby={`${settings.id}Button`}\r\n            role='tabpanel'\r\n        >\r\n            <SettingMobileHeader\r\n                closeModal={closeModal}\r\n                collapseModal={collapseModal}\r\n                text={headerText}\r\n            />\r\n            <div className='user-settings'>\r\n                <SettingDesktopHeader text={headerText}/>\r\n                <PluginAction action={settings.action}/>\r\n                <div className='divider-dark first'/>\r\n                {settings.sections.map((v) => {\r\n                    let sectionEl;\r\n                    if ('component' in v) {\r\n                        const CustomComponent = v.component;\r\n                        sectionEl = (\r\n                            <PluggableErrorBoundary\r\n                                pluginId={settings.id}\r\n                            >\r\n                                <CustomComponent/>\r\n                            </PluggableErrorBoundary>\r\n                        );\r\n                    } else {\r\n                        sectionEl = (\r\n                            <PluginSetting\r\n                                pluginId={settings.id}\r\n                                activeSection={activeSection}\r\n                                section={v}\r\n                                updateSection={updateSection}\r\n                            />\r\n                        );\r\n                    }\r\n\r\n                    return (\r\n                        <React.Fragment key={v.title}>\r\n                            {sectionEl}\r\n                            <div className='divider-light'/>\r\n                        </React.Fragment>\r\n                    );\r\n                },\r\n                )}\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PluginTab;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useEffect} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Audit} from '@mattermost/types/audits';\r\n\r\nimport AuditTable from 'components/audit_table';\r\nimport LoadingScreen from 'components/loading_screen';\r\n\r\nimport './access_history_modal.scss';\r\n\r\ntype Props = {\r\n    onHide: () => void;\r\n    actions: {\r\n        getUserAudits: (userId: string, page?: number, perPage?: number) => void;\r\n    };\r\n    userAudits: Audit[];\r\n    currentUserId: string;\r\n}\r\n\r\nconst AccessHistoryModal = ({\r\n    actions: {\r\n        getUserAudits,\r\n    },\r\n    currentUserId,\r\n    onHide,\r\n    userAudits,\r\n}: Props) => {\r\n    useEffect(() => {\r\n        getUserAudits(currentUserId, 0, 200);\r\n    }, [currentUserId, getUserAudits]);\r\n\r\n    let content;\r\n    if (userAudits.length === 0) {\r\n        content = (<LoadingScreen/>);\r\n    } else {\r\n        content = (\r\n            <AuditTable\r\n                audits={userAudits}\r\n                showIp={true}\r\n                showSession={true}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <GenericModal\r\n            id='accessHistoryModal'\r\n            className='a11y__modal access-history-modal modal--scroll'\r\n            modalHeaderText={\r\n                <FormattedMessage\r\n                    id='access_history.title'\r\n                    defaultMessage='Access History'\r\n                />\r\n            }\r\n            modalHeaderTextId='accessHistoryModalLabel'\r\n            show={true}\r\n            onHide={onHide}\r\n            modalLocation='top'\r\n            isStacked={true}\r\n            compassDesign={true}\r\n            ariaLabelledby='accessHistoryModalLabel'\r\n        >\r\n            <div className='access-history-modal__body'>\r\n                {content}\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default React.memo(AccessHistoryModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getUserAudits} from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId, getUserAudits as getCurrentUserAudits} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport AccessHistoryModal from './access_history_modal';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        userAudits: getCurrentUserAudits(state) || [],\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getUserAudits,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AccessHistoryModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {formatAsString} from 'utils/i18n';\r\n\r\ntype Props = {\r\n    devicePicture?: string;\r\n    deviceTitle: MessageDescriptor | string;\r\n}\r\n\r\nexport default function DeviceIcon(props: Props) {\r\n    const intl = useIntl();\r\n\r\n    return (\r\n        <i\r\n            className={props.devicePicture}\r\n            title={formatAsString(intl.formatMessage, props.deviceTitle)}\r\n        />\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedDate, FormattedMessage, FormattedTime} from 'react-intl';\r\n\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport {getMonthLong} from 'utils/i18n';\r\n\r\ntype Props = {\r\n    locale: string;\r\n    currentSession: Session;\r\n    handleMoreInfo: () => void;\r\n    moreInfo: boolean;\r\n};\r\n\r\nexport default function MoreInfo(props: Props) {\r\n    const {locale, currentSession, handleMoreInfo, moreInfo} = props;\r\n\r\n    if (moreInfo) {\r\n        const firstAccessTime = new Date(currentSession.create_at);\r\n\r\n        return (\r\n            <div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.firstTime'\r\n                        defaultMessage='First time active: {date}, {time}'\r\n                        values={{\r\n                            date: (\r\n                                <FormattedDate\r\n                                    value={firstAccessTime}\r\n                                    day='2-digit'\r\n                                    month={getMonthLong(locale)}\r\n                                    year='numeric'\r\n                                />\r\n                            ),\r\n                            time: (\r\n                                <FormattedTime\r\n                                    value={firstAccessTime}\r\n                                    hour='2-digit'\r\n                                    minute='2-digit'\r\n                                />\r\n                            ),\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.os'\r\n                        defaultMessage='OS: {os}'\r\n                        values={{\r\n                            os: currentSession.props.os,\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.browser'\r\n                        defaultMessage='Browser: {browser}'\r\n                        values={{\r\n                            browser: currentSession.props.browser,\r\n                        }}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='activity_log.sessionId'\r\n                        defaultMessage='Session ID: {id}'\r\n                        values={{\r\n                            id: currentSession.id,\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <a\r\n            className='theme'\r\n            href='#'\r\n            onClick={handleMoreInfo}\r\n        >\r\n            <FormattedMessage\r\n                id='activity_log.moreInfo'\r\n                defaultMessage='More info'\r\n            />\r\n        </a>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {MessageDescriptor} from 'react-intl';\r\nimport {FormattedDate, FormattedMessage, FormattedTime, defineMessages} from 'react-intl';\r\n\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport {General} from 'mattermost-redux/constants';\r\n\r\nimport {getMonthLong} from 'utils/i18n';\r\n\r\nimport DeviceIcon from './device_icon';\r\nimport MoreInfo from './more_info';\r\n\r\ntype Props = {\r\n\r\n    /**\r\n     * The index of this instance within the list\r\n     */\r\n    index: number;\r\n\r\n    /**\r\n     * The current locale of the user\r\n     */\r\n    locale: string;\r\n\r\n    /**\r\n     * The session that's to be displayed\r\n     */\r\n    currentSession: Session;\r\n\r\n    /**\r\n     * Function to revoke session\r\n     */\r\n    submitRevoke: (sessionId: string, event: React.MouseEvent) => void;\r\n};\r\n\r\ntype State = {\r\n    moreInfo: boolean;\r\n};\r\n\r\ntype MobileSessionInfo = {\r\n    devicePicture?: string;\r\n    deviceTitle?: MessageDescriptor;\r\n    devicePlatform?: JSX.Element;\r\n};\r\n\r\nexport default class ActivityLog extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            moreInfo: false,\r\n        };\r\n    }\r\n\r\n    handleMoreInfo = (): void => {\r\n        this.setState({moreInfo: true});\r\n    };\r\n\r\n    submitRevoke = (e: React.MouseEvent): void => {\r\n        this.props.submitRevoke(this.props.currentSession.id, e);\r\n    };\r\n\r\n    isMobileSession = (session: Session): boolean => {\r\n        return Boolean(session.device_id && (session.device_id.includes('apple') || session.device_id.includes('android')));\r\n    };\r\n\r\n    mobileSessionInfo = (session: Session): MobileSessionInfo => {\r\n        let devicePlatform;\r\n        let devicePicture;\r\n        let deviceTitle;\r\n\r\n        if (session.device_id.includes('apple')) {\r\n            devicePicture = 'fa fa-apple';\r\n            deviceTitle = messages.appleIcon;\r\n            devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.iphoneNativeClassicApp'\r\n                    defaultMessage='iPhone Native Classic App'\r\n                />\r\n            );\r\n\r\n            if (session.device_id.includes(General.PUSH_NOTIFY_APPLE_REACT_NATIVE)) {\r\n                devicePlatform = (\r\n                    <FormattedMessage\r\n                        id='activity_log_modal.iphoneNativeApp'\r\n                        defaultMessage='iPhone Native App'\r\n                    />\r\n                );\r\n            }\r\n        } else if (session.device_id.includes('android')) {\r\n            devicePicture = 'fa fa-android';\r\n            deviceTitle = messages.androidIcon;\r\n            devicePlatform = (\r\n                <FormattedMessage\r\n                    id='activity_log_modal.androidNativeClassicApp'\r\n                    defaultMessage='Android Native Classic App'\r\n                />\r\n            );\r\n\r\n            if (session.device_id.includes(General.PUSH_NOTIFY_ANDROID_REACT_NATIVE)) {\r\n                devicePlatform = (\r\n                    <FormattedMessage\r\n                        id='activity_log_modal.androidNativeApp'\r\n                        defaultMessage='Android Native App'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return {\r\n            devicePicture,\r\n            deviceTitle,\r\n            devicePlatform,\r\n        };\r\n    };\r\n\r\n    render(): React.ReactNode {\r\n        const {\r\n            index,\r\n            locale,\r\n            currentSession,\r\n        } = this.props;\r\n\r\n        const lastAccessTime = new Date(currentSession.last_activity_at);\r\n        let devicePlatform = currentSession.props.platform;\r\n        let devicePicture: string | undefined = '';\r\n        let deviceTitle: MessageDescriptor | string = '';\r\n\r\n        if (this.isMobileSession(currentSession)) {\r\n            const sessionInfo = this.mobileSessionInfo(currentSession);\r\n            devicePicture = sessionInfo.devicePicture;\r\n            devicePlatform = sessionInfo.devicePlatform;\r\n            deviceTitle = sessionInfo.deviceTitle || deviceTitle;\r\n        } else {\r\n            if (currentSession.props.platform === 'Windows') {\r\n                devicePicture = 'fa fa-windows';\r\n                deviceTitle = messages.windowsIcon;\r\n            } else if (currentSession.props.platform === 'Macintosh' ||\r\n                currentSession.props.platform === 'iPhone') {\r\n                devicePicture = 'fa fa-apple';\r\n                deviceTitle = messages.appleIcon;\r\n            } else if (currentSession.props.platform === 'Linux') {\r\n                if (currentSession.props.os.indexOf('Android') >= 0) {\r\n                    devicePlatform = (\r\n                        <FormattedMessage\r\n                            id='activity_log_modal.android'\r\n                            defaultMessage='Android'\r\n                        />\r\n                    );\r\n                    devicePicture = 'fa fa-android';\r\n                    deviceTitle = messages.androidIcon;\r\n                } else {\r\n                    devicePicture = 'fa fa-linux';\r\n                    deviceTitle = messages.linuxIcon;\r\n                }\r\n            } else if (currentSession.props.os.indexOf('Linux') !== -1) {\r\n                devicePicture = 'fa fa-linux';\r\n                deviceTitle = messages.linuxIcon;\r\n            }\r\n\r\n            if (currentSession.props.browser.indexOf('Desktop App') !== -1) {\r\n                devicePlatform = (\r\n                    <FormattedMessage\r\n                        id='activity_log_modal.desktop'\r\n                        defaultMessage='Native Desktop App'\r\n                    />\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div\r\n                key={'activityLogEntryKey' + index}\r\n                className='activity-log__table'\r\n            >\r\n                <div className='activity-log__report'>\r\n                    <div className='report__platform'>\r\n                        <DeviceIcon\r\n                            devicePicture={devicePicture}\r\n                            deviceTitle={deviceTitle}\r\n                        />\r\n                        {devicePlatform}\r\n                    </div>\r\n                    <div className='report__info'>\r\n                        <div>\r\n                            <FormattedMessage\r\n                                id='activity_log.lastActivity'\r\n                                defaultMessage='Last activity: {date}, {time}'\r\n                                values={{\r\n                                    date: (\r\n                                        <FormattedDate\r\n                                            value={lastAccessTime}\r\n                                            day='2-digit'\r\n                                            month={getMonthLong(locale)}\r\n                                            year='numeric'\r\n                                        />\r\n                                    ),\r\n                                    time: (\r\n                                        <FormattedTime\r\n                                            value={lastAccessTime}\r\n                                            hour='2-digit'\r\n                                            minute='2-digit'\r\n                                        />\r\n                                    ),\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <MoreInfo\r\n                            locale={locale}\r\n                            currentSession={currentSession}\r\n                            moreInfo={this.state.moreInfo}\r\n                            handleMoreInfo={this.handleMoreInfo}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='activity-log__action'>\r\n                    <button\r\n                        onClick={this.submitRevoke}\r\n                        className='btn btn-primary'\r\n                    >\r\n                        <FormattedMessage\r\n                            id='activity_log.logout'\r\n                            defaultMessage='Log Out'\r\n                        />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst messages = defineMessages({\r\n    androidIcon: {\r\n        id: 'device_icons.android',\r\n        defaultMessage: 'Android Icon',\r\n    },\r\n    appleIcon: {\r\n        id: 'device_icons.apple',\r\n        defaultMessage: 'Apple Icon',\r\n    },\r\n    linuxIcon: {\r\n        id: 'device_icons.linux',\r\n        defaultMessage: 'Linux Icon',\r\n    },\r\n    windowsIcon: {\r\n        id: 'device_icons.windows',\r\n        defaultMessage: 'Windows Icon',\r\n    },\r\n});\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {useCallback, useEffect, useMemo} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {Session} from '@mattermost/types/sessions';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ActivityLog from 'components/activity_log_modal/components/activity_log';\r\n\r\nimport './activity_log_modal.scss';\r\n\r\nexport type Props = {\r\n\r\n    /**\r\n     * The current user id\r\n     */\r\n    currentUserId: string;\r\n\r\n    /**\r\n     * Current user's sessions\r\n     */\r\n    sessions: Session[];\r\n\r\n    /**\r\n     * Current user's locale\r\n     */\r\n    locale: string;\r\n\r\n    /**\r\n     * Function that's called when user closes the modal\r\n     */\r\n    onHide: () => void;\r\n\r\n    actions: {\r\n\r\n        /**\r\n         * Function to refresh sessions from server\r\n         */\r\n        getSessions: (userId: string) => void;\r\n\r\n        /**\r\n         * Function to revoke a particular session\r\n         */\r\n        revokeSession: (userId: string, sessionId: string) => Promise<ActionResult>;\r\n    };\r\n}\r\n\r\nconst ActivityLogModal = ({\r\n    currentUserId,\r\n    sessions,\r\n    locale,\r\n    onHide,\r\n    actions: {\r\n        getSessions,\r\n        revokeSession,\r\n    },\r\n}: Props) => {\r\n    const submitRevoke = useCallback((altId: string, e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        const modalContent = (e.target as Element)?.closest('.modal-content');\r\n        modalContent?.classList.add('animation--highlight');\r\n        setTimeout(() => {\r\n            modalContent?.classList.remove('animation--highlight');\r\n        }, 1500);\r\n        revokeSession(currentUserId, altId).then(() => {\r\n            getSessions(currentUserId);\r\n        });\r\n    }, [currentUserId, revokeSession, getSessions]);\r\n\r\n    useEffect(() => {\r\n        getSessions(currentUserId);\r\n    }, [currentUserId, getSessions]);\r\n\r\n    const activityList = useMemo(() => {\r\n        return sessions.reduce((array: JSX.Element[], currentSession, index) => {\r\n            if (currentSession.props.type === 'UserAccessToken') {\r\n                return array;\r\n            }\r\n\r\n            array.push(\r\n                <ActivityLog\r\n                    key={currentSession.id}\r\n                    index={index}\r\n                    locale={locale}\r\n                    currentSession={currentSession}\r\n                    submitRevoke={submitRevoke}\r\n                />,\r\n            );\r\n            return array;\r\n        }, []);\r\n    }, [sessions, locale, submitRevoke]);\r\n\r\n    const content = <form>{activityList}</form>;\r\n\r\n    return (\r\n        <GenericModal\r\n            id='activityLogModal'\r\n            className='activity-log-modal modal--scroll'\r\n            modalHeaderText={\r\n                <FormattedMessage\r\n                    id='activity_log.activeSessions'\r\n                    defaultMessage='Active Sessions'\r\n                />\r\n            }\r\n            show={true}\r\n            onHide={onHide}\r\n            ariaLabelledby='activityLogModalLabel'\r\n            modalLocation='top'\r\n            isStacked={true}\r\n            compassDesign={true}\r\n        >\r\n            <div className='activity-log-modal__body'>\r\n                <p className='session-help-text'>\r\n                    <FormattedMessage\r\n                        id='activity_log.sessionsDescription'\r\n                        defaultMessage=\"Sessions are created when you log in through a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the system administrator. To end the session sooner, use the 'Log Out' button.\"\r\n                    />\r\n                </p>\r\n                {content}\r\n            </div>\r\n        </GenericModal>\r\n    );\r\n};\r\n\r\nexport default React.memo(ActivityLogModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport {getSessions, revokeSession} from 'mattermost-redux/actions/users';\r\nimport {getCurrentUserId, getUserSessions} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {getCurrentLocale} from 'selectors/i18n';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport ActivityLogModal from './activity_log_modal';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        currentUserId: getCurrentUserId(state),\r\n        sessions: getUserSessions(state),\r\n        locale: getCurrentLocale(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getSessions,\r\n            revokeSession,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivityLogModal);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {getHistory} from 'utils/browser_history';\r\n\r\nconst SECTION_MFA = 'mfa';\r\n\r\ntype Props = {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n\r\n    // Whether or not the current user has MFA enabled\r\n    mfaActive: boolean;\r\n\r\n    // Whether or not the current user can enable MFA based on their authentication type and the server's settings\r\n    mfaAvailable: boolean;\r\n\r\n    // Whether or not this server enforces that all users have MFA\r\n    mfaEnforced: boolean;\r\n\r\n    updateSection: (section: string) => void;\r\n    actions: {deactivateMfa: () => Promise<{error?: {message: string}}>};\r\n}\r\n\r\ntype State = {\r\n    serverError: string|null;\r\n}\r\n\r\nexport default class MfaSection extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    public constructor(props: Props) {\r\n        super(props);\r\n        this.state = {\r\n            serverError: null,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    public setupMfa = (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n\r\n        getHistory().push('/mfa/setup');\r\n    };\r\n\r\n    public removeMfa = async (e: React.MouseEvent<HTMLElement>) => {\r\n        e.preventDefault();\r\n\r\n        const {error} = await this.props.actions.deactivateMfa();\r\n\r\n        if (error) {\r\n            this.setState({\r\n                serverError: error.message,\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (this.props.mfaEnforced) {\r\n            getHistory().push('/mfa/setup');\r\n            return;\r\n        }\r\n\r\n        this.props.updateSection('');\r\n        this.setState({\r\n            serverError: null,\r\n        });\r\n    };\r\n\r\n    private renderTitle = () => {\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.mfa.title'\r\n                defaultMessage='Multi-factor Authentication'\r\n            />\r\n        );\r\n    };\r\n\r\n    private renderDescription = () => {\r\n        if (this.props.mfaActive) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.security.active'\r\n                    defaultMessage='Active'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.security.inactive'\r\n                defaultMessage='Inactive'\r\n            />\r\n        );\r\n    };\r\n\r\n    private renderContent = () => {\r\n        let content;\r\n\r\n        if (this.props.mfaActive) {\r\n            let buttonText;\r\n\r\n            if (this.props.mfaEnforced) {\r\n                buttonText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.reset'\r\n                        defaultMessage='Reset MFA on Account'\r\n                    />\r\n                );\r\n            } else {\r\n                buttonText = (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.remove'\r\n                        defaultMessage='Remove MFA from Account'\r\n                    />\r\n                );\r\n            }\r\n\r\n            content = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.removeMfa}\r\n                >\r\n                    {buttonText}\r\n                </a>\r\n            );\r\n        } else {\r\n            content = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.setupMfa}\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.add'\r\n                        defaultMessage='Add MFA to Account'\r\n                    />\r\n                </a>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className='pt-2'>\r\n                {content}\r\n                <br/>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    private renderHelpText = () => {\r\n        if (this.props.mfaActive) {\r\n            if (this.props.mfaEnforced) {\r\n                return (\r\n                    <FormattedMessage\r\n                        id='user.settings.mfa.requiredHelp'\r\n                        defaultMessage='Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.'\r\n                    />\r\n                );\r\n            }\r\n\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.mfa.removeHelp'\r\n                    defaultMessage='Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.mfa.addHelp'\r\n                defaultMessage='Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.'\r\n            />\r\n        );\r\n    };\r\n\r\n    public render() {\r\n        const title = this.renderTitle();\r\n\r\n        if (!this.props.mfaAvailable) {\r\n            return null;\r\n        }\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section={SECTION_MFA}\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={this.renderContent()}\r\n                extraInfo={this.renderHelpText()}\r\n                serverError={this.state.serverError}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport {deactivateMfa} from 'actions/views/mfa';\r\n\r\nimport Constants from 'utils/constants';\r\n\r\nimport MfaSection from './mfa_section';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const license = getLicense(state);\r\n    const config = getConfig(state);\r\n    const mfaLicensed = license && license.IsLicensed === 'true' && license.MFA === 'true';\r\n    const mfaEnabled = config.EnableMultifactorAuthentication === 'true';\r\n    const mfaEnforced = mfaLicensed && config.EnforceMultifactorAuthentication === 'true';\r\n    const user: UserProfile = getCurrentUser(state);\r\n    let mfaActive = false;\r\n    let mfaAvailable = false;\r\n    if (user) {\r\n        mfaActive = (user as any).mfa_active;\r\n        mfaAvailable = mfaEnabled && (user.auth_service === '' || user.auth_service === Constants.LDAP_SERVICE);\r\n    }\r\n    return {\r\n        mfaActive,\r\n        mfaAvailable,\r\n        mfaEnforced,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            deactivateMfa,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MfaSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {UserAccessToken, UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport ExternalLink from 'components/external_link';\r\nimport SaveButton from 'components/save_button';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\r\n\r\nimport {Constants, DeveloperLinks} from 'utils/constants';\r\nimport * as Keyboard from 'utils/keyboard';\r\nimport {isMobile} from 'utils/user_agent';\r\n\r\nconst SECTION_TOKENS = 'tokens';\r\nconst TOKEN_CREATING = 'creating';\r\nconst TOKEN_CREATED = 'created';\r\nconst TOKEN_NOT_CREATING = 'not_creating';\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    active?: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    updateSection: (section: string) => void;\r\n    userAccessTokens: {[tokenId: string]: {description: string; id: string; is_active: boolean}};\r\n    setRequireConfirm: (isRequiredConfirm: boolean, confirmCopyToken: (confirmAction: () => void) => void) => void;\r\n    actions: {\r\n        getUserAccessTokensForUser: (userId: string, page: number, perPage: number) => void;\r\n        createUserAccessToken: (userId: string, description: string) => Promise<ActionResult<UserAccessToken>>;\r\n        revokeUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        enableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        disableUserAccessToken: (tokenId: string) => Promise<ActionResult>;\r\n        clearUserAccessTokens: () => void;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    active?: boolean;\r\n    showConfirmModal: boolean;\r\n    newToken?: UserAccessToken | null;\r\n    tokenCreationState?: string;\r\n    tokenError?: React.ReactNode;\r\n    serverError?: string|null;\r\n    saving?: boolean;\r\n    confirmTitle?: React.ReactNode;\r\n    confirmMessage?: ((state: State) => JSX.Element)|null;\r\n    confirmButton?: React.ReactNode;\r\n    confirmComplete?: (() => void)|null;\r\n    confirmHideCancel?: boolean;\r\n}\r\n\r\nexport default class UserAccessTokenSection extends React.PureComponent<Props, State> {\r\n    private minRef: React.RefObject<SettingItemMinComponent>;\r\n    private newtokendescriptionRef: React.RefObject<HTMLInputElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: this.props.active,\r\n            showConfirmModal: false,\r\n            newToken: null,\r\n            tokenCreationState: TOKEN_NOT_CREATING,\r\n            tokenError: '',\r\n            serverError: null,\r\n            saving: false,\r\n        };\r\n        this.newtokendescriptionRef = React.createRef();\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.actions.clearUserAccessTokens();\r\n        const userId = this.props.user ? this.props.user.id : '';\r\n        this.props.actions.getUserAccessTokensForUser(userId, 0, 200);\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps: Props, prevState: State) {\r\n        if (!nextProps.active && prevState.active) {\r\n            return {\r\n                active: nextProps.active,\r\n                showConfirmModal: false,\r\n                newToken: null,\r\n                tokenCreationState: TOKEN_NOT_CREATING,\r\n                tokenError: '',\r\n                serverError: null,\r\n                saving: false,\r\n            };\r\n        }\r\n        return {active: nextProps.active};\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    startCreatingToken = () => {\r\n        this.setState({tokenCreationState: TOKEN_CREATING});\r\n    };\r\n\r\n    stopCreatingToken = () => {\r\n        this.setState({tokenCreationState: TOKEN_NOT_CREATING, saving: false});\r\n    };\r\n\r\n    handleCreateToken = async () => {\r\n        this.handleCancelConfirm();\r\n\r\n        const description = this.newtokendescriptionRef ? this.newtokendescriptionRef.current!.value : '';\r\n\r\n        if (description === '') {\r\n            this.setState({\r\n                tokenError: (\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.nameRequired'\r\n                        defaultMessage='Please enter a description.'\r\n                    />\r\n                ),\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({tokenError: '', saving: true});\r\n        this.props.setRequireConfirm(true, this.confirmCopyToken);\r\n\r\n        const userId = this.props.user ? this.props.user.id : '';\r\n        const {data, error} = await this.props.actions.createUserAccessToken(userId, description);\r\n\r\n        if (data && this.state.tokenCreationState === TOKEN_CREATING) {\r\n            this.setState({tokenCreationState: TOKEN_CREATED, newToken: data, saving: false});\r\n        } else if (error) {\r\n            this.setState({serverError: error.message, saving: false});\r\n        }\r\n    };\r\n\r\n    confirmCopyToken = (confirmAction: () => void) => {\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCopyTitle'\r\n                    defaultMessage='Copied Your Token?'\r\n                />\r\n            ),\r\n            confirmMessage: (state: State) => (\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.confirmCopyMessage'\r\n                        defaultMessage=\"Make sure you have copied and saved the access token below. You won't be able to see it again!\"\r\n                    />\r\n                    <br/>\r\n                    <br/>\r\n                    {state.tokenCreationState === TOKEN_CREATING ? (\r\n                        <div>\r\n                            <strong className='word-break--all'>\r\n                                <FormattedMessage\r\n                                    id='user.settings.tokens.token'\r\n                                    defaultMessage='Access Token: '\r\n                                />\r\n                            </strong>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.tokenLoading'\r\n                                defaultMessage='Loading...'\r\n                            />\r\n                        </div>\r\n                    ) : (\r\n                        <strong className='word-break--all'>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.token'\r\n                                defaultMessage='Access Token: '\r\n                            />\r\n                            {state.newToken!.token}\r\n                        </strong>\r\n                    )}\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCopyButton'\r\n                    defaultMessage='Yes, I have copied the token'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.handleCancelConfirm();\r\n                confirmAction();\r\n            },\r\n            confirmHideCancel: true,\r\n        });\r\n    };\r\n\r\n    handleCancelConfirm = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            confirmTitle: null,\r\n            confirmMessage: null,\r\n            confirmButton: null,\r\n            confirmComplete: null,\r\n            confirmHideCancel: false,\r\n        });\r\n    };\r\n\r\n    confirmCreateToken = () => {\r\n        if (!UserUtils.isSystemAdmin(this.props.user!.roles)) {\r\n            this.handleCreateToken();\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCreateTitle'\r\n                    defaultMessage='Create System Admin Personal Access Token'\r\n                />\r\n            ),\r\n            confirmMessage: () => (\r\n                <div className='alert alert-danger'>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.confirmCreateMessage'\r\n                        defaultMessage='You are generating a personal access token with System Admin permissions. Are you sure want to create this token?'\r\n                    />\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmCreateButton'\r\n                    defaultMessage='Yes, Create'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.handleCreateToken();\r\n            },\r\n        });\r\n    };\r\n\r\n    saveTokenKeyPress = (e: React.KeyboardEvent) => {\r\n        if (Keyboard.isKeyPressed(e, Constants.KeyCodes.ENTER)) {\r\n            this.confirmCreateToken();\r\n        }\r\n    };\r\n\r\n    confirmRevokeToken = (tokenId: string) => {\r\n        const token = this.props.userAccessTokens[tokenId];\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            confirmTitle: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmDeleteTitle'\r\n                    defaultMessage='Delete Token?'\r\n                />\r\n            ),\r\n            confirmMessage: () => (\r\n                <div className='alert alert-danger'>\r\n                    <p>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.confirmDelete.description'\r\n                            defaultMessage={'Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action.'}\r\n                        />\r\n                    </p>\r\n                    <p>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.confirmDelete.confirmation'\r\n                            defaultMessage={'Are you sure you want to delete the <b>{description}</b> token?'}\r\n                            values={{\r\n                                description: token.description,\r\n                                b: (chunks: string) => <b>{chunks}</b>,\r\n                            }}\r\n                        />\r\n                    </p>\r\n                </div>\r\n            ),\r\n            confirmButton: (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.confirmDeleteButton'\r\n                    defaultMessage='Yes, Delete'\r\n                />\r\n            ),\r\n            confirmComplete: () => {\r\n                this.revokeToken(tokenId);\r\n            },\r\n        });\r\n    };\r\n\r\n    revokeToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.revokeUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n        this.handleCancelConfirm();\r\n    };\r\n\r\n    activateToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.enableUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    deactivateToken = async (tokenId: string) => {\r\n        const {error} = await this.props.actions.disableUserAccessToken(tokenId);\r\n        if (error) {\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let tokenListClass = '';\r\n\r\n        if (!this.props.active) {\r\n            const describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.tokens.clickToEdit'\r\n                    defaultMessage=\"Click 'Edit' to manage your personal access tokens\"\r\n                />\r\n            );\r\n\r\n            return (\r\n                <SettingItemMin\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.title'\r\n                            defaultMessage='Personal Access Tokens'\r\n                        />\r\n                    }\r\n                    describe={describe}\r\n                    section={SECTION_TOKENS}\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        const tokenList: JSX.Element[] = [];\r\n        Object.values(this.props.userAccessTokens).forEach((token) => {\r\n            if (this.state.newToken && this.state.newToken.id === token.id) {\r\n                return;\r\n            }\r\n\r\n            let activeLink: JSX.Element;\r\n            let activeStatus;\r\n\r\n            if (token.is_active) {\r\n                activeLink = (\r\n                    <a\r\n                        id={token.id + '_deactivate'}\r\n                        href='#'\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.deactivateToken(token.id);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.deactivate'\r\n                            defaultMessage='Disable'\r\n                        />\r\n                    </a>);\r\n            } else {\r\n                activeStatus = (\r\n                    <span className='has-error setting-box__inline-error'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.deactivatedWarning'\r\n                            defaultMessage='(Disabled)'\r\n                        />\r\n                    </span>\r\n                );\r\n                activeLink = (\r\n                    <a\r\n                        id={token.id + '_activate'}\r\n                        href='#'\r\n                        onClick={(e) => {\r\n                            e.preventDefault();\r\n                            this.activateToken(token.id);\r\n                        }}\r\n                    >\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.activate'\r\n                            defaultMessage='Enable'\r\n                        />\r\n                    </a>\r\n                );\r\n            }\r\n\r\n            tokenList.push(\r\n                <div\r\n                    key={token.id}\r\n                    className='setting-box__item'\r\n                >\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.tokenDesc'\r\n                            defaultMessage='Token Description: '\r\n                        />\r\n                        {token.description}\r\n                        {activeStatus}\r\n                    </div>\r\n                    <div className='setting-box__token-id whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.tokenId'\r\n                            defaultMessage='Token ID: '\r\n                        />\r\n                        {token.id}\r\n                    </div>\r\n                    <div>\r\n                        {activeLink}\r\n                        {' - '}\r\n                        <a\r\n                            id={token.id + '_delete'}\r\n                            href='#'\r\n                            onClick={(e) => {\r\n                                e.preventDefault();\r\n                                this.confirmRevokeToken(token.id);\r\n                            }}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.delete'\r\n                                defaultMessage='Delete'\r\n                            />\r\n                        </a>\r\n                    </div>\r\n                    <hr className='mb-3 mt-3'/>\r\n                </div>,\r\n            );\r\n        });\r\n\r\n        let noTokenText;\r\n        if (tokenList.length === 0) {\r\n            noTokenText = (\r\n                <FormattedMessage\r\n                    key='notokens'\r\n                    id='user.settings.tokens.userAccessTokensNone'\r\n                    defaultMessage='No personal access tokens.'\r\n                />\r\n            );\r\n        }\r\n\r\n        let extraInfo;\r\n        if (isMobile()) {\r\n            extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.description_mobile'\r\n                        defaultMessage='<linkTokens>Personal access tokens</linkTokens> function similarly to session tokens and can be used by integrations to <linkAPI>authenticate against the REST API</linkAPI>. Create new tokens on your desktop.'\r\n                        values={{\r\n                            linkTokens: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href={DeveloperLinks.PERSONAL_ACCESS_TOKENS}\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                            linkAPI: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='https://api.mattermost.com/#tag/authentication'\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </span>\r\n            );\r\n        } else {\r\n            extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.description'\r\n                        defaultMessage='<linkTokens>Personal access tokens</linkTokens> function similarly to session tokens and can be used by integrations to <linkAPI>authenticate against the REST API</linkAPI>.'\r\n                        values={{\r\n                            linkTokens: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href={DeveloperLinks.PERSONAL_ACCESS_TOKENS}\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                            linkAPI: (msg: React.ReactNode) => (\r\n                                <ExternalLink\r\n                                    href='https://api.mattermost.com/#tag/authentication'\r\n                                    location='user_access_token_section'\r\n                                >\r\n                                    {msg}\r\n                                </ExternalLink>\r\n                            ),\r\n                        }}\r\n                    />\r\n                </span>\r\n            );\r\n        }\r\n\r\n        let newTokenSection;\r\n        if (this.state.tokenCreationState === TOKEN_CREATING) {\r\n            newTokenSection = (\r\n                <div className='pl-3'>\r\n                    <div className='row'>\r\n                        <label\r\n                            className='col-sm-auto control-label pr-3'\r\n                            htmlFor='newTokenDescription'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.name'\r\n                                defaultMessage='Token Description: '\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-5'>\r\n                            <input\r\n                                id='newTokenDescription'\r\n                                autoFocus={true}\r\n                                ref={this.newtokendescriptionRef}\r\n                                className='form-control'\r\n                                type='text'\r\n                                maxLength={64}\r\n                                onKeyPress={this.saveTokenKeyPress}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <div className='pt-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.nameHelp'\r\n                                defaultMessage='Enter a description for your token to remember what it does.'\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label\r\n                                id='clientError'\r\n                                className='has-error mt-2 mb-2'\r\n                            >\r\n                                {this.state.tokenError}\r\n                            </label>\r\n                        </div>\r\n                        <SaveButton\r\n                            savingMessage={\r\n                                <FormattedMessage\r\n                                    id='user.settings.tokens.save'\r\n                                    defaultMessage='Save'\r\n                                />\r\n                            }\r\n                            saving={this.state.saving}\r\n                            onClick={this.confirmCreateToken}\r\n                        />\r\n                        <button\r\n                            className='btn btn-tertiary'\r\n                            onClick={this.stopCreatingToken}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.tokens.cancel'\r\n                                defaultMessage='Cancel'\r\n                            />\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else if (this.state.tokenCreationState === TOKEN_CREATED) {\r\n            if (tokenList.length === 0) {\r\n                tokenListClass = ' hidden';\r\n            }\r\n\r\n            newTokenSection = (\r\n                <div\r\n                    className='alert alert-warning'\r\n                >\r\n                    <WarningIcon additionalClassName='mr-2'/>\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.copy'\r\n                        defaultMessage=\"Please copy the access token below. You won't be able to see it again!\"\r\n                    />\r\n                    <br/>\r\n                    <br/>\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.name'\r\n                            defaultMessage='Token Description: '\r\n                        />\r\n                        {this.state.newToken!.description}\r\n                    </div>\r\n                    <div className='whitespace--nowrap overflow--ellipsis'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.id'\r\n                            defaultMessage='Token ID: '\r\n                        />\r\n                        {this.state.newToken!.id}\r\n                    </div>\r\n                    <strong className='word-break--all'>\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.token'\r\n                            defaultMessage='Access Token: '\r\n                        />\r\n                        {this.state.newToken!.token}\r\n                    </strong>\r\n                </div>\r\n            );\r\n        } else {\r\n            newTokenSection = (\r\n                <a\r\n                    className='btn btn-primary'\r\n                    href='#'\r\n                    onClick={this.startCreatingToken}\r\n                >\r\n                    <FormattedMessage\r\n                        id='user.settings.tokens.create'\r\n                        defaultMessage='Create Token'\r\n                    />\r\n                </a>\r\n            );\r\n        }\r\n\r\n        const inputs = [];\r\n        inputs.push(\r\n            <div\r\n                key='tokensSetting'\r\n                className='pt-2'\r\n            >\r\n                <div key='tokenList'>\r\n                    <div className={'alert alert-transparent' + tokenListClass}>\r\n                        {tokenList}\r\n                        {noTokenText}\r\n                    </div>\r\n                    {newTokenSection}\r\n                </div>\r\n            </div>,\r\n        );\r\n\r\n        return (\r\n            <div>\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.tokens.title'\r\n                            defaultMessage='Personal Access Tokens'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    extraInfo={extraInfo}\r\n                    infoPosition='top'\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.props.updateSection}\r\n                    isFullWidth={true}\r\n                    saving={this.state.saving}\r\n                    cancelButtonText={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.close'\r\n                            defaultMessage='Close'\r\n                        />\r\n                    }\r\n                />\r\n                <ConfirmModal\r\n                    title={this.state.confirmTitle}\r\n                    message={this.state.confirmMessage ? this.state.confirmMessage(this.state) : null}\r\n                    confirmButtonText={this.state.confirmButton}\r\n                    show={this.state.showConfirmModal}\r\n                    onConfirm={this.state.confirmComplete || (() => null)}\r\n                    onCancel={this.handleCancelConfirm}\r\n                    hideCancel={this.state.confirmHideCancel}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\n\r\nimport {\r\n    clearUserAccessTokens,\r\n    createUserAccessToken,\r\n    getUserAccessTokensForUser,\r\n    revokeUserAccessToken,\r\n    enableUserAccessToken,\r\n    disableUserAccessToken,\r\n} from 'mattermost-redux/actions/users';\r\n\r\nimport UserAccessTokenSection from './user_access_token_section';\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    return {\r\n        userAccessTokens: state.entities.users.myUserAccessTokens,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getUserAccessTokensForUser,\r\n            createUserAccessToken,\r\n            revokeUserAccessToken,\r\n            enableUserAccessToken,\r\n            disableUserAccessToken,\r\n            clearUserAccessTokens,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAccessTokenSection);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\n/* eslint-disable max-lines */\r\n\r\nimport React from 'react';\r\nimport type {IntlShape} from 'react-intl';\r\nimport {FormattedDate, FormattedMessage, FormattedTime, injectIntl} from 'react-intl';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport type {OAuthApp} from '@mattermost/types/integrations';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {PasswordConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport AccessHistoryModal from 'components/access_history_modal';\r\nimport ActivityLogModal from 'components/activity_log_modal';\r\nimport ExternalLink from 'components/external_link';\r\nimport SettingItem from 'components/setting_item';\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport ToggleModalButton from 'components/toggle_modal_button';\r\nimport Input from 'components/widgets/inputs/input/input';\r\n\r\nimport icon50 from 'images/icon50x50.png';\r\nimport Constants from 'utils/constants';\r\nimport {isValidPassword} from 'utils/password';\r\n\r\nimport MfaSection from './mfa_section';\r\nimport UserAccessTokenSection from './user_access_token_section';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nconst SECTION_MFA = 'mfa';\r\nconst SECTION_PASSWORD = 'password';\r\nconst SECTION_SIGNIN = 'signin';\r\nconst SECTION_APPS = 'apps';\r\nconst SECTION_TOKENS = 'tokens';\r\n\r\ntype Actions = {\r\n    getMe: () => void;\r\n    updateUserPassword: (\r\n        userId: string,\r\n        currentPassword: string,\r\n        newPassword: string\r\n    ) => Promise<ActionResult>;\r\n    getAuthorizedOAuthApps: () => Promise<ActionResult>;\r\n    deauthorizeOAuthApp: (clientId: string) => Promise<ActionResult>;\r\n};\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    activeSection?: string;\r\n    updateSection: (section: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n    canUseAccessTokens: boolean;\r\n    enableOAuthServiceProvider: boolean;\r\n    allowedToSwitchToEmail: boolean;\r\n    enableSignUpWithGitLab: boolean;\r\n    enableSignUpWithGoogle: boolean;\r\n    enableSignUpWithOpenId: boolean;\r\n    enableLdap: boolean;\r\n    enableSaml: boolean;\r\n    enableSignUpWithOffice365: boolean;\r\n    experimentalEnableAuthenticationTransfer: boolean;\r\n    passwordConfig: PasswordConfig;\r\n    militaryTime: boolean;\r\n    actions: Actions;\r\n    intl: IntlShape;\r\n    deleteAccountLink?: string;\r\n};\r\n\r\ntype State = {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n    confirmPassword: string;\r\n    serverError: string | null;\r\n    tokenError: string;\r\n    savingPassword: boolean;\r\n    authorizedApps: OAuthApp[];\r\n};\r\n\r\nexport class SecurityTab extends React.PureComponent<Props, State> {\r\n    constructor(props: Props) {\r\n        super(props);\r\n        this.state = this.getDefaultState();\r\n    }\r\n\r\n    getDefaultState() {\r\n        return {\r\n            currentPassword: '',\r\n            newPassword: '',\r\n            confirmPassword: '',\r\n            serverError: '',\r\n            tokenError: '',\r\n            authService: this.props.user.auth_service,\r\n            savingPassword: false,\r\n            authorizedApps: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.enableOAuthServiceProvider) {\r\n            this.loadAuthorizedOAuthApps();\r\n        }\r\n    }\r\n\r\n    loadAuthorizedOAuthApps = async () => {\r\n        const res = await this.props.actions.getAuthorizedOAuthApps();\r\n        if ('data' in res) {\r\n            const {data} = res;\r\n            this.setState({authorizedApps: data, serverError: null});\r\n        } else if ('error' in res) {\r\n            const {error} = res;\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    submitPassword = async () => {\r\n        const user = this.props.user;\r\n        const currentPassword = this.state.currentPassword;\r\n        const newPassword = this.state.newPassword;\r\n\r\n        if (!this.isPasswordValid()) {\r\n            return;\r\n        }\r\n\r\n        this.setState({savingPassword: true});\r\n\r\n        const res = await this.props.actions.updateUserPassword(\r\n            user.id,\r\n            currentPassword,\r\n            newPassword,\r\n        );\r\n        if ('data' in res) {\r\n            this.props.updateSection('');\r\n            this.props.actions.getMe();\r\n            this.setState(this.getDefaultState());\r\n        } else if ('error' in res) {\r\n            const {error: err} = res;\r\n            const state = this.getDefaultState();\r\n            if (err.message) {\r\n                state.serverError = err.message;\r\n            } else {\r\n                state.serverError = err;\r\n            }\r\n            this.setState(state);\r\n        }\r\n    };\r\n\r\n    isPasswordValid = () => {\r\n        if (this.state.currentPassword === '') {\r\n            return false;\r\n        }\r\n\r\n        const {valid, error} = isValidPassword(\r\n            this.state.newPassword,\r\n            this.props.passwordConfig,\r\n        );\r\n        if (!valid && error) {\r\n            return false;\r\n        }\r\n\r\n        if (this.state.newPassword !== this.state.confirmPassword) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    updateCurrentPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({currentPassword: e.target.value});\r\n    };\r\n\r\n    updateNewPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({newPassword: e.target.value});\r\n    };\r\n\r\n    updateConfirmPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({confirmPassword: e.target.value});\r\n    };\r\n\r\n    deauthorizeApp = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n\r\n        const appId = e.currentTarget.getAttribute('data-app') as string;\r\n\r\n        const res = await this.props.actions.deauthorizeOAuthApp(appId);\r\n        if ('data' in res) {\r\n            const authorizedApps = this.state.authorizedApps.filter((app) => {\r\n                return app.id !== appId;\r\n            });\r\n            this.setState({authorizedApps, serverError: null});\r\n        } else if ('error' in res) {\r\n            const {error} = res;\r\n            this.setState({serverError: error.message});\r\n        }\r\n    };\r\n\r\n    handleUpdateSection = (section: string) => {\r\n        if (section) {\r\n            this.props.updateSection(section);\r\n        } else {\r\n            switch (this.props.activeSection) {\r\n            case SECTION_MFA:\r\n            case SECTION_SIGNIN:\r\n            case SECTION_TOKENS:\r\n            case SECTION_APPS:\r\n                this.setState({\r\n                    serverError: null,\r\n                });\r\n                break;\r\n            case SECTION_PASSWORD:\r\n                this.setState({\r\n                    currentPassword: '',\r\n                    newPassword: '',\r\n                    confirmPassword: '',\r\n                    serverError: null,\r\n                });\r\n                break;\r\n            default:\r\n            }\r\n\r\n            this.props.updateSection('');\r\n        }\r\n    };\r\n\r\n    createPasswordSection = () => {\r\n        const inputs = [];\r\n        let submit;\r\n\r\n        const active = this.props.activeSection === SECTION_PASSWORD;\r\n        let max = null;\r\n        if (active) {\r\n            if (this.props.user.auth_service === '') {\r\n                submit = this.submitPassword;\r\n\r\n                inputs.push(\r\n                    <div\r\n                        key='currentPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='currentPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.currentPassword'\r\n                                defaultMessage='Current Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='currentPassword'\r\n                                name='currentPassword'\r\n                                autoFocus={true}\r\n                                type='password'\r\n                                onChange={this.updateCurrentPassword}\r\n                                value={this.state.currentPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.currentPassword',\r\n                                    defaultMessage: 'Current Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    if (typeof value !== 'string' || value === '') {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: (\r\n                                                <FormattedMessage\r\n                                                    id='user.settings.security.currentPasswordError'\r\n                                                    defaultMessage='Please enter your current password.'\r\n                                                />\r\n                                            ),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n                inputs.push(\r\n                    <div\r\n                        key='newPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='newPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.newPassword'\r\n                                defaultMessage='New Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='newPassword'\r\n                                name='newPassword'\r\n                                type='password'\r\n                                onChange={this.updateNewPassword}\r\n                                value={this.state.newPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.newPassword',\r\n                                    defaultMessage: 'New Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    const {valid, error} = isValidPassword(\r\n                                        value as string,\r\n                                        this.props.passwordConfig,\r\n                                    );\r\n                                    if (!valid) {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: error,\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n                inputs.push(\r\n                    <div\r\n                        key='retypeNewPasswordUpdateForm'\r\n                        className='form-group'\r\n                    >\r\n                        <label\r\n                            className='col-sm-5 control-label'\r\n                            htmlFor='confirmPassword'\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.retypePassword'\r\n                                defaultMessage='Retype New Password'\r\n                            />\r\n                        </label>\r\n                        <div className='col-sm-7'>\r\n                            <Input\r\n                                id='confirmPassword'\r\n                                name='confirmPassword'\r\n                                type='password'\r\n                                onChange={this.updateConfirmPassword}\r\n                                value={this.state.confirmPassword}\r\n                                aria-label={this.props.intl.formatMessage({\r\n                                    id: 'user.settings.security.retypePassword',\r\n                                    defaultMessage: 'Retype New Password',\r\n                                })}\r\n                                validate={(value) => {\r\n                                    if (typeof value !== 'string') {\r\n                                        return undefined;\r\n                                    }\r\n                                    if (this.state.newPassword !== value) {\r\n                                        return {\r\n                                            type: 'error' as const,\r\n                                            value: (\r\n                                                <FormattedMessage\r\n                                                    id='user.settings.security.passwordMatchError'\r\n                                                    defaultMessage='The new passwords you entered do not match.'\r\n                                                />\r\n                                            ),\r\n                                        };\r\n                                    }\r\n                                    return undefined;\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (\r\n                this.props.user.auth_service === Constants.GITLAB_SERVICE\r\n            ) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.passwordGitlabCantUpdate'\r\n                                defaultMessage='Login occurs through GitLab. Password cannot be updated.'\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (\r\n                this.props.user.auth_service === Constants.LDAP_SERVICE\r\n            ) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.passwordLdapCantUpdate'\r\n                                defaultMessage='Login occurs through AD/LDAP. Password cannot be updated.'\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (\r\n                this.props.user.auth_service === Constants.SAML_SERVICE\r\n            ) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.passwordSamlCantUpdate'\r\n                                defaultMessage='This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (\r\n                this.props.user.auth_service === Constants.GOOGLE_SERVICE\r\n            ) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.passwordGoogleCantUpdate'\r\n                                defaultMessage='Login occurs through Google Apps. Password cannot be updated.'\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            } else if (\r\n                this.props.user.auth_service === Constants.OFFICE365_SERVICE\r\n            ) {\r\n                inputs.push(\r\n                    <div\r\n                        key='oauthEmailInfo'\r\n                        className='form-group'\r\n                    >\r\n                        <div className='pb-3'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.passwordOffice365CantUpdate'\r\n                                defaultMessage='Login occurs through Entra ID. Password cannot be updated.'\r\n                            />\r\n                        </div>\r\n                    </div>,\r\n                );\r\n            }\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.password'\r\n                            defaultMessage='Password'\r\n                        />\r\n                    }\r\n                    inputs={inputs}\r\n                    submit={submit}\r\n                    saving={this.state.savingPassword}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                    isValid={this.isPasswordValid()}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe;\r\n\r\n        if (this.props.user.auth_service === '') {\r\n            const d = new Date(this.props.user.last_password_update);\r\n\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.lastUpdated'\r\n                    defaultMessage='Last updated {date} at {time}'\r\n                    values={{\r\n                        date: (\r\n                            <FormattedDate\r\n                                value={d}\r\n                                day='2-digit'\r\n                                month='short'\r\n                                year='numeric'\r\n                            />\r\n                        ),\r\n                        time: (\r\n                            <FormattedTime\r\n                                value={d}\r\n                                hour12={!this.props.militaryTime}\r\n                                hour='2-digit'\r\n                                minute='2-digit'\r\n                            />\r\n                        ),\r\n                    }}\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginGitlab'\r\n                    defaultMessage='Login done through GitLab'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginLdap'\r\n                    defaultMessage='Login done through AD/LDAP'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginSaml'\r\n                    defaultMessage='Login done through SAML'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginGoogle'\r\n                    defaultMessage='Login done through Google Apps'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OFFICE365_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.loginOffice365'\r\n                    defaultMessage='Login done through Entra ID'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={\r\n                    <FormattedMessage\r\n                        id='user.settings.security.password'\r\n                        defaultMessage='Password'\r\n                    />\r\n                }\r\n                describe={describe}\r\n                section={SECTION_PASSWORD}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createSignInSection = () => {\r\n        const user = this.props.user;\r\n\r\n        const active = this.props.activeSection === SECTION_SIGNIN;\r\n        let max = null;\r\n        if (active) {\r\n            let emailOption;\r\n            let gitlabOption;\r\n            let googleOption;\r\n            let office365Option;\r\n            let openidOption;\r\n            let ldapOption;\r\n            let samlOption;\r\n\r\n            if (user.auth_service === '') {\r\n                if (this.props.enableSignUpWithGitLab) {\r\n                    gitlabOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.GITLAB_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchGitlab'\r\n                                    defaultMessage='Switch to Using GitLab SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithGoogle) {\r\n                    googleOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.GOOGLE_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchGoogle'\r\n                                    defaultMessage='Switch to Using Google SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithOffice365) {\r\n                    office365Option = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.OFFICE365_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchOffice365'\r\n                                    defaultMessage='Switch to Using Entra ID SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSignUpWithOpenId) {\r\n                    openidOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.OPENID_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchOpenId'\r\n                                    defaultMessage='Switch to Using OpenID SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableLdap) {\r\n                    ldapOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_ldap?email=' +\r\n                                    encodeURIComponent(user.email)\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchLdap'\r\n                                    defaultMessage='Switch to Using AD/LDAP'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n\r\n                if (this.props.enableSaml) {\r\n                    samlOption = (\r\n                        <div className='pb-3'>\r\n                            <Link\r\n                                className='btn btn-primary'\r\n                                to={\r\n                                    '/claim/email_to_oauth?email=' +\r\n                                    encodeURIComponent(user.email) +\r\n                                    '&old_type=' +\r\n                                    user.auth_service +\r\n                                    '&new_type=' +\r\n                                    Constants.SAML_SERVICE\r\n                                }\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.switchSaml'\r\n                                    defaultMessage='Switch to Using SAML SSO'\r\n                                />\r\n                            </Link>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                }\r\n            } else if (this.props.allowedToSwitchToEmail) {\r\n                let link;\r\n                if (user.auth_service === Constants.LDAP_SERVICE) {\r\n                    link =\r\n                        '/claim/ldap_to_email?email=' +\r\n                        encodeURIComponent(user.email);\r\n                } else {\r\n                    link =\r\n                        '/claim/oauth_to_email?email=' +\r\n                        encodeURIComponent(user.email) +\r\n                        '&old_type=' +\r\n                        user.auth_service;\r\n                }\r\n\r\n                emailOption = (\r\n                    <div className='pb-3'>\r\n                        <Link\r\n                            className='btn btn-primary'\r\n                            to={link}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='user.settings.security.switchEmail'\r\n                                defaultMessage='Switch to Using Email and Password'\r\n                            />\r\n                        </Link>\r\n                        <br/>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            const inputs = [];\r\n            inputs.push(\r\n                <div key='userSignInOption'>\r\n                    {emailOption}\r\n                    {gitlabOption}\r\n                    {googleOption}\r\n                    {office365Option}\r\n                    {openidOption}\r\n                    {ldapOption}\r\n                    {samlOption}\r\n                </div>,\r\n            );\r\n\r\n            const extraInfo = (\r\n                <span>\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oneSignin'\r\n                        defaultMessage='You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.'\r\n                    />\r\n                </span>\r\n            );\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={this.props.intl.formatMessage({\r\n                        id: 'user.settings.security.method',\r\n                        defaultMessage: 'Sign-in Method',\r\n                    })}\r\n                    extraInfo={extraInfo}\r\n                    inputs={inputs}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                />\r\n            );\r\n        }\r\n\r\n        let describe = (\r\n            <FormattedMessage\r\n                id='user.settings.security.emailPwd'\r\n                defaultMessage='Email and Password'\r\n            />\r\n        );\r\n        if (this.props.user.auth_service === Constants.GITLAB_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.gitlab'\r\n                    defaultMessage='GitLab'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.GOOGLE_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.google'\r\n                    defaultMessage='Google'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OFFICE365_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.office365'\r\n                    defaultMessage='Entra ID'\r\n                />\r\n            );\r\n        } else if (\r\n            this.props.user.auth_service === Constants.OPENID_SERVICE\r\n        ) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.openid'\r\n                    defaultMessage='OpenID'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.LDAP_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.ldap'\r\n                    defaultMessage='AD/LDAP'\r\n                />\r\n            );\r\n        } else if (this.props.user.auth_service === Constants.SAML_SERVICE) {\r\n            describe = (\r\n                <FormattedMessage\r\n                    id='user.settings.security.saml'\r\n                    defaultMessage='SAML'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={this.props.intl.formatMessage({\r\n                    id: 'user.settings.security.method',\r\n                    defaultMessage: 'Sign-in Method',\r\n                })}\r\n                describe={describe}\r\n                section={SECTION_SIGNIN}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    createOAuthAppsSection = () => {\r\n        const active = this.props.activeSection === SECTION_APPS;\r\n        let max = null;\r\n        if (active) {\r\n            let apps;\r\n            if (\r\n                this.state.authorizedApps &&\r\n                this.state.authorizedApps.length > 0\r\n            ) {\r\n                apps = this.state.authorizedApps.map((app) => {\r\n                    const homepage = (\r\n                        <ExternalLink\r\n                            href={app.homepage}\r\n                            location='user_settings_security'\r\n                        >\r\n                            {app.homepage}\r\n                        </ExternalLink>\r\n                    );\r\n\r\n                    return (\r\n                        <div\r\n                            key={app.id}\r\n                            className='pb-3 authorized-app'\r\n                        >\r\n                            <div className='col-sm-10'>\r\n                                <div className='authorized-app__name'>\r\n                                    {app.name}\r\n                                    <span className='authorized-app__url'>\r\n                                        {' -'} {homepage}\r\n                                    </span>\r\n                                </div>\r\n                                <div className='authorized-app__description'>\r\n                                    {app.description}\r\n                                </div>\r\n                                <div className='authorized-app__deauthorize'>\r\n                                    <a\r\n                                        href='#'\r\n                                        data-app={app.id}\r\n                                        onClick={this.deauthorizeApp}\r\n                                    >\r\n                                        <FormattedMessage\r\n                                            id='user.settings.security.deauthorize'\r\n                                            defaultMessage='Deauthorize'\r\n                                        />\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div className='col-sm-2 pull-right'>\r\n                                <img\r\n                                    alt={app.name}\r\n                                    src={app.icon_url || icon50}\r\n                                />\r\n                            </div>\r\n                            <br/>\r\n                        </div>\r\n                    );\r\n                });\r\n            } else {\r\n                apps = (\r\n                    <div className='pb-3 authorized-app'>\r\n                        <div className='setting-list__hint'>\r\n                            <FormattedMessage\r\n                                id='user.settings.security.noApps'\r\n                                defaultMessage='No OAuth 2.0 Applications are authorized.'\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            const inputs = [];\r\n            let wrapperClass;\r\n            let helpText;\r\n            if (Array.isArray(apps)) {\r\n                wrapperClass = 'authorized-apps__wrapper';\r\n\r\n                helpText = (\r\n                    <div className='authorized-apps__help'>\r\n                        <FormattedMessage\r\n                            id='user.settings.security.oauthAppsHelp'\r\n                            defaultMessage='Applications act on your behalf to access your data based on the permissions you grant them.'\r\n                        />\r\n                    </div>\r\n                );\r\n            }\r\n\r\n            inputs.push(\r\n                <div\r\n                    className={wrapperClass}\r\n                    key='authorizedApps'\r\n                >\r\n                    {apps}\r\n                </div>,\r\n            );\r\n\r\n            const title = (\r\n                <div>\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oauthApps'\r\n                        defaultMessage='OAuth 2.0 Applications'\r\n                    />\r\n                    {helpText}\r\n                </div>\r\n            );\r\n\r\n            max = (\r\n                <SettingItemMax\r\n                    title={title}\r\n                    inputs={inputs}\r\n                    serverError={this.state.serverError}\r\n                    updateSection={this.handleUpdateSection}\r\n                    isFullWidth={true}\r\n                    cancelButtonText={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.close'\r\n                            defaultMessage='Close'\r\n                        />\r\n                    }\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItem\r\n                active={active}\r\n                areAllSectionsInactive={this.props.activeSection === ''}\r\n                title={this.props.intl.formatMessage({\r\n                    id: 'user.settings.security.oauthApps',\r\n                    defaultMessage: 'OAuth 2.0 Applications',\r\n                })}\r\n                describe={\r\n                    <FormattedMessage\r\n                        id='user.settings.security.oauthAppsDescription'\r\n                        defaultMessage=\"Click 'Edit' to manage your OAuth 2.0 Applications\"\r\n                    />\r\n                }\r\n                section={SECTION_APPS}\r\n                updateSection={this.handleUpdateSection}\r\n                max={max}\r\n            />\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const user = this.props.user;\r\n\r\n        const passwordSection = this.createPasswordSection();\r\n\r\n        let numMethods = 0;\r\n        numMethods = this.props.enableSignUpWithGitLab ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithGoogle ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithOffice365 ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSignUpWithOpenId ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableLdap ? numMethods + 1 : numMethods;\r\n        numMethods = this.props.enableSaml ? numMethods + 1 : numMethods;\r\n\r\n        // If there are other sign-in methods and either email is enabled or the user's account is email, then allow switching\r\n        let signInSection;\r\n        if (\r\n            (this.props.allowedToSwitchToEmail || user.auth_service === '') &&\r\n            numMethods > 0 &&\r\n            this.props.experimentalEnableAuthenticationTransfer\r\n        ) {\r\n            signInSection = this.createSignInSection();\r\n        }\r\n\r\n        let oauthSection;\r\n        if (this.props.enableOAuthServiceProvider) {\r\n            oauthSection = this.createOAuthAppsSection();\r\n        }\r\n\r\n        let tokensSection;\r\n        if (this.props.canUseAccessTokens) {\r\n            tokensSection = (\r\n                <UserAccessTokenSection\r\n                    user={this.props.user}\r\n                    active={this.props.activeSection === SECTION_TOKENS}\r\n                    areAllSectionsInactive={this.props.activeSection === ''}\r\n                    updateSection={this.handleUpdateSection}\r\n                    setRequireConfirm={this.props.setRequireConfirm}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                id='securitySettings'\r\n                aria-labelledby='securityButton'\r\n                role='tabpanel'\r\n            >\r\n                <SettingMobileHeader\r\n                    closeModal={this.props.closeModal}\r\n                    collapseModal={this.props.collapseModal}\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.security.title'\r\n                            defaultMessage='Security Settings'\r\n                        />\r\n                    }\r\n                />\r\n                <div className='user-settings'>\r\n                    <SettingDesktopHeader\r\n                        text={\r\n                            <FormattedMessage\r\n                                id='user.settings.security.title'\r\n                                defaultMessage='Security Settings'\r\n                            />\r\n                        }\r\n                    />\r\n                    <div className='divider-dark first'/>\r\n                    {passwordSection}\r\n                    <div className='divider-light'/>\r\n                    <MfaSection\r\n                        active={this.props.activeSection === SECTION_MFA}\r\n                        areAllSectionsInactive={this.props.activeSection === ''}\r\n                        updateSection={this.handleUpdateSection}\r\n                    />\r\n                    <div className='divider-light'/>\r\n                    {oauthSection}\r\n                    <div className='divider-light'/>\r\n                    {tokensSection}\r\n                    <div className='divider-light'/>\r\n                    {signInSection}\r\n                    <div className='divider-dark'/>\r\n                    <br/>\r\n                    <ToggleModalButton\r\n                        className='security-links color--link'\r\n                        modalId='access_history'\r\n                        dialogType={AccessHistoryModal}\r\n                        id='viewAccessHistory'\r\n                    >\r\n                        <i\r\n                            className='icon icon-clock-outline'\r\n                            title={this.props.intl.formatMessage({\r\n                                id: 'user.settings.security.viewHistory.icon',\r\n                                defaultMessage: 'Access History Icon',\r\n                            })}\r\n                            aria-hidden='true'\r\n                        />\r\n                        <FormattedMessage\r\n                            id='user.settings.security.viewHistory'\r\n                            defaultMessage='View Access History'\r\n                        />\r\n                    </ToggleModalButton>\r\n                    <ToggleModalButton\r\n                        className='security-links color--link mt-2'\r\n                        modalId='activity_log'\r\n                        dialogType={ActivityLogModal}\r\n                        id='viewAndLogOutOfActiveSessions'\r\n                    >\r\n                        <i\r\n                            className='icon icon-clock-outline'\r\n                            title={this.props.intl.formatMessage({\r\n                                id: 'user.settings.security.logoutActiveSessions.icon',\r\n                                defaultMessage: 'Active Sessions Icon',\r\n                            })}\r\n                            aria-hidden='true'\r\n                        />\r\n                        <FormattedMessage\r\n                            id='user.settings.security.logoutActiveSessions'\r\n                            defaultMessage='View and Log Out of Active Sessions'\r\n                        />\r\n                    </ToggleModalButton>\r\n                    {this.props.deleteAccountLink && (\r\n                        <>\r\n                            <p/>\r\n                            <ExternalLink\r\n                                className='security-links color--link mt-2 danger'\r\n                                href={this.props.deleteAccountLink}\r\n                                id='deleteAccountLink'\r\n                                location={window.location.href}\r\n                            >\r\n                                <i\r\n                                    className='icon icon-trash-can-outline'\r\n                                    title={this.props.intl.formatMessage({\r\n                                        id: 'user.settings.security.deleteAccountLink.icon',\r\n                                        defaultMessage: 'Delete Account Icon',\r\n                                    })}\r\n                                    aria-hidden='true'\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.security.deleteAccountLink'\r\n                                    defaultMessage='Delete Your Account'\r\n                                />\r\n                            </ExternalLink>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(SecurityTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {GlobalState} from '@mattermost/types/store';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport {getAuthorizedOAuthApps, deauthorizeOAuthApp} from 'mattermost-redux/actions/integrations';\r\nimport {getMe, updateUserPassword} from 'mattermost-redux/actions/users';\r\nimport {getConfig, getPasswordConfig} from 'mattermost-redux/selectors/entities/general';\r\nimport {getBool} from 'mattermost-redux/selectors/entities/preferences';\r\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport SecurityTab from './user_settings_security';\r\n\r\ntype Props = {\r\n    user: UserProfile;\r\n    activeSection?: string;\r\n    updateSection: (section: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n};\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\r\n    const config = getConfig(state);\r\n\r\n    const tokensEnabled = config.EnableUserAccessTokens === 'true';\r\n    const userHasTokenRole = UserUtils.hasUserAccessTokenRole(ownProps.user.roles) || UserUtils.isSystemAdmin(ownProps.user.roles);\r\n\r\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\r\n    const allowedToSwitchToEmail = config.EnableSignUpWithEmail === 'true' && (config.EnableSignInWithEmail === 'true' || config.EnableSignInWithUsername === 'true');\r\n    const enableSignUpWithGitLab = config.EnableSignUpWithGitLab === 'true';\r\n    const enableSignUpWithGoogle = config.EnableSignUpWithGoogle === 'true';\r\n    const enableSignUpWithOpenId = config.EnableSignUpWithOpenId === 'true';\r\n    const enableLdap = config.EnableLdap === 'true';\r\n    const enableSaml = config.EnableSaml === 'true';\r\n    const enableSignUpWithOffice365 = config.EnableSignUpWithOffice365 === 'true';\r\n    const experimentalEnableAuthenticationTransfer = config.ExperimentalEnableAuthenticationTransfer === 'true';\r\n\r\n    return {\r\n        canUseAccessTokens: tokensEnabled && userHasTokenRole,\r\n        enableOAuthServiceProvider,\r\n        allowedToSwitchToEmail,\r\n        enableSignUpWithGitLab,\r\n        enableSignUpWithGoogle,\r\n        enableSignUpWithOpenId,\r\n        enableLdap,\r\n        enableSaml,\r\n        enableSignUpWithOffice365,\r\n        experimentalEnableAuthenticationTransfer,\r\n        passwordConfig: getPasswordConfig(state),\r\n        militaryTime: getBool(state, Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.USE_MILITARY_TIME, false),\r\n        deleteAccountLink: config.DeleteAccountLink,\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            getMe,\r\n            updateUserPassword,\r\n            getAuthorizedOAuthApps,\r\n            deauthorizeOAuthApp,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SecurityTab);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport ReactSelect from 'react-select';\r\nimport type {OnChangeValue, StylesConfig} from 'react-select';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\ntype Limit = {\r\n    value: number;\r\n    label: string;\r\n};\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => Promise<ActionResult>;\r\n    dmGmLimit: number;\r\n    updateSection: (section: string) => void;\r\n}\r\n\r\ntype State = {\r\n    active: boolean;\r\n    limit: Limit;\r\n    isSaving: boolean;\r\n}\r\n\r\nconst limits: Limit[] = [\r\n    {value: 10, label: '10'},\r\n    {value: 15, label: '15'},\r\n    {value: 20, label: '20'},\r\n    {value: 40, label: '40'},\r\n];\r\n\r\nexport default class LimitVisibleGMsDMs extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: false,\r\n            limit: {value: 20, label: '20'},\r\n            isSaving: false,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (props.active !== state.active) {\r\n            if (props.active && !state.active) {\r\n                return {\r\n                    limit: limits.find((l) => l.value === props.dmGmLimit),\r\n                    active: props.active,\r\n                };\r\n            }\r\n\r\n            return {\r\n                active: props.active,\r\n            };\r\n        } else if (!props.active) {\r\n            return {\r\n                limit: limits.find((l) => l.value === props.dmGmLimit),\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    handleChange = (selected: OnChangeValue<Limit, boolean>) => {\r\n        if (selected && 'value' in selected) {\r\n            this.setState({limit: selected});\r\n        }\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        if (!this.props.userId) {\r\n            return;\r\n        }\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.savePreferences(this.props.userId, [{\r\n            user_id: this.props.userId,\r\n            category: Preferences.CATEGORY_SIDEBAR_SETTINGS,\r\n            name: Preferences.LIMIT_VISIBLE_DMS_GMS,\r\n            value: this.state.limit.value.toString(),\r\n        }]);\r\n\r\n        this.setState({isSaving: false});\r\n\r\n        this.props.updateSection('');\r\n    };\r\n\r\n    renderDescription = () => {\r\n        return (\r\n            <span>{this.state.limit.label}</span>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const title = (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.limitVisibleGMsDMsTitle'\r\n                defaultMessage='Number of direct messages to show'\r\n            />\r\n        );\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section='limitVisibleGMsDMs'\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={\r\n                    <fieldset>\r\n                        <legend className='form-legend hidden-label'>\r\n                            {title}\r\n                        </legend>\r\n                        <ReactSelect\r\n                            className='react-select'\r\n                            classNamePrefix='react-select'\r\n                            id='limitVisibleGMsDMs'\r\n                            options={limits}\r\n                            isClearable={false}\r\n                            onChange={this.handleChange}\r\n                            value={this.state.limit}\r\n                            isSearchable={false}\r\n                            menuPortalTarget={document.body}\r\n                            styles={reactStyles}\r\n                        />\r\n                        <div className='mt-5'>\r\n                            <FormattedMessage\r\n                                id='user.settings.sidebar.limitVisibleGMsDMsDesc'\r\n                                defaultMessage='You can also change these settings in the direct messages sidebar menu.'\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                }\r\n                submit={this.handleSubmit}\r\n                saving={this.state.isSaving}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nconst reactStyles = {\r\n    menuPortal: (provided) => ({\r\n        ...provided,\r\n        zIndex: 9999,\r\n    }),\r\n} satisfies StylesConfig<Limit, boolean>;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {getVisibleDmGmLimit} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './limit_visible_gms_dms';\r\nimport LimitVisibleGMsDMs from './limit_visible_gms_dms';\r\n\r\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\r\n    const userPreferences = ownProps.adminMode && ownProps.userPreferences ? ownProps.userPreferences : undefined;\r\n    return {\r\n        userId: ownProps.adminMode ? ownProps.userId : getCurrentUserId(state),\r\n        dmGmLimit: getVisibleDmGmLimit(state, userPreferences),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LimitVisibleGMsDMs);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport type {RefObject} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType, PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {Preferences} from 'mattermost-redux/constants';\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport SettingItemMax from 'components/setting_item_max';\r\nimport SettingItemMin from 'components/setting_item_min';\r\nimport type SettingItemMinComponent from 'components/setting_item_min';\r\n\r\nimport {a11yFocus} from 'utils/utils';\r\n\r\nexport type OwnProps = {\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\ntype Props = OwnProps & {\r\n    active: boolean;\r\n    areAllSectionsInactive: boolean;\r\n    savePreferences: (userId: string, preferences: PreferenceType[]) => Promise<ActionResult>;\r\n    showUnreadsCategory: boolean;\r\n    updateSection: (section: string) => void;\r\n}\r\n\r\ntype State = {\r\n    active: boolean;\r\n    checked: boolean;\r\n    isSaving: boolean;\r\n}\r\n\r\nexport default class ShowUnreadsCategory extends React.PureComponent<Props, State> {\r\n    minRef: RefObject<SettingItemMinComponent>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active: false,\r\n            checked: false,\r\n            isSaving: false,\r\n        };\r\n\r\n        this.minRef = React.createRef();\r\n    }\r\n\r\n    static getDerivedStateFromProps(props: Props, state: State) {\r\n        if (props.active !== state.active) {\r\n            if (props.active && !state.active) {\r\n                return {\r\n                    checked: props.showUnreadsCategory,\r\n                    active: props.active,\r\n                };\r\n            }\r\n\r\n            return {\r\n                active: props.active,\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    focusEditButton(): void {\r\n        this.minRef.current?.focus();\r\n    }\r\n\r\n    handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            checked: e.target.value === 'true',\r\n        });\r\n        a11yFocus(e.target);\r\n    };\r\n\r\n    handleSubmit = async () => {\r\n        if (!this.props.userId) {\r\n            // Only for type safety, won't actually happen\r\n            return;\r\n        }\r\n\r\n        this.setState({isSaving: true});\r\n\r\n        await this.props.savePreferences(this.props.userId, [{\r\n            user_id: this.props.userId,\r\n            category: Preferences.CATEGORY_SIDEBAR_SETTINGS,\r\n            name: Preferences.SHOW_UNREAD_SECTION,\r\n            value: this.state.checked.toString(),\r\n        }]);\r\n\r\n        this.setState({isSaving: false});\r\n\r\n        this.props.updateSection('');\r\n    };\r\n\r\n    renderDescription = () => {\r\n        if (this.props.showUnreadsCategory) {\r\n            return (\r\n                <FormattedMessage\r\n                    id='user.settings.sidebar.on'\r\n                    defaultMessage='On'\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.off'\r\n                defaultMessage='Off'\r\n            />\r\n        );\r\n    };\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.active && !this.props.active && this.props.areAllSectionsInactive) {\r\n            this.focusEditButton();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = (\r\n            <FormattedMessage\r\n                id='user.settings.sidebar.showUnreadsCategoryTitle'\r\n                defaultMessage='Group unread channels separately'\r\n            />\r\n        );\r\n\r\n        if (!this.props.active) {\r\n            return (\r\n                <SettingItemMin\r\n                    title={title}\r\n                    describe={this.renderDescription()}\r\n                    section='showUnreadsCategory'\r\n                    updateSection={this.props.updateSection}\r\n                    ref={this.minRef}\r\n                />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <SettingItemMax\r\n                title={title}\r\n                inputs={\r\n                    <fieldset>\r\n                        <legend className='form-legend hidden-label'>\r\n                            {title}\r\n                        </legend>\r\n                        <div className='radio'>\r\n                            <label>\r\n                                <input\r\n                                    data-testid='showUnreadsCategoryOn'\r\n                                    type='radio'\r\n                                    name='showUnreadsCategory'\r\n                                    checked={this.state.checked}\r\n                                    onChange={() => this.setState({checked: true})}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.sidebar.on'\r\n                                    defaultMessage='On'\r\n                                />\r\n                            </label>\r\n                            <br/>\r\n                        </div>\r\n                        <div className='radio'>\r\n                            <label>\r\n                                <input\r\n                                    data-testid='showUnreadsCategoryOff'\r\n                                    type='radio'\r\n                                    name='showUnreadsCategory'\r\n                                    checked={!this.state.checked}\r\n                                    onChange={() => this.setState({checked: false})}\r\n                                />\r\n                                <FormattedMessage\r\n                                    id='user.settings.sidebar.off'\r\n                                    defaultMessage='Off'\r\n                                />\r\n                            </label>\r\n                            <br/>\r\n                        </div>\r\n                        <div className='mt-5'>\r\n                            <FormattedMessage\r\n                                id='user.settings.sidebar.showUnreadsCategoryDesc'\r\n                                defaultMessage='When enabled, all unread channels and direct messages will be grouped together in the sidebar.'\r\n                            />\r\n                        </div>\r\n                    </fieldset>\r\n                }\r\n                submit={this.handleSubmit}\r\n                saving={this.state.isSaving}\r\n                updateSection={this.props.updateSection}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\n\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {\r\n    shouldShowUnreadsCategory,\r\n} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nimport type {OwnProps} from './show_unreads_category';\r\nimport ShowUnreadsCategory from './show_unreads_category';\r\n\r\nfunction mapStateToProps(state: GlobalState, props: OwnProps) {\r\n    const userPreferences = props.adminMode && props.userPreferences ? props.userPreferences : undefined;\r\n    return {\r\n        userId: props.adminMode ? props.userId : getCurrentUserId(state),\r\n        showUnreadsCategory: shouldShowUnreadsCategory(state, userPreferences),\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePreferences,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowUnreadsCategory);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\n\r\nimport LimitVisibleGMsDMs from './limit_visible_gms_dms';\r\nimport ShowUnreadsCategory from './show_unreads_category';\r\n\r\nimport SettingDesktopHeader from '../headers/setting_desktop_header';\r\nimport SettingMobileHeader from '../headers/setting_mobile_header';\r\n\r\nexport interface Props {\r\n    updateSection: (section: string) => void;\r\n    activeSection: string;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    adminMode?: boolean;\r\n    userId: string;\r\n    userPreferences?: PreferencesType;\r\n}\r\n\r\nexport default function UserSettingsSidebar(props: Props): JSX.Element {\r\n    return (\r\n        <div\r\n            id='sidebarSettings'\r\n            aria-labelledby='sidebarButton'\r\n            role='tabpanel'\r\n        >\r\n            <SettingMobileHeader\r\n                closeModal={props.closeModal}\r\n                collapseModal={props.collapseModal}\r\n                text={\r\n                    <FormattedMessage\r\n                        id='user.settings.sidebar.title'\r\n                        defaultMessage='Sidebar Settings'\r\n                    />\r\n                }\r\n            />\r\n            <div\r\n                id='sidebarTitle'\r\n                className='user-settings'\r\n            >\r\n                <SettingDesktopHeader\r\n                    text={\r\n                        <FormattedMessage\r\n                            id='user.settings.sidebar.title'\r\n                            defaultMessage='Sidebar Settings'\r\n                        />\r\n                    }\r\n                />\r\n\r\n                <div className='divider-dark first'/>\r\n                <ShowUnreadsCategory\r\n                    active={props.activeSection === 'showUnreadsCategory'}\r\n                    updateSection={props.updateSection}\r\n                    areAllSectionsInactive={props.activeSection === ''}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.userId}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n                <div className='divider-dark'/>\r\n                <LimitVisibleGMsDMs\r\n                    active={props.activeSection === 'limitVisibleGMsDMs'}\r\n                    updateSection={props.updateSection}\r\n                    areAllSectionsInactive={props.activeSection === ''}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.userId}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n                <div className='divider-dark'/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport UserSettingsSidebar from './user_settings_sidebar';\r\n\r\nexport default UserSettingsSidebar;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport AdvancedTab from './advanced';\r\nimport DisplayTab from './display';\r\nimport GeneralTab from './general';\r\nimport NotificationsTab from './notifications';\r\nimport PluginTab from './plugin';\r\nimport SecurityTab from './security';\r\nimport SidebarTab from './sidebar';\r\n\r\nexport type Props = {\r\n    user: UserProfile;\r\n    activeTab?: string;\r\n    activeSection: string;\r\n    updateSection: (section?: string) => void;\r\n    updateTab: (notifications: string) => void;\r\n    closeModal: () => void;\r\n    collapseModal: () => void;\r\n    setRequireConfirm: () => void;\r\n    pluginSettings: {[tabName: string]: PluginConfiguration};\r\n    userPreferences?: PreferencesType;\r\n    adminMode?: boolean;\r\n};\r\n\r\nexport default function UserSettings(props: Props) {\r\n    if (props.activeTab === 'profile') {\r\n        return (\r\n            <div>\r\n                <GeneralTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    updateTab={props.updateTab}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'security') {\r\n        return (\r\n            <div>\r\n                <SecurityTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    setRequireConfirm={props.setRequireConfirm}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'notifications') {\r\n        return (\r\n            <div>\r\n                <NotificationsTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'display') {\r\n        return (\r\n            <div>\r\n                <DisplayTab\r\n                    user={props.user}\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    setRequireConfirm={props.setRequireConfirm}\r\n                    adminMode={props.adminMode}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'sidebar') {\r\n        return (\r\n            <div>\r\n                <SidebarTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    userId={props.user.id}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab === 'advanced') {\r\n        return (\r\n            <div>\r\n                <AdvancedTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    adminMode={props.adminMode}\r\n                    user={props.user}\r\n                    userPreferences={props.userPreferences}\r\n                />\r\n            </div>\r\n        );\r\n    } else if (props.activeTab && props.pluginSettings[props.activeTab]) {\r\n        return (\r\n            <div>\r\n                <PluginTab\r\n                    activeSection={props.activeSection}\r\n                    updateSection={props.updateSection}\r\n                    closeModal={props.closeModal}\r\n                    collapseModal={props.collapseModal}\r\n                    settings={props.pluginSettings[props.activeTab]}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return null;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React, {type ReactNode, useEffect, useState} from 'react';\r\n\r\nconst DEFAULT_MIN_LOADER_DURATION = 1000;\r\n\r\ntype Props = {\r\n    loading: boolean;\r\n    children: ReactNode;\r\n    className?: string;\r\n    onLoaded: () => void;\r\n}\r\n\r\nconst SmartLoader = ({loading, children, className, onLoaded}: Props) => {\r\n    const [timeoutFinished, setTimeoutFinished] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setTimeoutFinished(true);\r\n        }, DEFAULT_MIN_LOADER_DURATION);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!loading && timeoutFinished) {\r\n            onLoaded();\r\n        }\r\n    }, [loading, timeoutFinished, onLoaded]);\r\n\r\n    return loading || !timeoutFinished ? (\r\n        <div className={`SmartLoader ${className}`}>\r\n            {children}\r\n        </div>\r\n    ) : null;\r\n};\r\n\r\nexport default SmartLoader;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {FormattedMessage, injectIntl} from 'react-intl';\r\nimport type {IntlShape} from 'react-intl';\r\n\r\nimport {GenericModal} from '@mattermost/components';\r\nimport type {PreferencesType} from '@mattermost/types/preferences';\r\nimport type {UserProfile} from '@mattermost/types/users';\r\n\r\nimport type {ActionResult} from 'mattermost-redux/types/actions';\r\n\r\nimport ConfirmModal from 'components/confirm_modal';\r\nimport SettingsSidebar from 'components/settings_sidebar';\r\nimport UserSettings from 'components/user_settings';\r\nimport LoadingSpinner from 'components/widgets/loading/loading_spinner';\r\nimport SmartLoader from 'components/widgets/smart_loader';\r\n\r\nimport {focusElement} from 'utils/a11y_utils';\r\nimport Constants from 'utils/constants';\r\nimport {cmdOrCtrlPressed, isKeyPressed} from 'utils/keyboard';\r\nimport {stopTryNotificationRing} from 'utils/notification_sounds';\r\nimport {isValidUrl} from 'utils/url';\r\nimport {getDisplayName} from 'utils/utils';\r\n\r\nimport type {PluginConfiguration} from 'types/plugins/user_settings';\r\n\r\nimport './user_settings_modal.scss';\r\n\r\nexport type OwnProps = {\r\n    userID?: string;\r\n    adminMode?: boolean;\r\n    isContentProductSettings: boolean;\r\n    userPreferences?: PreferencesType;\r\n    activeTab?: string;\r\n}\r\n\r\nexport type Props = OwnProps & {\r\n    intl: IntlShape;\r\n    pluginSettings: {[pluginId: string]: PluginConfiguration};\r\n    user?: UserProfile;\r\n    onExited: () => void;\r\n    focusOriginElement?: string;\r\n    actions: {\r\n        sendVerificationEmail: (email: string) => Promise<ActionResult>;\r\n        getUserPreferences: (userID: string) => Promise<unknown>;\r\n        getUser: (userID: string) => Promise<unknown>;\r\n    };\r\n}\r\n\r\ntype State = {\r\n    active_tab?: string;\r\n    active_section: string;\r\n    showConfirmModal: boolean;\r\n    enforceFocus?: boolean;\r\n    show: boolean;\r\n    resendStatus: string;\r\n    loading: boolean;\r\n};\r\n\r\nclass UserSettingsModal extends React.PureComponent<Props, State> {\r\n    private requireConfirm: boolean;\r\n    private customConfirmAction: ((handleConfirm: () => void) => void) | null;\r\n    private afterConfirm: (() => void) | null;\r\n    private modalBodyRef: React.RefObject<HTMLDivElement>;\r\n\r\n    constructor(props: Props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            active_tab: props.activeTab ?? (props.isContentProductSettings ? 'notifications' : 'profile'),\r\n            active_section: '',\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n            show: true,\r\n            resendStatus: '',\r\n            loading: false,\r\n        };\r\n\r\n        this.requireConfirm = false;\r\n\r\n        // Used when settings want to override the default confirm modal with their own\r\n        // If set by a child, it will be called in place of showing the regular confirm\r\n        // modal. It will be passed a function to call on modal confirm\r\n        this.customConfirmAction = null;\r\n        this.afterConfirm = null;\r\n\r\n        this.modalBodyRef = React.createRef();\r\n    }\r\n\r\n    handleResend = (email: string) => {\r\n        this.setState({resendStatus: 'sending'});\r\n\r\n        this.props.actions.sendVerificationEmail(email).then(({data, error: err}) => {\r\n            if (data) {\r\n                this.setState({resendStatus: 'success'});\r\n            } else if (err) {\r\n                this.setState({resendStatus: 'failure'});\r\n            }\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n\r\n        if (this.props.adminMode && this.props.userID) {\r\n            this.setState({loading: true});\r\n\r\n            if (!this.props.userPreferences) {\r\n                this.props.actions.getUserPreferences(this.props.userID);\r\n            }\r\n            if (!this.props.user) {\r\n                this.props.actions.getUser(this.props.userID);\r\n            }\r\n        }\r\n\r\n        if (!this.props.adminMode) {\r\n            this.setState({loading: false});\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props, prevState: State) {\r\n        if (this.state.active_tab !== prevState.active_tab) {\r\n            // Scroll to top if user changes tabs\r\n            if (this.modalBodyRef.current) {\r\n                const el = this.modalBodyRef.current as HTMLDivElement;\r\n                el.scrollTop = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    setLoadingFinished = () => {\r\n        this.setState({loading: false});\r\n    };\r\n\r\n    handleKeyDown = (e: KeyboardEvent) => {\r\n        // Ctrl+Shift+A (or Cmd+Shift+A) to close\r\n        if (cmdOrCtrlPressed(e) && e.shiftKey && isKeyPressed(e, Constants.KeyCodes.A)) {\r\n            e.preventDefault();\r\n            this.handleHide();\r\n        }\r\n    };\r\n\r\n    // Called when the close button is pressed on the main modal\r\n    handleHide = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(() => this.handleHide());\r\n            return;\r\n        }\r\n\r\n        // Cancel any ongoing notification sound, if any (from DesktopNotificationSettings)\r\n        stopTryNotificationRing();\r\n        this.setState({show: false});\r\n    };\r\n\r\n    // called after the dialog is fully hidden and faded out\r\n    handleHidden = () => {\r\n        this.setState({\r\n            active_tab: this.props.isContentProductSettings ? 'notifications' : 'profile',\r\n            active_section: '',\r\n        });\r\n        if (this.props.focusOriginElement) {\r\n            focusElement(this.props.focusOriginElement, true);\r\n        }\r\n        this.props.onExited();\r\n    };\r\n\r\n    // Called to hide the settings pane when on mobile\r\n    handleCollapse = () => {\r\n        const el = ReactDOM.findDOMNode(this.modalBodyRef.current) as HTMLDivElement;\r\n        el.closest('.modal-dialog')!.classList.remove('display--content');\r\n\r\n        this.setState({\r\n            active_tab: '',\r\n            active_section: '',\r\n        });\r\n    };\r\n\r\n    handleConfirm = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n        });\r\n        this.requireConfirm = false;\r\n        this.customConfirmAction = null;\r\n\r\n        if (this.afterConfirm) {\r\n            this.afterConfirm();\r\n            this.afterConfirm = null;\r\n        }\r\n    };\r\n\r\n    handleCancelConfirmation = () => {\r\n        this.setState({\r\n            showConfirmModal: false,\r\n            enforceFocus: true,\r\n        });\r\n        this.afterConfirm = null;\r\n    };\r\n\r\n    showConfirmModal = (afterConfirm: () => void) => {\r\n        if (afterConfirm) {\r\n            this.afterConfirm = afterConfirm;\r\n        }\r\n\r\n        if (this.customConfirmAction) {\r\n            this.customConfirmAction(this.handleConfirm);\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            showConfirmModal: true,\r\n            enforceFocus: false,\r\n        });\r\n    };\r\n\r\n    // Called by settings tabs when their close button is pressed\r\n    closeModal = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(this.closeModal);\r\n        } else {\r\n            this.handleHide();\r\n        }\r\n    };\r\n\r\n    // Called by settings tabs when their back button is pressed\r\n    collapseModal = () => {\r\n        if (this.requireConfirm) {\r\n            this.showConfirmModal(this.collapseModal);\r\n        } else {\r\n            this.handleCollapse();\r\n        }\r\n    };\r\n\r\n    updateTab = (tab?: string, skipConfirm?: boolean) => {\r\n        if (!skipConfirm && this.requireConfirm) {\r\n            this.showConfirmModal(() => this.updateTab(tab, true));\r\n        } else {\r\n            this.setState({\r\n                active_tab: tab,\r\n                active_section: '',\r\n            });\r\n        }\r\n    };\r\n\r\n    updateSection = (section?: string, skipConfirm?: boolean) => {\r\n        if (!skipConfirm && this.requireConfirm) {\r\n            this.showConfirmModal(() => this.updateSection(section, true));\r\n        } else {\r\n            this.setState({active_section: section ?? ''});\r\n        }\r\n    };\r\n\r\n    getUserSettingsTabs = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        return [\r\n            {\r\n                name: 'notifications',\r\n                uiName: formatMessage({id: 'user.settings.modal.notifications', defaultMessage: 'Notifications'}),\r\n                icon: 'icon icon-bell-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.notifications.icon', defaultMessage: 'Notification Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'display',\r\n                uiName: formatMessage({id: 'user.settings.modal.display', defaultMessage: 'Display'}),\r\n                icon: 'icon icon-eye-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.display.icon', defaultMessage: 'Display Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'sidebar',\r\n                uiName: formatMessage({id: 'user.settings.modal.sidebar', defaultMessage: 'Sidebar'}),\r\n                icon: 'icon icon-dock-left',\r\n                iconTitle: formatMessage({id: 'user.settings.sidebar.icon', defaultMessage: 'Sidebar Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'advanced',\r\n                uiName: formatMessage({id: 'user.settings.modal.advanced', defaultMessage: 'Advanced'}),\r\n                icon: 'icon icon-tune',\r\n                iconTitle: formatMessage({id: 'user.settings.advance.icon', defaultMessage: 'Advanced Settings Icon'}),\r\n            },\r\n        ];\r\n    };\r\n\r\n    getProfileSettingsTab = () => {\r\n        const {formatMessage} = this.props.intl;\r\n        return [\r\n            {\r\n                name: 'profile',\r\n                uiName: formatMessage({id: 'user.settings.modal.profile', defaultMessage: 'Profile'}),\r\n                icon: 'icon icon-settings-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.profile.icon', defaultMessage: 'Profile Settings Icon'}),\r\n            },\r\n            {\r\n                name: 'security',\r\n                uiName: formatMessage({id: 'user.settings.modal.security', defaultMessage: 'Security'}),\r\n                icon: 'icon icon-lock-outline',\r\n                iconTitle: formatMessage({id: 'user.settings.security.icon', defaultMessage: 'Security Settings Icon'}),\r\n            },\r\n        ];\r\n    };\r\n\r\n    getPluginsSettingsTab = () => {\r\n        return Object.values(this.props.pluginSettings).map((v) => {\r\n            const useURL = v.icon && (isValidUrl(v.icon) || v.icon.startsWith('/'));\r\n            const className = v.icon ? `icon ${v.icon}` : 'icon icon-power-plug-outline';\r\n            return {\r\n                name: v.id,\r\n                uiName: v.uiName,\r\n                icon: useURL ? {url: v.icon!} : className,\r\n                iconTitle: v.uiName,\r\n            };\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {formatMessage} = this.props.intl;\r\n\r\n        let modalTitle: string;\r\n        if (this.props.adminMode && this.props.user) {\r\n            modalTitle = formatMessage(\r\n                {id: 'userSettings.adminMode.modal_header', defaultMessage: \"{userDisplayName}'s Settings\"},\r\n                {userDisplayName: getDisplayName(this.props.user)},\r\n            );\r\n        } else if (this.props.isContentProductSettings) {\r\n            modalTitle = formatMessage({id: 'global_header.productSettings', defaultMessage: 'Settings'});\r\n        } else {\r\n            modalTitle = formatMessage({id: 'user.settings.modal.title', defaultMessage: 'Profile'});\r\n        }\r\n\r\n        const headerTitle = (\r\n            <div\r\n                className='UserSettingsModal__headerWrapper'\r\n                id='accountSettingsHeader'\r\n            >\r\n                <span\r\n                    id='accountSettingsModalLabel'\r\n                    className='modal-header__title'\r\n                >\r\n                    {modalTitle}\r\n                </span>\r\n                {this.props.adminMode && (\r\n                    <div className='adminModeBadge'>\r\n                        <FormattedMessage\r\n                            id='userSettings.adminMode.admin_mode_badge'\r\n                            defaultMessage='Admin Mode'\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <GenericModal\r\n                id='accountSettingsModal'\r\n                className='a11y__modal settings-modal UserSettingsModal'\r\n                show={this.state.show}\r\n                onHide={this.handleHide}\r\n                onExited={this.handleHidden}\r\n                ariaLabel={modalTitle}\r\n                compassDesign={true}\r\n                enforceFocus={this.state.enforceFocus}\r\n                bodyPadding={false}\r\n                modalHeaderText={headerTitle}\r\n                modalLocation='top'\r\n                delayFocusTrap={true}\r\n            >\r\n                <div\r\n                    ref={this.modalBodyRef}\r\n                >\r\n                    {/* Admin Mode: wait for user + preferences */}\r\n                    {this.props.adminMode &&\r\n                        <SmartLoader\r\n                            loading={this.props.adminMode && (!this.props.userPreferences || !this.props.user)}\r\n                            className='loadingIndicator'\r\n                            onLoaded={this.setLoadingFinished}\r\n                        >\r\n                            <LoadingSpinner/>\r\n                        </SmartLoader>\r\n                    }\r\n\r\n                    {/* Show content only when not loading */}\r\n                    {!this.state.loading && this.props.user &&\r\n                        <>\r\n                            <div className='settings-table'>\r\n                                <div className='settings-links'>\r\n                                    <SettingsSidebar\r\n                                        tabs={this.props.isContentProductSettings ? this.getUserSettingsTabs() : this.getProfileSettingsTab()}\r\n                                        pluginTabs={this.props.isContentProductSettings ? this.getPluginsSettingsTab() : []}\r\n                                        activeTab={this.state.active_tab}\r\n                                        updateTab={this.updateTab}\r\n                                    />\r\n                                </div>\r\n                                <div className='settings-content minimize-settings'>\r\n                                    <UserSettings\r\n                                        activeTab={this.state.active_tab}\r\n                                        activeSection={this.state.active_section}\r\n                                        updateSection={this.updateSection}\r\n                                        updateTab={this.updateTab}\r\n                                        closeModal={this.closeModal}\r\n                                        collapseModal={this.collapseModal}\r\n                                        setRequireConfirm={(requireConfirm?: boolean, customConfirmAction?: () => () => void) => {\r\n                                            this.requireConfirm = requireConfirm || false;\r\n                                            this.customConfirmAction = customConfirmAction || null;\r\n                                        }}\r\n                                        pluginSettings={this.props.pluginSettings}\r\n                                        user={this.props.user}\r\n                                        adminMode={this.props.adminMode}\r\n                                        userPreferences={this.props.userPreferences}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    }\r\n                </div>\r\n\r\n                <ConfirmModal\r\n                    title={formatMessage({id: 'user.settings.modal.confirmTitle', defaultMessage: 'Discard Changes?'})}\r\n                    message={formatMessage({\r\n                        id: 'user.settings.modal.confirmMsg',\r\n                        defaultMessage: 'You have unsaved changes, are you sure you want to discard them?',\r\n                    })}\r\n                    confirmButtonText={formatMessage({\r\n                        id: 'user.settings.modal.confirmBtns',\r\n                        defaultMessage: 'Yes, Discard',\r\n                    })}\r\n                    show={this.state.showConfirmModal}\r\n                    onConfirm={this.handleConfirm}\r\n                    onCancel={this.handleCancelConfirmation}\r\n                />\r\n            </GenericModal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(UserSettingsModal);\r\n"],"names":["CreatableSelect$1","forwardRef","props","ref","creatableProps","u","selectProps","S","_excluded","compareOption","option","arguments","length","undefined","accessors","candidate","String","toLowerCase","optionValue","getOptionValue","optionLabel","getOptionLabel","builtins","formatCreateLabel","inputValue","concat","isValidNewOption","selectValue","selectOptions","some","getNewOptionData","label","value","__isNew__","useCreatable","_ref","_ref$allowCreateWhile","allowCreateWhileLoading","_ref$createOptionPosi","createOptionPosition","_ref$formatCreateLabe","_ref$isValidNewOption","_ref$getNewOptionData","onCreateOption","_ref$options","options","propsOptions","propsOnChange","onChange","restSelectProps","_restSelectProps$getO","getOptionValue$1","g","_restSelectProps$getO2","getOptionLabel$1","isLoading","isMulti","name","newOption","useMemo","useCallback","newValue","actionMeta","action","valueArray","Array","isArray","newOptionData","newActionMeta","activateMfa","code","dispatch","getState","currentUserId","getCurrentUserId","UserActions","deactivateMfa","generateMfaSecret","ColorInput","React","constructor","super","_defineProperty","e","this","colorPicker","current","contains","target","setState","isOpened","state","colorInput","focus","newColorData","focused","hex","event","color","tinycolor","normalizedColor","toHex","isValid","setSelectionRange","key","togglePicker","getDerivedStateFromProps","componentDidUpdate","prevProps","prevState","prevIsOpened","document","addEventListener","checkClick","capture","removeEventListener","render","id","className","type","onBlur","onFocus","onKeyDown","maxLength","disabled","isDisabled","onClick","style","backgroundColor","ChromePicker","handleColorChange","disableAlpha","_pt","isRequired","SettingsSidebar","tab","_closest","preventDefault","updateTab","closest","classList","add","isKeyPressed","Constants","KeyCodes","UP","DOWN","visibleTabs","getVisibleTabs","currentIndex","findIndex","t","nextIndex","targetTab","targetButton","buttonRefs","get","Map","_this$props$pluginTab","tabs","filter","display","pluginTabs","renderTab","isActive","activeTab","icon","title","iconTitle","src","url","alt","newGroup","element","set","delete","classNames","active","handleClick","bind","handleKeyDown","uiName","role","tabIndex","isMobileView","_this$props$pluginTab2","tabList","map","pluginTabList","visiblePluginTabs","FormattedMessage","defaultMessage","connect","getIsMobileView","JoinLeaveSection","currentTarget","joinLeaveState","a11yFocus","section","joinLeave","onUpdateSection","actions","userId","joinLeavePreference","category","Preferences","CATEGORY_ADVANCED_SETTINGS","user_id","ADVANCED_FILTER_JOIN_LEAVE","savePreferences","minRef","focusEditButton","_this$minRef$current","areAllSectionsInactive","SettingItemMax","inputs","AdvancedSections","JOIN_LEAVE","checked","handleOnChange","setting","submit","handleSubmit","saving","isSaving","serverError","updateSection","handleUpdateSection","SettingItemMin","describe","renderOnOffLabel","enableJoinLeaveMessage","getConfig","EnableJoinLeaveMessageByDefault","userPreference","adminMode","userPreferences","toString","bindActionCreators","PerformanceDebuggingSection","useRef","prevActiveRef","useEffect","_minRef$current","performanceDebuggingEnabled","settings","PerformanceDebuggingSectionExpanded","PerformanceDebuggingSectionCollapsed","Object","assign","propTypes","description","settingsEnabled","disableClientPlugins","disableTypingMessages","values","count","PERFORMANCE_DEBUGGING","setDisableClientPlugins","useState","setDisableTypingMessages","preferences","push","CATEGORY_PERFORMANCE_DEBUGGING","NAME_DISABLE_CLIENT_PLUGINS","NAME_DISABLE_TYPING_MESSAGES","mapDispatchToProps","getUserPreferences","getBool","isPerformanceDebuggingEnabled","AdvancedSettingsDisplay","send_on_ctrl_enter","sendOnCtrlEnter","code_block_ctrl_enter","codeBlockOnCtrlEnter","formatting","join_leave","sync_drafts","syncDrafts","UNREAD_SCROLL_POSITION","unreadScrollPosition","showDeactivateAccountModal","_objectSpread","async","user","forEach","updateUserActive","then","error","message","data","revokeAllSessionsForUser","emitUserLoggedOutEvent","getStateFromProps","defineMessages","default","mac","isMac","ctrlSendTitle","ctrlSendDesc","activeSection","max","updateSetting","SettingItem","unread_scroll_position","UNREAD_SCROLL_POSITION_START_FROM_LEFT","UNREAD_SCROLL_POSITION_START_FROM_NEWEST","renderUnreadScrollPositionLabel","SYNC_DRAFTS","getCtrlSendText","ctrlSendActive","renderCtrlEnterLabel","enabled","ctrlEnter","codeBlockCtrlEnter","ctrlSendSection","renderCtrlSendSection","formattingSection","renderFormattingSection","formattingSectionDivider","deactivateAccountSection","makeConfirmationModal","auth_service","enableUserDeactivation","saveButtonText","saveButtonClassName","handleShowDeactivateAccountModal","confirmButtonClass","deactivateMemberButton","ConfirmModal","show","confirmButtonText","onConfirm","handleDeactivateAccountSubmit","onCancel","handleHideDeactivateAccountModal","unreadScrollPositionSection","renderUnreadScrollPositionSection","unreadScrollPositionSectionDivider","syncDraftsSection","syncDraftsSectionDivider","syncedDraftsAreAllowed","renderSyncDraftsSection","SettingMobileHeader","closeModal","collapseModal","text","SettingDesktopHeader","getAdvancedSettingsCategory","makeGetCategory","getUserAdvancedSettingsCategory","makeGetUserCategory","config","EnableUserDeactivation","advancedSettingsCategory","getCurrentUser","getUnreadScrollPositionPreference","ColorChooser","htmlFor","newColor","_props$onChange","call","messages","sidebarBg","sidebarText","sidebarHeaderBg","sidebarTeamBarBg","sidebarHeaderTextColor","sidebarUnreadText","sidebarTextHoverBg","sidebarTextActiveBorder","sidebarTextActiveColor","onlineIndicator","awayIndicator","dndIndicator","mentionBg","mentionColor","centerChannelBg","centerChannelColor","newMessageSeparator","linkColor","buttonBg","buttonColor","errorTextColor","mentionHighlightBg","mentionHighlightLink","codeTheme","CustomThemeChooser","settingId","updateTheme","theme","newTheme","mentionBj","copyTheme","setCopyTheme","window","clipboardData","getData","JSON","parse","err","setThemeDefaults","stringify","stopPropagation","_this$textareaRef$cur","_this$textareaRef$cur2","textareaRef","_this$sidebarStylesHe","_this$sidebarStylesHe2","_this$sidebarStylesHe3","sidebarStylesHeaderRef","toggle","isAccordionOpen","setAttribute","toggleSection","sidebarStylesRef","_this$centerChannelSt","_this$centerChannelSt2","_this$centerChannelSt3","centerChannelStylesHeaderRef","centerChannelStylesRef","_this$linkAndButtonSt","_this$linkAndButtonSt2","_this$linkAndButtonSt3","linkAndButtonStylesHeaderRef","linkAndButtonStylesRef","selectTheme","execCommand","showCopySuccess","copySuccess","querySelector","setTimeout","createRef","image","node","ontransitionend","overflowY","intl","sidebarElements","centerChannelElements","linkAndButtonElements","THEME_ELEMENTS","index","_element$themes","codeThemeOptions","codeThemeURL","themes","codeThemeIndex","iconURL","defaultValue","onCodeThemeChange","WithTooltip","width","group","pasteBox","onCopy","onPaste","pasteBoxChange","onChangeHandle","toggleSidebarStyles","formatMessage","toggleCenterChannelStyles","toggleLinkAndButtonStyles","injectIntl","ThemeThumbnail","themeName","themeKey","height","viewBox","fill","xmlns","x","y","rx","cx","cy","r","PremadeThemeChooser","allowedThemes","premadeThemes","hasAllowedThemes","trim","k","THEMES","hasOwn","_premadeTheme$type","indexOf","premadeTheme","activeClass","replace","changeOpacity","toTitleCase","AllowedThemes","split","ThemeSetting","_this$props$setRequir","_this$props","teamId","applyToAllTeams","currentTeamId","saveTheme","deleteTeamSpecificThemes","setRequireConfirm","originalTheme","_this$props$setRequir2","_this$props2","themeChanged","field","applyTheme","_this$props$setRequir3","_this$props3","selected","resetFields","componentWillUnmount","DEFAULT_CODE_THEME","showAllTeamsCheckbox","displayCustom","custom","premade","themeUI","allowCustomThemes","updateType","ExternalLink","href","location","allTeamsCheckbox","submitExtra","submitTheme","disableEnterSubmit","isFullWidth","getCurrentTeamId","getTheme","getThemePreferences","getMyTeamsCount","openModal","UserSettingsTheme","ManageLanguage","modalBody","ESCAPE","openMenu","remove","ENTER","selectedOption","locale","submitUser","patchUser","updateMe","res","Error","userLocale","locales","reactSelectContainer","componentDidMount","handleContainerKeyDown","keys","l","order","sort","a","b","lang","reactStyles","menuPortal","provided","zIndex","interfaceLanguageLabelAria","input","ReactSelect","classNamePrefix","ariaLiveMessages","menuIsOpen","menuPortalTarget","body","styles","isClearable","setLanguage","onMenuClose","handleMenuClose","onMenuOpen","handleMenuOpen","link","msg","changeLanguage","getLanguages","ManageLanguages","ManageTimezones","manualTimezone","useAutomaticTimezone","automaticTimezone","oldUseAutomaticTimezone","oldAutomaticTimezone","oldManualTimezone","timezoneNotChanged","timezone","updatedUser","timezoneLabel","selectedOptionValue","getBrowserTimezone","getTimezoneLabel","timezones","previousTimezone","timeOptions","timeObject","_previousTimezone","utc","noTimezonesFromServer","automaticTimezoneInput","handleAutomaticTimezone","manualTimezoneInput","containerStyle","changeTimezone","getCurrentTimezoneLabel","RenderEmoticonsAsEmoji","renderEmoticonsAsEmoji","setValue","setIsSaving","handleChange","submitPreference","pref","CATEGORY_DISPLAY_SETTINGS","RENDER_EMOTICONS_AS_EMOJI","changePreference","inputId","messageId","_ref2","getDisplayStateFromProps","militaryTime","teammateNameDisplay","availabilityStatusOnPosts","channelDisplayMode","messageDisplay","colorizeUsernames","collapseDisplay","collapsedReplyThreads","linkPreviewDisplay","lastActiveDisplay","oneClickReactionsOnPosts","clickToReply","UserSettingsDisplay","show_last_active","timePreference","USE_MILITARY_TIME","availabilityStatusOnPostsPreference","AVAILABILITY_STATUS_ON_POSTS","teammateNameDisplayPreference","NAME_NAME_FORMAT","channelDisplayModePreference","CHANNEL_DISPLAY_MODE","messageDisplayPreference","MESSAGE_DISPLAY","colorizeUsernamesPreference","COLORIZE_USERNAMES","collapseDisplayPreference","COLLAPSE_DISPLAY","collapsedReplyThreadsPreference","COLLAPSED_REPLY_THREADS","linkPreviewDisplayPreference","LINK_PREVIEW_DISPLAY","oneClickReactionsOnPostsPreference","ONE_CLICK_REACTIONS_ENABLED","clickToReplyPreference","CLICK_TO_REPLY","updateState","newState","deepEqual","prevSections","clock","linkpreview","message_display","channel_display_mode","languages","shouldAutoUpdateTimezone","autoUpdateTimezone","handleChannelDisplayModeRadio","handlemessageDisplayRadio","handleCollapseRadio","handleCollapseReplyThreadsRadio","handleLastActiveRadio","handleLinkPreviewRadio","createSection","_firstOption$radionBu","_secondOption$radionB","firstOption","secondOption","thirdOption","onSubmit","extraInfo","firstMessage","radionButtonText","moreColon","firstMessageMore","more","secondMessage","secondMessageMore","thirdMessage","messageTitle","messageDesc","format","childOptionToShow","childOption","firstDisplay","secondDisplay","thirdSection","childOptionSection","thirdDisplay","childDisplay","collapseSection","defaultDisplay","defineMessage","linkPreviewSection","enableLinkPreviews","lastActiveSection","lastActiveTimeEnabled","submitLastActive","clockSection","teammateNameDisplaySection","lockTeammateNameDisplay","configTeammateNameDisplay","TEAMMATE_NAME_DISPLAY","SHOW_USERNAME","SHOW_NICKNAME_FULLNAME","SHOW_FULLNAME","availabilityStatusOnPostsSection","timezoneSelection","userTimezone","Boolean","messageDisplaySection","MESSAGE_DISPLAY_CLEAN","MESSAGE_DISPLAY_COMPACT","collapsedReplyThreadsAllowUserPreference","COLLAPSED_REPLY_THREADS_FALLBACK_DEFAULT","COLLAPSED_REPLY_THREADS_ON","COLLAPSED_REPLY_THREADS_OFF","channelDisplayModeSection","CHANNEL_DISPLAY_MODE_FULL_SCREEN","CHANNEL_DISPLAY_MODE_CENTERED","languagesSection","localeName","getLanguageInfo","themeSection","oneClickReactionsOnPostsSection","enableThemeSelection","emojiPickerEnabled","renderEmoticonsAsEmojiSection","_user$props","getTimezoneForUserProfile","getCurrentTimezoneFull","automaticTimezoneNotSet","generateCurrentTimezoneLabel","getUserCurrentTimezone","AllowCustomThemes","EnableLinkPreviews","EnableThemeSelection","getLicense","LockTeammateNameDisplay","TeammateNameDisplay","EnableEmojiPicker","EnableLastActiveTime","getUser","isLanguageAvailable","DefaultClientLocale","AVAILABILITY_STATUS_ON_POSTS_DEFAULT","USE_MILITARY_TIME_DEFAULT","CHANNEL_DISPLAY_MODE_DEFAULT","MESSAGE_DISPLAY_DEFAULT","COLORIZE_USERNAMES_DEFAULT","COLLAPSE_DISPLAY_DEFAULT","isCollapsedThreadsAllowed","CollapsedThreads","ALWAYS_ON","getCollapsedThreadsPreference","CLICK_TO_REPLY_DEFAULT","LINK_PREVIEW_DISPLAY_DEFAULT","ONE_CLICK_REACTIONS_ENABLED_DEFAULT","RENDER_EMOTICONS_AS_EMOJI_DEFAULT","SettingPicture","Component","_this$props$updateSec","removeSrc","setDefaultSrc","confirmButton","_this$props$onRemove","loadingPicture","onRemove","_this$props$onSetDefa","onSetDefault","_this$props$onSubmit","_this$props4","focusFirstElement","_this$props$onFileCha","_this$props5","onFileChange","selectInput","click","file","previewBlob","URL","createObjectURL","reader","FileReader","onload","orientation","FileUtils","result","orientationStyles","readAsArrayBuffer","imageContext","imageStyles","backgroundImage","defaultImageSrc","_title","imageElement","handler","handleRemoveSrc","handleSetDefaultSrc","settingList","_this$settingList$cur","handleFileSelected","setPicture","revokeObjectURL","img","renderImg","imgRender","buttonRender","disableSaveButtonFocus","submitActive","accept","ACCEPT_STATIC_IMAGE","handleFileChange","handleInputFile","localizeMessage","handleSave","LoadingWrapper","loading","helpText","FormError","errors","clientError","handleCancel","holders","usernameReserved","usernameGroupNameUniqueness","usernameRestrictions","validEmail","validUrl","emailMatch","incorrectPassword","emptyPassword","validImage","imageTooLarge","uploadImage","uploadImageMobile","fullName","nickname","username","profilePicture","close","position","selectStyles","valueContainer","baseStyles","minHeight","flexWrap","whiteSpace","multiValue","margin","control","multiValueLabel","padding","UserSettingsGeneralTab","PureComponent","email","resendStatus","showSpinner","sendVerificationEmail","handleEmailResend","firstName","lastName","first_name","last_name","confirmEmail","currentPassword","password","isEmail","emailUpdated","sectionIsSaving","requireEmailVerification","clearErrors","logError","AnnouncementBarMessages","EMAIL_VERIFICATION_REQUIRED","AnnouncementBarTypes","SUCCESS","errorBarMode","LogErrorBarMode","Always","server_error_id","emailError","setDefaultProfileImage","pictureError","pictureFile","AcceptedProfileImageTypes","includes","size","maxFileSize","uploadProfileImage","_ref3","setupInitialState","_this$state$customAtt","attributeID","attributeField","customProfileAttributeFields","find","attributeValue","customAttributeValues","attrs","value_type","validURL","validHttpUrl","validLink","endsWith","slice","saveCustomProfileAttribute","_ref4","files","fieldID","attributeValues","substring","LDAP_SERVICE","ldapFirstNameAttributeSet","ldapLastNameAttributeSet","SAML_SERVICE","samlFirstNameAttributeSet","samlLastNameAttributeSet","OAUTH_SERVICES","Input","autoFocus","updateFirstName","MAX_FIRSTNAME_LENGTH","Utils","updateLastName","MAX_LASTNAME_LENGTH","notifClick","notifLink","notify","submitName","ldapNicknameAttributeSet","samlNicknameAttributeSet","nicknameLabel","updateNickname","MAX_NICKNAME_LENGTH","autoCapitalize","submitNickname","usernameLabel","MAX_USERNAME_LENGTH","updateUsername","validate","usernameError","ValidationErrors","RESERVED_NAME","min","MIN_USERNAME_LENGTH","submitUsername","ldapPositionAttributeSet","samlPositionAttributeSet","positionLabel","updatePosition","MAX_POSITION_LENGTH","submitPosition","attributeSections","attribute","_this$props$user$cust","sectionName","getDisplayValue","attribOptions","o","_attribute$attrs3","_attribute$attrs4","_attribute$attrs5","_attribute$attrs","_attribute$attrs2","ldap","saml","managed","attributeLabel","opts","isSearchable","placeholder","components","IndicatorSeparator","v","updateSelectAttribute","inputType","updateAttribute","MAX_CUSTOM_ATTRIBUTE_LENGTH","submitAttribute","custom_profile_attributes","_this$props$user$cust2","FormattedList","attrib","setDefault","imgSrc","ldapPictureAttributeSet","submitPicture","last_picture_update","setDefaultProfilePicture","updatePicture","minMessage","date","FormattedDate","Date","day","month","year","renderPictureStatus","enableCustomProfileAttributes","getCustomProfileAttributeValues","originalEmail","createEmailSection","emailVerificationEnabled","updateEmail","MAX_EMAIL_LENGTH","updateConfirmEmail","updateCurrentPassword","submitEmail","GITLAB_SERVICE","GOOGLE_SERVICE","OFFICE365_SERVICE","OPENID_SERVICE","isEmailValid","nameSection","createNameSection","nicknameSection","createNicknameSection","usernameSection","createUsernameSection","positionSection","createPositionSection","emailSection","customAttributeSection","createCustomAttributeSection","pictureSection","createPictureSection","getCustomProfileAttributes","RequireEmailVerification","parseInt","MaxFileSize","LdapFirstNameAttributeSet","LdapLastNameAttributeSet","SamlFirstNameAttributeSet","SamlLastNameAttributeSet","LdapNicknameAttributeSet","SamlNicknameAttributeSet","SamlPositionAttributeSet","LdapPositionAttributeSet","LdapPictureAttributeSet","license","isEnterpriseLicense","getFeatureFlagValue","mapStateToProps","sendPushNotifications","SendPushNotifications","enableAutoResponder","ExperimentalEnableAutomaticReplies","subscriptionProduct","getSubscriptionProduct","isEnterpriseReady","BuildEnterpriseReady","isCollapsedThreadsEnabled","isCollapsedThreadsEnabledForUser","isCallsRingingEnabled","isCallsEnabled","isCallsRingingEnabledOnServer","isEnterpriseOrCloudOrSKUStarterFree","UserSettingsNotifications","primaryButton","buttonText","SectionNotice","getPluginPreferenceKey","pluginId","markdownOptions","mentionHighlight","RadioOption","selectedValue","onSelected","Markdown","RadioInput","informChange","preference","useSelector","getPreference","setSelectedValue","PluginSetting","useDispatch","preferenceMin","toUpdate","minDescribe","_setting$options$find","onSettingChanged","_section$onSubmit","CustomComponent","component","inputEl","PluggableErrorBoundary","PluginTab","headerText","useIntl","pluginName","PluginAction","sections","sectionEl","AccessHistoryModal","content","getUserAudits","onHide","userAudits","LoadingScreen","AuditTable","audits","showIp","showSession","GenericModal","modalHeaderText","modalHeaderTextId","modalLocation","isStacked","compassDesign","ariaLabelledby","getCurrentUserAudits","DeviceIcon","devicePicture","formatAsString","deviceTitle","MoreInfo","currentSession","handleMoreInfo","moreInfo","firstAccessTime","create_at","getMonthLong","time","FormattedTime","hour","minute","os","browser","ActivityLog","submitRevoke","session","device_id","devicePlatform","appleIcon","General","PUSH_NOTIFY_APPLE_REACT_NATIVE","androidIcon","PUSH_NOTIFY_ANDROID_REACT_NATIVE","lastAccessTime","last_activity_at","platform","isMobileSession","sessionInfo","mobileSessionInfo","windowsIcon","linuxIcon","ActivityLogModal","sessions","getSessions","revokeSession","altId","_e$target","modalContent","activityList","reduce","array","getUserSessions","getCurrentLocale","MfaSection","getHistory","mfaEnforced","mfaActive","removeMfa","setupMfa","renderTitle","mfaAvailable","renderContent","renderHelpText","renderDescription","mfaLicensed","IsLicensed","MFA","mfaEnabled","EnableMultifactorAuthentication","EnforceMultifactorAuthentication","mfa_active","TOKEN_CREATING","TOKEN_CREATED","TOKEN_NOT_CREATING","UserAccessTokenSection","tokenCreationState","handleCancelConfirm","newtokendescriptionRef","tokenError","confirmCopyToken","createUserAccessToken","newToken","confirmAction","showConfirmModal","confirmTitle","confirmMessage","token","confirmComplete","confirmHideCancel","UserUtils","roles","handleCreateToken","Keyboard","confirmCreateToken","tokenId","userAccessTokens","chunks","revokeToken","revokeUserAccessToken","enableUserAccessToken","disableUserAccessToken","clearUserAccessTokens","getUserAccessTokensForUser","nextProps","tokenListClass","tokenList","noTokenText","newTokenSection","activeLink","activeStatus","is_active","deactivateToken","activateToken","confirmRevokeToken","isMobile","linkTokens","DeveloperLinks","PERSONAL_ACCESS_TOKENS","linkAPI","onKeyPress","saveTokenKeyPress","SaveButton","savingMessage","stopCreatingToken","WarningIcon","additionalClassName","startCreatingToken","infoPosition","cancelButtonText","hideCancel","entities","users","myUserAccessTokens","SECTION_PASSWORD","SECTION_SIGNIN","SECTION_APPS","SECTION_TOKENS","SecurityTab","getAuthorizedOAuthApps","authorizedApps","newPassword","isPasswordValid","savingPassword","updateUserPassword","getMe","getDefaultState","valid","isValidPassword","passwordConfig","confirmPassword","appId","getAttribute","deauthorizeOAuthApp","app","submitPassword","updateNewPassword","updateConfirmPassword","d","last_password_update","hour12","emailOption","gitlabOption","googleOption","office365Option","openidOption","ldapOption","samlOption","enableSignUpWithGitLab","Link","to","encodeURIComponent","enableSignUpWithGoogle","enableSignUpWithOffice365","enableSignUpWithOpenId","enableLdap","enableSaml","allowedToSwitchToEmail","apps","homepage","deauthorizeApp","icon_url","icon50","wrapperClass","authService","enableOAuthServiceProvider","loadAuthorizedOAuthApps","passwordSection","createPasswordSection","signInSection","oauthSection","tokensSection","numMethods","experimentalEnableAuthenticationTransfer","createSignInSection","createOAuthAppsSection","canUseAccessTokens","ToggleModalButton","modalId","dialogType","deleteAccountLink","ownProps","tokensEnabled","EnableUserAccessTokens","userHasTokenRole","EnableOAuthServiceProvider","EnableSignUpWithEmail","EnableSignInWithEmail","EnableSignInWithUsername","EnableSignUpWithGitLab","EnableSignUpWithGoogle","EnableSignUpWithOpenId","EnableLdap","EnableSaml","EnableSignUpWithOffice365","ExperimentalEnableAuthenticationTransfer","getPasswordConfig","DeleteAccountLink","limits","LimitVisibleGMsDMs","limit","CATEGORY_SIDEBAR_SETTINGS","LIMIT_VISIBLE_DMS_GMS","dmGmLimit","getVisibleDmGmLimit","ShowUnreadsCategory","SHOW_UNREAD_SECTION","showUnreadsCategory","shouldShowUnreadsCategory","UserSettingsSidebar","UserSettings","GeneralTab","NotificationsTab","DisplayTab","SidebarTab","AdvancedTab","pluginSettings","SmartLoader","children","onLoaded","timeoutFinished","setTimeoutFinished","UserSettingsModal","_props$activeTab","cmdOrCtrlPressed","shiftKey","A","handleHide","requireConfirm","stopTryNotificationRing","active_tab","isContentProductSettings","active_section","focusOriginElement","focusElement","onExited","ReactDOM","modalBodyRef","enforceFocus","customConfirmAction","afterConfirm","handleConfirm","handleCollapse","skipConfirm","useURL","isValidUrl","startsWith","userID","scrollTop","modalTitle","userDisplayName","getDisplayName","headerTitle","handleHidden","ariaLabel","bodyPadding","delayFocusTrap","setLoadingFinished","LoadingSpinner","getUserSettingsTabs","getProfileSettingsTab","getPluginsSettingsTab","handleCancelConfirmation"],"sourceRoot":""}