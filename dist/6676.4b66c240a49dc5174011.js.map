{"version":3,"file":"6676.4b66c240a49dc5174011.js","mappings":"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","sources":["webpack://mattermost-webapp/./src/components/system_notice/notices.tsx","webpack://mattermost-webapp/./src/components/system_notice/system_notice.tsx","webpack://mattermost-webapp/./src/components/system_notice/index.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\n\r\nimport {InformationOutlineIcon} from '@mattermost/compass-icons/components';\r\n\r\nimport ExternalLink from 'components/external_link';\r\nimport type {Notice} from 'components/system_notice/types';\r\n\r\nimport {DocLinks} from 'utils/constants';\r\nimport * as ServerVersion from 'utils/server_version';\r\nimport * as UserAgent from 'utils/user_agent';\r\n\r\n// Notices are objects with the following fields:\r\n//  - name - string identifier\r\n//  - adminOnly - set to true if only system admins should see this message\r\n//  - icon - the image to display for the notice icon\r\n//  - title - JSX node to display for the notice title\r\n//  - body - JSX node to display for the notice body\r\n//  - allowForget - boolean to allow forget the notice\r\n//  - show - function that check if we need to show the notice\r\n//\r\n// Order is important! The notices at the top are shown first.\r\n\r\nconst notices: Notice[] = [\r\n    {\r\n        name: 'apiv3_deprecation',\r\n        adminOnly: true,\r\n        title: (\r\n            <FormattedMessage\r\n                id='system_notice.title'\r\n                defaultMessage='Notice from Mattermost'\r\n            />\r\n        ),\r\n        body: (\r\n            <FormattedMessage\r\n                id='system_notice.body.api3'\r\n                defaultMessage='If youâ€™ve created or installed integrations in the last two years, find out how <link>recent changes</link> may have affected them.'\r\n                values={{\r\n                    link: (msg: React.ReactNode) => (\r\n                        <ExternalLink\r\n                            href='https://api.mattermost.com/#tag/APIv3-Deprecation'\r\n                            location='system_notices'\r\n                        >\r\n                            {msg}\r\n                        </ExternalLink>\r\n                    ),\r\n                }}\r\n            />\r\n        ),\r\n        allowForget: true,\r\n        show: (serverVersion, config) => {\r\n            if (config.InstallationDate >= new Date(2018, 5, 16, 0, 0, 0, 0).getTime()) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n    },\r\n    {\r\n        name: 'advanced_permissions',\r\n        adminOnly: true,\r\n        title: (\r\n            <FormattedMessage\r\n                id='system_notice.title'\r\n                defaultMessage='Notice from Mattermost'\r\n            />\r\n        ),\r\n        body: (\r\n            <FormattedMessage\r\n                id='system_notice.body.permissions'\r\n                defaultMessage='Some policy and permission System Console settings have moved with the release of <link>advanced permissions</link> into Mattermost Free and Professional.'\r\n                values={{\r\n                    link: (msg: React.ReactNode) => (\r\n                        <ExternalLink\r\n                            href={DocLinks.ONBOARD_ADVANCED_PERMISSIONS}\r\n                            location='system_notices'\r\n                        >\r\n                            {msg}\r\n                        </ExternalLink>\r\n                    ),\r\n                }}\r\n            />\r\n        ),\r\n        allowForget: true,\r\n        show: (serverVersion, config, license) => {\r\n            if (license.IsLicensed === 'false') {\r\n                return false;\r\n            }\r\n            if (config.InstallationDate > new Date(2018, 5, 16, 0, 0, 0, 0).getTime()) {\r\n                return false;\r\n            }\r\n            if (license.IsLicensed === 'true' && license.IssuedAt > new Date(2018, 5, 16, 0, 0, 0, 0).getTime()) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n    },\r\n    {\r\n        name: 'ee_upgrade_advice',\r\n        adminOnly: true,\r\n        title: (\r\n            <FormattedMessage\r\n                id='system_notice.title'\r\n                defaultMessage='Notice from Mattermost'\r\n            />\r\n        ),\r\n        body: (\r\n            <FormattedMessage\r\n                id='system_notice.body.ee_upgrade_advice'\r\n                defaultMessage='Enterprise Edition is recommended to ensure optimal operation and reliability. <link>Learn more</link>.'\r\n                values={{\r\n                    link: (msg: React.ReactNode) => (\r\n                        <ExternalLink\r\n                            href='https://mattermost.com/performance'\r\n                            location='system_notices'\r\n                        >\r\n                            {msg}\r\n                        </ExternalLink>\r\n                    ),\r\n                }}\r\n            />\r\n        ),\r\n        allowForget: false,\r\n        show: (serverVersion, config, license, analytics) => {\r\n            const USERS_THRESHOLD = 10000;\r\n\r\n            // If we don't have the analytics yet, don't show\r\n            if (!analytics || Object.hasOwn(analytics, 'TOTAL_USERS')) {\r\n                return false;\r\n            }\r\n\r\n            if (analytics.TOTAL_USERS && analytics.TOTAL_USERS < USERS_THRESHOLD) {\r\n                return false;\r\n            }\r\n\r\n            if (license.IsLicensed === 'true' && license.Cluster === 'true') {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n    },\r\n    {\r\n        name: 'ie11_deprecation',\r\n        title: (\r\n            <FormattedMessage\r\n                id='system_notice.title'\r\n                defaultMessage='Notice from Mattermost'\r\n            />\r\n        ),\r\n        allowForget: false,\r\n        body: (\r\n            <FormattedMessage\r\n                id='system_notice.body.ie11_deprecation'\r\n                defaultMessage='Your browser, IE11, will no longer be supported in an upcoming release. <link>Find out how to move to another browser in one simple step</link>.'\r\n                values={{\r\n                    link: (msg: React.ReactNode) => (\r\n                        <ExternalLink\r\n                            href='https://forum.mattermost.com/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575'\r\n                            location='system_notices'\r\n                        >\r\n                            {msg}\r\n                        </ExternalLink>\r\n                    ),\r\n                }}\r\n            />\r\n        ),\r\n        show: (serverVersion) => {\r\n            // Don't show the notice after v5.16, show a different notice\r\n            if (ServerVersion.isServerVersionGreaterThanOrEqualTo(serverVersion, '5.16.0')) {\r\n                return false;\r\n            }\r\n\r\n            // Only show if they're using IE\r\n            if (!UserAgent.isInternetExplorer()) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n    },\r\n    {\r\n\r\n        // This notice is marked as viewed by default for new users on the server.\r\n        // Any change on this notice should be handled also in the server side.\r\n        name: 'GMasDM',\r\n        allowForget: true,\r\n        title: (\r\n            <FormattedMessage\r\n                id='system_notice.title.gm_as_dm'\r\n                defaultMessage='Updates to Group Messages'\r\n            />\r\n        ),\r\n        icon: (<InformationOutlineIcon/>),\r\n        body: (\r\n            <FormattedMessage\r\n                id='system_noticy.body.gm_as_dm'\r\n                defaultMessage='You will now be notified for all activity in your group messages along with a notification badge for every new message.{br}{br}You can configure this in notification preferences for each group message.'\r\n                values={{br: (<br/>)}}\r\n            />\r\n        ),\r\n        show: (serverVersion, config, license, analytics, currentChannel) => {\r\n            return currentChannel?.type === 'G';\r\n        },\r\n    },\r\n];\r\n\r\nexport default notices;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport {FormattedMessage, injectIntl, type WrappedComponentProps} from 'react-intl';\r\n\r\nimport type {AnalyticsState} from '@mattermost/types/admin';\r\nimport type {Channel} from '@mattermost/types/channels';\r\nimport type {ClientConfig, ClientLicense} from '@mattermost/types/config';\r\nimport type {PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport type {Notice} from 'components/system_notice/types';\r\nimport MattermostLogo from 'components/widgets/icons/mattermost_logo';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nexport interface Props extends WrappedComponentProps {\r\n    currentUserId: string;\r\n    notices: Notice[];\r\n    preferences: {[key: string]: any};\r\n    dismissedNotices: any;\r\n    isSystemAdmin?: boolean;\r\n    serverVersion: string;\r\n    config: Partial<ClientConfig>;\r\n    license: ClientLicense;\r\n    analytics?: AnalyticsState;\r\n    currentChannel?: Channel;\r\n    actions: {\r\n        savePreferences(userId: string, preferences: PreferenceType[]): void;\r\n        dismissNotice(type: string): void;\r\n        getStandardAnalytics(teamId?: string): void;\r\n    };\r\n}\r\nexport class SystemNotice extends React.PureComponent<Props> {\r\n    componentDidMount() {\r\n        if (this.props.isSystemAdmin) {\r\n            this.props.actions.getStandardAnalytics();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Props) {\r\n        if (prevProps.isSystemAdmin !== this.props.isSystemAdmin && this.props.isSystemAdmin) {\r\n            this.props.actions.getStandardAnalytics();\r\n        }\r\n    }\r\n\r\n    getCurrentNotice = () => {\r\n        for (const notice of this.props.notices) {\r\n            // Skip if dismissed previously this session\r\n            if (this.props.dismissedNotices[notice.name]) {\r\n                continue;\r\n            }\r\n\r\n            // Skip if dismissed forever\r\n            if (this.props.preferences[notice.name]) {\r\n                continue;\r\n            }\r\n\r\n            if (notice.adminOnly && !this.props.isSystemAdmin) {\r\n                continue;\r\n            }\r\n\r\n            if (!notice.show?.(\r\n                this.props.serverVersion,\r\n                this.props.config,\r\n                this.props.license,\r\n                this.props.analytics,\r\n                this.props.currentChannel,\r\n            )) {\r\n                continue;\r\n            }\r\n\r\n            return notice;\r\n        }\r\n        return null;\r\n    };\r\n\r\n    hide = (remind = false) => {\r\n        const notice = this.getCurrentNotice();\r\n        if (!notice) {\r\n            return;\r\n        }\r\n\r\n        if (!remind) {\r\n            this.props.actions.savePreferences(this.props.currentUserId, [{\r\n                user_id: this.props.currentUserId,\r\n                category: Preferences.CATEGORY_SYSTEM_NOTICE,\r\n                name: notice.name,\r\n                value: 'dismissed',\r\n            }]);\r\n        }\r\n\r\n        this.props.actions.dismissNotice(notice.name);\r\n    };\r\n\r\n    hideAndRemind = () => {\r\n        this.hide(true);\r\n    };\r\n\r\n    hideAndForget = () => {\r\n        this.hide(false);\r\n    };\r\n\r\n    render() {\r\n        const notice = this.getCurrentNotice();\r\n\r\n        if (notice == null) {\r\n            return null;\r\n        }\r\n\r\n        let visibleMessage;\r\n        if (notice.adminOnly) {\r\n            visibleMessage = (\r\n                <div className='system-notice__info'>\r\n                    <i\r\n                        className='fa fa-eye'\r\n                        title={this.props.intl.formatMessage({id: 'system_notice.adminVisible.icon', defaultMessage: 'Only visible to System Admins Icon'})}\r\n                    />\r\n                    <FormattedMessage\r\n                        id='system_notice.adminVisible'\r\n                        defaultMessage='Only visible to System Admins'\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const icon = notice.icon || <MattermostLogo/>;\r\n\r\n        return (\r\n            <div\r\n                className='system-notice bg--white'\r\n            >\r\n                <div className='system-notice__logo'>\r\n                    {icon}\r\n                </div>\r\n                <div className='system-notice__body'>\r\n                    <div className='system-notice__title'>\r\n                        {notice.title}\r\n                    </div>\r\n                    {notice.body}\r\n                    {visibleMessage}\r\n                    <div className='system-notice__footer'>\r\n                        <button\r\n                            id='systemnotice_remindme'\r\n                            className='btn btn-sm btn-primary'\r\n                            onClick={this.hideAndRemind}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='system_notice.remind_me'\r\n                                defaultMessage='Remind Me Later'\r\n                            />\r\n                        </button>\r\n                        {notice.allowForget &&\r\n                            <button\r\n                                id='systemnotice_dontshow'\r\n                                className='btn btn-sm btn-tertiary'\r\n                                onClick={this.hideAndForget}\r\n                            >\r\n                                <FormattedMessage\r\n                                    id='system_notice.dont_show'\r\n                                    defaultMessage=\"Don't Show Again\"\r\n                                />\r\n                            </button>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default injectIntl(SystemNotice);\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport type {Dispatch} from 'redux';\r\n\r\nimport type {PreferenceType} from '@mattermost/types/preferences';\r\n\r\nimport {getStandardAnalytics} from 'mattermost-redux/actions/admin';\r\nimport {savePreferences} from 'mattermost-redux/actions/preferences';\r\nimport {Permissions} from 'mattermost-redux/constants';\r\nimport {createSelector} from 'mattermost-redux/selectors/create_selector';\r\nimport {getCurrentChannel} from 'mattermost-redux/selectors/entities/channels';\r\nimport {getConfig, getLicense} from 'mattermost-redux/selectors/entities/general';\r\nimport {makeGetCategory} from 'mattermost-redux/selectors/entities/preferences';\r\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\r\n\r\nimport {dismissNotice} from 'actions/views/notice';\r\n\r\nimport Notices from 'components/system_notice/notices';\r\nimport SystemNotice from 'components/system_notice/system_notice';\r\n\r\nimport {Preferences} from 'utils/constants';\r\n\r\nimport type {GlobalState} from 'types/store';\r\n\r\nconst getSystemNoticePreferences = makeGetCategory('getSystemNoticePreferences', Preferences.CATEGORY_SYSTEM_NOTICE);\r\nconst getPreferenceNameMap = createSelector(\r\n    'getPreferenceNameMap',\r\n    getSystemNoticePreferences,\r\n    (preferences) => {\r\n        const nameMap: {[key: string]: PreferenceType} = {};\r\n        preferences.forEach((p) => {\r\n            nameMap[p.name] = p;\r\n        });\r\n        return nameMap;\r\n    },\r\n);\r\n\r\nfunction mapStateToProps(state: GlobalState) {\r\n    const license = getLicense(state);\r\n    const config = getConfig(state);\r\n    const serverVersion = state.entities.general.serverVersion;\r\n    const analytics = state.entities.admin.analytics;\r\n\r\n    return {\r\n        currentUserId: state.entities.users.currentUserId,\r\n        preferences: getPreferenceNameMap(state),\r\n        dismissedNotices: state.views.notice.hasBeenDismissed,\r\n        isSystemAdmin: haveISystemPermission(state, {permission: Permissions.MANAGE_SYSTEM}),\r\n        notices: Notices,\r\n        config,\r\n        license,\r\n        serverVersion,\r\n        analytics,\r\n        currentChannel: getCurrentChannel(state),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n    return {\r\n        actions: bindActionCreators({\r\n            savePreferences,\r\n            dismissNotice,\r\n            getStandardAnalytics,\r\n        }, dispatch),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SystemNotice);\r\n"],"names":["name","adminOnly","title","React","FormattedMessage","id","defaultMessage","body","values","link","msg","ExternalLink","href","location","allowForget","show","serverVersion","config","InstallationDate","Date","getTime","DocLinks","ONBOARD_ADVANCED_PERMISSIONS","license","IsLicensed","IssuedAt","analytics","Object","hasOwn","TOTAL_USERS","Cluster","ServerVersion","UserAgent","icon","InformationOutlineIcon","br","currentChannel","type","SystemNotice","constructor","_this","arguments","this","_defineProperty","notice","props","notices","_notice$show","dismissedNotices","preferences","isSystemAdmin","call","remind","length","undefined","getCurrentNotice","actions","savePreferences","currentUserId","user_id","category","Preferences","CATEGORY_SYSTEM_NOTICE","value","dismissNotice","hide","componentDidMount","getStandardAnalytics","componentDidUpdate","prevProps","render","visibleMessage","className","intl","formatMessage","MattermostLogo","onClick","hideAndRemind","hideAndForget","_pt","isRequired","injectIntl","getSystemNoticePreferences","makeGetCategory","getPreferenceNameMap","createSelector","nameMap","forEach","p","connect","state","getLicense","getConfig","entities","general","admin","users","views","hasBeenDismissed","haveISystemPermission","permission","Permissions","MANAGE_SYSTEM","Notices","getCurrentChannel","dispatch","bindActionCreators"],"sourceRoot":""}