{"version":3,"file":"index.esm.js","sources":["../src/hooks/useFocusTrap.ts","../src/hooks/useStackedModal.ts","../src/generic_modal/generic_modal.tsx","../src/footer_pagination/footer_pagination.tsx","../src/skeleton_loader/index.tsx","../src/tour_tip/tour_tip_backdrop.tsx","../src/pulsating_dot/index.tsx","../src/tour_tip/tour_tip.tsx","../src/common/hooks/useElementAvailable.ts","../src/common/hooks/useMeasurePunchouts.ts","../src/common/hooks/useFollowElementDimensions.ts"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useEffect, useRef} from 'react';\r\n\r\n// A global stack to hold active focus trap containers.\r\n// This ensures that only the topmost trap processes Tab events.\r\nconst activeFocusTraps: HTMLElement[] = [];\r\n\r\ntype FocusTrapOptions = {\r\n    initialFocus?: boolean;\r\n    restoreFocus?: boolean;\r\n    delayMs?: number; // Delay in milliseconds before activating the focus trap\r\n};\r\n\r\n/**\r\n * A hook that traps focus within a container element.\r\n * When multiple focus traps are active, only the topmost one will process Tab key events.\r\n * @param isActive Whether the focus trap is active\r\n * @param containerRef A ref to the container element\r\n * @param options FocusTrapOptions Options for the focus trap\r\n * @returns void\r\n */\r\nexport function useFocusTrap(\r\n    isActive: boolean,\r\n    containerRef: React.RefObject<HTMLElement>,\r\n    options: FocusTrapOptions = {initialFocus: false, restoreFocus: false},\r\n): void {\r\n    const previousFocusRef = useRef<HTMLElement | null>(null);\r\n\r\n    // Add a ref to store the cached focusable elements\r\n    const focusableElementsRef = useRef<HTMLElement[]>([]);\r\n\r\n    useEffect(() => {\r\n        const container = containerRef.current;\r\n        if (!isActive || !container) {\r\n            return;\r\n        }\r\n\r\n        // Store the previously focused element for restoration if needed\r\n        if (options.restoreFocus) {\r\n            previousFocusRef.current = document.activeElement as HTMLElement;\r\n        }\r\n\r\n        let timeoutId: NodeJS.Timeout | null = null;\r\n        let trapActive = false;\r\n\r\n        // Function to cache focusable elements and activate the trap\r\n        const activateFocusTrap = () => {\r\n            // Cache the focusable elements\r\n            focusableElementsRef.current = getFocusableElements(container);\r\n\r\n            // Register this focus trap (push it onto the global stack)\r\n            activeFocusTraps.push(container);\r\n            trapActive = true;\r\n\r\n            if (focusableElementsRef.current.length === 0) {\r\n                return;\r\n            }\r\n\r\n            // Set initial focus if needed\r\n            if (options.initialFocus && focusableElementsRef.current.length > 0) {\r\n                focusableElementsRef.current[0].focus();\r\n            }\r\n        };\r\n\r\n        // Function to refresh the cached elements if needed\r\n        const refreshFocusableElements = () => {\r\n            focusableElementsRef.current = getFocusableElements(container);\r\n        };\r\n\r\n        // Delay the activation if delayMs is specified\r\n        if (options.delayMs && options.delayMs > 0) {\r\n            timeoutId = setTimeout(activateFocusTrap, options.delayMs);\r\n        } else {\r\n            // Activate immediately if no delay\r\n            activateFocusTrap();\r\n        }\r\n\r\n        // Handle tab key navigation - only trap Tab key, let other keys propagate\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            // Only handle Tab key for focus trapping\r\n            if (e.key !== 'Tab') {\r\n                return;\r\n            }\r\n\r\n            // Only process if this container is the top-most active focus trap\r\n            // AND if the focus trap has been activated (after delay)\r\n            if (!trapActive || activeFocusTraps[activeFocusTraps.length - 1] !== container) {\r\n                return;\r\n            }\r\n\r\n            // Use the cached focusable elements\r\n            const elements = focusableElementsRef.current;\r\n            if (elements.length === 0) {\r\n                return;\r\n            }\r\n\r\n            const firstElement = elements[0];\r\n            const lastElement = elements[elements.length - 1];\r\n\r\n            // If shift+tab on first element, move to last element\r\n            if (e.shiftKey && document.activeElement === firstElement) {\r\n                e.preventDefault();\r\n                lastElement.focus();\r\n            } else if (!e.shiftKey && document.activeElement === lastElement) { // If tab on last element, move to first element\r\n                e.preventDefault();\r\n                firstElement.focus();\r\n            }\r\n        };\r\n\r\n        // Set up a MutationObserver to detect DOM changes that might affect focusable elements\r\n        const observer = new MutationObserver(() => {\r\n            // Only refresh if the trap is active\r\n            if (trapActive) {\r\n                refreshFocusableElements();\r\n            }\r\n        });\r\n\r\n        // Start observing the container for changes that might affect focusability\r\n        observer.observe(container, {\r\n            childList: true, // Watch for changes to child elements\r\n            subtree: true, // Watch the entire subtree\r\n            attributes: true, // Watch for attribute changes\r\n            attributeFilter: ['tabindex', 'disabled'], // Only care about attributes that affect focusability\r\n        });\r\n\r\n        document.addEventListener('keydown', handleKeyDown);\r\n\r\n        // Cleanup function\r\n        // eslint-disable-next-line consistent-return\r\n        return () => {\r\n            // Clear the timeout if component unmounts during delay\r\n            if (timeoutId) {\r\n                clearTimeout(timeoutId);\r\n            }\r\n\r\n            // Stop the observer\r\n            observer.disconnect();\r\n\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n\r\n            // Only remove from stack if it was actually added\r\n            if (trapActive) {\r\n                const index = activeFocusTraps.indexOf(container);\r\n                if (index > -1) {\r\n                    activeFocusTraps.splice(index, 1);\r\n                }\r\n            }\r\n\r\n            // Restore focus when trap is deactivated\r\n            if (options.restoreFocus && previousFocusRef.current) {\r\n                previousFocusRef.current.focus();\r\n            }\r\n        };\r\n    }, [isActive, containerRef, options.initialFocus, options.restoreFocus, options.delayMs]);\r\n}\r\n\r\n/**\r\n * Helper function to get all focusable elements within a container\r\n * @param container The container element\r\n * @returns An array of focusable elements\r\n */\r\nfunction getFocusableElements(container: HTMLElement): HTMLElement[] {\r\n    const selector = [\r\n        'a[href]',\r\n        'button:not([disabled])',\r\n        'input:not([disabled])',\r\n        'select:not([disabled])',\r\n        'textarea:not([disabled])',\r\n        '[tabindex]:not([tabindex=\"-1\"])',\r\n    ].join(',');\r\n\r\n    const elements = Array.from(container.querySelectorAll(selector)) as HTMLElement[];\r\n\r\n    // Filter out hidden elements\r\n    return elements.filter((element) => isElementVisible(element));\r\n}\r\n\r\n/**\r\n * Checks if an element is visible in the DOM\r\n * @param element The element to check\r\n * @returns true if the element is visible, false otherwise\r\n */\r\nfunction isElementVisible(element: HTMLElement): boolean {\r\n    // Check if the element has zero dimensions\r\n    const rect = element.getBoundingClientRect();\r\n    if (rect.width === 0 && rect.height === 0) {\r\n        return false;\r\n    }\r\n\r\n    // Check computed styles for this element and its ancestors\r\n    let currentElement: HTMLElement | null = element;\r\n    while (currentElement) {\r\n        const style = window.getComputedStyle(currentElement);\r\n\r\n        // Check common ways elements can be hidden\r\n        if (\r\n            style.display === 'none' ||\r\n            style.visibility === 'hidden' ||\r\n            style.pointerEvents === 'none' ||\r\n            currentElement.hasAttribute('hidden')\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        currentElement = currentElement.parentElement;\r\n    }\r\n\r\n    return true;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useLayoutEffect, useMemo, useRef, useState} from 'react';\r\n\r\nconst BASE_MODAL_Z_INDEX = 1050; // Bootstrap default modal z-index\r\nconst BASE_BACKDROP_Z_INDEX = 1040; // Bootstrap default backdrop z-index\r\nconst Z_INDEX_INCREMENT = 10; // Increment for each stacked modal level\r\n\r\n// No options needed since delayMs is not used by any consumers\r\n\r\ntype StackedModalResult = {\r\n\r\n    /**\r\n     * Whether the modal should render its own backdrop\r\n     */\r\n    shouldRenderBackdrop: boolean;\r\n\r\n    /**\r\n     * Style object for the modal element\r\n     */\r\n    modalStyle: React.CSSProperties;\r\n\r\n    /**\r\n     * Reference to the parent modal element (if this is a stacked modal)\r\n     */\r\n    parentModalRef: React.RefObject<HTMLElement | null>;\r\n};\r\n\r\n/**\r\n * A hook that manages stacked modals, controlling backdrop visibility and z-index values.\r\n *\r\n * @param isStacked Whether this modal is stacked on top of another modal\r\n * @param isOpen Whether the modal is currently open\r\n * @returns An object with properties to control modal and backdrop rendering\r\n */\r\nexport function useStackedModal(\r\n    isStacked: boolean,\r\n    isOpen: boolean,\r\n): StackedModalResult {\r\n    // State to track whether this modal should render its own backdrop\r\n    const [shouldRenderBackdrop, setShouldRenderBackdrop] = useState(!isStacked);\r\n\r\n    // State to track z-index values\r\n    const [zIndexes, setZIndexes] = useState({\r\n        modal: BASE_MODAL_Z_INDEX,\r\n        backdrop: BASE_BACKDROP_Z_INDEX,\r\n    });\r\n\r\n    // Ref to store the parent modal element\r\n    const parentModalRef = useRef<HTMLElement | null>(null);\r\n\r\n    // Ref to store the original z-index of the parent modal's backdrop\r\n    const originalBackdropZIndexRef = useRef<string | null>(null);\r\n\r\n    // Ref to store the parent modal's backdrop element\r\n    const backdropRef = useRef<HTMLElement | null>(null);\r\n\r\n    // Ref to store the original opacity of the parent modal's backdrop\r\n    const originalBackdropOpacityRef = useRef<string | null>(null);\r\n\r\n    useLayoutEffect(() => {\r\n        // If this is not a stacked modal, do nothing\r\n        if (!isStacked) {\r\n            return;\r\n        }\r\n\r\n        // If modal is closed, reset state and do cleanup\r\n        if (!isOpen) {\r\n            setShouldRenderBackdrop(false);\r\n            setZIndexes({\r\n                modal: BASE_MODAL_Z_INDEX,\r\n                backdrop: BASE_BACKDROP_Z_INDEX,\r\n            });\r\n            return;\r\n        }\r\n\r\n        // No timeout needed since we're not using delay\r\n\r\n        // Function to adjust the backdrop for stacked modals\r\n        const adjustBackdrop = () => {\r\n            // For stacked modals, we want to render our own backdrop\r\n            setShouldRenderBackdrop(true);\r\n\r\n            // Calculate the z-index for the stacked modal\r\n            const stackedModalZIndex = BASE_MODAL_Z_INDEX + Z_INDEX_INCREMENT;\r\n\r\n            // Update the z-index for this modal and its backdrop\r\n            // The backdrop should be above the parent modal (1050) but below the stacked modal\r\n            setZIndexes({\r\n                modal: stackedModalZIndex,\r\n                backdrop: stackedModalZIndex - 1, // This is 1050 + 10 - 1 = 1059\r\n            });\r\n\r\n            // Adjust the parent backdrop's opacity and z-index\r\n            if (typeof document !== 'undefined') {\r\n                // Find all existing backdrops in the DOM\r\n                const backdrops = document.querySelectorAll('.modal-backdrop');\r\n                if (backdrops.length > 0) {\r\n                    // Get the most recent backdrop (the one with the highest z-index)\r\n                    // This should be the backdrop of the parent modal\r\n                    const parentBackdrop = backdrops[backdrops.length - 1] as HTMLElement;\r\n                    backdropRef.current = parentBackdrop;\r\n                    originalBackdropZIndexRef.current = parentBackdrop.style.zIndex || String(BASE_BACKDROP_Z_INDEX);\r\n                    originalBackdropOpacityRef.current = parentBackdrop.style.opacity || '0.5'; // Default Bootstrap backdrop opacity\r\n\r\n                    // Add a transition for smooth opacity change\r\n                    parentBackdrop.style.transition = 'opacity 150ms ease-in-out';\r\n                    parentBackdrop.style.opacity = '0';\r\n                }\r\n            }\r\n        };\r\n\r\n        // Adjust the backdrop immediately (no delay option)\r\n        adjustBackdrop();\r\n\r\n        // Cleanup function\r\n        // eslint-disable-next-line consistent-return\r\n        return () => {\r\n            // Restore original backdrop properties\r\n            if (backdropRef.current) {\r\n                if (originalBackdropZIndexRef.current) {\r\n                    // Restore original z-index if it was stored\r\n                    backdropRef.current.style.zIndex = originalBackdropZIndexRef.current;\r\n                }\r\n\r\n                if (originalBackdropOpacityRef.current) {\r\n                    // Restore original opacity if it was stored\r\n                    // Keep the transition for a smooth fade-in\r\n                    backdropRef.current.style.transition = 'opacity 150ms ease-in-out';\r\n                    backdropRef.current.style.opacity = originalBackdropOpacityRef.current;\r\n                }\r\n\r\n                // Clear refs\r\n                backdropRef.current = null;\r\n                originalBackdropZIndexRef.current = null;\r\n                originalBackdropOpacityRef.current = null;\r\n            }\r\n        };\r\n    }, [isOpen, isStacked]);\r\n\r\n    const modalStyle = useMemo(() => {\r\n        return isStacked ? {\r\n            zIndex: zIndexes.modal,\r\n        } : {};\r\n    }, [isStacked, zIndexes.modal]);\r\n\r\n    return {\r\n        shouldRenderBackdrop,\r\n        modalStyle,\r\n        parentModalRef,\r\n    };\r\n}\r\n\r\nexport default useStackedModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React, {useState, useEffect, useCallback, useRef} from 'react';\r\nimport {Modal} from 'react-bootstrap';\r\nimport {FormattedMessage, useIntl} from 'react-intl';\r\n\r\nimport {useFocusTrap} from '../hooks/useFocusTrap';\r\nimport {useStackedModal} from '../hooks/useStackedModal';\r\nimport './generic_modal.scss';\r\n\r\nexport type ModalLocation = 'top' | 'center' | 'bottom';\r\n\r\nexport type Props = {\r\n    className?: string;\r\n    onExited?: () => void;\r\n    onEntered?: () => void;\r\n    onHide?: () => void;\r\n    modalHeaderText?: React.ReactNode;\r\n    modalHeaderTextId?: string;\r\n    modalSubheaderText?: React.ReactNode;\r\n    show?: boolean;\r\n    handleCancel?: () => void;\r\n    handleConfirm?: () => void;\r\n    handleEnterKeyPress?: () => void;\r\n    handleKeydown?: (event?: React.KeyboardEvent<HTMLDivElement>) => void;\r\n    confirmButtonText?: React.ReactNode;\r\n    confirmButtonClassName?: string;\r\n    cancelButtonText?: React.ReactNode;\r\n    cancelButtonClassName?: string;\r\n    isConfirmDisabled?: boolean;\r\n    isDeleteModal?: boolean;\r\n    id?: string;\r\n    autoCloseOnCancelButton?: boolean;\r\n    autoCloseOnConfirmButton?: boolean;\r\n    enforceFocus?: boolean;\r\n    container?: React.ReactNode | React.ReactNodeArray;\r\n    ariaLabel?: string;\r\n    ariaLabelledby?: string;\r\n    errorText?: string | React.ReactNode;\r\n    compassDesign?: boolean;\r\n    backdrop?: boolean | 'static';\r\n    backdropClassName?: string;\r\n    tabIndex?: number;\r\n    children: React.ReactNode;\r\n    autoFocusConfirmButton?: boolean;\r\n    keyboardEscape?: boolean;\r\n    headerInput?: React.ReactNode;\r\n    bodyPadding?: boolean;\r\n    bodyDivider?: boolean;\r\n    bodyOverflowVisible?: boolean;\r\n    footerContent?: React.ReactNode;\r\n    footerDivider?: boolean;\r\n    appendedContent?: React.ReactNode;\r\n    headerButton?: React.ReactNode;\r\n    showCloseButton?: boolean;\r\n    showHeader?: boolean;\r\n\r\n    /**\r\n     * Whether this modal is stacked on top of another modal.\r\n     * When true, the modal will not render its own backdrop and will\r\n     * adjust the z-index of the parent modal's backdrop.\r\n     */\r\n    isStacked?: boolean;\r\n\r\n    /*\r\n     * Controls the vertical location of the modal.\r\n     * 'top' => margin-top: 5vh\r\n     * 'center' => margin-top: calc(50vh - 240px)\r\n     * 'bottom' => margin-top: calc(50vh + 240px) (example calculation)\r\n     */\r\n    modalLocation?: ModalLocation;\r\n\r\n    /**\r\n     * Optionally set a test ID for the container, so that the modal can be easily referenced\r\n     * in tests (Cypress, Playwright, etc.)\r\n     */\r\n    dataTestId?: string;\r\n\r\n    /**\r\n     * Whether to delay activating the focus trap.\r\n     *\r\n     * This is useful for modals with dynamic content that might not be fully\r\n     * rendered when the modal is opened. The delay allows the DOM to settle\r\n     * before the focus trap identifies focusable elements. ie. MultiSelect\r\n     *\r\n     * When true, applies a 500ms delay.\r\n     */\r\n    delayFocusTrap?: boolean;\r\n};\r\n\r\nexport const GenericModal: React.FC<Props> = ({\r\n    show = true,\r\n    id = 'genericModal',\r\n    autoCloseOnCancelButton = true,\r\n    autoCloseOnConfirmButton = true,\r\n    enforceFocus = true,\r\n    keyboardEscape = true,\r\n    bodyPadding = true,\r\n    showCloseButton = true,\r\n    showHeader = true,\r\n    modalLocation = 'center',\r\n    className,\r\n    onExited,\r\n    onEntered,\r\n    onHide,\r\n    modalHeaderText,\r\n    modalHeaderTextId,\r\n    modalSubheaderText,\r\n    handleCancel,\r\n    handleConfirm,\r\n    handleEnterKeyPress,\r\n    handleKeydown,\r\n    confirmButtonText,\r\n    confirmButtonClassName,\r\n    cancelButtonText,\r\n    cancelButtonClassName,\r\n    isConfirmDisabled,\r\n    isDeleteModal,\r\n    container,\r\n    ariaLabel,\r\n    ariaLabelledby,\r\n    errorText,\r\n    compassDesign,\r\n    backdrop,\r\n    backdropClassName,\r\n    children,\r\n    autoFocusConfirmButton,\r\n    headerInput,\r\n    bodyDivider,\r\n    bodyOverflowVisible,\r\n    footerContent,\r\n    footerDivider,\r\n    appendedContent,\r\n    headerButton,\r\n    dataTestId,\r\n    delayFocusTrap,\r\n    isStacked = false,\r\n}) => {\r\n    const intl = useIntl();\r\n\r\n    // Create a ref for the modal container\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [showState, setShowState] = useState(show);\r\n\r\n    const onHideCallback = useCallback(() => {\r\n        setShowState(false);\r\n        onHide?.();\r\n    }, [onHide]);\r\n\r\n    // Use focus trap to keep focus within the modal when it's open\r\n    useFocusTrap(showState, containerRef, {\r\n        delayMs: delayFocusTrap ? 500 : undefined,\r\n    });\r\n\r\n    // Use stacked modal hook to manage backdrop and z-index\r\n    // Only pass isStacked=true when it's explicitly set to true\r\n    const {\r\n        shouldRenderBackdrop,\r\n        modalStyle,\r\n    } = useStackedModal(Boolean(isStacked), showState);\r\n\r\n    useEffect(() => {\r\n        setShowState(show);\r\n    }, [show]);\r\n\r\n    const handleCancelCallback = useCallback((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        event.preventDefault();\r\n        if (autoCloseOnCancelButton) {\r\n            onHideCallback();\r\n        }\r\n        handleCancel?.();\r\n    }, [autoCloseOnCancelButton, onHideCallback, handleCancel]);\r\n\r\n    const handleConfirmCallback = useCallback((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        event.preventDefault();\r\n        if (autoCloseOnConfirmButton) {\r\n            onHideCallback();\r\n        }\r\n        handleConfirm?.();\r\n    }, [autoCloseOnConfirmButton, onHideCallback, handleConfirm]);\r\n\r\n    const onEnterKeyDown = useCallback((event: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (event.key === 'Enter') {\r\n            if (event.nativeEvent.isComposing) {\r\n                return;\r\n            }\r\n            if (handleConfirm && autoCloseOnConfirmButton) {\r\n                onHideCallback();\r\n            }\r\n            handleEnterKeyPress?.();\r\n        }\r\n        handleKeydown?.(event);\r\n    }, [handleConfirm, autoCloseOnConfirmButton, onHideCallback, handleEnterKeyPress, handleKeydown]);\r\n\r\n    // Build confirm button if provided.\r\n    let confirmButtonElement;\r\n    if (handleConfirm) {\r\n        const buttonTypeClass = isDeleteModal ? 'delete' : 'confirm';\r\n        let confirmButtonTextContent: React.ReactNode = (\r\n            <FormattedMessage\r\n                id='generic_modal.confirm'\r\n                defaultMessage='Confirm'\r\n            />\r\n        );\r\n        if (confirmButtonText) {\r\n            confirmButtonTextContent = confirmButtonText;\r\n        }\r\n        confirmButtonElement = (\r\n            <button\r\n                autoFocus={autoFocusConfirmButton}\r\n                type='submit'\r\n                className={classNames('GenericModal__button btn btn-primary', buttonTypeClass, confirmButtonClassName, {\r\n                    disabled: isConfirmDisabled,\r\n                })}\r\n                onClick={handleConfirmCallback}\r\n                disabled={isConfirmDisabled}\r\n            >\r\n                {confirmButtonTextContent}\r\n            </button>\r\n        );\r\n    }\r\n\r\n    // Build cancel button if provided.\r\n    let cancelButtonElement;\r\n    if (handleCancel) {\r\n        let cancelButtonTextContent: React.ReactNode = (\r\n            <FormattedMessage\r\n                id='generic_modal.cancel'\r\n                defaultMessage='Cancel'\r\n            />\r\n        );\r\n        if (cancelButtonText) {\r\n            cancelButtonTextContent = cancelButtonText;\r\n        }\r\n        cancelButtonElement = (\r\n            <button\r\n                type='button'\r\n                className={classNames('GenericModal__button btn btn-tertiary', cancelButtonClassName)}\r\n                onClick={handleCancelCallback}\r\n            >\r\n                {cancelButtonTextContent}\r\n            </button>\r\n        );\r\n    }\r\n\r\n    // Build header text if provided.\r\n    const headerText = modalHeaderText && (\r\n        <div className='GenericModal__header'>\r\n            <h1 id={modalHeaderTextId || 'genericModalLabel'} className='modal-title'>\r\n                {modalHeaderText}\r\n            </h1>\r\n            {headerButton}\r\n        </div>\r\n    );\r\n\r\n    // Map modalLocation to a CSS class.\r\n    const locationClassMapping: Record<ModalLocation, string> = {\r\n        top: 'GenericModal__location--top',\r\n        center: 'GenericModal__location--center',\r\n        bottom: 'GenericModal__location--bottom',\r\n    };\r\n    const modalLocationClass = locationClassMapping[modalLocation];\r\n\r\n    // Accessibility labeling strategy:\r\n    // 1. We always set aria-labelledby to ensure the modal has a proper label\r\n    //    - First try to use the provided ariaLabeledBy prop\r\n    //    - Fall back to 'genericModalLabel' which references the modal title\r\n    // 2. We also support aria-label as a secondary option\r\n    //    - This will only be used by screen readers if the element referenced by aria-labelledby doesn't exist\r\n    //    - This provides a fallback for accessibility in case the referenced element is missing\r\n    // Note: When both aria-labelledby and aria-label are present, aria-labelledby takes precedence\r\n    const ariaLabelledbyValue = ariaLabelledby || 'genericModalLabel';\r\n\r\n    return (\r\n        <Modal\r\n            id={id}\r\n            role='none'\r\n            aria-label={ariaLabel}\r\n            aria-labelledby={ariaLabelledbyValue}\r\n            aria-modal='true'\r\n            dialogClassName={classNames(\r\n                modalLocationClass,\r\n                'a11y__modal GenericModal',\r\n                {\r\n                    GenericModal__compassDesign: compassDesign,\r\n                    'modal--overflow': bodyOverflowVisible,\r\n                },\r\n                className,\r\n            )}\r\n            show={showState}\r\n            restoreFocus={true}\r\n            enforceFocus={enforceFocus}\r\n            onHide={onHideCallback}\r\n            onExited={onExited}\r\n            backdrop={shouldRenderBackdrop ? backdrop : false}\r\n            backdropStyle={isStacked ? {zIndex: 1051} : undefined}\r\n            backdropClassName={backdropClassName}\r\n            container={container}\r\n            keyboard={keyboardEscape}\r\n            onEntered={onEntered}\r\n            data-testid={dataTestId}\r\n            style={modalStyle}\r\n        >\r\n            <div\r\n                ref={containerRef}\r\n                onKeyDown={onEnterKeyDown}\r\n                className='GenericModal__wrapper GenericModal__wrapper-enter-key-press-catcher'\r\n            >\r\n                {showHeader && (\r\n                    <Modal.Header closeButton={false}>\r\n                        <div className='GenericModal__header__text_container'>\r\n                            {compassDesign && (\r\n                                <>\r\n                                    {headerText}\r\n                                    {headerInput}\r\n                                </>\r\n                            )}\r\n                            {modalSubheaderText && (\r\n                                <div className='modal-subheading-container'>\r\n                                    <div id='genericModalSubheading' className='modal-subheading'>\r\n                                        {modalSubheaderText}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        {showCloseButton && (\r\n                            <button\r\n                                type='button'\r\n                                className='close'\r\n                                onClick={onHideCallback}\r\n                                aria-label={intl.formatMessage({id: 'generic_modal.close', defaultMessage: 'Close'})}\r\n                            >\r\n                                <span aria-hidden='true'>{'Ã—'}</span>\r\n                                <span className='sr-only'>\r\n                                    <FormattedMessage id='generic_modal.close' defaultMessage='Close' />\r\n                                </span>\r\n                            </button>\r\n                        )}\r\n                    </Modal.Header>\r\n                )}\r\n                <Modal.Body className={classNames({divider: bodyDivider, 'overflow-visible': bodyOverflowVisible})}>\r\n                    {compassDesign ? (\r\n                        errorText && (\r\n                            <div className='genericModalError'>\r\n                                <i className='icon icon-alert-outline'/>\r\n                                <span>{errorText}</span>\r\n                            </div>\r\n                        )\r\n                    ) : (\r\n                        headerText\r\n                    )}\r\n                    <div className={classNames('GenericModal__body', {padding: bodyPadding})}>\r\n                        {children}\r\n                    </div>\r\n                </Modal.Body>\r\n                {(cancelButtonElement || confirmButtonElement || footerContent) && (\r\n                    <Modal.Footer className={classNames({divider: footerDivider})}>\r\n                        {(cancelButtonElement || confirmButtonElement) ? (\r\n                            <>\r\n                                {cancelButtonElement}\r\n                                {confirmButtonElement}\r\n                            </>\r\n                        ) : (\r\n                            footerContent\r\n                        )}\r\n                    </Modal.Footer>\r\n                )}\r\n                {Boolean(appendedContent) && appendedContent}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default GenericModal;\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport classNames from 'classnames';\r\nimport React from 'react';\r\nimport {useIntl} from 'react-intl';\r\n\r\nimport {ChevronLeftIcon, ChevronRightIcon} from '@mattermost/compass-icons/components';\r\n\r\nimport './footer_pagination.scss';\r\n\r\nconst BUTTON_ICON_SIZE = 16;\r\n\r\ntype Props = {\r\n    page: number;\r\n    total: number;\r\n    itemsPerPage: number;\r\n    onNextPage: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    onPreviousPage: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n};\r\n\r\nexport const FooterPagination = ({\r\n    page,\r\n    total,\r\n    itemsPerPage,\r\n    onNextPage,\r\n    onPreviousPage,\r\n}: Props) => {\r\n    const {formatMessage} = useIntl();\r\n\r\n    const startCount = page * itemsPerPage;\r\n    const endCount = Math.min(startCount + itemsPerPage, total);\r\n    const totalPages = Math.trunc((total - 1) / itemsPerPage);\r\n\r\n    const prevDisabled = page <= 0;\r\n    const nextDisabled = page >= totalPages;\r\n\r\n    return (\r\n        <div className='footer-pagination'>\r\n            <div className='footer-pagination__legend'>\r\n                {Boolean(total) && (\r\n                    formatMessage(\r\n                        {\r\n                            id: 'footer_pagination.count',\r\n                            defaultMessage: 'Showing {startCount, number}-{endCount, number} of {total, number}',\r\n                        },\r\n                        {\r\n                            startCount: startCount + 1,\r\n                            endCount,\r\n                            total,\r\n                        },\r\n                    )\r\n                )}\r\n            </div>\r\n            <div className='footer-pagination__button-container'>\r\n                <button\r\n                    type='button'\r\n                    className={classNames(\r\n                        'footer-pagination__button-container__button',\r\n                        {disabled: prevDisabled},\r\n                    )}\r\n                    onClick={onPreviousPage}\r\n                    disabled={prevDisabled}\r\n                >\r\n                    <ChevronLeftIcon size={BUTTON_ICON_SIZE}/>\r\n                    <span>\r\n                        {formatMessage({\r\n                            id: 'footer_pagination.prev',\r\n                            defaultMessage: 'Previous',\r\n                        })}\r\n                    </span>\r\n                </button>\r\n                <button\r\n                    type='button'\r\n                    className={classNames(\r\n                        'footer-pagination__button-container__button',\r\n                        {disabled: nextDisabled},\r\n                    )}\r\n                    onClick={onNextPage}\r\n                    disabled={nextDisabled}\r\n                >\r\n                    <span>\r\n                        {formatMessage({\r\n                            id: 'footer_pagination.next',\r\n                            defaultMessage: 'Next',\r\n                        })}\r\n                    </span>\r\n                    <ChevronRightIcon size={BUTTON_ICON_SIZE}/>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport styled, {keyframes} from 'styled-components';\r\n\r\nconst skeletonFade = keyframes`\r\n    0% {\r\n        background-color: rgba(var(--center-channel-color-rgb), 0.08);\r\n    }\r\n    50% {\r\n        background-color: rgba(var(--center-channel-color-rgb), 0.16);\r\n    }\r\n    100% {\r\n        background-color: rgba(var(--center-channel-color-rgb), 0.08);\r\n    }\r\n`;\r\n\r\nconst BaseLoader = styled.div`\r\n    animation-duration: 1500ms;\r\n    animation-iteration-count: infinite;\r\n    animation-name: ${skeletonFade};\r\n    animation-timing-function: ease-in-out;\r\n    background-color: rgba(var(--center-channel-color-rgb), 0.08);\r\n`;\r\n\r\nexport interface CircleSkeletonLoaderProps {\r\n    size: string | number;\r\n}\r\n\r\n/**\r\n * CircleSkeletonLoader is a component that renders a filled circle with a loading animation.\r\n * It is used to indicate that the content is loading.\r\n * @param props.size - The size of the circle. When in number, it is treated as pixels.\r\n * @example\r\n * <CircleSkeletonLoader size={20}/>\r\n * <CircleSkeletonLoader size=\"50%\"/>\r\n */\r\nexport const CircleSkeletonLoader = styled(BaseLoader)<CircleSkeletonLoaderProps>`\r\n    display: block;\r\n    border-radius: 50%;\r\n    height: ${(props) => getCorrectSizeDimension(props.size)};\r\n    width: ${(props) => getCorrectSizeDimension(props.size)};\r\n`;\r\n\r\nexport interface RectangleSkeletonLoaderProps {\r\n    height: string | number;\r\n    width?: string | number;\r\n    borderRadius?: number;\r\n    margin?: string;\r\n    flex?: string;\r\n}\r\n\r\n/**\r\n * RectangleSkeletonLoader is a component that renders a filled rectangle with a loading animation.\r\n * It is used to indicate that the content is loading.\r\n * @param props.height - The height of the rectangle eg. 20, \"20em\", \"20%\". When in number, it is treated as pixels.\r\n * @param props.width - The width of the rectangle eg. 30, '100%'. When in number, it is treated as pixels.\r\n * @param props.borderRadius - The border radius of the rectangle eg. 4\r\n * @param props.margin - The margin of the rectangle eg. '0 10px', '10px 0 0 10px'\r\n * @param props.flex - The flex short hand of flex grow, shrink, basis of the rectangle, under flex parent css eg. '1 1 auto'\r\n * @default\r\n * width: 100% , borderRadius: 8px\r\n * @example\r\n * <RectangleSkeletonLoader height='100px' />\r\n * <RectangleSkeletonLoader height={40} width={100} borderRadius={4} margin='0 10px 0 0' flex='1' />\r\n */\r\nexport const RectangleSkeletonLoader = styled(BaseLoader)<RectangleSkeletonLoaderProps>`\r\n    height: ${(props) => getCorrectSizeDimension(props.height)};\r\n    width: ${(props) => getCorrectSizeDimension(props.width, '100%')};\r\n    border-radius: ${(props) => props?.borderRadius ?? 8}px;\r\n    margin: ${(props) => props?.margin ?? null};\r\n    flex: ${(props) => props?.flex ?? null};\r\n`;\r\n\r\nfunction getCorrectSizeDimension(size: number | string | undefined, fallback: string | null = null) {\r\n    if (size) {\r\n        return (typeof size === 'string') ? size : `${size}px`;\r\n    }\r\n\r\n    return fallback;\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport type {Props as PunchOutCoordsHeightAndWidth} from '../common/hooks/useMeasurePunchouts';\r\n\r\ntype Props = {\r\n    overlayPunchOut: PunchOutCoordsHeightAndWidth | null;\r\n    show: boolean;\r\n    interactivePunchOut?: boolean;\r\n    onDismiss?: (e: React.MouseEvent) => void;\r\n    onPunchOut?: (e: React.MouseEvent) => void;\r\n    appendTo: HTMLElement;\r\n    transparent?: boolean;\r\n}\r\n\r\nconst TourTipRootPortal = ({children, show, element}: {children: React.ReactNode ; show: boolean; element: Element}) =>\r\n    (show ? ReactDOM.createPortal(\r\n        children,\r\n        element,\r\n    ) : null);\r\n\r\nexport const TourTipBackdrop = ({\r\n    show,\r\n    overlayPunchOut,\r\n    interactivePunchOut,\r\n    onDismiss,\r\n    onPunchOut,\r\n    appendTo,\r\n    transparent,\r\n}: Props) => {\r\n    const vertices = [];\r\n    if (overlayPunchOut) {\r\n        const {x, y, width, height} = overlayPunchOut;\r\n\r\n        // draw to top left of punch out\r\n        vertices.push('0% 0%');\r\n        vertices.push('0% 100%');\r\n        vertices.push('100% 100%');\r\n        vertices.push('100% 0%');\r\n        vertices.push(`${x} 0%`);\r\n        vertices.push(`${x} ${y}`);\r\n\r\n        // draw punch out\r\n        vertices.push(`calc(${x} + ${width}) ${y}`);\r\n        vertices.push(`calc(${x} + ${width}) calc(${y} + ${height})`);\r\n        vertices.push(`${x} calc(${y} + ${height})`);\r\n        vertices.push(`${x} ${y}`);\r\n\r\n        // close off punch out\r\n        vertices.push(`${x} 0%`);\r\n        vertices.push('0% 0%');\r\n    }\r\n    const backdrop = (\r\n        <div\r\n            onClick={onDismiss}\r\n            className={`tour-tip__backdrop ${transparent ? 'tour-tip__backdrop--transparent' : ''}`}\r\n            style={{\r\n                clipPath: vertices.length ? `polygon(${vertices.join(', ')})` : undefined,\r\n            }}\r\n        />\r\n    );\r\n    const overlay = interactivePunchOut ? backdrop : (\r\n        <>\r\n            <div\r\n                className={'tour-tip__overlay'}\r\n                onClick={onPunchOut || onDismiss}\r\n            />\r\n            {backdrop}\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <TourTipRootPortal\r\n            show={show}\r\n            element={appendTo}\r\n        >\r\n            {overlay}\r\n        </TourTipRootPortal>\r\n    );\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport React from 'react';\r\n\r\nimport type {Coords} from '../common/hooks/useMeasurePunchouts';\r\n\r\nimport './pulsating_dot.scss';\r\n\r\ntype Props = {\r\n    targetRef?: React.RefObject<HTMLImageElement>;\r\n    className?: string;\r\n    onClick?: (e: React.MouseEvent) => void;\r\n    coords?: Coords;\r\n}\r\n\r\nexport class PulsatingDot extends React.PureComponent<Props> {\r\n    public render() {\r\n        let customStyles = {};\r\n        if (this.props?.coords) {\r\n            customStyles = {\r\n                transform: `translate(${this.props.coords?.x}px, ${this.props.coords?.y}px)`,\r\n            };\r\n        }\r\n        let effectiveClassName = 'pulsating_dot';\r\n        if (this.props.onClick) {\r\n            effectiveClassName += ' pulsating_dot-clickable';\r\n        }\r\n        if (this.props.className) {\r\n            effectiveClassName = effectiveClassName + ' ' + this.props.className;\r\n        }\r\n\r\n        return (\r\n            <span\r\n                className={effectiveClassName}\r\n                onClick={this.props.onClick}\r\n                ref={this.props.targetRef}\r\n                style={{...customStyles}}\r\n                data-testid={'pulsating_dot'}\r\n            />\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport Tippy from '@tippyjs/react';\r\nimport classNames from 'classnames';\r\nimport React, {useRef} from 'react';\r\nimport {FormattedMessage} from 'react-intl';\r\nimport type {Placement} from 'tippy.js';\r\n\r\nimport {TourTipBackdrop} from './tour_tip_backdrop';\r\n\r\nimport type {Props as PunchOutCoordsHeightAndWidth} from '../common/hooks/useMeasurePunchouts';\r\nimport {PulsatingDot} from '../pulsating_dot';\r\n\r\nimport 'tippy.js/dist/tippy.css';\r\nimport 'tippy.js/themes/light-border.css';\r\nimport 'tippy.js/animations/scale-subtle.css';\r\nimport 'tippy.js/animations/perspective-subtle.css';\r\n\r\nimport './tour_tip.scss';\r\n\r\nexport type TourTipEventSource = 'next' | 'prev' | 'dismiss' | 'jump' | 'skipped' | 'open' | 'punchOut'\r\n\r\n// If this needs to alter, change in _variables $z-index-tour-tips-popover as well\r\nconst DEFAULT_Z_INDEX_TOUR_TIPS_POPOVER = 1300;\r\n\r\ntype Props = {\r\n    show: boolean;\r\n    screen: JSX.Element;\r\n    title: JSX.Element;\r\n    step: number;\r\n\r\n    tourSteps?: Record<string, number>;\r\n    nextBtn?: JSX.Element;\r\n    prevBtn?: JSX.Element;\r\n    imageURL?: string;\r\n    singleTip?: boolean;\r\n    showOptOut?: boolean;\r\n    placement?: Placement;\r\n    pulsatingDotPlacement?: Omit<Placement, 'auto'| 'auto-end'>;\r\n    pulsatingDotTranslate?: {x: number; y: number};\r\n    offset?: [number, number];\r\n    width?: string | number;\r\n    zIndex?: number;\r\n    className?: string;\r\n    hideBackdrop?: boolean;\r\n    tippyBlueStyle?: boolean;\r\n\r\n    // if you don't want punchOut just assign null, keep null as hook may return null first than actual value\r\n    overlayPunchOut: PunchOutCoordsHeightAndWidth | null;\r\n\r\n    // if we want to interact with element visible via punchOut\r\n    interactivePunchOut?: boolean;\r\n\r\n    handleOpen?: (e: React.MouseEvent) => void;\r\n    handleNext?: (e: React.MouseEvent) => void;\r\n    handlePrevious?: (e: React.MouseEvent) => void;\r\n    handleJump?: (e: React.MouseEvent, jumpToStep: number) => void;\r\n    handleSkip?: (e: React.MouseEvent) => void;\r\n    handleDismiss?: (e: React.MouseEvent) => void;\r\n    handlePunchOut?: (e: React.MouseEvent) => void;\r\n}\r\n\r\nexport const TourTip = ({\r\n    title,\r\n    screen,\r\n    imageURL,\r\n    overlayPunchOut,\r\n    singleTip,\r\n    step,\r\n    show,\r\n    interactivePunchOut,\r\n    tourSteps,\r\n    handleOpen,\r\n    handleDismiss,\r\n    handleNext,\r\n    handlePrevious,\r\n    handleSkip,\r\n    handleJump,\r\n    handlePunchOut,\r\n    pulsatingDotTranslate,\r\n    pulsatingDotPlacement,\r\n    nextBtn,\r\n    prevBtn,\r\n    className,\r\n    offset = [-18, 4],\r\n    placement = 'right-start',\r\n    showOptOut = true,\r\n    width = 352,\r\n    zIndex = DEFAULT_Z_INDEX_TOUR_TIPS_POPOVER,\r\n    hideBackdrop = false,\r\n    tippyBlueStyle = false,\r\n}: Props) => {\r\n    const FIRST_STEP_INDEX = 0;\r\n    const triggerRef = useRef(null);\r\n    const onJump = (event: React.MouseEvent, jumpToStep: number) => {\r\n        handleJump?.(event, jumpToStep);\r\n    };\r\n\r\n    // This needs to be changed if root-portal node isn't available to maybe body\r\n    const rootPortal = document.getElementById('root-portal');\r\n\r\n    const dots = [];\r\n    if (!singleTip && tourSteps) {\r\n        for (let dot = FIRST_STEP_INDEX; dot < (Object.values(tourSteps).length - 1); dot++) {\r\n            let className = 'tour-tip__dot';\r\n            let circularRing = 'tour-tip__dot-ring';\r\n\r\n            if (dot === step) {\r\n                className += ' active';\r\n                circularRing += ' tour-tip__dot-ring-active';\r\n            }\r\n            dots.push(\r\n                <div className={circularRing}>\r\n                    <a\r\n                        href='#'\r\n                        key={'dotactive' + dot}\r\n                        className={className}\r\n                        data-screen={dot}\r\n                        onClick={(e) => onJump(e, dot)}\r\n                    />\r\n                </div>,\r\n            );\r\n        }\r\n    }\r\n\r\n    const content = (\r\n        <>\r\n            <div\r\n                className='tour-tip__header'\r\n                data-testid={'current_tutorial_tip'}\r\n            >\r\n                <h4 className='tour-tip__header__title'>\r\n                    {title}\r\n                </h4>\r\n                <button\r\n                    className='btn btn-sm btn-icon'\r\n                    onClick={handleDismiss}\r\n                    data-testid={'close_tutorial_tip'}\r\n                >\r\n                    <i className='icon icon-close'/>\r\n                </button>\r\n            </div>\r\n            <div className='tour-tip__body'>\r\n                {screen}\r\n            </div>\r\n            {imageURL && (\r\n                <div className='tour-tip__image'>\r\n                    <img\r\n                        src={imageURL}\r\n                        alt={'tutorial tour tip product image'}\r\n                    />\r\n                </div>\r\n            )}\r\n            {(nextBtn || prevBtn || showOptOut) && (<div className='tour-tip__footer'>\r\n                <div className='tour-tip__footer-buttons'>\r\n                    <div className='tour-tip__dot-ctr'>{dots}</div>\r\n                    <div className={'tour-tip__btn-ctr'}>\r\n                        {step !== 0 && prevBtn && (\r\n                            <button\r\n                                id='tipPreviousButton'\r\n                                className='btn btn-sm btn-tertiary'\r\n                                onClick={handlePrevious}\r\n                            >\r\n                                {prevBtn}\r\n                            </button>\r\n                        )}\r\n                        {nextBtn && (\r\n                            <button\r\n                                id='tipNextButton'\r\n                                className='btn btn-sm btn-primary'\r\n                                onClick={handleNext}\r\n                            >\r\n                                {nextBtn}\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {showOptOut && (\r\n                    <div className='tour-tip__opt'>\r\n                        <FormattedMessage\r\n                            id='tutorial_tip.seen'\r\n                            defaultMessage='Seen this before? '\r\n                        />\r\n                        <a\r\n                            href='#'\r\n                            onClick={handleSkip}\r\n                        >\r\n                            <FormattedMessage\r\n                                id='tutorial_tip.out'\r\n                                defaultMessage='Opt out of these tips.'\r\n                            />\r\n                        </a>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            )}\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                id='tipButton'\r\n                ref={triggerRef}\r\n                onClick={handleOpen}\r\n                className='tour-tip__pulsating-dot-ctr'\r\n                data-pulsating-dot-placement={pulsatingDotPlacement || 'right'}\r\n                style={{\r\n                    transform: `translate(${pulsatingDotTranslate?.x}px, ${pulsatingDotTranslate?.y}px)`,\r\n                }}\r\n            >\r\n                <PulsatingDot/>\r\n            </div>\r\n            <TourTipBackdrop\r\n                show={show}\r\n                onDismiss={handleDismiss}\r\n                onPunchOut={handlePunchOut}\r\n                interactivePunchOut={interactivePunchOut}\r\n                overlayPunchOut={overlayPunchOut}\r\n                appendTo={rootPortal!}\r\n                transparent={hideBackdrop}\r\n            />\r\n            {show && (\r\n                <Tippy\r\n                    showOnCreate={show}\r\n                    content={content}\r\n                    animation='scale-subtle'\r\n                    trigger='click'\r\n                    duration={[250, 150]}\r\n                    maxWidth={width}\r\n                    aria={{content: 'labelledby'}}\r\n                    allowHTML={true}\r\n                    zIndex={zIndex}\r\n                    reference={triggerRef}\r\n                    interactive={true}\r\n                    appendTo={rootPortal!}\r\n                    offset={offset}\r\n                    className={classNames(\r\n                        'tour-tip__box',\r\n                        className,\r\n                        {'tippy-blue-style': tippyBlueStyle},\r\n                    )}\r\n                    placement={placement}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useEffect, useRef, useState, useMemo} from 'react';\r\n\r\nexport function useElementAvailable(\r\n    elementIds: string[],\r\n    intervalMS = 250,\r\n): boolean {\r\n    const checkAvailableInterval = useRef<NodeJS.Timeout | null>(null);\r\n    const [available, setAvailable] = useState(false);\r\n    useEffect(() => {\r\n        if (available) {\r\n            if (checkAvailableInterval.current) {\r\n                clearInterval(checkAvailableInterval.current);\r\n                checkAvailableInterval.current = null;\r\n            }\r\n            return;\r\n        } else if (checkAvailableInterval.current) {\r\n            return;\r\n        }\r\n        checkAvailableInterval.current = setInterval(() => {\r\n            if (elementIds.every((x) => document.getElementById(x))) {\r\n                setAvailable(true);\r\n                if (checkAvailableInterval.current) {\r\n                    clearInterval(checkAvailableInterval.current);\r\n                    checkAvailableInterval.current = null;\r\n                }\r\n            }\r\n        }, intervalMS);\r\n    }, []);\r\n\r\n    return useMemo(() => available, [available]);\r\n}\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport throttle from 'lodash/throttle';\r\nimport {useLayoutEffect, useMemo, useState} from 'react';\r\n\r\nimport {useElementAvailable} from './useElementAvailable';\r\n\r\nexport type Coords = {\r\n    x?: string;\r\n    y?: string;\r\n}\r\n\r\nexport type Props = Coords & {\r\n    width: string;\r\n    height: string;\r\n}\r\n\r\ntype PunchOutOffset = {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nexport const useMeasurePunchouts = (elementIds: string[], additionalDeps: any[], offset?: PunchOutOffset): Props | null => {\r\n    const elementsAvailable = useElementAvailable(elementIds);\r\n    const [size, setSize] = useState({x: window.innerWidth, y: window.innerHeight});\r\n    const updateSize = throttle(() => {\r\n        setSize({x: window.innerWidth, y: window.innerHeight});\r\n    }, 100, {trailing: true});\r\n\r\n    useLayoutEffect(() => {\r\n        window.addEventListener('resize', updateSize);\r\n        return () =>\r\n            window.removeEventListener('resize', updateSize);\r\n    }, []);\r\n\r\n    const channelPunchout = useMemo(() => {\r\n        let minX = Number.MAX_SAFE_INTEGER;\r\n        let minY = Number.MAX_SAFE_INTEGER;\r\n        let maxX = Number.MIN_SAFE_INTEGER;\r\n        let maxY = Number.MIN_SAFE_INTEGER;\r\n        for (let i = 0; i < elementIds.length; i++) {\r\n            const rectangle = document.getElementById(elementIds[i])?.getBoundingClientRect();\r\n            if (!rectangle) {\r\n                return null;\r\n            }\r\n            if (rectangle.x < minX) {\r\n                minX = rectangle.x;\r\n            }\r\n            if (rectangle.y < minY) {\r\n                minY = rectangle.y;\r\n            }\r\n            if (rectangle.x + rectangle.width > maxX) {\r\n                maxX = rectangle.x + rectangle.width;\r\n            }\r\n            if (rectangle.y + rectangle.height > maxY) {\r\n                maxY = rectangle.y + rectangle.height;\r\n            }\r\n        }\r\n\r\n        return {\r\n            x: `${minX + (offset ? offset.x : 0)}px`,\r\n            y: `${minY + (offset ? offset.y : 0)}px`,\r\n            width: `${(maxX - minX) + (offset ? offset.width : 0)}px`,\r\n            height: `${(maxY - minY) + (offset ? offset.height : 0)}px`,\r\n        };\r\n    }, [...elementIds, ...additionalDeps, size, elementsAvailable]);\r\n    return channelPunchout;\r\n};\r\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\r\n// See LICENSE.txt for license information.\r\n\r\nimport {useEffect, useState} from 'react';\r\n\r\nexport const useFollowElementDimensions = (elementId: string): DOMRectReadOnly => {\r\n    const [dimensions, setDimensions] = useState(new DOMRect());\r\n\r\n    useEffect(() => {\r\n        const element = document.getElementById(elementId);\r\n        if (!element) {\r\n            return undefined;\r\n        }\r\n        const observer = new ResizeObserver((entries) => {\r\n            if (entries.length > 0) {\r\n                setDimensions(entries[0].contentRect);\r\n            }\r\n        });\r\n        observer.observe(element);\r\n\r\n        return () => {\r\n            observer.unobserve(element);\r\n        };\r\n    }, [elementId]);\r\n\r\n    return dimensions;\r\n};\r\n"],"names":[],"mappings":"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"}