"use strict";(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[4014],{42945:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(97023),s=n.n(a),l=n(14778),r=n(23453),o=n(77440),i=n(7430),c=n(79342),d=n(72429);const u=e=>{var t;let{dmUser:n}=e;const a=(0,r.useSelector)(i.HW),u=(0,r.useSelector)(o.K3),m=(0,c.R4)(n,u);return s().createElement(s().Fragment,null,a.id!==(null==n?void 0:n.id)&&m+" ",a.id===(null==n?void 0:n.id)&&s().createElement(l.FormattedMessage,{id:"channel_header.directchannel.you",defaultMessage:"{displayName} (you) ",values:{displayName:m}}),(0,c.P)(null!==(t=null==n?void 0:n.roles)&&void 0!==t?t:"")&&s().createElement(d.A,null))},m=(0,a.memo)(u)},6281:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(62688),s=n.n(a),l=(n(17046),n(97023)),r=n.n(l),o=n(23453),i=n(65952),c=n(77440),d=n(7430),u=n(79342),m=n(72429);const h=e=>{let{gmMembers:t}=e;const n=(0,o.useSelector)(d.HW),a=(0,o.useSelector)(c.K3),s=(0,o.useSelector)(i.Lw);if(!s)return null;const l={};if(t)for(const e of t){if(e.id===n.id)continue;const t=(0,u.R4)(e,a);l[t]||(l[t]=[]),l[t].push(e)}const h=s.display_name.split(", ");return r().createElement(r().Fragment,null,h.map(((e,t)=>{var n;if(!l[e])return e;const a=l[e].shift();return r().createElement(r().Fragment,{key:null==a?void 0:a.id},t>0&&", ",e,(0,u.P)(null!==(n=null==a?void 0:a.roles)&&void 0!==n?n:"")&&r().createElement(m.A,null))})))};h.propTypes={gmMembers:s().array};const g=(0,l.memo)(h)},96182:(e,t,n)=>{n.d(t,{A:()=>un});var a=n(62688),s=n.n(a),l=n(71633),r=n.n(l),o=n(97023),i=n.n(o),c=n(14778),d=n(23453),u=n(35134),m=n.n(u),h=n(65952),g=n(26614),p=n(7430),_=n(21650),E=n(97026),b=n(70669),f=n(78451),v=(n(29206),n(85406)),y=n(79342),C=n(34086),M=n(92159),A=n(44446);const N=e=>{const{formatMessage:t}=(0,c.useIntl)(),{handleCreateLink:n,handleCreateFile:a}=(0,A.m)(e.channel.id),s=(0,E._4)(e.channel.id,"add"),l=(0,E.GX)();return(0,d.useSelector)((t=>{const n=(0,M.H)(t,e.channel.id);return n&&Object.keys(n).length>=E.PM})),s?i().createElement(b.g8,{id:"channel-menu-".concat(e.channel.id,"-bookmarks"),leadingElement:i().createElement(v.BookmarkOutlineIcon,{size:18}),labels:i().createElement(c.FormattedMessage,{id:"channel_menu.bookmarks",defaultMessage:"Bookmarks Bar"}),trailingElements:i().createElement(v.ChevronRightIcon,{size:16}),menuId:"channel-menu-".concat(e.channel.id,"-menu"),menuAriaLabel:t({id:"channel_menu.bookmarks",defaultMessage:"Bookmarks Bar"})},i().createElement(b.q7,{id:"channel-menu-".concat(e.channel.id,"-bookmarks-link"),leadingElement:i().createElement(v.LinkVariantIcon,{size:18}),labels:i().createElement(c.FormattedMessage,{id:"channel_menu.bookmarks.addLink",defaultMessage:"Add a link"}),onClick:()=>n()}),l&&i().createElement(b.q7,{id:"channel-menu-".concat(e.channel.id,"-bookmarks-file"),leadingElement:i().createElement(v.PaperclipIcon,{size:18}),labels:i().createElement(c.FormattedMessage,{id:"channel_menu.bookmarks.addFile",defaultMessage:"Attach a file"}),onClick:()=>a()})):null},w=(0,o.memo)(N);var S=n(35631),I=n(14776),T=n(25778),k=n(83007);function P(e){const t=(0,d.useDispatch)(),n=(0,d.useSelector)(I.H7),a=(0,d.useSelector)(h.UX),{id:s,channel:l}=e;let r=i().createElement(c.FormattedMessage,{id:"center_panel.direct.closeDirectMessage",defaultMessage:"Close Direct Message"});return l.type===f.YM.GM_CHANNEL&&(r=i().createElement(c.FormattedMessage,{id:"center_panel.direct.closeGroupMessage",defaultMessage:"Close Group Message"})),i().createElement(b.q7,{id:s,leadingElement:i().createElement(v.CloseIcon,{size:"18px"}),onClick:()=>{const{channel:s,currentUserID:l}=e;let r,o;s.type===f.YM.DM_CHANNEL?(o=f.YM.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,r=s.teammate_id):(o=f.YM.Preferences.CATEGORY_GROUP_CHANNEL_SHOW,r=s.id),t((0,T.iq)(s.name)),t((0,S.SF)(l,[{user_id:l,category:o,name:r,value:"false"}])),n&&(0,k.J)().push("/".concat(n.name,"/channels/").concat(a))},labels:r})}P.propTypes={currentUserID:s().string.isRequired,id:s().string};var O=n(79751),R=n(64182);const L=e=>{let{channel:t,leadingElement:n}=e;const a=(0,d.useDispatch)();return i().createElement(b.q7,{id:"channelEditHeader",leadingElement:n,onClick:()=>{a((0,O.q)({modalId:f.IQ.EDIT_CHANNEL_HEADER,dialogType:R.A,dialogProps:{channel:t}}))},labels:i().createElement(c.FormattedMessage,{id:"channel_header.setConversationHeader",defaultMessage:"Edit Header"})})};L.propTypes={leadingElement:s().node};const x=i().memo(L),F=e=>{const{formatMessage:t}=(0,c.useIntl)();return e.pluginItems&&e.pluginItems.length?i().createElement(b.g8,{id:"moreActions",labels:i().createElement(c.FormattedMessage,{id:"pluginsMenu.more_actions",defaultMessage:"More actions"}),leadingElement:i().createElement(v.AppsIcon,{size:"18px"}),trailingElements:i().createElement(v.ChevronRightIcon,{size:16}),menuId:"moreActions-menu",menuAriaLabel:t({id:"pluginsMenu.more_actions",defaultMessage:"More actions"})},e.pluginItems):i().createElement(i().Fragment,null)};F.propTypes={pluginItems:s().arrayOf(s().node).isRequired};const H=(0,o.memo)(F);var D=n(30413);const B=e=>{let{isFavorite:t,channelID:n}=e;const a=(0,d.useDispatch)();let s=i().createElement(c.FormattedMessage,{id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"});return t&&(s=i().createElement(c.FormattedMessage,{id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"})),i().createElement(b.q7,{onClick:()=>{a(t?(0,D.XJ)(n):(0,D.yc)(n))},labels:s})};B.propTypes={channelID:s().string.isRequired,isFavorite:s().bool.isRequired};const q=(0,o.memo)(B);var G=n(2386),U=n(75270);const j=["channel"],V=e=>{let{channel:t}=e,n=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,j);const a=(0,d.useDispatch)();let s,l=(0,d.useSelector)(U.A);return(0,d.useSelector)(U.bM)!==f._n.CHANNEL_INFO&&(l=!1),s=l?i().createElement(c.FormattedMessage,{id:"channelHeader.hideInfo",defaultMessage:"Close Info"}):i().createElement(c.FormattedMessage,{id:"channelHeader.viewInfo",defaultMessage:"View Info"}),i().createElement(i().Fragment,null,i().createElement(b.q7,Object.assign({leadingElement:i().createElement(v.InformationOutlineIcon,{size:"18px"}),onClick:()=>{a(l?(0,G.bP)():(0,G.Vl)(t.id))},labels:s},n)))};function z(e){let{isMuted:t,channel:n,userID:a}=e;const s=(0,d.useDispatch)();let l;return l=n.type===f.YM.DM_CHANNEL||n.type===f.YM.GM_CHANNEL?t?i().createElement(c.FormattedMessage,{id:"channel_header.unmuteConversation",defaultMessage:"Unmute"}):i().createElement(c.FormattedMessage,{id:"channel_header.muteConversation",defaultMessage:"Mute"}):t?i().createElement(c.FormattedMessage,{id:"channel_header.unmute",defaultMessage:"Unmute Channel"}):i().createElement(c.FormattedMessage,{id:"channel_header.mute",defaultMessage:"Mute Channel"}),i().createElement(b.q7,{leadingElement:i().createElement(v.BellOffOutlineIcon,{size:"18px"}),id:"channelToggleMuteChannel",onClick:()=>{s((0,D.cz)(a,n.id,{mark_unread:t?f.DB.ALL:f.DB.MENTION}))},labels:l})}z.propTypes={userID:s().string.isRequired,isMuted:s().bool.isRequired};const W=e=>{let{channelID:t}=e;const n=(0,d.useDispatch)(),a=(0,d.useSelector)(U.bM)===f._n.PIN;return i().createElement(b.q7,{onClick:()=>{n(a?(0,G.bP)():(0,G.H3)(t))},labels:i().createElement(c.FormattedMessage,{id:"navbar.viewPinnedPosts",defaultMessage:"View Pinned Posts"})})};W.propTypes={channelID:s().string.isRequired};const Y=(0,o.memo)(W),Q=["channel","user","isMuted","isMobile","isFavorite","pluginItems","isChannelBookmarksEnabled"],X=e=>{let{channel:t,user:n,isMuted:a,isMobile:s,isFavorite:l,pluginItems:r,isChannelBookmarksEnabled:o}=e,c=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,Q);return i().createElement(i().Fragment,null,i().createElement(V,Object.assign({channel:t},c)),i().createElement(z,{userID:n.id,channel:t,isMuted:a}),s&&i().createElement(i().Fragment,null,i().createElement(q,{channelID:t.id,isFavorite:l}),i().createElement(Y,{channelID:t.id})),i().createElement(x,{leadingElement:i().createElement(v.CogOutlineIcon,{size:"18px"}),channel:t}),i().createElement(b.wv,null),!(0,y.P)(n.roles)&&o&&i().createElement(w,{channel:t}),i().createElement(C.A,{channel:t}),!s&&i().createElement(H,{pluginItems:r}),i().createElement(b.wv,null),i().createElement(P,{currentUserID:n.id,channel:t}))};X.propTypes={isMuted:s().bool.isRequired,isMobile:s().bool.isRequired,isFavorite:s().bool.isRequired,pluginItems:s().arrayOf(s().node).isRequired,isChannelBookmarksEnabled:s().bool.isRequired};const K=X;var J=n(40057),$=n(57486),Z=n(5908),ee=n(77440),te=n(52073),ne=(n(17046),n(43813),n(76685),n(14696)),ae=n(46859),se=n(11284),le=n(53654),re=n(24867);const oe=()=>{const e=(0,c.useIntl)();return i().createElement(re.A,{title:e.formatMessage({id:"sidebar_left.sidebar_channel_modal.no_common_teams_error.heading",defaultMessage:"Unable to convert to a channel because group members are part of different teams"}),text:e.formatMessage({id:"sidebar_left.sidebar_channel_modal.no_common_teams_error.body",defaultMessage:"Group Message cannot be converted to a channel because members are not a part of the same team. Add all members to a single team to convert this group message to a channel in that team."}),type:"danger"})};n(74883);var ie=n(69657),ce=n(43233);const de=e=>{const[t,n]=(0,o.useState)(),a=(0,c.useIntl)(),{formatMessage:s}=a,l=(0,o.useCallback)((t=>{const a=t.value;n(e.teamsById[a]),e.onChange(a)}),[]),r=(0,d.useSelector)(ie.k),u=Object.values(e.teamsById).map((e=>({value:e.id,label:e.display_name}))).sort(((e,t)=>e.label.localeCompare(t.label,r)));return i().createElement(ce.A,{className:"team_selector",required:!0,onChange:l,value:t?{label:t.display_name,value:t.id}:void 0,options:u,legend:s({id:"sidebar_left.sidebar_channel_modal.select_team_placeholder",defaultMessage:"Select Team"}),placeholder:s({id:"sidebar_left.sidebar_channel_modal.select_team_placeholder",defaultMessage:"Select Team"}),name:"team_selector"})};de.propTypes={onChange:s().func.isRequired};const ue=de,me=e=>{const t=(0,c.useIntl)();let n;return n=e.channelMemberNames.length>0?t.formatList(e.channelMemberNames):t.formatMessage({id:"sidebar_left.sidebar_channel_modal.warning_body_yourself",defaultMessage:"yourself"}),i().createElement(re.A,{title:t.formatMessage({id:"sidebar_left.sidebar_channel_modal.warning_header",defaultMessage:"Conversation history will be visible to any channel members"}),text:t.formatMessage({id:"sidebar_left.sidebar_channel_modal.warning_body",defaultMessage:"You are about to convert the Group Message with {memberNames} to a Channel. This cannot be undone."},{memberNames:n})})};me.propTypes={channelMemberNames:s().arrayOf(s().string).isRequired};const he=me;var ge=function(e){return e.CHANNEL_NAME_EXISTS="store.sql_channel.save_channel.exists.app_error",e}(ge||{});const pe=e=>{const t=(0,c.useIntl)(),{formatMessage:n}=t,[a,s]=(0,o.useState)(""),l=(0,o.useRef)(""),[u,m]=(0,o.useState)(""),h=(0,o.useCallback)((e=>{l.current=e,m("")}),[]),[g,p]=(0,o.useState)([]);(0,o.useEffect)((()=>{const t=e.profilesInChannel.filter((t=>t.id!==e.currentUserId&&0===t.delete_at)).map((t=>(0,y.R4)(t,e.teammateNameDisplaySetting)));p(t)}),[e.profilesInChannel,e.currentUserId,e.teammateNameDisplaySetting]);const[_,E]=(0,o.useState)({}),[b,f]=(0,o.useState)(!1),[v,C]=(0,o.useState)(!1),[M,A]=(0,o.useState)(),[N,w]=(0,o.useState)(!1),[S,I]=(0,o.useState)(),T=(0,d.useDispatch)(),k=(0,o.useRef)(!1);(0,o.useEffect)((()=>(k.current=!0,()=>{k.current=!1})),[]),(0,o.useEffect)((()=>{(async()=>{const t=await T((0,ae.fr)(e.channel.id));if(!k.current)return;if(t.error||!t.data)return;const n=t.data,a={};n.forEach((e=>{a[e.id]=e})),E(a),f(!0),1===n.length&&A(n[0].id)})(),setTimeout((()=>C(!0)),1200)}),[T,e.channel.id]);const P=(0,o.useCallback)((async()=>{if(!M)return;const{error:t}=await e.actions.convertGroupMessageToPrivateChannel(e.channel.id,M,a.trim(),l.current.trim());t?t.server_error_id===ge.CHANNEL_NAME_EXISTS?m(n({id:"channel_modal.alreadyExist",defaultMessage:"A channel with that URL already exists"})):I(t.message):(I(void 0),e.onExited())}),[M,e,a,n]),O=!b||!v,R=void 0!==M&&""!==a&&!N&&!u,L={};let x;if(O||0!==Object.keys(_).length){let t;L.handleCancel=O?void 0:e.onExited,L.isDeleteModal=!0,L.cancelButtonText=n({id:"channel_modal.cancel",defaultMessage:"Cancel"}),L.confirmButtonText=n({id:"sidebar_left.sidebar_channel_modal.confirmation_text",defaultMessage:"Convert to private channel"}),L.isConfirmDisabled=!R,t=O?i().createElement("div",{className:"loadingIndicator"},i().createElement(le.A,null)):i().createElement(i().Fragment,null,i().createElement(he,{channelMemberNames:g}),Object.keys(_).length>1&&i().createElement(ue,{teamsById:_,onChange:A}),i().createElement(se.A,{value:a,name:"convert-gm-to-channel-modal-channel-name",placeholder:n({id:"sidebar_left.sidebar_channel_modal.channel_name_placeholder",defaultMessage:"Enter a name for the channel"}),autoFocus:!1,onDisplayNameChange:s,onURLChange:h,onErrorStateChange:w,team:M?_[M]:void 0,urlError:u}),S&&i().createElement("div",{className:"conversion-error"},i().createElement("i",{className:"icon icon-alert-outline"}),i().createElement("span",null,S))),x=i().createElement("div",{className:r()({"convert-gm-to-channel-modal-body":!0,loading:O,"single-team":1===Object.keys(_).length,"multi-team":Object.keys(_).length>1})},t)}else L.confirmButtonText=n({id:"generic.okay",defaultMessage:"Okay"}),L.handleConfirm=e.onExited,x=i().createElement("div",{className:"convert-gm-to-channel-modal-body error"},i().createElement(oe,null));return i().createElement(ne.zW,Object.assign({id:"convert-gm-to-channel-modal",className:"convert-gm-to-channel-modal",modalHeaderText:n({id:"sidebar_left.sidebar_channel_modal.header",defaultMessage:"Convert to Private Channel"}),compassDesign:!0,handleConfirm:O?void 0:P,onExited:e.onExited,autoCloseOnConfirmButton:!1},L),x)};pe.propTypes={onExited:s().func.isRequired,profilesInChannel:s().array.isRequired,teammateNameDisplaySetting:s().string.isRequired,currentUserId:s().string.isRequired};const _e=pe,Ee=(0,d.connect)((function(){const e=(0,p.dH)();return(t,n)=>{const a=e(t,n.channel.id),s=(0,p.WR)(t);return{profilesInChannel:a,teammateNameDisplaySetting:(0,ee.K3)(t),currentUserId:s}}}),(function(e){return{actions:(0,Z.bindActionCreators)({closeModal:O.O,convertGroupMessageToPrivateChannel:D.jr,moveChannelsInSidebar:te.nh},e)}}))(_e),be=e=>{let{channel:t}=e;const n=(0,d.useDispatch)();return i().createElement(b.q7,{id:"convertGMPrivateChannel",onClick:()=>{n((0,O.q)({modalId:f.IQ.CONVERT_GM_TO_CHANNEL,dialogType:Ee,dialogProps:{channel:t}}))},labels:i().createElement(c.FormattedMessage,{id:"sidebar_left.sidebar_channel_menu_convert_to_channel",defaultMessage:"Convert to Private Channel"})})},fe=i().memo(be);var ve=n(64109);const ye=["channel","user"],Ce=e=>{let{channel:t,user:n}=e,a=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,ye);const s=(0,d.useDispatch)();return i().createElement(b.q7,Object.assign({leadingElement:i().createElement(v.BellOutlineIcon,{size:"18px"}),id:"channelNotificationPreferences",onClick:()=>{s((0,O.q)({modalId:f.IQ.CHANNEL_NOTIFICATIONS,dialogType:ve.A,dialogProps:{channel:t,currentUser:n}}))},labels:i().createElement(c.FormattedMessage,{id:"navbar.preferences",defaultMessage:"Notification Preferences"})},a))},Me=i().memo(Ce),Ae=e=>{let{id:t,channel:n,text:a,editMembers:s=!1}=e;const l=(0,d.useDispatch)();let r=(0,d.useSelector)(U.A);return(0,d.useSelector)(U.bM)!==f._n.CHANNEL_MEMBERS&&(r=!1),i().createElement(b.q7,{leadingElement:i().createElement(v.AccountOutlineIcon,{size:16}),id:t,onClick:()=>{r||l((0,G.sQ)(n.id,s))},labels:a})};Ae.propTypes={id:s().string.isRequired,editMembers:s().bool,text:s().element.isRequired};const Ne=Ae,we=["channel","user","isMuted","isMobile","isFavorite","pluginItems","isChannelBookmarksEnabled"],Se=e=>{let{channel:t,user:n,isMuted:a,isMobile:s,isFavorite:l,pluginItems:r,isChannelBookmarksEnabled:o}=e,d=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,we);const u=!0===(null==t?void 0:t.group_constrained),m=0!==t.delete_at,{formatMessage:h}=(0,c.useIntl)();return i().createElement(i().Fragment,null,i().createElement(V,Object.assign({channel:t},d)),i().createElement(z,{userID:n.id,channel:t,isMuted:a}),s&&i().createElement(i().Fragment,null,i().createElement(q,{channelID:t.id,isFavorite:l}),i().createElement(Y,{channelID:t.id})),!m&&i().createElement(Me,{user:n,channel:t}),!m&&(0,y.P)(n.roles)&&i().createElement(x,{leadingElement:i().createElement(v.CogOutlineIcon,{size:"18px"}),channel:t}),!m&&!u&&!(0,y.P)(n.roles)&&i().createElement(b.g8,{id:"channelSettings",labels:i().createElement(c.FormattedMessage,{id:"channel_header.settings",defaultMessage:"Settings"}),leadingElement:i().createElement(v.CogOutlineIcon,{size:18}),trailingElements:i().createElement(v.ChevronRightIcon,{size:16}),menuId:"channelSettings-menu",menuAriaLabel:h({id:"channel_header.settings",defaultMessage:"Settings"})},i().createElement(x,{channel:t}),i().createElement(fe,{channel:t})),!m&&!(0,y.P)(n.roles)&&o&&i().createElement(w,{channel:t}),i().createElement(b.wv,null),!m&&!u&&i().createElement($.A,{channelId:t.id,teamId:t.team_id,permissions:[J.xB.MANAGE_PUBLIC_CHANNEL_MEMBERS]},i().createElement(Ne,{id:"channelMembers",channel:t,text:i().createElement(c.FormattedMessage,{id:"channel_header.members",defaultMessage:"Members"})}),i().createElement(b.wv,null)),i().createElement(C.A,{channel:t}),!s&&i().createElement(H,{pluginItems:r}),i().createElement(b.wv,null),i().createElement(P,{currentUserID:n.id,channel:t}))};Se.propTypes={isMuted:s().bool.isRequired,isMobile:s().bool.isRequired,isFavorite:s().bool.isRequired,pluginItems:s().arrayOf(s().node).isRequired,isChannelBookmarksEnabled:s().bool.isRequired};const Ie=Se;var Te=n(27039);const ke=e=>e.isMobile?i().createElement(i().Fragment,null,i().createElement(Te.A,{channel:e.channel,isDropdown:!0}),i().createElement(b.wv,null),e.pluginItems):i().createElement(i().Fragment,null);ke.propTypes={isMobile:s().bool.isRequired,pluginItems:s().arrayOf(s().node).isRequired};const Pe=(0,o.memo)(ke);n(4290);var Oe=n(83675);function Re(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Le extends i().PureComponent{constructor(e){super(e),Re(this,"handleDelete",(()=>{this.props.channel.id.length===f.Ay.CHANNEL_ID_LENGTH&&(this.props.actions.deleteChannel(this.props.channel.id),this.onHide())})),Re(this,"onHide",(()=>{this.setState({show:!1})})),this.state={show:!0}}render(){return i().createElement(Oe.Modal,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onExited,role:"none","aria-labelledby":"deleteChannelModalLabel",id:"deleteChannelModal"},i().createElement(Oe.Modal.Header,{closeButton:!0},i().createElement(Oe.Modal.Title,{componentClass:"h1",id:"deleteChannelModalLabel"},i().createElement(c.FormattedMessage,{id:"delete_channel.confirm",defaultMessage:"Confirm ARCHIVE Channel"}))),i().createElement(Oe.Modal.Body,null,i().createElement("div",{className:"alert alert-danger"},i().createElement("p",null,i().createElement(c.FormattedMessage,{id:"deleteChannelModal.canViewArchivedChannelsWarning",defaultMessage:"This will archive the channel from the team. Channel contents will still be accessible by channel members."})),i().createElement("p",null,i().createElement(c.FormattedMessage,{id:"deleteChannelModal.confirmArchive",defaultMessage:"Are you sure you wish to archive the <strong>{display_name}</strong> channel?",values:{display_name:this.props.channel.display_name,strong:e=>i().createElement("strong",null,e)}})))),i().createElement(Oe.Modal.Footer,null,i().createElement("button",{type:"button",className:"btn btn-tertiary",onClick:this.onHide},i().createElement(c.FormattedMessage,{id:"delete_channel.cancel",defaultMessage:"Cancel"})),i().createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete,autoFocus:!0,id:"deleteChannelModalDeleteButton"},i().createElement(c.FormattedMessage,{id:"delete_channel.del",defaultMessage:"Archive"}))))}}Re(Le,"propTypes",{onExited:s().func.isRequired,actions:s().shape({deleteChannel:s().func.isRequired}).isRequired});const xe=(0,d.connect)((function(e){return{currentTeamDetails:(0,I.H7)(e)}}),(function(e){return{actions:(0,Z.bindActionCreators)({deleteChannel:T.D3},e)}}))(Le),Fe=e=>{let{channel:t}=e;const n=(0,d.useDispatch)();return i().createElement(b.q7,{id:"channelArchiveChannel",leadingElement:i().createElement(v.ArchiveOutlineIcon,{size:18}),onClick:()=>{n((0,O.q)({modalId:f.IQ.DELETE_CHANNEL,dialogType:xe,dialogProps:{channel:t}}))},labels:i().createElement(c.FormattedMessage,{id:"channel_header.delete",defaultMessage:"Archive Channel"}),isDestructive:!0})},He=(0,o.memo)(Fe);var De=n(8361),Be=n(78625),qe=n(80635);const Ge=(0,De.Mz)("canAccessChannelSettings",(e=>e),(e=>e.entities.channels.channels),(e=>(0,Be.l)(e)),((e,t)=>t),((e,t,n,a)=>{const s=t[a];if(!s)return!1;const l=s.type===f.Ay.PRIVATE_CHANNEL,r=s.name===f.Ay.DEFAULT_CHANNEL,o=s.team_id,i=l?J.xB.MANAGE_PRIVATE_CHANNEL_PROPERTIES:J.xB.MANAGE_PUBLIC_CHANNEL_PROPERTIES,c=(0,qe.Ec)(e,o,a,i),d=l?J.xB.MANAGE_PRIVATE_CHANNEL_BANNER:J.xB.MANAGE_PUBLIC_CHANNEL_BANNER,u=n&&(0,qe.Ec)(e,o,a,d),m=l?J.xB.DELETE_PRIVATE_CHANNEL:J.xB.DELETE_PUBLIC_CHANNEL,h=!r&&(0,qe.Ec)(e,o,a,m);return c||u||h}));var Ue=n(16983),je=n(67347),Ve=n(21413),ze=n(30138),We=(n(57406),n(55448),n(54452)),Ye=n(68611),Qe=n(17461),Xe=n(44553);const Ke=e=>{let{policies:t=[],resourceType:n="channel",showPolicyNames:a=!0,variant:s="detailed",className:l="",testId:r="system-policy-indicator",onMorePoliciesClick:d}=e;const u=(0,o.useMemo)((()=>t&&Array.isArray(t)?t.filter((e=>e&&"object"==typeof e&&e.id)):[]),[t]),m=u.length>1,h=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),d&&d()}),[d]),g=(0,o.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||h(e)}),[h]),p=(0,o.useCallback)((e=>e.name||e.id||"Unknown Policy"),[]),_=(0,o.useCallback)((()=>{if(!a||0===u.length)return"";if(1===u.length)return i().createElement("strong",null,p(u[0]));if(2===u.length)return i().createElement(i().Fragment,null,i().createElement("strong",null,p(u[0]))," and ",i().createElement("strong",null,p(u[1])));const e=u.length-2;return i().createElement(i().Fragment,null,i().createElement("strong",null,p(u[0])),", ",i().createElement("strong",null,p(u[1]))," and ",i().createElement("button",{type:"button",className:"system-policy-indicator__more-link",onClick:h,onKeyDown:g,"aria-label":"View ".concat(e," more policies"),tabIndex:0},i().createElement(c.FormattedMessage,{id:"system_policy_indicator.more_policies",defaultMessage:"{count} more",values:{count:e}})))}),[a,u,p,h,g]),E=(0,o.useCallback)((()=>i().createElement(c.FormattedMessage,{id:"system_policy_indicator.base_message",defaultMessage:"This {resourceType} has system-level access {policyText} applied",values:{resourceType:n,policyText:m?"policies":"policy"}})),[n,m]),b=(0,o.useCallback)((()=>{const e=m?i().createElement(c.FormattedMessage,{id:"system_policy_indicator.multiple_policies_title",defaultMessage:"Multiple system access policies applied to this {resourceType}",values:{resourceType:n}}):i().createElement(c.FormattedMessage,{id:"system_policy_indicator.single_policy_title",defaultMessage:"System access policy applied to this {resourceType}",values:{resourceType:n}});return i().createElement(i().Fragment,null,i().createElement("div",{className:"system-policy-indicator__title",role:"heading","aria-level":3},e),i().createElement("div",{className:"system-policy-indicator__description",role:"region","aria-label":"System policy details"},i().createElement(c.FormattedMessage,{id:"system_policy_indicator.description_with_policies",defaultMessage:"This {resourceType} has system-level access policies applied: {policyList}. Any custom access rules you set here will be applied in addition to this policy.",values:{resourceType:n,policyList:_()}})))}),[m,n,_]),f=(0,o.useCallback)((()=>"compact"===s?E():b()),[s,E,b]),v=(0,o.useMemo)((()=>f()),[f]);return 0===u.length?null:i().createElement(Xe.A,{id:r,mode:"info",className:"system-policy-indicator ".concat(l),variant:"app",message:v})};Ke.propTypes={policies:s().array,resourceType:s().oneOf(["channel","team","file"]),showPolicyNames:s().bool,variant:s().oneOf(["compact","detailed"]),className:s().string,testId:s().string,onMorePoliciesClick:s().func};const Je=Ke;var $e=n(66215),Ze=n(53779),et=n(87461),tt=n(17085),nt=n(24876);function at(e){let{show:t,onHide:n,onConfirm:a,channelName:s,usersToAdd:l,usersToRemove:r,isProcessing:u=!1,autoSyncEnabled:m=!1,isStacked:h=!1}=e;const g=(0,d.useDispatch)(),[p,_]=(0,o.useState)(!1),[E,b]=(0,o.useState)("allowed"),[f,v]=(0,o.useState)([]),[y,C]=(0,o.useState)([]),[M,A]=(0,o.useState)([]),[N,w]=(0,o.useState)([]);(0,o.useEffect)((()=>{t&&p&&S()}),[t,p]);const S=(0,o.useCallback)((async()=>{if(l.length>0){const e=await g((0,tt.G1)(l));null!=e&&e.data&&(v(e.data),A(e.data))}if(r.length>0){const e=await g((0,tt.G1)(r));null!=e&&e.data&&(C(e.data),w(e.data))}}),[l,r,g]),I=e=>{b(e)},T=()=>{_(!1),b("allowed"),v([]),C([]),A([]),w([]),n()};if(!(l.length>0||r.length>0))return null;const k=i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.title",defaultMessage:"Save and apply rules"}),P=s,O="allowed"===E?M:N,R="allowed"===E?l.length:r.length,L=e=>i().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons"},i().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons__left"},e),i().createElement("div",{className:"ChannelAccessRulesConfirmModal__buttons__right"},i().createElement("button",{className:"btn btn-tertiary",onClick:T,disabled:u},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.cancel",defaultMessage:"Cancel"})),i().createElement("button",{className:"btn btn-danger",onClick:a,disabled:u},u?i().createElement(i().Fragment,null,i().createElement("span",{className:"icon icon-loading icon-spin"}),i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.saving",defaultMessage:"Saving..."})):i().createElement(c.FormattedMessage,{id:m?"channel_settings.access_rules.confirm_modal.save_and_apply":"channel_settings.access_rules.confirm_modal.save",defaultMessage:m?"Save and apply":"Save"}))));return i().createElement(ne.zW,{className:"ChannelAccessRulesConfirmModal a11y__modal",id:"channel-access-rules-confirm-modal",show:t,onHide:T,onExited:T,compassDesign:!0,modalHeaderText:k,modalSubheaderText:P,bodyPadding:!1,isStacked:h},p?i().createElement("div",{className:"ChannelAccessRulesConfirmModal__details"},i().createElement("div",{className:"ChannelAccessRulesConfirmModal__message"},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.message",defaultMessage:"Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.",values:{addCount:l.length,removeCount:r.length,strong:e=>i().createElement("strong",null,e)}})),i().createElement("div",{className:"ChannelAccessRulesConfirmModal__tabs"},i().createElement("button",{className:"ChannelAccessRulesConfirmModal__tab ".concat("allowed"===E?"active":""),onClick:()=>I("allowed")},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.allowed_tab",defaultMessage:"Allowed ({count})",values:{count:l.length}})),i().createElement("button",{className:"ChannelAccessRulesConfirmModal__tab ".concat("restricted"===E?"active":""),onClick:()=>I("restricted")},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.restricted_tab",defaultMessage:"Restricted ({count})",values:{count:r.length}}))),i().createElement("div",{className:"ChannelAccessRulesConfirmModal__userList"},O.length>0?i().createElement(nt.A,{users:O,usersPerPage:50,total:R,actionUserProps:{},focusOnMount:!1,nextPage:()=>{},search:e=>{if(""===e)A(f),w(y);else{const t=f.filter((t=>{var n,a,s,l;return t.username.toLowerCase().includes(e.toLowerCase())||(null===(n=t.first_name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(a=t.last_name)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(l=t.nickname)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase()))}));A(t);const n=y.filter((t=>{var n,a,s,l;return t.username.toLowerCase().includes(e.toLowerCase())||(null===(n=t.first_name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(a=t.last_name)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.email)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(l=t.nickname)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase()))}));w(n)}}}):i().createElement("div",{className:"ChannelAccessRulesConfirmModal__noResults"},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.no_users",defaultMessage:"No users in this category"}))),L(i().createElement("button",{className:"btn btn-tertiary",onClick:()=>{_(!1)},disabled:u},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.hide_users",defaultMessage:"Hide users"})))):i().createElement("div",{className:"ChannelAccessRulesConfirmModal__summary"},i().createElement("div",{className:"ChannelAccessRulesConfirmModal__message"},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.message",defaultMessage:"Applying these access rules will add <strong>{addCount, number} {addCount, plural, one {user} other {users}}</strong> to the channel and remove <strong>{removeCount, number} current channel {removeCount, plural, one {member} other {members}}</strong>.",values:{addCount:l.length,removeCount:r.length,strong:e=>i().createElement("strong",null,e)}})),i().createElement("div",{className:"ChannelAccessRulesConfirmModal__question"},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.question",defaultMessage:"Are you sure you want to save and apply the access rules?"})),L(i().createElement("button",{className:"btn btn-tertiary",onClick:()=>{_(!0)},disabled:u},i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.confirm_modal.view_users",defaultMessage:"View users"})))))}at.propTypes={show:s().bool.isRequired,onHide:s().func.isRequired,onConfirm:s().func.isRequired,channelName:s().string.isRequired,usersToAdd:s().arrayOf(s().string).isRequired,usersToRemove:s().arrayOf(s().string).isRequired,isProcessing:s().bool,autoSyncEnabled:s().bool,isStacked:s().bool};const st=at;function lt(e){let{channel:t,setAreThereUnsavedChanges:n,showTabSwitchError:a}=e;const{formatMessage:s}=(0,c.useIntl)(),l=(0,d.useSelector)((e=>(0,We.Nh)(e))),r=(0,d.useSelector)(p.HW),[u,m]=(0,o.useState)(""),[h,g]=(0,o.useState)(""),[_,E]=(0,o.useState)([]),[b,f]=(0,o.useState)(!1),[v,y]=(0,o.useState)(!1),[C,M]=(0,o.useState)(!1),[A,N]=(0,o.useState)(!1),[w,S]=(0,o.useState)(),[I,T]=(0,o.useState)(""),[k,P]=(0,o.useState)(!1),[O,R]=(0,o.useState)(!1),[L,x]=(0,o.useState)([]),[F,H]=(0,o.useState)([]),[D,B]=(0,o.useState)(!1),q=(0,Ze.V)(t.id),{policies:G,loading:U}=function(e){const t=(0,d.useDispatch)(),[n,a]=(0,o.useState)([]),[s,l]=(0,o.useState)(!0),[r,i]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(!e)return a([]),void l(!1);(async()=>{l(!0),i(null);try{if(!e.policy_enforced)return a([]),void l(!1);const n=await t((0,et.Ar)(e.id));if(n.error)return a([]),void l(!1);const s=n.data;if(s&&s.imports&&s.imports.length>0){const n=s.imports.map((n=>t((0,et.Ar)(n,e.id)))),l=await Promise.all(n),r=[];for(const e of l)e&&!e.error&&e.data&&r.push(e.data);a(r)}else s&&"parent"===s.type?a([s]):a([])}catch(e){i("Failed to fetch policies"),a([])}finally{l(!1)}})()}),[e,null==e?void 0:e.id,null==e?void 0:e.policy_enforced,t]),{policies:n,loading:s,error:r}}(t);(0,o.useEffect)((()=>{if(G&&G.length>0){const e=G.some((e=>!0===e.active));N(e)}else N(!1)}),[G]),(0,o.useEffect)((()=>{(async()=>{try{const e=await q.getAccessControlFields("",100);e.data&&E(e.data),f(!0)}catch(e){E([]);const t=e instanceof Error?e.message:String(e);(t.includes("403")||t.includes("Forbidden"))&&f(!0)}})()}),[q]),(0,o.useEffect)((()=>{(async()=>{try{const a=await q.getChannelPolicy(t.id);if(a.data){var e,n;const t=(null===(e=a.data.rules)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.expression)||"";let s=a.data.active||!1;A&&(s=!0),m(t),g(t),y(s),M(s)}}catch(e){m(""),g("");const t=A;y(t),M(t)}})()}),[t.id,q,A]),(0,o.useEffect)((()=>{null==n||n(u!==h||v!==C)}),[u,h,v,C,n]);const j=(0,o.useCallback)((e=>{m(e),S(void 0)}),[]),V=(0,o.useCallback)((e=>{console.warn("Failed to parse expression in table editor"),null!=e&&e.includes("403")||null!=e&&e.includes("Forbidden")||T(s({id:"channel_settings.access_rules.parse_error",defaultMessage:"Invalid expression format"}))}),[s]),z=(0,o.useMemo)((()=>{const e=u&&u.trim().length>0,t=G&&G.length>0;return!e&&!t}),[u,G]);(0,o.useEffect)((()=>{A&&!v?(y(!0),M(!0)):z&&v&&!A&&(y(!1),M(!1))}),[A,z,v]);const W=(0,o.useCallback)((()=>{z||u.trim()&&(A&&v||y((e=>!e)))}),[u,z,A,v]),Y=(0,o.useCallback)((e=>{const t=G.map((e=>{var t,n;return null===(t=e.rules)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.expression})).filter((e=>e&&e.trim())),n=[];return e.trim()&&n.push(e.trim()),t.length>0&&n.push(...t),0===n.length?"":1===n.length?n[0]:n.map((e=>"(".concat(e,")"))).join(" && ")}),[G]),Q=(0,o.useCallback)((async e=>{if(!e.trim())return!0;if(null==r||!r.id)return T(s({id:"channel_settings.access_rules.error.no_current_user",defaultMessage:"Cannot validate access rules: current user not found"})),!1;try{var t;return!(null===(t=(await q.validateExpressionAgainstRequester(e)).data)||void 0===t||!t.requester_matches)||(P(!0),!1)}catch(e){return console.error("Failed to validate self-exclusion:",e),T(s({id:"channel_settings.access_rules.error.validation_failed",defaultMessage:"Failed to validate access rules. Please try again."})),!1}}),[null==r?void 0:r.id]),X=(0,o.useCallback)((async e=>{const n=Y(e);if(!n.trim())return{toAdd:[],toRemove:[]};try{var a,s;const e=(null===(a=(await q.searchUsers(n,"","",1e3)).data)||void 0===a?void 0:a.users.map((e=>e.id)))||[],l=(null===(s=(await q.getChannelMembers(t.id)).data)||void 0===s?void 0:s.map((e=>e.user_id)))||[];return{toAdd:v?e.filter((e=>!l.includes(e))):[],toRemove:l.filter((t=>!e.includes(t)))}}catch(e){return console.error("Failed to calculate membership changes:",e),{toAdd:[],toRemove:[]}}}),[t.id,v,q,Y]),K=(0,o.useCallback)((async()=>{try{if(B(!0),z){try{await q.deleteChannelPolicy(t.id)}catch(e){const t=e instanceof Error?e.message:String(e);if(t&&!t.includes("not found"))throw new Error(t||"Failed to delete channel policy")}return g(""),M(!1),R(!1),x([]),H([]),!0}const e={id:t.id,name:t.display_name,type:"channel",version:"v0.2",active:!1,revision:1,created_at:Date.now(),rules:u.trim()?[{actions:["*"],expression:u.trim()}]:[],imports:G.map((e=>e.id))},n=await q.saveChannelPolicy(e);if(n.error)throw new Error(n.error.message||"Failed to save policy");try{await q.updateAccessControlPolicyActive(t.id,v)}catch(e){console.error("Failed to update policy active status:",e)}if(u.trim())try{await q.createAccessControlSyncJob({policy_id:t.id})}catch(e){console.error("Failed to create access control sync job:",e)}return g(u),M(v),R(!1),x([]),H([]),!0}catch(e){return console.error("Failed to save access rules:",e),T(s({id:"channel_settings.access_rules.save_error",defaultMessage:"Failed to save access rules"})),!1}finally{B(!1)}}),[t.id,t.display_name,u,v,G,q,s,z]),J=(0,o.useCallback)((async()=>{try{if(z)return await K()?"saved":"error";if(v&&!u.trim())return T(s({id:"channel_settings.access_rules.expression_required_for_autosync",defaultMessage:"Access rules are required when auto-add members is enabled"})),"error";if(u.trim()&&!await Q(u))return"error";const e=await X(u);return e.toAdd.length>0||e.toRemove.length>0?(x(e.toAdd),H(e.toRemove),R(!0),"confirmation_required"):await K()?"saved":"error"}catch(e){return console.error("Failed to save access rules:",e),T(s({id:"channel_settings.access_rules.save_error",defaultMessage:"Failed to save access rules"})),"error"}}),[u,v,s,Q,X,K,z]),$=(0,o.useRef)(!1),Z=(0,o.useCallback)((async()=>{if(!$.current){$.current=!0;try{const e=await K();S(e?"saved":"error")}finally{$.current=!1}}}),[K]),ee=(0,o.useCallback)((async()=>{if(!$.current){$.current=!0;try{const e=await J();"saved"===e?S("saved"):"error"===e&&S("error")}finally{$.current=!1}}}),[J]),te=(0,o.useCallback)((()=>{m(h),y(C),T(""),S(void 0)}),[h,C]),ne=(0,o.useCallback)((()=>{S(void 0)}),[]),ae=Boolean(I)||Boolean(a),se=(0,o.useMemo)((()=>u!==h||v!==C||"saved"===w),[u,h,v,C,w]);return i().createElement("div",{className:"ChannelSettingsModal__accessRulesTab"},!U&&G.length>0&&i().createElement("div",{className:"ChannelSettingsModal__systemPolicies"},i().createElement(Je,{policies:G,resourceType:"channel",showPolicyNames:!0,variant:"detailed"})),i().createElement("div",{className:"ChannelSettingsModal__accessRulesHeader"},i().createElement("h3",{className:"ChannelSettingsModal__accessRulesTitle"},s({id:"channel_settings.access_rules.title",defaultMessage:"Access Rules"})),i().createElement("p",{className:"ChannelSettingsModal__accessRulesSubtitle"},s({id:"channel_settings.access_rules.subtitle",defaultMessage:"Select user attributes and values as rules to restrict channel membership"}))),b&&i().createElement("div",{className:"ChannelSettingsModal__accessRulesEditor"},i().createElement(Ye.Ay,{value:u,onChange:j,onValidate:()=>T(""),userAttributes:_,onParseError:V,channelId:t.id,actions:q,enableUserManagedAttributes:(null==l?void 0:l.EnableUserManagedAttributes)||!1})),i().createElement("hr",{className:"ChannelSettingsModal__divider"}),i().createElement("div",{className:"ChannelSettingsModal__autoSyncSection"},i().createElement("div",{className:"ChannelSettingsModal__autoSyncCheckboxContainer"},i().createElement("input",{type:"checkbox",className:"ChannelSettingsModal__autoSyncCheckbox",checked:v,onChange:W,disabled:z||!u.trim()||A&&v,id:"autoSyncMembersCheckbox",name:"autoSyncMembers"}),i().createElement("label",{htmlFor:"autoSyncMembersCheckbox",className:"ChannelSettingsModal__autoSyncLabel",title:z?s({id:"channel_settings.access_rules.auto_sync_disabled_empty_state",defaultMessage:"Auto-add is disabled because no access rules are defined"}):A?s({id:"channel_settings.access_rules.auto_sync_forced_by_parent",defaultMessage:"Auto-add is enabled by system policy and cannot be disabled"}):u.trim()?void 0:s({id:"channel_settings.access_rules.auto_sync_requires_expression",defaultMessage:"Define access rules to enable auto-add members"})},i().createElement("span",{className:"ChannelSettingsModal__autoSyncText ".concat(z||!u.trim()||A&&v?"disabled":"")},s({id:"channel_settings.access_rules.auto_sync",defaultMessage:"Auto-add members based on access rules"})))),i().createElement("p",{className:"ChannelSettingsModal__autoSyncDescription"},z?s({id:"channel_settings.access_rules.auto_sync_empty_state_description",defaultMessage:"Auto-add is disabled because no access rules are defined. Channel will use standard Mattermost access controls."}):A?s({id:"channel_settings.access_rules.auto_sync_forced_description",defaultMessage:"Auto-add is enabled by system policy. Users who match the configured attribute values will be automatically added as members and those who no longer match will be removed."}):u.trim()?s(v?{id:"channel_settings.access_rules.auto_sync_enabled_description",defaultMessage:"Users who match the configured attribute values will be automatically added as members and those who no longer match will be removed."}:{id:"channel_settings.access_rules.auto_sync_disabled_description",defaultMessage:"Access rules will prevent unauthorized users from joining, but will not automatically add qualifying members."}):G&&G.length>0?s({id:"channel_settings.access_rules.auto_sync_system_policy_applied_description",defaultMessage:"Auto-add is disabled because no channel-level access rules are defined. Channel access will still be restricted by the applied system policy in addition to standard Mattermost access controls."}):s({id:"channel_settings.access_rules.auto_sync_no_rules_description",defaultMessage:"Define access rules above to enable automatic member synchronization."}))),se&&i().createElement($e.A,{handleSubmit:ee,handleCancel:te,handleClose:ne,tabChangeError:ae,state:ae?"error":w,customErrorMessage:I||(a?void 0:s({id:"channel_settings.access_rules.form_error",defaultMessage:"There are errors in the form above"})),cancelButtonText:s({id:"channel_settings.save_changes_panel.reset",defaultMessage:"Reset"})}),i().createElement(Qe.A,{show:k,title:i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.error.self_exclusion_title",defaultMessage:"Cannot save access rules"}),message:i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.error.self_exclusion_message",defaultMessage:"You cannot set this rule because it would remove you from the channel. Please update the access rules to make sure you satisfy them and they don't cause any unintended issues."}),confirmButtonText:i().createElement(c.FormattedMessage,{id:"channel_settings.access_rules.error.back_to_editing",defaultMessage:"Back to editing"}),onConfirm:()=>P(!1),onCancel:()=>P(!1),hideCancel:!0,confirmButtonClass:"btn btn-primary",isStacked:!0}),i().createElement(st,{show:O,onHide:()=>{R(!1),x([]),H([]),"error"===w&&S(void 0)},onConfirm:Z,channelName:t.display_name,usersToAdd:L,usersToRemove:F,isProcessing:D,autoSyncEnabled:v,isStacked:!0}))}lt.propTypes={setAreThereUnsavedChanges:s().func,showTabSwitchError:s().bool};const rt=lt;function ot(e){let{channel:t,onHide:n}=e;const{formatMessage:a}=(0,c.useIntl)(),s=(0,d.useDispatch)(),[l,r]=(0,o.useState)(!1),u=(0,o.useCallback)((()=>{r(!0)}),[]);return i().createElement("div",{className:"ChannelSettingsModal__archiveTab"},i().createElement(c.FormattedMessage,{id:"channel_settings.archive.warning",defaultMessage:"Archiving a channel removes it from the user interface, but doesn't permanently delete the channel. New messages can't be posted to archived channels."}),i().createElement("button",{type:"button",className:"btn btn-danger",onClick:u,id:"channelSettingsArchiveChannelButton","aria-label":"Archive channel ".concat(t.display_name)},i().createElement(c.FormattedMessage,{id:"channel_settings.archive.button",defaultMessage:"Archive this channel"})),l&&i().createElement(Qe.A,{id:"archiveChannelConfirmModal",show:!0,title:a({id:"channel_settings.modal.archiveTitle",defaultMessage:"Archive channel?"}),message:i().createElement("div",null,i().createElement("p",null,i().createElement(c.FormattedMessage,{id:"deleteChannelModal.canViewArchivedChannelsWarning",defaultMessage:"Archiving a channel removes it from the user interface, but doesn't permanently delete the channel. New messages can't be posted to archived channels."})),i().createElement("p",null,i().createElement(c.FormattedMessage,{id:"deleteChannelModal.confirmArchive",defaultMessage:"Are you sure you wish to archive the <strong>{display_name}</strong> channel?",values:{display_name:t.display_name,strong:e=>i().createElement("strong",null,e)}}))),confirmButtonText:a({id:"channel_settings.modal.confirmArchive",defaultMessage:"Confirm"}),onConfirm:async()=>{await s((0,T.D3)(t.id)),n()},onCancel:()=>r(!1),confirmButtonClass:"btn btn-danger",modalClass:"archiveChannelConfirmModal",focusOriginElement:"channelSettingsArchiveChannelButton",isStacked:!0}))}ot.propTypes={onHide:s().func.isRequired};const it=ot;var ct=n(61295),dt=n(79407),ut=n(71432);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pt={enabled:!1,background_color:"#DDDDDD",text:""};function _t(e){let{channel:t,setAreThereUnsavedChanges:n,showTabSwitchError:a}=e;const{formatMessage:s}=(0,c.useIntl)(),l=(0,d.useDispatch)(),r=s({id:"channel_banner.label.name",defaultMessage:"Channel Banner"}),u=s({id:"channel_banner.label.subtext",defaultMessage:"When enabled, a customized banner will display at the top of the channel."}),m=s({id:"channel_banner.banner_text.label",defaultMessage:"Banner text"}),h=s({id:"channel_banner.banner_color.label",defaultMessage:"Banner color"}),g=s({id:"channel_banner.banner_text.placeholder",defaultMessage:"Channel banner text"}),p=t.banner_info||pt,[_,E]=(0,o.useState)(""),[b,f]=(0,o.useState)(!1),[v,y]=(0,o.useState)(p),[C,M]=(0,o.useState)(!1),[A,N]=(0,o.useState)(!1),[w,S]=(0,o.useState)(),I=(0,o.useCallback)((()=>{const e=!v.enabled,t=ht(ht({},v),{},{enabled:e});e||(t.text=p.text,t.background_color=p.background_color),y(t)}),[p,v]),T=(0,o.useCallback)((()=>{E(""),S(void 0)}),[]),k=(0,o.useCallback)((e=>{const t=e.target.value;y((e=>ht(ht({},e),{},{text:t}))),t.trim().length>1024?(E(s({id:"channel_settings.save_changes_panel.standard_error",defaultMessage:"There are errors in the form above"})),N(!0)):t.trim().length<=0?(E(s({id:"channel_settings.save_changes_panel.banner_text.required_error",defaultMessage:"Channel banner text cannot be empty when enabled"})),N(!0)):(T(),N(!1))}),[s,T]),P=(0,o.useCallback)((e=>{y((t=>ht(ht({},t),{},{background_color:e}))),e.trim()&&T()}),[T]),O=(0,o.useCallback)((()=>f((e=>!e))),[]),R=(0,o.useCallback)((()=>{var e,t,n,a;return((null===(e=v.text)||void 0===e?void 0:e.trim())||"")!==((null==p||null===(t=p.text)||void 0===t?void 0:t.trim())||"")||((null===(n=v.background_color)||void 0===n?void 0:n.trim())||"")!==((null==p||null===(a=p.background_color)||void 0===a?void 0:a.trim())||"")||v.enabled!==(null==p?void 0:p.enabled)}),[p,v]);(0,o.useEffect)((()=>{const e=R();M(e),null==n||n(e)}),[R,n]);const L=(0,o.useCallback)((e=>{const t=e.message||s({id:"channel_settings.unknown_error",defaultMessage:"Something went wrong."});E(t)}),[s]),x=(0,o.useCallback)((async()=>{var e,n,a,r;if(!t)return!1;if(v.enabled&&(null===(e=v.text)||void 0===e||!e.trim()))return E(s({id:"channel_settings.error_banner_text_required",defaultMessage:"Banner text is required"})),!1;if(v.enabled&&(null===(n=v.background_color)||void 0===n||!n.trim()))return E(s({id:"channel_settings.error_banner_color_required",defaultMessage:"Banner color is required"})),!1;const o=ht({},t);o.banner_info={text:(null===(a=v.text)||void 0===a?void 0:a.trim())||"",background_color:(null===(r=v.background_color)||void 0===r?void 0:r.trim())||"",enabled:v.enabled};const{error:i}=await l((0,D.ER)(t.id,o));return!i||(L(i),!1)}),[t,l,s,L,v]),F=(0,o.useCallback)((async()=>{await x()?(y((e=>{var t,n;return ht(ht({},e),{},{text:(null===(t=e.text)||void 0===t?void 0:t.trim())||"",background_color:(null===(n=e.background_color)||void 0===n?void 0:n.trim())||""})})),T(),S("saved")):S("error")}),[x,T]),H=(0,o.useCallback)((()=>{M(!1),S(void 0),f(!1),y(p),E(""),S(void 0),N(!1)}),[p]),B=(0,o.useCallback)((()=>{S(void 0),M(!1)}),[]),q=Boolean(_)||A||a,G=C||"saved"===w;return i().createElement("div",{className:"ChannelSettingsModal__configurationTab"},i().createElement("div",{className:"channel_banner_header"},i().createElement("div",{className:"channel_banner_header__text"},i().createElement("label",{className:"Input_legend","aria-label":r},r),i().createElement("label",{className:"Input_subheading","aria-label":r},u)),i().createElement("div",{className:"channel_banner_header__toggle"},i().createElement(dt.A,{id:"channelBannerToggle",ariaLabel:r,size:"btn-md",disabled:!1,onToggle:I,toggled:v.enabled,tabIndex:0,toggleClassName:"btn-toggle-primary"}))),v.enabled&&i().createElement("div",{className:"channel_banner_section_body"},i().createElement("div",{className:"setting_section"},i().createElement("span",{className:"setting_title","aria-label":m},m),i().createElement("div",{className:"setting_body"},i().createElement(ut.A,{id:"channel_banner_banner_text_textbox",value:v.text,channelId:t.id,onKeyPress:()=>{},showCharacterCount:!0,useChannelMentions:!1,onChange:k,preview:b,togglePreview:O,hasError:A,createMessage:g,maxLength:1024,minLength:0}))),i().createElement("div",{className:"setting_section"},i().createElement("span",{className:"setting_title","aria-label":h},h),i().createElement("div",{className:"setting_body"},i().createElement(ct.A,{id:"channel_banner_banner_background_color_picker",onChange:P,value:v.background_color||""})))),G&&i().createElement($e.A,{handleSubmit:F,handleCancel:H,handleClose:B,tabChangeError:q,state:q?"error":w,customErrorMessage:_,cancelButtonText:s({id:"channel_settings.save_changes_panel.reset",defaultMessage:"Reset"})}))}_t.propTypes={setAreThereUnsavedChanges:s().func,showTabSwitchError:s().bool};const Et=_t;var bt=n(50880),ft=n(45495),vt=n(46911);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){Mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e){var t,n,a,s,l;let{channel:r,onCancel:u,setAreThereUnsavedChanges:m,showTabSwitchError:h}=e;const{formatMessage:g}=(0,c.useIntl)(),p=(0,d.useDispatch)(),_=(0,d.useSelector)(bt.My),E=(0,d.useSelector)(bt.dm),b=(0,d.useSelector)((e=>(0,qe.Ec)(e,r.team_id,r.id,Ue.A.CONVERT_PUBLIC_CHANNEL_TO_PRIVATE))),v=(0,d.useSelector)((e=>(0,qe.Ec)(e,r.team_id,r.id,Ue.A.CONVERT_PRIVATE_CHANNEL_TO_PUBLIC))),y=r.type===f.Ay.PRIVATE_CHANNEL?Ue.A.MANAGE_PRIVATE_CHANNEL_PROPERTIES:Ue.A.MANAGE_PUBLIC_CHANNEL_PROPERTIES,C=(0,d.useSelector)((e=>(0,qe.Ec)(e,r.team_id,r.id,y))),M=1024,[A,N]=(0,o.useState)(""),[w,S]=(0,o.useState)(""),[I,T]=(0,o.useState)(!1),[k,P]=(0,o.useState)(!1),[O,R]=(0,o.useState)(null!==(t=null==r?void 0:r.display_name)&&void 0!==t?t:""),[L,x]=(0,o.useState)(null!==(n=null==r?void 0:r.name)&&void 0!==n?n:""),[F,H]=(0,o.useState)(null!==(a=r.purpose)&&void 0!==a?a:""),[B,q]=(0,o.useState)(null!==(s=null==r?void 0:r.header)&&void 0!==s?s:""),[G,U]=(0,o.useState)(null!==(l=null==r?void 0:r.type)&&void 0!==l?l:f.Ay.OPEN_CHANNEL),[j,V]=(0,o.useState)(""),[z,W]=(0,o.useState)(),Y=(0,o.useCallback)(((e,t)=>{S(t||""),e&&t?V(t):j===w&&V("")}),[w,j,V]);(0,o.useEffect)((()=>{const e=!!r&&(O.trim()!==r.display_name||L.trim()!==r.name||F.trim()!==r.purpose||B.trim()!==r.header||G!==r.type);null==m||m(e)}),[r,O,L,F,B,G,m]);const Q=(0,o.useCallback)((e=>{A&&(V(""),W(void 0),N("")),x(e.trim())}),[A]),X=(0,o.useCallback)((()=>{p((0,je.oL)(!_))}),[p,_]),K=(0,o.useCallback)((()=>{p((0,je.tR)(!E))}),[p,E]),$=(0,o.useCallback)((e=>{const t=e.target.value;q(t),t.trim().length>M?V(g({id:"edit_channel_header_modal.error",defaultMessage:"The text entered exceeds the character limit. The channel header is limited to {maxLength} characters."},{maxLength:M})):j&&!w&&V("")}),[M,j,w,V,g]),Z=(0,o.useCallback)((e=>{const t=e.target.value;H(t),t.trim().length>f.Ay.MAX_CHANNELPURPOSE_LENGTH?V(g({id:"channel_settings.error_purpose_length",defaultMessage:"The text entered exceeds the character limit. The channel purpose is limited to {maxLength} characters."},{maxLength:f.Ay.MAX_CHANNELPURPOSE_LENGTH})):j&&!w&&V("")}),[j,w,V,g]),ee=e=>{const t=e.message||g({id:"channel_settings.unknown_error",defaultMessage:"Something went wrong."});V(t),W("error"),e.message&&(e.message.toLowerCase().includes("url")||e.message.toLowerCase().includes("name")||e.message.toLowerCase().includes("already exists"))&&N(t)},te=(0,o.useCallback)((async()=>{var e,t,n,a;if(!r)return!1;if(!O.trim())return V(g({id:"channel_settings.error_display_name_required",defaultMessage:"Channel name is required"})),!1;if(r.type===f.Ay.OPEN_CHANNEL&&G===f.Ay.PRIVATE_CHANNEL){const{error:e}=await p((0,D.nr)(r.id,J.Bz.PRIVATE_CHANNEL));if(e)return ee(e),!1}const s=Ct(Ct({},r),{},{display_name:O.trim(),name:L.trim(),purpose:F.trim(),header:B.trim()}),{data:l,error:o}=await p((0,D.ER)(r.id,s));return o?(ee(o),!1):(R(null!==(e=null==l?void 0:l.display_name)&&void 0!==e?e:s.display_name),x(null!==(t=null==l?void 0:l.name)&&void 0!==t?t:s.name),H(null!==(n=null==l?void 0:l.purpose)&&void 0!==n?n:s.purpose),q(null!==(a=null==l?void 0:l.header)&&void 0!==a?a:s.header),!0)}),[r,O,L,F,B,G,V,ee]),ne=(0,o.useCallback)((async()=>{r.type!==f.Ay.OPEN_CHANNEL||G!==f.Ay.PRIVATE_CHANNEL?await te()?W("saved"):W("error"):P(!0)}),[r,G,te]),ae=(0,o.useCallback)((()=>{W(void 0)}),[]),le=(0,o.useCallback)((()=>{P(!1)}),[]),re=(0,o.useCallback)((()=>{var e,t,n,a,s;W(void 0),R(null!==(e=null==r?void 0:r.display_name)&&void 0!==e?e:""),x(null!==(t=null==r?void 0:r.name)&&void 0!==t?t:""),H(null!==(n=null==r?void 0:r.purpose)&&void 0!==n?n:""),q(null!==(a=null==r?void 0:r.header)&&void 0!==a?a:""),U(null!==(s=null==r?void 0:r.type)&&void 0!==s?s:f.Ay.OPEN_CHANNEL),N(""),V(""),T(!1),S(""),u&&u()}),[r,u,V]),oe=Boolean(j)||I||Boolean(w)||Boolean(h)||Boolean(A),ie=(0,o.useMemo)((()=>!!r&&(O.trim()!==r.display_name||L.trim()!==r.name||F.trim()!==r.purpose||B.trim()!==r.header||G!==r.type)||"saved"===z),[r,O,L,F,B,G,z]);return i().createElement("div",{className:"ChannelSettingsModal__infoTab"},i().createElement(ft.A,{show:k,onCancel:le,onConfirm:async()=>{le(),await te()?W("saved"):W("error")},displayName:(null==r?void 0:r.display_name)||"",toPublic:!1}),i().createElement("div",{className:"ChannelSettingsModal__infoTabTitle"},g({id:"channel_settings.channel_info_tab.name",defaultMessage:"Channel Info"})),i().createElement(se.A,{value:O,name:"channel-settings-name",placeholder:g({id:"channel_settings_modal.name.placeholder",defaultMessage:"Enter a name for your channel"}),onDisplayNameChange:e=>{R(e)},onURLChange:Q,onErrorStateChange:Y,urlError:A,currentUrl:L,readOnly:!C,isEditingExistingChannel:!0}),i().createElement(vt.A,{className:"ChannelSettingsModal__typeSelector",selected:G,publicButtonProps:{title:g({id:"channel_modal.type.public.title",defaultMessage:"Public Channel"}),description:g({id:"channel_modal.type.public.description",defaultMessage:"Anyone can join"}),disabled:r.type===f.Ay.PRIVATE_CHANNEL||!v},privateButtonProps:{title:g({id:"channel_modal.type.private.title",defaultMessage:"Private Channel"}),description:g({id:"channel_modal.type.private.description",defaultMessage:"Only invited members"}),disabled:!b},onChange:e=>{r.type===f.Ay.PRIVATE_CHANNEL&&e===f.Ay.OPEN_CHANNEL||(r.type!==f.Ay.OPEN_CHANNEL||e!==f.Ay.PRIVATE_CHANNEL||b)&&(U(e),V(""))}}),i().createElement(ut.A,{id:"channel_settings_purpose_textbox",value:F,channelId:r.id,onChange:Z,createMessage:g({id:"channel_settings_modal.purpose.placeholder",defaultMessage:"Enter a purpose for this channel"}),maxLength:f.Ay.MAX_CHANNELPURPOSE_LENGTH,preview:_,togglePreview:X,useChannelMentions:!1,onKeyPress:()=>{},descriptionMessage:g({id:"channel_settings.purpose.description",defaultMessage:"Describe how this channel should be used."}),hasError:F.length>f.Ay.MAX_CHANNELPURPOSE_LENGTH,errorMessage:F.length>f.Ay.MAX_CHANNELPURPOSE_LENGTH?g({id:"channel_settings.error_purpose_length",defaultMessage:"The channel purpose exceeds the maximum character limit of {maxLength} characters."},{maxLength:f.Ay.MAX_CHANNELPURPOSE_LENGTH}):void 0,showCharacterCount:F.length>f.Ay.MAX_CHANNELPURPOSE_LENGTH,readOnly:!C,name:g({id:"channel_settings.purpose.label",defaultMessage:"Channel Purpose"})}),i().createElement(ut.A,{id:"channel_settings_header_textbox",value:B,channelId:r.id,onChange:$,createMessage:g({id:"channel_settings_modal.header.placeholder",defaultMessage:"Enter a header description or important links"}),maxLength:M,preview:E,togglePreview:K,useChannelMentions:!1,onKeyPress:()=>{},descriptionMessage:g({id:"channel_settings.purpose.header",defaultMessage:"This is the text that will appear in the header of the channel beside the channel name. You can use markdown to include links by typing [Link Title](http://example.com)."}),hasError:B.length>M,errorMessage:B.length>M?g({id:"edit_channel_header_modal.error",defaultMessage:"The channel header exceeds the maximum character limit of {maxLength} characters."},{maxLength:M}):void 0,showCharacterCount:B.length>M,readOnly:!C,name:g({id:"channel_settings.header.label",defaultMessage:"Channel Header"})}),C&&ie&&i().createElement($e.A,Object.assign({handleSubmit:ne,handleCancel:re,handleClose:ae,tabChangeError:oe,state:oe?"error":z},!h&&{customErrorMessage:g({id:"channel_settings.save_changes_panel.standard_error",defaultMessage:"There are errors in the form above"})},{cancelButtonText:g({id:"channel_settings.save_changes_panel.reset",defaultMessage:"Reset"})})))}At.propTypes={onCancel:s().func,setAreThereUnsavedChanges:s().func,showTabSwitchError:s().bool};const Nt=At,wt=i().lazy((()=>n.e(9163).then(n.bind(n,61544))));var St=function(e){return e.INFO="info",e.ACCESS_RULES="access_rules",e.CONFIGURATION="configuration",e.ARCHIVE="archive",e}(St||{});function It(e){let{channelId:t,isOpen:n,onExited:a,focusOriginElement:s}=e;const{formatMessage:l}=(0,c.useIntl)(),r=(0,d.useDispatch)(),u=(0,d.useSelector)((e=>(0,h.c)(e,t))),m=(0,d.useSelector)(Be.l),g=(0,d.useSelector)((e=>(0,qe.Ec)(e,u.team_id,u.id,Ue.A.MANAGE_PUBLIC_CHANNEL_BANNER))),p=(0,d.useSelector)((e=>(0,qe.Ec)(e,u.team_id,u.id,Ue.A.MANAGE_PRIVATE_CHANNEL_BANNER))),_="O"===u.type&&g||"P"===u.type&&p,E=m&&_,b=(0,d.useSelector)((e=>(0,qe.Ec)(e,u.team_id,u.id,Ue.A.DELETE_PRIVATE_CHANNEL))),v=(0,d.useSelector)((e=>(0,qe.Ec)(e,u.team_id,u.id,Ue.A.DELETE_PUBLIC_CHANNEL))),y=(0,d.useSelector)((e=>(0,qe.Ec)(e,u.team_id,u.id,Ue.A.MANAGE_CHANNEL_ACCESS_RULES))),C=(0,d.useSelector)(Ve.Ml)&&y&&u.type===f.Ay.PRIVATE_CHANNEL&&!u.group_constrained,[M,A]=(0,o.useState)(n),[N,w]=(0,o.useState)(St.INFO),[S,I]=(0,o.useState)(!1),[T,k]=(0,o.useState)(!1),P=(0,o.useRef)(null),O=()=>{r((0,je.tR)(!1)),r((0,je.oL)(!1)),A(!1)},R=()=>i().createElement(Nt,{channel:u,setAreThereUnsavedChanges:k,showTabSwitchError:S}),L=[{name:St.INFO,uiName:l({id:"channel_settings.tab.info",defaultMessage:"Info"}),icon:"icon icon-information-outline",iconTitle:l({id:"generic_icons.info",defaultMessage:"Info Icon"})},{name:St.ACCESS_RULES,uiName:l({id:"channel_settings.tab.access_control",defaultMessage:"Access Control"}),icon:"icon icon-shield-outline",iconTitle:l({id:"generic_icons.access_rules",defaultMessage:"Access Rules Icon"}),display:C},{name:St.CONFIGURATION,uiName:l({id:"channel_settings.tab.configuration",defaultMessage:"Configuration"}),icon:"icon icon-cog-outline",iconTitle:l({id:"generic_icons.settings",defaultMessage:"Settings Icon"}),display:E},{name:St.ARCHIVE,uiName:l({id:"channel_settings.tab.archive",defaultMessage:"Archive Channel"}),icon:"icon icon-archive-outline",iconTitle:l({id:"generic_icons.archive",defaultMessage:"Archive Icon"}),newGroup:!0,display:u.name!==f.Ay.DEFAULT_CHANNEL&&(u.type===f.Ay.PRIVATE_CHANNEL&&b||u.type===f.Ay.OPEN_CHANNEL&&v)}],x=l({id:"channel_settings.modal.title",defaultMessage:"Channel Settings"});return i().createElement(ne.zW,{id:"channelSettingsModal",ariaLabel:x,className:"ChannelSettingsModal settings-modal",show:M,onHide:()=>{O()},onExited:()=>{w(St.INFO),s&&(0,ze.p)(s,!0),a()},compassDesign:!0,modalHeaderText:x,bodyPadding:!1,modalLocation:"top",enforceFocus:!1},i().createElement("div",{className:"ChannelSettingsModal__bodyWrapper"},i().createElement("div",{ref:P,className:"settings-table"},i().createElement("div",{className:"settings-links"},i().createElement(i().Suspense,{fallback:null},i().createElement(wt,{tabs:L,activeTab:N,updateTab:e=>{if(T)return I(!0),void setTimeout((()=>{I(!1)}),3e3);w(e),P.current&&(P.current.scrollTop=0)}}))),i().createElement("div",{className:"settings-content minimize-settings"},(()=>{switch(N){case St.INFO:return R();case St.ACCESS_RULES:return i().createElement(rt,{channel:u,setAreThereUnsavedChanges:k,showTabSwitchError:S});case St.CONFIGURATION:return i().createElement(Et,{channel:u,setAreThereUnsavedChanges:k,showTabSwitchError:S});case St.ARCHIVE:return i().createElement(it,{channel:u,onHide:O});default:return R()}})()))))}It.propTypes={channelId:s().string.isRequired,onExited:s().func.isRequired,isOpen:s().bool.isRequired,focusOriginElement:s().string};const Tt=It,kt=e=>{let{channel:t}=e;const n=(0,d.useDispatch)();return(0,d.useSelector)((e=>Ge(e,t.id)))?i().createElement(b.q7,{id:"channelSettings",labels:i().createElement(c.FormattedMessage,{id:"channel_header.channel_settings",defaultMessage:"Channel Settings"}),onClick:()=>{n((0,O.q)({modalId:f.IQ.CHANNEL_SETTINGS,dialogType:Tt,dialogProps:{channelId:t.id,focusOriginElement:"channelHeaderDropdownButton",isOpen:!0}}))},leadingElement:i().createElement(v.CogOutlineIcon,{size:18})}):null},Pt=(0,o.memo)(kt),Ot=e=>{let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return i().createElement(b.q7,Object.assign({onClick:T.TJ,labels:i().createElement(c.FormattedMessage,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"})},t))},Rt=i().memo(Ot);var Lt=n(40142),xt=n(87373),Ft=n(48774),Ht=n(1277),Dt=n(24163),Bt=n(17983),qt=n(99068),Gt=n(83873),Ut=n(85873);function jt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Vt extends i().PureComponent{constructor(){super(...arguments),jt(this,"loadItems",(async(e,t)=>{const{data:n}=await this.props.actions.getGroupsAssociatedToChannel(this.props.channel.id,t,e,Ht.$);return{items:n.groups,totalCount:n.totalGroupCount}})),jt(this,"onClickRemoveGroup",((e,t)=>this.props.actions.unlinkGroupSyncable(e.id,this.props.channel.id,Ft.CL.Channel).then((async()=>{t.setState({loading:!0});const{items:e,totalCount:n}=await t.props.loadItems(t.setState.page,t.state.searchTerm);t.setState({loading:!1,items:e,totalCount:n})})))),jt(this,"onHide",(()=>{this.props.actions.closeModal(f.IQ.MANAGE_CHANNEL_GROUPS)})),jt(this,"titleButtonOnClick",(()=>{this.onHide(),this.props.actions.openModal({modalId:f.IQ.ADD_GROUPS_TO_TEAM,dialogType:Lt.A})})),jt(this,"setChannelMemberStatus",(async(e,t,n)=>{this.props.actions.patchGroupSyncable(e.id,this.props.channel.id,Ft.CL.Channel,{scheme_admin:n}).then((async()=>{t.setState({loading:!0});const{items:e,totalCount:n}=await t.props.loadItems(t.setState.page,t.state.searchTerm);await this.props.actions.getMyChannelMember(this.props.channel.id),t.setState({loading:!1,items:e,totalCount:n})}))})),jt(this,"renderRow",((e,t)=>{let n;return n=e.scheme_admin?i().createElement(c.FormattedMessage,{id:"channel_members_dropdown.channel_admins",defaultMessage:"Channel Admins"}):i().createElement(c.FormattedMessage,{id:"channel_members_dropdown.channel_members",defaultMessage:"Channel Members"}),i().createElement("div",{key:e.id,className:"more-modal__row"},i().createElement("img",{className:"more-modal__image",src:Gt,alt:"group picture",width:"32",height:"32"}),i().createElement("div",{className:"more-modal__details"},i().createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",i().createElement("span",{className:"more-modal__name_count"},i().createElement(c.FormattedMessage,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),i().createElement("div",{className:"more-modal__actions"},i().createElement(qt.A,null,i().createElement("button",{id:"teamGroupsDropdown_".concat(e.display_name),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},i().createElement("span",null,n," "),i().createElement(Dt.A,null)),i().createElement(Bt.A,{openLeft:!0,ariaLabel:Ut.Vw({id:"channel_members_dropdown.menuAriaLabel",defaultMessage:"Change the role of channel member"})},i().createElement(Bt.A.ItemAction,{show:!e.scheme_admin,onClick:()=>this.setChannelMemberStatus(e,t,!0),text:Ut.Vw({id:"channel_members_dropdown.make_channel_admins",defaultMessage:"Make Channel Admins"})}),i().createElement(Bt.A.ItemAction,{show:Boolean(e.scheme_admin),onClick:()=>this.setChannelMemberStatus(e,t,!1),text:Ut.Vw({id:"channel_members_dropdown.make_channel_members",defaultMessage:"Make Channel Members"})}),i().createElement(Bt.A.ItemAction,{onClick:()=>this.onClickRemoveGroup(e,t),text:Ut.Vw({id:"group_list_modal.removeGroupButton",defaultMessage:"Remove Group"})})))))}))}render(){const{formatMessage:e}=this.props.intl;return i().createElement(Ht.A,{titleText:e({id:"channel_groups",defaultMessage:"{channel} Groups"},{channel:this.props.channel.display_name}),searchPlaceholderText:e({id:"manage_channel_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick})}}jt(Vt,"propTypes",{actions:s().shape({getGroupsAssociatedToChannel:s().func.isRequired,unlinkGroupSyncable:s().func.isRequired,patchGroupSyncable:s().func.isRequired,getMyChannelMember:s().func.isRequired,closeModal:s().func.isRequired,openModal:s().func.isRequired}).isRequired});const zt=(0,c.injectIntl)(Vt),Wt=(0,d.connect)(((e,t)=>({channel:e.entities.channels.channels[t.channelID]})),(e=>({actions:(0,Z.bindActionCreators)({getGroupsAssociatedToChannel:xt.dJ,closeModal:O.O,openModal:O.q,unlinkGroupSyncable:xt.IC,patchGroupSyncable:xt.r2,getMyChannelMember:D.MQ},e)})))(zt),Yt=["channel"],Qt=e=>{let{channel:t}=e,n=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,Yt);const a=(0,d.useDispatch)();return i().createElement(i().Fragment,null,i().createElement(b.q7,Object.assign({id:"channelAddGroups",leadingElement:i().createElement(v.AccountMultiplePlusOutlineIcon,{size:"18px"}),onClick:()=>{a((0,O.q)({modalId:f.IQ.ADD_GROUPS_TO_CHANNEL,dialogType:Lt.A}))},labels:i().createElement(c.FormattedMessage,{id:"navbar.addGroups",defaultMessage:"Add Groups"})},n)),i().createElement(b.q7,Object.assign({id:"channelManageGroups",leadingElement:i().createElement(v.AccountMultipleOutlineIcon,{size:"18px"}),onClick:()=>{a((0,O.q)({modalId:f.IQ.MANAGE_CHANNEL_GROUPS,dialogType:Wt,dialogProps:{channelID:t.id}}))},labels:i().createElement(c.FormattedMessage,{id:"navbar_dropdown.manageGroups",defaultMessage:"Manage Groups"})},n)))},Xt=i().memo(Qt);var Kt=n(69238);const Jt=e=>{let{channel:t,id:n}=e;const a=(0,d.useDispatch)();return i().createElement(b.q7,{id:n,leadingElement:i().createElement(v.LogoutVariantIcon,{size:"18px"}),onClick:()=>{t.type===f.YM.PRIVATE_CHANNEL?a((0,O.q)({modalId:f.IQ.LEAVE_PRIVATE_CHANNEL_MODAL,dialogType:Kt.A,dialogProps:{channel:t}})):a((0,T.nE)(t.id))},labels:i().createElement(c.FormattedMessage,{id:"channel_header.leave",defaultMessage:"Leave Channel"}),isDestructive:!0})};Jt.propTypes={id:s().string};const $t=(0,o.memo)(Jt);function Zt(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class en extends i().PureComponent{constructor(e){super(e),Zt(this,"handleUnarchive",(()=>{this.props.channel.id.length===f.Ay.CHANNEL_ID_LENGTH&&(this.props.actions.unarchiveChannel(this.props.channel.id),this.onHide())})),Zt(this,"onHide",(()=>{this.setState({show:!1})})),this.state={show:!0}}render(){return i().createElement(Oe.Modal,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onExited,role:"none","aria-labelledby":"unarchiveChannelModalLabel",id:"unarchiveChannelModal"},i().createElement(Oe.Modal.Header,{closeButton:!0},i().createElement(Oe.Modal.Title,{componentClass:"h1",id:"unarchiveChannelModalLabel"},i().createElement(c.FormattedMessage,{id:"unarchive_channel.confirm",defaultMessage:"Confirm UNARCHIVE Channel"}))),i().createElement(Oe.Modal.Body,null,i().createElement("div",{className:"alert alert-danger"},i().createElement(c.FormattedMessage,{id:"unarchiveChannelModal.viewArchived.question",defaultMessage:"Are you sure you wish to unarchive the <b>{display_name}</b> channel?",values:{display_name:this.props.channel.display_name,b:e=>i().createElement("b",null,e)}}))),i().createElement(Oe.Modal.Footer,null,i().createElement("button",{type:"button",className:"btn btn-tertiary",onClick:this.onHide},i().createElement(c.FormattedMessage,{id:"unarchive_channel.cancel",defaultMessage:"Cancel"})),i().createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleUnarchive,autoFocus:!0,id:"unarchiveChannelModalDeleteButton"},i().createElement(c.FormattedMessage,{id:"unarchive_channel.del",defaultMessage:"Unarchive"}))))}}Zt(en,"propTypes",{onExited:s().func.isRequired,actions:s().shape({unarchiveChannel:s().func.isRequired}).isRequired});const tn=(0,d.connect)(null,(function(e){return{actions:(0,Z.bindActionCreators)({unarchiveChannel:D.fk},e)}}))(en),nn=e=>{let{channel:t}=e;const n=(0,d.useDispatch)();return i().createElement(i().Fragment,null,i().createElement(b.wv,null),i().createElement(b.q7,{id:"channelUnarchiveChannel",onClick:()=>{n((0,O.q)({modalId:f.IQ.UNARCHIVE_CHANNEL,dialogType:tn,dialogProps:{channel:t}}))},labels:i().createElement(c.FormattedMessage,{id:"channel_header.unarchive",defaultMessage:"Unarchive Channel"})}))},an=(0,o.memo)(nn),sn=["channel","user","isMuted","isDefault","isMobile","isFavorite","isLicensedForLDAPGroups","pluginItems","isChannelBookmarksEnabled"],ln=e=>{let{channel:t,user:n,isMuted:a,isDefault:s,isMobile:l,isFavorite:r,isLicensedForLDAPGroups:o,pluginItems:d,isChannelBookmarksEnabled:u}=e,m=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,sn);const h=!0===(null==t?void 0:t.group_constrained),g=0!==t.delete_at,p=(null==t?void 0:t.type)===f.YM.PRIVATE_CHANNEL,_=p?J.xB.MANAGE_PRIVATE_CHANNEL_MEMBERS:J.xB.MANAGE_PUBLIC_CHANNEL_MEMBERS,E=p?J.xB.DELETE_PRIVATE_CHANNEL:J.xB.DELETE_PUBLIC_CHANNEL,v=J.xB.MANAGE_TEAM;return i().createElement(i().Fragment,null,i().createElement(V,Object.assign({channel:t},m)),i().createElement(z,{userID:n.id,channel:t,isMuted:a}),!g&&i().createElement(i().Fragment,null,i().createElement(Me,{user:n,channel:t}),i().createElement(Pt,{channel:t}),u&&i().createElement(w,{channel:t})),i().createElement(b.wv,null),l&&i().createElement(i().Fragment,null,i().createElement(q,{channelID:t.id,isFavorite:r}),i().createElement(Y,{channelID:t.id}),i().createElement(b.wv,null)),(g||s)&&i().createElement(Ne,{id:"channelMembers",channel:t,text:i().createElement(c.FormattedMessage,{id:"channel_header.members",defaultMessage:"Members"})}),!g&&!s&&i().createElement(i().Fragment,null,i().createElement($.A,{channelId:t.id,teamId:t.team_id,permissions:[_]},h&&o&&i().createElement(Xt,{channel:t}),i().createElement(Ne,{id:"channelMembers",channel:t,text:i().createElement(c.FormattedMessage,{id:"channel_header.members",defaultMessage:"Members"})})),i().createElement($.A,{channelId:t.id,teamId:t.team_id,permissions:[_],invert:!0},i().createElement(Ne,{id:"channelMembers",channel:t,text:i().createElement(c.FormattedMessage,{id:"channel_header.members",defaultMessage:"Members"})}))),i().createElement(b.wv,null),i().createElement(C.A,{channel:t}),!l&&i().createElement(H,{pluginItems:d}),!s&&i().createElement(b.wv,null),!s&&!(0,y.P)(n.roles)&&i().createElement($t,{id:"channelLeaveChannel",channel:t}),g&&i().createElement(Rt,null),!g&&!s&&i().createElement($.A,{channelId:t.id,teamId:t.team_id,permissions:[E]},i().createElement(He,{channel:t})),g&&!s&&i().createElement($.A,{channelId:t.id,teamId:t.team_id,permissions:[v]},i().createElement(an,{channel:t})))};ln.propTypes={isMuted:s().bool.isRequired,isReadonly:s().bool.isRequired,isDefault:s().bool.isRequired,isMobile:s().bool.isRequired,isFavorite:s().bool.isRequired,isLicensedForLDAPGroups:s().bool.isRequired,pluginItems:s().arrayOf(s().node).isRequired,isChannelBookmarksEnabled:s().bool.isRequired};const rn=ln;var on=n(42945),cn=n(6281),dn=n(66935);function un(e){let{dmUser:t,gmMembers:n,isMobile:a,archivedIcon:s,sharedIcon:l}=e;const o=(0,c.useIntl)(),u=(0,d.useSelector)(p.HW),v=(0,d.useSelector)(h.Lw),y=(0,d.useSelector)(h.o2),C=(0,d.useSelector)(h.TJ),M=(0,d.useSelector)(h.cP),A="true"===(0,d.useSelector)(g.Ay).LDAPGroups,N=(0,d.useSelector)(_.V1),w=(0,d.useSelector)(E.wR),S=(0,dn.K)(null==v?void 0:v.id);if(!v)return null;const I=v.type===f.YM.DM_CHANNEL,T=v.type===f.YM.GM_CHANNEL;let k=v.display_name,P=o.formatMessage({id:"channel_header.otherchannel",defaultMessage:"{displayName} Channel Menu"},{displayName:v.display_name});I&&t?(k=i().createElement(on.A,{dmUser:t}),u.id===t.id&&(P=o.formatMessage({id:"channel_header.directchannel",defaultMessage:"{displayName} (you) Channel Menu"},{displayName:v.display_name}))):T&&(k=i().createElement(cn.A,{gmMembers:n}));let O=[];return S&&(O=N.map((e=>i().createElement(b.q7,{id:e.id+"_pluginmenuitem",key:e.id+"_pluginmenuitem",onClick:()=>{e.action&&e.action(v.id)},labels:i().createElement("span",null,e.text)})))),i().createElement(b.mc,{menuButtonTooltip:{text:k},menuButton:{id:"channelHeaderDropdownButton",class:r()("channel-header__trigger style--none"),children:i().createElement(i().Fragment,null,s,i().createElement("strong",{id:"channelHeaderTitle",className:"heading"},k),l,i().createElement(m(),{size:16})),"aria-label":P.toLowerCase()},menu:{id:"channelHeaderDropdownMenu"},transformOrigin:{horizontal:"left",vertical:"top"},anchorOrigin:{vertical:"bottom",horizontal:"left"}},I&&i().createElement(K,{channel:v,user:u,isMuted:M,pluginItems:O,isFavorite:C,isMobile:a||!1,isChannelBookmarksEnabled:w}),T&&i().createElement(Ie,{channel:v,user:u,isMuted:M,pluginItems:O,isFavorite:C,isMobile:a||!1,isChannelBookmarksEnabled:w}),!I&&!T&&i().createElement(rn,{channel:v,user:u,isMuted:M,pluginItems:O,isFavorite:C,isMobile:a||!1,isDefault:y,isReadonly:!1,isLicensedForLDAPGroups:A,isChannelBookmarksEnabled:w}),i().createElement(Pe,{isMobile:a||!1,pluginItems:O,channel:v}))}un.propTypes={gmMembers:s().array,archivedIcon:s().element,sharedIcon:s().element,isMobile:s().bool}},27039:(e,t,n)=>{n.d(t,{A:()=>E});var a=n(62688),s=n.n(a),l=(n(43813),n(97023)),r=n.n(l),o=n(14778),i=n(23453),c=n(17651),d=n(43595),u=n(65952),m=n(31423),h=n(21650),g=n(70669),p=n(27840);const _=e=>{const t=(0,i.useSelector)(h.t9),n=(0,i.useSelector)(u.tW),a=(0,i.useSelector)((0,d.HV)(c.x5.CHANNEL_HEADER_ICON)),s=(0,o.useIntl)(),l=(0,i.useDispatch)(),_=t=>{const n=()=>f(t);return e.isDropdown?r().createElement(g.q7,{key:"mobileChannelHeaderItem"+t.app_id+t.location,onClick:n,labels:r().createElement("span",null,t.label)}):r().createElement("li",{className:"flex-parent--center"},r().createElement("button",{id:"".concat(t.app_id,"_").concat(t.location),className:"navbar-toggle navbar-right__icon",onClick:n},r().createElement("span",{className:"icon navbar-plugin-button"},r().createElement("img",{alt:"",src:t.icon,width:"16",height:"16"}))))},E=t=>{const n=()=>b(t);return e.isDropdown?r().createElement(g.q7,{key:"mobileChannelHeaderItem"+t.id,id:"mobileChannelHeaderItem"+t.id,onClick:n,labels:r().createElement("span",null,t.dropdownText),leadingElement:t.icon}):r().createElement("li",{className:"flex-parent--center"},r().createElement("button",{className:"navbar-toggle navbar-right__icon",onClick:n},r().createElement("span",{className:"icon navbar-plugin-button"},t.icon)))},b=t=>{var a;return null===(a=t.action)||void 0===a?void 0:a.call(t,e.channel,n)},f=async t=>{const{channel:n}=e,a=(0,p.aC)(t.app_id,t.location,n.id,n.team_id),r=(e,t)=>{if(t){const e=t.text||s.formatMessage({id:"apps.error.unknown",defaultMessage:"Unknown error occurred."});l((0,m.hV)(t,e,n.id))}else switch(e.type){case c.G4.OK:e.text&&l((0,m.hV)(e,e.text,n.id));break;case c.G4.NAVIGATE:break;case c.G4.FORM:e.form&&l((0,m.el)(e.form,a));break;default:{const t=s.formatMessage({id:"apps.error.responses.unknown_type",defaultMessage:"App response type not supported. Response type: {type}."},{type:e.type});l((0,m.hV)(e,t,n.id))}}},o=await l((0,m.I$)(t,a,s));o.error?r(null,o.error):r(o.data)},v=t||[],y=a||[];if(0===v.length&&0===y.length)return r().createElement(r().Fragment,null);if(1===v.length&&0===y.length)return E(v[0]);if(0===v.length&&1===y.length)return _(y[0]);if(!e.isDropdown)return r().createElement(r().Fragment,null);const C=v.map(E),M=(e=>e.map(_))(y);return r().createElement(r().Fragment,null,r().createElement(g.wv,null),M,C)};_.propTypes={isDropdown:s().bool.isRequired};const E=(0,l.memo)(_)},78625:(e,t,n)=>{n.d(t,{j:()=>i,l:()=>o});var a=n(47958),s=n(40057),l=n(65952),r=n(26614);const o=e=>{const t=(0,r.Ay)(e);return(null==t?void 0:t.SkuShortName)===s.Bz.SKUEnterpriseAdvanced},i=(e,t)=>{if(!o(e))return!1;const n=(0,l.c3)(e,t),r=(0,l.c)(e,t);return Boolean(r&&(r.type===s.Bz.OPEN_CHANNEL||r.type===s.Bz.PRIVATE_CHANNEL))&&(0,a.z)(n)}},47958:(e,t)=>{t.z=function(e){return!!e&&(Boolean(e.enabled)&&Boolean(e.text)&&Boolean(e.background_color))}}}]);
//# sourceMappingURL=4014.a67303f26f458d4421cb.js.map